import{w as Ee,x as Pe,M,y as Ue,d as Y,z as Be,A as Le,g as Te,j as Ne,V as se,B as qe,q as He,C as Oe,k as ze,l as Ke}from"./VTextarea-vvA5kftK.js";import{p as $e,q as We,S as je,r as B,G as E,az as Je,C as ie,D as Ge,s as D,H as Xe,J as P,bk as re,R as ce,bo as Ye,u as Ze,a as x,O as A,bX as Qe,bY as et,K as tt,cD as at,bZ as de,l as _,a1 as ve,b$ as lt,F as j,c0 as nt,v as ut,A as ot,z as st,b as it,d as Z,W as Q,X as ee,e as te,o as ae,B as rt,c4 as ct,cE as J,cF as dt,c8 as U,a3 as vt,Y as ft}from"./VSnackbar-4WS0ckTD.js";import{u as mt,m as ht,h as pt}from"./filter-CvjbZj6R.js";const bt=(e,u)=>{const o=e.__vccOpts||e;for(const[a,g]of u)o[a]=g;return o},yt=We({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...ht({filterKeys:["title"]}),...Be({hideNoData:!0,returnObject:!0}),...tt(Le({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...et({transition:!1})},"VCombobox"),gt=$e()({name:"VCombobox",props:yt(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:search":e=>!0,"update:menu":e=>!0},setup(e,u){var ne;let{emit:o,slots:a}=u;const{t:g}=je(),r=B(),m=E(!1),p=E(!0),V=E(!1),C=B(),O=B(),c=E(-1);let z=!1;const{items:fe,transformIn:me,transformOut:he}=Ee(e),{textColorClasses:pe,textColorStyles:be}=Je(()=>{var t;return(t=r.value)==null?void 0:t.color}),s=ie(e,"modelValue",[],t=>me(Ge(t)),t=>{const l=he(t);return e.multiple?l:l[0]??null}),L=Pe(e),T=D(()=>!!(e.chips||a.chip)),w=D(()=>T.value||!!a.selection),F=E(!e.multiple&&!w.value?((ne=s.value[0])==null?void 0:ne.title)??"":""),h=D({get:()=>F.value,set:t=>{var l;if(F.value=t??"",!e.multiple&&!w.value&&(s.value=[M(e,t)]),t&&e.multiple&&((l=e.delimiters)!=null&&l.length)){const d=t.split(new RegExp(`(?:${e.delimiters.join("|")})+`));d.length>1&&(d.forEach(n=>{n=n.trim(),n&&S(M(e,n))}),F.value="")}t||(c.value=-1),p.value=!t}}),ye=D(()=>typeof e.counterValue=="function"?e.counterValue(s.value):typeof e.counterValue=="number"?e.counterValue:e.multiple?s.value.length:h.value.length),{filteredItems:N,getMatches:ge}=mt(e,fe,()=>p.value?"":h.value),I=D(()=>e.hideSelected?N.value.filter(t=>!s.value.some(l=>l.value===t.value)):N.value),q=D(()=>e.hideNoData&&!I.value.length||L.isReadonly.value||L.isDisabled.value),K=ie(e,"menu"),v=D({get:()=>K.value,set:t=>{var l;K.value&&!t&&((l=C.value)!=null&&l.ΨopenChildren.size)||t&&q.value||(K.value=t)}}),le=Xe(()=>v.value?e.closeText:e.openText);P(F,t=>{z?ce(()=>z=!1):m.value&&!v.value&&(v.value=!0),o("update:search",t)}),P(s,t=>{var l;!e.multiple&&!w.value&&(F.value=((l=t[0])==null?void 0:l.title)??"")});const Ve=D(()=>s.value.map(t=>t.value)),$=D(()=>{var l;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&h.value===((l=I.value[0])==null?void 0:l.title))&&I.value.length>0&&!p.value&&!V.value}),W=B(),xe=Ue(W,r);function Se(t){z=!0,e.openOnClear&&(v.value=!0)}function ke(){q.value||(v.value=!0)}function Ce(t){q.value||(m.value&&(t.preventDefault(),t.stopPropagation()),v.value=!v.value)}function we(t){var l;t.key!==" "&&de(t)&&((l=r.value)==null||l.focus())}function De(t){var n,f,b,k;if(at(t)||L.isReadonly.value)return;const l=(n=r.value)==null?void 0:n.selectionStart,d=s.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"].includes(t.key)&&(v.value=!0),["Escape"].includes(t.key)&&(v.value=!1),["Enter","Escape","Tab"].includes(t.key)&&($.value&&["Enter","Tab"].includes(t.key)&&!s.value.some(i=>{let{value:R}=i;return R===I.value[0].value})&&S(N.value[0]),p.value=!0),t.key==="ArrowDown"&&$.value&&((f=W.value)==null||f.focus("next")),t.key==="Enter"&&h.value&&(S(M(e,h.value)),w.value&&(F.value="")),["Backspace","Delete"].includes(t.key)){if(!e.multiple&&w.value&&s.value.length>0&&!h.value)return S(s.value[0],!1);if(~c.value){t.preventDefault();const i=c.value;S(s.value[c.value],!1),c.value=i>=d-1?d-2:i}else t.key==="Backspace"&&!h.value&&(c.value=d-1);return}if(e.multiple)if(t.key==="ArrowLeft"){if(c.value<0&&l&&l>0)return;const i=c.value>-1?c.value-1:d-1;s.value[i]?c.value=i:(c.value=-1,(b=r.value)==null||b.setSelectionRange(h.value.length,h.value.length))}else if(t.key==="ArrowRight"){if(c.value<0)return;const i=c.value+1;s.value[i]?c.value=i:(c.value=-1,(k=r.value)==null||k.setSelectionRange(0,0))}else~c.value&&de(t)&&(c.value=-1)}function Fe(){var t;e.eager&&((t=O.value)==null||t.calculateVisibleItems())}function Ie(){var t;m.value&&(p.value=!0,(t=r.value)==null||t.focus())}function S(t){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!t||t.props.disabled))if(e.multiple){const d=s.value.findIndex(f=>(e.valueComparator||re)(f.value,t.value)),n=l??!~d;if(~d){const f=n?[...s.value,t]:[...s.value];f.splice(d,1),s.value=f}else n&&(s.value=[...s.value,t]);e.clearOnSelect&&(h.value="")}else{const d=l!==!1;s.value=d?[t]:[],F.value=d&&!w.value?t.title:"",ce(()=>{v.value=!1,p.value=!0})}}function Re(t){m.value=!0,setTimeout(()=>{V.value=!0})}function Ae(t){V.value=!1}function _e(t){(t==null||t===""&&!e.multiple&&!w.value)&&(s.value=[])}return P(m,(t,l)=>{if(!(t||t===l)&&(c.value=-1,v.value=!1,h.value)){if(e.multiple){S(M(e,h.value));return}if(!w.value)return;s.value.some(d=>{let{title:n}=d;return n===h.value})?F.value="":S(M(e,h.value))}}),P(v,()=>{if(!e.hideSelected&&v.value&&s.value.length){const t=I.value.findIndex(l=>s.value.some(d=>(e.valueComparator||re)(d.value,l.value)));Ye&&window.requestAnimationFrame(()=>{var l;t>=0&&((l=O.value)==null||l.scrollToIndex(t))})}}),P(()=>e.items,(t,l)=>{v.value||m.value&&!l.length&&t.length&&(v.value=!0)}),Ze(()=>{const t=!!(!e.hideNoData||I.value.length||a["prepend-item"]||a["append-item"]||a["no-data"]),l=s.value.length>0,d=Y.filterProps(e);return x(Y,A({ref:r},d,{modelValue:h.value,"onUpdate:modelValue":[n=>h.value=n,_e],focused:m.value,"onUpdate:focused":n=>m.value=n,validationValue:s.externalValue,counterValue:ye.value,dirty:l,class:["v-combobox",{"v-combobox--active-menu":v.value,"v-combobox--chips":!!e.chips,"v-combobox--selection-slot":!!w.value,"v-combobox--selecting-index":c.value>-1,[`v-combobox--${e.multiple?"multiple":"single"}`]:!0},e.class],style:e.style,readonly:L.isReadonly.value,placeholder:l?void 0:e.placeholder,"onClick:clear":Se,"onMousedown:control":ke,onKeydown:De}),{...a,default:()=>_(j,null,[x(Te,A({ref:C,modelValue:v.value,"onUpdate:modelValue":n=>v.value=n,activator:"parent",contentClass:"v-combobox__content",disabled:q.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:Fe,onAfterLeave:Ie},e.menuProps),{default:()=>[t&&x(Ne,A({ref:W,selected:Ve.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:n=>n.preventDefault(),onKeydown:we,onFocusin:Re,onFocusout:Ae,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},xe,e.listProps),{default:()=>{var n,f,b;return[(n=a["prepend-item"])==null?void 0:n.call(a),!I.value.length&&!e.hideNoData&&(((f=a["no-data"])==null?void 0:f.call(a))??x(se,{key:"no-data",title:g(e.noDataText)},null)),x(qe,{ref:O,renderless:!0,items:I.value,itemKey:"value"},{default:k=>{var oe;let{item:i,index:R,itemRef:y}=k;const ue=A(i.props,{ref:y,key:i.value,active:$.value&&R===0?!0:void 0,onClick:()=>S(i,null)});return((oe=a.item)==null?void 0:oe.call(a,{item:i,index:R,props:ue}))??x(se,A(ue,{role:"option"}),{prepend:H=>{let{isSelected:Me}=H;return _(j,null,[e.multiple&&!e.hideSelected?x(He,{key:i.value,modelValue:Me,ripple:!1,tabindex:"-1"},null):void 0,i.props.prependAvatar&&x(Oe,{image:i.props.prependAvatar},null),i.props.prependIcon&&x(ve,{icon:i.props.prependIcon},null)])},title:()=>{var H;return p.value?i.title:pt("v-combobox",i.title,(H=ge(i))==null?void 0:H.title)}})}}),(b=a["append-item"])==null?void 0:b.call(a)]}})]}),s.value.map((n,f)=>{function b(y){y.stopPropagation(),y.preventDefault(),S(n,!1)}const k={"onClick:close":b,onKeydown(y){y.key!=="Enter"&&y.key!==" "||(y.preventDefault(),y.stopPropagation(),b(y))},onMousedown(y){y.preventDefault(),y.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},i=T.value?!!a.chip:!!a.selection,R=i?nt(T.value?a.chip({item:n,index:f,props:k}):a.selection({item:n,index:f})):void 0;if(!(i&&!R))return _("div",{key:n.value,class:ot(["v-combobox__selection",f===c.value&&["v-combobox__selection--selected",pe.value]]),style:ut(f===c.value?be.value:{})},[T.value?a.chip?x(st,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:n.title}}},{default:()=>[R]}):x(ze,A({key:"chip",closable:e.closableChips,size:"small",text:n.title,disabled:n.props.disabled},k),null):R??_("span",{class:"v-combobox__selection-text"},[n.title,e.multiple&&f<s.value.length-1&&_("span",{class:"v-combobox__selection-comma"},[it(",")])])])})]),"append-inner":function(){var k,i;for(var n=arguments.length,f=new Array(n),b=0;b<n;b++)f[b]=arguments[b];return _(j,null,[(k=a["append-inner"])==null?void 0:k.call(a,...f),(!e.hideNoData||e.items.length)&&e.menuIcon?x(ve,{class:"v-combobox__menu-icon",color:(i=r.value)==null?void 0:i.fieldIconColor,icon:e.menuIcon,onMousedown:Ce,onClick:lt,"aria-label":g(le.value),title:g(le.value),tabindex:"-1"},null):void 0])}})}),Qe({isFocused:m,isPristine:p,menu:v,search:h,selectionIndex:c,filteredItems:N,select:S},r)}}),wt=Z({__name:"StringList",props:Q({label:{},formatter:{type:Function},hideDetails:{type:Boolean},readonly:{type:Boolean},rule:{type:Function}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const u=e,o=ee(e,"modelValue");function a(r){r=r||[];const m=u.formatter??(p=>p);o.value=r.map(m)}function g(r){return u.rule(r)}return(r,m)=>(ae(),te(gt,{variant:"outlined",density:"compact",label:u.label,chips:"",multiple:"","closable-chips":"",modelValue:o.value,"onUpdate:modelValue":[m[0]||(m[0]=p=>o.value=p),a],rules:u.rule?[g]:void 0},null,8,["label","modelValue","rules"]))}}),Vt=Z({__name:"DateNaissanceField",props:Q({label:{},hideDetails:{type:Boolean},readonly:{type:Boolean},error:{},rule:{type:Function}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const u=e,o=ee(e,"modelValue"),a=rt(),g=B(ct(o.value)?"":a.parseISO(o.value).toLocaleDateString());function r(V){V=dt(V),g.value=V;const C=J(V);C!==void 0&&(o.value=C)}function m(){J(g.value)===void 0&&(o.value="0001-01-01")}function p(V){if(!V.length)return u.rule("0001-01-01");const C=J(V);return C===void 0?!1:u.rule(C)}return(V,C)=>(ae(),te(Y,{class:"center-text",variant:"outlined",density:"compact",placeholder:"JJ/MM/AAAA",label:u.label||"Date de naissance","model-value":g.value,"onUpdate:modelValue":r,readonly:u.readonly,rules:u.rule?[p]:void 0,"hide-details":u.hideDetails,onBlur:m},null,8,["label","model-value","readonly","rules","hide-details"]))}}),Dt=bt(Vt,[["__scopeId","data-v-fb288a49"]]),G={Autre:0,Francaise:1,Suisse:2},Ft={[G.Autre]:"Autre",[G.Francaise]:"Française",[G.Suisse]:"Suisse"},X={NoSexe:0,Woman:1,Man:2},xt={[X.NoSexe]:"",[X.Woman]:"Femme",[X.Man]:"Homme"};class It{constructor(u,o){this.baseURL=u,this.authToken=o}getHeaders(){return{Authorization:"Bearer "+this.authToken}}async ConfirmeInscription(u){const o=this.baseURL+"/inscription/confirme";this.startRequest();try{return await U.get(o,{headers:this.getHeaders(),params:{"insc-token":u["insc-token"]}}),!0}catch(a){this.handleError(a)}}async GetCamps(){const u=this.baseURL+"/api/v1/inscription/camps";this.startRequest();try{return(await U.get(u,{headers:this.getHeaders()})).data}catch(o){this.handleError(o)}}async InitInscription(u){const o=this.baseURL+"/api/v1/inscription";this.startRequest();try{return(await U.get(o,{headers:this.getHeaders(),params:{preinscription:u.preinscription}})).data}catch(a){this.handleError(a)}}async SaveInscription(u){const o=this.baseURL+"/api/v1/inscription";this.startRequest();try{return await U.put(o,u,{headers:this.getHeaders()}),!0}catch(a){this.handleError(a)}}async SearchHistory(u){const o=this.baseURL+"/api/v1/inscription/search";this.startRequest();try{return(await U.get(o,{headers:this.getHeaders(),params:{mail:u.mail}})).data}catch(a){this.handleError(a)}}}const Rt=Z({__name:"SexeField",props:Q({hideDetails:{type:Boolean},readonly:{type:Boolean},rules:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const u=e,o=ee(e,"modelValue"),a=vt(xt);return(g,r)=>(ae(),te(Ke,{label:"Sexe",variant:"outlined",density:"compact",items:ft(a),readonly:u.readonly,"hide-details":u.hideDetails,modelValue:o.value,"onUpdate:modelValue":r[0]||(r[0]=m=>o.value=m),rules:u.rules},null,8,["items","readonly","hide-details","modelValue","rules"]))}});export{It as A,Ft as N,X as S,gt as V,bt as _,wt as a,Rt as b,Dt as c,G as d};
