import{ba as wt,bV as Pt,bc as Ct,a$ as xt,a_ as _t,aG as It,P as le,c as T,D as Dt,ae as Be,R as ie,bs as ot,bW as Tt,bX as Me,W as Mt,bY as Rt,bx as At,z as Ee,A as $e,$ as Bt,ao as Et,bZ as $t,G as Oe,b_ as Ft,ap as Nt,b$ as Lt,c0 as zt,N as be,c1 as Ut,c2 as Ht,k as L,c3 as Ot,Q as Pe,aC as qe,c4 as qt,c5 as Wt,aq as Yt,C as Fe,at as jt,au as Xt,aw as Kt,c6 as Qt,ax as Gt,c7 as Zt,c8 as Jt,az as ea,aA as ta,j as M,b as a,i as aa,H as Ne,X as B,c9 as la,ca as na,F as X,cb as oa,J as Re,E as Ce,cc as ia,cd as sa,ce as ua,cf as ra,cg as it,ch as ca,a6 as U,ci as da,al as va,B as fa,aO as ma,O as pa,cj as ga,ck as ya,S as ha,cl as Qe,cm as Ge,bN as ba,cn as Va,co as ka,cp as Sa,e as g,d as K,v as De,x as ke,y as w,a1 as h,aW as Xe,aV as Ke,o as m,cq as wa,l as ve,w as n,m as fe,a as ee,a4 as Ve,aK as me,a5 as N,t as F,cr as Pa,q as G,a8 as Ca,aL as st,ab as xa,a3 as se,g as Z,h as S,s as Le,aM as xe,cs as _a,ct as Ia,r as We,a7 as ut,aT as Ye,bG as Da}from"./VSnackbar-CoLoRMBr.js";import{V as Ze,m as Ta}from"./VSheet-3mzqFlWj.js";import{u as Ma,o as Je,p as et,q as Ra,r as Aa,s as Ba,t as Ea,v as $a,w as Fa,b as Ae,x as Na,y as La,e as ze,g as _e,V as te,z as za,a as je,k as Ua,n as Ha,h as de,i as rt,c as pe,f as Oa}from"./VTextarea-p7qetQbe.js";import{V as Ie}from"./FileCard.vue_vue_type_script_setup_true_lang-DaCyq3eR.js";import{f as qa}from"./VTabs-B4Uxzzl_.js";import{u as Wa,m as Ya,h as ja,V as Xa}from"./VForm-DfUsynlk.js";class Ka extends Pt{constructor(o,t,d,l,s){super(l,s),this.onError=o,this.showMessage=t,this.isFondsSoutien=d}hasToken(){return this.authToken!=""}setToken(o,t){this.authToken=o,this.isFondsSoutien=t}handleError(o){const{kind:t,messageHtml:d}=Ct(o);this.onError(t,d)}startRequest(){}}const tt=new Ka((e,o)=>{},(e,o)=>{},!1,wt(),"");function Pl(e){return e.Camp.Statut!=It.Ferme&&!e.IsTerminated}function ct(){return{Pattern:"",IdCamp:{Valid:!1,Id:0},Attente:_t.EmptyQA,Reglement:xt.EmptyQR,SortByNewMessages:!1,OnlyFondSoutien:!1}}function Qa(e){const o=ct();return o.Pattern=`id:${e}`,o}function Ga(e){let{rootEl:o,isSticky:t,layoutItemStyles:d}=e;const l=le(!1),s=le(0),i=T(()=>{const u=typeof l.value=="boolean"?"top":l.value;return[t.value?{top:"auto",bottom:"auto",height:void 0}:void 0,l.value?{[u]:Dt(s.value)}:{top:d.value.top}]});Be(()=>{ie(t,u=>{u?window.addEventListener("scroll",p,{passive:!0}):window.removeEventListener("scroll",p)},{immediate:!0})}),ot(()=>{window.removeEventListener("scroll",p)});let c=0;function p(){const u=c>window.scrollY?"up":"down",r=o.value.getBoundingClientRect(),f=parseFloat(d.value.top??0),P=window.scrollY-Math.max(0,s.value-f),D=r.height+Math.max(s.value,f)-window.scrollY-window.innerHeight,k=parseFloat(getComputedStyle(o.value).getPropertyValue("--v-body-scroll-y"))||0;r.height<window.innerHeight-f?(l.value="top",s.value=f):u==="up"&&l.value==="bottom"||u==="down"&&l.value==="top"?(s.value=window.scrollY+r.top-k,l.value=!0):u==="down"&&D<=0?(s.value=0,l.value="bottom"):u==="up"&&P<=0&&(k?l.value!=="top"&&(s.value=-P+k+f,l.value="top"):(s.value=r.top+P,l.value="top")),c=window.scrollY}return{isStuck:l,stickyStyles:i}}const Za=100,Ja=20;function at(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function lt(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let o=0;for(let t=e.length-1;t>0;t--){if(e[t].t===e[t-1].t)continue;const d=at(o),l=(e[t].d-e[t-1].d)/(e[t].t-e[t-1].t);o+=(l-d)*Math.abs(l),t===e.length-1&&(o*=.5)}return at(o)*1e3}function el(){const e={};function o(l){Array.from(l.changedTouches).forEach(s=>{(e[s.identifier]??(e[s.identifier]=new Tt(Ja))).push([l.timeStamp,s])})}function t(l){Array.from(l.changedTouches).forEach(s=>{delete e[s.identifier]})}function d(l){const s=e[l]?.values().reverse();if(!s)throw new Error(`No samples for touch id ${l}`);const i=s[0],c=[],p=[];for(const u of s){if(i[0]-u[0]>Za)break;c.push({t:u[0],d:u[1].clientX}),p.push({t:u[0],d:u[1].clientY})}return{x:lt(c),y:lt(p),get direction(){const{x:u,y:r}=this,[f,P]=[Math.abs(u),Math.abs(r)];return f>P&&u>=0?"right":f>P&&u<=0?"left":P>f&&r>=0?"down":P>f&&r<=0?"up":tl()}}}return{addMovement:o,endTouch:t,getVelocity:d}}function tl(){throw new Error}function al(e){let{el:o,isActive:t,isTemporary:d,width:l,touchless:s,position:i}=e;Be(()=>{window.addEventListener("touchstart",W,{passive:!0}),window.addEventListener("touchmove",Y,{passive:!1}),window.addEventListener("touchend",ne,{passive:!0})}),ot(()=>{window.removeEventListener("touchstart",W),window.removeEventListener("touchmove",Y),window.removeEventListener("touchend",ne)});const c=T(()=>["left","right"].includes(i.value)),{addMovement:p,endTouch:u,getVelocity:r}=el();let f=!1;const P=le(!1),D=le(0),k=le(0);let $;function b(y,_){return(i.value==="left"?y:i.value==="right"?document.documentElement.clientWidth-y:i.value==="top"?y:i.value==="bottom"?document.documentElement.clientHeight-y:he())-(_?l.value:0)}function V(y){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const I=i.value==="left"?(y-k.value)/l.value:i.value==="right"?(document.documentElement.clientWidth-y-k.value)/l.value:i.value==="top"?(y-k.value)/l.value:i.value==="bottom"?(document.documentElement.clientHeight-y-k.value)/l.value:he();return _?At(I):I}function W(y){if(s.value)return;const _=y.changedTouches[0].clientX,I=y.changedTouches[0].clientY,A=25,H=i.value==="left"?_<A:i.value==="right"?_>document.documentElement.clientWidth-A:i.value==="top"?I<A:i.value==="bottom"?I>document.documentElement.clientHeight-A:he(),z=t.value&&(i.value==="left"?_<l.value:i.value==="right"?_>document.documentElement.clientWidth-l.value:i.value==="top"?I<l.value:i.value==="bottom"?I>document.documentElement.clientHeight-l.value:he());(H||z||t.value&&d.value)&&($=[_,I],k.value=b(c.value?_:I,t.value),D.value=V(c.value?_:I),f=k.value>-20&&k.value<80,u(y),p(y))}function Y(y){const _=y.changedTouches[0].clientX,I=y.changedTouches[0].clientY;if(f){if(!y.cancelable){f=!1;return}const H=Math.abs(_-$[0]),z=Math.abs(I-$[1]);(c.value?H>z&&H>3:z>H&&z>3)?(P.value=!0,f=!1):(c.value?z:H)>3&&(f=!1)}if(!P.value)return;y.preventDefault(),p(y);const A=V(c.value?_:I,!1);D.value=Math.max(0,Math.min(1,A)),A>1?k.value=b(c.value?_:I,!0):A<0&&(k.value=b(c.value?_:I,!1))}function ne(y){if(f=!1,!P.value)return;p(y),P.value=!1;const _=r(y.changedTouches[0].identifier),I=Math.abs(_.x),A=Math.abs(_.y);(c.value?I>A&&I>400:A>I&&A>3)?t.value=_.direction===({left:"right",right:"left",top:"down",bottom:"up"}[i.value]||he()):t.value=D.value>.5}const ue=T(()=>P.value?{transform:i.value==="left"?`translateX(calc(-100% + ${D.value*l.value}px))`:i.value==="right"?`translateX(calc(100% - ${D.value*l.value}px))`:i.value==="top"?`translateY(calc(-100% + ${D.value*l.value}px))`:i.value==="bottom"?`translateY(calc(100% - ${D.value*l.value}px))`:he(),transition:"none"}:void 0);return Me(P,()=>{const y=o.value?.style.transform??null,_=o.value?.style.transition??null;Mt(()=>{o.value?.style.setProperty("transform",ue.value?.transform||"none"),o.value?.style.setProperty("transition",ue.value?.transition||null)}),Rt(()=>{o.value?.style.setProperty("transform",y),o.value?.style.setProperty("transition",_)})}),{isDragging:P,dragProgress:D,dragStyles:ue}}function he(){throw new Error}const ll=["start","end","left","right","top","bottom"],nl=$e({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>ll.includes(e)},sticky:Boolean,...ta(),...ea(),...Jt(),...Zt({mobile:null}),...Gt(),...Qt(),...Kt(),...Xt({tag:"nav"}),...jt()},"VNavigationDrawer"),Cl=Ee()({name:"VNavigationDrawer",props:nl(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,o){let{attrs:t,emit:d,slots:l}=o;const{isRtl:s}=Bt(),{themeClasses:i}=Et(e),{borderClasses:c}=$t(e),{backgroundColorClasses:p,backgroundColorStyles:u}=Oe(()=>e.color),{elevationClasses:r}=Ft(e),{displayClasses:f,mobile:P}=Nt(e),{roundedClasses:D}=Lt(e),k=zt(),$=be(e,"modelValue",null,q=>!!q),{ssrBootStyles:b}=Ut(),{scopeId:V}=Ht(),W=L(),Y=le(!1),{runOpenDelay:ne,runCloseDelay:ue}=la(e,q=>{Y.value=q}),y=T(()=>e.rail&&e.expandOnHover&&Y.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),_=T(()=>Ot(e.location,s.value)),I=Pe(()=>e.persistent),A=T(()=>!e.permanent&&(P.value||e.temporary)),H=T(()=>e.sticky&&!A.value&&_.value!=="bottom");Me(()=>e.expandOnHover&&e.rail!=null,()=>{ie(Y,q=>d("update:rail",!q))}),Me(()=>!e.disableResizeWatcher,()=>{ie(A,q=>!e.permanent&&qe(()=>$.value=!q))}),Me(()=>!e.disableRouteWatcher&&!!k,()=>{ie(k.currentRoute,()=>A.value&&($.value=!1))}),ie(()=>e.permanent,q=>{q&&($.value=!0)}),e.modelValue==null&&!A.value&&($.value=e.permanent||!P.value);const{isDragging:z,dragProgress:ae}=al({el:W,isActive:$,isTemporary:A,width:y,touchless:Pe(()=>e.touchless),position:_}),R=T(()=>{const q=A.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):y.value;return z.value?q*ae.value:q}),{layoutItemStyles:re,layoutItemScrimStyles:J}=qt({id:e.name,order:T(()=>parseInt(e.order,10)),position:_,layoutSize:R,elementSize:y,active:Wt($),disableTransitions:Pe(()=>z.value),absolute:T(()=>e.absolute||H.value&&typeof ge.value!="string")}),{isStuck:ge,stickyStyles:ye}=Ga({rootEl:W,isSticky:H,layoutItemStyles:re}),oe=Oe(()=>typeof e.scrim=="string"?e.scrim:null),Ue=T(()=>({...z.value?{opacity:ae.value*.2,transition:"none"}:void 0,...J.value}));return Yt({VList:{bgColor:"transparent"}}),Fe(()=>{const q=l.image||e.image;return M(X,null,[a(e.tag,B({ref:W,onMouseenter:ne,onMouseleave:ue,class:["v-navigation-drawer",`v-navigation-drawer--${_.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":Y.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":A.value,"v-navigation-drawer--persistent":I.value,"v-navigation-drawer--active":$.value,"v-navigation-drawer--sticky":H.value},i.value,p.value,c.value,f.value,r.value,D.value,e.class],style:[u.value,re.value,b.value,ye.value,e.style]},V,t),{default:()=>[q&&M("div",{key:"image",class:"v-navigation-drawer__img"},[l.image?a(Ne,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},l.image):a(aa,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),l.prepend&&M("div",{class:"v-navigation-drawer__prepend"},[l.prepend?.()]),M("div",{class:"v-navigation-drawer__content"},[l.default?.()]),l.append&&M("div",{class:"v-navigation-drawer__append"},[l.append?.()])]}),a(na,{name:"fade-transition"},{default:()=>[A.value&&(z.value||$.value)&&!!e.scrim&&M("div",B({class:["v-navigation-drawer__scrim",oe.backgroundColorClasses.value],style:[Ue.value,oe.backgroundColorStyles.value],onClick:()=>{I.value||($.value=!1)}},V),null)]})])}),{isStuck:ge}}}),ol=oa("v-picker-title"),il=$e({bgColor:String,divided:Boolean,landscape:Boolean,title:String,hideHeader:Boolean,hideTitle:Boolean,...Ta()},"VPicker"),xl=Ee()({name:"VPicker",props:il(),setup(e,o){let{slots:t}=o;const{backgroundColorClasses:d,backgroundColorStyles:l}=Oe(()=>e.color);return Fe(()=>{const s=Ze.filterProps(e),i=!e.hideTitle&&!!(e.title||t.title);return a(Ze,B(s,{color:e.bgColor,class:["v-picker",{"v-picker--divided":e.divided,"v-picker--landscape":e.landscape,"v-picker--with-actions":!!t.actions},e.class],style:e.style}),{default:()=>[!e.hideHeader&&M("div",{key:"header",class:Ce([d.value]),style:Re([l.value])},[i&&a(ol,{key:"picker-title"},{default:()=>[t.title?.()??e.title]}),t.header&&M("div",{class:"v-picker__header"},[t.header()])]),M("div",{class:"v-picker__body"},[t.default?.()]),t.actions&&a(Ne,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[M("div",{class:"v-picker__actions"},[t.actions()])]})]})}),{}}}),sl=$e({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Aa(),...Ra()},"VSwitch"),_l=Ee()({name:"VSwitch",inheritAttrs:!1,props:sl(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,o){let{attrs:t,slots:d}=o;const l=be(e,"indeterminate"),s=be(e,"modelValue"),{loaderClasses:i}=ia(e),{isFocused:c,focus:p,blur:u}=Ma(e),r=L(),f=L(),P=sa&&window.matchMedia("(forced-colors: active)").matches,D=Pe(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),k=ua(),$=Pe(()=>e.id||`switch-${k}`);function b(){l.value&&(l.value=!1)}function V(W){W.stopPropagation(),W.preventDefault(),r.value?.input?.click()}return Fe(()=>{const[W,Y]=ra(t),ne=Je.filterProps(e),ue=et.filterProps(e);return a(Je,B({ref:f,class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":l.value},i.value,e.class]},W,ne,{modelValue:s.value,"onUpdate:modelValue":y=>s.value=y,id:$.value,focused:c.value,style:e.style}),{...d,default:y=>{let{id:_,messagesId:I,isDisabled:A,isReadonly:H,isValid:z}=y;const ae={model:s,isValid:z};return a(et,B({ref:r},ue,{modelValue:s.value,"onUpdate:modelValue":[R=>s.value=R,b],id:_.value,"aria-describedby":I.value,type:"checkbox","aria-checked":l.value?"mixed":void 0,disabled:A.value,readonly:H.value,onFocus:p,onBlur:u},Y),{...d,default:R=>{let{backgroundColorClasses:re,backgroundColorStyles:J}=R;return M("div",{class:Ce(["v-switch__track",P?void 0:re.value]),style:Re(J.value),onClick:V},[d["track-true"]&&M("div",{key:"prepend",class:"v-switch__track-true"},[d["track-true"](ae)]),d["track-false"]&&M("div",{key:"append",class:"v-switch__track-false"},[d["track-false"](ae)])])},input:R=>{let{inputNode:re,icon:J,backgroundColorClasses:ge,backgroundColorStyles:ye}=R;return M(X,null,[re,M("div",{class:Ce(["v-switch__thumb",{"v-switch__thumb--filled":J||e.loading},e.inset||P?void 0:ge.value]),style:Re(e.inset?void 0:ye.value)},[d.thumb?a(Ne,{defaults:{VIcon:{icon:J,size:"x-small"}}},{default:()=>[d.thumb({...ae,icon:J})]}):a(ca,null,{default:()=>[e.loading?a(da,{name:"v-switch",active:!0,color:z.value===!1?void 0:D.value},{default:oe=>d.loader?d.loader(oe):a(va,{active:oe.isActive,color:oe.color,indeterminate:!0,size:"16",width:"2"},null)}):J&&a(U,{key:String(J),icon:J,size:"x-small"},null)]})])])}})}})}),it({},f)}}),ul=$e({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...Ya({filterKeys:["title"]}),...Na(),...ha(La({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ya({transition:!1})},"VAutocomplete"),dt=Ee()({name:"VAutocomplete",props:ul(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,o){let{slots:t}=o;const{t:d}=fa(),l=L(),s=le(!1),i=le(!0),c=le(!1),p=L(),u=L(),r=le(-1),{items:f,transformIn:P,transformOut:D}=Ba(e),{textColorClasses:k,textColorStyles:$}=ma(()=>l.value?.color),b=be(e,"search",""),V=be(e,"modelValue",[],v=>P(v===null?[null]:pa(v)),v=>{const E=D(v);return e.multiple?E:E[0]??null}),W=T(()=>typeof e.counterValue=="function"?e.counterValue(V.value):typeof e.counterValue=="number"?e.counterValue:V.value.length),Y=Ea(e),{filteredItems:ne,getMatches:ue}=Wa(e,f,()=>i.value?"":b.value),y=T(()=>e.hideSelected?ne.value.filter(v=>!V.value.some(E=>E.value===v.value)):ne.value),_=T(()=>!!(e.chips||t.chip)),I=T(()=>_.value||!!t.selection),A=T(()=>V.value.map(v=>v.props.value)),H=T(()=>(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&b.value===y.value[0]?.title)&&y.value.length>0&&!i.value&&!c.value),z=T(()=>e.hideNoData&&!y.value.length||Y.isReadonly.value||Y.isDisabled.value),ae=be(e,"menu"),R=T({get:()=>ae.value,set:v=>{ae.value&&!v&&p.value?.ΨopenChildren.size||v&&z.value||(ae.value=v)}}),{menuId:re,ariaExpanded:J,ariaControls:ge,ariaLabel:ye}=$a(e,R),oe=L(),Ue=Fa(oe,l);function q(v){e.openOnClear&&(R.value=!0),b.value=""}function ft(){z.value||(R.value=!0)}function mt(v){z.value||(s.value&&(v.preventDefault(),v.stopPropagation()),R.value=!R.value)}function pt(v){(Qe(v)||v.key==="Backspace")&&l.value?.focus()}function gt(v){if(Y.isReadonly.value)return;const E=l.value?.selectionStart,O=V.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(v.key)&&v.preventDefault(),["Enter","ArrowDown"].includes(v.key)&&(R.value=!0),["Escape"].includes(v.key)&&(R.value=!1),H.value&&["Enter","Tab"].includes(v.key)&&!V.value.some(x=>{let{value:C}=x;return C===y.value[0].value})&&ce(y.value[0]),v.key==="ArrowDown"&&H.value&&oe.value?.focus("next"),["Backspace","Delete"].includes(v.key)){if(!e.multiple&&I.value&&V.value.length>0&&!b.value)return ce(V.value[0],!1);if(~r.value){v.preventDefault();const x=r.value;ce(V.value[r.value],!1),r.value=x>=O-1?O-2:x}else v.key==="Backspace"&&!b.value&&(r.value=O-1);return}if(e.multiple)if(v.key==="ArrowLeft"){if(r.value<0&&E&&E>0)return;const x=r.value>-1?r.value-1:O-1;if(V.value[x])r.value=x;else{const C=b.value?.length??null;r.value=-1,l.value?.setSelectionRange(C,C)}}else if(v.key==="ArrowRight"){if(r.value<0)return;const x=r.value+1;V.value[x]?r.value=x:(r.value=-1,l.value?.setSelectionRange(0,0))}else~r.value&&Qe(v)&&(r.value=-1)}function yt(v){if(Ge(l.value,":autofill")||Ge(l.value,":-webkit-autofill")){const E=f.value.find(O=>O.title===v.target.value);E&&ce(E)}}function ht(){e.eager&&u.value?.calculateVisibleItems()}function bt(){s.value&&(i.value=!0,l.value?.focus())}function Vt(v){s.value=!0,setTimeout(()=>{c.value=!0})}function kt(v){c.value=!1}function St(v){(v==null||v===""&&!e.multiple&&!I.value)&&(V.value=[])}const He=le(!1);function ce(v){let E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!v||v.props.disabled))if(e.multiple){const O=V.value.findIndex(C=>(e.valueComparator||ba)(C.value,v.value)),x=E??!~O;if(~O){const C=x?[...V.value,v]:[...V.value];C.splice(O,1),V.value=C}else x&&(V.value=[...V.value,v]);e.clearOnSelect&&(b.value="")}else{const O=E!==!1;V.value=O?[v]:[],b.value=O&&!I.value?v.title:"",qe(()=>{R.value=!1,i.value=!0})}}return ie(s,(v,E)=>{v!==E&&(v?(He.value=!0,b.value=e.multiple||I.value?"":String(V.value.at(-1)?.props.title??""),i.value=!0,qe(()=>He.value=!1)):(!e.multiple&&b.value==null&&(V.value=[]),R.value=!1,b.value="",r.value=-1))}),ie(b,v=>{!s.value||He.value||(v&&(R.value=!0),i.value=!v)}),ie(R,()=>{if(!e.hideSelected&&R.value&&V.value.length){const v=y.value.findIndex(E=>V.value.some(O=>E.value===O.value));ga&&window.requestAnimationFrame(()=>{v>=0&&u.value?.scrollToIndex(v)})}}),ie(f,(v,E)=>{R.value||s.value&&!E.length&&v.length&&(R.value=!0)}),Fe(()=>{const v=!!(!e.hideNoData||y.value.length||t["prepend-item"]||t["append-item"]||t["no-data"]),E=V.value.length>0,O=Ae.filterProps(e);return a(Ae,B({ref:l},O,{modelValue:b.value,"onUpdate:modelValue":[x=>b.value=x,St],focused:s.value,"onUpdate:focused":x=>s.value=x,validationValue:V.externalValue,counterValue:W.value,dirty:E,onChange:yt,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":R.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!I.value,"v-autocomplete--selecting-index":r.value>-1},e.class],style:e.style,readonly:Y.isReadonly.value,placeholder:E?void 0:e.placeholder,"onClick:clear":q,"onMousedown:control":ft,onKeydown:gt,"aria-expanded":J.value,"aria-controls":ge.value}),{...t,default:()=>M(X,null,[a(ze,B({id:re.value,ref:p,modelValue:R.value,"onUpdate:modelValue":x=>R.value=x,activator:"parent",contentClass:"v-autocomplete__content",disabled:z.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:ht,onAfterLeave:bt},e.menuProps),{default:()=>[v&&a(_e,B({ref:oe,filterable:!0,selected:A.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:x=>x.preventDefault(),onKeydown:pt,onFocusin:Vt,onFocusout:kt,tabindex:"-1",selectable:!0,"aria-live":"polite",color:e.itemColor??e.color},Ue,e.listProps),{default:()=>[t["prepend-item"]?.(),!y.value.length&&!e.hideNoData&&(t["no-data"]?.()??a(te,{key:"no-data",title:d(e.noDataText)},null)),a(za,{ref:u,renderless:!0,items:y.value,itemKey:"value"},{default:x=>{let{item:C,index:j,itemRef:Te}=x;const Se=B(C.props,{ref:Te,key:C.value,active:H.value&&j===0?!0:void 0,onClick:()=>ce(C,null)});return C.type==="divider"?t.divider?.({props:C.raw,index:j})??a(je,B(C.props,{key:`divider-${j}`}),null):C.type==="subheader"?t.subheader?.({props:C.raw,index:j})??a(Ua,B(C.props,{key:`subheader-${j}`}),null):t.item?.({item:C,index:j,props:Se})??a(te,B(Se,{role:"option"}),{prepend:we=>{let{isSelected:Q}=we;return M(X,null,[e.multiple&&!e.hideSelected?a(Ha,{key:C.value,modelValue:Q,ripple:!1,tabindex:"-1"},null):void 0,C.props.prependAvatar&&a(ka,{image:C.props.prependAvatar},null),C.props.prependIcon&&a(U,{icon:C.props.prependIcon},null)])},title:()=>i.value?C.title:ja("v-autocomplete",C.title,ue(C)?.title)})}}),t["append-item"]?.()]})]}),V.value.map((x,C)=>{function j(Q){Q.stopPropagation(),Q.preventDefault(),ce(x,!1)}const Te={"onClick:close":j,onKeydown(Q){Q.key!=="Enter"&&Q.key!==" "||(Q.preventDefault(),Q.stopPropagation(),j(Q))},onMousedown(Q){Q.preventDefault(),Q.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},Se=_.value?!!t.chip:!!t.selection,we=Se?Sa(_.value?t.chip({item:x,index:C,props:Te}):t.selection({item:x,index:C})):void 0;if(!(Se&&!we))return M("div",{key:x.value,class:Ce(["v-autocomplete__selection",C===r.value&&["v-autocomplete__selection--selected",k.value]]),style:Re(C===r.value?$.value:{})},[_.value?t.chip?a(Ne,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:x.title}}},{default:()=>[we]}):a(de,B({key:"chip",closable:e.closableChips,size:"small",text:x.title,disabled:x.props.disabled},Te),null):we??M("span",{class:"v-autocomplete__selection-text"},[x.title,e.multiple&&C<V.value.length-1&&M("span",{class:"v-autocomplete__selection-comma"},[g(",")])])])})]),"append-inner":function(){for(var x=arguments.length,C=new Array(x),j=0;j<x;j++)C[j]=arguments[j];return M(X,null,[t["append-inner"]?.(...C),e.menuIcon?a(U,{class:"v-autocomplete__menu-icon",color:l.value?.fieldIconColor,icon:e.menuIcon,onMousedown:mt,onClick:Va,"aria-label":ye.value,title:ye.value,tabindex:"-1"},null):void 0])}})}),it({isFocused:s,isPristine:i,menu:R,search:b,filteredItems:ne,select:ce},l)}}),rl=300,cl=K({__name:"SelectPersonne",props:De({label:{},initialPersonne:{},api:{},readonly:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const o=e,t=ke(e,"modelValue"),d=L(t.value==0?[]:[{title:o.initialPersonne,value:t.value}]),l=L("");async function s(){if(!l.value)return;const p=await o.api.SelectPersonne({search:l.value});p!==void 0&&(d.value=(p||[]).map(u=>({title:u.Label,value:u.Id})))}let i;function c(p){l.value=p||"",clearTimeout(i),i=setTimeout(s,rl)}return(p,u)=>(m(),w(dt,{label:o.label,variant:"outlined",density:"compact",readonly:o.readonly,"hide-details":"",items:d.value,"model-value":h(Ke)(t.value),"onUpdate:modelValue":u[0]||(u[0]=r=>t.value=h(Xe)(r)),search:l.value,"onUpdate:search":[u[1]||(u[1]=r=>l.value=r),c],clearable:"","no-data-text":l.value.length?"Aucun profil ne correspond à votre recherche.":"Veuillez entrer une recherche."},null,8,["label","readonly","items","model-value","search","no-data-text"]))}}),Il=K({__name:"ReglementsCard",props:{data:{}},setup(e){const o=e;function t(l){return(o.data.Dossiers||{})[l.Participant.IdDossier]}const d=T(()=>(o.data.Participants||[]).filter(l=>t(l).Reglement==wa.Complet).length);return(l,s)=>(m(),w(ve,{title:"Suivi du règlement",subtitle:`${d.value} / ${o.data.Participants?.length||0} complet`},{default:n(()=>[a(fe,null,{default:n(()=>[a(_e,null,{default:n(()=>[(m(!0),ee(X,null,Ve(e.data.Participants,i=>(m(),w(te,{title:h(me).NOMPrenom(i.Personne),subtitle:t(i).Responsable},{append:n(()=>[a(de,{"prepend-icon":"mdi-currency-eur",color:h(N).colorStatutPaiement(t(i).Reglement)},{default:n(()=>[g(F(h(Pa)[t(i).Reglement]),1)]),_:2},1032,["color"])]),_:2},1032,["title","subtitle"]))),256))]),_:1})]),_:1})]),_:1},8,["subtitle"]))}}),Dl=K({__name:"SelectCamp",props:De({label:{},camps:{},readonly:{type:Boolean},defaultStyle:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const o=e,t=ke(e,"modelValue"),d=L(!1),l=T(()=>o.camps.filter(s=>d.value?!0:!s.IsOld).map(s=>({title:s.Label,value:s.Id})));return(s,i)=>(m(),w(rt,{density:o.defaultStyle?void 0:"compact",variant:o.defaultStyle?void 0:"outlined",label:o.label,readonly:o.readonly,items:l.value,clearable:"","model-value":h(Ke)(t.value),"onUpdate:modelValue":i[1]||(i[1]=c=>t.value=h(Xe)(c)),"no-data-text":"Aucun séjour n'existe.","hide-details":"",autocomplete:"off"},{prepend:n(()=>[a(Ie,{text:d.value?"Masquer les séjours terminés":"Afficher les séjours terminés"},{activator:n(({props:c})=>[a(G,B({size:"small",variant:d.value?"tonal":"flat"},c,{icon:"mdi-history",onClick:i[0]||(i[0]=p=>d.value=!d.value)}),null,16,["variant"])]),_:1},8,["text"])]),_:1},8,["density","variant","label","readonly","items","model-value"]))}}),dl=300,vl=K({__name:"SelectDossier",props:De({readonly:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const o=e,t=ke(e,"modelValue"),d=L([]);Be(s);function l(r){return{title:r.Responsable,subtitle:r.Participants,value:r.Id}}async function s(){const r=t.value;if(r==0)return;const f=await tt.DossiersSearch(Qa(r));f!==void 0&&(d.value=(f.Dossiers||[]).map(l))}const i=L("");async function c(){if(!i.value)return;const r=ct();r.Pattern=i.value;const f=await tt.DossiersSearch(r);f!==void 0&&(d.value=(f.Dossiers||[]).map(l))}let p;function u(r){i.value=r||"",clearTimeout(p),p=setTimeout(c,dl)}return(r,f)=>(m(),w(dt,{label:"Dossier",variant:"outlined",density:"compact",readonly:o.readonly,"hide-details":"",items:d.value,"no-filter":"","model-value":h(Ke)(t.value),"onUpdate:modelValue":f[0]||(f[0]=P=>t.value=h(Xe)(P)),search:i.value,"onUpdate:search":[f[1]||(f[1]=P=>i.value=P),u],clearable:"","no-data-text":i.value.length?"Aucun dossier ne correspond à votre recherche.":"Veuillez entrer une recherche."},{item:n(({item:P,props:D})=>[a(te,B(D,{title:P.title,subtitle:P.raw.subtitle}),null,16,["title","subtitle"])]),_:1},8,["readonly","items","model-value","search","no-data-text"]))}}),vt=K({__name:"StatutParticipantField",props:De({hideDetails:{type:Boolean},readonly:{type:Boolean},rules:{},restrictItems:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const o=e,t=ke(e,"modelValue"),d=T(()=>Ca(st).filter(l=>o.restrictItems===void 0||o.restrictItems.includes(l.value)).map(l=>({value:l.value,title:l.title,format:N.statutParticipant(l.value)})));return(l,s)=>(m(),w(rt,{label:"Statut",variant:"outlined",density:"compact",items:d.value,readonly:o.readonly,"hide-details":o.hideDetails,modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=i=>t.value=i),rules:o.rules},{item:n(({item:i,props:c})=>[a(te,B(c,{title:i.title}),{prepend:n(()=>[a(U,{color:i.raw.format.color},{default:n(()=>[g(F(i.raw.format.icon),1)]),_:2},1032,["color"])]),_:2},1040,["title"])]),selection:n(({item:i})=>[a(te,{title:i.title,density:"compact"},{prepend:n(()=>[a(U,{color:i.raw.format.color,size:"small"},{default:n(()=>[g(F(i.raw.format.icon),1)]),_:2},1032,["color"])]),_:2},1032,["title"])]),_:1},8,["items","readonly","hide-details","modelValue","rules"]))}}),Tl=K({__name:"ParticipantEdit",props:{participant:{},personne:{},api:{},hidePersonneDossier:{type:Boolean},readonlyStatut:{type:Boolean}},emits:["save"],setup(e,{emit:o}){const t=e,d=o,l=L(xa(t.participant)),s=T(()=>!!(l.value.IdPersonne&&l.value.IdDossier));return(i,c)=>{const p=cl,u=vl,r=qa;return m(),w(ve,{title:"Editer le participant"},{default:n(()=>[a(fe,null,{default:n(()=>[a(Xa,null,{default:n(()=>[t.hidePersonneDossier?se("",!0):(m(),w(Z,{key:0},{default:n(()=>[a(S,null,{default:n(()=>[a(p,{label:"Personne",modelValue:l.value.IdPersonne,"onUpdate:modelValue":c[0]||(c[0]=f=>l.value.IdPersonne=f),"initial-personne":h(me).label(t.personne),api:t.api},null,8,["modelValue","initial-personne","api"])]),_:1}),a(S,null,{default:n(()=>[a(u,{modelValue:l.value.IdDossier,"onUpdate:modelValue":c[1]||(c[1]=f=>l.value.IdDossier=f)},null,8,["modelValue"])]),_:1})]),_:1})),a(Z,null,{default:n(()=>[a(S,null,{default:n(()=>[a(vt,{modelValue:l.value.Statut,"onUpdate:modelValue":c[2]||(c[2]=f=>l.value.Statut=f),"hide-details":"",readonly:t.readonlyStatut},null,8,["modelValue","readonly"])]),_:1})]),_:1}),a(Z,null,{default:n(()=>[a(S,null,{default:n(()=>[a(r,{modelValue:l.value.Navette,"onUpdate:modelValue":c[3]||(c[3]=f=>l.value.Navette=f)},null,8,["modelValue"])]),_:1}),a(S,null,{default:n(()=>[a(Ae,{modelValue:l.value.Commentaire,"onUpdate:modelValue":c[4]||(c[4]=f=>l.value.Commentaire=f),label:"Commentaire",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),a(Le,null,{default:n(()=>[a(pe),a(G,{disabled:!s.value,onClick:c[5]||(c[5]=f=>d("save",l.value))},{default:n(()=>[...c[6]||(c[6]=[g("Enregistrer",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})}}}),Ml=K({__name:"ParticipantRow",props:{participant:{},index:{}},setup(e){const o=e,t=T(()=>"mx-2 px-2 rounded "+(o.index%2==0?"bg-grey-lighten-4":""));return(d,l)=>(m(),w(Z,{"no-gutters":"",class:Ce(t.value)},{default:n(()=>[a(S,{"align-self":"center",cols:"3"},{default:n(()=>[a(te,{title:h(me).NOMPrenom(o.participant.Personne),class:"px-0"},{prepend:n(()=>[o.participant.Participant.Statut!=h(xe).Inscrit?(m(),w(Ie,{key:0,text:h(st)[o.participant.Participant.Statut]},{activator:n(({props:s})=>[a(U,B({color:h(N).statutParticipant(o.participant.Participant.Statut).color},s),{default:n(()=>[g(F(h(N).statutParticipant(o.participant.Participant.Statut).icon),1)]),_:1},16,["color"])]),_:1},8,["text"])):se("",!0)]),_:1},8,["title"])]),_:1}),a(S,{"align-self":"center",cols:"1",class:"text-center"},{default:n(()=>[a(U,{class:"ma-2 mr-4"},{default:n(()=>[g(F(h(N).sexeIcon(o.participant.Personne.Sexe)),1)]),_:1})]),_:1}),a(S,{"align-self":"center",cols:"1"},{default:n(()=>[a(Z,{"no-gutters":""},{default:n(()=>[a(S,{"align-self":"end",class:"text-center"},{default:n(()=>[g(F(h(N).dateNaissance(o.participant.Personne.DateNaissance)),1)]),_:1}),a(S,{"align-self":"end",cols:"auto"},{default:n(()=>[o.participant.HasBirthday?(m(),w(Ie,{key:0,text:`${o.participant.Personne.Prenom} a son anniveraire pendant le séjour !`},{activator:n(({props:s})=>[a(U,B(s,{color:"pink"}),{default:n(()=>[...l[0]||(l[0]=[g("mdi-cake-variant",-1)])]),_:1},16)]),_:1},8,["text"])):se("",!0)]),_:1})]),_:1})]),_:1}),a(S,{"align-self":"center",cols:"1",class:"text-center"},{default:n(()=>[g(F(o.participant.Age)+" ans ",1)]),_:1}),a(S,{"align-self":"center",cols:"1",class:"text-center"},{default:n(()=>[g(F(o.participant.Participant.Navette==h(_a).NoBus?"-":h(Ia)[o.participant.Participant.Navette]),1)]),_:1}),a(S,{"align-self":"center"},{default:n(()=>[g(F(o.participant.Participant.Commentaire),1)]),_:1}),a(pe),a(S,{cols:"2","align-self":"center"},{default:n(()=>[g(F(h(N).time(o.participant.MomentInscription)),1)]),_:1}),a(S,{"align-self":"center",cols:"auto"},{default:n(()=>[a(ze,null,{activator:n(({props:s})=>[a(G,B(s,{icon:"mdi-dots-vertical",size:"x-small"}),null,16)]),default:n(()=>[We(d.$slots,"actions")]),_:3})]),_:3})]),_:3},8,["class"]))}}),Rl=K({__name:"ParticipantRowHeader",setup(e){return(o,t)=>(m(),w(Z,{"no-gutters":"",class:"mx-2 px-2"},{default:n(()=>[a(S,{class:"font-weight-bold","align-self":"center",cols:"3"},{default:n(()=>[...t[0]||(t[0]=[g(" Participant ",-1)])]),_:1}),a(S,{class:"font-weight-bold text-center","align-self":"center",cols:"1"},{default:n(()=>[...t[1]||(t[1]=[g(" Sexe ",-1)])]),_:1}),a(S,{class:"font-weight-bold text-center","align-self":"center",cols:"1"},{default:n(()=>[...t[2]||(t[2]=[g(" Date de naissance ",-1)])]),_:1}),a(S,{class:"font-weight-bold text-center","align-self":"center",cols:"1"},{default:n(()=>[...t[3]||(t[3]=[g(" Age ",-1)])]),_:1}),a(S,{class:"font-weight-bold text-center","align-self":"center",cols:"1"},{default:n(()=>[...t[4]||(t[4]=[g(" Navette ",-1)])]),_:1}),a(S,{class:"font-weight-bold","align-self":"center"},{default:n(()=>[...t[5]||(t[5]=[g(" Commentaire ",-1)])]),_:1}),a(pe),a(S,{class:"font-weight-bold text-center",cols:"2"},{default:n(()=>[...t[6]||(t[6]=[g(" Inscription ",-1)])]),_:1}),a(S,{cols:"auto"},{default:n(()=>[a(G,{size:"x-small",color:"white",icon:"",flat:""})]),_:1})]),_:1}))}}),fl=K({__name:"CardValideParticipantRow",props:De({participant:{},statut:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const o=e,t=ke(e,"modelValue");function d(l){return l.AgeMin?l.AgeMax?l.EquilibreGF?l.Place?"":"Camp complet":"Equilibre G./F.":`Trop âgé${N.accord(o.participant.Personne.Sexe)}`:"Trop jeune"}return(l,s)=>{const i=vt;return m(),w(Z,null,{default:n(()=>[a(S,{cols:"4","align-self":"center"},{default:n(()=>[a(te,{title:h(me).label(o.participant.Personne),subtitle:h(ut).label(o.participant.Camp)},null,8,["title","subtitle"])]),_:1}),a(S,{cols:"3","align-self":"center",class:"text-center"},{default:n(()=>[o.statut.Statut!=h(xe).Inscrit?(m(),w(de,{key:0,color:"warning","prepend-icon":"mdi-alert"},{default:n(()=>[g(F(d(o.statut.Causes)),1)]),_:1})):se("",!0)]),_:1}),a(S,{"align-self":"center"},{default:n(()=>[o.statut.Validable?(m(),w(i,{key:0,modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=c=>t.value=c),"hide-details":"",readonly:!o.statut.AllowedChanges?.length,"restrict-items":(o.statut.AllowedChanges||[]).concat(o.statut.Statut)},null,8,["modelValue","readonly","restrict-items"])):o.participant.Participant.Statut!=h(xe).AStatuer?(m(),w(de,{key:1,size:"small"},{default:n(()=>[...s[1]||(s[1]=[g(" Inscription déjà validée. ",-1)])]),_:1})):(m(),w(de,{key:2,size:"small"},{default:n(()=>[...s[2]||(s[2]=[g(" Seul le centre peut accepter cette inscription. ",-1)])]),_:1}))]),_:1})]),_:1})}}}),Al=K({__name:"CardValide",props:{inscription:{},idParticipants:{}},emits:["valide"],setup(e,{emit:o}){const t=e,d=o,l=T(()=>(t.inscription.Participants||[]).filter(c=>t.idParticipants?t.idParticipants.includes(c.Participant.Id):!0)),s=L(Object.fromEntries(l.value.filter(c=>(t.inscription.StatutHints||{})[c.Participant.Id].Validable).map(c=>[c.Participant.Id,(t.inscription.StatutHints||{})[c.Participant.Id].Statut]))),i=T(()=>Object.values(s.value).length>0);return(c,p)=>(m(),w(ve,{title:"Valider l'inscription",subtitle:"Un mail de confirmation va être envoyé."},{default:n(()=>[a(fe,null,{default:n(()=>[(m(!0),ee(X,null,Ve(l.value,u=>(m(),w(fl,{participant:u,statut:(t.inscription.StatutHints||{})[u.Participant.Id],modelValue:s.value[u.Participant.Id],"onUpdate:modelValue":r=>s.value[u.Participant.Id]=r},null,8,["participant","statut","modelValue","onUpdate:modelValue"]))),256))]),_:1}),a(Le,null,{default:n(()=>[a(G,{onClick:p[0]||(p[0]=u=>d("valide",s.value,!1)),disabled:!i.value},{default:n(()=>[...p[2]||(p[2]=[g("Valider sans notification",-1)])]),_:1},8,["disabled"]),a(pe),a(G,{onClick:p[1]||(p[1]=u=>d("valide",s.value,!0)),disabled:!i.value},{default:n(()=>[...p[3]||(p[3]=[g("Valider",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1}))}}),ml=300,pl=K({__name:"DebounceField",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(e){const o=e,t=L(""),d=ke(e,"modelValue");ie(()=>d.value,()=>{t.value=d.value});let l;function s(i){if(t.value=i||"",clearTimeout(l),!i){d.value=t.value;return}l=setTimeout(()=>{d.value=t.value},ml)}return(i,c)=>(m(),w(Ae,B(o,{modelValue:t.value,"onUpdate:modelValue":[c[0]||(c[0]=p=>t.value=p),s]}),{"append-inner":n(()=>[We(i.$slots,"append-inner")]),append:n(()=>[We(i.$slots,"append")]),_:3},16,["modelValue"]))}}),gl={key:0},yl=K({__name:"CardSimilaires",props:{personne:{},api:{}},emits:["identifie"],setup(e,{emit:o}){const t=e,d=o;Be(s);const l=L([]);async function s(){const D=await t.api.SearchSimilaires({idPersonne:t.personne.Id});D!==void 0&&(l.value=D||[])}const i=L(!1),c=L(""),p=L([]);async function u(){if((c.value||"").length<3)return;const D=await t.api.SelectPersonne({search:c.value});D!==void 0&&(p.value=D||[])}function r(){d("identifie",{IdTemporaire:t.personne.Id,Rattache:!1,RattacheTo:0})}function f(D){d("identifie",{IdTemporaire:t.personne.Id,Rattache:!0,RattacheTo:D})}function P(D){const k=Math.floor(D*2);return`rgb(${255-k},${k}, 15)`}return(D,k)=>{const $=pl;return m(),w(ve,{title:"Identifier le profil",width:"600px",subtitle:i.value?"":"Liste des profils similaires"},{default:n(()=>[a(fe,{class:"pb-0"},{default:n(()=>[i.value?(m(),ee("div",gl,[a($,{modelValue:c.value,"onUpdate:modelValue":[k[0]||(k[0]=b=>c.value=b),u],label:"Rechercher un profil",density:"comfortable",clearable:"",autofocus:"","hide-details":""},null,8,["modelValue"]),a(_e,{density:"compact"},{default:n(()=>[c.value.length>=3&&!p.value.length?(m(),w(Z,{key:0,class:"ma-2","no-gutters":""},{default:n(()=>[a(S,{class:"text-center"},{default:n(()=>[...k[3]||(k[3]=[M("i",null,"Aucun profil ne correspond à votre recherche.",-1)])]),_:1})]),_:1})):se("",!0),(m(!0),ee(X,null,Ve(p.value,(b,V)=>(m(),w(te,{key:V,title:b.Label,subtitle:h(N).dateNaissance(b.DateNaissance),"append-icon":h(N).sexeIcon(b.Sexe),onClick:W=>f(b.Id)},null,8,["title","subtitle","append-icon","onClick"]))),128))]),_:1})])):(m(),w(_e,{key:1,density:"compact"},{default:n(()=>[l.value.length?se("",!0):(m(),w(Z,{key:0,class:"mx-2","no-gutters":""},{default:n(()=>[a(S,{class:"text-center"},{default:n(()=>[...k[4]||(k[4]=[M("i",null,"Aucun profil existant sur la base n'est similaire.",-1)])]),_:1})]),_:1})),(m(!0),ee(X,null,Ve(l.value,(b,V)=>(m(),w(te,{key:V,title:b.Personne.Label,subtitle:h(N).dateNaissance(b.Personne.DateNaissance),"prepend-icon":h(N).sexeIcon(b.Personne.Sexe),onClick:W=>f(b.Personne.Id)},{append:n(()=>[a(de,{color:P(b.ScorePercent)},{default:n(()=>[g(F(b.ScorePercent)+" % ",1)]),_:2},1032,["color"])]),_:2},1032,["title","subtitle","prepend-icon","onClick"]))),128))]),_:1}))]),_:1}),a(Le,null,{default:n(()=>[a(G,{onClick:k[1]||(k[1]=b=>{i.value=!i.value,c.value=""})},{default:n(()=>[g(F(i.value?"Retour aux suggestions":"Chercher manuellement"),1)]),_:1}),a(pe),a(G,{variant:"elevated",elevation:"1",onClick:k[2]||(k[2]=b=>r())},{prepend:n(()=>[a(U,null,{default:n(()=>[...k[5]||(k[5]=[g("mdi-plus",-1)])]),_:1})]),default:n(()=>[k[6]||(k[6]=g(" Créer un nouveau profil",-1))]),_:1})]),_:1})]),_:1},8,["subtitle"])}}}),nt=K({__name:"InscriptionEtatcivilCols",props:{personne:{},api:{},acteur:{}},emits:["identifie"],setup(e,{emit:o}){const t=e,d=o;return(l,s)=>(m(),ee(X,null,[a(S,{"align-self":"center",cols:"4"},{default:n(()=>[a(Ie,null,{activator:n(({props:i})=>[t.personne.IsTemp?(m(),w(ze,{key:0,"close-on-content-click":!1},{activator:n(({props:c})=>[a(de,B({label:""},B(c,i)),{prepend:n(()=>[a(U,{class:"mr-2",icon:"mdi-alert",color:"orange"})]),default:n(()=>[g(" "+F(h(me).label(t.personne)),1)]),_:1},16)]),default:n(()=>[t.acteur==h(Ye).Directeur?(m(),w(ve,{key:0},{default:n(()=>[a(fe,null,{default:n(()=>[...s[1]||(s[1]=[g(" Le rapprochement de ce profil requiert une action du centre d'inscription. ",-1)])]),_:1})]),_:1})):(m(),w(yl,{key:1,api:t.api,personne:t.personne,onIdentifie:s[0]||(s[0]=c=>d("identifie",c))},null,8,["api","personne"]))]),_:2},1024)):(m(),ee("div",Da(B({key:1},i)),F(h(me).label(t.personne)),17))]),default:n(()=>[t.personne.IsTemp?(m(),ee(X,{key:0},[g(" Ce profil est temporaire et doit être identifié. ")],64)):(m(),ee(X,{key:1},[g(" Ce profil est identifié (ID: "+F(t.personne.Id)+"). ",1)],64))]),_:1})]),_:1}),a(S,{"align-self":"center",cols:"auto"},{default:n(()=>[a(U,{icon:h(N).sexeIcon(t.personne.Sexe),class:"mx-4"},null,8,["icon"])]),_:1}),a(S,{"align-self":"center",cols:"2"},{default:n(()=>[s[2]||(s[2]=M("small",{class:"text-grey"},"né(e) le",-1)),g(" "+F(h(N).dateNaissance(t.personne.DateNaissance)),1)]),_:1})],64))}}),Bl=K({__name:"InscriptionRow",props:{inscription:{},api:{},user:{},hideDelete:{type:Boolean},alreadyValidated:{type:Boolean}},emits:["identifie","valide","merge","delete","deleteParticipant"],setup(e,{emit:o}){const t=e,d=o,l=T(()=>t.user==null?Ye.Backoffice:Ye.Directeur),s=T(()=>!t.inscription.Responsable.IsTemp&&!!t.inscription.Participants?.every(p=>!p.Personne.IsTemp));function i(p){return s.value&&(t.user===null||t.user==p.IdCamp)}const c=L(null);return(p,u)=>(m(),w(ve,{subtitle:h(N).time(t.inscription.Dossier.MomentInscription,!0,!0)},{append:n(()=>[e.alreadyValidated?(m(),w(Ie,{key:0,text:"En attente de validation par les autres séjours"},{activator:n(({props:r})=>[a(U,B(r,{color:"green"}),{default:n(()=>[...u[7]||(u[7]=[g(" mdi-check ",-1)])]),_:1},16)]),_:1})):(m(),w(G,{key:1,disabled:!s.value||!t.inscription.Participants?.length,onClick:u[0]||(u[0]=r=>d("valide"))},{prepend:n(()=>[a(U,null,{default:n(()=>[...u[8]||(u[8]=[g("mdi-check-all",-1)])]),_:1})]),default:n(()=>[u[9]||(u[9]=g(" Tout valider",-1))]),_:1},8,["disabled"])),t.hideDelete?se("",!0):(m(),w(ze,{key:2},{activator:n(({props:r})=>[a(G,B(r,{variant:"flat",icon:"mdi-dots-vertical",size:"small",class:"ml-1"}),null,16)]),default:n(()=>[a(_e,{density:"compact"},{default:n(()=>[a(te,{"prepend-icon":"mdi-file-move",onClick:u[1]||(u[1]=r=>d("merge")),title:"Fusionner vers ..."}),a(je),a(te,{title:"Supprimer","prepend-icon":"mdi-delete",onClick:u[2]||(u[2]=r=>d("delete"))})]),_:1})]),_:1}))]),default:n(()=>[a(fe,null,{default:n(()=>[a(Z,null,{default:n(()=>[a(S,{cols:"7"},{default:n(()=>[a(Z,{"no-gutters":"",class:"my-0 py-1"},{default:n(()=>[a(nt,{api:t.api,personne:t.inscription.Responsable,acteur:l.value,onIdentifie:u[3]||(u[3]=r=>d("identifie",r))},null,8,["api","personne","acteur"])]),_:1}),a(je,{thickness:"1"}),(m(!0),ee(X,null,Ve(t.inscription.Participants,(r,f)=>(m(),w(Z,{"no-gutters":"",class:"my-0 py-1",key:f},{default:n(()=>[a(nt,{api:t.api,personne:r.Personne,acteur:l.value,onIdentifie:u[4]||(u[4]=P=>d("identifie",P))},null,8,["api","personne","acteur"]),a(S,{"align-self":"center",cols:"3",class:"text-center"},{default:n(()=>[g(F(h(ut).label(r.Camp)),1)]),_:2},1024),a(pe),a(S,{"align-self":"center",cols:"1",class:"pr-2 text-center"},{default:n(()=>[r.Participant.Statut!=h(xe).AStatuer?(m(),w(U,{key:0,color:h(N).statutParticipant(r.Participant.Statut).color,icon:h(N).statutParticipant(r.Participant.Statut).icon},null,8,["color","icon"])):i(r.Participant)?(m(),w(G,{key:1,size:"small",title:"Valider ce participant...",onClick:P=>d("valide",r.Participant.Id)},{default:n(()=>[a(U,{icon:h(N).statutParticipant(h(xe).AStatuer).icon},null,8,["icon"]),a(U,null,{default:n(()=>[...u[10]||(u[10]=[g("mdi-arrow-right",-1)])]),_:1}),a(U,{icon:h(N).statutParticipant((t.inscription.StatutHints||{})[r.Participant.Id].Statut).icon,color:h(N).statutParticipant((t.inscription.StatutHints||{})[r.Participant.Id].Statut).color},null,8,["icon","color"])]),_:2},1032,["onClick"])):se("",!0)]),_:2},1024),t.hideDelete?se("",!0):(m(),w(S,{key:0,"align-self":"center",cols:"auto"},{default:n(()=>[a(G,{icon:"",size:"x-small",onClick:P=>c.value=r,title:"Supprimer ce participant..."},{default:n(()=>[a(U,{color:"red"},{default:n(()=>[...u[11]||(u[11]=[g("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1024))]),_:2},1024))),128))]),_:1}),a(S,{cols:"5"},{default:n(()=>[a(Z,{"no-gutters":""},{default:n(()=>[a(S,{cols:"auto",class:"px-2"},{default:n(()=>[a(U,{color:t.inscription.Message.length?"secondary":"grey"},{default:n(()=>[...u[12]||(u[12]=[g("mdi-message",-1)])]),_:1},8,["color"])]),_:1}),a(S,null,{default:n(()=>[(m(!0),ee(X,null,Ve(t.inscription.Message.split(`
`),(r,f)=>(m(),ee("div",{key:f},F(r),1))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(Oa,{"model-value":c.value!=null,"onUpdate:modelValue":u[6]||(u[6]=r=>c.value=null),"max-width":"600px"},{default:n(()=>[c.value?(m(),w(ve,{key:0,title:"Confirmation"},{default:n(()=>[a(fe,null,{default:n(()=>[u[13]||(u[13]=g(" Confirmez-vous la suppression du participant ",-1)),M("b",null,F(h(me).label(c.value.Personne)),1),u[14]||(u[14]=g(" ? ",-1)),u[15]||(u[15]=M("br",null,null,-1)),u[16]||(u[16]=M("br",null,null,-1)),u[17]||(u[17]=g(" Attention, cette opération est irréversible. ",-1))]),_:1}),a(Le,null,{default:n(()=>[a(pe),a(G,{color:"red",onClick:u[5]||(u[5]=r=>{d("deleteParticipant",c.value.Participant.Id),c.value=null})},{default:n(()=>[...u[18]||(u[18]=[g("Supprimer",-1)])]),_:1})]),_:1})]),_:1})):se("",!0)]),_:1},8,["model-value"])]),_:1},8,["subtitle"]))}});export{Cl as V,cl as _,xl as a,_l as b,tt as c,dt as d,Rl as e,vl as f,Tl as g,Dl as h,Pl as i,Il as j,Ml as k,Bl as l,il as m,Al as n,pl as o,ct as p,Qa as q};
