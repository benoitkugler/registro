import{cx as B,b7 as $e,b9 as je,d as G,k as L,s as v,o as r,V as Ne,w as e,b as t,f as qe,g as P,h as f,i as He,e as s,t as C,r as Be,j as S,a as x,F as D,a1 as q,_ as U,a4 as ie,aG as Se,n as j,a3 as $,c as H,T as be,aT as Oe,aS as ze,a0 as R,aa as re,a2 as X,bG as Ue,bH as he,B as fe,ag as Ve,aB as W,az as Le,a8 as Je,Z as ye,aM as Ke,v as Ge,x as Ze,y as We,ak as Qe,J as Xe,bx as Ye,R as et,L as tt,cg as lt,z as at,E as nt,ap as st,aq as ot,ar as it,au as ut,av as rt,I as Pe,q as dt,u as mt,a_ as pt,aZ as ke,bl as Ce,aQ as _e,aO as ct,p as ft,b1 as vt,b2 as we,b3 as gt,b4 as bt,b5 as Vt}from"./VSnackbar-BIrRpgjn.js";import{_ as yt,V as kt,a as Ct}from"./EventSwitch.vue_vue_type_script_setup_true_lang-C91yEkuq.js";import{f as St,_ as Ut,b as xe,e as De,c as Fe,d as Ie,V as ce,a as ht}from"./VTabs-CYD1-hdr.js";import{b as M,c as w,k as Y,d as oe,e as ne,f as ve,l as Ae,V as N,g as J,h as ge,a as Me,i as Q,m as ue,j as ae,n as Re}from"./VTextarea-ZoY5w49v.js";import{a as Pt,V as _t}from"./FileCard.vue_vue_type_script_setup_true_lang-CEzBY5f9.js";import{_ as Te}from"./FilesDemande.vue_vue_type_script_setup_true_lang-BTgEKyD-.js";import"./VWindowItem-CNi4e_UD.js";import"./FilesRow.vue_vue_type_script_setup_true_lang-BnqDNgR5.js";const de={CampDocs:"CampDocs",Facture:"Facture",PlaceLiberee:"PlaceLiberee",Sondage:"Sondage",Validation:"Validation"},me={Complet:3,EnCours:2,NonCommence:1};me.Complet+"",me.EnCours+"",me.NonCommence+"";const K={AStatuer:0,Refuse:1,AttenteProfilInvalide:2,AttenteCampComplet:3,EnAttenteReponse:4,Inscrit:5},wt={[K.AStatuer]:"En attente de validation",[K.Refuse]:"Refusé définitivement",[K.AttenteProfilInvalide]:"Profil limite",[K.AttenteCampComplet]:"Camp complet",[K.EnAttenteReponse]:"En attente de réponse",[K.Inscrit]:"Inscrit"},At={Euros:0},Z={Cheque:0,EnLigne:1,Virement:2,Especes:3,Ancv:4,Helloasso:5},Mt={[Z.Cheque]:"Chèque",[Z.EnLigne]:"Carte bancaire (en ligne)",[Z.Virement]:"Virement",[Z.Especes]:"Espèces",[Z.Ancv]:"ANCV",[Z.Helloasso]:"Helloasso"},Rt={Espaceperso:0},le={NoFiche:0,Outdated:1,UpToDate:2};le.NoFiche+"",le.Outdated+"",le.UpToDate+"";class Lt{constructor(o,l){this.baseURL=o,this.authToken=l}getHeaders(){return{Authorization:"Bearer "+this.authToken}}async Load(o){const l=this.baseURL+"/api/v1/espaceperso";this.startRequest();try{return(await B.get(l,{headers:this.getHeaders(),params:{token:o.token}})).data}catch(i){this.handleError(i)}}async SendMessage(o){const l=this.baseURL+"/api/v1/espaceperso/message";this.startRequest();try{return(await B.post(l,o,{headers:this.getHeaders()})).data}catch(i){this.handleError(i)}}async UpdateParticipants(o){const l=this.baseURL+"/api/v1/espaceperso/participants";this.startRequest();try{return await B.post(l,o,{headers:this.getHeaders()}),!0}catch(i){this.handleError(i)}}async CreateAide(o,l,i){const n=this.baseURL+"/api/v1/espaceperso/aide";this.startRequest();try{const g=new FormData;return g.append("document",o,o.name),g.append("aide",JSON.stringify(l)),await B.post(n,g,{headers:this.getHeaders(),params:{token:i.token}}),!0}catch(g){this.handleError(g)}}async GetStructureaides(){const o=this.baseURL+"/api/v1/espaceperso/structureaides";this.startRequest();try{return(await B.get(o,{headers:this.getHeaders()})).data}catch(l){this.handleError(l)}}async LoadJoomeo(o){const l=this.baseURL+"/api/v1/espaceperso/joomeo";this.startRequest();try{return(await B.get(l,{headers:this.getHeaders(),params:{token:o.token}})).data}catch(i){this.handleError(i)}}async LoadFichesanitaires(o){const l=this.baseURL+"/api/v1/espaceperso/fichesanitaires";this.startRequest();try{return(await B.get(l,{headers:this.getHeaders(),params:{token:o.token}})).data}catch(i){this.handleError(i)}}async UpdateFichesanitaire(o){const l=this.baseURL+"/api/v1/espaceperso/fichesanitaires";this.startRequest();try{return await B.post(l,o,{headers:this.getHeaders()}),!0}catch(i){this.handleError(i)}}async UploadVaccin(o,l){const i=this.baseURL+"/api/v1/espaceperso/fichesanitaires";this.startRequest();try{const n=new FormData;return n.append("file",o,o.name),(await B.put(i,n,{headers:this.getHeaders(),params:{token:l.token,idPersonne:String(l.idPersonne)}})).data}catch(n){this.handleError(n)}}async DeleteVaccin(o){const l=this.baseURL+"/api/v1/espaceperso/fichesanitaires";this.startRequest();try{return await B.delete(l,{headers:this.getHeaders(),params:{key:o.key}}),!0}catch(i){this.handleError(i)}}async TransfertFicheSanitaire(o){const l=this.baseURL+"/api/v1/espaceperso/fichesanitaires/transfert";this.startRequest();try{return await B.put(l,null,{headers:this.getHeaders(),params:{token:o.token,idPersonne:String(o.idPersonne)}}),!0}catch(i){this.handleError(i)}}async AcceptePlaceLiberee(o){const l=this.baseURL+"/api/v1/espaceperso/events/accept-place-liberee";this.startRequest();try{return await B.post(l,null,{headers:this.getHeaders(),params:{token:o.token,idEvent:String(o.idEvent)}}),!0}catch(i){this.handleError(i)}}async LoadSondages(o){const l=this.baseURL+"/api/v1/espaceperso/sondages";this.startRequest();try{return(await B.get(l,{headers:this.getHeaders(),params:{token:o.token}})).data}catch(i){this.handleError(i)}}async UpdateSondages(o){const l=this.baseURL+"/api/v1/espaceperso/sondages";this.startRequest();try{return await B.post(l,o,{headers:this.getHeaders()}),!0}catch(i){this.handleError(i)}}async LoadDocuments(o){const l=this.baseURL+"/api/v1/espaceperso/documents";this.startRequest();try{return(await B.get(l,{headers:this.getHeaders(),params:{token:o.token}})).data}catch(i){this.handleError(i)}}async UploadDocument(o,l){const i=this.baseURL+"/api/v1/espaceperso/documents";this.startRequest();try{const n=new FormData;return n.append("file",o,o.name),(await B.post(i,n,{headers:this.getHeaders(),params:{token:l.token,idDemande:String(l.idDemande),idPersonne:String(l.idPersonne)}})).data}catch(n){this.handleError(n)}}async DeleteDocument(o){const l=this.baseURL+"/api/v1/espaceperso/documents";this.startRequest();try{return await B.delete(l,{headers:this.getHeaders(),params:{key:o.key}}),!0}catch(i){this.handleError(i)}}}class xt extends Lt{constructor(o,l,i){super(i,""),this.onError=o,this.showMessage=l}handleError(o){const{kind:l,messageHtml:i}=je(o);this.onError(l,i)}startRequest(){}}const A=new xt((p,o)=>{},(p,o)=>{},$e()),Dt=G({__name:"NavBar",props:{title:{},hideMenu:{type:Boolean}},setup(p){const o=p,l="/static/repere/logo.png";return L(!1),(i,n)=>(r(),v(Ne,{rounded:"",elevation:"4",color:"secondary"},{append:e(()=>[Be(i.$slots,"default"),n[0]||(n[0]=S("div",{class:"mr-2"},null,-1))]),default:e(()=>[t(qe,null,{default:e(()=>[t(P,null,{default:e(()=>[t(f,{"align-self":"center",cols:"auto"},{default:e(()=>[t(He,{width:"60",src:l})]),_:1}),t(f,{"align-self":"center"},{default:e(()=>[s(C(o.title),1)]),_:1})]),_:1})]),_:1})]),_:3}))}}),Ft=G({__name:"ParticipantsEditCard",props:{participants:{}},emits:["save"],setup(p,{emit:o}){const l=p,i=o,n=L(l.participants.map(g=>g.Participant));return(g,V)=>{const m=St;return r(),v(M,{title:"Modifier les options"},{default:e(()=>[t(w,null,{default:e(()=>[t(P,null,{default:e(()=>[(r(!0),x(D,null,q(l.participants,(y,c)=>(r(),v(f,{cols:"6"},{default:e(()=>[t(M,{title:U(Se).label(y.Personne),subtitle:U(ie).label(y.Camp)},{default:e(()=>[t(w,null,{default:e(()=>[t(P,null,{default:e(()=>[t(f,null,{default:e(()=>[y.Camp.Navette.Actif?(r(),v(m,{key:0,modelValue:n.value[c].Navette,"onUpdate:modelValue":a=>n.value[c].Navette=a,hint:y.Camp.Navette.Commentaire},null,8,["modelValue","onUpdate:modelValue","hint"])):(r(),v(Y,{key:1},{default:e(()=>[...V[1]||(V[1]=[s("Ce séjour ne propose pas de navette.",-1)])]),_:1}))]),_:2},1024)]),_:2},1024),t(P,null,{default:e(()=>[t(f,null,{default:e(()=>[t(oe,{modelValue:n.value[c].Commentaire,"onUpdate:modelValue":a=>n.value[c].Commentaire=a,label:"Information libre",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),t(P,null,{default:e(()=>[t(f,null,{default:e(()=>[...V[2]||(V[2]=[s(" TODO: option prix ",-1)])]),_:1})]),_:1})]),_:2},1024)]),_:2},1032,["title","subtitle"])]),_:2},1024))),256))]),_:1})]),_:1}),t(ne,null,{default:e(()=>[t(ve),t(j,{onClick:V[0]||(V[0]=y=>i("save",n.value)),color:"green"},{prepend:e(()=>[t($,null,{default:e(()=>[...V[3]||(V[3]=[s("mdi-content-save-cog",-1)])]),_:1})]),default:e(()=>[V[4]||(V[4]=s(" Enregistrer",-1))]),_:1})]),_:1})]),_:1})}}}),It=G({__name:"AideCard",props:{dossier:{},structureaides:{}},emits:["save"],setup(p,{emit:o}){const l=p,i=o,n=L({Id:0,IdStructureaide:0,IdParticipant:(l.dossier.Participants||[])[0].Participant.Id,Valide:!1,Valeur:{Currency:At.Euros,Cent:0},ParJour:!1,NbJoursMax:0}),g=L(null),V=H(()=>n.value?g.value!=null&&n.value.IdParticipant!=0&&n.value.IdStructureaide!=0&&n.value.Valeur.Cent!=0:!1),m=H(()=>(l.dossier.Participants||[]).map(c=>({title:Se.label(c.Personne),subtitle:ie.label(c.Camp),value:c.Participant.Id}))),y=H(()=>Object.values(l.structureaides||{}).map(c=>({value:c.Id,title:c.Nom})));return(c,a)=>{const b=yt,u=Ut,h=Pt;return r(),v(M,{title:"Ajouter une aide extérieure",subtitle:"Cette aide sera vérifiée par le centre."},{default:e(()=>[t(w,null,{default:e(()=>[t(P,null,{default:e(()=>[t(f,null,{default:e(()=>[t(Ae,{variant:"outlined",density:"comfortable",label:"Participant concerné",modelValue:n.value.IdParticipant,"onUpdate:modelValue":a[0]||(a[0]=_=>n.value.IdParticipant=_),items:m.value},{item:e(({item:_,props:O})=>[t(N,be(O,{title:_.raw.title,subtitle:_.raw.subtitle}),null,16,["title","subtitle"])]),_:1},8,["modelValue","items"])]),_:1})]),_:1}),t(P,null,{default:e(()=>[t(f,null,{default:e(()=>[t(Ae,{variant:"outlined",density:"comfortable",label:"Structure","model-value":U(ze)(n.value.IdStructureaide),"onUpdate:modelValue":a[1]||(a[1]=_=>n.value.IdStructureaide=U(Oe)(_)),items:y.value,"no-data-text":"Aucune structure n'est disponible."},null,8,["model-value","items"])]),_:1})]),_:1}),t(P,null,{default:e(()=>[t(f,{"align-self":"center"},{default:e(()=>[t(b,{label:"Valeur",modelValue:n.value.Valeur,"onUpdate:modelValue":a[2]||(a[2]=_=>n.value.Valeur=_),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),t(P,null,{default:e(()=>[t(f,{"align-self":"center"},{default:e(()=>[t(J,{modelValue:n.value.ParJour,"onUpdate:modelValue":a[3]||(a[3]=_=>n.value.ParJour=_),label:"Montant par jour","hide-details":""},null,8,["modelValue"])]),_:1}),t(f,{"align-self":"center"},{default:e(()=>[n.value.ParJour?(r(),v(u,{key:0,label:"Limite sur le nombre de jours",modelValue:n.value.NbJoursMax,"onUpdate:modelValue":a[4]||(a[4]=_=>n.value.NbJoursMax=_),min:0,hint:"0 pour ne pas limiter","persistent-hint":""},null,8,["modelValue"])):R("",!0)]),_:1})]),_:1}),t(P,null,{default:e(()=>[t(f,null,{default:e(()=>[t(h,{label:"Pièce justificative",onUpdate:a[5]||(a[5]=_=>g.value=_)})]),_:1})]),_:1})]),_:1}),t(ne,null,{default:e(()=>[t(ve),t(j,{color:"green",disabled:!V.value,onClick:a[6]||(a[6]=_=>i("save",n.value,g.value))},{default:e(()=>[...a[7]||(a[7]=[s(" Ajouter pour vérification ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})}}}),Tt={key:0},Et=G({__name:"FinancesCard",props:{token:{},dossier:{},isPaiementOpen:{type:Boolean}},emits:["refresh","showReglement"],setup(p,{emit:o}){const l=p,i=o;re(c);const n=L(!1);async function g(a,b){n.value=!1,await A.CreateAide(b,a,{token:l.token})!==void 0&&(A.showMessage("Aide ajoutée avec succès (validation à venir). Merci !"),i("refresh"))}const V=H(()=>{const a=[];return Object.values(l.dossier.Aides||{}).forEach(b=>a.push(...Object.values(b||{}))),a}),m=H(()=>V.value.filter(a=>!a.Valide).length),y=L({});async function c(){const a=await A.GetStructureaides();a!==void 0&&(y.value=a||{})}return(a,b)=>(r(),v(M,{subtitle:"Réglement",class:"mt-2"},{append:e(()=>[t(j,{size:"small",class:"mr-1",onClick:b[0]||(b[0]=u=>i("showReglement")),disabled:!l.isPaiementOpen||l.dossier.Bilan.Statut==U(me).Complet},{prepend:e(()=>[t($,null,{default:e(()=>[...b[3]||(b[3]=[s("mdi-cash-plus",-1)])]),_:1})]),default:e(()=>[b[4]||(b[4]=s(" Régler ",-1))]),_:1},8,["disabled"]),t(j,{size:"small",disabled:!l.dossier.Participants?.length,onClick:b[1]||(b[1]=u=>n.value=!0)},{prepend:e(()=>[t($,{color:"green"},{default:e(()=>[...b[5]||(b[5]=[s("mdi-plus",-1)])]),_:1})]),default:e(()=>[b[6]||(b[6]=s(" Ajouter une aide ",-1))]),_:1},8,["disabled"])]),default:e(()=>[t(w,null,{default:e(()=>[t(P,{class:"mt-2"},{default:e(()=>[t(f,null,{default:e(()=>[...b[7]||(b[7]=[s("Prix des séjours",-1)])]),_:1}),t(f,{cols:"4",class:"text-right"},{default:e(()=>[s(C(p.dossier.Bilan.Demande),1)]),_:1})]),_:1}),p.dossier.Bilan.DemandeEnAttenteValidation?(r(),v(P,{key:0,class:"my-2"},{default:e(()=>[t(f,{class:"text-grey"},{default:e(()=>[...b[8]||(b[8]=[s("Séjours en attente de validation",-1)])]),_:1}),t(f,{cols:"4",class:"text-right text-grey"},{default:e(()=>[s(C(p.dossier.Bilan.DemandeEnAttenteValidation),1)]),_:1})]),_:1})):R("",!0),p.dossier.Bilan.Aides?(r(),v(P,{key:1,class:"my-0"},{default:e(()=>[t(f,{cols:"auto"},{default:e(()=>[t(ge,null,{activator:e(({props:u})=>[t($,Ue(he(u)),{default:e(()=>[...b[9]||(b[9]=[s(" mdi-view-list ",-1)])]),_:1},16)]),default:e(()=>[y.value?(r(),v(M,{key:0,title:"Aides extérieures"},{default:e(()=>[t(w,null,{default:e(()=>[(r(!0),x(D,null,q(V.value,u=>(r(),v(Y,{color:u.Valide?void 0:"orange",class:"mx-1"},{default:e(()=>[s(C(y.value[u.IdStructureaide].Nom)+" : "+C(U(X).montant(u.Valeur)),1)]),_:2},1032,["color"]))),256))]),_:1})]),_:1})):R("",!0)]),_:1})]),_:1}),t(f,null,{default:e(()=>[b[11]||(b[11]=s(" Dont aides extérieures ",-1)),m.value?(r(),v($,{key:0,color:"orange"},{default:e(()=>[...b[10]||(b[10]=[s("mdi-clock",-1)])]),_:1})):R("",!0)]),_:1}),t(f,{cols:"4",class:"text-right"},{default:e(()=>[s(C(p.dossier.Bilan.Aides),1)]),_:1})]),_:1})):R("",!0),t(Me,{thickness:"1"}),t(P,{class:"my-0"},{default:e(()=>[t(f,{cols:"auto"},{default:e(()=>[t(ge,null,{activator:e(({props:u})=>[t($,Ue(he(u)),{default:e(()=>[...b[12]||(b[12]=[s(" mdi-view-list ",-1)])]),_:1},16)]),default:e(()=>[t(M,{title:"Paiements"},{default:e(()=>[t(w,null,{default:e(()=>[Object.values(l.dossier.Paiements||{}).length?R("",!0):(r(),x("i",Tt," Aucun paiement n'a encore été enregistré. ")),(r(!0),x(D,null,q(l.dossier.Paiements,u=>(r(),v(Y,{class:"mx-1"},{default:e(()=>[s(C(u.Payeur)+" : "+C(U(X).montant(u.Montant)),1)]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})]),_:1}),t(f,null,{default:e(()=>[...b[13]||(b[13]=[s(" Paiements ",-1)])]),_:1}),t(f,{cols:"4",class:"text-right"},{default:e(()=>[s(C(p.dossier.Bilan.Recu),1)]),_:1})]),_:1}),t(Me,{thickness:"1"}),t(P,{class:"my-0"},{default:e(()=>[t(f,null,{default:e(()=>[...b[14]||(b[14]=[s("Montant restant à régler",-1)])]),_:1}),t(f,{cols:"4",class:"text-right"},{default:e(()=>[S("b",{class:fe(p.dossier.Bilan.Statut==U(me).Complet?"text-green":"text-orange")},C(p.dossier.Bilan.Restant),3)]),_:1})]),_:1})]),_:1}),t(Q,{modelValue:n.value,"onUpdate:modelValue":b[2]||(b[2]=u=>n.value=u),"max-width":"450px"},{default:e(()=>[t(It,{dossier:l.dossier,structureaides:y.value,onSave:g},null,8,["dossier","structureaides"])]),_:1},8,["modelValue"])]),_:1}))}}),$t={key:0},jt=G({__name:"JoomeoCard",props:{token:{}},setup(p){const o=p;re(i);const l=L(null);async function i(){const n=await A.LoadJoomeo({token:o.token});n!==void 0&&(l.value=n)}return(n,g)=>l.value==null?(r(),v(Ve,{key:0,class:"mx-auto",width:"600px",type:"card"})):l.value.Loggin?(r(),v(M,{key:1,class:"mx-auto",title:"Identifiants et albums Joomeo",subtitle:"Retrouvez les photos prises dans nos séjours.","min-width":"600px"},{default:e(()=>[t(w,null,{default:e(()=>[t(P,null,{default:e(()=>[t(f,null,{default:e(()=>[g[0]||(g[0]=s(" Identifiant : ",-1)),S("b",null,C(l.value.Loggin),1)]),_:1}),t(f,null,{default:e(()=>[g[1]||(g[1]=s(" Mot de passe : ",-1)),S("b",null,C(l.value.Password),1)]),_:1})]),_:1}),t(P,null,{default:e(()=>[t(f,null,{default:e(()=>[l.value.Albums?.length?R("",!0):(r(),x("i",$t,"Aucun album n'est encore disponible.")),(r(!0),x(D,null,q(l.value.Albums,V=>(r(),v(Y,{class:"ma-1"},{default:e(()=>[s(C(V),1)]),_:2},1024))),256))]),_:1})]),_:1})]),_:1}),t(ne,null,{default:e(()=>[t(j,{block:"",color:"primary",variant:"outlined",href:l.value.SpaceURL,target:"_blank"},{default:e(()=>[...g[2]||(g[2]=[s(" Accéder à mon espace jooméo ",-1)])]),_:1},8,["href"])]),_:1})]),_:1})):(r(),v(W,{key:2,class:"mx-auto",type:"info"},{default:e(()=>[...g[3]||(g[3]=[s(" Il n'y a encore rien à voir... ",-1)])]),_:1}))}}),Nt={class:"pa-2"},qt=G({__name:"FichesanitaireForm",props:{fiche:{}},emits:["save","uploadVaccin","deleteVaccin","transfert"],setup(p,{emit:o}){const l=p,i=o,n=Le(Je(l.fiche.Fichesanitaire)),g=L(l.fiche.RespoSecuriteSociale),V=H(()=>n.Allergies.Asthme||n.Allergies.Alimentaires||n.Allergies.Medicamenteuses||n.Allergies.Autres.length!=0),m=H(()=>l.fiche.Fichesanitaire.Mails||[]),y=H(()=>l.fiche.State==le.NoFiche?void 0:`Dernière modification : ${X.time(l.fiche.Fichesanitaire.LastModif)} / Propriétaire(s) :
         ${m.value.join(" ; ")}`);return(c,a)=>{const b=Te;return r(),x("div",Nt,[t(M,{title:l.fiche.Personne,subtitle:y.value},{default:e(()=>[t(w,null,{default:e(()=>[l.fiche.IsLocked?(r(),v(W,{key:0},{default:e(()=>[s(" Votre adresse mail n'est pas reconnu dans notre système comme celle du responsable de cette fiche sanitaire. Elle est actuellement liée "+C(m.value.length>=2?"aux adresses":"à l'adresse")+" ",1),S("b",null,C(m.value.join(" ; ")),1),a[30]||(a[30]=s(". ",-1)),a[31]||(a[31]=S("br",null,null,-1)),s(" Afin de protéger vos données, vous devez demander un transfert des droits de lecture et d'écriture. Un mail contenant un lien de transfert va être envoyé "+C(m.value.length>=2?"aux adresses":"à l'adresse")+" ",1),S("i",null,"("+C(m.value.join(" ; "))+")",1),a[32]||(a[32]=s(". ",-1)),t(j,{variant:"outlined",onClick:a[0]||(a[0]=u=>i("transfert")),block:"",class:"mt-4"},{prepend:e(()=>[t($,null,{default:e(()=>[...a[28]||(a[28]=[s("mdi-lock-open",-1)])]),_:1})]),default:e(()=>[a[29]||(a[29]=s(" Demander le transfert de la fiche sanitaire ",-1))]),_:1})]),_:1})):l.fiche.State==U(le).UpToDate&&l.fiche.VaccinsFiles?.length?(r(),v(W,{key:1,type:"success"},{default:e(()=>[...a[33]||(a[33]=[s(" La fiche sanitaire est à jour. Merci ! ",-1)])]),_:1})):l.fiche.State==U(le).UpToDate?(r(),v(W,{key:2,type:"warning"},{default:e(()=>[...a[34]||(a[34]=[s(" La fiche sanitaire est à jour, mais vous n'avez déposé aucun vaccin. ",-1)])]),_:1})):l.fiche.State==U(le).Outdated?(r(),v(W,{key:3,type:"warning"},{default:e(()=>[...a[35]||(a[35]=[s(" Merci de bien vouloir vérifier que les données ci-dessous sont à jour et les valider. ",-1),S("br",null,null,-1),s("Nous avons besoin de votre consentement, décrit dans l'encart ",-1),S("b",null,"Validation",-1),s(" (en bas de page). ",-1)])]),_:1})):(r(),v(W,{key:4,type:"info"},{default:e(()=>[...a[36]||(a[36]=[s(" Merci de compléter la fiche sanitaire ci-dessous. ",-1)])]),_:1}))]),_:1})]),_:1},8,["title","subtitle"]),l.fiche.IsLocked?R("",!0):(r(),x(D,{key:0},[t(M,{subtitle:"Vaccinations",class:"my-2"},{default:e(()=>[t(w,null,{default:e(()=>[a[37]||(a[37]=s(" Merci de joindre le scan des pages « vaccinations » du carnet de santé du participant. Seul le DTPolio est obligatoire pour être accueilli en séjour de vacances. ",-1)),a[38]||(a[38]=S("br",null,null,-1)),a[39]||(a[39]=S("i",null," Si le participant n’a pas les vaccins obligatoires, joindre un certificat médical de contre-indication. ",-1)),t(b,{class:"mt-2",demande:l.fiche.VaccinsDemande,files:l.fiche.VaccinsFiles||[],"in-upload":!1,optionnelle:null,"show-upload-text":"",onUpload:a[1]||(a[1]=u=>i("uploadVaccin",u)),onDelete:a[2]||(a[2]=u=>i("deleteVaccin",u))},null,8,["demande","files"])]),_:1})]),_:1}),t(M,{subtitle:"Handicap",class:"my-2"},{default:e(()=>[t(w,null,{default:e(()=>[t(J,{modelValue:n.Handicap,"onUpdate:modelValue":a[3]||(a[3]=u=>n.Handicap=u),color:"primary",label:"Le participant est porteur de handicap. ","hide-details":""},null,8,["modelValue"]),t(ye,null,{default:e(()=>[t(W,{modelValue:n.Handicap,"onUpdate:modelValue":a[4]||(a[4]=u=>n.Handicap=u),color:"blue-lighten-4"},{default:e(()=>[...a[40]||(a[40]=[s(" Merci de ",-1),S("b",null,"contacter",-1),s(" au plus vite le directeur afin qu’un accueil individualisé puisse être mis en place. ",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(M,{subtitle:"Traitement",class:"my-2"},{default:e(()=>[t(w,null,{default:e(()=>[t(J,{modelValue:n.TraitementMedical,"onUpdate:modelValue":a[5]||(a[5]=u=>n.TraitementMedical=u),color:"primary",label:"Le participant suit un traitement médical pendant le séjour.","hide-details":""},null,8,["modelValue"]),t(ye,null,{default:e(()=>[t(W,{modelValue:n.TraitementMedical,"onUpdate:modelValue":a[6]||(a[6]=u=>n.TraitementMedical=u),color:"blue-lighten-4"},{default:e(()=>[...a[41]||(a[41]=[s(" Merci de joindre une ",-1),S("b",null,"ordonnance",-1),s(" récente et les ",-1),S("b",null,"médicaments",-1),s(" correspondants (avec la notice). Aucun médicament ne pourra être pris sans ordonnance. ",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(M,{subtitle:"Maladies",class:"my-2"},{default:e(()=>[t(w,null,{default:e(()=>[a[42]||(a[42]=s(" Le participant a-t-il déjà eu les maladies suivantes ? ",-1)),t(P,{class:"mt-2"},{default:e(()=>[t(f,{cols:"3",class:"py-0"},{default:e(()=>[t(J,{modelValue:n.Maladies.Rubeole,"onUpdate:modelValue":a[7]||(a[7]=u=>n.Maladies.Rubeole=u),color:"primary",label:"Rubéole","hide-details":""},null,8,["modelValue"])]),_:1}),t(f,{cols:"3",class:"py-0"},{default:e(()=>[t(J,{modelValue:n.Maladies.Varicelle,"onUpdate:modelValue":a[8]||(a[8]=u=>n.Maladies.Varicelle=u),color:"primary",label:"Varicelle","hide-details":""},null,8,["modelValue"])]),_:1}),t(f,{cols:"3",class:"py-0"},{default:e(()=>[t(J,{modelValue:n.Maladies.Angine,"onUpdate:modelValue":a[9]||(a[9]=u=>n.Maladies.Angine=u),color:"primary",label:"Angine","hide-details":""},null,8,["modelValue"])]),_:1}),t(f,{cols:"3",class:"py-0"},{default:e(()=>[t(J,{modelValue:n.Maladies.Oreillons,"onUpdate:modelValue":a[10]||(a[10]=u=>n.Maladies.Oreillons=u),color:"primary",label:"Oreillons","hide-details":""},null,8,["modelValue"])]),_:1}),t(f,{cols:"3",class:"py-0"},{default:e(()=>[t(J,{modelValue:n.Maladies.Scarlatine,"onUpdate:modelValue":a[11]||(a[11]=u=>n.Maladies.Scarlatine=u),color:"primary",label:"Scarlatine","hide-details":""},null,8,["modelValue"])]),_:1}),t(f,{cols:"3",class:"py-0"},{default:e(()=>[t(J,{modelValue:n.Maladies.Coqueluche,"onUpdate:modelValue":a[12]||(a[12]=u=>n.Maladies.Coqueluche=u),color:"primary",label:"Coqueluche","hide-details":""},null,8,["modelValue"])]),_:1}),t(f,{cols:"3",class:"py-0"},{default:e(()=>[t(J,{modelValue:n.Maladies.Otite,"onUpdate:modelValue":a[13]||(a[13]=u=>n.Maladies.Otite=u),color:"primary",label:"Otite","hide-details":""},null,8,["modelValue"])]),_:1}),t(f,{cols:"3",class:"py-0"},{default:e(()=>[t(J,{modelValue:n.Maladies.Rougeole,"onUpdate:modelValue":a[14]||(a[14]=u=>n.Maladies.Rougeole=u),color:"primary",label:"Rougeole","hide-details":""},null,8,["modelValue"])]),_:1}),t(f,{cols:"3",class:"py-0"},{default:e(()=>[t(J,{modelValue:n.Maladies.Rhumatisme,"onUpdate:modelValue":a[15]||(a[15]=u=>n.Maladies.Rhumatisme=u),color:"primary",label:"Rhumatisme articulaire aigü ","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(M,{subtitle:"Allergies",class:"my-2"},{default:e(()=>[t(w,null,{default:e(()=>[a[43]||(a[43]=s(" Le participant a-t-il une des allergies suivantes ? ",-1)),t(P,{class:"mt-2"},{default:e(()=>[t(f,{"align-self":"center",cols:"3",class:"py-0"},{default:e(()=>[t(J,{modelValue:n.Allergies.Asthme,"onUpdate:modelValue":a[16]||(a[16]=u=>n.Allergies.Asthme=u),color:"primary",label:"Asthme","hide-details":""},null,8,["modelValue"])]),_:1}),t(f,{"align-self":"center",cols:"3",class:"py-0"},{default:e(()=>[t(J,{modelValue:n.Allergies.Alimentaires,"onUpdate:modelValue":a[17]||(a[17]=u=>n.Allergies.Alimentaires=u),color:"primary",label:"Alimentaires","hide-details":""},null,8,["modelValue"])]),_:1}),t(f,{"align-self":"center",cols:"3",class:"py-0"},{default:e(()=>[t(J,{modelValue:n.Allergies.Medicamenteuses,"onUpdate:modelValue":a[18]||(a[18]=u=>n.Allergies.Medicamenteuses=u),color:"primary",label:"Médicamenteuses","hide-details":""},null,8,["modelValue"])]),_:1}),t(f,{"align-self":"center",cols:"3",class:"py-0"},{default:e(()=>[t(oe,{density:"compact",variant:"outlined","hide-details":"",label:"Autres allergies",modelValue:n.Allergies.Autres,"onUpdate:modelValue":a[19]||(a[19]=u=>n.Allergies.Autres=u)},null,8,["modelValue"])]),_:1})]),_:1}),t(ye,null,{default:e(()=>[V.value?(r(),v(P,{key:0},{default:e(()=>[t(f,null,{default:e(()=>[t(ue,{variant:"outlined",label:"Conduite à tenir",modelValue:n.Allergies.ConduiteATenir,"onUpdate:modelValue":a[20]||(a[20]=u=>n.Allergies.ConduiteATenir=u),hint:"Préciser la cause de l’allergie et la conduite à tenir (si automédication le signaler). Si un PAI a été mis en place durant le temps scolaire, merci de nous le signaler.","persistent-hint":"",rules:[U(Ke).required("Merci de nous informer de la conduite à tenir en cas d'allergie.")]},null,8,["modelValue","rules"])]),_:1})]),_:1})):R("",!0)]),_:1})]),_:1})]),_:1}),t(M,{subtitle:"Divers",class:"my-2"},{default:e(()=>[t(w,null,{default:e(()=>[t(P,null,{default:e(()=>[t(f,null,{default:e(()=>[t(ue,{variant:"outlined",label:"Difficultés de santé",modelValue:n.DifficultesSante,"onUpdate:modelValue":a[21]||(a[21]=u=>n.DifficultesSante=u),hint:"Indiquer les difficultés de santé (maladie, accident, crises convulsives, hospitalisation, opération, rééducation) en précisant les dates et les précautions à prendre.","persistent-hint":""},null,8,["modelValue"])]),_:1}),t(f,null,{default:e(()=>[t(ue,{variant:"outlined",label:"Recommandations utiles",modelValue:n.Recommandations,"onUpdate:modelValue":a[22]||(a[22]=u=>n.Recommandations=u),hint:"Préciser si le participant porte des lunettes, des lentilles, des prothèses auditives, des prothèses dentaires...","persistent-hint":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(M,{subtitle:"Médecin traitant",class:"my-2"},{default:e(()=>[t(w,null,{default:e(()=>[t(P,null,{default:e(()=>[t(f,null,{default:e(()=>[t(oe,{variant:"outlined",density:"compact",label:"Nom",modelValue:n.Medecin.Nom,"onUpdate:modelValue":a[23]||(a[23]=u=>n.Medecin.Nom=u),"hide-details":""},null,8,["modelValue"])]),_:1}),t(f,null,{default:e(()=>[t(oe,{variant:"outlined",density:"compact",label:"Téléphone","model-value":U(X).tel(n.Medecin.Tel),"onUpdate:modelValue":a[24]||(a[24]=u=>n.Medecin.Tel=u),"hide-details":""},null,8,["model-value"])]),_:1})]),_:1})]),_:1})]),_:1}),t(M,{subtitle:"Responsable légal",class:"my-2"},{default:e(()=>[t(w,null,{default:e(()=>[t(P,null,{default:e(()=>[t(f,{"align-self":"center"},{default:e(()=>[a[45]||(a[45]=s(" Téléphone : ",-1)),l.fiche.RespoTels?.length?R("",!0):(r(),v(Y,{key:0,label:""},{default:e(()=>[...a[44]||(a[44]=[s("Aucun numéro",-1)])]),_:1})),(r(!0),x(D,null,q(l.fiche.RespoTels,u=>(r(),v(Y,{label:"",class:"mx-1"},{default:e(()=>[s(C(U(X).tel(u)),1)]),_:2},1024))),256))]),_:1}),t(f,{"align-self":"center"},{default:e(()=>[t(oe,{variant:"outlined",density:"compact",label:"Numéro de contact","model-value":U(X).tel(n.Tel),"onUpdate:modelValue":a[25]||(a[25]=u=>n.Tel=u),hint:"Numéro de téléphone supplémentaire (optionnel)","persistent-hint":""},null,8,["model-value"])]),_:1})]),_:1}),t(P,null,{default:e(()=>[t(f,null,{default:e(()=>[t(oe,{variant:"outlined",density:"compact",label:"Sécurité sociale",modelValue:g.value,"onUpdate:modelValue":a[26]||(a[26]=u=>g.value=u),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(M,{class:"mt-4",variant:"outlined",color:"success",title:"Validation"},{default:e(()=>[t(w,{class:"text-black"},{default:e(()=>[...a[46]||(a[46]=[s(" Le responsable légal déclare ",-1),S("b",null,"exacts",-1),s(" les renseignements portés sur ce formulaire et autorise le responsable du séjour à prendre, le cas échéant, ",-1),S("b",null,"toutes mesures",-1),s(" (traitement médical, hospitalisation, intervention chirurgicale) rendues nécessaires par l'état du participant. Il autorise également, si nécessaire, le directeur du séjour à faire sortir le participant de l’hôpital après une hospitalisation. ",-1)])]),_:1}),t(ne,null,{default:e(()=>[t(j,{block:"",color:"success",onClick:a[27]||(a[27]=u=>i("save",n,g.value))},{prepend:e(()=>[t($,null,{default:e(()=>[...a[47]||(a[47]=[s("mdi-content-save",-1)])]),_:1})]),default:e(()=>[s(" Enregistrer la fiche sanitaire de "+C(l.fiche.Personne),1)]),_:1})]),_:1})]),_:1})],64))])}}}),Ht=G({__name:"FichessanitairesCard",props:{token:{}},emits:["close","updateNotifs"],setup(p,{emit:o}){const l=p,i=o;re(V);const n=L(0),g=L([]);async function V(){const b=await A.LoadFichesanitaires({token:l.token});b!==void 0&&(g.value=b.Fiches||[],g.value.length&&n.value==0&&(n.value=g.value[0].Fichesanitaire.IdPersonne),i("updateNotifs",b.ToFillCount))}async function m(b,u){await A.UpdateFichesanitaire({Token:l.token,Fichesanitaire:b,SecuriteSocialeResponsable:u})!==void 0&&(A.showMessage("La fiche sanitaire a bien été enregistrée. Merci !"),V())}async function y(b,u){const h=g.value[b];await A.UploadVaccin(u,{token:l.token,idPersonne:h.Fichesanitaire.IdPersonne})!==void 0&&(V(),A.showMessage("Le vaccin a bien été téléversé. Merci !"))}async function c(b,u){g.value[b],await A.DeleteVaccin({key:u.Key})!==void 0&&(V(),A.showMessage("Le vaccin a bien été supprimé."))}async function a(b){i("close"),await A.TransfertFicheSanitaire({token:l.token,idPersonne:b.IdPersonne})!==void 0&&A.showMessage("Mail de transfert envoyé avec succès.")}return(b,u)=>(r(),v(M,{title:"Fiches sanitaires et vaccins"},{append:e(()=>[t(Fe,{modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=h=>n.value=h)},{default:e(()=>[(r(!0),x(D,null,q(g.value,h=>(r(),v(Ie,{value:h.Fichesanitaire.IdPersonne},{default:e(()=>[s(C(h.Personne)+" ",1),h.State==U(le).NoFiche||h.State==U(le).Outdated||!h.VaccinsFiles?.length?(r(),v($,{key:0,class:"ml-2",color:"warning"},{default:e(()=>[...u[1]||(u[1]=[s(" mdi-alert ",-1)])]),_:1})):(r(),v($,{key:1,class:"ml-2",color:"success"},{default:e(()=>[...u[2]||(u[2]=[s(" mdi-check ",-1)])]),_:1}))]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])]),default:e(()=>[t(w,null,{default:e(()=>[t(xe,{"model-value":n.value},{default:e(()=>[(r(!0),x(D,null,q(g.value,(h,_)=>(r(),v(De,{value:h.Fichesanitaire.IdPersonne},{default:e(()=>[t(qt,{fiche:h,onSave:m,onUploadVaccin:O=>y(_,O),onDeleteVaccin:O=>c(_,O),onTransfert:O=>a(h.Fichesanitaire)},null,8,["fiche","onUploadVaccin","onDeleteVaccin","onTransfert"])]),_:2},1032,["value"]))),256))]),_:1},8,["model-value"])]),_:1})]),_:1}))}}),Bt=Ze({name:String,itemAriaLabel:{type:String,default:"$vuetify.rating.ariaLabel.item"},activeColor:String,color:String,clearable:Boolean,disabled:Boolean,emptyIcon:{type:Pe,default:"$ratingEmpty"},fullIcon:{type:Pe,default:"$ratingFull"},halfIncrements:Boolean,hover:Boolean,length:{type:[Number,String],default:5},readonly:Boolean,modelValue:{type:[Number,String],default:0},itemLabels:Array,itemLabelPosition:{type:String,default:"top",validator:p=>["top","bottom"].includes(p)},ripple:Boolean,...rt(),...ut(),...it(),...ot(),...st()},"VRating"),Ot=Ge()({name:"VRating",props:Bt(),emits:{"update:modelValue":p=>!0},setup(p,o){let{slots:l}=o;const{t:i}=We(),{themeClasses:n}=Qe(p),g=Xe(p,"modelValue"),V=H(()=>Ye(parseFloat(g.value),0,Number(p.length))),m=H(()=>et(Number(p.length),1)),y=H(()=>m.value.flatMap(F=>p.halfIncrements?[F-.5,F]:[F])),c=tt(-1),a=H(()=>y.value.map(F=>{const I=p.hover&&c.value>-1,T=V.value>=F,z=c.value>=F,E=(I?z:T)?p.fullIcon:p.emptyIcon,d=p.activeColor??p.color,ee=T||z?d:p.color;return{isFilled:T,isHovered:z,icon:E,color:ee}})),b=H(()=>[0,...y.value].map(F=>{function I(){c.value=F}function T(){c.value=-1}function z(){p.disabled||p.readonly||(g.value=V.value===F&&p.clearable?0:F)}return{onMouseenter:p.hover?I:void 0,onMouseleave:p.hover?T:void 0,onClick:z}})),u=lt(),h=H(()=>p.name??`v-rating-${u}`);function _(F){let{value:I,index:T,showStar:z=!0}=F;const{onMouseenter:pe,onMouseleave:E,onClick:d}=b.value[T+1],ee=`${h.value}-${String(I).replace(".","-")}`,k={color:a.value[T]?.color,density:p.density,disabled:p.disabled,icon:a.value[T]?.icon,ripple:p.ripple,size:p.size,variant:"plain"};return S(D,null,[S("label",{for:ee,class:fe({"v-rating__item--half":p.halfIncrements&&I%1>0,"v-rating__item--full":p.halfIncrements&&I%1===0}),onMouseenter:pe,onMouseleave:E,onClick:d},[S("span",{class:"v-rating__hidden"},[i(p.itemAriaLabel,I,p.length)]),z?l.item?l.item({...a.value[T],props:k,value:I,index:T,rating:V.value}):t(j,be({"aria-label":i(p.itemAriaLabel,I,p.length)},k),null):void 0]),S("input",{class:"v-rating__hidden",name:h.value,id:ee,type:"radio",value:I,checked:V.value===I,tabindex:-1,readonly:p.readonly,disabled:p.disabled},null)])}function O(F){return l["item-label"]?l["item-label"](F):F.label?S("span",null,[F.label]):S("span",null,[s(" ")])}return at(()=>{const F=!!p.itemLabels?.length||l["item-label"];return t(p.tag,{class:fe(["v-rating",{"v-rating--hover":p.hover,"v-rating--readonly":p.readonly},n.value,p.class]),style:nt(p.style)},{default:()=>[t(_,{value:0,index:-1,showStar:!1},null),m.value.map((I,T)=>S("div",{class:"v-rating__wrapper"},[F&&p.itemLabelPosition==="top"?O({value:I,index:T,label:p.itemLabels?.[T]}):void 0,S("div",{class:"v-rating__item"},[p.halfIncrements?S(D,null,[t(_,{value:I-.5,index:T*2},null),t(_,{value:I,index:T*2+1},null)]):t(_,{value:I,index:T},null)]),F&&p.itemLabelPosition==="bottom"?O({value:I,index:T,label:p.itemLabels?.[T]}):void 0]))]})}),{}}}),te=G({__name:"RatingField",props:dt({label:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(p){const o=p,l=mt(p,"modelValue");return(i,n)=>(r(),v(P,{"no-gutters":""},{default:e(()=>[t(f,{cols:"12"},{default:e(()=>[s(C(o.label),1)]),_:1}),t(f,{cols:"12"},{default:e(()=>[t(Ot,{hover:"",color:"primary",length:4,modelValue:l.value,"onUpdate:modelValue":n[0]||(n[0]=g=>l.value=g),size:"32"},null,8,["modelValue"])]),_:1})]),_:1}))}}),zt={key:1},Jt=G({__name:"SondagesCard",props:{token:{},initialCamp:{}},setup(p){const o=p;re(n);const l=L(0),i=L(null);async function n(){const m=await A.LoadSondages({token:o.token});if(m===void 0)return;i.value=m||[];const y=(m||[]).filter(g);(m||[]).map(c=>c.Sondage.IdCamp).includes(o.initialCamp)?l.value=o.initialCamp:y.length?l.value=y[0].Sondage.IdCamp:l.value==0&&m?.length&&(l.value=m[0].Sondage.IdCamp)}function g(m){return pt(m.Sondage.Modified)}async function V(m){await A.UpdateSondages({Token:o.token,Id:m.Id,IdCamp:m.IdCamp,Reponse:m})!==void 0&&(n(),A.showMessage("Votre réponse a bien été enregistrée. Merci !"))}return(m,y)=>i.value==null?(r(),v(Ve,{key:0,type:"card"})):i.value!=null?(r(),v(M,{key:1,title:"Enquête de satisfaction",width:i.value?.length?void 0:"600px",class:"mx-auto"},{default:e(()=>[t(w,null,{default:e(()=>[i.value.length?(r(),v(W,{key:0,color:"secondary",icon:"mdi-comment-quote"},{default:e(()=>[...y[1]||(y[1]=[s(" Afin d'améliorer nos prestations, nous avons à cœur de vous laisser la parole. Vos suggestions, remarques et ressentis nous aiderons à améliorer nos séjours. Merci d'avance de ce temps que vous réserverez pour répondre à cette courte enquête. ",-1)])]),_:1})):(r(),x("div",zt," L'enquête n'est pas encore ouverte. Vous pourrez revenir ici donner votre avis une fois le séjour terminé. ")),i.value.length?(r(),v(Fe,{key:2,modelValue:l.value,"onUpdate:modelValue":y[0]||(y[0]=c=>l.value=c),grow:"",class:"mt-2"},{default:e(()=>[(r(!0),x(D,null,q(i.value,c=>(r(),v(Ie,{value:c.Sondage.IdCamp},{default:e(()=>[s(C(c.Camp)+" ",1),g(c)?(r(),v(ce,{key:0,inline:"",content:"Nouveau",color:"pink"})):R("",!0)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])):R("",!0),t(xe,{"model-value":l.value,class:"mt-2"},{default:e(()=>[(r(!0),x(D,null,q(i.value,c=>(r(),v(De,{value:c.Sondage.IdCamp},{default:e(()=>[t(M,{subtitle:"Vos impressions sur le séjour"},{default:e(()=>[t(w,null,{default:e(()=>[t(P,null,{default:e(()=>[t(f,{cols:"6"},{default:e(()=>[t(P,null,{default:e(()=>[t(f,null,{default:e(()=>[t(te,{label:"Informations avant le séjour",modelValue:c.Sondage.InfosAvantSejour,"onUpdate:modelValue":a=>c.Sondage.InfosAvantSejour=a},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(f,null,{default:e(()=>[t(te,{label:"Informations pendant le séjour",modelValue:c.Sondage.InfosPendantSejour,"onUpdate:modelValue":a=>c.Sondage.InfosPendantSejour=a},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(f,null,{default:e(()=>[t(te,{label:"L'hébergement",modelValue:c.Sondage.Hebergement,"onUpdate:modelValue":a=>c.Sondage.Hebergement=a},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),t(P,null,{default:e(()=>[t(f,null,{default:e(()=>[t(te,{label:"Les activités",modelValue:c.Sondage.Activites,"onUpdate:modelValue":a=>c.Sondage.Activites=a},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(f,null,{default:e(()=>[t(te,{label:"Le thème",modelValue:c.Sondage.Theme,"onUpdate:modelValue":a=>c.Sondage.Theme=a},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(f,null,{default:e(()=>[t(te,{label:"La nourriture",modelValue:c.Sondage.Nourriture,"onUpdate:modelValue":a=>c.Sondage.Nourriture=a},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),t(P,null,{default:e(()=>[t(f,null,{default:e(()=>[t(te,{label:"L'hygiène corporelle et vestimentaire",modelValue:c.Sondage.Hygiene,"onUpdate:modelValue":a=>c.Sondage.Hygiene=a},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(f,null,{default:e(()=>[t(te,{label:"L'ambiance du groupe",modelValue:c.Sondage.Ambiance,"onUpdate:modelValue":a=>c.Sondage.Ambiance=a},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(f,null,{default:e(()=>[t(te,{label:"Le ressenti global de votre enfant",modelValue:c.Sondage.Ressenti,"onUpdate:modelValue":a=>c.Sondage.Ressenti=a},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),t(f,{cols:"6"},{default:e(()=>[t(P,null,{default:e(()=>[t(f,{cols:"12"},{default:e(()=>[t(ue,{rows:"3",label:"Message du participant",hint:"Le participant souhaite donner son avis : des regrets ? de bons souvenirs ? des propositions d'amélioration ?","persistent-hint":"",modelValue:c.Sondage.MessageEnfant,"onUpdate:modelValue":a=>c.Sondage.MessageEnfant=a},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(f,null,{default:e(()=>[t(ue,{rows:"3",label:"Message du responsable",hint:"En tant que responsable, vous avez une remarque, une suggestion, un ressenti à partager : avec plaisir ! Nous prendrons soin de vous apporter une réponse en cas de besoin.","persistent-hint":"",modelValue:c.Sondage.MessageResponsable,"onUpdate:modelValue":a=>c.Sondage.MessageResponsable=a},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),t(ne,null,{default:e(()=>[t(j,{block:"",variant:"outlined",color:"success",onClick:a=>V(c.Sondage)},{prepend:e(()=>[t($,null,{default:e(()=>[...y[2]||(y[2]=[s("mdi-content-save",-1)])]),_:1})]),default:e(()=>[s(" Enregistrer mon retour pour le séjour "+C(c.Camp),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["value"]))),256))]),_:1},8,["model-value"])]),_:1})]),_:1},8,["width"])):R("",!0)}}),Kt=G({__name:"DocumentsCard",props:{token:{}},emits:["updateNotifs"],setup(p,{emit:o}){const l=p,i=o;re(g);const n=L(null);async function g(){const y=await A.LoadDocuments({token:l.token});y!==void 0&&(n.value=y,i("updateNotifs",y.ToReadOrFillCount))}async function V(y,c,a){await A.UploadDocument(a,{token:l.token,idPersonne:y,idDemande:c})!==void 0&&(A.showMessage("Document téléversé avec succès. Merci !"),await g(),i("updateNotifs",n.value.ToReadOrFillCount))}async function m(y){await A.DeleteDocument({key:y.Key})!==void 0&&(A.showMessage("Document supprimé avec succès."),await g(),i("updateNotifs",n.value.ToReadOrFillCount))}return(y,c)=>{const a=ht,b=Te;return r(),v(M,{title:"Documents des séjours",subtitle:"Vous retrouvez ici les documents des séjours auxquels vous participez, à lire ou remplir."},{append:e(()=>[...c[0]||(c[0]=[])]),default:e(()=>[n.value!=null?(r(),v(w,{key:0},{default:e(()=>[t(ae,null,{default:e(()=>[t(Re,null,{default:e(()=>[...c[1]||(c[1]=[s("À lire",-1)])]),_:1}),n.value.FilesToRead?.length?R("",!0):(r(),v(N,{key:0},{default:e(()=>[...c[2]||(c[2]=[S("i",null,"Aucun document à lire.",-1)])]),_:1})),(r(!0),x(D,null,q(n.value.FilesToRead,u=>(r(),x(D,null,[(r(!0),x(D,null,q(u.Files,h=>(r(),v(N,{title:h.NomClient,subtitle:u.Camp},{append:e(()=>[t(a,{fileKey:h.Key,isGeneratedDoc:!1},null,8,["fileKey"])]),_:2},1032,["title","subtitle"]))),256)),(r(!0),x(D,null,q(u.Generated,h=>(r(),v(N,{title:h.NomClient,subtitle:u.Camp},{append:e(()=>[t(a,{fileKey:h.Key,isGeneratedDoc:!0},null,8,["fileKey"])]),_:2},1032,["title","subtitle"]))),256))],64))),256)),t(Re,null,{default:e(()=>[...c[3]||(c[3]=[s("À fournir",-1)])]),_:1}),n.value.FilesToUpload?.length?R("",!0):(r(),v(N,{key:1},{default:e(()=>[...c[4]||(c[4]=[S("i",null,"Aucun document à fournir.",-1)])]),_:1})),(r(!0),x(D,null,q(n.value.FilesToUpload,u=>(r(),x(D,null,[(r(!0),x(D,null,q(u.Demandes,h=>(r(),v(b,{demande:h.Demande,files:h.Uploaded||[],inUpload:!1,title:`Document pour ${u.Personne}`,optionnelle:null,showUploadText:!0,onUpload:_=>V(u.IdPersonne,h.Demande.Id,_),onDelete:m},ke({_:2},[h.Demande.IdFile.Valid?{name:"prepend",fn:e(()=>[t(_t,{"content-class":"pa-1"},{activator:e(({props:_})=>[t(j,be({ref_for:!0},_,{href:U(Ce).LoadDocument(h.DemandeFile.Key),class:"mr-2",size:"small"}),{prepend:e(()=>[t($,null,{default:e(()=>[...c[5]||(c[5]=[s("mdi-download",-1)])]),_:1})]),default:e(()=>[c[6]||(c[6]=s(" Modèle",-1))]),_:1},16,["href"])]),default:e(()=>[t(a,{"file-key":h.DemandeFile.Key,isGeneratedDoc:!1,large:!0},null,8,["file-key"])]),_:2},1024)]),key:"0"}:void 0]),1032,["demande","files","title","onUpload"]))),256))],64))),256))]),_:1})]),_:1})):(r(),v(Ve,{key:1}))]),_:1})}}}),Gt=G({__name:"FinancesReglementCard",props:{token:{},dossier:{},settings:{}},setup(p,{emit:o}){const l=p,i=L(l.settings.SupportPaiementEnLigne?Z.EnLigne:Z.Virement);async function n(V){await _e(V),A.showMessage("IBAN copié avec succès.")}async function g(V){await _e(V),A.showMessage("Identifiant de virement copié avec succès.")}return(V,m)=>(r(),v(M,{title:"Régler le séjour",class:"mt-2"},{default:e(()=>[t(w,null,{default:e(()=>[m[13]||(m[13]=s(" Le montant à régler est de ",-1)),S("b",null,C(l.dossier.Bilan.Restant),1),m[14]||(m[14]=s(". ",-1)),t(P,{class:"mt-4"},{default:e(()=>[t(f,{"align-self":"start",cols:"4"},{default:e(()=>[t(ae,{class:"py-0",selectable:"",selected:i.value,"onUpdate:selected":m[0]||(m[0]=y=>i.value=y)},{default:e(()=>[l.settings.SupportPaiementEnLigne?(r(),v(N,{key:0,rounded:"",class:"my-2",title:"Payer en ligne",subtitle:"par carte bancaire",value:U(Z).EnLigne},{append:e(()=>[t($,null,{default:e(()=>[...m[2]||(m[2]=[s("mdi-credit-card",-1)])]),_:1})]),_:1},8,["value"])):R("",!0),t(N,{rounded:"",class:"my-2",title:"Payer par virement",value:U(Z).Virement},{append:e(()=>[t($,null,{default:e(()=>[...m[3]||(m[3]=[s("mdi-bank",-1)])]),_:1})]),_:1},8,["value"]),l.settings.Cheques.IsValid?(r(),v(N,{key:1,rounded:"",class:"my-2",title:"Payer par chèque",value:U(Z).Cheque},{append:e(()=>[t($,null,{default:e(()=>[...m[4]||(m[4]=[s("mdi-checkbook",-1)])]),_:1})]),_:1},8,["value"])):R("",!0)]),_:1},8,["selected"])]),_:1}),t(f,{"align-self":"start",cols:"8"},{default:e(()=>[t(M,{title:U(Mt)[i.value]},{default:e(()=>[i.value==U(Z).EnLigne?(r(),v(w,{key:0},{default:e(()=>[...m[5]||(m[5]=[s(" TODO: see https://github.com/benoitkugler/registro/issues/76 ",-1)])]),_:1})):i.value==U(Z).Virement?(r(),v(w,{key:1},{default:e(()=>[s(" Vous pouvez effectuer votre virement vers "+C(l.settings.BankAccounts?.length?"l'un des comptes suivants":"le compte suivant")+" : ",1),t(ae,{class:"my-2"},{default:e(()=>[(r(!0),x(D,null,q(l.settings.BankAccounts,y=>(r(),v(N,{title:y[0],subtitle:y[1]},{append:e(()=>[t(j,{size:"x-small",icon:"mdi-content-copy",onClick:c=>n(y[1])},null,8,["onClick"])]),_:2},1032,["title","subtitle"]))),256))]),_:1}),t(W,{type:"info"},{default:e(()=>[m[6]||(m[6]=s(" Merci d'indiquer impérativement le ",-1)),m[7]||(m[7]=S("b",null,"label",-1)),m[8]||(m[8]=s(" suivant sur votre virement, qui nous permettra de l'identifier : ",-1)),t(P,{"no-gutters":"",class:"mt-2"},{default:e(()=>[t(f,{"align-self":"center",class:"text-center"},{default:e(()=>[t(Y,{variant:"elevated"},{default:e(()=>[s(C(l.settings.VirementCode),1)]),_:1})]),_:1}),t(f,{"align-self":"center",cols:"auto"},{default:e(()=>[t(j,{class:"my-2",size:"x-small",icon:"mdi-content-copy",onClick:m[1]||(m[1]=y=>g(l.settings.VirementCode))})]),_:1})]),_:1})]),_:1})]),_:1})):i.value==U(Z).Cheque?(r(),v(w,{key:2},{default:e(()=>[m[10]||(m[10]=s(" Merci d'envoyer votre chèque à l'ordre ",-1)),S("b",null,C(l.settings.Cheques.Ordre),1),m[11]||(m[11]=s(" à l'adresse suivante : ",-1)),t(P,{justify:"center"},{default:e(()=>[t(f,{cols:"auto"},{default:e(()=>[t(M,{class:"my-2"},{default:e(()=>[t(w,null,{default:e(()=>[s(C(l.settings.Cheques.Adresse[0])+" ",1),m[9]||(m[9]=S("br",null,null,-1)),s(" "+C(l.settings.Cheques.Adresse[1]),1)]),_:1})]),_:1})]),_:1})]),_:1}),m[12]||(m[12]=s(" Il sera encaissé environ une dizaine de jours avant le début du séjour. ",-1))]),_:1})):R("",!0)]),_:1},8,["title"])]),_:1})]),_:1})]),_:1})]),_:1}))}}),Zt=["href"],Wt=G({__name:"PresentationCard",props:{assoTitle:{},mailCentre:{}},setup(p){const o=p;return(l,i)=>(r(),v(M,{title:"Bienvenue sur votre espace de suivi !"},{default:e(()=>[t(w,null,{default:e(()=>[s(" Cette page regroupe toutes les informations liées à votre inscription et vous permet d'interagir avec les directeurs de séjour et l'association "+C(o.assoTitle)+", en utilisant le fil de messages. ",1),i[0]||(i[0]=S("br",null,null,-1)),i[1]||(i[1]=S("br",null,null,-1)),i[2]||(i[2]=s(" Cet espace évoluera au fil de l'inscription, et vous donnera accès au suivi de votre demande: ",-1)),t(ae,{class:"mb-2"},{default:e(()=>[t(N,{title:"Notification de validation",subtitle:"Après prise en compte de votre inscription par notre association.","append-icon":"mdi-check"}),t(N,{title:"Réglement des séjours","append-icon":"mdi-currency-eur"}),t(N,{title:"Documents des séjours",subtitle:"Lettre du directeur, fiches sanitaires, autres documents, ...","append-icon":"mdi-mail"}),t(N,{title:"Album photo",subtitle:"Accès vers une plateforme dédiée aux photos de vos séjours.","append-icon":"mdi-image-album"}),t(N,{title:"Justificatifs",subtitle:"Téléchargement d'une attestation de présence ou d'une facture acquittée.","append-icon":"mdi-download"}),t(N,{title:"Sondage",subtitle:"Un espace de commentaire ouvert à la fin des séjours.","append-icon":"mdi-comment-quote"})]),_:1}),i[3]||(i[3]=s(" La prochaine étape ? La confirmation de votre inscription vous sera donnée par le responsable du camp. Si un camp est déjà complet, vous serez mis sur liste d'attente. ",-1)),i[4]||(i[4]=S("br",null,null,-1)),i[5]||(i[5]=s(" Sans nouvelle d'ici 10 jours, veuillez contacter : ",-1)),S("a",{href:`mailto:${o.mailCentre}`},C(o.mailCentre),9,Zt)]),_:1})]),_:1}))}}),Qt=G({__name:"ValidationInscriptionCard",props:{dossier:{}},setup(p){const o=p,l=H(()=>(o.dossier.Participants||[]).filter(g=>g.Participant.Statut==K.Inscrit)),i=H(()=>(o.dossier.Participants||[]).filter(g=>g.Participant.Statut!=K.Inscrit&&g.Participant.Statut!=K.AStatuer)),n=H(()=>(o.dossier.Participants||[]).filter(g=>g.Participant.Statut==K.AStatuer));return(g,V)=>(r(),v(M,{title:"Inscription confirmée"},{default:e(()=>[t(w,null,{default:e(()=>[V[0]||(V[0]=S("div",{class:"mb-4"}," Nous avons bien reçu votre inscription, et nous vous en remercions. Voici son statut : ",-1)),l.value.length?(r(),v(W,{key:0,color:"lime-lighten-1",class:"my-2",elevation:"2",icon:U(X).statutParticipant(U(K).Inscrit).icon},{default:e(()=>[t(P,null,{default:e(()=>[t(f,{"align-self":"center",class:"text-center"},{default:e(()=>[(r(!0),x(D,null,q(l.value,m=>(r(),v(Y,{class:"my-1"},{default:e(()=>[s(C(m.Personne.Prenom)+" : "+C(U(ie).label(m.Camp)),1)]),_:2},1024))),256))]),_:1}),t(f,{cols:"7"},{default:e(()=>[s("Nous sommes ravis de vous confirmer "+C(l.value.length==1?"cette participation":"ces participations")+" et nous nous réjouissons des moments à passer ensemble !",1)]),_:1})]),_:1})]),_:1},8,["icon"])):R("",!0),i.value.length?(r(),v(W,{key:1,color:"orange-lighten-3",class:"my-2",elevation:"2",icon:U(X).statutParticipant(U(K).AttenteCampComplet).icon},{default:e(()=>[t(P,null,{default:e(()=>[t(f,{"align-self":"center",class:"text-center"},{default:e(()=>[(r(!0),x(D,null,q(i.value,m=>(r(),v(Y,{class:"my-1"},{default:e(()=>[s(C(m.Personne.Prenom)+" : "+C(U(ie).label(m.Camp)),1)]),_:2},1024))),256))]),_:1}),t(f,{cols:"7"},{default:e(()=>[s("Malheureusement, nous avons dû placer "+C(i.value.length==1?"cette demande":"ces demandes")+" en liste d'attente. Nous reviendrons vers vous si une place se libère.",1)]),_:1})]),_:1})]),_:1},8,["icon"])):R("",!0),n.value.length?(r(),v(W,{key:2,color:"grey-lighten-1",class:"my-2",elevation:"2",icon:U(X).statutParticipant(U(K).AStatuer).icon},{default:e(()=>[t(P,null,{default:e(()=>[t(f,{"align-self":"center",class:"text-center"},{default:e(()=>[(r(!0),x(D,null,q(n.value,m=>(r(),v(Y,{class:"my-1"},{default:e(()=>[s(C(m.Personne.Prenom)+" : "+C(U(ie).label(m.Camp)),1)]),_:2},1024))),256))]),_:1}),t(f,{cols:"7"},{default:e(()=>[s(" Nous n'avons pas encore statué pour "+C(n.value.length==1?"cette demande":"ces demandes")+" et nous reviendrons vers vous au plus vite. ",1)]),_:1})]),_:1})]),_:1},8,["icon"])):R("",!0)]),_:1})]),_:1}))}}),Xt={class:"overflow-y-auto",style:{"max-height":"75vh"}},Yt=G({__name:"Main",setup(p){const o=L("");re(async()=>{const E=new URLSearchParams(window.location.search),d=E.get("token")||"",ee=!!E.get("from-inscription"),k=Number(E.get("idEvent")||0);if(o.value=d,await i(),!!l.value){if(ee){T.value=!0;return}V(k)}});const l=L(null);async function i(){const E=await A.Load({token:o.value});E!==void 0&&(l.value=E)}const n=H(()=>l.value==null?[]:ct(l.value.Dossier,Rt.Espaceperso)),g=H(()=>l.value?l.value.DocumentsToReadOrFillCount+l.value.FichesanitaireToFillCount:0);function V(E){if(!l.value)return;const d=(l.value.Dossier.Events||[]).find(ee=>ee.Id==E);if(d)switch(d.Content.Kind){case de.Validation:I.value=!0;return;case de.Facture:F.value=!0;return;case de.PlaceLiberee:z.value=d;return;case de.CampDocs:O.value=!0;return;case de.Sondage:u.value=d.Content.Data.IdCamp;return;default:return}}const m=L(null);async function y(){if(!m.value||!l.value)return;const E={Token:o.value,Message:m.value.content,OnlyToFondSoutien:m.value.toFondSoutien};m.value=null;const d=await A.SendMessage(E);d!==void 0&&(A.showMessage("Message envoyé avec succès."),l.value.Dossier.Events=(l.value.Dossier.Events||[]).concat(d))}function c(E){return E.Participant.Statut==K.Inscrit?"bg-lime-lighten-2":E.Participant.Statut==K.AStatuer?"bg-grey-lighten-1":"bg-orange-lighten-3"}const a=L(!1);async function b(E){a.value=!1,await A.UpdateParticipants({Token:o.value,Participants:E})!==void 0&&A.showMessage("Modifications enregistrées avec succès. Merci !")}const u=L(null),h=L(!1),_=L(!1),O=L(!1),F=L(!1),I=L(!1),T=L(!1),z=L(null);async function pe(){const E=z.value;!E||(z.value=null,await A.AcceptePlaceLiberee({token:o.value,idEvent:E.Id})===void 0)||(i(),A.showMessage("Place acceptée avec succès."))}return(E,d)=>{const ee=Ct;return r(),x(D,null,[t(Dt,{title:"Espace de suivi de votre inscription"},{default:e(()=>[t(j,{onClick:d[0]||(d[0]=k=>u.value=0)},{prepend:e(()=>[t($,null,{default:e(()=>[...d[26]||(d[26]=[s("mdi-comment-quote",-1)])]),_:1})]),default:e(()=>[d[27]||(d[27]=s(" Avis ",-1))]),_:1}),t(j,{onClick:d[1]||(d[1]=k=>h.value=!0)},{prepend:e(()=>[t($,null,{default:e(()=>[...d[28]||(d[28]=[s("mdi-image-album",-1)])]),_:1})]),default:e(()=>[d[29]||(d[29]=s(" Album photos ",-1))]),_:1}),t(ge,null,{activator:e(({props:k})=>[l.value?(r(),v(j,be({key:0},k,{disabled:!l.value.EnableJustificatifs}),{prepend:e(()=>[t($,null,{default:e(()=>[...d[30]||(d[30]=[s("mdi-download",-1)])]),_:1})]),default:e(()=>[d[31]||(d[31]=s(" Justificatifs ",-1))]),_:1},16,["disabled"])):R("",!0)]),default:e(()=>[t(ae,null,{default:e(()=>[t(N,{title:"Attestation de présence",subtitle:"Télécharger au format .pdf","prepend-icon":"mdi-file-document-check",link:"",href:U(Ce).DownloadAttestationPresence(o.value)},null,8,["href"]),t(N,{title:"Facture",subtitle:"Télécharger au format .pdf","prepend-icon":"mdi-invoice-list",href:U(Ce).DownloadFacture(o.value)},null,8,["href"])]),_:1})]),_:1})]),_:1}),l.value==null?(r(),v(Ve,{key:0,type:"card"})):(r(),v(ft,{key:1,class:"fill-height",fluid:""},{default:e(()=>[t(P,null,{default:e(()=>[t(f,{"align-self":"center",cols:"5"},{default:e(()=>[t(M,{subtitle:"Participants"},{append:e(()=>[t(j,{size:"small",class:"mr-1"},{prepend:e(()=>[t($,null,{default:e(()=>[...d[32]||(d[32]=[s("mdi-folder",-1)])]),_:1})]),default:e(()=>[t(ce,{color:g.value?"pink":"transparent",content:g.value||"",floating:""},{default:e(()=>[...d[33]||(d[33]=[s(" Documents ",-1)])]),_:1},8,["color","content"]),t(ge,{activator:"parent"},{default:e(()=>[t(ae,null,{default:e(()=>[t(N,{title:"Documents du séjour",subtitle:"Lettre du directeur, ...","prepend-icon":"mdi-mail",onClick:d[2]||(d[2]=k=>O.value=!0)},ke({_:2},[l.value.DocumentsToReadOrFillCount?{name:"append",fn:e(()=>[t(ce,{color:"pink",content:l.value.DocumentsToReadOrFillCount,inline:""},null,8,["content"])]),key:"0"}:void 0]),1024),t(N,{title:"Fiches sanitaires","prepend-icon":"mdi-pill",onClick:d[3]||(d[3]=k=>_.value=!0)},ke({_:2},[l.value.FichesanitaireToFillCount?{name:"append",fn:e(()=>[t(ce,{color:"pink",content:l.value.FichesanitaireToFillCount,inline:""},null,8,["content"])]),key:"0"}:void 0]),1024)]),_:1})]),_:1})]),_:1})]),default:e(()=>[t(w,null,{default:e(()=>[t(ae,{class:"pa-0"},{default:e(()=>[(r(!0),x(D,null,q(l.value.Dossier.Participants,k=>(r(),v(N,{title:U(Se).label(k.Personne),subtitle:U(ie).label(k.Camp),rounded:"",class:fe({"my-2":!0,[c(k)]:!0})},{append:e(()=>[t(Y,{variant:"elevated",color:U(X).statutParticipant(k.Participant.Statut).color,"prepend-icon":U(X).statutParticipant(k.Participant.Statut).icon},{default:e(()=>[s(C(U(wt)[k.Participant.Statut]),1)]),_:2},1032,["color","prepend-icon"])]),_:2},1032,["title","subtitle","class"]))),256))]),_:1})]),_:1})]),_:1}),t(Et,{token:o.value,dossier:l.value.Dossier,"is-paiement-open":l.value.IsPaiementOpen,settings:l.value.PaiementSettings,onRefresh:i,onShowReglement:d[4]||(d[4]=k=>F.value=!0)},null,8,["token","dossier","is-paiement-open","settings"])]),_:1}),t(f,{"align-self":"center"},{default:e(()=>[t(M,{subtitle:"Fil de suivi de votre inscription"},{append:e(()=>[t(j,{onClick:d[5]||(d[5]=k=>m.value={content:"",toFondSoutien:!1})},{prepend:e(()=>[t($,null,{default:e(()=>[...d[34]||(d[34]=[s("mdi-email",-1)])]),_:1})]),default:e(()=>[d[35]||(d[35]=s(" Nous écrire",-1))]),_:1})]),default:e(()=>[t(w,null,{default:e(()=>[S("div",Xt,[t(kt,{side:"end",class:"mt-4",density:"compact"},{default:e(()=>[(r(!0),x(D,null,q(n.value,k=>(r(),v(ee,{event:k,onGoToSondage:d[6]||(d[6]=se=>u.value=se),onGoToDocuments:d[7]||(d[7]=se=>O.value=!0),onGoToValidation:d[8]||(d[8]=se=>I.value=!0),onAcceptPlaceLiberee:d[9]||(d[9]=se=>V(se)),onReplyFondSoutien:d[10]||(d[10]=se=>m.value={content:"",toFondSoutien:!0})},null,8,["event"]))),256))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1}),t(Q,{modelValue:a.value,"onUpdate:modelValue":d[11]||(d[11]=k=>a.value=k)},{default:e(()=>[t(Ft,{participants:l.value.Dossier.Participants||[],onSave:b},null,8,["participants"])]),_:1},8,["modelValue"])]),_:1})),t(Q,{"model-value":m.value!=null,"onUpdate:modelValue":d[13]||(d[13]=k=>m.value=null),"max-width":"600px"},{default:e(()=>[m.value?(r(),v(M,{key:0,title:"Nouveau message",subtitle:m.value.toFondSoutien?"Ce message ne sera visible que par le fonds de soutien.":"Ce message sera visible par le centre et les directeurs."},{default:e(()=>[t(w,null,{default:e(()=>[t(ue,{autofocus:"",placeholder:"Rédigez votre message...",modelValue:m.value.content,"onUpdate:modelValue":d[12]||(d[12]=k=>m.value.content=k),rows:"10"},null,8,["modelValue"])]),_:1}),t(ne,null,{default:e(()=>[t(ve),t(j,{disabled:!m.value.content.length,onClick:y},{prepend:e(()=>[t($,null,{default:e(()=>[...d[36]||(d[36]=[s("mdi-send",-1)])]),_:1})]),default:e(()=>[d[37]||(d[37]=s(" Envoyer",-1))]),_:1},8,["disabled"])]),_:1})]),_:1},8,["subtitle"])):R("",!0)]),_:1},8,["model-value"]),t(Q,{"model-value":u.value!=null,"onUpdate:modelValue":d[14]||(d[14]=k=>u.value=null)},{default:e(()=>[u.value!=null?(r(),v(Jt,{key:0,token:o.value,"initial-camp":u.value},null,8,["token","initial-camp"])):R("",!0)]),_:1},8,["model-value"]),t(Q,{modelValue:h.value,"onUpdate:modelValue":d[15]||(d[15]=k=>h.value=k)},{default:e(()=>[t(jt,{token:o.value},null,8,["token"])]),_:1},8,["modelValue"]),t(Q,{modelValue:_.value,"onUpdate:modelValue":d[18]||(d[18]=k=>_.value=k)},{default:e(()=>[t(Ht,{token:o.value,onClose:d[16]||(d[16]=k=>_.value=!1),onUpdateNotifs:d[17]||(d[17]=k=>l.value.FichesanitaireToFillCount=k)},null,8,["token"])]),_:1},8,["modelValue"]),t(Q,{modelValue:O.value,"onUpdate:modelValue":d[21]||(d[21]=k=>O.value=k),"max-width":"800px"},{default:e(()=>[t(Kt,{token:o.value,onClose:d[19]||(d[19]=k=>O.value=!1),onUpdateNotifs:d[20]||(d[20]=k=>l.value.DocumentsToReadOrFillCount=k)},null,8,["token"])]),_:1},8,["modelValue"]),l.value?(r(),v(Q,{key:2,modelValue:F.value,"onUpdate:modelValue":d[22]||(d[22]=k=>F.value=k),"max-width":"800px"},{default:e(()=>[t(Gt,{token:o.value,dossier:l.value.Dossier,settings:l.value.PaiementSettings},null,8,["token","dossier","settings"])]),_:1},8,["modelValue"])):R("",!0),t(Q,{modelValue:T.value,"onUpdate:modelValue":d[23]||(d[23]=k=>T.value=k),"max-width":"800px"},{default:e(()=>[l.value?(r(),v(Wt,{key:0,"asso-title":l.value.AssoTitle,"mail-centre":l.value.MailCentre},null,8,["asso-title","mail-centre"])):R("",!0)]),_:1},8,["modelValue"]),t(Q,{modelValue:I.value,"onUpdate:modelValue":d[24]||(d[24]=k=>I.value=k),"max-width":"800px"},{default:e(()=>[l.value?(r(),v(Qt,{key:0,dossier:l.value.Dossier},null,8,["dossier"])):R("",!0)]),_:1},8,["modelValue"]),t(Q,{"model-value":z.value!=null,"onUpdate:modelValue":d[25]||(d[25]=k=>z.value=null),"max-width":"600px"},{default:e(()=>[z.value?(r(),v(M,{key:0,title:"Accepter la place"},{default:e(()=>[t(w,null,{default:e(()=>[s(" Confirmez-vous l'inscription de "+C(z.value.Content.Data.ParticipantLabel)+" sur le séjour "+C(z.value.Content.Data.CampLabel)+" ? ",1),d[38]||(d[38]=S("br",null,null,-1)),d[39]||(d[39]=S("br",null,null,-1)),d[40]||(d[40]=S("span",{class:"text-grey"},"Un mail de notification sera envoyé automatiquement au centre.",-1))]),_:1}),t(ne,null,{default:e(()=>[t(ve),t(j,{color:"success",onClick:pe},{default:e(()=>[...d[41]||(d[41]=[s("Confirmer",-1)])]),_:1})]),_:1})]),_:1})):R("",!0)]),_:1},8,["model-value"])],64)}}}),el=["innerHTML"],tl=G({__name:"App",setup(p){const o=Le({text:"",color:"secondary",action:void 0,timeout:4e3}),l=L(""),i=L("");return A.onError=(n,g)=>{l.value=n,i.value=g},A.showMessage=(n,g,V)=>{o.text=n,o.color=g||"success",o.action=V,o.timeout=1e4,o.timeout=4e3},(n,g)=>(r(),v(gt,null,{default:e(()=>[t(vt,null,{default:e(()=>[t(Yt),t(we,{style:{"z-index":"10000"},app:"","model-value":o.text!="","onUpdate:modelValue":g[1]||(g[1]=V=>o.text=""),timeout:o.timeout,color:o.color,location:"bottom left","close-on-content-click":""},{default:e(()=>[s(C(o.text)+" ",1),o.action?(r(),v(j,{key:0,onClick:g[0]||(g[0]=V=>o.action.action()),class:"ml-2"},{default:e(()=>[s(C(o.action.title),1)]),_:1})):R("",!0)]),_:1},8,["model-value","timeout","color"]),t(we,{app:"","model-value":l.value!="","onUpdate:modelValue":g[2]||(g[2]=V=>l.value=""),timeout:4e3,color:"red"},{default:e(()=>[S("b",null,C(l.value),1),S("div",{innerHTML:i.value},null,8,el)]),_:1},8,["model-value"])]),_:1})]),_:1}))}}),Ee=bt(tl);Ee.use(Vt);Ee.mount("#app");
