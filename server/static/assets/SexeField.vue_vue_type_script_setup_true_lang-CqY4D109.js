import{u as Ne,r as He,N as E,s as qe,t as Oe,d as Y,v as Ke,w as ze,h as $e,j as je,V as ve,x as Je,a as We,n as Ze,q as Ge,y as Xe,k as Ye,l as Qe}from"./VTextarea-HUR-vMJk.js";import{s as ea,v as aa,x as la,k as B,K as M,aH as ta,H as fe,J as na,c as w,aw as K,cX as ua,N as U,bH as me,c9 as oa,y as sa,b,S as R,ca as ra,cb as ia,O as ca,cY as da,cc as he,j as P,a3 as pe,ce as va,F as Z,cf as fa,D as ma,A as ha,C as pa,e as ba,d as Q,n as ee,p as ae,q as le,o as te,G as ya,aX as ga,cZ as G,c_ as Va,ct as L,a5 as xa,Z as ka}from"./VSnackbar-CBECO1fY.js";import{u as Sa,m as Ca,h as wa}from"./filter-Cvf4p--q.js";import{_ as Ia}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Da=aa({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...Ca({filterKeys:["title"]}),...Ke({hideNoData:!0,returnObject:!0}),...ca(ze({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ia({transition:!1})},"VCombobox"),Fa=ea()({name:"VCombobox",props:Da(),emits:{"update:focused":a=>!0,"update:modelValue":a=>!0,"update:search":a=>!0,"update:menu":a=>!0},setup(a,s){var se;let{emit:r,slots:l}=s;const{t:D}=la(),d=B(),m=M(!1),p=M(!0),V=M(!1),k=M(!1),ne=B(),T=B(),v=M(-1);let z=!1;const{items:ue,transformIn:be,transformOut:ye}=Ne(a),{textColorClasses:ge,textColorStyles:Ve}=ta(()=>{var e;return(e=d.value)==null?void 0:e.color}),o=fe(a,"modelValue",[],e=>be(na(e)),e=>{const t=ye(e);return a.multiple?t:t[0]??null}),N=He(a),H=w(()=>!!(a.chips||l.chip)),I=w(()=>H.value||!!l.selection),F=M(!a.multiple&&!I.value?((se=o.value[0])==null?void 0:se.title)??"":""),h=w({get:()=>F.value,set:async e=>{var t;if(F.value=e??"",!a.multiple&&!I.value&&(o.value=[E(a,e)],K(()=>{var i;return(i=T.value)==null?void 0:i.scrollToIndex(0)})),e&&a.multiple&&((t=a.delimiters)!=null&&t.length)){const i=a.delimiters.map(ua).join("|"),n=e.split(new RegExp(`(?:${i})+`));if(n.length>1){for(let c of n)c=c.trim(),c&&(S(E(a,c)),await K());F.value=""}}e||(v.value=-1),p.value=!e}}),xe=w(()=>typeof a.counterValue=="function"?a.counterValue(o.value):typeof a.counterValue=="number"?a.counterValue:a.multiple?o.value.length:h.value.length),{filteredItems:_,getMatches:ke}=Sa(a,ue,h),$=w(()=>a.hideSelected?_.value.some(e=>!o.value.some(t=>t.value===e.value)):_.value.length>0),A=w(()=>a.hideSelected?_.value.filter(e=>!o.value.some(t=>t.value===e.value)):_.value.length===0&&k.value?ue.value:_.value),q=w(()=>N.isReadonly.value||N.isDisabled.value),j=fe(a,"menu"),f=w({get:()=>j.value,set:e=>{var t;j.value&&!e&&((t=ne.value)!=null&&t.Î¨openChildren.size)||e&&q.value||(j.value=e)}}),{menuId:Se,ariaExpanded:Ce,ariaControls:we,ariaLabel:oe}=qe(a,f);U(F,e=>{k.value=!1,z?K(()=>z=!1):m.value&&!f.value?f.value=$.value||!a.hideNoData:m.value&&f.value&&!$.value&&a.hideNoData&&(f.value=!1),p.value=!e,r("update:search",e)}),U(o,e=>{var t;!a.multiple&&!I.value&&(F.value=((t=e[0])==null?void 0:t.title)??"")});const Ie=w(()=>o.value.map(e=>e.value)),J=w(()=>{var t;return(a.autoSelectFirst===!0||a.autoSelectFirst==="exact"&&h.value===((t=A.value[0])==null?void 0:t.title))&&A.value.length>0&&!p.value&&!V.value}),W=B(),De=Oe(W,d);function Fe(e){z=!0,a.openOnClear&&(f.value=!0)}function Re(){q.value||(f.value=!0)}function _e(e){q.value||(m.value&&(e.preventDefault(),e.stopPropagation()),f.value=!f.value)}function Ae(e){var t;(he(e)||e.key==="Backspace")&&((t=d.value)==null||t.focus())}function Me(e){var n,c,y,C;if(da(e)||N.isReadonly.value)return;const t=(n=d.value)==null?void 0:n.selectionStart,i=o.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(e.key)&&e.preventDefault(),["Enter","ArrowDown"].includes(e.key)&&(f.value=!0),["Escape"].includes(e.key)&&(f.value=!1),["Enter","Escape","Tab"].includes(e.key)&&(J.value&&["Enter","Tab"].includes(e.key)&&!o.value.some(u=>{let{value:x}=u;return x===A.value[0].value})&&S(_.value[0]),p.value=!0),e.key==="ArrowDown"&&J.value&&((c=W.value)==null||c.focus("next")),e.key==="Enter"&&h.value&&(S(E(a,h.value)),I.value&&(F.value="")),["Backspace","Delete"].includes(e.key)){if(!a.multiple&&I.value&&o.value.length>0&&!h.value)return S(o.value[0],!1);if(~v.value){e.preventDefault();const u=v.value;S(o.value[v.value],!1),v.value=u>=i-1?i-2:u}else e.key==="Backspace"&&!h.value&&(v.value=i-1);return}if(a.multiple)if(e.key==="ArrowLeft"){if(v.value<0&&t&&t>0)return;const u=v.value>-1?v.value-1:i-1;o.value[u]?v.value=u:(v.value=-1,(y=d.value)==null||y.setSelectionRange(h.value.length,h.value.length))}else if(e.key==="ArrowRight"){if(v.value<0)return;const u=v.value+1;o.value[u]?v.value=u:(v.value=-1,(C=d.value)==null||C.setSelectionRange(0,0))}else~v.value&&he(e)&&(v.value=-1)}function Pe(){var e;a.eager&&((e=T.value)==null||e.calculateVisibleItems())}function Ee(){var e;m.value&&(p.value=!0,(e=d.value)==null||e.focus())}function S(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!e||e.props.disabled))if(a.multiple){const i=o.value.findIndex(c=>(a.valueComparator||me)(c.value,e.value)),n=t??!~i;if(~i){const c=n?[...o.value,e]:[...o.value];c.splice(i,1),o.value=c}else n&&(o.value=[...o.value,e]);a.clearOnSelect&&(h.value="")}else{const i=t!==!1;o.value=i?[e]:[],F.value=i&&!I.value?e.title:"",K(()=>{f.value=!1,p.value=!0})}}function Ue(e){m.value=!0,setTimeout(()=>{V.value=!0})}function Le(e){V.value=!1}function Be(e){(e==null||e===""&&!a.multiple&&!I.value)&&(o.value=[])}return U(m,(e,t)=>{if(!(e||e===t)&&(v.value=-1,f.value=!1,h.value)){if(a.multiple){S(E(a,h.value));return}if(!I.value)return;o.value.some(i=>{let{title:n}=i;return n===h.value})?F.value="":S(E(a,h.value))}}),U(f,e=>{if(!a.hideSelected&&e&&o.value.length){const t=A.value.findIndex(i=>o.value.some(n=>(a.valueComparator||me)(n.value,i.value)));oa&&window.requestAnimationFrame(()=>{var i;t>=0&&((i=T.value)==null||i.scrollToIndex(t))})}e&&h.value&&!$.value&&(k.value=!0),p.value=!h.value},{immediate:!0}),U(()=>a.items,(e,t)=>{f.value||m.value&&!t.length&&e.length&&(f.value=!0)}),sa(()=>{const e=!!(!a.hideNoData||A.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),t=o.value.length>0,i=Y.filterProps(a);return b(Y,R({ref:d},i,{modelValue:h.value,"onUpdate:modelValue":[n=>h.value=n,Be],focused:m.value,"onUpdate:focused":n=>m.value=n,validationValue:o.externalValue,counterValue:xe.value,dirty:t,class:["v-combobox",{"v-combobox--active-menu":f.value,"v-combobox--chips":!!a.chips,"v-combobox--selection-slot":!!I.value,"v-combobox--selecting-index":v.value>-1,[`v-combobox--${a.multiple?"multiple":"single"}`]:!0},a.class],style:a.style,readonly:N.isReadonly.value,placeholder:t?void 0:a.placeholder,"onClick:clear":Fe,"onMousedown:control":Re,onKeydown:Me,"aria-expanded":Ce.value,"aria-controls":we.value}),{...l,default:()=>P(Z,null,[b($e,R({id:Se.value,ref:ne,modelValue:f.value,"onUpdate:modelValue":n=>f.value=n,activator:"parent",contentClass:"v-combobox__content",disabled:q.value,eager:a.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:a.transition,onAfterEnter:Pe,onAfterLeave:Ee},a.menuProps),{default:()=>[e&&b(je,R({ref:W,filterable:!0,selected:Ie.value,selectStrategy:a.multiple?"independent":"single-independent",onMousedown:n=>n.preventDefault(),selectable:!0,onKeydown:Ae,onFocusin:Ue,onFocusout:Le,tabindex:"-1","aria-live":"polite",color:a.itemColor??a.color},De,a.listProps),{default:()=>{var n,c,y;return[(n=l["prepend-item"])==null?void 0:n.call(l),!A.value.length&&!a.hideNoData&&(((c=l["no-data"])==null?void 0:c.call(l))??b(ve,{key:"no-data",title:D(a.noDataText)},null)),b(Je,{ref:T,renderless:!0,items:A.value,itemKey:"value"},{default:C=>{var ie,ce,de;let{item:u,index:x,itemRef:g}=C;const re=R(u.props,{ref:g,key:u.value,active:J.value&&x===0?!0:void 0,onClick:()=>S(u,null)});return u.type==="divider"?((ie=l.divider)==null?void 0:ie.call(l,{props:u.raw,index:x}))??b(We,R(u.props,{key:`divider-${x}`}),null):u.type==="subheader"?((ce=l.subheader)==null?void 0:ce.call(l,{props:u.raw,index:x}))??b(Ze,R(u.props,{key:`subheader-${x}`}),null):((de=l.item)==null?void 0:de.call(l,{item:u,index:x,props:re}))??b(ve,R(re,{role:"option"}),{prepend:O=>{let{isSelected:Te}=O;return P(Z,null,[a.multiple&&!a.hideSelected?b(Ge,{key:u.value,modelValue:Te,ripple:!1,tabindex:"-1"},null):void 0,u.props.prependAvatar&&b(Xe,{image:u.props.prependAvatar},null),u.props.prependIcon&&b(pe,{icon:u.props.prependIcon},null)])},title:()=>{var O;return p.value?u.title:wa("v-combobox",u.title,(O=ke(u))==null?void 0:O.title)}})}}),(y=l["append-item"])==null?void 0:y.call(l)]}})]}),o.value.map((n,c)=>{function y(g){g.stopPropagation(),g.preventDefault(),S(n,!1)}const C={"onClick:close":y,onKeydown(g){g.key!=="Enter"&&g.key!==" "||(g.preventDefault(),g.stopPropagation(),y(g))},onMousedown(g){g.preventDefault(),g.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},u=H.value?!!l.chip:!!l.selection,x=u?fa(H.value?l.chip({item:n,index:c,props:C}):l.selection({item:n,index:c})):void 0;if(!(u&&!x))return P("div",{key:n.value,class:ha(["v-combobox__selection",c===v.value&&["v-combobox__selection--selected",ge.value]]),style:ma(c===v.value?Ve.value:{})},[H.value?l.chip?b(pa,{key:"chip-defaults",defaults:{VChip:{closable:a.closableChips,size:"small",text:n.title}}},{default:()=>[x]}):b(Ye,R({key:"chip",closable:a.closableChips,size:"small",text:n.title,disabled:n.props.disabled},C),null):x??P("span",{class:"v-combobox__selection-text"},[n.title,a.multiple&&c<o.value.length-1&&P("span",{class:"v-combobox__selection-comma"},[ba(",")])])])})]),"append-inner":function(){var C,u;for(var n=arguments.length,c=new Array(n),y=0;y<n;y++)c[y]=arguments[y];return P(Z,null,[(C=l["append-inner"])==null?void 0:C.call(l,...c),a.menuIcon?b(pe,{class:"v-combobox__menu-icon",color:(u=d.value)==null?void 0:u.fieldIconColor,icon:a.menuIcon,onMousedown:_e,onClick:va,"aria-label":oe.value,title:oe.value,tabindex:"-1"},null):void 0])}})}),ra({isFocused:m,isPristine:p,menu:f,search:h,selectionIndex:v,filteredItems:_,select:S},d)}}),Ua=Q({__name:"StringList",props:ee({label:{},formatter:{type:Function},hideDetails:{type:Boolean},readonly:{type:Boolean},rule:{type:Function}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const s=a,r=ae(a,"modelValue");function l(d){d=d||[];const m=s.formatter??(p=>p);r.value=d.map(m)}function D(d){return s.rule(d)}return(d,m)=>(te(),le(Fa,{variant:"outlined",density:"compact",label:s.label,chips:"",multiple:"","closable-chips":"",modelValue:r.value,"onUpdate:modelValue":[m[0]||(m[0]=p=>r.value=p),l],rules:s.rule?[D]:void 0},null,8,["label","modelValue","rules"]))}}),Ra=Q({__name:"DateNaissanceField",props:ee({label:{},hideDetails:{type:Boolean},readonly:{type:Boolean},error:{},rule:{type:Function}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const s=a,r=ae(a,"modelValue"),l=ya(),D=B(ga(r.value)?"":l.parseISO(r.value).toLocaleDateString());function d(V){V=Va(V),D.value=V;const k=G(V);k!==void 0&&(r.value=k)}function m(){G(D.value)===void 0&&(r.value="0001-01-01")}function p(V){if(!V.length)return s.rule("0001-01-01");const k=G(V);return k===void 0?!1:s.rule(k)}return(V,k)=>(te(),le(Y,{class:"center-text",variant:"outlined",density:"compact",placeholder:"JJ/MM/AAAA",label:s.label||"Date de naissance","model-value":D.value,"onUpdate:modelValue":d,readonly:s.readonly,rules:s.rule?[p]:void 0,"hide-details":s.hideDetails,onBlur:m},null,8,["label","model-value","readonly","rules","hide-details"]))}}),La=Ia(Ra,[["__scopeId","data-v-fb288a49"]]),X={NoSexe:0,Woman:1,Man:2},_a={[X.NoSexe]:"",[X.Woman]:"Femme",[X.Man]:"Homme"};class Ba{constructor(s,r){this.baseURL=s,this.authToken=r}getHeaders(){return{Authorization:"Bearer "+this.authToken}}async ConfirmeInscription(s){const r=this.baseURL+"/inscription/confirme";this.startRequest();try{return await L.get(r,{headers:this.getHeaders(),params:{"insc-token":s["insc-token"]}}),!0}catch(l){this.handleError(l)}}async GetCamps(){const s=this.baseURL+"/api/v1/inscription/camps";this.startRequest();try{return(await L.get(s,{headers:this.getHeaders()})).data}catch(r){this.handleError(r)}}async InitInscription(s){const r=this.baseURL+"/api/v1/inscription";this.startRequest();try{return(await L.get(r,{headers:this.getHeaders(),params:{preinscription:s.preinscription}})).data}catch(l){this.handleError(l)}}async SaveInscription(s){const r=this.baseURL+"/api/v1/inscription";this.startRequest();try{return await L.put(r,s,{headers:this.getHeaders()}),!0}catch(l){this.handleError(l)}}async SearchHistory(s){const r=this.baseURL+"/api/v1/inscription/search";this.startRequest();try{return(await L.get(r,{headers:this.getHeaders(),params:{mail:s.mail}})).data}catch(l){this.handleError(l)}}}const Ta=Q({__name:"SexeField",props:ee({hideDetails:{type:Boolean},readonly:{type:Boolean},rules:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(a){const s=a,r=ae(a,"modelValue"),l=xa(_a);return(D,d)=>(te(),le(Qe,{label:"Sexe",variant:"outlined",density:"compact",items:ka(l),readonly:s.readonly,"hide-details":s.hideDetails,modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=m=>r.value=m),rules:s.rules},null,8,["items","readonly","hide-details","modelValue","rules"]))}});export{Ba as A,X as S,Fa as V,Ua as _,Ta as a,La as b};
