import{ct as z,bQ as Ne,bS as je,d as Z,k as L,q as g,o as u,V as qe,w as e,b as t,f as He,g as h,h as c,i as Be,e as o,t as C,r as Oe,j as _,a as D,F as I,a0 as B,Z as S,a4 as re,aD as Se,l as j,a3 as $,c as q,S as Ve,aQ as ze,aP as Je,$ as T,aa as me,a1 as Y,bA as Ue,bB as _e,A as ve,ag as ye,az as W,ax as De,a8 as Ke,Y as ke,aJ as Ge,s as Qe,v as We,x as Ze,ai as Xe,H as Ye,br as et,Q as tt,K as lt,cj as at,y as nt,D as st,an as ot,ao as it,ap as ut,as as rt,at as dt,I as he,n as mt,p as pt,aX as ct,aW as Ce,bM as ft,aN as Pe,aL as vt,m as gt,b0 as bt,b1 as Ae,b2 as Vt,b3 as yt,b4 as kt}from"./VSnackbar-CBECO1fY.js";import{_ as Ct,a as St,V as Ut,b as _t}from"./EventSwitch.vue_vue_type_script_setup_true_lang-z499WKc7.js";import{h as ht,_ as Pt,a as Fe,d as Ie,b as xe,c as Te,V as fe,f as we}from"./VTabs-C_ygT-Yw.js";import{b as R,c as A,k as ee,d as ue,e as ie,f as ge,l as Me,V as H,g as K,h as be,a as Re,i as X,m as de,j as oe,n as Le}from"./VTextarea-HUR-vMJk.js";import{a as At,V as wt}from"./FileCard.vue_vue_type_script_setup_true_lang-hHmw8cBR.js";import{_ as Ee}from"./FilesDemande.vue_vue_type_script_setup_true_lang-DSleuhT7.js";import{_ as Mt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VWindowItem-kLhqlp7D.js";import"./FilesRow.vue_vue_type_script_setup_true_lang-fSoshGuI.js";const pe={CampDocs:"CampDocs",Facture:"Facture",PlaceLiberee:"PlaceLiberee",Sondage:"Sondage",Validation:"Validation"},ce={Complet:3,EnCours:2,NonCommence:1};ce.Complet+"",ce.EnCours+"",ce.NonCommence+"";const J={AStatuer:0,Refuse:1,AttenteProfilInvalide:2,AttenteCampComplet:3,EnAttenteReponse:4,Inscrit:5},Rt={[J.AStatuer]:"A statuer",[J.Refuse]:"Refusé définitivement",[J.AttenteProfilInvalide]:"Profil limite",[J.AttenteCampComplet]:"Camp complet",[J.EnAttenteReponse]:"En attente de réponse",[J.Inscrit]:"Inscrit"},Lt={Euros:0},Q={Cheque:0,EnLigne:1,Virement:2,Especes:3,Ancv:4,Helloasso:5},Dt={[Q.Cheque]:"Chèque",[Q.EnLigne]:"Carte bancaire (en ligne)",[Q.Virement]:"Virement",[Q.Especes]:"Espèces",[Q.Ancv]:"ANCV",[Q.Helloasso]:"Helloasso"},Ft={Espaceperso:0},ae={NoFiche:0,Outdated:1,UpToDate:2};ae.NoFiche+"",ae.Outdated+"",ae.UpToDate+"";class It{constructor(s,a){this.baseURL=s,this.authToken=a}getHeaders(){return{Authorization:"Bearer "+this.authToken}}async Load(s){const a=this.baseURL+"/api/v1/espaceperso";this.startRequest();try{return(await z.get(a,{headers:this.getHeaders(),params:{token:s.token}})).data}catch(d){this.handleError(d)}}async SendMessage(s){const a=this.baseURL+"/api/v1/espaceperso/message";this.startRequest();try{return(await z.post(a,s,{headers:this.getHeaders()})).data}catch(d){this.handleError(d)}}async UpdateParticipants(s){const a=this.baseURL+"/api/v1/espaceperso/participants";this.startRequest();try{return await z.post(a,s,{headers:this.getHeaders()}),!0}catch(d){this.handleError(d)}}async CreateAide(s,a,d){const n=this.baseURL+"/api/v1/espaceperso/aide";this.startRequest();try{const v=new FormData;return v.append("document",s,s.name),v.append("aide",JSON.stringify(a)),await z.post(n,v,{headers:this.getHeaders(),params:{token:d.token}}),!0}catch(v){this.handleError(v)}}async GetStructureaides(){const s=this.baseURL+"/api/v1/espaceperso/structureaides";this.startRequest();try{return(await z.get(s,{headers:this.getHeaders()})).data}catch(a){this.handleError(a)}}async LoadJoomeo(s){const a=this.baseURL+"/api/v1/espaceperso/joomeo";this.startRequest();try{return(await z.get(a,{headers:this.getHeaders(),params:{token:s.token}})).data}catch(d){this.handleError(d)}}async LoadFichesanitaires(s){const a=this.baseURL+"/api/v1/espaceperso/fichesanitaires";this.startRequest();try{return(await z.get(a,{headers:this.getHeaders(),params:{token:s.token}})).data}catch(d){this.handleError(d)}}async UpdateFichesanitaire(s){const a=this.baseURL+"/api/v1/espaceperso/fichesanitaires";this.startRequest();try{return await z.post(a,s,{headers:this.getHeaders()}),!0}catch(d){this.handleError(d)}}async UploadVaccin(s,a){const d=this.baseURL+"/api/v1/espaceperso/fichesanitaires";this.startRequest();try{const n=new FormData;return n.append("file",s,s.name),(await z.put(d,n,{headers:this.getHeaders(),params:{token:a.token,idPersonne:String(a.idPersonne)}})).data}catch(n){this.handleError(n)}}async DeleteVaccin(s){const a=this.baseURL+"/api/v1/espaceperso/fichesanitaires";this.startRequest();try{return await z.delete(a,{headers:this.getHeaders(),params:{key:s.key}}),!0}catch(d){this.handleError(d)}}async TransfertFicheSanitaire(s){const a=this.baseURL+"/api/v1/espaceperso/fichesanitaires/transfert";this.startRequest();try{return await z.put(a,null,{headers:this.getHeaders(),params:{token:s.token,idPersonne:String(s.idPersonne)}}),!0}catch(d){this.handleError(d)}}async AcceptePlaceLiberee(s){const a=this.baseURL+"/api/v1/espaceperso/events/accept-place-liberee";this.startRequest();try{return await z.post(a,null,{headers:this.getHeaders(),params:{token:s.token,idEvent:String(s.idEvent)}}),!0}catch(d){this.handleError(d)}}async LoadSondages(s){const a=this.baseURL+"/api/v1/espaceperso/sondages";this.startRequest();try{return(await z.get(a,{headers:this.getHeaders(),params:{token:s.token}})).data}catch(d){this.handleError(d)}}async UpdateSondages(s){const a=this.baseURL+"/api/v1/espaceperso/sondages";this.startRequest();try{return await z.post(a,s,{headers:this.getHeaders()}),!0}catch(d){this.handleError(d)}}async LoadDocuments(s){const a=this.baseURL+"/api/v1/espaceperso/documents";this.startRequest();try{return(await z.get(a,{headers:this.getHeaders(),params:{token:s.token}})).data}catch(d){this.handleError(d)}}async UploadDocument(s,a){const d=this.baseURL+"/api/v1/espaceperso/documents";this.startRequest();try{const n=new FormData;return n.append("file",s,s.name),(await z.post(d,n,{headers:this.getHeaders(),params:{token:a.token,idDemande:String(a.idDemande),idPersonne:String(a.idPersonne)}})).data}catch(n){this.handleError(n)}}async DeleteDocument(s){const a=this.baseURL+"/api/v1/espaceperso/documents";this.startRequest();try{return await z.delete(a,{headers:this.getHeaders(),params:{key:s.key}}),!0}catch(d){this.handleError(d)}}}class xt extends It{constructor(s,a,d){super(d,""),this.onError=s,this.showMessage=a}handleError(s){const{kind:a,messageHtml:d}=je(s);this.onError(a,d)}startRequest(){}}const w=new xt((f,s)=>{},(f,s)=>{},Ne()),Tt=Z({__name:"NavBar",props:{title:{},hideMenu:{type:Boolean}},setup(f){const s=f,a="/static/repere/logo.png";return L(!1),(d,n)=>(u(),g(qe,{rounded:"",elevation:"4",color:"secondary"},{append:e(()=>[Oe(d.$slots,"default"),n[0]||(n[0]=_("div",{class:"mr-2"},null,-1))]),default:e(()=>[t(He,null,{default:e(()=>[t(h,null,{default:e(()=>[t(c,{"align-self":"center",cols:"auto"},{default:e(()=>[t(Be,{width:"60",src:a})]),_:1}),t(c,{"align-self":"center"},{default:e(()=>[o(C(s.title),1)]),_:1})]),_:1})]),_:1})]),_:3}))}}),Et=Z({__name:"ParticipantsEditCard",props:{participants:{}},emits:["save"],setup(f,{emit:s}){const a=f,d=s,n=L(a.participants.map(v=>v.Participant));return(v,y)=>{const p=ht;return u(),g(R,{title:"Modifier les options"},{default:e(()=>[t(A,null,{default:e(()=>[t(h,null,{default:e(()=>[(u(!0),D(I,null,B(a.participants,(b,V)=>(u(),g(c,{cols:"6"},{default:e(()=>[t(R,{title:S(Se).label(b.Personne),subtitle:S(re).label(b.Camp)},{default:e(()=>[t(A,null,{default:e(()=>[t(h,null,{default:e(()=>[t(c,null,{default:e(()=>[b.Camp.Navette.Actif?(u(),g(p,{key:0,modelValue:n.value[V].Navette,"onUpdate:modelValue":l=>n.value[V].Navette=l,hint:b.Camp.Navette.Commentaire},null,8,["modelValue","onUpdate:modelValue","hint"])):(u(),g(ee,{key:1},{default:e(()=>[...y[1]||(y[1]=[o("Ce séjour ne propose pas de navette.",-1)])]),_:1}))]),_:2},1024)]),_:2},1024),t(h,null,{default:e(()=>[t(c,null,{default:e(()=>[t(ue,{modelValue:n.value[V].Commentaire,"onUpdate:modelValue":l=>n.value[V].Commentaire=l,label:"Information libre",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),t(h,null,{default:e(()=>[t(c,null,{default:e(()=>[...y[2]||(y[2]=[o(" TODO: option prix ",-1)])]),_:1})]),_:1})]),_:2},1024)]),_:2},1032,["title","subtitle"])]),_:2},1024))),256))]),_:1})]),_:1}),t(ie,null,{default:e(()=>[t(ge),t(j,{onClick:y[0]||(y[0]=b=>d("save",n.value)),color:"green"},{prepend:e(()=>[t($,null,{default:e(()=>[...y[3]||(y[3]=[o("mdi-content-save-cog",-1)])]),_:1})]),default:e(()=>[y[4]||(y[4]=o(" Enregistrer",-1))]),_:1})]),_:1})]),_:1})}}}),$t=Z({__name:"AideCard",props:{dossier:{},structureaides:{}},emits:["save"],setup(f,{emit:s}){const a=f,d=s,n=L({Id:0,IdStructureaide:0,IdParticipant:(a.dossier.Participants||[])[0].Participant.Id,Valide:!1,Valeur:{Currency:Lt.Euros,Cent:0},ParJour:!1,NbJoursMax:0}),v=L(null),y=q(()=>n.value?v.value!=null&&n.value.IdParticipant!=0&&n.value.IdStructureaide!=0&&n.value.Valeur.Cent!=0:!1),p=q(()=>(a.dossier.Participants||[]).map(V=>({title:Se.label(V.Personne),subtitle:re.label(V.Camp),value:V.Participant.Id}))),b=q(()=>Object.values(a.structureaides||{}).map(V=>({value:V.Id,title:V.Nom})));return(V,l)=>{const m=Ct,r=Pt,P=At;return u(),g(R,{title:"Ajouter une aide extérieure",subtitle:"Cette aide sera vérifiée par le centre."},{default:e(()=>[t(A,null,{default:e(()=>[t(h,null,{default:e(()=>[t(c,null,{default:e(()=>[t(Me,{variant:"outlined",density:"comfortable",label:"Participant concerné",modelValue:n.value.IdParticipant,"onUpdate:modelValue":l[0]||(l[0]=U=>n.value.IdParticipant=U),items:p.value},{item:e(({item:U,props:F})=>[t(H,Ve(F,{title:U.raw.title,subtitle:U.raw.subtitle}),null,16,["title","subtitle"])]),_:1},8,["modelValue","items"])]),_:1})]),_:1}),t(h,null,{default:e(()=>[t(c,null,{default:e(()=>[t(Me,{variant:"outlined",density:"comfortable",label:"Structure","model-value":S(Je)(n.value.IdStructureaide),"onUpdate:modelValue":l[1]||(l[1]=U=>n.value.IdStructureaide=S(ze)(U)),items:b.value,"no-data-text":"Aucune structure n'est disponible."},null,8,["model-value","items"])]),_:1})]),_:1}),t(h,null,{default:e(()=>[t(c,{"align-self":"center"},{default:e(()=>[t(m,{label:"Valeur",modelValue:n.value.Valeur,"onUpdate:modelValue":l[2]||(l[2]=U=>n.value.Valeur=U),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),t(h,null,{default:e(()=>[t(c,{"align-self":"center"},{default:e(()=>[t(K,{modelValue:n.value.ParJour,"onUpdate:modelValue":l[3]||(l[3]=U=>n.value.ParJour=U),label:"Montant par jour","hide-details":""},null,8,["modelValue"])]),_:1}),t(c,{"align-self":"center"},{default:e(()=>[n.value.ParJour?(u(),g(r,{key:0,label:"Limite sur le nombre de jours",modelValue:n.value.NbJoursMax,"onUpdate:modelValue":l[4]||(l[4]=U=>n.value.NbJoursMax=U),min:0,hint:"0 pour ne pas limiter","persistent-hint":""},null,8,["modelValue"])):T("",!0)]),_:1})]),_:1}),t(h,null,{default:e(()=>[t(c,null,{default:e(()=>[t(P,{label:"Pièce justificative",onUpdate:l[5]||(l[5]=U=>v.value=U)})]),_:1})]),_:1})]),_:1}),t(ie,null,{default:e(()=>[t(ge),t(j,{color:"green",disabled:!y.value,onClick:l[6]||(l[6]=U=>d("save",n.value,v.value))},{default:e(()=>[...l[7]||(l[7]=[o(" Ajouter pour vérification ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})}}}),Nt={key:0},jt=Z({__name:"FinancesCard",props:{token:{},dossier:{},isPaiementOpen:{type:Boolean}},emits:["refresh","showReglement"],setup(f,{emit:s}){const a=f,d=s;me(V);const n=L(!1);async function v(l,m){n.value=!1,await w.CreateAide(m,l,{token:a.token})!==void 0&&(w.showMessage("Aide ajoutée avec succès (validation à venir). Merci !"),d("refresh"))}const y=q(()=>{const l=[];return Object.values(a.dossier.Aides||{}).forEach(m=>l.push(...Object.values(m||{}))),l}),p=q(()=>y.value.filter(l=>!l.Valide).length),b=L({});async function V(){const l=await w.GetStructureaides();l!==void 0&&(b.value=l||{})}return(l,m)=>(u(),g(R,{subtitle:"Réglement",class:"mt-2"},{append:e(()=>{var r;return[t(j,{size:"small",class:"mr-1",onClick:m[0]||(m[0]=P=>d("showReglement")),disabled:!a.isPaiementOpen||a.dossier.Bilan.Statut==S(ce).Complet},{prepend:e(()=>[t($,null,{default:e(()=>[...m[3]||(m[3]=[o("mdi-cash-plus",-1)])]),_:1})]),default:e(()=>[m[4]||(m[4]=o(" Régler ",-1))]),_:1},8,["disabled"]),t(j,{size:"small",disabled:!((r=a.dossier.Participants)!=null&&r.length),onClick:m[1]||(m[1]=P=>n.value=!0)},{prepend:e(()=>[t($,{color:"green"},{default:e(()=>[...m[5]||(m[5]=[o("mdi-plus",-1)])]),_:1})]),default:e(()=>[m[6]||(m[6]=o(" Ajouter une aide ",-1))]),_:1},8,["disabled"])]}),default:e(()=>[t(A,null,{default:e(()=>[t(h,{class:"mt-2"},{default:e(()=>[t(c,null,{default:e(()=>[...m[7]||(m[7]=[o("Prix des séjours",-1)])]),_:1}),t(c,{cols:"4",class:"text-right"},{default:e(()=>[o(C(l.dossier.Bilan.Demande),1)]),_:1})]),_:1}),l.dossier.Bilan.DemandeEnAttenteValidation?(u(),g(h,{key:0,class:"my-2"},{default:e(()=>[t(c,{class:"text-grey"},{default:e(()=>[...m[8]||(m[8]=[o("Séjours en attente de validation",-1)])]),_:1}),t(c,{cols:"4",class:"text-right text-grey"},{default:e(()=>[o(C(l.dossier.Bilan.DemandeEnAttenteValidation),1)]),_:1})]),_:1})):T("",!0),l.dossier.Bilan.Aides?(u(),g(h,{key:1,class:"my-0"},{default:e(()=>[t(c,{cols:"auto"},{default:e(()=>[t(be,null,{activator:e(({props:r})=>[t($,Ue(_e(r)),{default:e(()=>[...m[9]||(m[9]=[o(" mdi-view-list ",-1)])]),_:1},16)]),default:e(()=>[b.value?(u(),g(R,{key:0,title:"Aides extérieures"},{default:e(()=>[t(A,null,{default:e(()=>[(u(!0),D(I,null,B(y.value,r=>(u(),g(ee,{color:r.Valide?void 0:"orange",class:"mx-1"},{default:e(()=>[o(C(b.value[r.IdStructureaide].Nom)+" : "+C(S(Y).montant(r.Valeur)),1)]),_:2},1032,["color"]))),256))]),_:1})]),_:1})):T("",!0)]),_:1})]),_:1}),t(c,null,{default:e(()=>[m[11]||(m[11]=o(" Dont aides extérieures ",-1)),p.value?(u(),g($,{key:0,color:"orange"},{default:e(()=>[...m[10]||(m[10]=[o("mdi-clock",-1)])]),_:1})):T("",!0)]),_:1}),t(c,{cols:"4",class:"text-right"},{default:e(()=>[o(C(l.dossier.Bilan.Aides),1)]),_:1})]),_:1})):T("",!0),t(Re,{thickness:"1"}),t(h,{class:"my-0"},{default:e(()=>[t(c,{cols:"auto"},{default:e(()=>[t(be,null,{activator:e(({props:r})=>[t($,Ue(_e(r)),{default:e(()=>[...m[12]||(m[12]=[o(" mdi-view-list ",-1)])]),_:1},16)]),default:e(()=>[t(R,{title:"Paiements"},{default:e(()=>[t(A,null,{default:e(()=>[Object.values(a.dossier.Paiements||{}).length?T("",!0):(u(),D("i",Nt," Aucun paiement n'a encore été enregistré. ")),(u(!0),D(I,null,B(a.dossier.Paiements,r=>(u(),g(ee,{class:"mx-1"},{default:e(()=>[o(C(r.Payeur)+" : "+C(S(Y).montant(r.Montant)),1)]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})]),_:1}),t(c,null,{default:e(()=>[...m[13]||(m[13]=[o(" Paiements ",-1)])]),_:1}),t(c,{cols:"4",class:"text-right"},{default:e(()=>[o(C(l.dossier.Bilan.Recu),1)]),_:1})]),_:1}),t(Re,{thickness:"1"}),t(h,{class:"my-0"},{default:e(()=>[t(c,null,{default:e(()=>[...m[14]||(m[14]=[o("Montant restant à régler",-1)])]),_:1}),t(c,{cols:"4",class:"text-right"},{default:e(()=>[_("b",{class:ve(l.dossier.Bilan.Statut==S(ce).Complet?"text-green":"text-orange")},C(l.dossier.Bilan.Restant),3)]),_:1})]),_:1})]),_:1}),t(X,{modelValue:n.value,"onUpdate:modelValue":m[2]||(m[2]=r=>n.value=r),"max-width":"450px"},{default:e(()=>[t($t,{dossier:a.dossier,structureaides:b.value,onSave:v},null,8,["dossier","structureaides"])]),_:1},8,["modelValue"])]),_:1}))}}),qt={key:0},Ht=Z({__name:"JoomeoCard",props:{token:{}},setup(f){const s=f;me(d);const a=L(null);async function d(){const n=await w.LoadJoomeo({token:s.token});n!==void 0&&(a.value=n)}return(n,v)=>a.value==null?(u(),g(ye,{key:0,class:"mx-auto",width:"600px",type:"card"})):a.value.Loggin?(u(),g(R,{key:1,class:"mx-auto",title:"Identifiants et albums Joomeo",subtitle:"Retrouvez les photos prises dans nos séjours.","min-width":"600px"},{default:e(()=>[t(A,null,{default:e(()=>[t(h,null,{default:e(()=>[t(c,null,{default:e(()=>[v[0]||(v[0]=o(" Identifiant : ",-1)),_("b",null,C(a.value.Loggin),1)]),_:1}),t(c,null,{default:e(()=>[v[1]||(v[1]=o(" Mot de passe : ",-1)),_("b",null,C(a.value.Password),1)]),_:1})]),_:1}),t(h,null,{default:e(()=>[t(c,null,{default:e(()=>{var y;return[(y=a.value.Albums)!=null&&y.length?T("",!0):(u(),D("i",qt,"Aucun album n'est encore disponible.")),(u(!0),D(I,null,B(a.value.Albums,p=>(u(),g(ee,{class:"mx-1"},{default:e(()=>[o(C(p),1)]),_:2},1024))),256))]}),_:1})]),_:1})]),_:1}),t(ie,null,{default:e(()=>[t(j,{block:"",color:"primary",variant:"outlined",href:a.value.SpaceURL,target:"_blank"},{default:e(()=>[...v[2]||(v[2]=[o(" Accéder à mon espace jooméo ",-1)])]),_:1},8,["href"])]),_:1})]),_:1})):(u(),g(W,{key:2,class:"mx-auto",type:"info"},{default:e(()=>[...v[3]||(v[3]=[o(" Il n'y a encore rien à voir... ",-1)])]),_:1}))}}),Bt={class:"pa-2"},Ot=Z({__name:"FichesanitaireForm",props:{fiche:{}},emits:["save","uploadVaccin","deleteVaccin","transfert"],setup(f,{emit:s}){const a=f,d=s,n=De(Ke(a.fiche.Fichesanitaire)),v=L(a.fiche.RespoSecuriteSociale),y=q(()=>n.Allergies.Asthme||n.Allergies.Alimentaires||n.Allergies.Medicamenteuses||n.Allergies.Autres.length!=0),p=q(()=>a.fiche.Fichesanitaire.Mails||[]),b=q(()=>a.fiche.State==ae.NoFiche?void 0:`Dernière modification : ${Y.time(a.fiche.Fichesanitaire.LastModif)} / Propriétaire(s) :
         ${p.value.join(" ; ")}`);return(V,l)=>{const m=Ee;return u(),D("div",Bt,[t(R,{title:a.fiche.Personne,subtitle:b.value},{default:e(()=>[t(A,null,{default:e(()=>{var r;return[a.fiche.IsLocked?(u(),g(W,{key:0},{default:e(()=>[o(" Votre adresse mail n'est pas reconnu dans notre système comme celle du responsable de cette fiche sanitaire. Elle est actuellement liée "+C(p.value.length>=2?"aux adresses":"à l'adresse")+" ",1),_("b",null,C(p.value.join(" ; ")),1),l[30]||(l[30]=o(". ",-1)),l[31]||(l[31]=_("br",null,null,-1)),o(" Afin de protéger vos données, vous devez demander un transfert des droits de lecture et d'écriture. Un mail contenant un lien de transfert va être envoyé "+C(p.value.length>=2?"aux adresses":"à l'adresse")+" ",1),_("i",null,"("+C(p.value.join(" ; "))+")",1),l[32]||(l[32]=o(". ",-1)),t(j,{variant:"outlined",onClick:l[0]||(l[0]=P=>d("transfert")),block:"",class:"mt-4"},{prepend:e(()=>[t($,null,{default:e(()=>[...l[28]||(l[28]=[o("mdi-lock-open",-1)])]),_:1})]),default:e(()=>[l[29]||(l[29]=o(" Demander le transfert de la fiche sanitaire ",-1))]),_:1})]),_:1})):a.fiche.State==S(ae).UpToDate&&((r=a.fiche.VaccinsFiles)!=null&&r.length)?(u(),g(W,{key:1,type:"success"},{default:e(()=>[...l[33]||(l[33]=[o(" La fiche sanitaire est à jour. Merci ! ",-1)])]),_:1})):a.fiche.State==S(ae).UpToDate?(u(),g(W,{key:2,type:"warning"},{default:e(()=>[...l[34]||(l[34]=[o(" La fiche sanitaire est à jour, mais vous n'avez déposé aucun vaccin. ",-1)])]),_:1})):a.fiche.State==S(ae).Outdated?(u(),g(W,{key:3,type:"warning"},{default:e(()=>[...l[35]||(l[35]=[o(" Merci de bien vouloir vérifier que les données ci-dessous sont à jour et les valider. ",-1),_("br",null,null,-1),o("Nous avons besoin de votre consentement, décrit dans l'encart ",-1),_("b",null,"Validation",-1),o(" (en bas de page). ",-1)])]),_:1})):(u(),g(W,{key:4,type:"info"},{default:e(()=>[...l[36]||(l[36]=[o(" Merci de compléter la fiche sanitaire ci-dessous. ",-1)])]),_:1}))]}),_:1})]),_:1},8,["title","subtitle"]),a.fiche.IsLocked?T("",!0):(u(),D(I,{key:0},[t(R,{subtitle:"Vaccinations",class:"my-2"},{default:e(()=>[t(A,null,{default:e(()=>[l[37]||(l[37]=o(" Merci de joindre le scan des pages « vaccinations » du carnet de santé du participant. Seul le DTPolio est obligatoire pour être accueilli en séjour de vacances. ",-1)),l[38]||(l[38]=_("br",null,null,-1)),l[39]||(l[39]=_("i",null," Si le participant n’a pas les vaccins obligatoires, joindre un certificat médical de contre-indication. ",-1)),t(m,{class:"mt-2",demande:a.fiche.VaccinsDemande,files:a.fiche.VaccinsFiles||[],"in-upload":!1,optionnelle:null,"show-upload-text":"",onUpload:l[1]||(l[1]=r=>d("uploadVaccin",r)),onDelete:l[2]||(l[2]=r=>d("deleteVaccin",r))},null,8,["demande","files"])]),_:1})]),_:1}),t(R,{subtitle:"Handicap",class:"my-2"},{default:e(()=>[t(A,null,{default:e(()=>[t(K,{modelValue:n.Handicap,"onUpdate:modelValue":l[3]||(l[3]=r=>n.Handicap=r),color:"primary",label:"Le participant est porteur de handicap. ","hide-details":""},null,8,["modelValue"]),t(ke,null,{default:e(()=>[t(W,{modelValue:n.Handicap,"onUpdate:modelValue":l[4]||(l[4]=r=>n.Handicap=r),color:"blue-lighten-4"},{default:e(()=>[...l[40]||(l[40]=[o(" Merci de ",-1),_("b",null,"contacter",-1),o(" au plus vite le directeur afin qu’un accueil individualisé puisse être mis en place. ",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(R,{subtitle:"Traitement",class:"my-2"},{default:e(()=>[t(A,null,{default:e(()=>[t(K,{modelValue:n.TraitementMedical,"onUpdate:modelValue":l[5]||(l[5]=r=>n.TraitementMedical=r),color:"primary",label:"Le participant suit un traitement médical pendant le séjour.","hide-details":""},null,8,["modelValue"]),t(ke,null,{default:e(()=>[t(W,{modelValue:n.TraitementMedical,"onUpdate:modelValue":l[6]||(l[6]=r=>n.TraitementMedical=r),color:"blue-lighten-4"},{default:e(()=>[...l[41]||(l[41]=[o(" Merci de joindre une ",-1),_("b",null,"ordonnance",-1),o(" récente et les ",-1),_("b",null,"médicaments",-1),o(" correspondants (avec la notice). Aucun médicament ne pourra être pris sans ordonnance. ",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(R,{subtitle:"Maladies",class:"my-2"},{default:e(()=>[t(A,null,{default:e(()=>[l[42]||(l[42]=o(" Le participant a-t-il déjà eu les maladies suivantes ? ",-1)),t(h,{class:"mt-2"},{default:e(()=>[t(c,{cols:"3",class:"py-0"},{default:e(()=>[t(K,{modelValue:n.Maladies.Rubeole,"onUpdate:modelValue":l[7]||(l[7]=r=>n.Maladies.Rubeole=r),color:"primary",label:"Rubéole","hide-details":""},null,8,["modelValue"])]),_:1}),t(c,{cols:"3",class:"py-0"},{default:e(()=>[t(K,{modelValue:n.Maladies.Varicelle,"onUpdate:modelValue":l[8]||(l[8]=r=>n.Maladies.Varicelle=r),color:"primary",label:"Varicelle","hide-details":""},null,8,["modelValue"])]),_:1}),t(c,{cols:"3",class:"py-0"},{default:e(()=>[t(K,{modelValue:n.Maladies.Angine,"onUpdate:modelValue":l[9]||(l[9]=r=>n.Maladies.Angine=r),color:"primary",label:"Angine","hide-details":""},null,8,["modelValue"])]),_:1}),t(c,{cols:"3",class:"py-0"},{default:e(()=>[t(K,{modelValue:n.Maladies.Oreillons,"onUpdate:modelValue":l[10]||(l[10]=r=>n.Maladies.Oreillons=r),color:"primary",label:"Oreillons","hide-details":""},null,8,["modelValue"])]),_:1}),t(c,{cols:"3",class:"py-0"},{default:e(()=>[t(K,{modelValue:n.Maladies.Scarlatine,"onUpdate:modelValue":l[11]||(l[11]=r=>n.Maladies.Scarlatine=r),color:"primary",label:"Scarlatine","hide-details":""},null,8,["modelValue"])]),_:1}),t(c,{cols:"3",class:"py-0"},{default:e(()=>[t(K,{modelValue:n.Maladies.Coqueluche,"onUpdate:modelValue":l[12]||(l[12]=r=>n.Maladies.Coqueluche=r),color:"primary",label:"Coqueluche","hide-details":""},null,8,["modelValue"])]),_:1}),t(c,{cols:"3",class:"py-0"},{default:e(()=>[t(K,{modelValue:n.Maladies.Otite,"onUpdate:modelValue":l[13]||(l[13]=r=>n.Maladies.Otite=r),color:"primary",label:"Otite","hide-details":""},null,8,["modelValue"])]),_:1}),t(c,{cols:"3",class:"py-0"},{default:e(()=>[t(K,{modelValue:n.Maladies.Rougeole,"onUpdate:modelValue":l[14]||(l[14]=r=>n.Maladies.Rougeole=r),color:"primary",label:"Rougeole","hide-details":""},null,8,["modelValue"])]),_:1}),t(c,{cols:"3",class:"py-0"},{default:e(()=>[t(K,{modelValue:n.Maladies.Rhumatisme,"onUpdate:modelValue":l[15]||(l[15]=r=>n.Maladies.Rhumatisme=r),color:"primary",label:"Rhumatisme articulaire aigü ","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(R,{subtitle:"Allergies",class:"my-2"},{default:e(()=>[t(A,null,{default:e(()=>[l[43]||(l[43]=o(" Le participant a-t-il une des allergies suivantes ? ",-1)),t(h,{class:"mt-2"},{default:e(()=>[t(c,{"align-self":"center",cols:"3",class:"py-0"},{default:e(()=>[t(K,{modelValue:n.Allergies.Asthme,"onUpdate:modelValue":l[16]||(l[16]=r=>n.Allergies.Asthme=r),color:"primary",label:"Asthme","hide-details":""},null,8,["modelValue"])]),_:1}),t(c,{"align-self":"center",cols:"3",class:"py-0"},{default:e(()=>[t(K,{modelValue:n.Allergies.Alimentaires,"onUpdate:modelValue":l[17]||(l[17]=r=>n.Allergies.Alimentaires=r),color:"primary",label:"Alimentaires","hide-details":""},null,8,["modelValue"])]),_:1}),t(c,{"align-self":"center",cols:"3",class:"py-0"},{default:e(()=>[t(K,{modelValue:n.Allergies.Medicamenteuses,"onUpdate:modelValue":l[18]||(l[18]=r=>n.Allergies.Medicamenteuses=r),color:"primary",label:"Médicamenteuses","hide-details":""},null,8,["modelValue"])]),_:1}),t(c,{"align-self":"center",cols:"3",class:"py-0"},{default:e(()=>[t(ue,{density:"compact",variant:"outlined","hide-details":"",label:"Autres allergies",modelValue:n.Allergies.Autres,"onUpdate:modelValue":l[19]||(l[19]=r=>n.Allergies.Autres=r)},null,8,["modelValue"])]),_:1})]),_:1}),t(ke,null,{default:e(()=>[y.value?(u(),g(h,{key:0},{default:e(()=>[t(c,null,{default:e(()=>[t(de,{variant:"outlined",label:"Conduite à tenir",modelValue:n.Allergies.ConduiteATenir,"onUpdate:modelValue":l[20]||(l[20]=r=>n.Allergies.ConduiteATenir=r),hint:"Préciser la cause de l’allergie et la conduite à tenir (si automédication le signaler). Si un PAI a été mis en place durant le temps scolaire, merci de nous le signaler.","persistent-hint":"",rules:[S(Ge).required("Merci de nous informer de la conduite à tenir en cas d'allergie.")]},null,8,["modelValue","rules"])]),_:1})]),_:1})):T("",!0)]),_:1})]),_:1})]),_:1}),t(R,{subtitle:"Divers",class:"my-2"},{default:e(()=>[t(A,null,{default:e(()=>[t(h,null,{default:e(()=>[t(c,null,{default:e(()=>[t(de,{variant:"outlined",label:"Difficultés de santé",modelValue:n.DifficultesSante,"onUpdate:modelValue":l[21]||(l[21]=r=>n.DifficultesSante=r),hint:"Indiquer les difficultés de santé (maladie, accident, crises convulsives, hospitalisation, opération, rééducation) en précisant les dates et les précautions à prendre.","persistent-hint":""},null,8,["modelValue"])]),_:1}),t(c,null,{default:e(()=>[t(de,{variant:"outlined",label:"Recommandations utiles",modelValue:n.Recommandations,"onUpdate:modelValue":l[22]||(l[22]=r=>n.Recommandations=r),hint:"Préciser si le participant porte des lunettes, des lentilles, des prothèses auditives, des prothèses dentaires...","persistent-hint":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(R,{subtitle:"Médecin traitant",class:"my-2"},{default:e(()=>[t(A,null,{default:e(()=>[t(h,null,{default:e(()=>[t(c,null,{default:e(()=>[t(ue,{variant:"outlined",density:"compact",label:"Nom",modelValue:n.Medecin.Nom,"onUpdate:modelValue":l[23]||(l[23]=r=>n.Medecin.Nom=r),"hide-details":""},null,8,["modelValue"])]),_:1}),t(c,null,{default:e(()=>[t(ue,{variant:"outlined",density:"compact",label:"Téléphone","model-value":S(Y).tel(n.Medecin.Tel),"onUpdate:modelValue":l[24]||(l[24]=r=>n.Medecin.Tel=r),"hide-details":""},null,8,["model-value"])]),_:1})]),_:1})]),_:1})]),_:1}),t(R,{subtitle:"Responsable légal",class:"my-2"},{default:e(()=>[t(A,null,{default:e(()=>[t(h,null,{default:e(()=>[t(c,{"align-self":"center"},{default:e(()=>{var r;return[l[45]||(l[45]=o(" Téléphone : ",-1)),(r=a.fiche.RespoTels)!=null&&r.length?T("",!0):(u(),g(ee,{key:0,label:""},{default:e(()=>[...l[44]||(l[44]=[o("Aucun numéro",-1)])]),_:1})),(u(!0),D(I,null,B(a.fiche.RespoTels,P=>(u(),g(ee,{label:"",class:"mx-1"},{default:e(()=>[o(C(S(Y).tel(P)),1)]),_:2},1024))),256))]}),_:1}),t(c,{"align-self":"center"},{default:e(()=>[t(ue,{variant:"outlined",density:"compact",label:"Numéro de contact","model-value":S(Y).tel(n.Tel),"onUpdate:modelValue":l[25]||(l[25]=r=>n.Tel=r),hint:"Numéro de téléphone supplémentaire (optionnel)","persistent-hint":""},null,8,["model-value"])]),_:1})]),_:1}),t(h,null,{default:e(()=>[t(c,null,{default:e(()=>[t(ue,{variant:"outlined",density:"compact",label:"Sécurité sociale",modelValue:v.value,"onUpdate:modelValue":l[26]||(l[26]=r=>v.value=r),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(R,{class:"mt-4",variant:"outlined",color:"success",title:"Validation"},{default:e(()=>[t(A,{class:"text-black"},{default:e(()=>[...l[46]||(l[46]=[o(" Le responsable légal déclare ",-1),_("b",null,"exacts",-1),o(" les renseignements portés sur ce formulaire et autorise le responsable du séjour à prendre, le cas échéant, ",-1),_("b",null,"toutes mesures",-1),o(" (traitement médical, hospitalisation, intervention chirurgicale) rendues nécessaires par l'état du participant. Il autorise également, si nécessaire, le directeur du séjour à faire sortir le participant de l’hôpital après une hospitalisation. ",-1)])]),_:1}),t(ie,null,{default:e(()=>[t(j,{block:"",color:"success",onClick:l[27]||(l[27]=r=>d("save",n,v.value))},{prepend:e(()=>[t($,null,{default:e(()=>[...l[47]||(l[47]=[o("mdi-content-save",-1)])]),_:1})]),default:e(()=>[o(" Enregistrer la fiche sanitaire de "+C(a.fiche.Personne),1)]),_:1})]),_:1})]),_:1})],64))])}}}),zt=Z({__name:"FichessanitairesCard",props:{token:{}},emits:["close","updateNotifs"],setup(f,{emit:s}){const a=f,d=s;me(y);const n=L(0),v=L([]);async function y(){const m=await w.LoadFichesanitaires({token:a.token});m!==void 0&&(v.value=m.Fiches||[],v.value.length&&n.value==0&&(n.value=v.value[0].Fichesanitaire.IdPersonne),d("updateNotifs",m.ToFillCount))}async function p(m,r){await w.UpdateFichesanitaire({Token:a.token,Fichesanitaire:m,SecuriteSocialeResponsable:r})!==void 0&&(w.showMessage("La fiche sanitaire a bien été enregistrée. Merci !"),y())}async function b(m,r){const P=v.value[m];await w.UploadVaccin(r,{token:a.token,idPersonne:P.Fichesanitaire.IdPersonne})!==void 0&&(y(),w.showMessage("Le vaccin a bien été téléversé. Merci !"))}async function V(m,r){v.value[m],await w.DeleteVaccin({key:r.Key})!==void 0&&(y(),w.showMessage("Le vaccin a bien été supprimé."))}async function l(m){d("close"),await w.TransfertFicheSanitaire({token:a.token,idPersonne:m.IdPersonne})!==void 0&&w.showMessage("Mail de transfert envoyé avec succès.")}return(m,r)=>(u(),g(R,{title:"Fiches sanitaires et vaccins"},{append:e(()=>[t(xe,{modelValue:n.value,"onUpdate:modelValue":r[0]||(r[0]=P=>n.value=P)},{default:e(()=>[(u(!0),D(I,null,B(v.value,P=>(u(),g(Te,{value:P.Fichesanitaire.IdPersonne},{default:e(()=>{var U;return[o(C(P.Personne)+" ",1),P.State==S(ae).NoFiche||P.State==S(ae).Outdated||!((U=P.VaccinsFiles)!=null&&U.length)?(u(),g($,{key:0,class:"ml-2",color:"warning"},{default:e(()=>[...r[1]||(r[1]=[o(" mdi-alert ",-1)])]),_:1})):(u(),g($,{key:1,class:"ml-2",color:"success"},{default:e(()=>[...r[2]||(r[2]=[o(" mdi-check ",-1)])]),_:1}))]}),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])]),default:e(()=>[t(A,null,{default:e(()=>[t(Fe,{"model-value":n.value},{default:e(()=>[(u(!0),D(I,null,B(v.value,(P,U)=>(u(),g(Ie,{value:P.Fichesanitaire.IdPersonne},{default:e(()=>[t(Ot,{fiche:P,onSave:p,onUploadVaccin:F=>b(U,F),onDeleteVaccin:F=>V(U,F),onTransfert:F=>l(P.Fichesanitaire)},null,8,["fiche","onUploadVaccin","onDeleteVaccin","onTransfert"])]),_:2},1032,["value"]))),256))]),_:1},8,["model-value"])]),_:1})]),_:1}))}}),Jt=We({name:String,itemAriaLabel:{type:String,default:"$vuetify.rating.ariaLabel.item"},activeColor:String,color:String,clearable:Boolean,disabled:Boolean,emptyIcon:{type:he,default:"$ratingEmpty"},fullIcon:{type:he,default:"$ratingFull"},halfIncrements:Boolean,hover:Boolean,length:{type:[Number,String],default:5},readonly:Boolean,modelValue:{type:[Number,String],default:0},itemLabels:Array,itemLabelPosition:{type:String,default:"top",validator:f=>["top","bottom"].includes(f)},ripple:Boolean,...dt(),...rt(),...ut(),...it(),...ot()},"VRating"),Kt=Qe()({name:"VRating",props:Jt(),emits:{"update:modelValue":f=>!0},setup(f,s){let{slots:a}=s;const{t:d}=Ze(),{themeClasses:n}=Xe(f),v=Ye(f,"modelValue"),y=q(()=>et(parseFloat(v.value),0,Number(f.length))),p=q(()=>tt(Number(f.length),1)),b=q(()=>p.value.flatMap(M=>f.halfIncrements?[M-.5,M]:[M])),V=lt(-1),l=q(()=>b.value.map(M=>{const N=f.hover&&V.value>-1,E=y.value>=M,O=V.value>=M,ne=(N?O:E)?f.fullIcon:f.emptyIcon,x=f.activeColor??f.color,i=E||O?x:f.color;return{isFilled:E,isHovered:O,icon:ne,color:i}})),m=q(()=>[0,...b.value].map(M=>{function N(){V.value=M}function E(){V.value=-1}function O(){f.disabled||f.readonly||(v.value=y.value===M&&f.clearable?0:M)}return{onMouseenter:f.hover?N:void 0,onMouseleave:f.hover?E:void 0,onClick:O}})),r=at(),P=q(()=>f.name??`v-rating-${r}`);function U(M){var k,te;let{value:N,index:E,showStar:O=!0}=M;const{onMouseenter:G,onMouseleave:ne,onClick:x}=m.value[E+1],i=`${P.value}-${String(N).replace(".","-")}`,se={color:(k=l.value[E])==null?void 0:k.color,density:f.density,disabled:f.disabled,icon:(te=l.value[E])==null?void 0:te.icon,ripple:f.ripple,size:f.size,variant:"plain"};return _(I,null,[_("label",{for:i,class:ve({"v-rating__item--half":f.halfIncrements&&N%1>0,"v-rating__item--full":f.halfIncrements&&N%1===0}),onMouseenter:G,onMouseleave:ne,onClick:x},[_("span",{class:"v-rating__hidden"},[d(f.itemAriaLabel,N,f.length)]),O?a.item?a.item({...l.value[E],props:se,value:N,index:E,rating:y.value}):t(j,Ve({"aria-label":d(f.itemAriaLabel,N,f.length)},se),null):void 0]),_("input",{class:"v-rating__hidden",name:P.value,id:i,type:"radio",value:N,checked:y.value===N,tabindex:-1,readonly:f.readonly,disabled:f.disabled},null)])}function F(M){return a["item-label"]?a["item-label"](M):M.label?_("span",null,[M.label]):_("span",null,[o(" ")])}return nt(()=>{var N;const M=!!((N=f.itemLabels)!=null&&N.length)||a["item-label"];return t(f.tag,{class:ve(["v-rating",{"v-rating--hover":f.hover,"v-rating--readonly":f.readonly},n.value,f.class]),style:st(f.style)},{default:()=>[t(U,{value:0,index:-1,showStar:!1},null),p.value.map((E,O)=>{var G,ne;return _("div",{class:"v-rating__wrapper"},[M&&f.itemLabelPosition==="top"?F({value:E,index:O,label:(G=f.itemLabels)==null?void 0:G[O]}):void 0,_("div",{class:"v-rating__item"},[f.halfIncrements?_(I,null,[t(U,{value:E-.5,index:O*2},null),t(U,{value:E,index:O*2+1},null)]):t(U,{value:E,index:O},null)]),M&&f.itemLabelPosition==="bottom"?F({value:E,index:O,label:(ne=f.itemLabels)==null?void 0:ne[O]}):void 0])})]})}),{}}}),le=Z({__name:"RatingField",props:mt({label:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(f){const s=f,a=pt(f,"modelValue");return(d,n)=>(u(),g(h,{"no-gutters":""},{default:e(()=>[t(c,{cols:"12"},{default:e(()=>[o(C(s.label),1)]),_:1}),t(c,{cols:"12"},{default:e(()=>[t(Kt,{hover:"",color:"primary",length:4,modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=v=>a.value=v),size:"32"},null,8,["modelValue"])]),_:1})]),_:1}))}}),Gt={key:1},Qt=Z({__name:"SondagesCard",props:{token:{},initialCamp:{}},setup(f){const s=f;me(n);const a=L(0),d=L(null);async function n(){const p=await w.LoadSondages({token:s.token});if(p===void 0)return;d.value=p||[];const b=(p||[]).filter(v);(p||[]).map(V=>V.Sondage.IdCamp).includes(s.initialCamp)?a.value=s.initialCamp:b.length?a.value=b[0].Sondage.IdCamp:a.value==0&&(p!=null&&p.length)&&(a.value=p[0].Sondage.IdCamp)}function v(p){return ct(p.Sondage.Modified)}async function y(p){await w.UpdateSondages({Token:s.token,Id:p.Id,IdCamp:p.IdCamp,Reponse:p})!==void 0&&(n(),w.showMessage("Votre réponse a bien été enregistrée. Merci !"))}return(p,b)=>{var V;return d.value==null?(u(),g(ye,{key:0,type:"card"})):d.value!=null?(u(),g(R,{key:1,title:"Enquête de satisfaction",width:(V=d.value)!=null&&V.length?void 0:"600px",class:"mx-auto"},{default:e(()=>[t(A,null,{default:e(()=>[d.value.length?(u(),g(W,{key:0,color:"secondary",icon:"mdi-comment-quote"},{default:e(()=>[...b[1]||(b[1]=[o(" Afin d'améliorer nos prestations, nous avons à cœur de vous laisser la parole. Vos suggestions, remarques et ressentis nous aiderons à améliorer nos séjours. Merci d'avance de ce temps que vous réserverez pour répondre à cette courte enquête. ",-1)])]),_:1})):(u(),D("div",Gt," L'enquête n'est pas encore ouverte. Vous pouvez repasser à la fin du séjour. ")),d.value.length?(u(),g(xe,{key:2,modelValue:a.value,"onUpdate:modelValue":b[0]||(b[0]=l=>a.value=l),grow:"",class:"mt-2"},{default:e(()=>[(u(!0),D(I,null,B(d.value,l=>(u(),g(Te,{value:l.Sondage.IdCamp},{default:e(()=>[o(C(l.Camp)+" ",1),v(l)?(u(),g(fe,{key:0,inline:"",content:"Nouveau",color:"pink"})):T("",!0)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])):T("",!0),t(Fe,{"model-value":a.value,class:"mt-2"},{default:e(()=>[(u(!0),D(I,null,B(d.value,l=>(u(),g(Ie,{value:l.Sondage.IdCamp},{default:e(()=>[t(R,{subtitle:"Vos impressions sur le séjour"},{default:e(()=>[t(A,null,{default:e(()=>[t(h,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[t(h,null,{default:e(()=>[t(c,null,{default:e(()=>[t(le,{label:"Informations avant le séjour",modelValue:l.Sondage.InfosAvantSejour,"onUpdate:modelValue":m=>l.Sondage.InfosAvantSejour=m},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(c,null,{default:e(()=>[t(le,{label:"Informations pendant le séjour",modelValue:l.Sondage.InfosPendantSejour,"onUpdate:modelValue":m=>l.Sondage.InfosPendantSejour=m},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(c,null,{default:e(()=>[t(le,{label:"L'hébergement",modelValue:l.Sondage.Hebergement,"onUpdate:modelValue":m=>l.Sondage.Hebergement=m},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),t(h,null,{default:e(()=>[t(c,null,{default:e(()=>[t(le,{label:"Les activités",modelValue:l.Sondage.Activites,"onUpdate:modelValue":m=>l.Sondage.Activites=m},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(c,null,{default:e(()=>[t(le,{label:"Le thème",modelValue:l.Sondage.Theme,"onUpdate:modelValue":m=>l.Sondage.Theme=m},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(c,null,{default:e(()=>[t(le,{label:"La nourriture",modelValue:l.Sondage.Nourriture,"onUpdate:modelValue":m=>l.Sondage.Nourriture=m},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),t(h,null,{default:e(()=>[t(c,null,{default:e(()=>[t(le,{label:"L'hygiène corporelle et vestimentaire",modelValue:l.Sondage.Hygiene,"onUpdate:modelValue":m=>l.Sondage.Hygiene=m},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(c,null,{default:e(()=>[t(le,{label:"L'ambiance du groupe",modelValue:l.Sondage.Ambiance,"onUpdate:modelValue":m=>l.Sondage.Ambiance=m},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(c,null,{default:e(()=>[t(le,{label:"Le ressenti global de votre enfant",modelValue:l.Sondage.Ressenti,"onUpdate:modelValue":m=>l.Sondage.Ressenti=m},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),t(c,{cols:"6"},{default:e(()=>[t(h,null,{default:e(()=>[t(c,{cols:"12"},{default:e(()=>[t(de,{rows:"3",label:"Message du participant",hint:"Le participant souhaite donner son avis : des regrets ? de bons souvenirs ? des propositions d'amélioration ?","persistent-hint":"",modelValue:l.Sondage.MessageEnfant,"onUpdate:modelValue":m=>l.Sondage.MessageEnfant=m},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(c,null,{default:e(()=>[t(de,{rows:"3",label:"Message du responsable",hint:"En tant que responsable, vous avez une remarque, une suggestion, un ressenti à partager : avec plaisir ! Nous prendrons soin de vous apporter une réponse en cas de besoin.","persistent-hint":"",modelValue:l.Sondage.MessageResponsable,"onUpdate:modelValue":m=>l.Sondage.MessageResponsable=m},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),t(ie,null,{default:e(()=>[t(j,{block:"",variant:"outlined",color:"success",onClick:m=>y(l.Sondage)},{prepend:e(()=>[t($,null,{default:e(()=>[...b[2]||(b[2]=[o("mdi-content-save",-1)])]),_:1})]),default:e(()=>[o(" Enregistrer mon retour pour le séjour "+C(l.Camp),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["value"]))),256))]),_:1},8,["model-value"])]),_:1})]),_:1},8,["width"])):T("",!0)}}}),Wt=Z({__name:"DocumentsCard",props:{token:{}},emits:["updateNotifs"],setup(f,{emit:s}){const a=f,d=s;me(v);const n=L(null);async function v(){const b=await w.LoadDocuments({token:a.token});b!==void 0&&(n.value=b,d("updateNotifs",b.ToReadOrFillCount))}async function y(b,V,l){await w.UploadDocument(l,{token:a.token,idPersonne:b,idDemande:V})!==void 0&&(w.showMessage("Document téléversé avec succès. Merci !"),await v(),d("updateNotifs",n.value.ToReadOrFillCount))}async function p(b){await w.DeleteDocument({key:b.Key})!==void 0&&(w.showMessage("Document supprimé avec succès."),await v(),d("updateNotifs",n.value.ToReadOrFillCount))}return(b,V)=>{const l=St,m=Ee;return u(),g(R,{title:"Documents des séjours",subtitle:"Vous retrouvez ici les documents des séjours auxquels vous participez, à lire ou remplir."},{append:e(()=>[...V[0]||(V[0]=[])]),default:e(()=>[n.value!=null?(u(),g(A,{key:0},{default:e(()=>[t(oe,null,{default:e(()=>{var r,P;return[t(Le,null,{default:e(()=>[...V[1]||(V[1]=[o("À lire",-1)])]),_:1}),(r=n.value.FilesToRead)!=null&&r.length?T("",!0):(u(),g(H,{key:0},{default:e(()=>[...V[2]||(V[2]=[_("i",null,"Aucun document à lire.",-1)])]),_:1})),(u(!0),D(I,null,B(n.value.FilesToRead,U=>(u(),D(I,null,[(u(!0),D(I,null,B(U.Files,F=>(u(),g(H,{title:F.NomClient,subtitle:U.Camp},{append:e(()=>[t(l,{fileKey:F.Key,isGeneratedDoc:!1},null,8,["fileKey"])]),_:2},1032,["title","subtitle"]))),256)),(u(!0),D(I,null,B(U.Generated,F=>(u(),g(H,{title:F.NomClient,subtitle:U.Camp},{append:e(()=>[t(l,{fileKey:F.Key,isGeneratedDoc:!0},null,8,["fileKey"])]),_:2},1032,["title","subtitle"]))),256))],64))),256)),t(Le,null,{default:e(()=>[...V[3]||(V[3]=[o("À fournir",-1)])]),_:1}),(P=n.value.FilesToUpload)!=null&&P.length?T("",!0):(u(),g(H,{key:1},{default:e(()=>[...V[4]||(V[4]=[_("i",null,"Aucun document à fournir.",-1)])]),_:1})),(u(!0),D(I,null,B(n.value.FilesToUpload,U=>(u(),D(I,null,[(u(!0),D(I,null,B(U.Demandes,F=>(u(),g(m,{demande:F.Demande,files:F.Uploaded||[],inUpload:!1,title:`Document pour ${U.Personne}`,optionnelle:null,showUploadText:!0,onUpload:M=>y(U.IdPersonne,F.Demande.Id,M),onDelete:p},Ce({_:2},[F.Demande.IdFile.Valid?{name:"prepend",fn:e(()=>[t(wt,{"content-class":"pa-1"},{activator:e(({props:M})=>[t(j,Ve({ref_for:!0},M,{href:S(ft)(F.DemandeFile.Key),class:"mr-2",size:"small"}),{prepend:e(()=>[t($,null,{default:e(()=>[...V[5]||(V[5]=[o("mdi-download",-1)])]),_:1})]),default:e(()=>[V[6]||(V[6]=o(" Modèle",-1))]),_:1},16,["href"])]),default:e(()=>[t(l,{"file-key":F.DemandeFile.Key,isGeneratedDoc:!1,large:!0},null,8,["file-key"])]),_:2},1024)]),key:"0"}:void 0]),1032,["demande","files","title","onUpload"]))),256))],64))),256))]}),_:1})]),_:1})):(u(),g(ye,{key:1}))]),_:1})}}}),Zt=Z({__name:"FinancesReglementCard",props:{token:{},dossier:{},settings:{}},emits:["refresh"],setup(f,{emit:s}){const a=f,d=L(a.settings.SupportPaiementEnLigne?Q.EnLigne:Q.Virement);async function n(y){await Pe(y),w.showMessage("IBAN copié avec succès.")}async function v(y){await Pe(y),w.showMessage("Identifiant de virement copié avec succès.")}return(y,p)=>(u(),g(R,{title:"Régler la pension",class:"mt-2"},{default:e(()=>[t(A,null,{default:e(()=>[p[13]||(p[13]=o(" Le montant de la pension à régler est de ",-1)),_("b",null,C(a.dossier.Bilan.Restant),1),p[14]||(p[14]=o(". ",-1)),t(h,{class:"mt-4"},{default:e(()=>[t(c,{"align-self":"start",cols:"4"},{default:e(()=>[t(oe,{class:"py-0",selectable:"",selected:d.value,"onUpdate:selected":p[0]||(p[0]=b=>d.value=b)},{default:e(()=>[t(H,{rounded:"",class:"my-2",title:"Payer en ligne",subtitle:"par carte bancaire",value:S(Q).EnLigne,disabled:!a.settings.SupportPaiementEnLigne},{append:e(()=>[t($,null,{default:e(()=>[...p[2]||(p[2]=[o("mdi-credit-card",-1)])]),_:1})]),_:1},8,["value","disabled"]),t(H,{rounded:"",class:"my-2",title:"Payer par virement",value:S(Q).Virement},{append:e(()=>[t($,null,{default:e(()=>[...p[3]||(p[3]=[o("mdi-bank",-1)])]),_:1})]),_:1},8,["value"]),t(H,{rounded:"",class:"my-2",title:"Payer par chèque",value:S(Q).Cheque},{append:e(()=>[t($,null,{default:e(()=>[...p[4]||(p[4]=[o("mdi-checkbook",-1)])]),_:1})]),_:1},8,["value"])]),_:1},8,["selected"])]),_:1}),t(c,{"align-self":"start",cols:"8"},{default:e(()=>[t(R,{title:S(Dt)[d.value]},{default:e(()=>[d.value==S(Q).EnLigne?(u(),g(A,{key:0},{default:e(()=>[...p[5]||(p[5]=[o(" TODO: see https://github.com/benoitkugler/registro/issues/76 ",-1)])]),_:1})):d.value==S(Q).Virement?(u(),g(A,{key:1},{default:e(()=>{var b;return[o(" Vous pouvez effectuer votre virement vers "+C((b=a.settings.BankAccounts)!=null&&b.length?"l'un des comptes suivants":"le compte suivant")+" : ",1),t(oe,{class:"my-2"},{default:e(()=>[(u(!0),D(I,null,B(a.settings.BankAccounts,V=>(u(),g(H,{title:V[0],subtitle:V[1]},{append:e(()=>[t(j,{size:"x-small",icon:"mdi-content-copy",onClick:l=>n(V[1])},null,8,["onClick"])]),_:2},1032,["title","subtitle"]))),256))]),_:1}),t(W,{type:"info"},{default:e(()=>[p[6]||(p[6]=o(" Merci d'indiquer impérativement le ",-1)),p[7]||(p[7]=_("b",null,"label",-1)),p[8]||(p[8]=o(" suivant sur votre virement, qui nous permettra de l'identifier : ",-1)),t(h,{"no-gutters":"",class:"mt-2"},{default:e(()=>[t(c,{"align-self":"center",class:"text-center"},{default:e(()=>[t(ee,{variant:"elevated"},{default:e(()=>[o(C(a.settings.VirementCode),1)]),_:1})]),_:1}),t(c,{"align-self":"center",cols:"auto"},{default:e(()=>[t(j,{class:"my-2",size:"x-small",icon:"mdi-content-copy",onClick:p[1]||(p[1]=V=>v(a.settings.VirementCode))})]),_:1})]),_:1})]),_:1})]}),_:1})):d.value==S(Q).Cheque?(u(),g(A,{key:2},{default:e(()=>[p[10]||(p[10]=o(" Merci d'envoyer votre chèque à l'ordre ",-1)),_("b",null,C(a.settings.Cheque.Ordre),1),p[11]||(p[11]=o(" à l'adresse suivante : ",-1)),t(h,{justify:"center"},{default:e(()=>[t(c,{cols:"auto"},{default:e(()=>[t(R,{class:"my-2"},{default:e(()=>[t(A,null,{default:e(()=>[o(C(a.settings.Cheque.Adresse[0])+" ",1),p[9]||(p[9]=_("br",null,null,-1)),o(" "+C(a.settings.Cheque.Adresse[1]),1)]),_:1})]),_:1})]),_:1})]),_:1}),p[12]||(p[12]=o(" Il sera encaissé environ une dizaine de jours avant le début du séjour. ",-1))]),_:1})):T("",!0)]),_:1},8,["title"])]),_:1})]),_:1})]),_:1})]),_:1}))}}),Xt={};function Yt(f,s){return u(),g(R,{title:"Bienvenue sur votre espace de suivi !"},{default:e(()=>[t(A,null,{default:e(()=>[s[1]||(s[1]=o(" Cette page regroupe toutes les informations liées à votre inscription et vous permet d'interagir avec les directeurs de séjour et le centre d'inscription. ",-1)),t(W,{type:"info",class:"my-4"},{default:e(()=>[...s[0]||(s[0]=[o(" Le fil de messages vous permet de converser directement avec le centre. Merci de privilégier ce système aux mails. ",-1)])]),_:1}),s[2]||(s[2]=o(" Cet espace évoluera au fil de l'inscription, et vous donnera accès au suivi de votre demande: ",-1)),t(oe,null,{default:e(()=>[t(H,{title:"Notification de validation",subtitle:"Après prise en compte de votre inscription par le centre.","append-icon":"mdi-check"}),t(H,{title:"Réglement de la pension","append-icon":"mdi-currency-eur"}),t(H,{title:"Documents des séjours",subtitle:"Lettre du directeur, fiches sanitaires, autres documents, ...","append-icon":"mdi-mail"}),t(H,{title:"Album photo",subtitle:"Accès vers une plateforme dédiée aux photos de vos séjours.","append-icon":"mdi-image-album"}),t(H,{title:"Justificatifs",subtitle:"Téléchargement d'une attestation de présence ou d'une facture acquittée.","append-icon":"mdi-download"}),t(H,{title:"Sondage",subtitle:"Un espace de commentaire ouvert à la fin des séjours.","append-icon":"mdi-comment-quote"})]),_:1})]),_:1})]),_:1})}const el=Mt(Xt,[["render",Yt]]),tl=Z({__name:"ValidationInscriptionCard",props:{dossier:{}},setup(f){const s=f,a=q(()=>(s.dossier.Participants||[]).filter(v=>v.Participant.Statut==J.Inscrit)),d=q(()=>(s.dossier.Participants||[]).filter(v=>v.Participant.Statut!=J.Inscrit&&v.Participant.Statut!=J.AStatuer)),n=q(()=>(s.dossier.Participants||[]).filter(v=>v.Participant.Statut==J.AStatuer));return(v,y)=>(u(),g(R,{title:"Inscription reçue"},{default:e(()=>[t(A,null,{default:e(()=>[y[0]||(y[0]=_("div",{class:"mb-4"}," Nous avons bien reçu votre demande d'inscription, et nous vous en remercions. Voici son statut : ",-1)),a.value.length?(u(),g(W,{key:0,color:"lime-lighten-1",class:"my-2",elevation:"2",icon:S(Y).statutParticipant(S(J).Inscrit).icon},{default:e(()=>[t(h,null,{default:e(()=>[t(c,{"align-self":"center",class:"text-center"},{default:e(()=>[(u(!0),D(I,null,B(a.value,p=>(u(),g(ee,{class:"my-1"},{default:e(()=>[o(C(p.Personne.Prenom)+" : "+C(S(re).label(p.Camp)),1)]),_:2},1024))),256))]),_:1}),t(c,{cols:"7"},{default:e(()=>[o("Nous sommes ravis de vous confirmer "+C(a.value.length==1?"cette participation":"ces participations")+" et nous nous réjouissons des moments à passer ensemble !",1)]),_:1})]),_:1})]),_:1},8,["icon"])):T("",!0),d.value.length?(u(),g(W,{key:1,color:"orange-lighten-3",class:"my-2",elevation:"2",icon:S(Y).statutParticipant(S(J).AttenteCampComplet).icon},{default:e(()=>[t(h,null,{default:e(()=>[t(c,{"align-self":"center",class:"text-center"},{default:e(()=>[(u(!0),D(I,null,B(d.value,p=>(u(),g(ee,{class:"my-1"},{default:e(()=>[o(C(p.Personne.Prenom)+" : "+C(S(re).label(p.Camp)),1)]),_:2},1024))),256))]),_:1}),t(c,{cols:"7"},{default:e(()=>[o("Malheureusement, nous avons dû placer "+C(d.value.length==1?"cette demande":"ces demandes")+" en liste d'attente. Nous reviendrons vers vous si une place se libère.",1)]),_:1})]),_:1})]),_:1},8,["icon"])):T("",!0),n.value.length?(u(),g(W,{key:2,color:"grey-lighten-1",class:"my-2",elevation:"2",icon:S(Y).statutParticipant(S(J).AStatuer).icon},{default:e(()=>[t(h,null,{default:e(()=>[t(c,{"align-self":"center",class:"text-center"},{default:e(()=>[(u(!0),D(I,null,B(n.value,p=>(u(),g(ee,{class:"my-1"},{default:e(()=>[o(C(p.Personne.Prenom)+" : "+C(S(re).label(p.Camp)),1)]),_:2},1024))),256))]),_:1}),t(c,{cols:"7"},{default:e(()=>[o(" Nous n'avons pas encore statué pour "+C(n.value.length==1?"cette demande":"ces demandes")+" et nous reviendrons vers vous au plus vite. ",1)]),_:1})]),_:1})]),_:1},8,["icon"])):T("",!0)]),_:1})]),_:1}))}}),ll={class:"overflow-y-auto",style:{"max-height":"75vh"}},al=Z({__name:"Main",setup(f){const s=L("");me(async()=>{const x=new URLSearchParams(window.location.search),i=x.get("token")||"",se=!!x.get("from-inscription"),k=Number(x.get("idEvent")||0);if(s.value=i,await d(),!!a.value){if(se){O.value=!0;return}y(k)}});const a=L(null);async function d(){const x=await w.Load({token:s.value});x!==void 0&&(a.value=x)}const n=q(()=>a.value==null?[]:vt(a.value.Dossier,Ft.Espaceperso)),v=q(()=>a.value?a.value.DocumentsToReadOrFillCount+a.value.FichesanitaireToFillCount:0);function y(x){if(!a.value)return;const i=(a.value.Dossier.Events||[]).find(se=>se.Id==x);if(i)switch(i.Content.Kind){case pe.Validation:E.value=!0;return;case pe.Facture:N.value=!0;return;case pe.PlaceLiberee:G.value=i;return;case pe.CampDocs:M.value=!0;return;case pe.Sondage:P.value=i.Content.Data.IdCamp;return;default:return}}const p=q(()=>a.value==null?!1:(a.value.Dossier.Participants||[]).find(x=>x.Participant.Statut==J.Inscrit)!=null),b=L(null);async function V(){if(!b.value||!a.value)return;const x={Token:s.value,Message:b.value.content,OnlyToFondSoutien:b.value.toFondSoutien};b.value=null;const i=await w.SendMessage(x);i!==void 0&&(w.showMessage("Message envoyé avec succès."),a.value.Dossier.Events=(a.value.Dossier.Events||[]).concat(i))}function l(x){return x.Participant.Statut==J.Inscrit?"bg-lime-lighten-2":x.Participant.Statut==J.AStatuer?"bg-grey-lighten-1":"bg-orange-lighten-3"}const m=L(!1);async function r(x){m.value=!1,await w.UpdateParticipants({Token:s.value,Participants:x})!==void 0&&w.showMessage("Modifications enregistrées avec succès. Merci !")}const P=L(null),U=L(!1),F=L(!1),M=L(!1),N=L(!1),E=L(!1),O=L(!1),G=L(null);async function ne(){const x=G.value;!x||(G.value=null,await w.AcceptePlaceLiberee({token:s.value,idEvent:x.Id})===void 0)||(d(),w.showMessage("Place acceptée avec succès."))}return(x,i)=>{const se=_t;return u(),D(I,null,[t(Tt,{title:"Espace de suivi de votre inscription"},{default:e(()=>[t(j,{onClick:i[0]||(i[0]=k=>P.value=0)},{prepend:e(()=>[t($,null,{default:e(()=>[...i[26]||(i[26]=[o("mdi-comment-quote",-1)])]),_:1})]),default:e(()=>[i[27]||(i[27]=o(" Avis ",-1))]),_:1}),t(j,{onClick:i[1]||(i[1]=k=>U.value=!0)},{prepend:e(()=>[t($,null,{default:e(()=>[...i[28]||(i[28]=[o("mdi-image-album",-1)])]),_:1})]),default:e(()=>[i[29]||(i[29]=o(" Album photos ",-1))]),_:1}),t(be,null,{activator:e(({props:k})=>[t(j,Ve(k,{disabled:!p.value}),{prepend:e(()=>[t($,null,{default:e(()=>[...i[30]||(i[30]=[o("mdi-download",-1)])]),_:1})]),default:e(()=>[i[31]||(i[31]=o(" Justificatifs ",-1))]),_:1},16,["disabled"])]),default:e(()=>[t(oe,null,{default:e(()=>[t(H,{title:"Attestation de présence",subtitle:"Télécharger au format .pdf","prepend-icon":"mdi-file-document-check",link:"",href:S(we).DownloadAttestationPresence(s.value)},null,8,["href"]),t(H,{title:"Facture",subtitle:"Télécharger au format .pdf","prepend-icon":"mdi-invoice-list",href:S(we).DownloadFacture(s.value)},null,8,["href"])]),_:1})]),_:1})]),_:1}),a.value==null?(u(),g(ye,{key:0,type:"card"})):(u(),g(gt,{key:1,class:"fill-height",fluid:""},{default:e(()=>[t(h,null,{default:e(()=>[t(c,{"align-self":"center",cols:"5"},{default:e(()=>[t(R,{subtitle:"Participants"},{append:e(()=>[t(j,{size:"small",class:"mr-1"},{prepend:e(()=>[t($,null,{default:e(()=>[...i[32]||(i[32]=[o("mdi-folder",-1)])]),_:1})]),default:e(()=>[t(fe,{color:v.value?"pink":"transparent",content:v.value||"",floating:""},{default:e(()=>[...i[33]||(i[33]=[o(" Documents ",-1)])]),_:1},8,["color","content"]),t(be,{activator:"parent"},{default:e(()=>[t(oe,null,{default:e(()=>[t(H,{title:"Documents du séjour",subtitle:"Lettre du directeur, ...","prepend-icon":"mdi-mail",onClick:i[2]||(i[2]=k=>M.value=!0)},Ce({_:2},[a.value.DocumentsToReadOrFillCount?{name:"append",fn:e(()=>[t(fe,{color:"pink",content:a.value.DocumentsToReadOrFillCount,inline:""},null,8,["content"])]),key:"0"}:void 0]),1024),t(H,{title:"Fiches sanitaires","prepend-icon":"mdi-pill",onClick:i[3]||(i[3]=k=>F.value=!0)},Ce({_:2},[a.value.FichesanitaireToFillCount?{name:"append",fn:e(()=>[t(fe,{color:"pink",content:a.value.FichesanitaireToFillCount,inline:""},null,8,["content"])]),key:"0"}:void 0]),1024)]),_:1})]),_:1})]),_:1})]),default:e(()=>[t(A,null,{default:e(()=>[t(oe,{class:"pa-0"},{default:e(()=>[(u(!0),D(I,null,B(a.value.Dossier.Participants,k=>(u(),g(H,{title:S(Se).label(k.Personne),subtitle:S(re).label(k.Camp),rounded:"",class:ve({"my-2":!0,[l(k)]:!0})},{append:e(()=>[t(ee,{variant:"elevated",color:S(Y).statutParticipant(k.Participant.Statut).color,"prepend-icon":S(Y).statutParticipant(k.Participant.Statut).icon},{default:e(()=>[o(C(S(Rt)[k.Participant.Statut]),1)]),_:2},1032,["color","prepend-icon"])]),_:2},1032,["title","subtitle","class"]))),256))]),_:1})]),_:1})]),_:1}),t(jt,{token:s.value,dossier:a.value.Dossier,"is-paiement-open":a.value.IsPaiementOpen,settings:a.value.PaiementSettings,onRefresh:d,onShowReglement:i[4]||(i[4]=k=>N.value=!0)},null,8,["token","dossier","is-paiement-open","settings"])]),_:1}),t(c,{"align-self":"center"},{default:e(()=>[t(R,{subtitle:"Fil de suivi de votre inscription"},{append:e(()=>[t(j,{onClick:i[5]||(i[5]=k=>b.value={content:"",toFondSoutien:!1})},{prepend:e(()=>[t($,null,{default:e(()=>[...i[34]||(i[34]=[o("mdi-email",-1)])]),_:1})]),default:e(()=>[i[35]||(i[35]=o(" Nous écrire",-1))]),_:1})]),default:e(()=>[t(A,null,{default:e(()=>[_("div",ll,[t(Ut,{side:"end",class:"mt-4",density:"compact"},{default:e(()=>[(u(!0),D(I,null,B(n.value,k=>(u(),g(se,{event:k,onGoToSondage:i[6]||(i[6]=te=>P.value=te),onGoToDocuments:i[7]||(i[7]=te=>M.value=!0),onGoToValidation:i[8]||(i[8]=te=>E.value=!0),onAcceptPlaceLiberee:i[9]||(i[9]=te=>y(te)),onReplyFondSoutien:i[10]||(i[10]=te=>b.value={content:"",toFondSoutien:!0})},null,8,["event"]))),256))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1}),t(X,{modelValue:m.value,"onUpdate:modelValue":i[11]||(i[11]=k=>m.value=k)},{default:e(()=>[t(Et,{participants:a.value.Dossier.Participants||[],onSave:r},null,8,["participants"])]),_:1},8,["modelValue"])]),_:1})),t(X,{"model-value":b.value!=null,"onUpdate:modelValue":i[13]||(i[13]=k=>b.value=null),"max-width":"600px"},{default:e(()=>[b.value?(u(),g(R,{key:0,title:"Nouveau message",subtitle:b.value.toFondSoutien?"Ce message ne sera visible que par le fond de soutien.":"Ce message sera visible par le centre et les directeurs."},{default:e(()=>[t(A,null,{default:e(()=>[t(de,{autofocus:"",placeholder:"Rédigez votre message...",modelValue:b.value.content,"onUpdate:modelValue":i[12]||(i[12]=k=>b.value.content=k),rows:"10"},null,8,["modelValue"])]),_:1}),t(ie,null,{default:e(()=>[t(ge),t(j,{disabled:!b.value.content.length,onClick:V},{prepend:e(()=>[t($,null,{default:e(()=>[...i[36]||(i[36]=[o("mdi-send",-1)])]),_:1})]),default:e(()=>[i[37]||(i[37]=o(" Envoyer",-1))]),_:1},8,["disabled"])]),_:1})]),_:1},8,["subtitle"])):T("",!0)]),_:1},8,["model-value"]),t(X,{"model-value":P.value!=null,"onUpdate:modelValue":i[14]||(i[14]=k=>P.value=null)},{default:e(()=>[P.value!=null?(u(),g(Qt,{key:0,token:s.value,"initial-camp":P.value},null,8,["token","initial-camp"])):T("",!0)]),_:1},8,["model-value"]),t(X,{modelValue:U.value,"onUpdate:modelValue":i[15]||(i[15]=k=>U.value=k)},{default:e(()=>[t(Ht,{token:s.value},null,8,["token"])]),_:1},8,["modelValue"]),t(X,{modelValue:F.value,"onUpdate:modelValue":i[18]||(i[18]=k=>F.value=k)},{default:e(()=>[t(zt,{token:s.value,onClose:i[16]||(i[16]=k=>F.value=!1),onUpdateNotifs:i[17]||(i[17]=k=>a.value.FichesanitaireToFillCount=k)},null,8,["token"])]),_:1},8,["modelValue"]),t(X,{modelValue:M.value,"onUpdate:modelValue":i[21]||(i[21]=k=>M.value=k),"max-width":"800px"},{default:e(()=>[t(Wt,{token:s.value,onClose:i[19]||(i[19]=k=>M.value=!1),onUpdateNotifs:i[20]||(i[20]=k=>a.value.DocumentsToReadOrFillCount=k)},null,8,["token"])]),_:1},8,["modelValue"]),a.value?(u(),g(X,{key:2,modelValue:N.value,"onUpdate:modelValue":i[22]||(i[22]=k=>N.value=k),"max-width":"800px"},{default:e(()=>[t(Zt,{token:s.value,dossier:a.value.Dossier,settings:a.value.PaiementSettings},null,8,["token","dossier","settings"])]),_:1},8,["modelValue"])):T("",!0),t(X,{modelValue:O.value,"onUpdate:modelValue":i[23]||(i[23]=k=>O.value=k),"max-width":"800px"},{default:e(()=>[t(el)]),_:1},8,["modelValue"]),t(X,{modelValue:E.value,"onUpdate:modelValue":i[24]||(i[24]=k=>E.value=k),"max-width":"800px"},{default:e(()=>[a.value?(u(),g(tl,{key:0,dossier:a.value.Dossier},null,8,["dossier"])):T("",!0)]),_:1},8,["modelValue"]),t(X,{"model-value":G.value!=null,"onUpdate:modelValue":i[25]||(i[25]=k=>G.value=null),"max-width":"600px"},{default:e(()=>[G.value?(u(),g(R,{key:0,title:"Accepter la place"},{default:e(()=>[t(A,null,{default:e(()=>[o(" Confirmez-vous l'inscription de "+C(G.value.Content.Data.ParticipantLabel)+" sur le séjour "+C(G.value.Content.Data.CampLabel)+" ? ",1),i[38]||(i[38]=_("br",null,null,-1)),i[39]||(i[39]=_("br",null,null,-1)),i[40]||(i[40]=_("span",{class:"text-grey"},"Un mail de notification sera envoyé automatiquement au centre.",-1))]),_:1}),t(ie,null,{default:e(()=>[t(ge),t(j,{color:"success",onClick:ne},{default:e(()=>[...i[41]||(i[41]=[o("Confirmer",-1)])]),_:1})]),_:1})]),_:1})):T("",!0)]),_:1},8,["model-value"])],64)}}}),nl=["innerHTML"],sl=Z({__name:"App",setup(f){const s=De({text:"",color:"secondary",action:void 0,timeout:4e3}),a=L(""),d=L("");return w.onError=(n,v)=>{a.value=n,d.value=v},w.showMessage=(n,v,y)=>{s.text=n,s.color=v||"success",s.action=y,s.timeout=1e4,s.timeout=4e3},(n,v)=>(u(),g(Vt,null,{default:e(()=>[t(bt,null,{default:e(()=>[t(al),t(Ae,{style:{"z-index":"10000"},app:"","model-value":s.text!="","onUpdate:modelValue":v[1]||(v[1]=y=>s.text=""),timeout:s.timeout,color:s.color,location:"bottom left","close-on-content-click":""},{default:e(()=>[o(C(s.text)+" ",1),s.action?(u(),g(j,{key:0,onClick:v[0]||(v[0]=y=>s.action.action()),class:"ml-2"},{default:e(()=>[o(C(s.action.title),1)]),_:1})):T("",!0)]),_:1},8,["model-value","timeout","color"]),t(Ae,{app:"","model-value":a.value!="","onUpdate:modelValue":v[2]||(v[2]=y=>a.value=""),timeout:4e3,color:"red"},{default:e(()=>[_("b",null,C(a.value),1),_("div",{innerHTML:d.value},null,8,nl)]),_:1},8,["model-value"])]),_:1})]),_:1}))}}),$e=yt(sl);$e.use(kt);$e.mount("#app");
