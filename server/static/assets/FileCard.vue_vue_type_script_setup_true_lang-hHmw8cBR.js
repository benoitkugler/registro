import{s as te,v as _,H as ne,b$ as xe,cj as Ae,L as O,k as B,c as m,S as I,y as le,cI as H,b as d,ca as ae,O as ze,cJ as Re,x as $e,J as ie,cK as q,K as je,N as Le,ck as Ne,j as g,F as N,A as Me,aw as re,cL as Oe,d as oe,aY as _e,q as se,o as ue,w as y,Z as A,a1 as Y,e as z,t as Ee,l as Z,bM as Ue,i as Ke,cu as Ge}from"./VSnackbar-CBECO1fY.js";import{z as Je,A as Q,I as X,J as We,D as He,K as qe,k as Ye,h as Ze,b as ee,c as Qe,V as Xe,e as et,f as tt}from"./VTextarea-HUR-vMJk.js";const nt=_({id:String,interactive:Boolean,text:String,...ze(Re({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:null}),["absolute","persistent"])},"VTooltip"),vt=te()({name:"VTooltip",props:nt(),emits:{"update:modelValue":e=>!0},setup(e,o){let{slots:l}=o;const s=ne(e,"modelValue"),{scopeId:a}=xe(),n=Ae(),u=O(()=>e.id||`v-tooltip-${n}`),i=B(),c=m(()=>e.location.split(" ").length>1?e.location:e.location+" center"),v=m(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),p=O(()=>e.transition!=null?e.transition:s.value?"scale-transition":"fade-transition"),h=m(()=>I({"aria-describedby":u.value},e.activatorProps));return le(()=>{const C=H.filterProps(e);return d(H,I({ref:i,class:["v-tooltip",{"v-tooltip--interactive":e.interactive},e.class],style:e.style,id:u.value},C,{modelValue:s.value,"onUpdate:modelValue":b=>s.value=b,transition:p.value,absolute:!0,location:c.value,origin:v.value,persistent:!0,role:"tooltip",activatorProps:h.value,_disableGlobalStack:!0},a),{activator:l.activator,default:function(){var S;for(var b=arguments.length,w=new Array(b),F=0;F<b;F++)w[F]=arguments[F];return((S=l.default)==null?void 0:S.call(l,...w))??e.text}})}),ae({},i)}});function lt(){function e(l){var a,n;return[...((a=l.dataTransfer)==null?void 0:a.items)??[]].filter(u=>u.kind==="file").map(u=>u.webkitGetAsEntry()).filter(Boolean).length>0||[...((n=l.dataTransfer)==null?void 0:n.files)??[]].length>0}async function o(l){var n,u;const s=[],a=[...((n=l.dataTransfer)==null?void 0:n.items)??[]].filter(i=>i.kind==="file").map(i=>i.webkitGetAsEntry()).filter(Boolean);if(a.length)for(const i of a){const c=await ce(i,de(".",i));s.push(...c.map(v=>v.file))}else s.push(...((u=l.dataTransfer)==null?void 0:u.files)??[]);return s}return{handleDrop:o,hasFilesOrFolders:e}}function ce(e){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new Promise((l,s)=>{e.isFile?e.file(n=>l([{file:n,path:o}]),s):e.isDirectory&&e.createReader().readEntries(async n=>{const u=[];for(const i of n)u.push(...await ce(i,de(o,i)));l(u)})})}function de(e,o){return o.isDirectory?`${e}/${o.name}`:e}const at=_({filterByType:String},"file-accept");function it(e){const o=m(()=>e.filterByType?rt(e.filterByType):null);function l(s){if(o.value){const a=s.filter(o.value);return{accepted:a,rejected:s.filter(n=>!a.includes(n))}}return{accepted:s,rejected:[]}}return{filterAccepted:l}}function rt(e){const o=e.split(",").map(n=>n.trim().toLowerCase()),l=o.filter(n=>n.startsWith(".")),s=o.filter(n=>n.endsWith("/*")),a=o.filter(n=>!l.includes(n)&&!s.includes(n));return n=>{var c,v;const u=((c=n.name.split(".").at(-1))==null?void 0:c.toLowerCase())??"",i=((v=n.type.split("/").at(0))==null?void 0:v.toLowerCase())??"";return a.includes(n.type)||l.includes(`.${u}`)||s.includes(`${i}/*`)}}const ot=_({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},truncateLength:{type:[Number,String],default:22},...He({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>ie(e).every(o=>o!=null&&typeof o=="object")},...at(),...We({clearable:!0})},"VFileInput"),st=te()({name:"VFileInput",inheritAttrs:!1,props:ot(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0,rejected:e=>!0},setup(e,o){let{attrs:l,emit:s,slots:a}=o;const{t:n}=$e(),{filterAccepted:u}=it(e),i=ne(e,"modelValue",e.modelValue,t=>ie(t),t=>!e.multiple&&Array.isArray(t)?t[0]:t),{isFocused:c,focus:v,blur:p}=Je(e),h=m(()=>typeof e.showSize!="boolean"?e.showSize:void 0),C=m(()=>(i.value??[]).reduce((t,r)=>{let{size:V=0}=r;return t+V},0)),b=m(()=>q(C.value,h.value)),w=m(()=>(i.value??[]).map(t=>{const{name:r="",size:V=0}=t,k=be(r);return e.showSize?`${k} (${q(V,h.value)})`:k})),F=m(()=>{var r;const t=((r=i.value)==null?void 0:r.length)??0;return e.showSize?n(e.counterSizeString,t,b.value):n(e.counterString,t)}),S=B(),E=B(),f=B(),fe=O(()=>c.value||e.active),U=m(()=>["plain","underlined"].includes(e.variant)),P=je(!1),{handleDrop:ve,hasFilesOrFolders:pe}=lt();function R(){var t;f.value!==document.activeElement&&((t=f.value)==null||t.focus()),c.value||v()}function me(t){var r;(r=f.value)==null||r.click()}function ye(t){s("mousedown:control",t)}function ge(t){var r;(r=f.value)==null||r.click(),s("click:control",t)}function he(t){t.stopPropagation(),R(),re(()=>{i.value=[],Oe(e["onClick:clear"],t)})}function be(t){if(t.length<Number(e.truncateLength))return t;const r=Math.floor((Number(e.truncateLength)-1)/2);return`${t.slice(0,r)}…${t.slice(t.length-r)}`}function Ve(t){t.preventDefault(),t.stopImmediatePropagation(),P.value=!0}function ke(t){t.preventDefault(),P.value=!1}async function Ce(t){if(t.preventDefault(),t.stopImmediatePropagation(),P.value=!1,!f.value||!pe(t))return;const r=await ve(t);K(r)}function we(t){if(!(!t.target||t.repack))if(e.filterByType)K([...t.target.files]);else{const r=t.target;i.value=[...r.files??[]]}}function K(t){const r=new DataTransfer,{accepted:V,rejected:k}=u(t);k.length&&s("rejected",k);for(const j of V)r.items.add(j);f.value.files=r.files,i.value=[...r.files];const $=new Event("change",{bubbles:!0});$.repack=!0,f.value.dispatchEvent($)}return Le(i,t=>{(!Array.isArray(t)||!t.length)&&f.value&&(f.value.value="")}),le(()=>{const t=!!(a.counter||e.counter),r=!!(t||a.details),[V,k]=Ne(l),{modelValue:$,...j}=Q.filterProps(e),Fe={...X.filterProps(e),"onClick:clear":he},Ie=l.webkitdirectory!==void 0&&l.webkitdirectory!==!1?void 0:e.filterByType??String(l.accept);return d(Q,I({ref:S,modelValue:e.multiple?i.value:i.value[0],class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--dragging":P.value,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":U.value},e.class],style:e.style,"onClick:prepend":me},V,j,{centerAffix:!U.value,focused:c.value}),{...a,default:L=>{let{id:x,isDisabled:D,isDirty:G,isReadonly:J,isValid:Se,hasDetails:De}=L;return d(X,I({ref:E,prependIcon:e.prependIcon,onMousedown:ye,onClick:ge,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},Fe,{id:x.value,active:fe.value||G.value,dirty:G.value||e.dirty,disabled:D.value,focused:c.value,details:De.value,error:Se.value===!1,onDragover:Ve,onDrop:Ce}),{...a,default:Te=>{var W;let{props:{class:Be,...Pe}}=Te;return g(N,null,[g("input",I({ref:f,type:"file",accept:Ie,readonly:J.value,disabled:D.value,multiple:e.multiple,name:e.name,onClick:T=>{T.stopPropagation(),J.value&&T.preventDefault(),R()},onChange:we,onDragleave:ke,onFocus:R,onBlur:p},Pe,k),null),g("div",{class:Me(Be)},[!!((W=i.value)!=null&&W.length)&&!e.hideInput&&(a.selection?a.selection({fileNames:w.value,totalBytes:C.value,totalBytesReadable:b.value}):e.chips?w.value.map(T=>d(Ye,{key:T,size:"small",text:T},null)):w.value.join(", "))])])}})},details:r?L=>{var x,D;return g(N,null,[(x=a.details)==null?void 0:x.call(a,L),t&&g(N,null,[g("span",null,null),d(qe,{active:!!((D=i.value)!=null&&D.length),value:F.value,disabled:e.disabled},a.counter)])])}:void 0})}),ae({},S,E,f)}}),M=5e6,pt=oe({__name:"FileInput",props:{label:{}},emits:["update"],setup(e,{expose:o,emit:l}){const s=e,a=l,n=B(null);function u(p){return p?p.size<=M||`Taille maximale : ${M/1e6}MB`:!0}function i(){n.value&&n.value.size>M||a("update",n.value)}o({openDialog:v});const c=_e("input");function v(){re(()=>{var p;return(p=c.value)==null?void 0:p.click()})}return(p,h)=>(ue(),se(st,{label:s.label,density:"comfortable",accept:".jpg,.jpeg,.png,.pdf",multiple:!1,modelValue:n.value,"onUpdate:modelValue":[h[0]||(h[0]=C=>n.value=C),i],rules:[u],"show-size":"",ref_key:"input",ref:c},null,8,["label","modelValue","rules"]))}}),ut={class:"text-right ml-2"},mt=oe({__name:"FileCard",props:{file:{},readonly:{type:Boolean}},emits:["delete"],setup(e,{emit:o}){const l=e,s=o;return(a,n)=>(ue(),se(Ze,null,{activator:y(({props:u})=>[d(ee,I({class:"my-2"},u),{default:y(()=>[d(Ke,{cover:"",src:A(Ge)(l.file.Key),width:"56px"},null,8,["src"])]),_:1},16)]),default:y(()=>[d(ee,null,{default:y(()=>[d(Qe,{class:"px-0"},{default:y(()=>[d(Xe,{"min-width":"400",title:l.file.NomClient,subtitle:A(Y).size(l.file.Taille)},{append:y(()=>[g("div",ut,[n[1]||(n[1]=z(" téléversé le ",-1)),n[2]||(n[2]=g("br",null,null,-1)),z(" "+Ee(A(Y).time(l.file.Uploaded)),1)])]),_:1},8,["title","subtitle"])]),_:1}),d(et,null,{default:y(()=>[d(Z,{onClick:n[0]||(n[0]=u=>s("delete")),color:"red"},{default:y(()=>[...n[3]||(n[3]=[z(" Supprimer ",-1)])]),_:1}),d(tt),d(Z,{href:A(Ue)(l.file.Key)},{default:y(()=>[...n[4]||(n[4]=[z(" Télécharger ",-1)])]),_:1},8,["href"])]),_:1})]),_:1})]),_:1}))}});export{vt as V,mt as _,pt as a};
