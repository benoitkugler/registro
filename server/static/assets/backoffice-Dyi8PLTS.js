import{d as Z,c as F,a as W,F as ne,b as e,w as t,V as gl,e as b,f as Vl,g as N,h as y,i as kl,t as L,r as Cl,j as T,o as f,k as S,l as h,m as _l,n as De,u as xe,p as x,q as Re,s as Ue,v as ze,x as Le,y as Vt,z as Ve,I as Oe,A as Qt,M as Wt,B as Jt,C as Ze,E as xl,D as He,G as $e,H as ut,J as Ke,K as Fe,L as Ae,N as qe,O as Pl,P as he,Q as Gt,R as ue,S as wt,T as wl,U as Dl,W as Kt,X as Sl,Y as U,Z as Xt,_ as G,$ as ve,a0 as we,a1 as it,a2 as ye,a3 as Ce,a4 as et,a5 as Zt,a6 as Me,a7 as _e,a8 as Il,a9 as Ne,aa as Ml,ab as Al,ac as $l,ad as Ul,ae as el,af as tt,ag as Fl,ah as Rl,ai as Ll,aj as Dt,ak as hl,al as Tl,am as El,an as Ol,ao as Nl,ap as Bl,aq as ql,ar as jl,as as Yl,at as zl,au as St,av as It,aw as ft,ax as tl,ay as Hl,az as Ql,aA as yt,aB as Wl,aC as Te,aD as Jl,aE as Xe,aF as Gl,aG as Kl,aH as Xl,aI as Zl,aJ as ea,aK as ta,aL as Mt,aM as vt,aN as la,aO as aa,aP as na,aQ as ua,aR as At,aS as $t,aT as ia,aU as sa,aV as dt,aW as oa,aX as Ut,aY as ra,aZ as da,a_ as Ft,a$ as ma,b0 as ca,b1 as va}from"./VSnackbar-BIDVaiYL.js";import{c as C,V as pa,u as lt,a as st,m as ll,b as fa,i as Rt,_ as ya,d as mt,e as al,f as ba,g as at,h as ga,j as Va,k as ka,l as nl,n as Lt,o as Ca,p as _a,q as xa,r as Pa}from"./VSwitch-EDrnH9-W.js";import{V as X,a as me,b as z,c as H,d as ce,e as se,f as ie,g as je,h as Pe,i as le,j as Se,k as ke,l as Ee,m as ot,n as ht,o as ul,p as il,q as sl}from"./VTextarea-iANrb6Vp.js";import{_ as Qe,V as wa,a as Da,b as Sa,c as Tt,d as Et}from"./VTabs-4ygjv7tw.js";import{_ as We,a as Ia,V as Ma,b as Aa}from"./EventSwitch.vue_vue_type_script_setup_true_lang-D17lXQHl.js";import{_ as kt,a as $a,b as Ua,c as Fa}from"./SexeField.vue_vue_type_script_setup_true_lang-CtJusFHZ.js";import{V as Ct}from"./FileCard.vue_vue_type_script_setup_true_lang-liChz12-.js";import{V as ol}from"./filter-C0t48wCN.js";import{_ as Ra}from"./FilesRow.vue_vue_type_script_setup_true_lang-CFNSoaPS.js";import"./VSheet-DMcoa77S.js";import"./VWindowItem-BhfMufIA.js";const ct=Z({__name:"NavBar",props:{title:{},hideMenu:{type:Boolean}},setup(l){const s="/static/repere/logo.png",r="v0.5.0",c=l,a=F(()=>C.isFondsSoutien);return(o,m)=>(f(),W(ne,null,[e(pa,{app:"","model-value":!c.hideMenu,"expand-on-hover":"",permanent:"",rail:""},{append:t(()=>[e(X,{"prepend-icon":"mdi-account-circle-outline",title:a.value?"Fonds de soutien":"Administrateur"},null,8,["title"]),e(X,{"prepend-icon":"mdi-logout",link:"",to:{path:"/"},color:"primary"},{default:t(()=>[...m[3]||(m[3]=[b(" Se déconnecter ",-1)])]),_:1})]),default:t(()=>[e(X,{"prepend-icon":"mdi-menu",title:`Registro ${r}`},null,8,["title"]),e(me),e(X,{"prepend-icon":"mdi-bed",link:"",to:{path:"/camps"},color:"primary"},{default:t(()=>[...m[0]||(m[0]=[b(" Séjours ",-1)])]),_:1}),e(X,{"prepend-icon":"mdi-calendar-multiple-check",link:"",to:{path:"/inscriptions"},color:"primary"},{default:t(()=>[...m[1]||(m[1]=[b(" Inscriptions ",-1)])]),_:1}),e(me),e(X,{"prepend-icon":"mdi-account-multiple",link:"",to:{path:"/annuaire"},color:"primary"},{default:t(()=>[...m[2]||(m[2]=[b(" Annuaire ",-1)])]),_:1}),e(me)]),_:1},8,["model-value"]),e(gl,{rounded:"",elevation:"4",color:"secondary"},{append:t(()=>[Cl(o.$slots,"default"),m[4]||(m[4]=T("div",{class:"mr-2"},null,-1))]),default:t(()=>[e(Vl,null,{default:t(()=>[e(N,null,{default:t(()=>[e(y,{"align-self":"center",cols:"auto"},{default:t(()=>[e(kl,{width:"60",src:s})]),_:1}),e(y,{"align-self":"center"},{default:t(()=>[b(L(c.title),1)]),_:1})]),_:1})]),_:1})]),_:3})],64))}}),La=Z({__name:"index",setup(l){const s=lt(),r=S(!1),c=S(""),a=S([]);async function o(){const m=await C.Loggin({password:c.value});m!==void 0&&(m.IsValid?(C.setToken(m.Token,m.IsFondSoutien),C.showMessage("Bienvenue !"),s.push({path:"/inscriptions"})):a.value=["Clé de connection incorrecte."])}return(m,n)=>(f(),W(ne,null,[e(ct,{title:"Connection au backoffice","hide-menu":""}),e(_l,{class:"fill-height"},{default:t(()=>[e(z,{class:"mx-auto",width:"400px"},{default:t(()=>[e(H,null,{default:t(()=>[e(ce,{label:"Clé de connection",modelValue:c.value,"onUpdate:modelValue":n[1]||(n[1]=u=>c.value=u),"error-messages":a.value,type:r.value?void 0:"password",name:"password"},{"append-inner":t(()=>[e(h,{class:"ml-2",size:"small",icon:r.value?"mdi-eye":"mdi-eye-off",flat:"",onClick:n[0]||(n[0]=u=>r.value=!r.value)},null,8,["icon"])]),_:1},8,["modelValue","error-messages","type"])]),_:1}),e(se,null,{default:t(()=>[e(ie),e(h,{disabled:!c.value.length,onClick:o},{default:t(()=>[...n[2]||(n[2]=[b("Se connecter",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})],64))}}),_t=Z({__name:"BoolField",props:De({label:{},hideDetails:{type:Boolean},readonly:{type:Boolean},density:{},persistentHint:{type:Boolean},hint:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=l,r=xe(l,"modelValue");return(c,a)=>(f(),x(je,{label:s.label,"model-value":r.value,"onUpdate:modelValue":a[0]||(a[0]=o=>r.value=o||!1),"hide-details":s.hideDetails,readonly:s.readonly,density:s.density,"persistent-hint":s.persistentHint,hint:s.hint},null,8,["label","model-value","hide-details","readonly","density","persistent-hint","hint"]))}}),rl=Ue({active:{type:[String,Array],default:void 0},controlHeight:[Number,String],disabled:{type:[Boolean,String,Array],default:null},nextIcon:{type:Oe,default:"$next"},prevIcon:{type:Oe,default:"$prev"},modeIcon:{type:Oe,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),Ot=Re()({name:"VDatePickerControls",props:rl(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(l,s){let{emit:r}=s;const{t:c}=ze(),a=F(()=>Array.isArray(l.disabled)?l.disabled.includes("text"):!!l.disabled),o=F(()=>Array.isArray(l.disabled)?l.disabled.includes("mode"):!!l.disabled),m=F(()=>Array.isArray(l.disabled)?l.disabled.includes("prev"):!!l.disabled),n=F(()=>Array.isArray(l.disabled)?l.disabled.includes("next"):!!l.disabled);function u(){r("click:prev")}function i(){r("click:next")}function d(){r("click:year")}function p(){r("click:month")}return Le(()=>T("div",{class:Ve(["v-date-picker-controls"]),style:{"--v-date-picker-controls-height":Vt(l.controlHeight)}},[e(h,{class:"v-date-picker-controls__month-btn","data-testid":"month-btn",disabled:a.value,text:l.text,variant:"text",rounded:!0,onClick:p},null),e(h,{class:"v-date-picker-controls__mode-btn","data-testid":"year-btn",disabled:o.value,density:"comfortable",icon:l.modeIcon,variant:"text","aria-label":c("$vuetify.datePicker.ariaLabel.selectYear"),onClick:d},null),e(ie,null,null),T("div",{class:"v-date-picker-controls__month"},[e(h,{"data-testid":"prev-month",disabled:m.value,density:"comfortable",icon:l.prevIcon,variant:"text","aria-label":c("$vuetify.datePicker.ariaLabel.previousMonth"),onClick:u},null),e(h,{"data-testid":"next-month",disabled:n.value,icon:l.nextIcon,density:"comfortable",variant:"text","aria-label":c("$vuetify.datePicker.ariaLabel.nextMonth"),onClick:i},null)])])),{}}}),ha=Ue({appendIcon:Oe,color:String,header:String,transition:String,onClick:xl()},"VDatePickerHeader"),Nt=Re()({name:"VDatePickerHeader",props:ha(),emits:{click:()=>!0,"click:append":()=>!0},setup(l,s){let{emit:r,slots:c}=s;const{backgroundColorClasses:a,backgroundColorStyles:o}=Qt(()=>l.color);function m(){r("click")}function n(){r("click:append")}return Le(()=>{const u=!!(c.default||l.header),i=!!(c.append||l.appendIcon);return T("div",{class:Ve(["v-date-picker-header",{"v-date-picker-header--clickable":!!l.onClick},a.value]),style:Ze(o.value),onClick:m},[c.prepend&&T("div",{key:"prepend",class:"v-date-picker-header__prepend"},[c.prepend()]),u&&e(Wt,{key:"content",name:l.transition},{default:()=>[T("div",{key:l.header,class:"v-date-picker-header__content"},[c.default?.()??l.header])]}),i&&T("div",{class:"v-date-picker-header__append"},[c.append?e(Jt,{key:"append-defaults",disabled:!l.appendIcon,defaults:{VBtn:{icon:l.appendIcon,variant:"text"}}},{default:()=>[c.append?.()]}):e(h,{key:"append-btn",icon:l.appendIcon,variant:"text",onClick:n},null)])])}),{}}}),Ta=Ue({allowedDates:[Array,Function],disabled:{type:Boolean,default:null},displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:{type:[Number,String],default:void 0},firstDayOfYear:{type:[Number,String],default:void 0},weekdayFormat:String},"calendar");function Ea(l){const s=He(),r=$e(l,"modelValue",[],P=>ut(P).map(w=>s.date(w))),c=F(()=>l.displayValue?s.date(l.displayValue):r.value.length>0?s.date(r.value[0]):l.min?s.date(l.min):Array.isArray(l.allowedDates)?s.date(l.allowedDates[0]):s.date()),a=$e(l,"year",void 0,P=>{const w=P!=null?Number(P):s.getYear(c.value);return s.startOfYear(s.setYear(s.date(),w))},P=>s.getYear(P)),o=$e(l,"month",void 0,P=>{const w=P!=null?Number(P):s.getMonth(c.value),g=s.setYear(s.startOfMonth(s.date()),s.getYear(a.value));return s.setMonth(g,w)},P=>s.getMonth(P)),m=F(()=>{const P=s.toJsDate(s.startOfWeek(s.date(),l.firstDayOfWeek)).getDay();return s.getWeekdays(l.firstDayOfWeek,l.weekdayFormat).filter((w,g)=>l.weekdays.includes((g+P)%7))}),n=F(()=>{const P=s.getWeekArray(o.value,l.firstDayOfWeek),w=P.flat(),g=6*7;if(l.weeksInMonth==="static"&&w.length<g){const V=w[w.length-1];let D=[];for(let q=1;q<=g-w.length;q++)D.push(s.addDays(V,q)),q%7===0&&(P.push(D),D=[])}return P});function u(P,w){return P.filter(g=>l.weekdays.includes(s.toJsDate(g).getDay())).map((g,V)=>{const D=s.toISO(g),q=!s.isSameMonth(g,o.value),O=s.isSameDay(g,s.startOfMonth(o.value)),k=s.isSameDay(g,s.endOfMonth(o.value)),_=s.isSameDay(g,o.value),te=l.weekdays.length;return{date:g,formatted:s.format(g,"keyboardDate"),isAdjacent:q,isDisabled:v(g),isEnd:k,isHidden:q&&!l.showAdjacentMonths,isSame:_,isSelected:r.value.some(be=>s.isSameDay(g,be)),isStart:O,isToday:s.isSameDay(g,w),isWeekEnd:V%te===te-1,isWeekStart:V%te===0,isoDate:D,localized:s.format(g,"dayOfMonth"),month:s.getMonth(g),year:s.getYear(g)}})}const i=F(()=>{const P=s.startOfWeek(c.value,l.firstDayOfWeek),w=[];for(let V=0;V<=6;V++)w.push(s.addDays(P,V));const g=s.date();return u(w,g)}),d=F(()=>{const P=n.value.flat(),w=s.date();return u(P,w)}),p=F(()=>n.value.map(P=>P.length?s.getWeek(P[0],l.firstDayOfWeek,l.firstDayOfYear):null));function v(P){if(l.disabled)return!0;const w=s.date(P);return l.min&&s.isBefore(s.endOfDay(w),s.date(l.min))||l.max&&s.isAfter(w,s.date(l.max))?!0:Array.isArray(l.allowedDates)&&l.allowedDates.length>0?!l.allowedDates.some(g=>s.isSameDay(s.date(g),w)):typeof l.allowedDates=="function"?!l.allowedDates(w):!1}return{displayValue:c,daysInMonth:d,daysInWeek:i,genDays:u,model:r,weeksInMonth:n,weekdayLabels:m,weekNumbers:p}}const dl=Ue({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...qe(Ta(),["displayValue"])},"VDatePickerMonth"),Bt=Re()({name:"VDatePickerMonth",props:dl(),emits:{"update:modelValue":l=>!0,"update:month":l=>!0,"update:year":l=>!0},setup(l,s){let{emit:r,slots:c}=s;const a=S(),{t:o}=ze(),{daysInMonth:m,model:n,weekNumbers:u,weekdayLabels:i}=Ea(l),d=He(),p=Ke(),v=Ke(),P=Ke(!1),w=Fe(()=>P.value?l.reverseTransition:l.transition);l.multiple==="range"&&n.value.length>0&&(p.value=n.value[0],n.value.length>1&&(v.value=n.value[n.value.length-1]));const g=F(()=>{const k=["number","string"].includes(typeof l.multiple)?Number(l.multiple):1/0;return n.value.length>=k});Ae(m,(k,_)=>{_&&(P.value=d.isBefore(k[0].date,_[0].date))});function V(k){const _=d.startOfDay(k);if(n.value.length===0?p.value=void 0:n.value.length===1&&(p.value=n.value[0],v.value=void 0),!p.value)p.value=_,n.value=[p.value];else if(v.value)p.value=k,v.value=void 0,n.value=[p.value];else{if(d.isSameDay(_,p.value)){p.value=void 0,n.value=[];return}else d.isBefore(_,p.value)?(v.value=d.endOfDay(p.value),p.value=_):v.value=d.endOfDay(_);n.value=Pl(d,p.value,v.value)}}function D(k){const _=d.format(k.date,"fullDateWithWeekday"),te=k.isToday?"currentDate":"selectDate";return o(`$vuetify.datePicker.ariaLabel.${te}`,_)}function q(k){const _=n.value.findIndex(te=>d.isSameDay(te,k));if(_===-1)n.value=[...n.value,k];else{const te=[...n.value];te.splice(_,1),n.value=te}}function O(k){l.multiple==="range"?V(k):l.multiple?q(k):n.value=[k]}Le(()=>T("div",{class:"v-date-picker-month",style:{"--v-date-picker-days-in-week":l.weekdays.length}},[l.showWeek&&T("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!l.hideWeekdays&&T("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[b(" ")]),u.value.map(k=>T("div",{class:Ve(["v-date-picker-month__day","v-date-picker-month__day--adjacent"])},[k]))]),e(Wt,{name:w.value},{default:()=>[T("div",{ref:a,key:m.value[0].date?.toString(),class:"v-date-picker-month__days"},[!l.hideWeekdays&&i.value.map(k=>T("div",{class:Ve(["v-date-picker-month__day","v-date-picker-month__weekday"])},[k])),m.value.map((k,_)=>{const te={props:{class:"v-date-picker-month__day-btn",color:k.isSelected||k.isToday?l.color:void 0,disabled:k.isDisabled,icon:!0,ripple:!1,text:k.localized,variant:k.isSelected?"flat":k.isToday?"outlined":"text","aria-label":D(k),"aria-current":k.isToday?"date":void 0,onClick:()=>O(k.date)},item:k,i:_};return g.value&&!k.isSelected&&(k.isDisabled=!0),T("div",{class:Ve(["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":k.isAdjacent,"v-date-picker-month__day--hide-adjacent":k.isHidden,"v-date-picker-month__day--selected":k.isSelected,"v-date-picker-month__day--week-end":k.isWeekEnd,"v-date-picker-month__day--week-start":k.isWeekStart}]),"data-v-date":k.isDisabled?void 0:k.isoDate},[(l.showAdjacentMonths||!k.isAdjacent)&&(c.day?.(te)??e(h,te.props,null))])})])]})]))}}),ml=Ue({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number,allowedMonths:[Array,Function]},"VDatePickerMonths"),qt=Re()({name:"VDatePickerMonths",props:ml(),emits:{"update:modelValue":l=>!0},setup(l,s){let{emit:r,slots:c}=s;const a=He(),o=$e(l,"modelValue"),m=F(()=>{let u=a.startOfYear(a.date());return l.year&&(u=a.setYear(u,l.year)),he(12).map(i=>{const d=a.format(u,"monthShort"),p=a.format(u,"month"),v=!!(!n(i)||l.min&&a.isAfter(a.startOfMonth(a.date(l.min)),u)||l.max&&a.isAfter(u,a.startOfMonth(a.date(l.max))));return u=a.getNextMonth(u),{isDisabled:v,text:d,label:p,value:i}})});Gt(()=>{o.value=o.value??a.getMonth(a.date())});function n(u){return Array.isArray(l.allowedMonths)&&l.allowedMonths.length?l.allowedMonths.includes(u):typeof l.allowedMonths=="function"?l.allowedMonths(u):!0}return Le(()=>T("div",{class:"v-date-picker-months",style:{height:Vt(l.height)}},[T("div",{class:"v-date-picker-months__content"},[m.value.map((u,i)=>{const d={active:o.value===i,ariaLabel:u.label,color:o.value===i?l.color:void 0,disabled:u.isDisabled,rounded:!0,text:u.text,variant:o.value===u.value?"flat":"text",onClick:()=>p(i)};function p(v){if(o.value===v){r("update:modelValue",o.value);return}o.value=v}return c.month?.({month:u,i,props:d})??e(h,ue({key:"month"},d),null)})])])),{}}}),cl=Ue({color:String,height:[String,Number],min:null,max:null,modelValue:Number,allowedYears:[Array,Function]},"VDatePickerYears"),jt=Re()({name:"VDatePickerYears",props:cl(),directives:{vIntersect:wt},emits:{"update:modelValue":l=>!0},setup(l,s){let{emit:r,slots:c}=s;const a=He(),o=$e(l,"modelValue"),m=F(()=>{const d=a.getYear(a.date());let p=d-100,v=d+52;l.min&&(p=a.getYear(a.date(l.min))),l.max&&(v=a.getYear(a.date(l.max)));let P=a.startOfYear(a.date());return P=a.setYear(P,p),he(v-p+1,p).map(w=>{const g=a.format(P,"year");return P=a.setYear(P,a.getYear(P)+1),{text:g,value:w,isDisabled:!i(w)}})});Gt(()=>{o.value=o.value??a.getYear(a.date())});const n=wl();function u(){n.el?.focus(),n.el?.scrollIntoView({block:"center"})}function i(d){return Array.isArray(l.allowedYears)&&l.allowedYears.length?l.allowedYears.includes(d):typeof l.allowedYears=="function"?l.allowedYears(d):!0}return Le(()=>Dl(T("div",{class:"v-date-picker-years",style:{height:Vt(l.height)}},[T("div",{class:"v-date-picker-years__content"},[m.value.map((d,p)=>{const v={ref:o.value===d.value?n:void 0,active:o.value===d.value,color:o.value===d.value?l.color:void 0,rounded:!0,text:d.text,disabled:d.isDisabled,variant:o.value===d.value?"flat":"text",onClick:()=>{if(o.value===d.value){r("update:modelValue",o.value);return}o.value=d.value}};return c.year?.({year:d,i:p,props:v})??e(h,ue({key:"month"},v),null)})])]),[[wt,{handler:u},null,{once:!0}]])),{}}}),Oa=Ue({header:{type:String,default:"$vuetify.datePicker.header"},headerColor:String,...rl(),...dl({weeksInMonth:"static"}),...qe(ml(),["modelValue"]),...qe(cl(),["modelValue"]),...ll({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),Na=Re()({name:"VDatePicker",props:Oa(),emits:{"update:modelValue":l=>!0,"update:month":l=>!0,"update:year":l=>!0,"update:viewMode":l=>!0},setup(l,s){let{emit:r,slots:c}=s;const a=He(),{t:o}=ze(),{rtlClasses:m}=Kt(),n=$e(l,"modelValue",void 0,A=>ut(A).map(I=>a.date(I)),A=>l.multiple?A:A[0]),u=$e(l,"viewMode"),i=F(()=>{const A=a.date(l.min);return l.min&&a.isValid(A)?A:null}),d=F(()=>{const A=a.date(l.max);return l.max&&a.isValid(A)?A:null}),p=F(()=>{const A=a.date();let I=A;return n.value?.[0]?I=a.date(n.value[0]):i.value&&a.isBefore(A,i.value)?I=i.value:d.value&&a.isAfter(A,d.value)&&(I=d.value),I&&a.isValid(I)?I:A}),v=Fe(()=>l.headerColor??l.color),P=$e(l,"month"),w=F({get:()=>Number(P.value??a.getMonth(a.startOfMonth(p.value))),set:A=>P.value=A}),g=$e(l,"year"),V=F({get:()=>Number(g.value??a.getYear(a.startOfYear(a.setMonth(p.value,w.value)))),set:A=>g.value=A}),D=Ke(!1),q=F(()=>l.multiple&&n.value.length>1?o("$vuetify.datePicker.itemsSelected",n.value.length):n.value[0]&&a.isValid(n.value[0])?a.format(a.date(n.value[0]),"normalDateWithWeekday"):o(l.header)),O=F(()=>{let A=a.date();return A=a.setDate(A,1),A=a.setMonth(A,w.value),A=a.setYear(A,V.value),a.format(A,"monthAndYear")}),k=Fe(()=>`date-picker-header${D.value?"-reverse":""}-transition`),_=F(()=>{if(l.disabled)return!0;const A=[];if(u.value!=="month")A.push("prev","next");else{let I=a.date();if(I=a.startOfMonth(I),I=a.setMonth(I,w.value),I=a.setYear(I,V.value),i.value){const B=a.addDays(a.startOfMonth(I),-1);a.isAfter(i.value,B)&&A.push("prev")}if(d.value){const B=a.addDays(a.endOfMonth(I),1);a.isAfter(B,d.value)&&A.push("next")}}return A}),te=F(()=>l.allowedYears||M),be=F(()=>l.allowedMonths||ee);function Q(A,I){const B=l.allowedDates;if(typeof B!="function")return!0;const ae=a.getDiff(I,A,"days");for(let ge=0;ge<ae;ge++)if(B(a.addDays(A,ge)))return!0;return!1}function M(A){if(typeof l.allowedDates=="function"){const I=a.parseISO(`${A}-01-01`);return Q(I,a.endOfYear(I))}if(Array.isArray(l.allowedDates)&&l.allowedDates.length){for(const I of l.allowedDates)if(a.getYear(a.date(I))===A)return!0;return!1}return!0}function ee(A){if(typeof l.allowedDates=="function"){const I=String(A+1).padStart(2,"0"),B=a.parseISO(`${V.value}-${I}-01`);return Q(B,a.endOfMonth(B))}if(Array.isArray(l.allowedDates)&&l.allowedDates.length){for(const I of l.allowedDates)if(a.getYear(a.date(I))===V.value&&a.getMonth(a.date(I))===A)return!0;return!1}return!0}function J(){w.value<11?w.value++:(V.value++,w.value=0,oe()),$()}function E(){w.value>0?w.value--:(V.value--,w.value=11,oe()),$()}function K(){u.value="month"}function pe(){u.value=u.value==="months"?"month":"months"}function j(){u.value=u.value==="year"?"month":"year"}function $(){u.value==="months"&&pe()}function oe(){u.value==="year"&&j()}return Ae(n,(A,I)=>{const B=ut(I),ae=ut(A);if(!ae.length)return;const ge=a.date(B[B.length-1]),fe=a.date(ae[ae.length-1]),Ie=a.getMonth(fe),R=a.getYear(fe);Ie!==w.value&&(w.value=Ie,$()),R!==V.value&&(V.value=R,oe()),D.value=a.isBefore(ge,fe)}),Le(()=>{const A=st.filterProps(l),I=Ot.filterProps(l),B=Nt.filterProps(l),ae=Bt.filterProps(l),ge=qe(qt.filterProps(l),["modelValue"]),fe=qe(jt.filterProps(l),["modelValue"]),Ie={color:v.value,header:q.value,transition:k.value};return e(st,ue(A,{color:v.value,class:["v-date-picker",`v-date-picker--${u.value}`,{"v-date-picker--show-week":l.showWeek},m.value,l.class],style:l.style}),{title:()=>c.title?.()??T("div",{class:"v-date-picker__title"},[o(l.title)]),header:()=>c.header?e(Jt,{defaults:{VDatePickerHeader:{...Ie}}},{default:()=>[c.header?.(Ie)]}):e(Nt,ue({key:"header"},B,Ie,{onClick:u.value!=="month"?K:void 0}),{prepend:c.prepend,append:c.append}),default:()=>T(ne,null,[e(Ot,ue(I,{disabled:_.value,text:O.value,"onClick:next":J,"onClick:prev":E,"onClick:month":pe,"onClick:year":j}),null),e(Sl,{hideOnLeave:!0},{default:()=>[u.value==="months"?e(qt,ue({key:"date-picker-months"},ge,{modelValue:w.value,"onUpdate:modelValue":[R=>w.value=R,$],min:i.value,max:d.value,year:V.value,allowedMonths:be.value}),{month:c.month}):u.value==="year"?e(jt,ue({key:"date-picker-years"},fe,{modelValue:V.value,"onUpdate:modelValue":[R=>V.value=R,oe],min:i.value,max:d.value,allowedYears:te.value}),{year:c.year}):e(Bt,ue({key:"date-picker-month"},ae,{modelValue:n.value,"onUpdate:modelValue":R=>n.value=R,month:w.value,"onUpdate:month":[R=>w.value=R,$],year:V.value,"onUpdate:year":[R=>V.value=R,oe],min:i.value,max:d.value}),{day:c.day})]})]),actions:c.actions})}),{}}}),Ba=Z({__name:"DateField",props:De({label:{},hideDetails:{type:Boolean},readonly:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=l,r=xe(l,"modelValue"),c=He();function a(m){o.value=!1,r.value=Xt(m)}const o=S(!1);return(m,n)=>s.readonly?(f(),x(ce,{key:0,class:"center-text",variant:"outlined",density:"compact","hide-details":s.hideDetails,label:s.label,"model-value":U(c).parseISO(r.value).toLocaleDateString(),readonly:""},null,8,["hide-details","label","model-value"])):(f(),x(Pe,{key:1,"close-on-content-click":!1,modelValue:o.value,"onUpdate:modelValue":n[1]||(n[1]=u=>o.value=u)},{activator:t(({props:u})=>[e(ce,ue({class:"center-text"},u,{variant:"outlined",density:"compact","hide-details":s.hideDetails,label:s.label,"model-value":U(c).parseISO(r.value).toLocaleDateString()}),null,16,["hide-details","label","model-value"])]),default:t(()=>[e(Na,{"model-value":U(c).parseISO(r.value),"onUpdate:modelValue":n[0]||(n[0]=u=>a(u))},null,8,["model-value"])]),_:1},8,["modelValue"]))}}),vl=kt(Ba,[["__scopeId","data-v-1e184428"]]),qa=Z({__name:"OptionStatut",props:De({camp:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=l,r=xe(l,"modelValue");function c(){const m=r.value?.length?r.value.map(i=>i.Id):[0],u={Id:Math.max(...m)+1,Label:"",Description:"",Prix:s.camp.Prix.Cent};r.value=(r.value||[]).concat(u),a.value=u}const a=S(null);function o(m){r.value=(r.value||[]).filter(n=>n.Id!=m.Id)}return(m,n)=>{const u=We;return f(),x(z,{subtitle:"Le prix dépend du statut du participant, à choisir parmi la liste ci-dessous."},{append:t(()=>[e(h,{icon:"",size:"x-small",onClick:c},{default:t(()=>[e(ye,{color:"green"},{default:t(()=>[...n[4]||(n[4]=[b("mdi-plus",-1)])]),_:1})]),_:1})]),default:t(()=>[a.value!=null?(f(),x(le,{key:0,"model-value":a.value!=null,"onUpdate:modelValue":n[3]||(n[3]=i=>a.value=null),"max-width":"500px"},{default:t(()=>[e(z,{title:"Modifier le statut"},{default:t(()=>[e(H,null,{default:t(()=>[e(N,null,{default:t(()=>[e(y,{cols:"12"},{default:t(()=>[e(ce,{autofocus:"",label:"Statut",modelValue:a.value.Label,"onUpdate:modelValue":n[0]||(n[0]=i=>a.value.Label=i),density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(y,{cols:"12"},{default:t(()=>[e(ce,{label:"Description",modelValue:a.value.Description,"onUpdate:modelValue":n[1]||(n[1]=i=>a.value.Description=i),density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(y,{cols:"12"},{default:t(()=>[e(u,{"model-value":{Cent:a.value.Prix,Currency:s.camp.Prix.Currency},"onUpdate:modelValue":n[2]||(n[2]=i=>a.value.Prix=i.Cent),label:"Prix","readonly-currency":""},null,8,["model-value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])):G("",!0),e(H,{class:"py-0"},{default:t(()=>[e(Se,null,{default:t(()=>[r.value?.length?G("",!0):(f(),x(X,{key:0},{default:t(()=>[...n[5]||(n[5]=[T("i",null,"Aucun statut n'est encore défini.",-1)])]),_:1})),(f(!0),W(ne,null,ve(r.value,i=>(f(),x(X,{title:i.Label,subtitle:i.Description,onClick:d=>a.value=i},{append:t(()=>[e(N,null,{default:t(()=>[e(y,{"align-self":"center"},{default:t(()=>[e(ke,null,{default:t(()=>[b(L(U(we).montant({Cent:i.Prix,Currency:l.camp.Prix.Currency})),1)]),_:2},1024)]),_:2},1024),e(y,{"align-self":"center",cols:"auto"},{default:t(()=>[e(h,{icon:"",size:"x-small",class:"my-1",onClick:it(d=>o(i),["stop"])},{default:t(()=>[e(ye,{color:"red"},{default:t(()=>[...n[6]||(n[6]=[b("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["title","subtitle","onClick"]))),256))]),_:1})]),_:1})]),_:1})}}}),ja=Z({__name:"OptionJournee",props:De({camp:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=l,r=xe(l,"modelValue");Ae(()=>r.value,c,{immediate:!0});function c(){const o=s.camp.Duree;r.value?.length!=o&&(r.value=Array.from({length:o}).map(m=>0))}function a(){const o=r.value,m=o[0];for(let n=0;n<o.length;n++)o[n]=m}return(o,m)=>{const n=We;return f(),x(z,{subtitle:"Le prix est variable en fonction des jours de participation au camp."},{append:t(()=>[e(Ct,{text:"Appliquer le prix du premier jour à tous."},{activator:t(({props:u})=>[e(h,ue(u,{icon:"mdi-arrow-expand",size:"x-small",disabled:!(r.value||[])[0],onClick:a}),null,16,["disabled"])]),_:1})]),default:t(()=>[e(H,null,{default:t(()=>[e(N,null,{default:t(()=>[(f(!0),W(ne,null,ve(r.value,(u,i)=>(f(),x(y,{cols:"3"},{default:t(()=>[e(n,{label:`Jour ${i+1}`,"model-value":{Cent:u,Currency:s.camp.Prix.Currency},"onUpdate:modelValue":d=>r.value[i]=d.Cent,"readonly-currency":""},null,8,["label","model-value","onUpdate:modelValue"])]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})}}}),Ya={key:0,class:"text-center"},za=Z({__name:"CampOptionsPrix",props:De({camp:{}},{optionPrix:{required:!0},optionPrixModifiers:{},optionQf:{required:!0},optionQfModifiers:{}}),emits:["update:optionPrix","update:optionQf"],setup(l){const s=l,r=xe(l,"optionPrix"),c=xe(l,"optionQf"),a=F(()=>Ce.isQuotientFamilialActive(c.value)),o=et(Zt);return(m,n)=>{const u=Qe;return f(),x(z,{title:"Options sur le prix",subtitle:"Permet de modifier le prix de base du séjour",width:"1000px"},{default:t(()=>[e(H,null,{default:t(()=>[e(N,null,{default:t(()=>[e(y,{"align-self":"center"},{default:t(()=>[e(je,{"model-value":a.value,"onUpdate:modelValue":n[0]||(n[0]=i=>c.value[3]=i?100:0),"hide-details":"",label:"Prix au quotient familial"},null,8,["model-value"])]),_:1}),e(y,{"align-self":"center"},{default:t(()=>[e(u,{suffix:"%",min:0,max:100,disabled:!a.value,"hide-details":"","readonly-currency":"",label:"entre 1 et 359",modelValue:c.value[0],"onUpdate:modelValue":n[1]||(n[1]=i=>c.value[0]=i)},null,8,["disabled","modelValue"])]),_:1}),e(y,{"align-self":"center"},{default:t(()=>[e(u,{suffix:"%",min:0,max:100,disabled:!a.value,"hide-details":"","readonly-currency":"",label:"entre 360 et 564",modelValue:c.value[1],"onUpdate:modelValue":n[2]||(n[2]=i=>c.value[1]=i)},null,8,["disabled","modelValue"])]),_:1}),e(y,{"align-self":"center"},{default:t(()=>[e(u,{suffix:"%",min:0,max:100,disabled:!a.value,"hide-details":"","readonly-currency":"",label:"entre 565 et 714",modelValue:c.value[2],"onUpdate:modelValue":n[3]||(n[3]=i=>c.value[2]=i)},null,8,["disabled","modelValue"])]),_:1}),e(y,{"align-self":"center"},{default:t(()=>[e(u,{suffix:"%",min:0,max:100,disabled:!0,"hide-details":"","readonly-currency":"",label:"plus de 715",modelValue:c.value[3],"onUpdate:modelValue":n[4]||(n[4]=i=>c.value[3]=i)},null,8,["modelValue"])]),_:1})]),_:1}),e(me,{thickness:"1",class:"my-2"}),e(N,{class:"my-2"},{default:t(()=>[e(y,{"align-self":"center",cols:"4"},{default:t(()=>[e(Ee,{variant:"outlined",density:"comfortable","hide-details":"",items:U(o),label:"Option sur le prix",modelValue:r.value.Active,"onUpdate:modelValue":n[5]||(n[5]=i=>r.value.Active=i)},null,8,["items","modelValue"])]),_:1}),e(y,{"align-self":"center"},{default:t(()=>[r.value.Active==U(Me).NoOption?(f(),W("div",Ya,[...n[8]||(n[8]=[T("i",null,"Aucune modification sur le prix de base.",-1)])])):r.value.Active==U(Me).PrixStatut?(f(),x(qa,{key:1,camp:s.camp,modelValue:r.value.Statuts,"onUpdate:modelValue":n[6]||(n[6]=i=>r.value.Statuts=i)},null,8,["camp","modelValue"])):r.value.Active==U(Me).PrixJour?(f(),x(ja,{key:2,camp:s.camp,modelValue:r.value.Jours,"onUpdate:modelValue":n[7]||(n[7]=i=>r.value.Jours=i)},null,8,["camp","modelValue"])):G("",!0)]),_:1})]),_:1})]),_:1})]),_:1})}}}),Ha=Z({__name:"CampMetaEdit",props:{meta:{}},emits:["save"],setup(l,{emit:s}){const r=l,c=s,a=S(Object.entries(r.meta||{}));function o(){const n=Object.fromEntries(a.value);c("save",n)}const m=F(()=>{const n=a.value.map(i=>i[0]);return n.includes("")?!0:new Set(n).size!=a.value.length});return(n,u)=>(f(),x(z,{title:"Modifier les métadonnées",subtitle:"Ces données sont exposées sur l'API publique des camps ouverts aux inscriptions."},{append:t(()=>[e(h,{size:"small",class:"ml-2",onClick:u[0]||(u[0]=i=>a.value.push(["",""]))},{prepend:t(()=>[e(ye,{color:"green"},{default:t(()=>[...u[1]||(u[1]=[b("mdi-plus",-1)])]),_:1})]),default:t(()=>[u[2]||(u[2]=b(" Ajouter une valeur",-1))]),_:1})]),default:t(()=>[e(H,{class:"pt-2"},{default:t(()=>[(f(!0),W(ne,null,ve(a.value,(i,d)=>(f(),x(N,null,{default:t(()=>[e(y,{cols:"4"},{default:t(()=>[e(ce,{variant:"outlined",density:"compact","hide-details":"",label:"Clé",modelValue:i[0],"onUpdate:modelValue":p=>i[0]=p},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(y,null,{default:t(()=>[e(ce,{variant:"outlined",density:"compact","hide-details":"",label:"Valeur",modelValue:i[1],"onUpdate:modelValue":p=>i[1]=p},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(y,{cols:"auto"},{default:t(()=>[e(h,{icon:"",size:"small",flat:"",onClick:p=>a.value.splice(d,1)},{default:t(()=>[e(ye,{color:"red"},{default:t(()=>[...u[3]||(u[3]=[b("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),256))]),_:1}),e(se,null,{default:t(()=>[e(ie),e(h,{disabled:m.value,onClick:o},{default:t(()=>[...u[4]||(u[4]=[b(" Valider",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1}))}}),Qa=Z({__name:"CampEdit",props:{camp:{}},emits:["save"],setup(l,{emit:s}){const r=l,c=s,a=S(_e(r.camp)),o=F(()=>new Date(a.value.DateDebut).getFullYear()>=2020&&a.value.Places>=1&&a.value.Nom!=""&&a.value.AgeMax>=a.value.AgeMin&&a.value.OptionQuotientFamilial.every(i=>0<=i&&i<=100)&&!(a.value.OptionPrix.Active==Me.PrixStatut&&!a.value.OptionPrix.Statuts?.length)&&!(a.value.OptionPrix.Active==Me.PrixJour&&a.value.OptionPrix.Jours?.length!=a.value.Duree)),m=et(Il),n=S(!1);function u(i){const d=Ce.isQuotientFamilialActive(i.OptionQuotientFamilial),p=i.OptionPrix.Active!=Me.NoOption;if(!d&&!p)return"Aucune";const v=[];return Ce.isQuotientFamilialActive(i.OptionQuotientFamilial)&&v.push("Quotient familial"),i.OptionPrix.Active!=Me.NoOption&&v.push(Zt[i.OptionPrix.Active]),v.join(", ")}return(i,d)=>{const p=vl,v=Qe,P=We,w=_t;return f(),x(z,{title:"Editer les paramètres du séjour"},{default:t(()=>[e(H,null,{default:t(()=>[e(ol,null,{default:t(()=>[e(N,null,{default:t(()=>[e(y,null,{default:t(()=>[e(ce,{autofocus:"","hide-details":"",label:"Nom",density:"compact",variant:"outlined",modelValue:a.value.Nom,"onUpdate:modelValue":d[0]||(d[0]=g=>a.value.Nom=g)},null,8,["modelValue"])]),_:1}),e(y,null,{default:t(()=>[e(ce,{"hide-details":"",label:"Lieu",density:"compact",variant:"outlined",modelValue:a.value.Lieu,"onUpdate:modelValue":d[1]||(d[1]=g=>a.value.Lieu=g)},null,8,["modelValue"])]),_:1}),e(y,null,{default:t(()=>[e(ce,{"hide-details":"",label:"Numéro d'agrément",density:"compact",variant:"outlined",modelValue:a.value.Agrement,"onUpdate:modelValue":d[2]||(d[2]=g=>a.value.Agrement=g)},null,8,["modelValue"])]),_:1}),e(y,null,{default:t(()=>[e(Ee,{label:"Ouverture aux inscriptions",variant:"outlined",density:"compact",items:U(m),"hide-details":"",modelValue:a.value.Statut,"onUpdate:modelValue":d[3]||(d[3]=g=>a.value.Statut=g)},null,8,["items","modelValue"])]),_:1})]),_:1}),e(N,null,{default:t(()=>[e(y,{"align-self":"center",cols:"2"},{default:t(()=>[e(p,{modelValue:a.value.DateDebut,"onUpdate:modelValue":d[4]||(d[4]=g=>a.value.DateDebut=g),label:"Date de début","hide-details":""},null,8,["modelValue"])]),_:1}),e(y,{"align-self":"center",cols:"2"},{default:t(()=>[e(v,{label:"Durée (en jours)",modelValue:a.value.Duree,"onUpdate:modelValue":d[5]||(d[5]=g=>a.value.Duree=g),"hide-details":""},null,8,["modelValue"])]),_:1}),e(y,{"align-self":"center",cols:"2"},{default:t(()=>[e(p,{"model-value":U(Ce).dateFin(a.value),label:"Date de fin",readonly:"","hide-details":""},null,8,["model-value"])]),_:1}),e(y,{"align-self":"center",cols:"3"},{default:t(()=>[e(P,{label:"Prix",modelValue:a.value.Prix,"onUpdate:modelValue":d[6]||(d[6]=g=>a.value.Prix=g),"hide-details":""},null,8,["modelValue"])]),_:1}),e(y,{"align-self":"center",cols:"3",class:"text-center"},{default:t(()=>[e(Pe,{"close-on-content-click":!1},{activator:t(({props:g})=>[e(ce,ue(g,{readonly:"",label:"Option sur le prix",variant:"outlined",density:"compact","hide-details":"","model-value":u(a.value)}),null,16,["model-value"])]),default:t(()=>[e(za,{camp:a.value,"option-prix":a.value.OptionPrix,"onUpdate:optionPrix":d[7]||(d[7]=g=>a.value.OptionPrix=g),"option-qf":a.value.OptionQuotientFamilial,"onUpdate:optionQf":d[8]||(d[8]=g=>a.value.OptionQuotientFamilial=g)},null,8,["camp","option-prix","option-qf"])]),_:1})]),_:1})]),_:1}),e(N,null,{default:t(()=>[e(y,{"align-self":"center",cols:"2"},{default:t(()=>[e(v,{modelValue:a.value.Places,"onUpdate:modelValue":d[9]||(d[9]=g=>a.value.Places=g),label:"Nombre de places"},null,8,["modelValue"])]),_:1}),e(y,{"align-self":"center",cols:"2"},{default:t(()=>[e(v,{modelValue:a.value.AgeMin,"onUpdate:modelValue":d[10]||(d[10]=g=>a.value.AgeMin=g),label:"Âge minimum"},null,8,["modelValue"])]),_:1}),e(y,{"align-self":"center",cols:"2"},{default:t(()=>[e(v,{modelValue:a.value.AgeMax,"onUpdate:modelValue":d[11]||(d[11]=g=>a.value.AgeMax=g),label:"Âge maximum"},null,8,["modelValue"])]),_:1}),e(y,{cols:"6"},{default:t(()=>[e(w,{modelValue:a.value.NeedEquilibreGF,"onUpdate:modelValue":d[12]||(d[12]=g=>a.value.NeedEquilibreGF=g),label:"Equilibre G/F demandé",density:"compact","persistent-hint":"",hint:"Place un inscrit en liste d'attente en cas de déséquilibre Garçons/Filles"},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:t(()=>[e(y,null,{default:t(()=>[e(ot,{variant:"outlined",density:"compact",label:"Description",hint:"Ce texte est affiché sur le formulaire d'inscription.","persistent-hint":"",rows:"3",modelValue:a.value.Description,"onUpdate:modelValue":d[13]||(d[13]=g=>a.value.Description=g)},null,8,["modelValue"])]),_:1}),e(y,{cols:"2"}),e(y,{cols:"2"},{default:t(()=>[e(w,{label:"Navette",modelValue:a.value.Navette.Actif,"onUpdate:modelValue":d[14]||(d[14]=g=>a.value.Navette.Actif=g)},null,8,["modelValue"])]),_:1}),e(y,null,{default:t(()=>[e(ot,{variant:"outlined",density:"compact",label:"Navette",hint:"Ce texte est affiché sur l'espace personnel de suivi.","persistent-hint":"",rows:"3",disabled:!a.value.Navette.Actif,modelValue:a.value.Navette.Commentaire,"onUpdate:modelValue":d[15]||(d[15]=g=>a.value.Navette.Commentaire=g)},null,8,["disabled","modelValue"])]),_:1})]),_:1}),e(N,null,{default:t(()=>[e(y,null,{default:t(()=>[e(ce,{label:"Image",density:"compact",variant:"outlined",hint:"Lien vers une image affichée sur le formulaire d'inscription","persistent-hint":"",modelValue:a.value.ImageURL,"onUpdate:modelValue":d[16]||(d[16]=g=>a.value.ImageURL=g)},null,8,["modelValue"])]),_:1}),e(y,{cols:"auto","align-self":"center"},{default:t(()=>[e(ke,{elevation:"1",label:""},{default:t(()=>[b(" Métadonnées ("+L(Object.keys(a.value.Meta||{}).length)+") ",1),e(Pe,{activator:"parent","close-on-content-click":!1,modelValue:n.value,"onUpdate:modelValue":d[18]||(d[18]=g=>n.value=g)},{default:t(()=>[e(Ha,{meta:a.value.Meta,onSave:d[17]||(d[17]=g=>{a.value.Meta=g,n.value=!1})},null,8,["meta"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(y,null,{default:t(()=>[e(ce,{label:"Mot de passe",density:"compact",variant:"outlined",hint:"Mot de passe d'accès à la page Directeur","persistent-hint":"",modelValue:a.value.Password,"onUpdate:modelValue":d[19]||(d[19]=g=>a.value.Password=g)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ie),e(h,{disabled:!o.value,onClick:d[20]||(d[20]=g=>c("save",a.value))},{default:t(()=>[...d[21]||(d[21]=[b("Enregistrer",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})}}}),Yt=Z({__name:"TauxSelect",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(l){Ne(o);const s=xe(l,"modelValue"),r=S(null),c=F(()=>{const i=Array.from(a.value.values()).map(d=>({title:d.Label,value:d.Id}));return i.sort((d,p)=>d.title.localeCompare(p.title)),i}),a=S(new Map);async function o(){const i=await C.CampsGetTaux();i!==void 0&&(a.value=Ml(i),s.value.Id>0&&(s.value=_e(a.value.get(s.value.Id)),r.value=s.value.Id))}function m(){s.value.Id<=0?(r.value==null&&(r.value=1),s.value=_e(a.value.get(r.value))):(r.value=null,s.value.Id=0,s.value.Label="")}function n(i){s.value=_e(a.value.get(i))}const u=F(()=>{if(s.value.Id>0)return null;const i=s.value.Label;return Array.from(a.value.values()).map(p=>p.Label).includes(i)?"Ce label est déjà utilisé.":null});return(i,d)=>(f(),x(N,null,{default:t(()=>[e(y,{"align-self":"center"},{default:t(()=>[s.value.Id>0?(f(),x(Ee,{key:0,variant:"outlined",density:"compact","hide-details":"",label:"Taux",items:c.value,modelValue:r.value,"onUpdate:modelValue":[d[0]||(d[0]=p=>r.value=p),n]},null,8,["items","modelValue"])):(f(),x(N,{key:1},{default:t(()=>[e(y,{cols:"12"},{default:t(()=>[e(ce,{variant:"outlined",density:"compact",label:"Label",modelValue:s.value.Label,"onUpdate:modelValue":d[1]||(d[1]=p=>s.value.Label=p),disabled:s.value.Id>0,"error-messages":u.value},null,8,["modelValue","disabled","error-messages"])]),_:1}),e(y,null,{default:t(()=>[e(ce,{label:`Valeur d'un ${U($l)[U(Ul).FrancsSuisse]}`,density:"compact",variant:"outlined",type:"number",min:"0.001",suffix:"€",hint:"Valeur en € d'une unité de la monnaie.","persistent-hint":"","model-value":s.value.FrancsSuisse/1e3,"onUpdate:modelValue":d[2]||(d[2]=p=>s.value.FrancsSuisse=U(Al)(Number(p)*1e3)),disabled:s.value.Id>0},null,8,["label","model-value","disabled"])]),_:1})]),_:1}))]),_:1}),e(y,{cols:"auto"},{default:t(()=>[e(me,{thickness:"2",vertical:"",class:"py-4"},{default:t(()=>[...d[3]||(d[3]=[b("ou",-1)])]),_:1})]),_:1}),e(y,{"align-self":"center",cols:"auto"},{default:t(()=>[e(h,{onClick:m},{prepend:t(()=>[e(ye,null,{default:t(()=>[...d[4]||(d[4]=[b("mdi-toggle-switch",-1)])]),_:1})]),default:t(()=>[b(" "+L(s.value.Id>0?"Créer un taux":"Utiliser un taux"),1)]),_:1})]),_:1})]),_:1}))}}),Wa=Z({__name:"CampStats",props:{stats:{}},setup(l){const s=l;function r(c,a){return`(${(a==0?0:100*c/a).toFixed(0)} %)`}return(c,a)=>(f(),x(z,{title:"Statistiques"},{default:t(()=>[e(H,null,{default:t(()=>[e(N,null,{default:t(()=>[e(y,{cols:"5"},{default:t(()=>[b(" Demandes d'inscriptions : "+L(s.stats.Inscriptions),1)]),_:1}),e(y,{class:"text-right"},{default:t(()=>[b(" Dont Filles : "+L(s.stats.InscriptionsFilles)+" "+L(r(s.stats.InscriptionsFilles,s.stats.Inscriptions))+", Suisses : "+L(s.stats.InscriptionsSuisses)+" "+L(r(s.stats.InscriptionsSuisses,s.stats.Inscriptions)),1)]),_:1})]),_:1}),e(N,null,{default:t(()=>[e(y,{cols:"4"},{default:t(()=>[b(" Confirmées : "+L(s.stats.Valides)+" "+L(r(s.stats.Valides,s.stats.Inscriptions)),1)]),_:1}),e(y,{class:"text-right"},{default:t(()=>[b(" Dont Filles : "+L(s.stats.ValidesFilles)+" "+L(r(s.stats.ValidesFilles,s.stats.Valides))+" , Suisses : "+L(s.stats.ValidesSuisses)+" "+L(r(s.stats.ValidesSuisses,s.stats.Valides)),1)]),_:1})]),_:1}),e(N,null,{default:t(()=>[e(y,null,{default:t(()=>[b(" A statuer : "+L(s.stats.AStatuer)+" "+L(r(s.stats.AStatuer,s.stats.Inscriptions)),1)]),_:1}),e(y,{cols:"5",class:"text-center"},{default:t(()=>[b(" Demandes d'exception : "+L(s.stats.Exceptions)+" "+L(r(s.stats.Exceptions,s.stats.Inscriptions)),1)]),_:1}),e(y,{class:"text-right"},{default:t(()=>[b(" Refus : "+L(s.stats.Refus)+" "+L(r(s.stats.Refus,s.stats.Inscriptions)),1)]),_:1})]),_:1})]),_:1})]),_:1}))}}),Ja={key:0},Ga=Z({__name:"CampHeaderRow",props:{camp:{}},emits:["click","edit","edit-taux","delete","show-documents","send-sondage"],setup(l,{emit:s}){const r=l,c=s,a=F(()=>r.camp.Stats.Inscriptions-r.camp.Stats.Valides),o=S(!1),m=F(()=>{switch(new Date(r.camp.Camp.Camp.DateDebut).getUTCMonth()+1){case 7:case 8:return"rgb(45, 185, 187)";case 9:case 10:case 11:return"rgb(190, 150, 60)";case 12:case 1:case 2:case 3:return"rgb(240, 240, 240)";case 4:case 5:case 6:default:return"rgb(190, 228, 100)"}});return(n,u)=>(f(),W(ne,null,[e(le,{modelValue:o.value,"onUpdate:modelValue":u[1]||(u[1]=i=>o.value=i),"max-width":"600"},{default:t(()=>[e(z,{title:"Confirmer la suppression"},{default:t(()=>[e(H,null,{default:t(()=>[u[8]||(u[8]=b(" Etes vous certain de supprimer le séjour ",-1)),T("b",null,L(U(Ce).label(r.camp.Camp.Camp)),1),u[9]||(u[9]=b(" ? ",-1)),u[10]||(u[10]=T("br",null,null,-1)),u[11]||(u[11]=T("br",null,null,-1)),u[12]||(u[12]=b(" Les éventuels ",-1)),u[13]||(u[13]=T("i",null,"équipiers",-1)),u[14]||(u[14]=b(" déclarés sur ce séjour seront aussi supprimés. ",-1)),u[15]||(u[15]=T("br",null,null,-1)),u[16]||(u[16]=T("br",null,null,-1)),u[17]||(u[17]=b(" Attention, cette opération est irréversible. ",-1))]),_:1}),e(se,null,{default:t(()=>[e(ie),e(h,{color:"red",onClick:u[0]||(u[0]=i=>{o.value=!1,c("delete")})},{default:t(()=>[...u[18]||(u[18]=[b("Supprimer",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(z,{color:m.value,"no-gutters":"",onClick:u[7]||(u[7]=i=>c("click")),class:"my-1"},{default:t(()=>[e(N,{style:Ze({"background-color":m.value}),class:"px-1","no-gutters":"",justify:"space-between"},{default:t(()=>[e(y,null,{default:t(()=>[e(X,{title:U(Ce).label(r.camp.Camp.Camp),subtitle:`ID : ${r.camp.Camp.Camp.Id}`},null,8,["title","subtitle"])]),_:1}),e(y,{"align-self":"center"},{default:t(()=>[b(L(U(Ce).formatPlage(l.camp.Camp.Camp)),1)]),_:1}),e(y,{cols:"2","align-self":"center"},{default:t(()=>[e(Ct,{width:"600",location:"left","content-class":"pa-0"},{activator:t(({props:i})=>[e(el,ue({class:"bg-white border-md border-primary"},i,{max:r.camp.Camp.Camp.Places,"model-value":r.camp.Stats.Valides,height:"36",rounded:"",color:"primary"}),{default:t(()=>[T("strong",null,[b(L(r.camp.Stats.Valides)+"/"+L(r.camp.Camp.Camp.Places)+" ",1),a.value>0?(f(),W("span",Ja," (+ "+L(a.value)+")",1)):G("",!0)])]),_:1},16,["max","model-value"])]),default:t(()=>[e(Wa,{stats:r.camp.Stats},null,8,["stats"])]),_:1})]),_:1}),e(y,{cols:"1"}),e(y,{cols:"auto","align-self":"center"},{default:t(()=>[e(Pe,null,{activator:t(({props:i})=>[e(h,ue(i,{size:"x-small",class:"mx-1",icon:"mdi-dots-vertical"}),null,16)]),default:t(()=>[e(Se,{density:"compact"},{default:t(()=>[e(X,{"prepend-icon":"mdi-pencil",onClick:u[2]||(u[2]=i=>c("edit"))},{default:t(()=>[...u[19]||(u[19]=[b("Modifier les paramètres",-1)])]),_:1}),e(X,{"prepend-icon":"mdi-currency-eur",onClick:u[3]||(u[3]=i=>c("edit-taux"))},{default:t(()=>[...u[20]||(u[20]=[b("Taux de conversion",-1)])]),_:1}),e(me,{thickness:"1"}),e(X,{"prepend-icon":"mdi-mail",onClick:u[4]||(u[4]=i=>c("show-documents")),title:"Documents"}),e(me,{thickness:"1"}),e(X,{title:"Envoyer le sondage",subtitle:"de fin de séjour","prepend-icon":"mdi-comment-quote",onClick:u[5]||(u[5]=i=>c("send-sondage"))}),e(me,{thickness:"1"}),e(X,{"prepend-icon":"mdi-delete",disabled:r.camp.Stats.Inscriptions>0,onClick:u[6]||(u[6]=i=>o.value=!0)},{default:t(()=>[...u[21]||(u[21]=[b("Supprimer",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])]),_:1},8,["color"])],64))}}),Ka=Z({__name:"CampsSelector",props:De({allCamps:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l,{emit:s}){const r=l,c=xe(l,"modelValue"),a=F(()=>r.allCamps.map(o=>({title:o.Label,value:o.Id})));return(o,m)=>(f(),x(fa,{multiple:"",chips:"","closable-chips":"",items:a.value,modelValue:c.value,"onUpdate:modelValue":m[0]||(m[0]=n=>c.value=n)},null,8,["items","modelValue"]))}}),Xa=Z({__name:"DocumentsCard",props:{camp:{}},setup(l){const s=l;Ne(c);const r=S(null);async function c(){const a=await C.CampsDocuments({idCamp:s.camp.Camp.Camp.Id});a!==void 0&&(r.value=a)}return(a,o)=>{const m=Ia;return r.value!=null?(f(),x(z,{key:0,title:"Documents"},{default:t(()=>[e(H,null,{default:t(()=>[e(Se,null,{default:t(()=>[e(ht,null,{default:t(()=>[...o[0]||(o[0]=[b("Préférences d'affichage",-1)])]),_:1}),e(X,null,{default:t(()=>[e(N,{class:"mb-2"},{default:t(()=>[e(y,null,{default:t(()=>[e(ke,{color:r.value.ToShow.LettreDirecteur?"green":"grey","append-icon":r.value.ToShow.LettreDirecteur?"mdi-check":""},{default:t(()=>[...o[1]||(o[1]=[b("Lettre du directeur",-1)])]),_:1},8,["color","append-icon"])]),_:1}),e(y,null,{default:t(()=>[e(ke,{color:r.value.ToShow.ListeVetements?"green":"grey","append-icon":r.value.ToShow.ListeVetements?"mdi-check":""},{default:t(()=>[...o[2]||(o[2]=[b(" Liste de vêtements",-1)])]),_:1},8,["color","append-icon"])]),_:1}),e(y,null,{default:t(()=>[e(ke,{color:r.value.ToShow.ListeParticipants?"green":"grey","append-icon":r.value.ToShow.ListeParticipants?"mdi-check":""},{default:t(()=>[...o[3]||(o[3]=[b("Liste des participants ",-1)])]),_:1},8,["color","append-icon"])]),_:1})]),_:1})]),_:1}),e(ht,null,{default:t(()=>[...o[4]||(o[4]=[b("Documents du séjour",-1)])]),_:1}),(f(!0),W(ne,null,ve(r.value.Generated,n=>(f(),x(X,{title:n.NomClient},{append:t(()=>[e(m,{"file-key":n.Key,"is-generated-doc":!0},null,8,["file-key"])]),_:2},1032,["title"]))),256)),(f(!0),W(ne,null,ve(r.value.ToRead,n=>(f(),x(X,{title:n.NomClient},{append:t(()=>[e(m,{"file-key":n.Key,"is-generated-doc":!1},null,8,["file-key"])]),_:2},1032,["title"]))),256)),(f(!0),W(ne,null,ve(r.value.ToUploadModeles,n=>(f(),x(X,{title:n.NomClient,subtitle:"Document à remplir"},{append:t(()=>[e(m,{"file-key":n.Key,"is-generated-doc":!1},null,8,["file-key"])]),_:2},1032,["title"]))),256))]),_:1})]),_:1})]),_:1})):(f(),x(tt,{key:1,type:"card"}))}}}),bt=Z({__name:"RequestProgressCard",props:{title:{},current:{},total:{}},setup(l){const s=l;return(r,c)=>(f(),x(z,{title:s.title},{default:t(()=>[e(H,null,{default:t(()=>[e(el,{max:s.total,"model-value":s.current,color:"primary",height:"24"},{default:t(()=>[b(L(s.current)+" / "+L(s.total),1)]),_:1},8,["max","model-value"])]),_:1})]),_:1},8,["title"]))}});function Za(){const l=S([]);Fl(()=>l.value=[]);function s(r,c){l.value[c]=r}return{refs:l,updateRef:s}}const en=Ue({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:l=>l.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:l=>l%1===0},totalVisible:[Number,String],firstIcon:{type:Oe,default:"$first"},prevIcon:{type:Oe,default:"$prev"},nextIcon:{type:Oe,default:"$next"},lastIcon:{type:Oe,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...zl(),...Yl(),...jl(),...ql(),...Bl(),...Nl(),...Ol({tag:"nav"}),...El(),...Tl({variant:"text"})},"VPagination"),tn=Re()({name:"VPagination",props:en(),emits:{"update:modelValue":l=>!0,first:l=>!0,prev:l=>!0,next:l=>!0,last:l=>!0},setup(l,s){let{slots:r,emit:c}=s;const a=$e(l,"modelValue"),{t:o,n:m}=ze(),{isRtl:n}=Kt(),{themeClasses:u}=Rl(l),{width:i}=Ll(),d=Ke(-1);Dt(void 0,{scoped:!0});const{resizeRef:p}=hl(Q=>{if(!Q.length)return;const{target:M,contentRect:ee}=Q[0],J=M.querySelector(".v-pagination__list > *");if(!J)return;const E=ee.width,K=J.offsetWidth+parseFloat(getComputedStyle(J).marginRight)*2;d.value=g(E,K)}),v=F(()=>parseInt(l.length,10)),P=F(()=>parseInt(l.start,10)),w=F(()=>l.totalVisible!=null?parseInt(l.totalVisible,10):d.value>=0?d.value:g(i.value,58));function g(Q,M){const ee=l.showFirstLastPage?5:3;return Math.max(0,Math.floor(Number(((Q-M*ee)/M).toFixed(2))))}const V=F(()=>{if(v.value<=0||isNaN(v.value)||v.value>Number.MAX_SAFE_INTEGER)return[];if(w.value<=0)return[];if(w.value===1)return[a.value];if(v.value<=w.value)return he(v.value,P.value);const Q=w.value%2===0,M=Q?w.value/2:Math.floor(w.value/2),ee=Q?M:M+1,J=v.value-M;if(ee-a.value>=0)return[...he(Math.max(1,w.value-1),P.value),l.ellipsis,v.value];if(a.value-J>=(Q?1:0)){const E=w.value-1,K=v.value-E+P.value;return[P.value,l.ellipsis,...he(E,K)]}else{const E=Math.max(1,w.value-2),K=E===1?a.value:a.value-Math.ceil(E/2)+P.value;return[P.value,l.ellipsis,...he(E,K),l.ellipsis,v.value]}});function D(Q,M,ee){Q.preventDefault(),a.value=M,ee&&c(ee,M)}const{refs:q,updateRef:O}=Za();Dt({VPaginationBtn:{color:Fe(()=>l.color),border:Fe(()=>l.border),density:Fe(()=>l.density),size:Fe(()=>l.size),variant:Fe(()=>l.variant),rounded:Fe(()=>l.rounded),elevation:Fe(()=>l.elevation)}});const k=F(()=>V.value.map((Q,M)=>{const ee=J=>O(J,M);if(typeof Q=="string")return{isActive:!1,key:`ellipsis-${M}`,page:Q,props:{ref:ee,ellipsis:!0,icon:!0,disabled:!0}};{const J=Q===a.value;return{isActive:J,key:Q,page:m(Q),props:{ref:ee,ellipsis:!1,icon:!0,disabled:!!l.disabled||Number(l.length)<2,color:J?l.activeColor:l.color,"aria-current":J,"aria-label":o(J?l.currentPageAriaLabel:l.pageAriaLabel,Q),onClick:E=>D(E,Q)}}}})),_=F(()=>{const Q=!!l.disabled||a.value<=P.value,M=!!l.disabled||a.value>=P.value+v.value-1;return{first:l.showFirstLastPage?{icon:n.value?l.lastIcon:l.firstIcon,onClick:ee=>D(ee,P.value,"first"),disabled:Q,"aria-label":o(l.firstAriaLabel),"aria-disabled":Q}:void 0,prev:{icon:n.value?l.nextIcon:l.prevIcon,onClick:ee=>D(ee,a.value-1,"prev"),disabled:Q,"aria-label":o(l.previousAriaLabel),"aria-disabled":Q},next:{icon:n.value?l.prevIcon:l.nextIcon,onClick:ee=>D(ee,a.value+1,"next"),disabled:M,"aria-label":o(l.nextAriaLabel),"aria-disabled":M},last:l.showFirstLastPage?{icon:n.value?l.firstIcon:l.lastIcon,onClick:ee=>D(ee,P.value+v.value-1,"last"),disabled:M,"aria-label":o(l.lastAriaLabel),"aria-disabled":M}:void 0}});function te(){const Q=a.value-P.value;q.value[Q]?.$el.focus()}function be(Q){Q.key===St.left&&!l.disabled&&a.value>Number(l.start)?(a.value=a.value-1,It(te)):Q.key===St.right&&!l.disabled&&a.value<P.value+v.value-1&&(a.value=a.value+1,It(te))}return Le(()=>e(l.tag,{ref:p,class:Ve(["v-pagination",u.value,l.class]),style:Ze(l.style),role:"navigation","aria-label":o(l.ariaLabel),onKeydown:be,"data-test":"v-pagination-root"},{default:()=>[T("ul",{class:"v-pagination__list"},[l.showFirstLastPage&&T("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[r.first?r.first(_.value.first):e(h,ue({_as:"VPaginationBtn"},_.value.first),null)]),T("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[r.prev?r.prev(_.value.prev):e(h,ue({_as:"VPaginationBtn"},_.value.prev),null)]),k.value.map((Q,M)=>T("li",{key:Q.key,class:Ve(["v-pagination__item",{"v-pagination__item--is-active":Q.isActive}]),"data-test":"v-pagination-item"},[r.item?r.item(Q):e(h,ue({_as:"VPaginationBtn"},Q.props),{default:()=>[Q.page]})])),T("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[r.next?r.next(_.value.next):e(h,ue({_as:"VPaginationBtn"},_.value.next),null)]),l.showFirstLastPage&&T("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[r.last?r.last(_.value.last):e(h,ue({_as:"VPaginationBtn"},_.value.last),null)])])]})),{}}}),ln={key:2},pt=16,an=Z({__name:"CampsList",emits:["show-participants"],setup(l,{emit:s}){const r=s;Ne(i);const c=ft(new Map),a=S(!1),o=ft({pattern:"",openOnly:!1}),m=F(()=>{const j=tl(o.pattern),$=Array.from(c.values()).filter(oe=>Ce.match(oe.Camp.Camp,j)&&(!o.openOnly||Rt(oe.Camp)));return $.sort((oe,A)=>{const I=new Date(A.Camp.Camp.DateDebut).valueOf(),B=new Date(oe.Camp.Camp.DateDebut).valueOf();return I==B?oe.Camp.Camp.Id-A.Camp.Camp.Id:I-B}),$}),n=F(()=>m.value.slice((v.value-1)*pt,v.value*pt));function u(){v.value>p.value&&(v.value=p.value)}async function i(){a.value=!0;const j=await C.CampsGet();a.value=!1,j!==void 0&&(c.clear(),j?.forEach($=>c.set($.Camp.Camp.Id,$)))}async function d(){a.value=!0;const j=await C.CampsCreate();a.value=!1,j!==void 0&&(C.showMessage("Camp ajouté avec succès."),c.set(j.Camp.Camp.Id,j),P.value=j.Camp.Camp)}const p=F(()=>Math.max(Math.ceil(m.value.length/pt),1)),v=S(1),P=S(null);async function w(j){P.value=null,a.value=!0;const $=await C.CampsUpdate(j);a.value=!1,$!==void 0&&(C.showMessage("Séjour modifié avec succès."),c.get($.Camp.Id).Camp=$,u())}const g=S(null);async function V(){const j=g.value;if(j==null)return;g.value=null,a.value=!0;const $=await C.CampsSetTaux({IdCamp:j.Camp.Camp.Id,Taux:j.Taux});a.value=!1,$!==void 0&&(C.showMessage("Taux modifié avec succès."),c.set($.Camp.Camp.Id,$))}const D=S(!1),q=S(5),O=S({Id:1,Label:"",Euros:0,FrancsSuisse:0}),k=F(()=>O.value.Id>0||O.value.Label!=""),_=F(()=>new Set(Array.from(c.values()).filter($=>Rt($.Camp)).map($=>$.Camp.Camp.IdTaux)).size<=1);async function te(){D.value=!1,a.value=!0;const j=await C.CampsCreateMany({Count:q.value,Taux:O.value});a.value=!1,j!==void 0&&(C.showMessage("Séjours créés avec succès."),j?.forEach($=>c.set($.Camp.Camp.Id,$)))}async function be(j){a.value=!0;const $=await C.CampsDelete({id:j.Camp.Camp.Id});a.value=!1,$!==void 0&&(C.showMessage("Séjour supprimé avec succès."),c.delete(j.Camp.Camp.Id),u())}const Q=S(!1);function M(){ee.value=Array.from(c.values()).filter(j=>j.Camp.Camp.Statut!=Ql.Ouvert).map(j=>j.Camp.Camp.Id),Q.value=!0}const ee=S([]);async function J(){Q.value=!1,!(!ee.value.length||await C.CampsOuvreInscriptions({Camps:ee.value})===void 0)&&(C.showMessage("Séjours ouverts aux inscriptions avec succès."),i())}const E=S(null),K=S(null);async function pe(j){K.value={Current:0,Total:10};const $=await C.EventsSendSondages({idCamp:j});if($===void 0){K.value=null;return}await yt($,oe=>K.value=oe,oe=>C.onError("Envoi du sondage",oe)),K.value=null,C.showMessage("Sondage envoyé avec succès.")}return(j,$)=>{const oe=Qe;return f(),W(ne,null,[e(z,{title:"Séjours",subtitle:c.size},{append:t(()=>[e(N,null,{default:t(()=>[e(y,{"align-self":"center",style:{width:"240px"}},{default:t(()=>[e(ce,{label:"Rechercher",variant:"filled",density:"comfortable","hide-details":"","prepend-inner-icon":"mdi-magnify",clearable:"",modelValue:o.pattern,"onUpdate:modelValue":[$[0]||($[0]=A=>o.pattern=A),$[2]||($[2]=A=>u())],"onClick:clear":$[1]||($[1]=A=>{o.pattern="",u()})},null,8,["modelValue"])]),_:1}),e(me,{vertical:"",thickness:"1"}),e(y,{"align-self":"center",cols:"auto"},{default:t(()=>[e(Pe,null,{activator:t(({props:A})=>[e(h,ue(A,{color:"success",disabled:a.value}),{prepend:t(()=>[e(ye,null,{default:t(()=>[...$[16]||($[16]=[b("mdi-plus",-1)])]),_:1})]),default:t(()=>[$[17]||($[17]=b(" Créer un séjour ",-1))]),_:1},16,["disabled"])]),default:t(()=>[e(Se,{density:"compact"},{default:t(()=>[e(X,{onClick:d,title:"Créer un séjour"}),e(X,{title:"Créer plusieurs séjours...",subtitle:"Permet de choisir les taux de conversion",onClick:$[3]||($[3]=A=>D.value=!0)})]),_:1})]),_:1})]),_:1}),e(y,{"align-self":"center",cols:"auto"},{default:t(()=>[e(Pe,null,{activator:t(({props:A})=>[e(h,ue(A,{flat:"",icon:"mdi-dots-vertical",size:"small"}),null,16)]),default:t(()=>[e(Se,{density:"compact"},{default:t(()=>[e(X,{title:"Masquer les camps fermés",subtitle:"N'afficher que les camps ouverts aux inscriptions",onClick:$[5]||($[5]=A=>o.openOnly=!o.openOnly)},{prepend:t(()=>[e(je,{class:"mr-2",modelValue:o.openOnly,"onUpdate:modelValue":$[4]||($[4]=A=>o.openOnly=A),density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(me,{thickness:"1"}),e(X,{onClick:M,title:"Ouvrir les inscriptions","prepend-icon":"mdi-lock-open"})]),_:1})]),_:1})]),_:1})]),_:1})]),default:t(()=>[e(H,{class:"mt-4"},{default:t(()=>[_.value?G("",!0):(f(),x(Hl,{key:0,type:"warning"},{default:t(()=>[...$[18]||($[18]=[b(" Attention, les séjours ouverts aux inscriptions ont des taux de conversion incompatibles ! ",-1)])]),_:1})),a.value?(f(),x(tt,{key:1})):m.value.length==0?(f(),W("i",ln," Aucun camp ne correspond aux filtres actuels. ")):G("",!0),(f(!0),W(ne,null,ve(n.value,(A,I)=>(f(),x(Ga,{key:I,camp:A,onClick:B=>r("show-participants",A),onEdit:B=>P.value=A.Camp.Camp,onEditTaux:B=>g.value=A,onDelete:B=>be(A),onShowDocuments:B=>E.value=A,onSendSondage:B=>pe(A.Camp.Camp.Id)},null,8,["camp","onClick","onEdit","onEditTaux","onDelete","onShowDocuments","onSendSondage"]))),128)),e(tn,{length:p.value,modelValue:v.value,"onUpdate:modelValue":$[6]||($[6]=A=>v.value=A)},null,8,["length","modelValue"])]),_:1})]),_:1},8,["subtitle"]),e(le,{"model-value":P.value!=null,"onUpdate:modelValue":$[7]||($[7]=A=>P.value=null)},{default:t(()=>[P.value!=null?(f(),x(Qa,{key:0,camp:P.value,onSave:w},null,8,["camp"])):G("",!0)]),_:1},8,["model-value"]),e(le,{"model-value":g.value!=null,"onUpdate:modelValue":$[9]||($[9]=A=>g.value=null),"max-width":"600"},{default:t(()=>[g.value!=null?(f(),x(z,{key:0,title:"Modifier le taux",subtitle:"La modification n'est possible que si aucun participant n'est enregistré."},{default:t(()=>[e(H,null,{default:t(()=>[e(Yt,{modelValue:g.value.Taux,"onUpdate:modelValue":$[8]||($[8]=A=>g.value.Taux=A)},null,8,["modelValue"])]),_:1}),e(se,null,{default:t(()=>[e(ie),e(h,{disabled:g.value.Stats.Inscriptions>0,onClick:V},{default:t(()=>[...$[19]||($[19]=[b("Modifier",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})):G("",!0)]),_:1},8,["model-value"]),e(le,{modelValue:D.value,"onUpdate:modelValue":$[12]||($[12]=A=>D.value=A),"max-width":"600"},{default:t(()=>[e(z,{title:"Créer plusieurs séjours",subtitle:"Les séjours seront liés au même taux de conversion"},{default:t(()=>[e(H,null,{default:t(()=>[e(N,null,{default:t(()=>[e(y,null,{default:t(()=>[e(oe,{label:"Nombre de séjours",modelValue:q.value,"onUpdate:modelValue":$[10]||($[10]=A=>q.value=A)},null,8,["modelValue"])]),_:1})]),_:1}),e(me,{thickness:"2",class:"my-2"}),e(Yt,{modelValue:O.value,"onUpdate:modelValue":$[11]||($[11]=A=>O.value=A)},null,8,["modelValue"])]),_:1}),e(se,null,{default:t(()=>[e(ie),e(h,{color:"success",onClick:te,disabled:!k.value},{default:t(()=>[...$[20]||($[20]=[b("Créer",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(le,{modelValue:Q.value,"onUpdate:modelValue":$[14]||($[14]=A=>Q.value=A),"max-width":"600"},{default:t(()=>[e(z,{title:"Ouvrir les inscriptions",subtitle:"Ouvre les inscriptions sur les séjours ci-dessous"},{default:t(()=>[e(H,null,{default:t(()=>[e(Ka,{"all-camps":Array.from(c.values()).map(A=>U(Ce).toItem(A.Camp)),modelValue:ee.value,"onUpdate:modelValue":$[13]||($[13]=A=>ee.value=A)},null,8,["all-camps","modelValue"])]),_:1}),e(se,null,{default:t(()=>[e(ie),e(h,{onClick:J,disabled:!ee.value.length},{default:t(()=>[...$[21]||($[21]=[b("Ouvrir",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(le,{"model-value":E.value!=null,"onUpdate:modelValue":$[15]||($[15]=A=>E.value=null),"max-width":"800px"},{default:t(()=>[E.value?(f(),x(Xa,{key:0,camp:E.value},null,8,["camp"])):G("",!0)]),_:1},8,["model-value"]),e(le,{"model-value":K.value!=null,"max-width":"400px",persistent:""},{default:t(()=>[K.value?(f(),x(bt,{key:0,title:"Envoi du sondage en cours",current:K.value.Current,total:K.value.Total},null,8,["current","total"])):G("",!0)]),_:1},8,["model-value"])],64)}}}),nn={key:1},un={key:0,class:"text-center font-italic"},sn=Z({__name:"CampParticipants",props:{id:{},idParticipant:{}},setup(l){const s=l;Ne(async()=>{a(),await n(),u()}),Ae(()=>s.id,n),Ae(()=>s.idParticipant,u);const r=S(!1),c=S([]);async function a(){const O=await C.GetCamps();O!==void 0&&(c.value=O||[])}const o=F(()=>{const O=(m.value?.Participants||[]).map(k=>k);return O.sort(Wl.cmp),O}),m=S(null);async function n(){r.value=!0;const O=await C.CampsLoad({idCamp:s.id});r.value=!1,O!==void 0&&(m.value=O)}function u(){if(s.idParticipant===void 0)return;const O=(m.value?.Participants||[]).find(k=>k.Participant.Id==s.idParticipant);O&&(p.value=_e(O))}const i=S(null);async function d(){if(i.value==null||m.value==null)return;const O=await C.ParticipantsCreate(i.value);i.value=null,O!==void 0&&(C.showMessage("Participant créé avec succès."),m.value.Participants=(m.value.Participants||[]).concat(O),p.value=_e(O))}const p=S(null);async function v(O){if(p.value==null||m.value==null)return;const k=await C.ParticipantsUpdate(O);p.value=null,k!==void 0&&(C.showMessage("Participant modifié avec succès."),n())}const P=S(null);async function w(){if(P.value==null||m.value==null)return;const O=P.value.Participant.Id,k=await C.ParticipantsDelete({id:O});P.value=null,k!==void 0&&(C.showMessage("Participant supprimé avec succès."),m.value.Participants=(m.value.Participants||[]).filter(_=>_.Participant.Id!=O))}const g=S(null);async function V(){const O=g.value;O==null||m.value==null||(g.value=null,await C.ParticipantsMove(O)===void 0)||(C.showMessage("Participant déplacé avec succès.",void 0,{title:"Aller au nouveau séjour",action:()=>xt({IdCamp:O.Target,Id:O.Id})}),m.value.Participants=(m.value.Participants||[]).filter(_=>_.Participant.Id!=O.Id))}const D=S(null);async function q(){if(D.value==null)return;const O=D.value.Participant.Id;D.value=null;const k=await C.ParticipantsSetPlaceLiberee({id:O});if(k===void 0||(C.showMessage("Notification de place libérée envoyée avec succès."),m.value==null))return;const _=m.value.Participants?.find(te=>te.Participant.Id==O);_.Participant=k}return(O,k)=>{const _=ya,te=ga,be=mt,Q=al,M=ba,ee=at;return m.value!=null?(f(),x(z,{key:0,title:"Participants",subtitle:U(Ce).label(m.value.Camp.Camp)},{append:t(()=>[e(h,{color:"green",onClick:k[0]||(k[0]=J=>i.value={IdCamp:s.id,IdDossier:0,IdPersonne:0})},{prepend:t(()=>[e(ye,null,{default:t(()=>[...k[9]||(k[9]=[b("mdi-plus",-1)])]),_:1})]),default:t(()=>[k[10]||(k[10]=b(" Ajouter un participant",-1))]),_:1})]),default:t(()=>[e(H,{class:"mt-4"},{default:t(()=>[r.value?(f(),x(tt,{key:0,type:"table"})):(f(),W("div",nn,[e(_),o.value.length?G("",!0):(f(),W("div",un," Aucun participant n'est encore inscrit sur ce séjour. ")),(f(!0),W(ne,null,ve(o.value,(J,E)=>(f(),x(te,{participant:J,index:E},{actions:t(()=>[e(Se,{density:"comfortable"},{default:t(()=>[e(X,{title:"Modifier","prepend-icon":"mdi-pencil",onClick:K=>p.value=J},null,8,["onClick"]),e(me),e(X,{title:"Changer de camp...","prepend-icon":"mdi-file-move",onClick:K=>g.value={Id:J.Participant.Id,Target:0}},null,8,["onClick"]),e(X,{title:"Notifier d'une place disponible.",subtitle:"Envoi un email","prepend-icon":"mdi-email-alert",disabled:J.Participant.Statut==U(Xe).Inscrit||J.Participant.Statut==U(Xe).EnAttenteReponse,onClick:K=>D.value=J},null,8,["disabled","onClick"]),e(me),e(X,{title:"Aller à la personne",subtitle:`(ID : ${J.Personne.Id})`,onClick:K=>U(Ge)(J.Personne.Id)},null,8,["subtitle","onClick"]),e(X,{title:"Aller au dossier",subtitle:`(ID : ${J.Participant.IdDossier})`,onClick:K=>U(gt)(J.Participant.IdDossier)},null,8,["subtitle","onClick"]),e(me),e(X,{title:"Supprimer","prepend-icon":"mdi-delete",onClick:K=>P.value=J},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["participant","index"]))),256))]))]),_:1}),i.value!=null?(f(),x(le,{key:0,"model-value":i.value!=null,"onUpdate:modelValue":k[3]||(k[3]=J=>i.value=null),"max-width":"600px"},{default:t(()=>[e(z,{title:"Créer un participant"},{default:t(()=>[e(H,null,{default:t(()=>[e(N,null,{default:t(()=>[e(y,{cols:"12"},{default:t(()=>[e(be,{label:"Participant",modelValue:i.value.IdPersonne,"onUpdate:modelValue":k[1]||(k[1]=J=>i.value.IdPersonne=J),"initial-personne":"",api:{SelectPersonne:U(C).SelectPersonne.bind(U(C))}},null,8,["modelValue","api"])]),_:1}),e(y,{cols:"12"},{default:t(()=>[e(Q,{modelValue:i.value.IdDossier,"onUpdate:modelValue":k[2]||(k[2]=J=>i.value.IdDossier=J)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ie),e(h,{color:"green",onClick:d,disabled:!(i.value.IdDossier&&i.value.IdPersonne)},{default:t(()=>[...k[11]||(k[11]=[b("Créer",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])):G("",!0),p.value!=null?(f(),x(le,{key:1,"model-value":p.value!=null,"onUpdate:modelValue":k[4]||(k[4]=J=>p.value=null),"max-width":"800px"},{default:t(()=>[e(M,{participant:p.value.Participant,personne:p.value.Personne,api:{SelectPersonne:U(C).SelectPersonne.bind(U(C))},onSave:v},null,8,["participant","personne","api"])]),_:1},8,["model-value"])):G("",!0),P.value!=null?(f(),x(le,{key:2,"model-value":P.value!=null,"onUpdate:modelValue":k[5]||(k[5]=J=>P.value=null),"max-width":"600px"},{default:t(()=>[e(z,{title:"Supprimer le participant"},{default:t(()=>[e(H,null,{default:t(()=>[k[12]||(k[12]=b(" Confirmez-vous la suppression du participant ",-1)),T("b",null,L(U(Te).label(P.value.Personne)),1),k[13]||(k[13]=b(" ? ",-1)),k[14]||(k[14]=T("br",null,null,-1)),k[15]||(k[15]=T("br",null,null,-1)),k[16]||(k[16]=b(" Attention, cette opération est irréversible. ",-1))]),_:1}),e(se,null,{default:t(()=>[e(ie),e(h,{color:"red",onClick:w},{default:t(()=>[...k[17]||(k[17]=[b("Supprimer",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])):G("",!0),g.value!=null?(f(),x(le,{key:3,"model-value":g.value!=null,"onUpdate:modelValue":k[7]||(k[7]=J=>g.value=null),"max-width":"500px"},{default:t(()=>[e(z,{title:"Déplacer le participant"},{default:t(()=>[e(H,null,{default:t(()=>[e(ee,{label:"Nouveau séjour",camps:c.value,modelValue:g.value.Target,"onUpdate:modelValue":k[6]||(k[6]=J=>g.value.Target=J)},null,8,["camps","modelValue"])]),_:1}),e(se,null,{default:t(()=>[e(ie),e(h,{onClick:V,disabled:g.value.Target==s.id||!g.value.Target},{default:t(()=>[...k[18]||(k[18]=[b("Déplacer",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])):G("",!0),D.value!=null?(f(),x(le,{key:4,"model-value":D.value!=null,"onUpdate:modelValue":k[8]||(k[8]=J=>D.value=null),"max-width":"500px"},{default:t(()=>[e(z,{title:"Notifier d'une place disponible"},{default:t(()=>[e(H,null,{default:t(()=>[b(" Confirmez-vous l'envoi d'une notification au responsable de "+L(U(Te).label(D.value.Personne))+" indiquant qu'une place est disponible ? ",1),k[19]||(k[19]=T("br",null,null,-1)),k[20]||(k[20]=T("br",null,null,-1)),b(" Le nouveau statut de "+L(D.value.Personne.Prenom)+" sera : ",1),T("i",null,L(U(Jl)[U(Xe).EnAttenteReponse]),1),k[21]||(k[21]=b(". ",-1))]),_:1}),e(se,null,{default:t(()=>[e(ie),e(h,{onClick:q},{default:t(()=>[...k[22]||(k[22]=[b("Notifier",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])):G("",!0)]),_:1},8,["subtitle"])):(f(),x(tt,{key:1,type:"card"}))}}}),on=Z({__name:"camps",setup(l){const s=lt(),r=F(()=>uu(s.currentRoute.value.query)),c=F(()=>r.value.idCamp);function a(m){const n=s.currentRoute.value;s.push({path:n.path,query:{idCamp:m.Camp.Camp.Id}})}function o(){const m=s.currentRoute.value;s.push({path:m.path,query:{}})}return(m,n)=>(f(),W(ne,null,[e(ct,{title:"Gestion des séjours"},{default:t(()=>[c.value!==null?(f(),x(h,{key:0,onClick:o},{prepend:t(()=>[e(ye,null,{default:t(()=>[...n[0]||(n[0]=[b("mdi-view-list",-1)])]),_:1})]),default:t(()=>[n[1]||(n[1]=b(" Retour à la liste",-1))]),_:1})):G("",!0)]),_:1}),c.value===void 0?(f(),x(an,{key:0,onShowParticipants:a})):(f(),x(sn,{key:1,id:c.value,"id-participant":r.value.idParticipant},null,8,["id","id-participant"]))],64))}}),pl=Z({__name:"MergeCard",props:{from:{}},emits:["merge"],setup(l,{emit:s}){const r=l,c=s,a=S(0),o=S(!0);return(m,n)=>{const u=al;return f(),x(z,{title:"Fusionner le dossier vers",subtitle:"Les participants, paiements et messages seront copiés vers le dossier cible."},{default:t(()=>[e(H,null,{default:t(()=>[e(N,null,{default:t(()=>[e(y,{cols:"12"},{default:t(()=>[e(u,{modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=i=>a.value=i)},null,8,["modelValue"])]),_:1}),e(y,{cols:"12"},{default:t(()=>[e(je,{density:"compact",label:"Notifier par email",hint:"Le reponsable du dossier absorbé sera averti du changement d'espace personnel.","persistent-hint":"",modelValue:o.value,"onUpdate:modelValue":n[1]||(n[1]=i=>o.value=i)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ie),e(h,{disabled:a.value==0||a.value==r.from,onClick:n[2]||(n[2]=i=>c("merge",{From:r.from,To:a.value,Notifie:o.value}))},{default:t(()=>[...n[3]||(n[3]=[b("Fusionner",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})}}}),rn={key:1,class:"text-center font-italic"},dn={key:2},mn=Z({__name:"PannelInscriptions",emits:["goTo","empty"],setup(l,{emit:s}){const r=s,c=S(!1);Ne(async()=>{await o(),a.value.length||r("empty")});const a=S([]);async function o(){c.value=!0;const g=await C.InscriptionsGet();c.value=!1,g!==void 0&&(a.value=g||[])}const m=S(""),n=F(()=>{const g=tl(m.value);return a.value.filter(V=>Te.match(V.Responsable,g)||V.Participants?.some(D=>Te.match(D.Personne,g)||Ce.match(D.Camp,g)))});async function u(g,V){const D=await C.InscriptionsIdentifiePersonne({IdDossier:g,Target:V});if(D===void 0)return;C.showMessage("Profil identifié avec succès.");const q=a.value.findIndex(O=>O.Dossier.Id==g);a.value[q]=D}const i=S(null);async function d(g,V){if(!i.value)return;const D=i.value.inscription.Dossier.Id;i.value=null;const q=await C.InscriptionsValide({IdDossier:D,Statuts:g,SendMail:V});if(q!==void 0)if(q.Dossier.IsValidated)C.showMessage("Inscription validée avec succès.","",{title:"Aller au dossier",action:()=>r("goTo",D)}),a.value=a.value.filter(O=>O.Dossier.Id!=D);else{C.showMessage("Participant validé avec succès.");const O=a.value.findIndex(k=>k.Dossier.Id==D);a.value[O]=q}}async function p(g){await C.DossiersDelete({id:g.Dossier.Id})!==void 0&&(C.showMessage("Inscription supprimée avec succès."),a.value=a.value.filter(D=>D.Dossier.Id!=g.Dossier.Id))}async function v(g,V){if(await C.ParticipantsDelete({id:V})===void 0)return;C.showMessage("Participant supprimé avec succès.");const q=a.value.find(O=>O.Dossier.Id==g);q.Participants=(q.Participants||[]).filter(O=>O.Participant.Id!=V)}const P=S(null);async function w(g){P.value=null,await C.DossiersMerge(g)!==void 0&&(C.showMessage("Inscriptions fusionnées avec succès."),o())}return(g,V)=>{const D=ka;return f(),x(z,{title:"Inscriptions",subtitle:"En attente de validation",class:"ma-2"},{append:t(()=>[e(ce,{width:"300","append-inner-icon":"mdi-magnify",label:"Rechercher","hide-details":"",modelValue:m.value,"onUpdate:modelValue":V[0]||(V[0]=q=>m.value=q)},null,8,["modelValue"])]),default:t(()=>[e(H,null,{default:t(()=>[c.value?(f(),x(tt,{key:0})):a.value.length?(f(),W("div",dn,[(f(!0),W(ne,null,ve(n.value,(q,O)=>(f(),x(Va,{class:"my-1",user:null,key:O,inscription:q,onIdentifie:k=>u(q.Dossier.Id,k),onValide:k=>i.value={inscription:q,participants:k===void 0?void 0:[k]},onMerge:k=>P.value=q.Dossier.Id,onDelete:k=>p(q),onDeleteParticipant:k=>v(q.Dossier.Id,k),api:{SearchSimilaires:U(C).InscriptionsSearchSimilaires.bind(U(C)),SelectPersonne:U(C).SelectPersonne.bind(U(C))}},null,8,["inscription","onIdentifie","onValide","onMerge","onDelete","onDeleteParticipant","api"]))),128))])):(f(),W("div",rn," Il n'y a aucune inscription à valider. "))]),_:1}),e(le,{"model-value":P.value!=null,"onUpdate:modelValue":V[1]||(V[1]=q=>P.value=null),"max-width":"600px"},{default:t(()=>[P.value!=null?(f(),x(pl,{key:0,from:P.value,onMerge:w},null,8,["from"])):G("",!0)]),_:1},8,["model-value"]),e(le,{"model-value":i.value!=null,"onUpdate:modelValue":V[2]||(V[2]=q=>i.value=null),"max-width":"800px"},{default:t(()=>[i.value?(f(),x(D,{key:0,inscription:i.value.inscription,"id-participants":i.value.participants,onValide:d},null,8,["inscription","id-participants"])):G("",!0)]),_:1},8,["model-value"])]),_:1})}}}),cn={class:"text-grey"},vn={class:"text-grey"},pn={key:0},fn=Z({__name:"FactureCard",props:{dossier:{}},setup(l){const s=l,r=F(()=>(s.dossier.Participants||[]).filter(n=>n.Participant.Statut!=Xe.Inscrit).map(n=>Te.label(n.Personne))),c=F(()=>(s.dossier.Participants||[]).filter(n=>n.Participant.Statut==Xe.Inscrit).map(n=>({Label:Te.label(n.Personne),Camp:Ce.label(n.Camp),Prix:we.montant(n.Camp.Prix),Bilan:s.dossier.Bilan.Inscrits[n.Participant.Id]})));function a(n){return!!(n.Remises.ReducEnfants||n.Remises.ReducEquipiers||n.Remises.ReducSpeciale.Cent)}function o(n){const u=[];return n.ReducEnfants&&u.push(`Enfants : ${n.ReducEnfants}%`),n.ReducEquipiers&&u.push(`Enfants : ${n.ReducEquipiers}%`),n.ReducSpeciale.Cent&&u.push(`Remise : ${we.montant(n.ReducSpeciale)}`),u.join("  ;  ")}const m=F(()=>{const n=Object.values(s.dossier.Paiements||{});return n.sort((u,i)=>new Date(u.Time).valueOf()-new Date(i.Time).valueOf()),n});return(n,u)=>(f(),x(z,{title:"Suivi financier",subtitle:r.value.length?`Les participants en liste d'attente (${r.value.join(", ")}) ne sont pas pris en compte.`:"","min-width":"900px"},{default:t(()=>[e(H,null,{default:t(()=>[e(N,null,{default:t(()=>[e(y,{cols:"3"},{default:t(()=>[...u[0]||(u[0]=[b("Participant",-1)])]),_:1}),e(y,{cols:"2",class:"text-center"},{default:t(()=>[...u[1]||(u[1]=[b("Prix du séjour",-1)])]),_:1}),e(y,{cols:"2",class:"text-center"},{default:t(()=>[...u[2]||(u[2]=[b("Prix avec option",-1)])]),_:1}),e(y,{cols:"3",class:"text-center"},{default:t(()=>[...u[3]||(u[3]=[b("Aides extérieures",-1)])]),_:1}),e(y,{cols:"2",class:"text-right"},{default:t(()=>[...u[4]||(u[4]=[b("Sous-total",-1)])]),_:1})]),_:1}),e(me,{thickness:"1",class:"my-2"}),(f(!0),W(ne,null,ve(c.value,i=>(f(),W(ne,null,[e(N,null,{default:t(()=>[e(y,{"align-self":"center",cols:"3"},{default:t(()=>[b(L(i.Label)+" ",1),u[5]||(u[5]=T("br",null,null,-1)),T("span",cn,L(i.Camp),1)]),_:2},1024),e(y,{"align-self":"center",cols:"2",class:"text-center"},{default:t(()=>[b(L(i.Prix),1)]),_:2},1024),e(y,{"align-self":"center",cols:"2",class:"text-center"},{default:t(()=>[b(L(U(we).montant(i.Bilan.AvecOption))+" ",1),u[6]||(u[6]=T("br",null,null,-1)),T("span",vn,L(i.Bilan.AvecOptionDescription),1)]),_:2},1024),e(y,{"align-self":"center",cols:"3",class:"text-center"},{default:t(()=>[i.Bilan.Aides?.length?G("",!0):(f(),W("span",pn,"-")),(f(!0),W(ne,null,ve(i.Bilan.Aides,d=>(f(),x(ke,null,{default:t(()=>[b(L(d.Structure)+" : "+L(U(we).montant(d.Montant)),1)]),_:2},1024))),256))]),_:2},1024),e(y,{"align-self":"center",cols:"2",class:"text-right"},{default:t(()=>[b(L(i.Bilan.AvecAides),1)]),_:2},1024)]),_:2},1024),a(i.Bilan)?(f(),x(N,{key:0,"no-gutters":""},{default:t(()=>[e(y,{cols:"10",class:"text-right"},{default:t(()=>[T("i",null,L(o(i.Bilan.Remises)),1)]),_:2},1024),e(y,{cols:"2",class:"text-right"},{default:t(()=>[b(L(i.Bilan.Net),1)]),_:2},1024)]),_:2},1024)):G("",!0)],64))),256)),e(me,{thickness:"1",class:"my-2"}),e(N,null,{default:t(()=>[e(y,{cols:"10",class:"text-right"},{default:t(()=>[...u[7]||(u[7]=[b("Total demandé",-1)])]),_:1}),e(y,{cols:"2",class:"text-right"},{default:t(()=>[b(L(s.dossier.Bilan.Demande),1)]),_:1})]),_:1}),e(me,{thickness:"1",class:"my-2"}),(f(!0),W(ne,null,ve(m.value,i=>(f(),x(N,null,{default:t(()=>[e(y,null,{default:t(()=>[b(" Paiement de "+L(i.Payeur)+", le "+L(U(we).date(i.Time)),1)]),_:2},1024),e(y,{cols:"2",class:"text-right"},{default:t(()=>[b(L(i.IsRemboursement?"+":"-")+L(U(we).montant(i.Montant)),1)]),_:2},1024)]),_:2},1024))),256)),e(N,null,{default:t(()=>[e(y,{cols:"10",class:"text-right"},{default:t(()=>[...u[8]||(u[8]=[b("Solde",-1)])]),_:1}),e(y,{cols:"2",class:"text-right"},{default:t(()=>[T("b",null,L(s.dossier.Bilan.Restant),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["subtitle"]))}});function Be(l){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return String(l).padStart(s,"0")}const yn=Ue({allowedValues:Function,ampm:Boolean,color:String,disabled:Boolean,displayedValue:null,double:Boolean,format:{type:Function,default:l=>l},max:{type:Number,required:!0},min:{type:Number,required:!0},scrollable:Boolean,readonly:Boolean,rotate:{type:Number,default:0},step:{type:Number,default:1},modelValue:{type:Number}},"VTimePickerClock"),zt=Re()({name:"VTimePickerClock",props:yn(),emits:{change:l=>!0,input:l=>!0},setup(l,s){let{emit:r}=s;const c=S(null),a=S(null),o=S(void 0),m=S(!1),n=S(null),u=S(null),i=Gl(I=>r("change",I),750),{textColorClasses:d,textColorStyles:p}=Kl(()=>l.color),{backgroundColorClasses:v,backgroundColorStyles:P}=Qt(()=>l.color),w=F(()=>l.max-l.min+1),g=F(()=>l.double?w.value/2:w.value),V=F(()=>360/g.value),D=F(()=>V.value*Math.PI/180),q=F(()=>l.modelValue==null?l.min:l.modelValue),O=F(()=>.62),k=F(()=>{const I=[];for(let B=l.min;B<=l.max;B=B+l.step)I.push(B);return I});Ae(()=>l.modelValue,I=>{o.value=I});function _(I){o.value!==I&&(o.value=I),r("input",I)}function te(I){return!l.allowedValues||l.allowedValues(I)}function be(I){if(!l.scrollable||l.disabled)return;I.preventDefault();const B=Math.sign(-I.deltaY||1);let ae=q.value;do ae=ae+B,ae=(ae-l.min+w.value)%w.value+l.min;while(!te(ae)&&ae!==q.value);ae!==l.displayedValue&&_(ae),i(ae)}function Q(I){return l.double&&I-l.min>=g.value}function M(I){return Q(I)?O.value:1}function ee(I){const B=l.rotate*Math.PI/180;return{x:Math.sin((I-l.min)*D.value+B)*M(I),y:-Math.cos((I-l.min)*D.value+B)*M(I)}}function J(I,B){const ae=(Math.round(I/V.value)+(B?g.value:0))%w.value+l.min;return I<360-V.value/2?ae:B?l.max-g.value+1:l.min}function E(I){const{x:B,y:ae}=ee(I);return{left:`${Math.round(50+B*50)}%`,top:`${Math.round(50+ae*50)}%`}}function K(I,B){const ae=B.x-I.x,ge=B.y-I.y;return Math.sqrt(ae*ae+ge*ge)}function pe(I,B){const ae=2*Math.atan2(B.y-I.y-K(I,B),B.x-I.x);return Math.abs(ae*180/Math.PI)}function j(I){n.value===null&&(n.value=I),u.value=I,_(I)}function $(I){if(I.preventDefault(),!m.value&&I.type!=="click"||!c.value)return;const{width:B,top:ae,left:ge}=c.value?.getBoundingClientRect(),{width:fe}=a.value?.getBoundingClientRect()??{width:0},{clientX:Ie,clientY:R}="touches"in I?I.touches[0]:I,Y={x:B/2,y:-B/2},re={x:Ie-ge,y:ae-R},de=Math.round(pe(Y,re)-l.rotate+360)%360,Pt=l.double&&K(Y,re)<(fe+fe*O.value)/4,bl=Math.ceil(15/V.value);let Ye;for(let nt=0;nt<bl;nt++)if(Ye=J(de+nt*V.value,Pt),te(Ye)||(Ye=J(de-nt*V.value,Pt),te(Ye)))return j(Ye)}function oe(I){l.disabled||(I.preventDefault(),window.addEventListener("mousemove",$),window.addEventListener("touchmove",$),window.addEventListener("mouseup",A),window.addEventListener("touchend",A),n.value=null,u.value=null,m.value=!0,$(I))}function A(I){I.stopPropagation(),window.removeEventListener("mousemove",$),window.removeEventListener("touchmove",$),window.removeEventListener("mouseup",A),window.removeEventListener("touchend",A),m.value=!1,u.value!==null&&te(u.value)&&r("change",u.value)}Le(()=>T("div",{class:Ve([{"v-time-picker-clock":!0,"v-time-picker-clock--indeterminate":l.modelValue==null,"v-time-picker-clock--readonly":l.readonly}]),onMousedown:oe,onTouchstart:oe,onWheel:be,ref:c},[T("div",{class:"v-time-picker-clock__inner",ref:a},[T("div",{class:Ve([{"v-time-picker-clock__hand":!0,"v-time-picker-clock__hand--inner":Q(l.modelValue)},d.value]),style:Ze([{transform:`rotate(${l.rotate+V.value*(q.value-l.min)}deg) scaleY(${M(q.value)})`},p.value])},null),k.value.map(I=>{const B=I===q.value;return T("div",{class:Ve([{"v-time-picker-clock__item":!0,"v-time-picker-clock__item--active":B,"v-time-picker-clock__item--disabled":l.disabled||!te(I)},B&&v.value]),style:Ze([E(I),B&&P.value])},[T("span",null,[l.format(I)])])})])]))}}),bn=Ue({ampm:Boolean,color:String,disabled:Boolean,hour:Number,minute:Number,second:Number,period:String,readonly:Boolean,useSeconds:Boolean,value:Number,viewMode:String},"VTimePickerControls"),Ht=Re()({name:"VTimePickerControls",props:bn(),emits:{"update:period":l=>!0,"update:viewMode":l=>!0},setup(l,s){let{emit:r,slots:c}=s;const{t:a}=ze();return Le(()=>{let o=l.hour;return l.ampm&&(o=o?(o-1)%12+1:12),T("div",{class:"v-time-picker-controls"},[T("div",{class:Ve({"v-time-picker-controls__time":!0,"v-time-picker-controls__time--with-seconds":l.useSeconds})},[e(h,{active:l.viewMode==="hour",color:l.viewMode==="hour"?l.color:void 0,disabled:l.disabled,variant:"tonal",class:Ve({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time--with-ampm__btn":l.ampm,"v-time-picker-controls__time--with-seconds__btn":l.useSeconds}),text:l.hour==null?"--":Be(`${o}`),onClick:()=>r("update:viewMode","hour")},null),T("span",{class:Ve(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":l.useSeconds}])},[b(":")]),e(h,{active:l.viewMode==="minute",color:l.viewMode==="minute"?l.color:void 0,class:Ve({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":l.viewMode==="minute","v-time-picker-controls__time--with-ampm__btn":l.ampm,"v-time-picker-controls__time--with-seconds__btn":l.useSeconds}),disabled:l.disabled,variant:"tonal",text:l.minute==null?"--":Be(l.minute),onClick:()=>r("update:viewMode","minute")},null),l.useSeconds&&T("span",{class:Ve(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":l.useSeconds}]),key:"secondsDivider"},[b(":")]),l.useSeconds&&e(h,{key:"secondsVal",active:l.viewMode==="second",color:l.viewMode==="second"?l.color:void 0,variant:"tonal",onClick:()=>r("update:viewMode","second"),class:Ve({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":l.viewMode==="second","v-time-picker-controls__time--with-seconds__btn":l.useSeconds}),disabled:l.disabled,text:l.second==null?"--":Be(l.second)},null),l.ampm&&T("div",{class:"v-time-picker-controls__ampm"},[e(h,{active:l.period==="am",color:l.period==="am"?l.color:void 0,class:Ve({"v-time-picker-controls__ampm__am":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":l.period==="am"}),disabled:l.disabled,text:a("$vuetify.timePicker.am"),variant:l.disabled&&l.period==="am"?"elevated":"tonal",onClick:()=>l.period!=="am"?r("update:period","am"):null},null),e(h,{active:l.period==="pm",color:l.period==="pm"?l.color:void 0,class:Ve({"v-time-picker-controls__ampm__pm":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":l.period==="pm"}),disabled:l.disabled,text:a("$vuetify.timePicker.pm"),variant:l.disabled&&l.period==="pm"?"elevated":"tonal",onClick:()=>l.period!=="pm"?r("update:period","pm"):null},null)])])])}),{}}}),gn=he(24),fl=he(12),Vn=fl.map(l=>l+12);he(60);const kn=Ue({allowedHours:[Function,Array],allowedMinutes:[Function,Array],allowedSeconds:[Function,Array],disabled:Boolean,format:{type:String,default:"ampm"},max:String,min:String,viewMode:{type:String,default:"hour"},period:{type:String,default:"am",validator:l=>["am","pm"].includes(l)},modelValue:null,readonly:Boolean,scrollable:Boolean,useSeconds:Boolean,...qe(ll({title:"$vuetify.timePicker.title"}),["landscape"])},"VTimePicker"),Cn=Re()({name:"VTimePicker",props:kn(),emits:{"update:hour":l=>!0,"update:minute":l=>!0,"update:period":l=>!0,"update:second":l=>!0,"update:modelValue":l=>!0,"update:viewMode":l=>!0},setup(l,s){let{emit:r,slots:c}=s;const{t:a}=ze(),o=S(null),m=S(null),n=S(null),u=S(null),i=S(null),d=S(null),p=$e(l,"period","am"),v=$e(l,"viewMode","hour"),P=S(null),w=S(null),g=F(()=>{let E;if(l.allowedHours instanceof Array?E=j=>l.allowedHours.includes(j):E=l.allowedHours,!l.min&&!l.max)return E;const K=l.min?Number(l.min.split(":")[0]):0,pe=l.max?Number(l.max.split(":")[0]):23;return j=>j>=Number(K)&&j<=Number(pe)&&(!E||E(j))}),V=F(()=>{let E;const K=!g.value||o.value===null||g.value(o.value);if(l.allowedMinutes instanceof Array?E=B=>l.allowedMinutes.includes(B):E=l.allowedMinutes,!l.min&&!l.max)return K?E:()=>!1;const[pe,j]=l.min?l.min.split(":").map(Number):[0,0],[$,oe]=l.max?l.max.split(":").map(Number):[23,59],A=pe*60+Number(j),I=$*60+Number(oe);return B=>{const ae=60*o.value+B;return ae>=A&&ae<=I&&K&&(!E||E(B))}}),D=F(()=>{let E;const pe=(!g.value||o.value===null||g.value(o.value))&&(!V.value||m.value===null||V.value(m.value));if(l.allowedSeconds instanceof Array?E=fe=>l.allowedSeconds.includes(fe):E=l.allowedSeconds,!l.min&&!l.max)return pe?E:()=>!1;const[j,$,oe]=l.min?l.min.split(":").map(Number):[0,0,0],[A,I,B]=l.max?l.max.split(":").map(Number):[23,59,59],ae=j*3600+$*60+Number(oe||0),ge=A*3600+I*60+Number(B||0);return fe=>{const Ie=3600*o.value+60*m.value+fe;return Ie>=ae&&Ie<=ge&&pe&&(!E||E(fe))}}),q=F(()=>l.format==="ampm");Ae(()=>l.period,E=>M(E)),Ae(()=>l.modelValue,E=>be(E)),Ne(()=>{be(l.modelValue)});function O(){return o.value!=null&&m.value!=null&&(!l.useSeconds||n.value!=null)?`${Be(o.value)}:${Be(m.value)}`+(l.useSeconds?`:${Be(n.value)}`:""):null}function k(){const E=O();E!==null&&r("update:modelValue",E)}function _(E){return E?(E-1)%12+1:12}function te(E,K){return E%12+(K==="pm"?12:0)}function be(E){if(E==null||E==="")o.value=null,m.value=null,n.value=null;else if(E instanceof Date)o.value=E.getHours(),m.value=E.getMinutes(),n.value=E.getSeconds();else{const[K,,pe,,j,$]=E.trim().toLowerCase().match(/^(\d+):(\d+)(:(\d+))?([ap]m)?$/)||new Array(6);o.value=$?te(parseInt(K,10),$):parseInt(K,10),m.value=parseInt(pe,10),n.value=parseInt(j||0,10)}p.value=o.value==null||o.value<12?"am":"pm"}function Q(E,K){const pe=g.value;if(!pe)return K;const j=q.value?K<12?fl:Vn:gn;return((j.find(oe=>pe((oe+K)%j.length+j[0]))||0)+K)%j.length+j[0]}function M(E){if(p.value=E,o.value!=null){const K=o.value+(p.value==="am"?-12:12);o.value=Q("hour",K)}return r("update:period",E),k(),!0}function ee(E){v.value==="hour"?o.value=q.value?te(E,p.value):E:v.value==="minute"?m.value=E:n.value=E}function J(E){switch(v.value||"hour"){case"hour":r("update:hour",E);break;case"minute":r("update:minute",E);break;case"second":r("update:second",E);break}const K=o.value!==null&&m.value!==null&&(l.useSeconds?n.value!==null:!0);v.value==="hour"?v.value="minute":l.useSeconds&&v.value==="minute"&&(v.value="second"),!(o.value===u.value&&m.value===i.value&&(!l.useSeconds||n.value===d.value)||O()===null)&&(u.value=o.value,i.value=m.value,l.useSeconds&&(d.value=n.value),K&&k())}Le(()=>{const E=st.filterProps(l),K=Ht.filterProps(l),pe=zt.filterProps(qe(l,["format","modelValue","min","max"]));return e(st,ue(E,{color:void 0,class:["v-time-picker",l.class],style:l.style}),{title:()=>c.title?.()??T("div",{class:"v-time-picker__title"},[a(l.title)]),header:()=>e(Ht,ue(K,{ampm:q.value,hour:o.value,minute:m.value,period:p.value,second:n.value,viewMode:v.value,"onUpdate:period":j=>M(j),"onUpdate:viewMode":j=>v.value=j,ref:P}),null),default:()=>e(zt,ue(pe,{allowedValues:v.value==="hour"?g.value:v.value==="minute"?V.value:D.value,double:v.value==="hour"&&!q.value,format:v.value==="hour"?q.value?_:j=>j:j=>Be(j,2),max:v.value==="hour"?q.value&&p.value==="am"?11:23:59,min:v.value==="hour"&&q.value&&p.value==="pm"?12:0,size:20,step:v.value==="hour"?1:5,modelValue:v.value==="hour"?o.value:v.value==="minute"?m.value:n.value,onChange:J,onInput:ee,ref:w}),null),actions:c.actions})})}}),_n=Z({__name:"TimeField",props:De({hideDetails:{type:Boolean},readonly:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=l,r=xe(l,"modelValue"),c=F(()=>new Date(r.value).toLocaleTimeString(void 0,{hour:"numeric",minute:"numeric"}));function a(n){const[u,i]=n.split(":"),d=new Date(r.value);d.setHours(Number(u),Number(i)),r.value=d.toISOString()}function o(n){const u=new Date(n),i=new Date(r.value);u.setHours(i.getHours(),i.getMinutes(),i.getSeconds()),r.value=u.toISOString()}const m=S(!1);return(n,u)=>{const i=vl;return f(),x(N,{"no-gutters":""},{default:t(()=>[e(y,null,{default:t(()=>[e(i,{class:"mr-2",label:"Date","model-value":U(Xt)(new Date(r.value)),"onUpdate:modelValue":o,"hide-details":s.hideDetails,readonly:s.readonly},null,8,["model-value","hide-details","readonly"])]),_:1}),e(y,{cols:"auto"},{default:t(()=>[...u[1]||(u[1]=[T("div",{class:"ma-2"},null,-1)])]),_:1}),e(y,null,{default:t(()=>[e(Pe,{"close-on-content-click":!1,modelValue:m.value,"onUpdate:modelValue":u[0]||(u[0]=d=>m.value=d)},{activator:t(({props:d})=>[e(ce,ue({class:"center-text"},d,{variant:"outlined",density:"compact","hide-details":s.hideDetails,label:"Moment","model-value":c.value}),null,16,["hide-details","model-value"])]),default:t(()=>[e(Cn,{"model-value":new Date(r.value),"onUpdate:modelValue":a,format:"24hr"},null,8,["model-value"])]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),xn=kt(_n,[["__scopeId","data-v-32955f86"]]),Pn=Z({__name:"ModePaiementField",props:De({hideDetails:{type:Boolean},readonly:{type:Boolean},rules:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=l,r=xe(l,"modelValue"),c=et(Xl);return(a,o)=>(f(),x(Ee,{label:"Mode de paiement",variant:"outlined",density:"compact",items:U(c),readonly:s.readonly,"hide-details":s.hideDetails,modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=m=>r.value=m),rules:s.rules},null,8,["items","readonly","hide-details","modelValue","rules"]))}}),wn=Z({__name:"PaiementEditCard",props:{paiement:{}},emits:["update","delete"],setup(l,{emit:s}){const r=l,c=s,a=S(_e(r.paiement)),o=F(()=>!0),m=S(!1);return(n,u)=>{const i=Pn,d=We,p=xn;return f(),x(z,{title:"Modifier le paiement"},{default:t(()=>[e(le,{modelValue:m.value,"onUpdate:modelValue":u[1]||(u[1]=v=>m.value=v),"max-width":"400px"},{default:t(()=>[e(z,{title:"Confirmation"},{default:t(()=>[e(H,null,{default:t(()=>[...u[11]||(u[11]=[b(" Confirmez-vous la suppression de ce paiement ? ",-1),T("br",null,null,-1),T("br",null,null,-1),b(" Attention, cette opération est irréversible. ",-1)])]),_:1}),e(se,null,{default:t(()=>[e(ie),e(h,{color:"red",onClick:u[0]||(u[0]=v=>{m.value=!1,c("delete")})},{default:t(()=>[...u[12]||(u[12]=[b("Supprimer",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(H,null,{default:t(()=>[e(N,null,{default:t(()=>[e(y,null,{default:t(()=>[e(ce,{density:"compact",variant:"outlined","hide-details":"",label:"Payé par",modelValue:a.value.Payeur,"onUpdate:modelValue":u[2]||(u[2]=v=>a.value.Payeur=v)},null,8,["modelValue"])]),_:1}),e(y,null,{default:t(()=>[e(ce,{density:"compact",variant:"outlined","hide-details":"",label:"Description (optionelle)",modelValue:a.value.Label,"onUpdate:modelValue":u[3]||(u[3]=v=>a.value.Label=v)},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:t(()=>[e(y,null,{default:t(()=>[e(i,{modelValue:a.value.Mode,"onUpdate:modelValue":u[4]||(u[4]=v=>a.value.Mode=v),"hide-details":""},null,8,["modelValue"])]),_:1}),e(y,null,{default:t(()=>[e(d,{label:"Montant",modelValue:a.value.Montant,"onUpdate:modelValue":u[5]||(u[5]=v=>a.value.Montant=v),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:t(()=>[e(y,null,{default:t(()=>[e(je,{"hide-details":"",density:"compact",label:"Remboursement ?",modelValue:a.value.IsRemboursement,"onUpdate:modelValue":u[6]||(u[6]=v=>a.value.IsRemboursement=v)},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:t(()=>[e(y,null,{default:t(()=>[e(p,{modelValue:a.value.Time,"onUpdate:modelValue":u[7]||(u[7]=v=>a.value.Time=v),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:t(()=>[e(y,null,{default:t(()=>[e(ce,{density:"compact",variant:"outlined",label:"Détails (optionnel)",modelValue:a.value.Details,"onUpdate:modelValue":u[8]||(u[8]=v=>a.value.Details=v)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(h,{color:"red",onClick:u[9]||(u[9]=v=>m.value=!0)},{default:t(()=>[...u[13]||(u[13]=[b("Supprimer le paiement",-1)])]),_:1}),e(ie),e(h,{onClick:u[10]||(u[10]=v=>c("update",a.value)),disabled:!o.value},{default:t(()=>[...u[14]||(u[14]=[b("Enregistrer",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})}}}),Dn=Z({__name:"DossierEditCard",props:{responsable:{},dossier:{}},emits:["save"],setup(l,{emit:s}){const r=l,c=s,a=S(_e(r.dossier));return(o,m)=>{const n=mt,u=$a,i=_t;return f(),x(z,null,{default:t(()=>[e(H,null,{default:t(()=>[e(N,null,{default:t(()=>[e(y,null,{default:t(()=>[e(n,{label:"Responsable","initial-personne":r.responsable,"model-value":a.value.IdResponsable,"onUpdate:modelValue":m[0]||(m[0]=d=>d?a.value.IdResponsable=d:void 0),api:{SelectPersonne:U(C).SelectPersonne.bind(U(C))}},null,8,["initial-personne","model-value","api"])]),_:1})]),_:1}),e(N,null,{default:t(()=>[e(y,null,{default:t(()=>[e(u,{label:"Adresses mail en copie",modelValue:a.value.CopiesMails,"onUpdate:modelValue":m[1]||(m[1]=d=>a.value.CopiesMails=d),rule:U(Zl).validMails()},null,8,["modelValue","rule"])]),_:1})]),_:1}),e(N,null,{default:t(()=>[e(y,null,{default:t(()=>[e(i,{"hide-details":"",modelValue:a.value.PartageAdressesOK,"onUpdate:modelValue":m[2]||(m[2]=d=>a.value.PartageAdressesOK=d),label:"Partage des coordonnées"},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:t(()=>[e(y,null,{default:t(()=>[e(i,{"hide-details":"",modelValue:a.value.DemandeFondSoutien,"onUpdate:modelValue":m[3]||(m[3]=d=>a.value.DemandeFondSoutien=d),label:"Demande le fonds de soutien"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ie),e(h,{onClick:m[4]||(m[4]=d=>c("save",a.value))},{default:t(()=>[...m[5]||(m[5]=[b("Enregistrer",-1)])]),_:1})]),_:1})]),_:1})}}}),Sn=Z({__name:"OptionJournee",props:De({camp:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=l,r=xe(l,"modelValue"),c=F(()=>(s.camp.OptionPrix.Jours||[]).map((a,o)=>o));return(a,o)=>(f(),x(z,null,{default:t(()=>[e(H,null,{default:t(()=>[o[1]||(o[1]=T("div",{class:"text-grey mb-2"}," Le prix est variable en fonction des jours de participation au camp. ",-1)),e(ea,{class:"overflow-x-auto",color:"secondary",multiple:"","model-value":r.value?.length?r.value:c.value,"onUpdate:modelValue":o[0]||(o[0]=m=>r.value=m.length==c.value.length?[]:m)},{default:t(()=>[(f(!0),W(ne,null,ve(s.camp.OptionPrix.Jours,(m,n)=>(f(),x(h,null,{default:t(()=>[b("J "+L(n+1),1)]),_:2},1024))),256))]),_:1},8,["model-value"])]),_:1})]),_:1}))}}),In=Z({__name:"OptionStatut",props:De({camp:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=l,r=xe(l,"modelValue"),c=F(()=>(s.camp.OptionPrix.Statuts||[]).map(o=>({value:o.Id,title:o.Label,subtitle:o.Description}))),a=F(()=>c.value.map(o=>o.value).includes(r.value));return(o,m)=>(f(),x(z,null,{default:t(()=>[e(H,null,{default:t(()=>[m[1]||(m[1]=T("div",{class:"text-grey mb-4"},"Le prix dépend du statut du participant.",-1)),e(Ee,{clearable:"",items:c.value,label:"Statut","model-value":a.value?r.value:null,"onUpdate:modelValue":m[0]||(m[0]=n=>r.value=n??0),variant:"outlined",density:"comfortable","hide-details":""},{item:t(({item:n,props:u})=>[e(X,ue(u,{title:n.title,subtitle:n.raw.subtitle}),null,16,["title","subtitle"])]),_:1},8,["items","model-value"])]),_:1})]),_:1}))}}),Mn={key:2},An=Z({__name:"ParticipantOptionPrix",props:{camp:{},optionAndQf:{}},emits:["update"],setup(l,{emit:s}){const r=l,c=s,a=S(_e(r.optionAndQf));return Ae(()=>r.optionAndQf,()=>a.value=_e(r.optionAndQf)),(o,m)=>{const n=Qe;return f(),x(z,{title:"Prix variable",width:"800px"},{default:t(()=>[e(H,null,{default:t(()=>[e(N,{justify:"space-evenly"},{default:t(()=>[e(y,{"align-self":"center",cols:"3"},{default:t(()=>[e(n,{modelValue:a.value.quotientFamilial,"onUpdate:modelValue":m[0]||(m[0]=u=>a.value.quotientFamilial=u),label:"Quotient familial","hide-details":""},null,8,["modelValue"])]),_:1}),e(me,{thickness:"2",vertical:""}),e(y,{"align-self":"center",cols:"8"},{default:t(()=>[r.camp.OptionPrix.Active==U(Me).PrixJour?(f(),x(Sn,{key:0,camp:r.camp,modelValue:a.value.options.Jour,"onUpdate:modelValue":m[1]||(m[1]=u=>a.value.options.Jour=u)},null,8,["camp","modelValue"])):r.camp.OptionPrix.Active==U(Me).PrixStatut?(f(),x(In,{key:1,camp:r.camp,modelValue:a.value.options.IdStatut,"onUpdate:modelValue":m[2]||(m[2]=u=>a.value.options.IdStatut=u)},null,8,["camp","modelValue"])):(f(),W("div",Mn,"Le camp ne propose pas d'option sur le prix."))]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ie),e(h,{onClick:m[3]||(m[3]=u=>c("update",a.value))},{default:t(()=>[...m[4]||(m[4]=[b("Enregistrer",-1)])]),_:1})]),_:1})]),_:1})}}}),$n={key:1,class:"mx-1"},Un={key:2,class:"mx-1"},Fn={key:3},Rn={key:4,class:"mx-1"},Ln=Z({__name:"RemisesChip",props:{remises:{}},emits:["update"],setup(l,{emit:s}){const r=l,c=s,a=F(()=>o.value.ReducEnfants!=0||o.value.ReducEquipiers!=0||o.value.ReducSpeciale.Cent!=0),o=S(_e(r.remises));Ae(()=>r.remises,()=>o.value=_e(r.remises));const m=S(!1);return(n,u)=>{const i=Qe,d=We;return f(),x(Pe,{"close-on-content-click":!1,location:"bottom",modelValue:m.value,"onUpdate:modelValue":u[4]||(u[4]=p=>m.value=p)},{activator:t(({props:p})=>[e(z,ue(p,{elevation:"1",color:"grey-lighten-2"}),{default:t(()=>[e(H,{class:"py-1 px-1"},{default:t(()=>[a.value?G("",!0):(f(),W(ne,{key:0},[b(" Pas de remises ")],64)),o.value.ReducEnfants?(f(),W("span",$n," Enfants : "+L(o.value.ReducEnfants)+"% ",1)):G("",!0),o.value.ReducEquipiers?(f(),W("span",Un," Equipiers : "+L(o.value.ReducEquipiers)+"% ",1)):G("",!0),(o.value.ReducEnfants||o.value.ReducEquipiers)&&o.value.ReducSpeciale.Cent?(f(),W("br",Fn)):G("",!0),o.value.ReducSpeciale.Cent?(f(),W("span",Rn," Remise : "+L(U(we).montant(o.value.ReducSpeciale)),1)):G("",!0)]),_:1})]),_:1},16)]),default:t(()=>[e(z,{title:"Modifier les remises",width:"400px"},{default:t(()=>[e(H,null,{default:t(()=>[e(N,null,{default:t(()=>[e(y,null,{default:t(()=>[e(i,{modelValue:o.value.ReducEnfants,"onUpdate:modelValue":u[0]||(u[0]=p=>o.value.ReducEnfants=p),label:"Remise enfants","hide-details":"",suffix:"%"},null,8,["modelValue"])]),_:1}),e(y,null,{default:t(()=>[e(i,{modelValue:o.value.ReducEquipiers,"onUpdate:modelValue":u[1]||(u[1]=p=>o.value.ReducEquipiers=p),label:"Remise équipiers","hide-details":"",suffix:"%"},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:t(()=>[e(y,null,{default:t(()=>[e(d,{class:"mt-2",modelValue:o.value.ReducSpeciale,"onUpdate:modelValue":u[2]||(u[2]=p=>o.value.ReducSpeciale=p),label:"Remise spéciale","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ie),e(h,{onClick:u[3]||(u[3]=p=>{c("update",o.value),m.value=!1})},{default:t(()=>[...u[5]||(u[5]=[b("Enregistrer",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),hn=kt(Ln,[["__scopeId","data-v-01096379"]]),Tn=Z({__name:"AideEditCard",props:{aide:{},file:{},structures:{},participant:{}},emits:["save","deleteFile","uploadFile","showStructureaides"],setup(l,{emit:s}){const r=l,c=s,a=S(_e(r.aide)),o=F(()=>Object.values(r.structures).map(m=>({value:m.Id,title:m.Nom})));return(m,n)=>{const u=_t,i=We,d=Qe,p=Ra;return f(),x(z,{title:"Modifier l'aide extérieure",subtitle:`pour ${U(Te).label(r.participant.Personne)} - ${U(Ce).label(r.participant.Camp)}`},{append:t(()=>[e(h,{onClick:n[0]||(n[0]=v=>c("showStructureaides"))},{default:t(()=>[e(ye,null,{default:t(()=>[...n[9]||(n[9]=[b("mdi-view-list",-1)])]),_:1}),n[10]||(n[10]=b(" Structures",-1))]),_:1})]),default:t(()=>[e(H,null,{default:t(()=>[e(N,null,{default:t(()=>[e(y,null,{default:t(()=>[e(Ee,{variant:"outlined",density:"comfortable",label:"Structure",items:o.value,modelValue:a.value.IdStructureaide,"onUpdate:modelValue":n[1]||(n[1]=v=>a.value.IdStructureaide=v)},null,8,["items","modelValue"])]),_:1}),e(y,null,{default:t(()=>[e(u,{modelValue:a.value.Valide,"onUpdate:modelValue":n[2]||(n[2]=v=>a.value.Valide=v),label:"Aide validée","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:t(()=>[e(y,{"align-self":"center"},{default:t(()=>[e(i,{modelValue:a.value.Valeur,"onUpdate:modelValue":n[3]||(n[3]=v=>a.value.Valeur=v),label:"Montant","hide-details":""},null,8,["modelValue"])]),_:1}),e(y,{"align-self":"center",cols:"auto"},{default:t(()=>[e(u,{"hide-details":"",label:"Par jour",modelValue:a.value.ParJour,"onUpdate:modelValue":n[4]||(n[4]=v=>a.value.ParJour=v)},null,8,["modelValue"])]),_:1}),e(y,{"align-self":"center"},{default:t(()=>[e(d,{label:"Limite",suffix:"jours",modelValue:a.value.NbJoursMax,"onUpdate:modelValue":n[5]||(n[5]=v=>a.value.NbJoursMax=v),disabled:!a.value.ParJour,hint:"0 pour ne pas limiter",min:0,"persistent-hint":""},null,8,["modelValue","disabled"])]),_:1})]),_:1}),e(p,{class:"mt-4",files:r.file?[r.file]:[],title:"Document justificatif","max-docs":1,"in-upload":!1,onDelete:n[6]||(n[6]=v=>c("deleteFile")),onUpload:n[7]||(n[7]=v=>c("uploadFile",v))},null,8,["files"])]),_:1}),e(se,null,{default:t(()=>[e(ie),e(h,{onClick:n[8]||(n[8]=v=>c("save",a.value))},{default:t(()=>[...n[11]||(n[11]=[b("Enregistrer",-1)])]),_:1})]),_:1})]),_:1},8,["subtitle"])}}}),En=Z({__name:"StructuresPannel",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(l){const s=xe(l,"modelValue"),r=F(()=>Object.values(s.value||{}).sort((u,i)=>u.Nom.localeCompare(i.Nom)));async function c(){const u=await C.StructureaideCreate();if(u===void 0)return;C.showMessage("Structure créée avec succès.");const i=s.value||{};i[u.Id]=u,s.value=i,a.value=u}const a=S(null);async function o(){const u=a.value;if(u==null||(a.value=null,await C.StructureaideUpdate(u)===void 0))return;C.showMessage("Structure modifiée avec succès.");const d=s.value||{};d[u.Id]=u,s.value=d}const m=S(null);async function n(){const u=m.value;if(u==null||(m.value=null,await C.StructureaideDelete({id:u.Id})===void 0))return;const d=s.value||{};delete d[u.Id],s.value=d,C.showMessage("Structure supprimée avec succès.")}return(u,i)=>(f(),x(z,{title:"Structures d'aide",subtitle:"Organismes pouvant distribuer une aide extérieure"},{append:t(()=>[e(h,{onClick:c},{prepend:t(()=>[e(ye,{color:"green"},{default:t(()=>[...i[5]||(i[5]=[b("mdi-plus",-1)])]),_:1})]),default:t(()=>[i[6]||(i[6]=b(" Ajouter une structure ",-1))]),_:1})]),default:t(()=>[e(H,{class:"overflow-y-auto"},{default:t(()=>[(f(!0),W(ne,null,ve(r.value,d=>(f(),x(N,null,{default:t(()=>[e(y,{"align-self":"center"},{default:t(()=>[e(ul,null,{default:t(()=>[b(L(d.Nom),1)]),_:2},1024),e(il,null,{default:t(()=>[b(L(d.Immatriculation),1)]),_:2},1024)]),_:2},1024),e(y,{"align-self":"center",style:{"font-size":"smaller"}},{default:t(()=>[(f(!0),W(ne,null,ve(d.Info.split(`
`),p=>(f(),W("div",null,L(p),1))),256))]),_:2},1024),e(y,{"align-self":"center",cols:"auto"},{default:t(()=>[e(Pe,null,{activator:t(({props:p})=>[e(h,ue({icon:"mdi-dots-vertical"},{ref_for:!0},p,{size:"x-small"}),null,16)]),default:t(()=>[e(Se,null,{default:t(()=>[e(X,{title:"Modifier","prepend-icon":"mdi-pencil",onClick:p=>a.value=U(_e)(d)},null,8,["onClick"]),e(X,{title:"Supprimer","prepend-icon":"mdi-delete",onClick:p=>m.value=d},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),_:1}),e(le,{"model-value":a.value!=null,"onUpdate:modelValue":i[3]||(i[3]=d=>a.value=null),"max-width":"600px"},{default:t(()=>[a.value!=null?(f(),x(z,{key:0,title:"Modifier la structure"},{default:t(()=>[e(H,null,{default:t(()=>[e(N,null,{default:t(()=>[e(y,null,{default:t(()=>[e(ce,{variant:"outlined",density:"compact",label:"Nom",modelValue:a.value.Nom,"onUpdate:modelValue":i[0]||(i[0]=d=>a.value.Nom=d),"hide-details":""},null,8,["modelValue"])]),_:1}),e(y,null,{default:t(()=>[e(ce,{variant:"outlined",density:"compact",label:"Immatriculation",modelValue:a.value.Immatriculation,"onUpdate:modelValue":i[1]||(i[1]=d=>a.value.Immatriculation=d),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:t(()=>[e(y,null,{default:t(()=>[e(ot,{variant:"outlined",density:"compact",label:"Informations",modelValue:a.value.Info,"onUpdate:modelValue":i[2]||(i[2]=d=>a.value.Info=d),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ie),e(h,{onClick:o},{default:t(()=>[...i[7]||(i[7]=[b("Enregistrer",-1)])]),_:1})]),_:1})]),_:1})):G("",!0)]),_:1},8,["model-value"]),e(le,{"model-value":m.value!=null,"onUpdate:modelValue":i[4]||(i[4]=d=>m.value=null),"max-width":"450px"},{default:t(()=>[m.value!=null?(f(),x(z,{key:0,title:"Confirmation"},{default:t(()=>[e(H,null,{default:t(()=>[b(" Confirmez-vous la suppression de la structure "+L(m.value.Nom)+" ? ",1),i[8]||(i[8]=T("br",null,null,-1)),i[9]||(i[9]=T("br",null,null,-1)),i[10]||(i[10]=b(" Attention, cette opération est irréversible. ",-1))]),_:1}),e(se,null,{default:t(()=>[e(ie),e(h,{color:"red",onClick:n},{default:t(()=>[...i[11]||(i[11]=[b("Supprimer",-1)])]),_:1})]),_:1})]),_:1})):G("",!0)]),_:1},8,["model-value"])]),_:1}))}}),On={key:0},Nn={key:1},Bn=Z({__name:"DossierParticipantRow",props:De({participant:{},aides:{},aidesFiles:{},hasManyParticipants:{type:Boolean}},{structures:{required:!0},structuresModifiers:{}}),emits:De(["update","delete","createAide","updateAide","deleteAide","deleteFileAide","uploadFileAide","expand"],["update:structures"]),setup(l,{emit:s}){const r=l,c=xe(l,"structures"),a=s,o=F(()=>{const g=Object.values(r.aides||{});return g.sort((V,D)=>V.Id-D.Id),g}),m=F(()=>r.participant.Camp.OptionPrix.Active==Me.NoOption&&!Ce.isQuotientFamilialActive(r.participant.Camp.OptionQuotientFamilial));function n(g){switch(r.participant.Camp.OptionPrix.Active){case Me.NoOption:return"Séjour sans option";case Me.PrixJour:const V=g.Jour?.length||0;return V==0?"Présent tous les jours":`Présent ${V} jour${V>1?"s":""}`;case Me.PrixStatut:const D=r.participant.Camp.OptionPrix.Statuts?.find(q=>q.Id==g.IdStatut);return D?`Statut ${D.Label}`:"Pas d'option."}}const u=S(!1),i=S(!1),d=F(()=>Object.values(c.value).map(g=>({value:g.Id,title:g.Nom})).sort((g,V)=>g.title.localeCompare(V.title))),p=S(null),v=S(null),P=S(null),w=S(!1);return(g,V)=>(f(),x(N,null,{default:t(()=>[e(y,{"align-self":"center",cols:"3"},{default:t(()=>[e(ul,null,{default:t(()=>[T("a",{href:"/camps",onClick:V[0]||(V[0]=it(D=>U(xt)(r.participant.Participant),["prevent"]))},L(U(Te).label(r.participant.Personne)),1)]),_:1}),e(il,null,{default:t(()=>[b(L(U(Ce).label(r.participant.Camp)),1)]),_:1})]),_:1}),e(y,{"align-self":"center",cols:"2",class:"text-center"},{default:t(()=>[e(Pe,{disabled:m.value,"close-on-content-click":!1,modelValue:u.value,"onUpdate:modelValue":V[2]||(V[2]=D=>u.value=D)},{activator:t(({props:D})=>[e(z,ue(D,{elevation:m.value?0:1,color:"grey-lighten-2"}),{default:t(()=>[e(H,{class:"py-1 px-1"},{default:t(()=>[m.value?(f(),W("div",On,"Camp sans option")):(f(),W("div",Nn,[b(L(r.participant.Participant.QuotientFamilial?`QF ${r.participant.Participant.QuotientFamilial}.`:"Pas de QF.")+" ",1),V[22]||(V[22]=T("br",null,null,-1)),b(" "+L(n(r.participant.Participant.OptionPrix)),1)]))]),_:1})]),_:1},16,["elevation"])]),default:t(()=>[e(An,{camp:r.participant.Camp,"option-and-qf":{options:r.participant.Participant.OptionPrix,quotientFamilial:r.participant.Participant.QuotientFamilial},onUpdate:V[1]||(V[1]=D=>{r.participant.Participant.OptionPrix=D.options,r.participant.Participant.QuotientFamilial=D.quotientFamilial,u.value=!1,a("update",r.participant.Participant)})},null,8,["camp","option-and-qf"])]),_:1},8,["disabled","modelValue"])]),_:1}),e(y,{"align-self":"center",class:"text-center"},{default:t(()=>[o.value.length?G("",!0):(f(),x(ke,{key:0,label:""},{default:t(()=>[...V[23]||(V[23]=[b("Aucune aide",-1)])]),_:1})),(f(!0),W(ne,null,ve(o.value,D=>(f(),x(ke,{class:"my-1","prepend-icon":"mdi-cash-plus",color:D.Valide?"green":"orange",onClick:q=>v.value=D},{close:t(()=>[e(ye,{icon:"mdi-close-circle",onClick:it(q=>P.value=D,["stop"])},null,8,["onClick"])]),default:t(()=>[b(" "+L(c.value[D.IdStructureaide].Nom)+" : "+L(U(we).montant(D.Valeur)),1)]),_:2},1032,["color","onClick"]))),256))]),_:1}),e(y,{"align-self":"center",class:"text-center",cols:"3"},{default:t(()=>[e(hn,{remises:r.participant.Participant.Remises,onUpdate:V[3]||(V[3]=D=>{r.participant.Participant.Remises=D,a("update",r.participant.Participant)})},null,8,["remises"])]),_:1}),e(y,{"align-self":"center",cols:"auto"},{default:t(()=>[e(Pe,{location:"left"},{activator:t(({props:D})=>[e(h,ue(D,{icon:"mdi-dots-vertical",size:"small"}),null,16)]),default:t(()=>[e(Se,{density:"comfortable"},{default:t(()=>[e(X,{title:"Ajouter une aide","prepend-icon":"mdi-cash-plus",onClick:V[4]||(V[4]=D=>p.value={IdParticipant:r.participant.Participant.Id,IdStructure:0})}),e(me),r.hasManyParticipants?(f(),x(X,{key:0,"prepend-icon":"mdi-arrow-expand",title:"Étendre les options et remises",subtitle:"... au reste du dossier",onClick:V[5]||(V[5]=D=>a("expand"))})):G("",!0),e(me),e(X,{title:"Supprimer","prepend-icon":"mdi-delete",onClick:V[6]||(V[6]=D=>i.value=!0)})]),_:1})]),_:1})]),_:1}),e(le,{modelValue:i.value,"onUpdate:modelValue":V[8]||(V[8]=D=>i.value=D),"max-width":"600px"},{default:t(()=>[e(z,{title:"Supprimer le participant"},{default:t(()=>[e(H,null,{default:t(()=>[...V[24]||(V[24]=[b(" Confirmez-vous la suppression de ce participant ? ",-1),T("br",null,null,-1),b(" Attention, cette opération est irréversible. ",-1)])]),_:1}),e(se,null,{default:t(()=>[e(ie),e(h,{color:"red",onClick:V[7]||(V[7]=D=>{a("delete"),i.value=!1})},{default:t(()=>[...V[25]||(V[25]=[b("Supprimer",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(le,{modelValue:w.value,"onUpdate:modelValue":V[10]||(V[10]=D=>w.value=D),"max-width":"650px"},{default:t(()=>[e(En,{modelValue:c.value,"onUpdate:modelValue":V[9]||(V[9]=D=>c.value=D)},null,8,["modelValue"])]),_:1},8,["modelValue"]),p.value!=null?(f(),x(le,{key:0,"model-value":p.value!=null,"onUpdate:modelValue":V[14]||(V[14]=D=>p.value=null),width:"600px"},{default:t(()=>[e(z,{title:"Ajouter une aide extérieure"},{append:t(()=>[e(h,{onClick:V[11]||(V[11]=D=>w.value=!0)},{default:t(()=>[e(ye,null,{default:t(()=>[...V[26]||(V[26]=[b("mdi-view-list",-1)])]),_:1}),V[27]||(V[27]=b(" Structures",-1))]),_:1})]),default:t(()=>[e(H,null,{default:t(()=>[e(Ee,{variant:"outlined",density:"comfortable",label:"Structure",items:d.value,"model-value":p.value.IdStructure==0?null:p.value.IdStructure,"onUpdate:modelValue":V[12]||(V[12]=D=>p.value.IdStructure=D)},null,8,["items","model-value"])]),_:1}),e(se,null,{default:t(()=>[e(ie),e(h,{color:"green",onClick:V[13]||(V[13]=D=>{a("createAide",p.value),p.value=null}),disabled:p.value.IdStructure==0},{default:t(()=>[...V[28]||(V[28]=[b("Créer",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])):G("",!0),v.value!=null?(f(),x(le,{key:1,"model-value":v.value!=null,"onUpdate:modelValue":V[19]||(V[19]=D=>v.value=null),"max-width":"800px"},{default:t(()=>[e(Tn,{aide:v.value,file:l.aidesFiles[v.value.Id],structures:c.value,participant:r.participant,onShowStructureaides:V[15]||(V[15]=D=>w.value=!0),onSave:V[16]||(V[16]=D=>{a("updateAide",D),v.value=null}),onDeleteFile:V[17]||(V[17]=D=>a("deleteFileAide",v.value.Id)),onUploadFile:V[18]||(V[18]=D=>a("uploadFileAide",D,v.value.Id))},null,8,["aide","file","structures","participant"])]),_:1},8,["model-value"])):G("",!0),P.value!=null?(f(),x(le,{key:2,"model-value":P.value!=null,"onUpdate:modelValue":V[21]||(V[21]=D=>P.value=null),"max-width":"600px"},{default:t(()=>[e(z,{title:"Supprimer l'aide"},{default:t(()=>[e(H,null,{default:t(()=>[...V[29]||(V[29]=[b(" Confirmez-vous la suppression de l'aide extérieure ? ",-1),T("br",null,null,-1),b(" Attention, cette opération est irréversible. ",-1)])]),_:1}),e(se,null,{default:t(()=>[e(ie),e(h,{color:"red",onClick:V[20]||(V[20]=D=>{a("deleteAide",P.value.Id),P.value=null})},{default:t(()=>[...V[30]||(V[30]=[b("Supprimer",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])):G("",!0)]),_:1}))}}),qn=Z({__name:"DossierEditor",props:{dossier:{},camps:{}},emits:["updateDossier","createParticipant","updateParticipant","deleteParticipant","expandParticipant","createAide","updateAide","deleteAide","deleteFileAide","uploadFileAide"],setup(l,{emit:s}){const r=l,c=s,a=S(null);Ne(n);const o=S(!0),m=S({});async function n(){const u=await C.StructureaidesGet();u!==void 0&&(o.value=!1,m.value=u||{})}return(u,i)=>(f(),x(z,{title:"Modifier le dossier"},{append:t(()=>[e(h,{onClick:i[0]||(i[0]=d=>a.value={IdCamp:0,IdPersonne:0,IdDossier:r.dossier.Dossier.Dossier.Id})},{prepend:t(()=>[e(ye,{color:"green"},{default:t(()=>[...i[9]||(i[9]=[b("mdi-plus",-1)])]),_:1})]),default:t(()=>[i[10]||(i[10]=b(" Ajouter un participant",-1))]),_:1})]),default:t(()=>[e(H,null,{default:t(()=>[e(N,null,{default:t(()=>[e(y,{cols:"3"},{default:t(()=>[e(Dn,{responsable:r.dossier.Dossier.Responsable,dossier:r.dossier.Dossier.Dossier,onSave:i[1]||(i[1]=d=>c("updateDossier",d))},null,8,["responsable","dossier"])]),_:1}),e(me,{thickness:"4",vertical:""}),o.value?G("",!0):(f(),x(y,{key:0},{default:t(()=>[i[11]||(i[11]=T("div",{class:"my-1"},null,-1)),(f(!0),W(ne,null,ve(r.dossier.Dossier.Participants,d=>(f(),x(Bn,{participant:d,aides:(r.dossier.Dossier.Aides||{})[d.Participant.Id],"aides-files":r.dossier.Dossier.AidesFiles||{},"has-many-participants":(r.dossier.Dossier.Participants?.length||0)>1,structures:m.value,"onUpdate:structures":i[2]||(i[2]=p=>m.value=p),onCreateAide:i[3]||(i[3]=p=>c("createAide",p)),onDeleteAide:i[4]||(i[4]=p=>c("deleteAide",p)),onUpdateAide:i[5]||(i[5]=p=>c("updateAide",p)),onDeleteFileAide:i[6]||(i[6]=p=>c("deleteFileAide",p)),onUploadFileAide:i[7]||(i[7]=(p,v)=>c("uploadFileAide",p,v)),onUpdate:i[8]||(i[8]=p=>c("updateParticipant",p)),onDelete:p=>c("deleteParticipant",d.Participant.Id),onExpand:p=>c("expandParticipant",d.Participant)},null,8,["participant","aides","aides-files","has-many-participants","structures","onDelete","onExpand"]))),256))]),_:1}))]),_:1})]),_:1})]),_:1}))}}),jn={class:"mr-1"},Yn=["onClick"],zn={class:"overflow-y-auto",style:{"max-height":"65vh"}},Hn=["href"],Qn=Z({__name:"DossierDetailsPannel",props:{dossier:{},camps:{}},emits:["updateDossier","deleteDossier","mergeDossier","createParticipant","updateParticipant","deleteParticipant","expandParticipant","createAide","updateAide","deleteAide","deleteFileAide","uploadFileAide","createPaiement","updatePaiement","deletePaiement","sendMessage","deleteMessage","sendFacture"],setup(l,{expose:s,emit:r}){const c=l,a=r;s({showEditPaiement:p,showEditDossier:u});const o=F(()=>ta(c.dossier.Dossier,C.isFondsSoutien?Mt.FondSoutien:Mt.Backoffice)),m=S(!1),n=S(!1);function u(){n.value=!0}const i=S(null),d=S(null);function p(k){d.value=k}const v="Repère",P=S(!1);async function w(){await vt(c.dossier.EspacepersoURL),C.showMessage("Lien vers l'espace personnel copié.")}async function g(){await vt(c.dossier.VirementCode),C.showMessage("Identifiant de virement copié.")}async function V(k){await vt(k),C.showMessage("IBAN copié.")}const D=S(!1),q=S(!1),O=S("");return(k,_)=>{const te=Aa,be=at,Q=mt;return f(),x(z,{title:`Dossier de ${c.dossier.Dossier.Responsable}`,class:"ml-2"},{subtitle:t(()=>[(f(!0),W(ne,null,ve(c.dossier.Dossier.Participants,M=>(f(),W("span",jn,[T("a",{href:"/camps",onClick:it(ee=>U(xt)(M.Participant),["prevent"])},L(U(Te).label(M.Personne)),9,Yn)]))),256))]),append:t(()=>[e(h,{icon:"mdi-pencil",onClick:_[0]||(_[0]=M=>n.value=!0),class:"mx-1"}),e(Pe,null,{activator:t(({props:M})=>[e(h,ue(M,{icon:"mdi-dots-vertical",size:"small",class:"mx-1"}),null,16)]),default:t(()=>[e(Se,{density:"compact"},{default:t(()=>[e(X,{"prepend-icon":"mdi-email",onClick:_[1]||(_[1]=M=>q.value=!0),title:"Envoyer un message",subtitle:"Notification par email"}),e(X,{"prepend-icon":"mdi-invoice-send",onClick:_[2]||(_[2]=M=>a("sendFacture")),title:"Envoyer une demande de règlement",subtitle:"Notification par email"}),e(me),e(X,{"prepend-icon":"mdi-cash-plus",onClick:_[3]||(_[3]=M=>a("createPaiement")),title:"Ajouter un paiement"}),e(me),e(X,{"prepend-icon":"mdi-link",onClick:_[4]||(_[4]=M=>P.value=!0),title:"Afficher les identifiants"}),e(me),e(X,{"prepend-icon":"mdi-file-move",onClick:_[5]||(_[5]=M=>D.value=!0),title:"Fusionner vers ..."}),e(me),e(X,{onClick:_[6]||(_[6]=M=>m.value=!0),title:"Supprimer"},{prepend:t(()=>[e(ye,{color:"red"},{default:t(()=>[..._[35]||(_[35]=[b("mdi-delete",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),default:t(()=>[e(H,null,{default:t(()=>[e(N,null,{default:t(()=>[e(y,{class:"ml-2 mb-1 text-center"},{default:t(()=>[e(Pe,null,{activator:t(({props:M})=>[e(ke,ue(M,{"prepend-icon":"mdi-currency-eur",color:U(we).colorStatutPaiement(c.dossier.Dossier.Bilan.Statut)}),{default:t(()=>[b(L(c.dossier.Dossier.Bilan.Recu)+" payé sur "+L(c.dossier.Dossier.Bilan.Demande),1)]),_:1},16,["color"])]),default:t(()=>[e(fn,{dossier:c.dossier.Dossier},null,8,["dossier"])]),_:1})]),_:1})]),_:1}),T("div",zn,[e(Ma,{side:"end",class:"mt-4",density:"compact"},{default:t(()=>[(f(!0),W(ne,null,ve(o.value,(M,ee)=>(f(),x(te,{event:M,key:ee,onEditPaiement:_[7]||(_[7]=J=>d.value=J),onDeleteMessage:_[8]||(_[8]=J=>a("deleteMessage",J))},null,8,["event"]))),128))]),_:1})])]),_:1}),e(le,{modelValue:m.value,"onUpdate:modelValue":_[10]||(_[10]=M=>m.value=M),"max-width":"600px"},{default:t(()=>[e(z,{title:"Supprimer le dossier"},{default:t(()=>[e(H,null,{default:t(()=>[..._[36]||(_[36]=[b(" Confirmez-vous la suppression du dossier et de ses participants ? ",-1),T("br",null,null,-1),T("br",null,null,-1),b(" Attention, cette opération est irréversible. ",-1)])]),_:1}),e(se,null,{default:t(()=>[e(ie),e(h,{color:"red",onClick:_[9]||(_[9]=M=>{a("deleteDossier"),m.value=!1})},{default:t(()=>[..._[37]||(_[37]=[b("Supprimer",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),i.value!=null?(f(),x(le,{key:0,"model-value":i.value!=null,"onUpdate:modelValue":_[14]||(_[14]=M=>i.value=null),"max-width":"600px"},{default:t(()=>[e(z,{title:"Ajouter un participant"},{default:t(()=>[e(H,null,{default:t(()=>[e(N,null,{default:t(()=>[e(y,{cols:"12"},{default:t(()=>[e(be,{label:"Camp",camps:c.camps,modelValue:i.value.IdCamp,"onUpdate:modelValue":_[11]||(_[11]=M=>i.value.IdCamp=M)},null,8,["camps","modelValue"])]),_:1}),e(y,{cols:"12"},{default:t(()=>[e(Q,{label:"Personne","initial-personne":"",modelValue:i.value.IdPersonne,"onUpdate:modelValue":_[12]||(_[12]=M=>i.value.IdPersonne=M),api:{SelectPersonne:U(C).SelectPersonne.bind(U(C))}},null,8,["modelValue","api"])]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ie),e(h,{color:"green",disabled:i.value.IdPersonne==0||i.value.IdCamp==0,onClick:_[13]||(_[13]=M=>{a("createParticipant",i.value),i.value=null})},{default:t(()=>[..._[38]||(_[38]=[b("Ajouter",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])):G("",!0),e(le,{modelValue:n.value,"onUpdate:modelValue":_[25]||(_[25]=M=>n.value=M)},{default:t(()=>[e(qn,{dossier:c.dossier,camps:c.camps,onUpdateDossier:_[15]||(_[15]=M=>a("updateDossier",M)),onCreateParticipant:_[16]||(_[16]=M=>a("createParticipant",M)),onUpdateParticipant:_[17]||(_[17]=M=>a("updateParticipant",M)),onDeleteParticipant:_[18]||(_[18]=M=>a("deleteParticipant",M)),onExpandParticipant:_[19]||(_[19]=M=>a("expandParticipant",M)),onCreateAide:_[20]||(_[20]=M=>a("createAide",M)),onUpdateAide:_[21]||(_[21]=M=>a("updateAide",M)),onDeleteAide:_[22]||(_[22]=M=>a("deleteAide",M)),onDeleteFileAide:_[23]||(_[23]=M=>a("deleteFileAide",M)),onUploadFileAide:_[24]||(_[24]=(M,ee)=>a("uploadFileAide",M,ee))},null,8,["dossier","camps"])]),_:1},8,["modelValue"]),d.value!=null?(f(),x(le,{key:1,"model-value":d.value!=null,"onUpdate:modelValue":_[28]||(_[28]=M=>d.value=null),"max-width":"600px"},{default:t(()=>[e(wn,{paiement:d.value,onUpdate:_[26]||(_[26]=M=>{a("updatePaiement",M),d.value=null}),onDelete:_[27]||(_[27]=M=>{a("deletePaiement",d.value),d.value=null})},null,8,["paiement"])]),_:1},8,["model-value"])):G("",!0),e(le,{modelValue:P.value,"onUpdate:modelValue":_[29]||(_[29]=M=>P.value=M),"max-width":"800px"},{default:t(()=>[e(z,{title:"Liens et identifiants"},{default:t(()=>[e(H,null,{default:t(()=>[e(N,null,{default:t(()=>[e(y,{cols:"3"},{default:t(()=>[..._[39]||(_[39]=[b("Espace personnel",-1)])]),_:1}),e(y,{class:"text-truncate"},{default:t(()=>[T("a",{href:c.dossier.EspacepersoURL,target:"_blank"},L(c.dossier.EspacepersoURL),9,Hn)]),_:1}),e(y,{"align-self":"center",cols:"auto"},{default:t(()=>[e(h,{size:"small",icon:"mdi-content-copy",onClick:w})]),_:1})]),_:1}),(f(!0),W(ne,null,ve(c.dossier.BankAccounts,M=>(f(),x(N,null,{default:t(()=>[e(y,{cols:"3"},{default:t(()=>[b("RIB ("+L(U(v))+")",1)]),_:1}),e(y,{cols:"3"},{default:t(()=>[b(L(M[0]),1)]),_:2},1024),e(y,null,{default:t(()=>[b(L(M[1]),1)]),_:2},1024),e(y,{"align-self":"center",cols:"auto"},{default:t(()=>[e(h,{size:"small",icon:"mdi-content-copy",onClick:()=>V(M[1])},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),256)),e(N,null,{default:t(()=>[e(y,{cols:"3"},{default:t(()=>[..._[40]||(_[40]=[b("Identification de virement",-1)])]),_:1}),e(y,null,{default:t(()=>[b(L(c.dossier.VirementCode),1)]),_:1}),e(y,{"align-self":"center",cols:"auto"},{default:t(()=>[e(h,{size:"small",icon:"mdi-content-copy",onClick:g})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(le,{modelValue:D.value,"onUpdate:modelValue":_[31]||(_[31]=M=>D.value=M),"max-width":"600px"},{default:t(()=>[e(pl,{from:c.dossier.Dossier.Dossier.Id,onMerge:_[30]||(_[30]=M=>{a("mergeDossier",M),D.value=!1})},null,8,["from"])]),_:1},8,["modelValue"]),e(le,{modelValue:q.value,"onUpdate:modelValue":_[34]||(_[34]=M=>q.value=M),"max-width":"600px"},{default:t(()=>[e(z,{title:"Nouveau message",subtitle:"Envoie un message sur le fil de suivi et une notification par mail."},{default:t(()=>[e(H,null,{default:t(()=>[e(N,null,{default:t(()=>[e(y,null,{default:t(()=>[e(ot,{rows:"5",variant:"outlined",modelValue:O.value,"onUpdate:modelValue":_[32]||(_[32]=M=>O.value=M)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ie),e(h,{disabled:!O.value.length,onClickOnce:_[33]||(_[33]=M=>{a("sendMessage",O.value),q.value=!1})},{default:t(()=>[..._[41]||(_[41]=[b("Envoyer",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["title"])}}}),Wn=Z({__name:"CreateDossierCard",emits:["create"],setup(l,{emit:s}){const r=s,c=S(0);return(a,o)=>{const m=mt;return f(),x(z,{title:"Créer un dossier"},{default:t(()=>[e(H,null,{default:t(()=>[e(N,null,{default:t(()=>[e(y,null,{default:t(()=>[e(m,{label:"Responsable légal",modelValue:c.value,"onUpdate:modelValue":o[0]||(o[0]=n=>c.value=n),"initial-personne":"",api:{SelectPersonne:U(C).SelectPersonne.bind(U(C))}},null,8,["modelValue","api"])]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ie),e(h,{color:"green",disabled:c.value==0,onClick:o[1]||(o[1]=n=>r("create",c.value))},{default:t(()=>[...o[2]||(o[2]=[b("Créer",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})}}}),Jn=Z({__name:"DossierList",props:De({camps:{},allowFondsSoutien:{type:Boolean},selected:{}},{query:{required:!0},queryModifiers:{}}),emits:De(["click","update"],["update:query"]),setup(l,{expose:s,emit:r}){const c=l,a=r,o=xe(l,"query");s({searchDossiers:n}),Ae(()=>o.value,n,{immediate:!0});const m=S(null);async function n(){const u=await C.DossiersSearch(o.value);u!==void 0&&(m.value=u,a("update",u))}return(u,i)=>{const d=at,p=nl;return f(),W("div",null,[e(N,null,{default:t(()=>[e(y,{"align-self":"center"},{default:t(()=>[e(p,{density:"compact",variant:"outlined","prepend-inner-icon":"mdi-magnify",label:"Rechercher un dossier","hide-details":"",clearable:"",modelValue:o.value.Pattern,"onUpdate:modelValue":[i[5]||(i[5]=v=>o.value.Pattern=v),n]},{"append-inner":t(()=>[o.value.IdCamp.Valid?(f(),x(ke,{key:0,class:"ml-1",size:"small","prepend-icon":"mdi-bed"},{default:t(()=>[b(L(c.camps.find(v=>v.Id==o.value.IdCamp.Id)?.Label),1)]),_:1})):G("",!0),o.value.Attente!=U(ia).EmptyQA?(f(),x(ke,{key:1,class:"ml-1",size:"small","prepend-icon":"mdi-clock"},{default:t(()=>[b(L(U(At)[o.value.Attente]),1)]),_:1})):G("",!0),o.value.Reglement!=U(sa).EmptyQR?(f(),x(ke,{key:2,class:"ml-1",size:"small","prepend-icon":"mdi-currency-eur"},{default:t(()=>[b(L(U($t)[o.value.Reglement]),1)]),_:1})):G("",!0),o.value.OnlyFondSoutien?(f(),x(ke,{key:3,class:"ml-1",size:"small"},{default:t(()=>[...i[6]||(i[6]=[b(" Fonds de soutien ",-1)])]),_:1})):G("",!0)]),append:t(()=>[e(Pe,{location:"left top","close-on-content-click":!1},{activator:t(({props:v})=>[e(h,ue(v,{size:"small",variant:"flat",icon:""}),{default:t(()=>[e(ye,null,{default:t(()=>[...i[7]||(i[7]=[b("mdi-filter-cog",-1)])]),_:1}),e(Ct,{activator:"parent",text:"Autres critères de recherche"})]),_:1},16)]),default:t(()=>[e(z,{"min-width":"400px",title:"Filtrer les dossiers"},{default:t(()=>[e(H,null,{default:t(()=>[e(N,null,{default:t(()=>[e(y,null,{default:t(()=>[e(d,{label:"Camp",camps:c.camps,"model-value":U(na)(U(ua)(o.value.IdCamp)),"onUpdate:modelValue":i[0]||(i[0]=v=>{o.value.IdCamp=U(la)(U(aa)(v)),n()})},null,8,["camps","model-value"])]),_:1})]),_:1}),e(N,null,{default:t(()=>[e(y,null,{default:t(()=>[e(Ee,{density:"compact",variant:"outlined",label:"Liste d'attente",modelValue:o.value.Attente,"onUpdate:modelValue":[i[1]||(i[1]=v=>o.value.Attente=v),n],items:U(et)(U(At)),"hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1}),e(N,null,{default:t(()=>[e(y,null,{default:t(()=>[e(Ee,{density:"compact",variant:"outlined",label:"Réglement",modelValue:o.value.Reglement,"onUpdate:modelValue":[i[2]||(i[2]=v=>o.value.Reglement=v),n],items:U(et)(U($t)),"hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1}),e(N,null,{default:t(()=>[e(y,null,{default:t(()=>[e(Lt,{label:"Trier selon les nouveaux messages",hint:"Affiche les nouveaux messages en premier.","persistent-hint":"",density:"compact",color:"light-blue-darken-3",modelValue:o.value.SortByNewMessages,"onUpdate:modelValue":[i[3]||(i[3]=v=>o.value.SortByNewMessages=v),n]},null,8,["modelValue"])]),_:1})]),_:1}),c.allowFondsSoutien?(f(),x(N,{key:0},{default:t(()=>[e(y,null,{default:t(()=>[e(Lt,{label:"Fonds de soutien",hint:"N'affiche que les dossiers demandant le fonds de soutien.","persistent-hint":"",density:"compact",color:"orange",modelValue:o.value.OnlyFondSoutien,"onUpdate:modelValue":[i[4]||(i[4]=v=>o.value.OnlyFondSoutien=v),n]},null,8,["modelValue"])]),_:1})]),_:1})):G("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),m.value!=null?(f(),x(Se,{key:0,class:"mt-2",selected:c.selected?[c.selected]:void 0},{default:t(()=>[m.value.Dossiers?.length?G("",!0):(f(),x(X,{key:0,class:"text-center"},{default:t(()=>[...i[8]||(i[8]=[T("i",null,"Aucun dossier ne correspond à votre recherche.",-1)])]),_:1})),(f(!0),W(ne,null,ve(m.value.Dossiers,(v,P)=>(f(),x(X,{rounded:"",key:P,title:v.Responsable,subtitle:v.Participants,value:v.Id,onClick:w=>a("click",v),class:"my-1"},dt({_:2},[v.NewMessages?{name:"append",fn:t(()=>[e(wa,{color:"light-blue-darken-3",content:v.NewMessages},null,8,["content"])]),key:"0"}:void 0]),1032,["title","subtitle","value","onClick"]))),128))]),_:1},8,["selected"])):G("",!0)])}}}),Gn=Z({__name:"SendDocumentsCampCard",props:{camps:{}},emits:["send"],setup(l,{emit:s}){const r=l,c=s,a=S(0),o=S(null);async function m(){const i=await C.EventsSendDocumentsCampPreview({idCamp:a.value});i!==void 0&&(o.value=i,n.value=(i.Dossiers||[]).filter(d=>!d.DocumentsSent).map(d=>d.Id))}const n=S([]),u=F(()=>n.value.length==(o.value?.Dossiers||[]).length);return(i,d)=>{const p=at;return f(),x(z,{title:"Envoyer les documents d'un séjour"},{default:t(()=>[e(H,null,{default:t(()=>[e(N,null,{default:t(()=>[e(y,{"align-self":"center",cols:"5"},{default:t(()=>[e(p,{camps:r.camps,label:"Séjour",modelValue:a.value,"onUpdate:modelValue":[d[0]||(d[0]=v=>a.value=v),m]},null,8,["camps","modelValue"])]),_:1}),e(y,{"align-self":"center"},{default:t(()=>[o.value?(f(),x(z,{key:0,subtitle:"Dossiers à contacter"},dt({default:t(()=>[e(H,null,{default:t(()=>[e(Se,{selectable:"",selected:n.value,"onUpdate:selected":d[2]||(d[2]=v=>n.value=v),"select-strategy":"leaf"},{default:t(()=>[(f(!0),W(ne,null,ve(o.value.Dossiers,v=>(f(),x(X,{title:v.Responsable,subtitle:v.Participants,value:v.Id,rounded:"",class:"my-1"},{append:t(({isSelected:P,select:w})=>[e(N,null,{default:t(()=>[e(y,null,{default:t(()=>[v.DocumentsSent?(f(),x(ke,{key:0,color:"green",class:"mr-2"},{default:t(()=>[...d[4]||(d[4]=[b("Envoyés",-1)])]),_:1})):G("",!0)]),_:2},1024),e(y,null,{default:t(()=>[e(sl,{density:"compact","hide-details":"","model-value":P,"onUpdate:modelValue":w},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["title","subtitle","value"]))),256))]),_:1},8,["selected"])]),_:1})]),_:2},[o.value.Dossiers?.length?{name:"append",fn:t(()=>[e(je,{label:"Tout sélectionner",density:"compact","hide-details":"",indeterminate:!!n.value.length&&n.value.length!=(o.value.Dossiers||[]).length,"model-value":n.value.length==(o.value.Dossiers||[]).length,"onUpdate:modelValue":d[1]||(d[1]=v=>n.value=u.value?[]:(o.value.Dossiers||[]).map(P=>P.Id))},null,8,["indeterminate","model-value"])]),key:"0"}:void 0]),1024)):G("",!0)]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ie),e(h,{disabled:!a.value||!n.value.length,onClick:d[3]||(d[3]=v=>c("send",a.value,n.value))},{append:t(()=>[e(ye,null,{default:t(()=>[...d[5]||(d[5]=[b("mdi-send",-1)])]),_:1})]),default:t(()=>[d[6]||(d[6]=b(" Envoyer ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})}}}),Kn=Z({__name:"SendRelancePaiementCard",props:{camps:{}},emits:["send"],setup(l,{emit:s}){const r=l,c=s,a=S(0),o=S([]);async function m(){const i=await C.EventsSendRelancePaiementPreview({idCamp:a.value});i!==void 0&&(o.value=i||[],n.value=(i||[]).map(d=>d.Id))}const n=S([]),u=F(()=>n.value.length==o.value.length);return(i,d)=>{const p=at;return f(),x(z,{title:"Envoyer une relance de paiement"},{default:t(()=>[e(H,null,{default:t(()=>[e(N,null,{default:t(()=>[e(y,{"align-self":"center",cols:"5"},{default:t(()=>[e(p,{camps:r.camps,label:"Séjour",modelValue:a.value,"onUpdate:modelValue":[d[0]||(d[0]=v=>a.value=v),m]},null,8,["camps","modelValue"])]),_:1}),e(y,{"align-self":"center"},{default:t(()=>[o.value?(f(),x(z,{key:0,subtitle:"Dossiers à relancer"},dt({default:t(()=>[e(H,null,{default:t(()=>[e(Se,{selectable:"",selected:n.value,"onUpdate:selected":d[2]||(d[2]=v=>n.value=v),"select-strategy":"leaf",density:"comfortable"},{default:t(()=>[(f(!0),W(ne,null,ve(o.value,(v,P)=>(f(),x(X,{key:v.Id,title:v.Responsable,subtitle:U(oa)(v.LastEventFacture)?"":`Dernière demande : ${U(we).time(v.LastEventFacture)}`,value:v.Id,rounded:"",class:"my-1"},{append:t(({isSelected:w,select:g})=>[e(N,null,{default:t(()=>[e(y,{"align-self":"center"},{default:t(()=>[e(ke,{class:"mr-2",color:U(we).colorStatutPaiement(v.Bilan.Statut)},{default:t(()=>[b(L(v.Bilan.Recu)+" / "+L(v.Bilan.Demande),1)]),_:2},1032,["color"])]),_:2},1024),e(y,{"align-self":"center"},{default:t(()=>[e(sl,{density:"compact","hide-details":"","model-value":w,"onUpdate:modelValue":g},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["title","subtitle","value"]))),128))]),_:1},8,["selected"])]),_:1})]),_:2},[o.value.length?{name:"append",fn:t(()=>[e(je,{label:"Tout sélectionner",density:"compact","hide-details":"",indeterminate:!!n.value.length&&n.value.length!=o.value.length,"model-value":n.value.length==o.value.length,"onUpdate:modelValue":d[1]||(d[1]=v=>n.value=u.value?[]:o.value.map(P=>P.Id))},null,8,["indeterminate","model-value"])]),key:"0"}:void 0]),1024)):G("",!0)]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ie),e(h,{disabled:!a.value||!n.value.length,onClick:d[3]||(d[3]=v=>c("send",a.value,n.value))},{append:t(()=>[e(ye,null,{default:t(()=>[...d[4]||(d[4]=[b("mdi-send",-1)])]),_:1})]),default:t(()=>[d[5]||(d[5]=b(" Envoyer ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})}}}),Xn={key:1,class:"text-center font-italic my-6"},Zn=Z({__name:"PannelDossiers",props:{initialDossier:{}},setup(l){const s=l;Ne(()=>{m(),s.initialDossier!==void 0&&d(s.initialDossier)}),Ae(()=>s.initialDossier,()=>{s.initialDossier!==void 0&&d(s.initialDossier)});const r=Ut("detailsPannel"),c=S(null),a=S(Ca()),o=S([]);async function m(){const R=await C.GetCamps();R!==void 0&&(o.value=R||[])}function n(R){c.value={length:R.Dossiers?.length||0,total:R.Total}}const u=Ut("dossierList");function i(){u.value?.searchDossiers()}async function d(R){await v(R),a.value=_a(R)}const p=S(null);async function v(R){const Y=await C.DossiersLoad({id:R});Y!==void 0&&(p.value=Y)}async function P(R){v(R.Id),await C.EventsMarkMessagesSeen({idDossier:R.Id})!==void 0&&i()}async function w(){p.value!=null&&v(p.value.Dossier.Dossier.Id)}const g=S(!1);async function V(R){g.value=!1;const Y=await C.DossiersCreate({idResponsable:R});Y!==void 0&&(C.showMessage("Dossier créé avec succès."),await d(Y.Id),r.value?.showEditDossier())}async function D(R){const Y=await C.DossiersUpdate(R);Y!==void 0&&(C.showMessage("Dossier mis à jour avec succès."),p.value!=null&&(p.value.Dossier.Dossier=R,p.value.Dossier.Responsable=Y.Responsable),i())}async function q(){if(p.value==null)return;const R=p.value.Dossier.Dossier.Id;await C.DossiersDelete({id:R})!==void 0&&(C.showMessage("Dossier supprimé avec succès."),p.value=null,i())}async function O(R){await C.DossiersMerge(R)!==void 0&&(C.showMessage("Dossier fusionné avec succès."),i(),v(R.To))}async function k(R){await C.ParticipantsCreate(R)!==void 0&&(C.showMessage("Participant ajouté avec succès."),w())}async function _(R){await C.ParticipantsUpdate(R)!==void 0&&(C.showMessage("Réglages du participant modifiés avec succès."),w())}async function te(R){await C.ParticipantsDelete({id:R})!==void 0&&(C.showMessage("Participant supprimé avec succès."),w())}async function be(R){if(p.value==null)return;const Y=p.value.Dossier.Participants?.map(de=>de.Participant).filter(de=>de.Id!=R.Id)||[];!Y.length||(Y.forEach(de=>{de.Remises=R.Remises,de.QuotientFamilial=R.QuotientFamilial,de.IdCamp==R.IdCamp&&(de.OptionPrix=R.OptionPrix)}),(await Promise.all(Y.map(de=>C.ParticipantsUpdate(de)))).includes(void 0))||(C.showMessage("Réglages des participants modifiés avec succès."),w())}async function Q(R){const Y=await C.AidesCreate(R);if(Y===void 0||(C.showMessage("Aide ajoutée avec succès."),p.value==null))return;const re=p.value.Dossier.Aides||{},de=re[R.IdParticipant]||{};de[Y.Id]=Y,re[R.IdParticipant]=de,p.value.Dossier.Aides=re}async function M(R){await C.AidesUpdate(R)!==void 0&&(C.showMessage("Aide modifiée avec succès."),w())}async function ee(R){await C.AidesJustificatifDelete({idAide:R})!==void 0&&(C.showMessage("Justificatif supprimé avec succès."),p.value!=null&&p.value.Dossier.AidesFiles&&delete p.value.Dossier.AidesFiles[R])}async function J(R,Y){const re=await C.AidesJustificatifUpload(R,{idAide:Y});if(re!==void 0&&(C.showMessage("Justificatif téléversé avec succès."),p.value!=null)){const de=p.value.Dossier.AidesFiles||{};de[Y]=re,p.value.Dossier.AidesFiles=de}}async function E(R){await C.AidesDelete({id:R})!==void 0&&(C.showMessage("Aide supprimée avec succès."),w())}async function K(){if(p.value==null)return;const R=await C.PaiementsCreate({idDossier:p.value.Dossier.Dossier.Id});R!==void 0&&(C.showMessage("Paiement créé avec succès."),w(),r.value?.showEditPaiement(R))}async function pe(R){await C.PaiementsUpdate(R)!==void 0&&(C.showMessage("Paiement modifié avec succès."),w())}async function j(R){await C.PaiementsDelete({id:R.Id})!==void 0&&(C.showMessage("Paiement supprimé avec succès."),w())}async function $(R){p.value==null||await C.EventsSendMessage({IdDossier:p.value.Dossier.Dossier.Id,Contenu:R})===void 0||(C.showMessage("Message envoyé avec succès."),w())}async function oe(R){await C.EventsDelete({id:R.Id})!==void 0&&(C.showMessage("Message supprimé avec succès."),w())}async function A(){p.value==null||await C.EventsSendFacture({idDossier:p.value.Dossier.Dossier.Id})===void 0||(C.showMessage("Demande de règlement envoyé avec succès."),w())}const I=S(!1),B=S(null);async function ae(R,Y){B.value={Current:0,Total:Y.length};const re=await C.EventsSendDocumentsCamp({IdCamp:R,IdDossiers:Y});if(re===void 0){B.value=null;return}await yt(re,de=>B.value=de,de=>C.onError("Envoi des documents",de)),B.value=null,w(),C.showMessage("Documents du séjour envoyés avec succès.")}const ge=S(!1),fe=S(null);async function Ie(R,Y){fe.value={Current:0,Total:Y.length};const re=await C.EventsSendRelancePaiement({IdDossiers:Y});if(re===void 0){fe.value=null;return}await yt(re,de=>fe.value=de,de=>C.onError("Envoi de la relance",de)),fe.value=null,w(),C.showMessage("Toutes les relances ont été envoyées avec succès.")}return(R,Y)=>(f(),x(N,{"no-gutters":"",class:"ma-2"},{default:t(()=>[e(y,{cols:"6"},{default:t(()=>[e(z,{title:"Dossiers",subtitle:c.value==null?"-":`${c.value.length} affiché(s) / ${c.value.total}`},{append:t(()=>[e(h,{icon:"",size:"small",onClick:Y[0]||(Y[0]=re=>g.value=!0)},{default:t(()=>[e(ye,{color:"green"},{default:t(()=>[...Y[7]||(Y[7]=[b("mdi-plus",-1)])]),_:1})]),_:1}),e(me,{thickness:"1",vertical:"",class:"mx-2"}),e(h,{size:"small"},{prepend:t(()=>[e(ye,null,{default:t(()=>[...Y[8]||(Y[8]=[b("mdi-send-circle-outline",-1)])]),_:1})]),default:t(()=>[Y[9]||(Y[9]=b(" Actions ",-1)),e(Pe,{activator:"parent"},{default:t(()=>[e(Se,null,{default:t(()=>[e(X,{title:"Documents...",subtitle:"Paramétrer et envoyer les documents d'un séjour","prepend-icon":"mdi-mail",onClick:Y[1]||(Y[1]=re=>I.value=!0)}),e(me),e(X,{title:"Relance de paiement...",subtitle:"Paramétrer et envoyer une relance, pour un séjour","prepend-icon":"mdi-invoice-send",onClick:Y[2]||(Y[2]=re=>ge.value=!0)})]),_:1})]),_:1})]),_:1})]),default:t(()=>[e(H,null,{default:t(()=>[e(Jn,{camps:o.value,"allow-fonds-soutien":U(C).isFondsSoutien,selected:p.value?.Dossier.Dossier.Id,query:a.value,"onUpdate:query":Y[3]||(Y[3]=re=>a.value=re),onClick:P,onUpdate:n,ref_key:"dossierList",ref:u},null,8,["camps","allow-fonds-soutien","selected","query"])]),_:1})]),_:1},8,["subtitle"])]),_:1}),e(y,{cols:"6"},{default:t(()=>[p.value!=null?(f(),x(Qn,{key:0,dossier:p.value,camps:o.value,onUpdateDossier:D,onDeleteDossier:q,onMergeDossier:O,onCreateParticipant:k,onUpdateParticipant:_,onDeleteParticipant:te,onExpandParticipant:be,onCreateAide:Q,onDeleteAide:E,onUpdateAide:M,onDeleteFileAide:ee,onUploadFileAide:J,onCreatePaiement:K,onUpdatePaiement:pe,onDeletePaiement:j,onSendMessage:$,onDeleteMessage:oe,onSendFacture:A,ref_key:"detailsPannel",ref:r},null,8,["dossier","camps"])):(f(),W("div",Xn," Sélectionner un dossier... "))]),_:1}),e(le,{modelValue:g.value,"onUpdate:modelValue":Y[4]||(Y[4]=re=>g.value=re),"max-width":"400px"},{default:t(()=>[e(Wn,{onCreate:V})]),_:1},8,["modelValue"]),e(le,{modelValue:I.value,"onUpdate:modelValue":Y[5]||(Y[5]=re=>I.value=re),"max-width":"1000px"},{default:t(()=>[e(Gn,{camps:o.value,onSend:ae},null,8,["camps"])]),_:1},8,["modelValue"]),e(le,{modelValue:ge.value,"onUpdate:modelValue":Y[6]||(Y[6]=re=>ge.value=re),"max-width":"1000px"},{default:t(()=>[e(Kn,{camps:o.value,onSend:Ie},null,8,["camps"])]),_:1},8,["modelValue"]),e(le,{"model-value":B.value!=null,"max-width":"400px",persistent:""},{default:t(()=>[B.value?(f(),x(bt,{key:0,title:"Envoi des documents en cours",current:B.value.Current,total:B.value.Total},null,8,["current","total"])):G("",!0)]),_:1},8,["model-value"]),e(le,{"model-value":fe.value!=null,"max-width":"400px",persistent:""},{default:t(()=>[fe.value?(f(),x(bt,{key:0,title:"Envoi des relances en cours",current:fe.value.Current,total:fe.value.Total},null,8,["current","total"])):G("",!0)]),_:1},8,["model-value"])]),_:1}))}}),eu=Z({__name:"inscriptions",setup(l){const s=lt(),r=F(()=>iu(s.currentRoute.value.query)),c=F(()=>r.value.tab||"insc"),a=F(()=>r.value.idDossier);function o(m){const n=s.currentRoute.value;s.push({path:n.path,query:{tab:m}})}return(m,n)=>(f(),W(ne,null,[e(ct,{title:"Suivi des inscriptions"},{default:t(()=>[e(Sa,{"model-value":c.value,"onUpdate:modelValue":n[0]||(n[0]=u=>o(u))},{default:t(()=>[e(Tt,{value:"insc"},{default:t(()=>[...n[2]||(n[2]=[b("Inscriptions en attente",-1)])]),_:1}),e(Tt,{value:"doss"},{default:t(()=>[...n[3]||(n[3]=[b("Suivi des dossiers",-1)])]),_:1})]),_:1},8,["model-value"])]),_:1}),e(Da,{"model-value":c.value},{default:t(()=>[e(Et,{value:"insc"},{default:t(()=>[e(mn,{onGoTo:U(gt),onEmpty:n[1]||(n[1]=u=>U(gt)())},null,8,["onGoTo"])]),_:1}),e(Et,{value:"doss"},{default:t(()=>[e(Zn,{"initial-dossier":a.value},null,8,["initial-dossier"])]),_:1})]),_:1},8,["model-value"])],64))}}),tu=Z({__name:"PersonneEdit",props:{personne:{}},emits:["save"],setup(l,{emit:s}){const r=l,c=s,a=S(_e(r.personne)),o=F(()=>!!(a.value.Nom&&a.value.Prenom));return(m,n)=>{const u=Ua,i=Fa;return f(),x(z,{title:"Editer le profil"},{default:t(()=>[e(H,null,{default:t(()=>[e(ol,null,{default:t(()=>[e(N,null,{default:t(()=>[e(y,null,{default:t(()=>[e(ce,{autofocus:"","hide-details":"",label:"Nom",density:"compact",variant:"outlined",modelValue:a.value.Nom,"onUpdate:modelValue":n[0]||(n[0]=d=>a.value.Nom=d)},null,8,["modelValue"])]),_:1}),e(y,null,{default:t(()=>[e(ce,{"hide-details":"",label:"Prénom",density:"compact",variant:"outlined",modelValue:a.value.Prenom,"onUpdate:modelValue":n[1]||(n[1]=d=>a.value.Prenom=d)},null,8,["modelValue"])]),_:1}),e(y,null,{default:t(()=>[e(u,{modelValue:a.value.Sexe,"onUpdate:modelValue":n[2]||(n[2]=d=>a.value.Sexe=d)},null,8,["modelValue"])]),_:1}),e(y,null,{default:t(()=>[e(i,{modelValue:a.value.DateNaissance,"onUpdate:modelValue":n[3]||(n[3]=d=>a.value.DateNaissance=d)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ie),e(h,{disabled:!o.value,onClick:n[4]||(n[4]=d=>c("save",a.value))},{default:t(()=>[...n[5]||(n[5]=[b("Enregistrer",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})}}}),lu=Z({__name:"annuaire",setup(l){const s=lt(),r=F(()=>su(s.currentRoute.value.query)),c=F(()=>r.value.idPersonne);Ae(()=>c.value,()=>c.value!==void 0?d(c.value):null,{immediate:!0});const a=S([]),o=S("");async function m(){if(!o.value)return;const p=await C.PersonnesGet({search:o.value});p!==void 0&&(a.value=p||[])}async function n(){const p=await C.PersonnesCreate();p!==void 0&&(C.showMessage("Profil créé avec succès."),a.value.push(p),Ge(p.Id))}const u=S(null);async function i(p){u.value=null;const v=await C.PersonnesUpdate(p);if(v===void 0)return;C.showMessage("Profil modifié avec succès."),Ge();const P=a.value.findIndex(w=>w.Id==p.Id);a.value[P]=v}async function d(p){const v=await C.PersonnesLoad({id:p});v!==void 0&&(u.value=v)}return(p,v)=>{const P=nl;return f(),W(ne,null,[e(ct,{title:"Annuaire : personnes et organismes"},{default:t(()=>[...v[2]||(v[2]=[b(" TODO ",-1)])]),_:1}),e(z,{class:"ma-2"},{append:t(()=>[e(h,{color:"green",onClick:n},{default:t(()=>[...v[3]||(v[3]=[b("Créer un nouveau profil",-1)])]),_:1})]),default:t(()=>[e(H,null,{default:t(()=>[e(N,null,{default:t(()=>[e(y,null,{default:t(()=>[e(P,{"prepend-inner-icon":"mdi-magnify",label:"Recherche",modelValue:o.value,"onUpdate:modelValue":[v[0]||(v[0]=w=>o.value=w),m]},null,8,["modelValue"]),e(Se,null,{default:t(()=>[(f(!0),W(ne,null,ve(a.value,w=>(f(),x(X,{title:w.Label,subtitle:U(we).dateNaissance(w.DateNaissance),"prepend-icon":U(we).sexeIcon(w.Sexe),onClick:g=>U(Ge)(w.Id)},dt({_:2},[w.IsTemp?{name:"append",fn:t(()=>[e(ke,{"prepend-icon":"mdi-alert",color:"warning"},{default:t(()=>[...v[4]||(v[4]=[b(" Ce profil est temporaire et devrait être identifié. ",-1)])]),_:1})]),key:"0"}:void 0]),1032,["title","subtitle","prepend-icon","onClick"]))),256))]),_:1})]),_:1}),e(y)]),_:1})]),_:1}),u.value!=null?(f(),x(le,{key:0,"model-value":u.value!=null,"onUpdate:modelValue":v[1]||(v[1]=w=>{u.value=null,U(Ge)(void 0)}),"max-width":"800px"},{default:t(()=>[e(tu,{personne:u.value,onSave:i},null,8,["personne"])]),_:1},8,["model-value"])):G("",!0)]),_:1})],64)}}}),au=[{path:"/",component:La},{path:"/camps",component:on},{path:"/inscriptions",component:eu},{path:"/annuaire",component:lu}],nu="/backoffice",Je=xa({history:Pa(nu),routes:au});Je.onError((l,s)=>{l?.message?.includes?.("Failed to fetch dynamically imported module")?localStorage.getItem("vuetify:dynamic-reload")?console.error("Dynamic import error, reloading page did not fix it",l):(console.log("Reloading page to fix dynamic import error"),localStorage.setItem("vuetify:dynamic-reload","true"),location.assign(s.fullPath)):console.error(l)});Je.isReady().then(()=>{localStorage.removeItem("vuetify:dynamic-reload")});function rt(l){return l?Number(l):void 0}function uu(l){const s=l;return{idCamp:rt(s.idCamp),idParticipant:rt(s.idParticipant)}}function xt(l){Je.push({path:"/camps",query:{idCamp:l.IdCamp,idParticipant:l.Id}})}function iu(l){const s=l;return{tab:s.tab,idDossier:rt(s.idDossier)}}function gt(l){Je.push({path:"/inscriptions",query:{tab:"doss",idDossier:l}})}function su(l){return{idPersonne:rt(l.idPersonne)}}function Ge(l){Je.push({path:"/annuaire",query:{idPersonne:l}})}const ou=["innerHTML"],ru=Z({__name:"App",setup(l){const s=ft({text:"",color:"secondary",action:void 0,timeout:4e3}),r=S(""),c=S("");return C.onError=(o,m)=>{r.value=o,c.value=m},C.showMessage=(o,m,n)=>{s.text=o,s.color=m||"success",s.action=n,s.timeout=1e4,s.timeout=4e3},lt().beforeEach(async(o,m)=>{if(!C.hasToken()&&o.path!=="/")return{path:"/"}}),(o,m)=>{const n=ra("router-view");return f(),x(ma,null,{default:t(()=>[e(da,null,{default:t(()=>[e(n),e(Ft,{style:{"z-index":"10000"},app:"","model-value":s.text!="","onUpdate:modelValue":m[1]||(m[1]=u=>s.text=""),timeout:s.timeout,color:s.color,location:"bottom left","close-on-content-click":""},{default:t(()=>[b(L(s.text)+" ",1),s.action?(f(),x(h,{key:0,onClick:m[0]||(m[0]=u=>s.action.action()),class:"ml-2"},{default:t(()=>[b(L(s.action.title),1)]),_:1})):G("",!0)]),_:1},8,["model-value","timeout","color"]),e(Ft,{app:"","model-value":r.value!="","onUpdate:modelValue":m[2]||(m[2]=u=>r.value=""),timeout:4e3,color:"red"},{default:t(()=>[T("b",null,L(r.value),1),T("div",{innerHTML:c.value},null,8,ou)]),_:1},8,["model-value"])]),_:1})]),_:1})}}}),yl=ca(ru);yl.use(va).use(Je);yl.mount("#app");
