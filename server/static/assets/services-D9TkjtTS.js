import{c8 as A,bR as L,bT as R,d as U,r as l,Q as x,e as p,o as v,w as t,a as r,aT as C,V as E,g as F,h as B,i as g,j as H,b as f,n as M,cA as N,f as $,ac as q,Y as P,au as z,l as c,aU as T,t as k,aV as j,aW as I,aX as D}from"./VSnackbar-4WS0ckTD.js";class K{constructor(a,s){this.baseURL=a,this.authToken=s}getHeaders(){return{Authorization:"Bearer "+this.authToken}}async ValideTransfertFicheSanitaire(a){const s=this.baseURL+"/api/v1/espaceperso/fichesanitaires/transfert";this.startRequest();try{return await A.post(s,null,{headers:this.getHeaders(),params:{token:a.token}}),!0}catch(o){this.handleError(o)}}}class Q extends K{constructor(a,s,o){super(o,""),this.onError=a,this.showMessage=s}handleError(a){const{kind:s,messageHtml:o}=R(a);this.onError(s,o)}startRequest(){}}const d=new Q((i,a)=>{},(i,a)=>{},L()),h={TransfertFicheSanitaire:1};h.TransfertFicheSanitaire+"";const W=["innerHTML"],X=U({__name:"App",setup(i){const a=l(""),s=l("secondary"),o=l(""),m=l("");d.onError=(n,e)=>{o.value=n,m.value=e},d.showMessage=(n,e)=>{a.value=n,s.value=e||"success"};const w="/static/repere/logo.png",_=l(!0),V=l(1);x(()=>{const n=new URLSearchParams(window.location.search),e=n.get("service")||"",u=Number(e);switch(u){case h.TransfertFicheSanitaire:V.value=u;const S=n.get("token")||"";return y(S);default:d.onError("Service invalide",`Le paramètre <i>service</i> a une valeur incorrecte : ${e}`)}});async function y(n){const e=await d.ValideTransfertFicheSanitaire({token:n});_.value=!1}return(n,e)=>(v(),p(j,null,{default:t(()=>[r(C,null,{default:t(()=>[r(E,{rounded:"",elevation:"4",color:"secondary"},{default:t(()=>[r(F,null,{default:t(()=>[r(B,null,{default:t(()=>[r(g,{"align-self":"center",cols:"auto"},{default:t(()=>[r(H,{width:"60",src:w})]),_:1}),r(g,{"align-self":"center"},{default:t(()=>e[2]||(e[2]=[f(" Portail ")])),_:1,__:[2]})]),_:1})]),_:1})]),_:1}),r(M,{class:"fill-height"},{default:t(()=>[r(N,null,{default:t(()=>[_.value?(v(),p(q,{key:0})):V.value==P(h).TransfertFicheSanitaire?(v(),p(z,{key:1,title:"Partage de fiche sanitaire",type:"success"},{default:t(()=>e[3]||(e[3]=[f(" L'accès à la fiche a bien été mis à jour. "),c("br",null,null,-1),c("small",{class:"text-muted"},"Vous pouvez quitter cette page et actualiser votre espace de suivi pour y accéder.",-1)])),_:1,__:[3]})):$("",!0)]),_:1})]),_:1}),r(T,{style:{"z-index":"10000"},app:"","model-value":a.value!="","onUpdate:modelValue":e[0]||(e[0]=u=>a.value=""),timeout:4e3,color:s.value,location:"bottom left","close-on-content-click":""},{default:t(()=>[f(k(a.value),1)]),_:1},8,["model-value","color"]),r(T,{app:"","model-value":o.value!="","onUpdate:modelValue":e[1]||(e[1]=u=>o.value=""),timeout:4e3,color:"red"},{default:t(()=>[c("b",null,k(o.value),1),c("div",{innerHTML:m.value},null,8,W)]),_:1},8,["model-value"])]),_:1})]),_:1}))}}),b=I(X);b.use(D);b.mount("#app");
