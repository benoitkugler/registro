import{cs as O,bQ as je,bS as Ne,d as J,k as R,p as v,o as u,V as qe,w as e,b as t,f as He,g as P,h as c,i as Oe,e as s,t as k,r as Be,j as S,a as L,F,$ as H,Y as h,a3 as ue,aC as Se,l as j,a2 as $,c as N,R as Ve,aP as ze,aO as Je,_ as x,a9 as de,a0 as Y,bx as Ue,by as he,z as ve,af as ye,ay as W,aw as xe,a7 as Ke,X as ke,aI as Ge,q as We,s as Ze,v as Qe,ah as Xe,G as Ye,bo as et,P as tt,J as lt,ck as at,x as nt,C as st,am as ot,an as it,ao as ut,ar as rt,as as dt,I as Pe,n as mt,u as pt,aW as ct,aV as Ce,bJ as ft,aM as _e,aK as vt,m as gt,aZ as bt,a_ as we,a$ as Vt,b0 as yt,b1 as kt}from"./VSnackbar-BIDVaiYL.js";import{_ as Ct,a as St,V as Ut,b as ht}from"./EventSwitch.vue_vue_type_script_setup_true_lang-D17lXQHl.js";import{h as Pt,_ as _t,a as De,d as Fe,b as Ie,c as Te,V as fe,f as Ae}from"./VTabs-4ygjv7tw.js";import{b as M,c as w,k as ee,d as ie,e as se,f as ge,l as Me,V as q,g as z,h as be,a as Re,i as X,m as re,j as ne,n as Le}from"./VTextarea-iANrb6Vp.js";import{a as wt,V as At}from"./FileCard.vue_vue_type_script_setup_true_lang-liChz12-.js";import{_ as Ee}from"./FilesDemande.vue_vue_type_script_setup_true_lang-CTqFhXzT.js";import"./VWindowItem-BhfMufIA.js";import"./FilesRow.vue_vue_type_script_setup_true_lang-CFNSoaPS.js";const pe={CampDocs:"CampDocs",Facture:"Facture",PlaceLiberee:"PlaceLiberee",Sondage:"Sondage",Validation:"Validation"},ce={Complet:3,EnCours:2,NonCommence:1};ce.Complet+"",ce.EnCours+"",ce.NonCommence+"";const B={AStatuer:0,Refuse:1,AttenteProfilInvalide:2,AttenteCampComplet:3,EnAttenteReponse:4,Inscrit:5},Mt={[B.AStatuer]:"En attente de validation",[B.Refuse]:"Refusé définitivement",[B.AttenteProfilInvalide]:"Profil limite",[B.AttenteCampComplet]:"Camp complet",[B.EnAttenteReponse]:"En attente de réponse",[B.Inscrit]:"Inscrit"},Rt={Euros:0},G={Cheque:0,EnLigne:1,Virement:2,Especes:3,Ancv:4,Helloasso:5},Lt={[G.Cheque]:"Chèque",[G.EnLigne]:"Carte bancaire (en ligne)",[G.Virement]:"Virement",[G.Especes]:"Espèces",[G.Ancv]:"ANCV",[G.Helloasso]:"Helloasso"},xt={Espaceperso:0},le={NoFiche:0,Outdated:1,UpToDate:2};le.NoFiche+"",le.Outdated+"",le.UpToDate+"";class Dt{constructor(o,l){this.baseURL=o,this.authToken=l}getHeaders(){return{Authorization:"Bearer "+this.authToken}}async Load(o){const l=this.baseURL+"/api/v1/espaceperso";this.startRequest();try{return(await O.get(l,{headers:this.getHeaders(),params:{token:o.token}})).data}catch(i){this.handleError(i)}}async SendMessage(o){const l=this.baseURL+"/api/v1/espaceperso/message";this.startRequest();try{return(await O.post(l,o,{headers:this.getHeaders()})).data}catch(i){this.handleError(i)}}async UpdateParticipants(o){const l=this.baseURL+"/api/v1/espaceperso/participants";this.startRequest();try{return await O.post(l,o,{headers:this.getHeaders()}),!0}catch(i){this.handleError(i)}}async CreateAide(o,l,i){const n=this.baseURL+"/api/v1/espaceperso/aide";this.startRequest();try{const g=new FormData;return g.append("document",o,o.name),g.append("aide",JSON.stringify(l)),await O.post(n,g,{headers:this.getHeaders(),params:{token:i.token}}),!0}catch(g){this.handleError(g)}}async GetStructureaides(){const o=this.baseURL+"/api/v1/espaceperso/structureaides";this.startRequest();try{return(await O.get(o,{headers:this.getHeaders()})).data}catch(l){this.handleError(l)}}async LoadJoomeo(o){const l=this.baseURL+"/api/v1/espaceperso/joomeo";this.startRequest();try{return(await O.get(l,{headers:this.getHeaders(),params:{token:o.token}})).data}catch(i){this.handleError(i)}}async LoadFichesanitaires(o){const l=this.baseURL+"/api/v1/espaceperso/fichesanitaires";this.startRequest();try{return(await O.get(l,{headers:this.getHeaders(),params:{token:o.token}})).data}catch(i){this.handleError(i)}}async UpdateFichesanitaire(o){const l=this.baseURL+"/api/v1/espaceperso/fichesanitaires";this.startRequest();try{return await O.post(l,o,{headers:this.getHeaders()}),!0}catch(i){this.handleError(i)}}async UploadVaccin(o,l){const i=this.baseURL+"/api/v1/espaceperso/fichesanitaires";this.startRequest();try{const n=new FormData;return n.append("file",o,o.name),(await O.put(i,n,{headers:this.getHeaders(),params:{token:l.token,idPersonne:String(l.idPersonne)}})).data}catch(n){this.handleError(n)}}async DeleteVaccin(o){const l=this.baseURL+"/api/v1/espaceperso/fichesanitaires";this.startRequest();try{return await O.delete(l,{headers:this.getHeaders(),params:{key:o.key}}),!0}catch(i){this.handleError(i)}}async TransfertFicheSanitaire(o){const l=this.baseURL+"/api/v1/espaceperso/fichesanitaires/transfert";this.startRequest();try{return await O.put(l,null,{headers:this.getHeaders(),params:{token:o.token,idPersonne:String(o.idPersonne)}}),!0}catch(i){this.handleError(i)}}async AcceptePlaceLiberee(o){const l=this.baseURL+"/api/v1/espaceperso/events/accept-place-liberee";this.startRequest();try{return await O.post(l,null,{headers:this.getHeaders(),params:{token:o.token,idEvent:String(o.idEvent)}}),!0}catch(i){this.handleError(i)}}async LoadSondages(o){const l=this.baseURL+"/api/v1/espaceperso/sondages";this.startRequest();try{return(await O.get(l,{headers:this.getHeaders(),params:{token:o.token}})).data}catch(i){this.handleError(i)}}async UpdateSondages(o){const l=this.baseURL+"/api/v1/espaceperso/sondages";this.startRequest();try{return await O.post(l,o,{headers:this.getHeaders()}),!0}catch(i){this.handleError(i)}}async LoadDocuments(o){const l=this.baseURL+"/api/v1/espaceperso/documents";this.startRequest();try{return(await O.get(l,{headers:this.getHeaders(),params:{token:o.token}})).data}catch(i){this.handleError(i)}}async UploadDocument(o,l){const i=this.baseURL+"/api/v1/espaceperso/documents";this.startRequest();try{const n=new FormData;return n.append("file",o,o.name),(await O.post(i,n,{headers:this.getHeaders(),params:{token:l.token,idDemande:String(l.idDemande),idPersonne:String(l.idPersonne)}})).data}catch(n){this.handleError(n)}}async DeleteDocument(o){const l=this.baseURL+"/api/v1/espaceperso/documents";this.startRequest();try{return await O.delete(l,{headers:this.getHeaders(),params:{key:o.key}}),!0}catch(i){this.handleError(i)}}}class Ft extends Dt{constructor(o,l,i){super(i,""),this.onError=o,this.showMessage=l}handleError(o){const{kind:l,messageHtml:i}=Ne(o);this.onError(l,i)}startRequest(){}}const A=new Ft((m,o)=>{},(m,o)=>{},je()),It=J({__name:"NavBar",props:{title:{},hideMenu:{type:Boolean}},setup(m){const o=m,l="/static/repere/logo.png";return R(!1),(i,n)=>(u(),v(qe,{rounded:"",elevation:"4",color:"secondary"},{append:e(()=>[Be(i.$slots,"default"),n[0]||(n[0]=S("div",{class:"mr-2"},null,-1))]),default:e(()=>[t(He,null,{default:e(()=>[t(P,null,{default:e(()=>[t(c,{"align-self":"center",cols:"auto"},{default:e(()=>[t(Oe,{width:"60",src:l})]),_:1}),t(c,{"align-self":"center"},{default:e(()=>[s(k(o.title),1)]),_:1})]),_:1})]),_:1})]),_:3}))}}),Tt=J({__name:"ParticipantsEditCard",props:{participants:{}},emits:["save"],setup(m,{emit:o}){const l=m,i=o,n=R(l.participants.map(g=>g.Participant));return(g,y)=>{const f=Pt;return u(),v(M,{title:"Modifier les options"},{default:e(()=>[t(w,null,{default:e(()=>[t(P,null,{default:e(()=>[(u(!0),L(F,null,H(l.participants,(b,p)=>(u(),v(c,{cols:"6"},{default:e(()=>[t(M,{title:h(Se).label(b.Personne),subtitle:h(ue).label(b.Camp)},{default:e(()=>[t(w,null,{default:e(()=>[t(P,null,{default:e(()=>[t(c,null,{default:e(()=>[b.Camp.Navette.Actif?(u(),v(f,{key:0,modelValue:n.value[p].Navette,"onUpdate:modelValue":a=>n.value[p].Navette=a,hint:b.Camp.Navette.Commentaire},null,8,["modelValue","onUpdate:modelValue","hint"])):(u(),v(ee,{key:1},{default:e(()=>[...y[1]||(y[1]=[s("Ce séjour ne propose pas de navette.",-1)])]),_:1}))]),_:2},1024)]),_:2},1024),t(P,null,{default:e(()=>[t(c,null,{default:e(()=>[t(ie,{modelValue:n.value[p].Commentaire,"onUpdate:modelValue":a=>n.value[p].Commentaire=a,label:"Information libre",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),t(P,null,{default:e(()=>[t(c,null,{default:e(()=>[...y[2]||(y[2]=[s(" TODO: option prix ",-1)])]),_:1})]),_:1})]),_:2},1024)]),_:2},1032,["title","subtitle"])]),_:2},1024))),256))]),_:1})]),_:1}),t(se,null,{default:e(()=>[t(ge),t(j,{onClick:y[0]||(y[0]=b=>i("save",n.value)),color:"green"},{prepend:e(()=>[t($,null,{default:e(()=>[...y[3]||(y[3]=[s("mdi-content-save-cog",-1)])]),_:1})]),default:e(()=>[y[4]||(y[4]=s(" Enregistrer",-1))]),_:1})]),_:1})]),_:1})}}}),Et=J({__name:"AideCard",props:{dossier:{},structureaides:{}},emits:["save"],setup(m,{emit:o}){const l=m,i=o,n=R({Id:0,IdStructureaide:0,IdParticipant:(l.dossier.Participants||[])[0].Participant.Id,Valide:!1,Valeur:{Currency:Rt.Euros,Cent:0},ParJour:!1,NbJoursMax:0}),g=R(null),y=N(()=>n.value?g.value!=null&&n.value.IdParticipant!=0&&n.value.IdStructureaide!=0&&n.value.Valeur.Cent!=0:!1),f=N(()=>(l.dossier.Participants||[]).map(p=>({title:Se.label(p.Personne),subtitle:ue.label(p.Camp),value:p.Participant.Id}))),b=N(()=>Object.values(l.structureaides||{}).map(p=>({value:p.Id,title:p.Nom})));return(p,a)=>{const V=Ct,d=_t,U=wt;return u(),v(M,{title:"Ajouter une aide extérieure",subtitle:"Cette aide sera vérifiée par le centre."},{default:e(()=>[t(w,null,{default:e(()=>[t(P,null,{default:e(()=>[t(c,null,{default:e(()=>[t(Me,{variant:"outlined",density:"comfortable",label:"Participant concerné",modelValue:n.value.IdParticipant,"onUpdate:modelValue":a[0]||(a[0]=_=>n.value.IdParticipant=_),items:f.value},{item:e(({item:_,props:K})=>[t(q,Ve(K,{title:_.raw.title,subtitle:_.raw.subtitle}),null,16,["title","subtitle"])]),_:1},8,["modelValue","items"])]),_:1})]),_:1}),t(P,null,{default:e(()=>[t(c,null,{default:e(()=>[t(Me,{variant:"outlined",density:"comfortable",label:"Structure","model-value":h(Je)(n.value.IdStructureaide),"onUpdate:modelValue":a[1]||(a[1]=_=>n.value.IdStructureaide=h(ze)(_)),items:b.value,"no-data-text":"Aucune structure n'est disponible."},null,8,["model-value","items"])]),_:1})]),_:1}),t(P,null,{default:e(()=>[t(c,{"align-self":"center"},{default:e(()=>[t(V,{label:"Valeur",modelValue:n.value.Valeur,"onUpdate:modelValue":a[2]||(a[2]=_=>n.value.Valeur=_),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),t(P,null,{default:e(()=>[t(c,{"align-self":"center"},{default:e(()=>[t(z,{modelValue:n.value.ParJour,"onUpdate:modelValue":a[3]||(a[3]=_=>n.value.ParJour=_),label:"Montant par jour","hide-details":""},null,8,["modelValue"])]),_:1}),t(c,{"align-self":"center"},{default:e(()=>[n.value.ParJour?(u(),v(d,{key:0,label:"Limite sur le nombre de jours",modelValue:n.value.NbJoursMax,"onUpdate:modelValue":a[4]||(a[4]=_=>n.value.NbJoursMax=_),min:0,hint:"0 pour ne pas limiter","persistent-hint":""},null,8,["modelValue"])):x("",!0)]),_:1})]),_:1}),t(P,null,{default:e(()=>[t(c,null,{default:e(()=>[t(U,{label:"Pièce justificative",onUpdate:a[5]||(a[5]=_=>g.value=_)})]),_:1})]),_:1})]),_:1}),t(se,null,{default:e(()=>[t(ge),t(j,{color:"green",disabled:!y.value,onClick:a[6]||(a[6]=_=>i("save",n.value,g.value))},{default:e(()=>[...a[7]||(a[7]=[s(" Ajouter pour vérification ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})}}}),$t={key:0},jt=J({__name:"FinancesCard",props:{token:{},dossier:{},isPaiementOpen:{type:Boolean}},emits:["refresh","showReglement"],setup(m,{emit:o}){const l=m,i=o;de(p);const n=R(!1);async function g(a,V){n.value=!1,await A.CreateAide(V,a,{token:l.token})!==void 0&&(A.showMessage("Aide ajoutée avec succès (validation à venir). Merci !"),i("refresh"))}const y=N(()=>{const a=[];return Object.values(l.dossier.Aides||{}).forEach(V=>a.push(...Object.values(V||{}))),a}),f=N(()=>y.value.filter(a=>!a.Valide).length),b=R({});async function p(){const a=await A.GetStructureaides();a!==void 0&&(b.value=a||{})}return(a,V)=>(u(),v(M,{subtitle:"Réglement",class:"mt-2"},{append:e(()=>[t(j,{size:"small",class:"mr-1",onClick:V[0]||(V[0]=d=>i("showReglement")),disabled:!l.isPaiementOpen||l.dossier.Bilan.Statut==h(ce).Complet},{prepend:e(()=>[t($,null,{default:e(()=>[...V[3]||(V[3]=[s("mdi-cash-plus",-1)])]),_:1})]),default:e(()=>[V[4]||(V[4]=s(" Régler ",-1))]),_:1},8,["disabled"]),t(j,{size:"small",disabled:!l.dossier.Participants?.length,onClick:V[1]||(V[1]=d=>n.value=!0)},{prepend:e(()=>[t($,{color:"green"},{default:e(()=>[...V[5]||(V[5]=[s("mdi-plus",-1)])]),_:1})]),default:e(()=>[V[6]||(V[6]=s(" Ajouter une aide ",-1))]),_:1},8,["disabled"])]),default:e(()=>[t(w,null,{default:e(()=>[t(P,{class:"mt-2"},{default:e(()=>[t(c,null,{default:e(()=>[...V[7]||(V[7]=[s("Prix des séjours",-1)])]),_:1}),t(c,{cols:"4",class:"text-right"},{default:e(()=>[s(k(m.dossier.Bilan.Demande),1)]),_:1})]),_:1}),m.dossier.Bilan.DemandeEnAttenteValidation?(u(),v(P,{key:0,class:"my-2"},{default:e(()=>[t(c,{class:"text-grey"},{default:e(()=>[...V[8]||(V[8]=[s("Séjours en attente de validation",-1)])]),_:1}),t(c,{cols:"4",class:"text-right text-grey"},{default:e(()=>[s(k(m.dossier.Bilan.DemandeEnAttenteValidation),1)]),_:1})]),_:1})):x("",!0),m.dossier.Bilan.Aides?(u(),v(P,{key:1,class:"my-0"},{default:e(()=>[t(c,{cols:"auto"},{default:e(()=>[t(be,null,{activator:e(({props:d})=>[t($,Ue(he(d)),{default:e(()=>[...V[9]||(V[9]=[s(" mdi-view-list ",-1)])]),_:1},16)]),default:e(()=>[b.value?(u(),v(M,{key:0,title:"Aides extérieures"},{default:e(()=>[t(w,null,{default:e(()=>[(u(!0),L(F,null,H(y.value,d=>(u(),v(ee,{color:d.Valide?void 0:"orange",class:"mx-1"},{default:e(()=>[s(k(b.value[d.IdStructureaide].Nom)+" : "+k(h(Y).montant(d.Valeur)),1)]),_:2},1032,["color"]))),256))]),_:1})]),_:1})):x("",!0)]),_:1})]),_:1}),t(c,null,{default:e(()=>[V[11]||(V[11]=s(" Dont aides extérieures ",-1)),f.value?(u(),v($,{key:0,color:"orange"},{default:e(()=>[...V[10]||(V[10]=[s("mdi-clock",-1)])]),_:1})):x("",!0)]),_:1}),t(c,{cols:"4",class:"text-right"},{default:e(()=>[s(k(m.dossier.Bilan.Aides),1)]),_:1})]),_:1})):x("",!0),t(Re,{thickness:"1"}),t(P,{class:"my-0"},{default:e(()=>[t(c,{cols:"auto"},{default:e(()=>[t(be,null,{activator:e(({props:d})=>[t($,Ue(he(d)),{default:e(()=>[...V[12]||(V[12]=[s(" mdi-view-list ",-1)])]),_:1},16)]),default:e(()=>[t(M,{title:"Paiements"},{default:e(()=>[t(w,null,{default:e(()=>[Object.values(l.dossier.Paiements||{}).length?x("",!0):(u(),L("i",$t," Aucun paiement n'a encore été enregistré. ")),(u(!0),L(F,null,H(l.dossier.Paiements,d=>(u(),v(ee,{class:"mx-1"},{default:e(()=>[s(k(d.Payeur)+" : "+k(h(Y).montant(d.Montant)),1)]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})]),_:1}),t(c,null,{default:e(()=>[...V[13]||(V[13]=[s(" Paiements ",-1)])]),_:1}),t(c,{cols:"4",class:"text-right"},{default:e(()=>[s(k(m.dossier.Bilan.Recu),1)]),_:1})]),_:1}),t(Re,{thickness:"1"}),t(P,{class:"my-0"},{default:e(()=>[t(c,null,{default:e(()=>[...V[14]||(V[14]=[s("Montant restant à régler",-1)])]),_:1}),t(c,{cols:"4",class:"text-right"},{default:e(()=>[S("b",{class:ve(m.dossier.Bilan.Statut==h(ce).Complet?"text-green":"text-orange")},k(m.dossier.Bilan.Restant),3)]),_:1})]),_:1})]),_:1}),t(X,{modelValue:n.value,"onUpdate:modelValue":V[2]||(V[2]=d=>n.value=d),"max-width":"450px"},{default:e(()=>[t(Et,{dossier:l.dossier,structureaides:b.value,onSave:g},null,8,["dossier","structureaides"])]),_:1},8,["modelValue"])]),_:1}))}}),Nt={key:0},qt=J({__name:"JoomeoCard",props:{token:{}},setup(m){const o=m;de(i);const l=R(null);async function i(){const n=await A.LoadJoomeo({token:o.token});n!==void 0&&(l.value=n)}return(n,g)=>l.value==null?(u(),v(ye,{key:0,class:"mx-auto",width:"600px",type:"card"})):l.value.Loggin?(u(),v(M,{key:1,class:"mx-auto",title:"Identifiants et albums Joomeo",subtitle:"Retrouvez les photos prises dans nos séjours.","min-width":"600px"},{default:e(()=>[t(w,null,{default:e(()=>[t(P,null,{default:e(()=>[t(c,null,{default:e(()=>[g[0]||(g[0]=s(" Identifiant : ",-1)),S("b",null,k(l.value.Loggin),1)]),_:1}),t(c,null,{default:e(()=>[g[1]||(g[1]=s(" Mot de passe : ",-1)),S("b",null,k(l.value.Password),1)]),_:1})]),_:1}),t(P,null,{default:e(()=>[t(c,null,{default:e(()=>[l.value.Albums?.length?x("",!0):(u(),L("i",Nt,"Aucun album n'est encore disponible.")),(u(!0),L(F,null,H(l.value.Albums,y=>(u(),v(ee,{class:"mx-1"},{default:e(()=>[s(k(y),1)]),_:2},1024))),256))]),_:1})]),_:1})]),_:1}),t(se,null,{default:e(()=>[t(j,{block:"",color:"primary",variant:"outlined",href:l.value.SpaceURL,target:"_blank"},{default:e(()=>[...g[2]||(g[2]=[s(" Accéder à mon espace jooméo ",-1)])]),_:1},8,["href"])]),_:1})]),_:1})):(u(),v(W,{key:2,class:"mx-auto",type:"info"},{default:e(()=>[...g[3]||(g[3]=[s(" Il n'y a encore rien à voir... ",-1)])]),_:1}))}}),Ht={class:"pa-2"},Ot=J({__name:"FichesanitaireForm",props:{fiche:{}},emits:["save","uploadVaccin","deleteVaccin","transfert"],setup(m,{emit:o}){const l=m,i=o,n=xe(Ke(l.fiche.Fichesanitaire)),g=R(l.fiche.RespoSecuriteSociale),y=N(()=>n.Allergies.Asthme||n.Allergies.Alimentaires||n.Allergies.Medicamenteuses||n.Allergies.Autres.length!=0),f=N(()=>l.fiche.Fichesanitaire.Mails||[]),b=N(()=>l.fiche.State==le.NoFiche?void 0:`Dernière modification : ${Y.time(l.fiche.Fichesanitaire.LastModif)} / Propriétaire(s) :
         ${f.value.join(" ; ")}`);return(p,a)=>{const V=Ee;return u(),L("div",Ht,[t(M,{title:l.fiche.Personne,subtitle:b.value},{default:e(()=>[t(w,null,{default:e(()=>[l.fiche.IsLocked?(u(),v(W,{key:0},{default:e(()=>[s(" Votre adresse mail n'est pas reconnu dans notre système comme celle du responsable de cette fiche sanitaire. Elle est actuellement liée "+k(f.value.length>=2?"aux adresses":"à l'adresse")+" ",1),S("b",null,k(f.value.join(" ; ")),1),a[30]||(a[30]=s(". ",-1)),a[31]||(a[31]=S("br",null,null,-1)),s(" Afin de protéger vos données, vous devez demander un transfert des droits de lecture et d'écriture. Un mail contenant un lien de transfert va être envoyé "+k(f.value.length>=2?"aux adresses":"à l'adresse")+" ",1),S("i",null,"("+k(f.value.join(" ; "))+")",1),a[32]||(a[32]=s(". ",-1)),t(j,{variant:"outlined",onClick:a[0]||(a[0]=d=>i("transfert")),block:"",class:"mt-4"},{prepend:e(()=>[t($,null,{default:e(()=>[...a[28]||(a[28]=[s("mdi-lock-open",-1)])]),_:1})]),default:e(()=>[a[29]||(a[29]=s(" Demander le transfert de la fiche sanitaire ",-1))]),_:1})]),_:1})):l.fiche.State==h(le).UpToDate&&l.fiche.VaccinsFiles?.length?(u(),v(W,{key:1,type:"success"},{default:e(()=>[...a[33]||(a[33]=[s(" La fiche sanitaire est à jour. Merci ! ",-1)])]),_:1})):l.fiche.State==h(le).UpToDate?(u(),v(W,{key:2,type:"warning"},{default:e(()=>[...a[34]||(a[34]=[s(" La fiche sanitaire est à jour, mais vous n'avez déposé aucun vaccin. ",-1)])]),_:1})):l.fiche.State==h(le).Outdated?(u(),v(W,{key:3,type:"warning"},{default:e(()=>[...a[35]||(a[35]=[s(" Merci de bien vouloir vérifier que les données ci-dessous sont à jour et les valider. ",-1),S("br",null,null,-1),s("Nous avons besoin de votre consentement, décrit dans l'encart ",-1),S("b",null,"Validation",-1),s(" (en bas de page). ",-1)])]),_:1})):(u(),v(W,{key:4,type:"info"},{default:e(()=>[...a[36]||(a[36]=[s(" Merci de compléter la fiche sanitaire ci-dessous. ",-1)])]),_:1}))]),_:1})]),_:1},8,["title","subtitle"]),l.fiche.IsLocked?x("",!0):(u(),L(F,{key:0},[t(M,{subtitle:"Vaccinations",class:"my-2"},{default:e(()=>[t(w,null,{default:e(()=>[a[37]||(a[37]=s(" Merci de joindre le scan des pages « vaccinations » du carnet de santé du participant. Seul le DTPolio est obligatoire pour être accueilli en séjour de vacances. ",-1)),a[38]||(a[38]=S("br",null,null,-1)),a[39]||(a[39]=S("i",null," Si le participant n’a pas les vaccins obligatoires, joindre un certificat médical de contre-indication. ",-1)),t(V,{class:"mt-2",demande:l.fiche.VaccinsDemande,files:l.fiche.VaccinsFiles||[],"in-upload":!1,optionnelle:null,"show-upload-text":"",onUpload:a[1]||(a[1]=d=>i("uploadVaccin",d)),onDelete:a[2]||(a[2]=d=>i("deleteVaccin",d))},null,8,["demande","files"])]),_:1})]),_:1}),t(M,{subtitle:"Handicap",class:"my-2"},{default:e(()=>[t(w,null,{default:e(()=>[t(z,{modelValue:n.Handicap,"onUpdate:modelValue":a[3]||(a[3]=d=>n.Handicap=d),color:"primary",label:"Le participant est porteur de handicap. ","hide-details":""},null,8,["modelValue"]),t(ke,null,{default:e(()=>[t(W,{modelValue:n.Handicap,"onUpdate:modelValue":a[4]||(a[4]=d=>n.Handicap=d),color:"blue-lighten-4"},{default:e(()=>[...a[40]||(a[40]=[s(" Merci de ",-1),S("b",null,"contacter",-1),s(" au plus vite le directeur afin qu’un accueil individualisé puisse être mis en place. ",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(M,{subtitle:"Traitement",class:"my-2"},{default:e(()=>[t(w,null,{default:e(()=>[t(z,{modelValue:n.TraitementMedical,"onUpdate:modelValue":a[5]||(a[5]=d=>n.TraitementMedical=d),color:"primary",label:"Le participant suit un traitement médical pendant le séjour.","hide-details":""},null,8,["modelValue"]),t(ke,null,{default:e(()=>[t(W,{modelValue:n.TraitementMedical,"onUpdate:modelValue":a[6]||(a[6]=d=>n.TraitementMedical=d),color:"blue-lighten-4"},{default:e(()=>[...a[41]||(a[41]=[s(" Merci de joindre une ",-1),S("b",null,"ordonnance",-1),s(" récente et les ",-1),S("b",null,"médicaments",-1),s(" correspondants (avec la notice). Aucun médicament ne pourra être pris sans ordonnance. ",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(M,{subtitle:"Maladies",class:"my-2"},{default:e(()=>[t(w,null,{default:e(()=>[a[42]||(a[42]=s(" Le participant a-t-il déjà eu les maladies suivantes ? ",-1)),t(P,{class:"mt-2"},{default:e(()=>[t(c,{cols:"3",class:"py-0"},{default:e(()=>[t(z,{modelValue:n.Maladies.Rubeole,"onUpdate:modelValue":a[7]||(a[7]=d=>n.Maladies.Rubeole=d),color:"primary",label:"Rubéole","hide-details":""},null,8,["modelValue"])]),_:1}),t(c,{cols:"3",class:"py-0"},{default:e(()=>[t(z,{modelValue:n.Maladies.Varicelle,"onUpdate:modelValue":a[8]||(a[8]=d=>n.Maladies.Varicelle=d),color:"primary",label:"Varicelle","hide-details":""},null,8,["modelValue"])]),_:1}),t(c,{cols:"3",class:"py-0"},{default:e(()=>[t(z,{modelValue:n.Maladies.Angine,"onUpdate:modelValue":a[9]||(a[9]=d=>n.Maladies.Angine=d),color:"primary",label:"Angine","hide-details":""},null,8,["modelValue"])]),_:1}),t(c,{cols:"3",class:"py-0"},{default:e(()=>[t(z,{modelValue:n.Maladies.Oreillons,"onUpdate:modelValue":a[10]||(a[10]=d=>n.Maladies.Oreillons=d),color:"primary",label:"Oreillons","hide-details":""},null,8,["modelValue"])]),_:1}),t(c,{cols:"3",class:"py-0"},{default:e(()=>[t(z,{modelValue:n.Maladies.Scarlatine,"onUpdate:modelValue":a[11]||(a[11]=d=>n.Maladies.Scarlatine=d),color:"primary",label:"Scarlatine","hide-details":""},null,8,["modelValue"])]),_:1}),t(c,{cols:"3",class:"py-0"},{default:e(()=>[t(z,{modelValue:n.Maladies.Coqueluche,"onUpdate:modelValue":a[12]||(a[12]=d=>n.Maladies.Coqueluche=d),color:"primary",label:"Coqueluche","hide-details":""},null,8,["modelValue"])]),_:1}),t(c,{cols:"3",class:"py-0"},{default:e(()=>[t(z,{modelValue:n.Maladies.Otite,"onUpdate:modelValue":a[13]||(a[13]=d=>n.Maladies.Otite=d),color:"primary",label:"Otite","hide-details":""},null,8,["modelValue"])]),_:1}),t(c,{cols:"3",class:"py-0"},{default:e(()=>[t(z,{modelValue:n.Maladies.Rougeole,"onUpdate:modelValue":a[14]||(a[14]=d=>n.Maladies.Rougeole=d),color:"primary",label:"Rougeole","hide-details":""},null,8,["modelValue"])]),_:1}),t(c,{cols:"3",class:"py-0"},{default:e(()=>[t(z,{modelValue:n.Maladies.Rhumatisme,"onUpdate:modelValue":a[15]||(a[15]=d=>n.Maladies.Rhumatisme=d),color:"primary",label:"Rhumatisme articulaire aigü ","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(M,{subtitle:"Allergies",class:"my-2"},{default:e(()=>[t(w,null,{default:e(()=>[a[43]||(a[43]=s(" Le participant a-t-il une des allergies suivantes ? ",-1)),t(P,{class:"mt-2"},{default:e(()=>[t(c,{"align-self":"center",cols:"3",class:"py-0"},{default:e(()=>[t(z,{modelValue:n.Allergies.Asthme,"onUpdate:modelValue":a[16]||(a[16]=d=>n.Allergies.Asthme=d),color:"primary",label:"Asthme","hide-details":""},null,8,["modelValue"])]),_:1}),t(c,{"align-self":"center",cols:"3",class:"py-0"},{default:e(()=>[t(z,{modelValue:n.Allergies.Alimentaires,"onUpdate:modelValue":a[17]||(a[17]=d=>n.Allergies.Alimentaires=d),color:"primary",label:"Alimentaires","hide-details":""},null,8,["modelValue"])]),_:1}),t(c,{"align-self":"center",cols:"3",class:"py-0"},{default:e(()=>[t(z,{modelValue:n.Allergies.Medicamenteuses,"onUpdate:modelValue":a[18]||(a[18]=d=>n.Allergies.Medicamenteuses=d),color:"primary",label:"Médicamenteuses","hide-details":""},null,8,["modelValue"])]),_:1}),t(c,{"align-self":"center",cols:"3",class:"py-0"},{default:e(()=>[t(ie,{density:"compact",variant:"outlined","hide-details":"",label:"Autres allergies",modelValue:n.Allergies.Autres,"onUpdate:modelValue":a[19]||(a[19]=d=>n.Allergies.Autres=d)},null,8,["modelValue"])]),_:1})]),_:1}),t(ke,null,{default:e(()=>[y.value?(u(),v(P,{key:0},{default:e(()=>[t(c,null,{default:e(()=>[t(re,{variant:"outlined",label:"Conduite à tenir",modelValue:n.Allergies.ConduiteATenir,"onUpdate:modelValue":a[20]||(a[20]=d=>n.Allergies.ConduiteATenir=d),hint:"Préciser la cause de l’allergie et la conduite à tenir (si automédication le signaler). Si un PAI a été mis en place durant le temps scolaire, merci de nous le signaler.","persistent-hint":"",rules:[h(Ge).required("Merci de nous informer de la conduite à tenir en cas d'allergie.")]},null,8,["modelValue","rules"])]),_:1})]),_:1})):x("",!0)]),_:1})]),_:1})]),_:1}),t(M,{subtitle:"Divers",class:"my-2"},{default:e(()=>[t(w,null,{default:e(()=>[t(P,null,{default:e(()=>[t(c,null,{default:e(()=>[t(re,{variant:"outlined",label:"Difficultés de santé",modelValue:n.DifficultesSante,"onUpdate:modelValue":a[21]||(a[21]=d=>n.DifficultesSante=d),hint:"Indiquer les difficultés de santé (maladie, accident, crises convulsives, hospitalisation, opération, rééducation) en précisant les dates et les précautions à prendre.","persistent-hint":""},null,8,["modelValue"])]),_:1}),t(c,null,{default:e(()=>[t(re,{variant:"outlined",label:"Recommandations utiles",modelValue:n.Recommandations,"onUpdate:modelValue":a[22]||(a[22]=d=>n.Recommandations=d),hint:"Préciser si le participant porte des lunettes, des lentilles, des prothèses auditives, des prothèses dentaires...","persistent-hint":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(M,{subtitle:"Médecin traitant",class:"my-2"},{default:e(()=>[t(w,null,{default:e(()=>[t(P,null,{default:e(()=>[t(c,null,{default:e(()=>[t(ie,{variant:"outlined",density:"compact",label:"Nom",modelValue:n.Medecin.Nom,"onUpdate:modelValue":a[23]||(a[23]=d=>n.Medecin.Nom=d),"hide-details":""},null,8,["modelValue"])]),_:1}),t(c,null,{default:e(()=>[t(ie,{variant:"outlined",density:"compact",label:"Téléphone","model-value":h(Y).tel(n.Medecin.Tel),"onUpdate:modelValue":a[24]||(a[24]=d=>n.Medecin.Tel=d),"hide-details":""},null,8,["model-value"])]),_:1})]),_:1})]),_:1})]),_:1}),t(M,{subtitle:"Responsable légal",class:"my-2"},{default:e(()=>[t(w,null,{default:e(()=>[t(P,null,{default:e(()=>[t(c,{"align-self":"center"},{default:e(()=>[a[45]||(a[45]=s(" Téléphone : ",-1)),l.fiche.RespoTels?.length?x("",!0):(u(),v(ee,{key:0,label:""},{default:e(()=>[...a[44]||(a[44]=[s("Aucun numéro",-1)])]),_:1})),(u(!0),L(F,null,H(l.fiche.RespoTels,d=>(u(),v(ee,{label:"",class:"mx-1"},{default:e(()=>[s(k(h(Y).tel(d)),1)]),_:2},1024))),256))]),_:1}),t(c,{"align-self":"center"},{default:e(()=>[t(ie,{variant:"outlined",density:"compact",label:"Numéro de contact","model-value":h(Y).tel(n.Tel),"onUpdate:modelValue":a[25]||(a[25]=d=>n.Tel=d),hint:"Numéro de téléphone supplémentaire (optionnel)","persistent-hint":""},null,8,["model-value"])]),_:1})]),_:1}),t(P,null,{default:e(()=>[t(c,null,{default:e(()=>[t(ie,{variant:"outlined",density:"compact",label:"Sécurité sociale",modelValue:g.value,"onUpdate:modelValue":a[26]||(a[26]=d=>g.value=d),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(M,{class:"mt-4",variant:"outlined",color:"success",title:"Validation"},{default:e(()=>[t(w,{class:"text-black"},{default:e(()=>[...a[46]||(a[46]=[s(" Le responsable légal déclare ",-1),S("b",null,"exacts",-1),s(" les renseignements portés sur ce formulaire et autorise le responsable du séjour à prendre, le cas échéant, ",-1),S("b",null,"toutes mesures",-1),s(" (traitement médical, hospitalisation, intervention chirurgicale) rendues nécessaires par l'état du participant. Il autorise également, si nécessaire, le directeur du séjour à faire sortir le participant de l’hôpital après une hospitalisation. ",-1)])]),_:1}),t(se,null,{default:e(()=>[t(j,{block:"",color:"success",onClick:a[27]||(a[27]=d=>i("save",n,g.value))},{prepend:e(()=>[t($,null,{default:e(()=>[...a[47]||(a[47]=[s("mdi-content-save",-1)])]),_:1})]),default:e(()=>[s(" Enregistrer la fiche sanitaire de "+k(l.fiche.Personne),1)]),_:1})]),_:1})]),_:1})],64))])}}}),Bt=J({__name:"FichessanitairesCard",props:{token:{}},emits:["close","updateNotifs"],setup(m,{emit:o}){const l=m,i=o;de(y);const n=R(0),g=R([]);async function y(){const V=await A.LoadFichesanitaires({token:l.token});V!==void 0&&(g.value=V.Fiches||[],g.value.length&&n.value==0&&(n.value=g.value[0].Fichesanitaire.IdPersonne),i("updateNotifs",V.ToFillCount))}async function f(V,d){await A.UpdateFichesanitaire({Token:l.token,Fichesanitaire:V,SecuriteSocialeResponsable:d})!==void 0&&(A.showMessage("La fiche sanitaire a bien été enregistrée. Merci !"),y())}async function b(V,d){const U=g.value[V];await A.UploadVaccin(d,{token:l.token,idPersonne:U.Fichesanitaire.IdPersonne})!==void 0&&(y(),A.showMessage("Le vaccin a bien été téléversé. Merci !"))}async function p(V,d){g.value[V],await A.DeleteVaccin({key:d.Key})!==void 0&&(y(),A.showMessage("Le vaccin a bien été supprimé."))}async function a(V){i("close"),await A.TransfertFicheSanitaire({token:l.token,idPersonne:V.IdPersonne})!==void 0&&A.showMessage("Mail de transfert envoyé avec succès.")}return(V,d)=>(u(),v(M,{title:"Fiches sanitaires et vaccins"},{append:e(()=>[t(Ie,{modelValue:n.value,"onUpdate:modelValue":d[0]||(d[0]=U=>n.value=U)},{default:e(()=>[(u(!0),L(F,null,H(g.value,U=>(u(),v(Te,{value:U.Fichesanitaire.IdPersonne},{default:e(()=>[s(k(U.Personne)+" ",1),U.State==h(le).NoFiche||U.State==h(le).Outdated||!U.VaccinsFiles?.length?(u(),v($,{key:0,class:"ml-2",color:"warning"},{default:e(()=>[...d[1]||(d[1]=[s(" mdi-alert ",-1)])]),_:1})):(u(),v($,{key:1,class:"ml-2",color:"success"},{default:e(()=>[...d[2]||(d[2]=[s(" mdi-check ",-1)])]),_:1}))]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])]),default:e(()=>[t(w,null,{default:e(()=>[t(De,{"model-value":n.value},{default:e(()=>[(u(!0),L(F,null,H(g.value,(U,_)=>(u(),v(Fe,{value:U.Fichesanitaire.IdPersonne},{default:e(()=>[t(Ot,{fiche:U,onSave:f,onUploadVaccin:K=>b(_,K),onDeleteVaccin:K=>p(_,K),onTransfert:K=>a(U.Fichesanitaire)},null,8,["fiche","onUploadVaccin","onDeleteVaccin","onTransfert"])]),_:2},1032,["value"]))),256))]),_:1},8,["model-value"])]),_:1})]),_:1}))}}),zt=Ze({name:String,itemAriaLabel:{type:String,default:"$vuetify.rating.ariaLabel.item"},activeColor:String,color:String,clearable:Boolean,disabled:Boolean,emptyIcon:{type:Pe,default:"$ratingEmpty"},fullIcon:{type:Pe,default:"$ratingFull"},halfIncrements:Boolean,hover:Boolean,length:{type:[Number,String],default:5},readonly:Boolean,modelValue:{type:[Number,String],default:0},itemLabels:Array,itemLabelPosition:{type:String,default:"top",validator:m=>["top","bottom"].includes(m)},ripple:Boolean,...dt(),...rt(),...ut(),...it(),...ot()},"VRating"),Jt=We()({name:"VRating",props:zt(),emits:{"update:modelValue":m=>!0},setup(m,o){let{slots:l}=o;const{t:i}=Qe(),{themeClasses:n}=Xe(m),g=Ye(m,"modelValue"),y=N(()=>et(parseFloat(g.value),0,Number(m.length))),f=N(()=>tt(Number(m.length),1)),b=N(()=>f.value.flatMap(D=>m.halfIncrements?[D-.5,D]:[D])),p=lt(-1),a=N(()=>b.value.map(D=>{const E=m.hover&&p.value>-1,T=y.value>=D,Z=p.value>=D,me=(E?Z:T)?m.fullIcon:m.emptyIcon,I=m.activeColor??m.color,r=T||Z?I:m.color;return{isFilled:T,isHovered:Z,icon:me,color:r}})),V=N(()=>[0,...b.value].map(D=>{function E(){p.value=D}function T(){p.value=-1}function Z(){m.disabled||m.readonly||(g.value=y.value===D&&m.clearable?0:D)}return{onMouseenter:m.hover?E:void 0,onMouseleave:m.hover?T:void 0,onClick:Z}})),d=at(),U=N(()=>m.name??`v-rating-${d}`);function _(D){let{value:E,index:T,showStar:Z=!0}=D;const{onMouseenter:Q,onMouseleave:me,onClick:I}=V.value[T+1],r=`${U.value}-${String(E).replace(".","-")}`,ae={color:a.value[T]?.color,density:m.density,disabled:m.disabled,icon:a.value[T]?.icon,ripple:m.ripple,size:m.size,variant:"plain"};return S(F,null,[S("label",{for:r,class:ve({"v-rating__item--half":m.halfIncrements&&E%1>0,"v-rating__item--full":m.halfIncrements&&E%1===0}),onMouseenter:Q,onMouseleave:me,onClick:I},[S("span",{class:"v-rating__hidden"},[i(m.itemAriaLabel,E,m.length)]),Z?l.item?l.item({...a.value[T],props:ae,value:E,index:T,rating:y.value}):t(j,Ve({"aria-label":i(m.itemAriaLabel,E,m.length)},ae),null):void 0]),S("input",{class:"v-rating__hidden",name:U.value,id:r,type:"radio",value:E,checked:y.value===E,tabindex:-1,readonly:m.readonly,disabled:m.disabled},null)])}function K(D){return l["item-label"]?l["item-label"](D):D.label?S("span",null,[D.label]):S("span",null,[s(" ")])}return nt(()=>{const D=!!m.itemLabels?.length||l["item-label"];return t(m.tag,{class:ve(["v-rating",{"v-rating--hover":m.hover,"v-rating--readonly":m.readonly},n.value,m.class]),style:st(m.style)},{default:()=>[t(_,{value:0,index:-1,showStar:!1},null),f.value.map((E,T)=>S("div",{class:"v-rating__wrapper"},[D&&m.itemLabelPosition==="top"?K({value:E,index:T,label:m.itemLabels?.[T]}):void 0,S("div",{class:"v-rating__item"},[m.halfIncrements?S(F,null,[t(_,{value:E-.5,index:T*2},null),t(_,{value:E,index:T*2+1},null)]):t(_,{value:E,index:T},null)]),D&&m.itemLabelPosition==="bottom"?K({value:E,index:T,label:m.itemLabels?.[T]}):void 0]))]})}),{}}}),te=J({__name:"RatingField",props:mt({label:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(m){const o=m,l=pt(m,"modelValue");return(i,n)=>(u(),v(P,{"no-gutters":""},{default:e(()=>[t(c,{cols:"12"},{default:e(()=>[s(k(o.label),1)]),_:1}),t(c,{cols:"12"},{default:e(()=>[t(Jt,{hover:"",color:"primary",length:4,modelValue:l.value,"onUpdate:modelValue":n[0]||(n[0]=g=>l.value=g),size:"32"},null,8,["modelValue"])]),_:1})]),_:1}))}}),Kt={key:1},Gt=J({__name:"SondagesCard",props:{token:{},initialCamp:{}},setup(m){const o=m;de(n);const l=R(0),i=R(null);async function n(){const f=await A.LoadSondages({token:o.token});if(f===void 0)return;i.value=f||[];const b=(f||[]).filter(g);(f||[]).map(p=>p.Sondage.IdCamp).includes(o.initialCamp)?l.value=o.initialCamp:b.length?l.value=b[0].Sondage.IdCamp:l.value==0&&f?.length&&(l.value=f[0].Sondage.IdCamp)}function g(f){return ct(f.Sondage.Modified)}async function y(f){await A.UpdateSondages({Token:o.token,Id:f.Id,IdCamp:f.IdCamp,Reponse:f})!==void 0&&(n(),A.showMessage("Votre réponse a bien été enregistrée. Merci !"))}return(f,b)=>i.value==null?(u(),v(ye,{key:0,type:"card"})):i.value!=null?(u(),v(M,{key:1,title:"Enquête de satisfaction",width:i.value?.length?void 0:"600px",class:"mx-auto"},{default:e(()=>[t(w,null,{default:e(()=>[i.value.length?(u(),v(W,{key:0,color:"secondary",icon:"mdi-comment-quote"},{default:e(()=>[...b[1]||(b[1]=[s(" Afin d'améliorer nos prestations, nous avons à cœur de vous laisser la parole. Vos suggestions, remarques et ressentis nous aiderons à améliorer nos séjours. Merci d'avance de ce temps que vous réserverez pour répondre à cette courte enquête. ",-1)])]),_:1})):(u(),L("div",Kt," L'enquête n'est pas encore ouverte. Vous pourrez revenir ici donner votre avis une fois le séjour terminé. ")),i.value.length?(u(),v(Ie,{key:2,modelValue:l.value,"onUpdate:modelValue":b[0]||(b[0]=p=>l.value=p),grow:"",class:"mt-2"},{default:e(()=>[(u(!0),L(F,null,H(i.value,p=>(u(),v(Te,{value:p.Sondage.IdCamp},{default:e(()=>[s(k(p.Camp)+" ",1),g(p)?(u(),v(fe,{key:0,inline:"",content:"Nouveau",color:"pink"})):x("",!0)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])):x("",!0),t(De,{"model-value":l.value,class:"mt-2"},{default:e(()=>[(u(!0),L(F,null,H(i.value,p=>(u(),v(Fe,{value:p.Sondage.IdCamp},{default:e(()=>[t(M,{subtitle:"Vos impressions sur le séjour"},{default:e(()=>[t(w,null,{default:e(()=>[t(P,null,{default:e(()=>[t(c,{cols:"6"},{default:e(()=>[t(P,null,{default:e(()=>[t(c,null,{default:e(()=>[t(te,{label:"Informations avant le séjour",modelValue:p.Sondage.InfosAvantSejour,"onUpdate:modelValue":a=>p.Sondage.InfosAvantSejour=a},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(c,null,{default:e(()=>[t(te,{label:"Informations pendant le séjour",modelValue:p.Sondage.InfosPendantSejour,"onUpdate:modelValue":a=>p.Sondage.InfosPendantSejour=a},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(c,null,{default:e(()=>[t(te,{label:"L'hébergement",modelValue:p.Sondage.Hebergement,"onUpdate:modelValue":a=>p.Sondage.Hebergement=a},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),t(P,null,{default:e(()=>[t(c,null,{default:e(()=>[t(te,{label:"Les activités",modelValue:p.Sondage.Activites,"onUpdate:modelValue":a=>p.Sondage.Activites=a},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(c,null,{default:e(()=>[t(te,{label:"Le thème",modelValue:p.Sondage.Theme,"onUpdate:modelValue":a=>p.Sondage.Theme=a},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(c,null,{default:e(()=>[t(te,{label:"La nourriture",modelValue:p.Sondage.Nourriture,"onUpdate:modelValue":a=>p.Sondage.Nourriture=a},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),t(P,null,{default:e(()=>[t(c,null,{default:e(()=>[t(te,{label:"L'hygiène corporelle et vestimentaire",modelValue:p.Sondage.Hygiene,"onUpdate:modelValue":a=>p.Sondage.Hygiene=a},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(c,null,{default:e(()=>[t(te,{label:"L'ambiance du groupe",modelValue:p.Sondage.Ambiance,"onUpdate:modelValue":a=>p.Sondage.Ambiance=a},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(c,null,{default:e(()=>[t(te,{label:"Le ressenti global de votre enfant",modelValue:p.Sondage.Ressenti,"onUpdate:modelValue":a=>p.Sondage.Ressenti=a},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),t(c,{cols:"6"},{default:e(()=>[t(P,null,{default:e(()=>[t(c,{cols:"12"},{default:e(()=>[t(re,{rows:"3",label:"Message du participant",hint:"Le participant souhaite donner son avis : des regrets ? de bons souvenirs ? des propositions d'amélioration ?","persistent-hint":"",modelValue:p.Sondage.MessageEnfant,"onUpdate:modelValue":a=>p.Sondage.MessageEnfant=a},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(c,null,{default:e(()=>[t(re,{rows:"3",label:"Message du responsable",hint:"En tant que responsable, vous avez une remarque, une suggestion, un ressenti à partager : avec plaisir ! Nous prendrons soin de vous apporter une réponse en cas de besoin.","persistent-hint":"",modelValue:p.Sondage.MessageResponsable,"onUpdate:modelValue":a=>p.Sondage.MessageResponsable=a},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),t(se,null,{default:e(()=>[t(j,{block:"",variant:"outlined",color:"success",onClick:a=>y(p.Sondage)},{prepend:e(()=>[t($,null,{default:e(()=>[...b[2]||(b[2]=[s("mdi-content-save",-1)])]),_:1})]),default:e(()=>[s(" Enregistrer mon retour pour le séjour "+k(p.Camp),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["value"]))),256))]),_:1},8,["model-value"])]),_:1})]),_:1},8,["width"])):x("",!0)}}),Wt=J({__name:"DocumentsCard",props:{token:{}},emits:["updateNotifs"],setup(m,{emit:o}){const l=m,i=o;de(g);const n=R(null);async function g(){const b=await A.LoadDocuments({token:l.token});b!==void 0&&(n.value=b,i("updateNotifs",b.ToReadOrFillCount))}async function y(b,p,a){await A.UploadDocument(a,{token:l.token,idPersonne:b,idDemande:p})!==void 0&&(A.showMessage("Document téléversé avec succès. Merci !"),await g(),i("updateNotifs",n.value.ToReadOrFillCount))}async function f(b){await A.DeleteDocument({key:b.Key})!==void 0&&(A.showMessage("Document supprimé avec succès."),await g(),i("updateNotifs",n.value.ToReadOrFillCount))}return(b,p)=>{const a=St,V=Ee;return u(),v(M,{title:"Documents des séjours",subtitle:"Vous retrouvez ici les documents des séjours auxquels vous participez, à lire ou remplir."},{append:e(()=>[...p[0]||(p[0]=[])]),default:e(()=>[n.value!=null?(u(),v(w,{key:0},{default:e(()=>[t(ne,null,{default:e(()=>[t(Le,null,{default:e(()=>[...p[1]||(p[1]=[s("À lire",-1)])]),_:1}),n.value.FilesToRead?.length?x("",!0):(u(),v(q,{key:0},{default:e(()=>[...p[2]||(p[2]=[S("i",null,"Aucun document à lire.",-1)])]),_:1})),(u(!0),L(F,null,H(n.value.FilesToRead,d=>(u(),L(F,null,[(u(!0),L(F,null,H(d.Files,U=>(u(),v(q,{title:U.NomClient,subtitle:d.Camp},{append:e(()=>[t(a,{fileKey:U.Key,isGeneratedDoc:!1},null,8,["fileKey"])]),_:2},1032,["title","subtitle"]))),256)),(u(!0),L(F,null,H(d.Generated,U=>(u(),v(q,{title:U.NomClient,subtitle:d.Camp},{append:e(()=>[t(a,{fileKey:U.Key,isGeneratedDoc:!0},null,8,["fileKey"])]),_:2},1032,["title","subtitle"]))),256))],64))),256)),t(Le,null,{default:e(()=>[...p[3]||(p[3]=[s("À fournir",-1)])]),_:1}),n.value.FilesToUpload?.length?x("",!0):(u(),v(q,{key:1},{default:e(()=>[...p[4]||(p[4]=[S("i",null,"Aucun document à fournir.",-1)])]),_:1})),(u(!0),L(F,null,H(n.value.FilesToUpload,d=>(u(),L(F,null,[(u(!0),L(F,null,H(d.Demandes,U=>(u(),v(V,{demande:U.Demande,files:U.Uploaded||[],inUpload:!1,title:`Document pour ${d.Personne}`,optionnelle:null,showUploadText:!0,onUpload:_=>y(d.IdPersonne,U.Demande.Id,_),onDelete:f},Ce({_:2},[U.Demande.IdFile.Valid?{name:"prepend",fn:e(()=>[t(At,{"content-class":"pa-1"},{activator:e(({props:_})=>[t(j,Ve({ref_for:!0},_,{href:h(ft)(U.DemandeFile.Key),class:"mr-2",size:"small"}),{prepend:e(()=>[t($,null,{default:e(()=>[...p[5]||(p[5]=[s("mdi-download",-1)])]),_:1})]),default:e(()=>[p[6]||(p[6]=s(" Modèle",-1))]),_:1},16,["href"])]),default:e(()=>[t(a,{"file-key":U.DemandeFile.Key,isGeneratedDoc:!1,large:!0},null,8,["file-key"])]),_:2},1024)]),key:"0"}:void 0]),1032,["demande","files","title","onUpload"]))),256))],64))),256))]),_:1})]),_:1})):(u(),v(ye,{key:1}))]),_:1})}}}),Zt=J({__name:"FinancesReglementCard",props:{token:{},dossier:{},settings:{}},setup(m,{emit:o}){const l=m,i=R(l.settings.SupportPaiementEnLigne?G.EnLigne:G.Virement);async function n(y){await _e(y),A.showMessage("IBAN copié avec succès.")}async function g(y){await _e(y),A.showMessage("Identifiant de virement copié avec succès.")}return(y,f)=>(u(),v(M,{title:"Régler le séjour",class:"mt-2"},{default:e(()=>[t(w,null,{default:e(()=>[f[13]||(f[13]=s(" Le montant à régler est de ",-1)),S("b",null,k(l.dossier.Bilan.Restant),1),f[14]||(f[14]=s(". ",-1)),t(P,{class:"mt-4"},{default:e(()=>[t(c,{"align-self":"start",cols:"4"},{default:e(()=>[t(ne,{class:"py-0",selectable:"",selected:i.value,"onUpdate:selected":f[0]||(f[0]=b=>i.value=b)},{default:e(()=>[l.settings.SupportPaiementEnLigne?(u(),v(q,{key:0,rounded:"",class:"my-2",title:"Payer en ligne",subtitle:"par carte bancaire",value:h(G).EnLigne},{append:e(()=>[t($,null,{default:e(()=>[...f[2]||(f[2]=[s("mdi-credit-card",-1)])]),_:1})]),_:1},8,["value"])):x("",!0),t(q,{rounded:"",class:"my-2",title:"Payer par virement",value:h(G).Virement},{append:e(()=>[t($,null,{default:e(()=>[...f[3]||(f[3]=[s("mdi-bank",-1)])]),_:1})]),_:1},8,["value"]),l.settings.Cheques.IsValid?(u(),v(q,{key:1,rounded:"",class:"my-2",title:"Payer par chèque",value:h(G).Cheque},{append:e(()=>[t($,null,{default:e(()=>[...f[4]||(f[4]=[s("mdi-checkbook",-1)])]),_:1})]),_:1},8,["value"])):x("",!0)]),_:1},8,["selected"])]),_:1}),t(c,{"align-self":"start",cols:"8"},{default:e(()=>[t(M,{title:h(Lt)[i.value]},{default:e(()=>[i.value==h(G).EnLigne?(u(),v(w,{key:0},{default:e(()=>[...f[5]||(f[5]=[s(" TODO: see https://github.com/benoitkugler/registro/issues/76 ",-1)])]),_:1})):i.value==h(G).Virement?(u(),v(w,{key:1},{default:e(()=>[s(" Vous pouvez effectuer votre virement vers "+k(l.settings.BankAccounts?.length?"l'un des comptes suivants":"le compte suivant")+" : ",1),t(ne,{class:"my-2"},{default:e(()=>[(u(!0),L(F,null,H(l.settings.BankAccounts,b=>(u(),v(q,{title:b[0],subtitle:b[1]},{append:e(()=>[t(j,{size:"x-small",icon:"mdi-content-copy",onClick:p=>n(b[1])},null,8,["onClick"])]),_:2},1032,["title","subtitle"]))),256))]),_:1}),t(W,{type:"info"},{default:e(()=>[f[6]||(f[6]=s(" Merci d'indiquer impérativement le ",-1)),f[7]||(f[7]=S("b",null,"label",-1)),f[8]||(f[8]=s(" suivant sur votre virement, qui nous permettra de l'identifier : ",-1)),t(P,{"no-gutters":"",class:"mt-2"},{default:e(()=>[t(c,{"align-self":"center",class:"text-center"},{default:e(()=>[t(ee,{variant:"elevated"},{default:e(()=>[s(k(l.settings.VirementCode),1)]),_:1})]),_:1}),t(c,{"align-self":"center",cols:"auto"},{default:e(()=>[t(j,{class:"my-2",size:"x-small",icon:"mdi-content-copy",onClick:f[1]||(f[1]=b=>g(l.settings.VirementCode))})]),_:1})]),_:1})]),_:1})]),_:1})):i.value==h(G).Cheque?(u(),v(w,{key:2},{default:e(()=>[f[10]||(f[10]=s(" Merci d'envoyer votre chèque à l'ordre ",-1)),S("b",null,k(l.settings.Cheques.Ordre),1),f[11]||(f[11]=s(" à l'adresse suivante : ",-1)),t(P,{justify:"center"},{default:e(()=>[t(c,{cols:"auto"},{default:e(()=>[t(M,{class:"my-2"},{default:e(()=>[t(w,null,{default:e(()=>[s(k(l.settings.Cheques.Adresse[0])+" ",1),f[9]||(f[9]=S("br",null,null,-1)),s(" "+k(l.settings.Cheques.Adresse[1]),1)]),_:1})]),_:1})]),_:1})]),_:1}),f[12]||(f[12]=s(" Il sera encaissé environ une dizaine de jours avant le début du séjour. ",-1))]),_:1})):x("",!0)]),_:1},8,["title"])]),_:1})]),_:1})]),_:1})]),_:1}))}}),Qt=["href"],Xt=J({__name:"PresentationCard",props:{assoTitle:{},mailCentre:{}},setup(m){const o=m;return(l,i)=>(u(),v(M,{title:"Bienvenue sur votre espace de suivi !"},{default:e(()=>[t(w,null,{default:e(()=>[s(" Cette page regroupe toutes les informations liées à votre inscription et vous permet d'interagir avec les directeurs de séjour et l'association "+k(o.assoTitle)+", en utilisant le fil de messages. ",1),i[0]||(i[0]=S("br",null,null,-1)),i[1]||(i[1]=S("br",null,null,-1)),i[2]||(i[2]=s(" Cet espace évoluera au fil de l'inscription, et vous donnera accès au suivi de votre demande: ",-1)),t(ne,{class:"mb-2"},{default:e(()=>[t(q,{title:"Notification de validation",subtitle:"Après prise en compte de votre inscription par notre association.","append-icon":"mdi-check"}),t(q,{title:"Réglement des séjours","append-icon":"mdi-currency-eur"}),t(q,{title:"Documents des séjours",subtitle:"Lettre du directeur, fiches sanitaires, autres documents, ...","append-icon":"mdi-mail"}),t(q,{title:"Album photo",subtitle:"Accès vers une plateforme dédiée aux photos de vos séjours.","append-icon":"mdi-image-album"}),t(q,{title:"Justificatifs",subtitle:"Téléchargement d'une attestation de présence ou d'une facture acquittée.","append-icon":"mdi-download"}),t(q,{title:"Sondage",subtitle:"Un espace de commentaire ouvert à la fin des séjours.","append-icon":"mdi-comment-quote"})]),_:1}),i[3]||(i[3]=s(" La prochaine étape ? La confirmation de votre inscription vous sera donnée par le responsable du camp. Si un camp est déjà complet, vous serez mis sur liste d'attente. ",-1)),i[4]||(i[4]=S("br",null,null,-1)),i[5]||(i[5]=s(" Sans nouvelle d'ici 10 jours, veuillez contacter : ",-1)),S("a",{href:`mailto:${o.mailCentre}`},k(o.mailCentre),9,Qt)]),_:1})]),_:1}))}}),Yt=J({__name:"ValidationInscriptionCard",props:{dossier:{}},setup(m){const o=m,l=N(()=>(o.dossier.Participants||[]).filter(g=>g.Participant.Statut==B.Inscrit)),i=N(()=>(o.dossier.Participants||[]).filter(g=>g.Participant.Statut!=B.Inscrit&&g.Participant.Statut!=B.AStatuer)),n=N(()=>(o.dossier.Participants||[]).filter(g=>g.Participant.Statut==B.AStatuer));return(g,y)=>(u(),v(M,{title:"Inscription confirmée"},{default:e(()=>[t(w,null,{default:e(()=>[y[0]||(y[0]=S("div",{class:"mb-4"}," Nous avons bien reçu votre inscription, et nous vous en remercions. Voici son statut : ",-1)),l.value.length?(u(),v(W,{key:0,color:"lime-lighten-1",class:"my-2",elevation:"2",icon:h(Y).statutParticipant(h(B).Inscrit).icon},{default:e(()=>[t(P,null,{default:e(()=>[t(c,{"align-self":"center",class:"text-center"},{default:e(()=>[(u(!0),L(F,null,H(l.value,f=>(u(),v(ee,{class:"my-1"},{default:e(()=>[s(k(f.Personne.Prenom)+" : "+k(h(ue).label(f.Camp)),1)]),_:2},1024))),256))]),_:1}),t(c,{cols:"7"},{default:e(()=>[s("Nous sommes ravis de vous confirmer "+k(l.value.length==1?"cette participation":"ces participations")+" et nous nous réjouissons des moments à passer ensemble !",1)]),_:1})]),_:1})]),_:1},8,["icon"])):x("",!0),i.value.length?(u(),v(W,{key:1,color:"orange-lighten-3",class:"my-2",elevation:"2",icon:h(Y).statutParticipant(h(B).AttenteCampComplet).icon},{default:e(()=>[t(P,null,{default:e(()=>[t(c,{"align-self":"center",class:"text-center"},{default:e(()=>[(u(!0),L(F,null,H(i.value,f=>(u(),v(ee,{class:"my-1"},{default:e(()=>[s(k(f.Personne.Prenom)+" : "+k(h(ue).label(f.Camp)),1)]),_:2},1024))),256))]),_:1}),t(c,{cols:"7"},{default:e(()=>[s("Malheureusement, nous avons dû placer "+k(i.value.length==1?"cette demande":"ces demandes")+" en liste d'attente. Nous reviendrons vers vous si une place se libère.",1)]),_:1})]),_:1})]),_:1},8,["icon"])):x("",!0),n.value.length?(u(),v(W,{key:2,color:"grey-lighten-1",class:"my-2",elevation:"2",icon:h(Y).statutParticipant(h(B).AStatuer).icon},{default:e(()=>[t(P,null,{default:e(()=>[t(c,{"align-self":"center",class:"text-center"},{default:e(()=>[(u(!0),L(F,null,H(n.value,f=>(u(),v(ee,{class:"my-1"},{default:e(()=>[s(k(f.Personne.Prenom)+" : "+k(h(ue).label(f.Camp)),1)]),_:2},1024))),256))]),_:1}),t(c,{cols:"7"},{default:e(()=>[s(" Nous n'avons pas encore statué pour "+k(n.value.length==1?"cette demande":"ces demandes")+" et nous reviendrons vers vous au plus vite. ",1)]),_:1})]),_:1})]),_:1},8,["icon"])):x("",!0)]),_:1})]),_:1}))}}),el={class:"overflow-y-auto",style:{"max-height":"75vh"}},tl=J({__name:"Main",setup(m){const o=R("");de(async()=>{const I=new URLSearchParams(window.location.search),r=I.get("token")||"",ae=!!I.get("from-inscription"),C=Number(I.get("idEvent")||0);if(o.value=r,await i(),!!l.value){if(ae){Z.value=!0;return}y(C)}});const l=R(null);async function i(){const I=await A.Load({token:o.value});I!==void 0&&(l.value=I)}const n=N(()=>l.value==null?[]:vt(l.value.Dossier,xt.Espaceperso)),g=N(()=>l.value?l.value.DocumentsToReadOrFillCount+l.value.FichesanitaireToFillCount:0);function y(I){if(!l.value)return;const r=(l.value.Dossier.Events||[]).find(ae=>ae.Id==I);if(r)switch(r.Content.Kind){case pe.Validation:T.value=!0;return;case pe.Facture:E.value=!0;return;case pe.PlaceLiberee:Q.value=r;return;case pe.CampDocs:D.value=!0;return;case pe.Sondage:U.value=r.Content.Data.IdCamp;return;default:return}}const f=N(()=>l.value==null?!1:(l.value.Dossier.Participants||[]).find(I=>I.Participant.Statut==B.Inscrit)!=null),b=R(null);async function p(){if(!b.value||!l.value)return;const I={Token:o.value,Message:b.value.content,OnlyToFondSoutien:b.value.toFondSoutien};b.value=null;const r=await A.SendMessage(I);r!==void 0&&(A.showMessage("Message envoyé avec succès."),l.value.Dossier.Events=(l.value.Dossier.Events||[]).concat(r))}function a(I){return I.Participant.Statut==B.Inscrit?"bg-lime-lighten-2":I.Participant.Statut==B.AStatuer?"bg-grey-lighten-1":"bg-orange-lighten-3"}const V=R(!1);async function d(I){V.value=!1,await A.UpdateParticipants({Token:o.value,Participants:I})!==void 0&&A.showMessage("Modifications enregistrées avec succès. Merci !")}const U=R(null),_=R(!1),K=R(!1),D=R(!1),E=R(!1),T=R(!1),Z=R(!1),Q=R(null);async function me(){const I=Q.value;!I||(Q.value=null,await A.AcceptePlaceLiberee({token:o.value,idEvent:I.Id})===void 0)||(i(),A.showMessage("Place acceptée avec succès."))}return(I,r)=>{const ae=ht;return u(),L(F,null,[t(It,{title:"Espace de suivi de votre inscription"},{default:e(()=>[t(j,{onClick:r[0]||(r[0]=C=>U.value=0)},{prepend:e(()=>[t($,null,{default:e(()=>[...r[26]||(r[26]=[s("mdi-comment-quote",-1)])]),_:1})]),default:e(()=>[r[27]||(r[27]=s(" Avis ",-1))]),_:1}),t(j,{onClick:r[1]||(r[1]=C=>_.value=!0)},{prepend:e(()=>[t($,null,{default:e(()=>[...r[28]||(r[28]=[s("mdi-image-album",-1)])]),_:1})]),default:e(()=>[r[29]||(r[29]=s(" Album photos ",-1))]),_:1}),t(be,null,{activator:e(({props:C})=>[t(j,Ve(C,{disabled:!f.value}),{prepend:e(()=>[t($,null,{default:e(()=>[...r[30]||(r[30]=[s("mdi-download",-1)])]),_:1})]),default:e(()=>[r[31]||(r[31]=s(" Justificatifs ",-1))]),_:1},16,["disabled"])]),default:e(()=>[t(ne,null,{default:e(()=>[t(q,{title:"Attestation de présence",subtitle:"Télécharger au format .pdf","prepend-icon":"mdi-file-document-check",link:"",href:h(Ae).DownloadAttestationPresence(o.value)},null,8,["href"]),t(q,{title:"Facture",subtitle:"Télécharger au format .pdf","prepend-icon":"mdi-invoice-list",href:h(Ae).DownloadFacture(o.value)},null,8,["href"])]),_:1})]),_:1})]),_:1}),l.value==null?(u(),v(ye,{key:0,type:"card"})):(u(),v(gt,{key:1,class:"fill-height",fluid:""},{default:e(()=>[t(P,null,{default:e(()=>[t(c,{"align-self":"center",cols:"5"},{default:e(()=>[t(M,{subtitle:"Participants"},{append:e(()=>[t(j,{size:"small",class:"mr-1"},{prepend:e(()=>[t($,null,{default:e(()=>[...r[32]||(r[32]=[s("mdi-folder",-1)])]),_:1})]),default:e(()=>[t(fe,{color:g.value?"pink":"transparent",content:g.value||"",floating:""},{default:e(()=>[...r[33]||(r[33]=[s(" Documents ",-1)])]),_:1},8,["color","content"]),t(be,{activator:"parent"},{default:e(()=>[t(ne,null,{default:e(()=>[t(q,{title:"Documents du séjour",subtitle:"Lettre du directeur, ...","prepend-icon":"mdi-mail",onClick:r[2]||(r[2]=C=>D.value=!0)},Ce({_:2},[l.value.DocumentsToReadOrFillCount?{name:"append",fn:e(()=>[t(fe,{color:"pink",content:l.value.DocumentsToReadOrFillCount,inline:""},null,8,["content"])]),key:"0"}:void 0]),1024),t(q,{title:"Fiches sanitaires","prepend-icon":"mdi-pill",onClick:r[3]||(r[3]=C=>K.value=!0)},Ce({_:2},[l.value.FichesanitaireToFillCount?{name:"append",fn:e(()=>[t(fe,{color:"pink",content:l.value.FichesanitaireToFillCount,inline:""},null,8,["content"])]),key:"0"}:void 0]),1024)]),_:1})]),_:1})]),_:1})]),default:e(()=>[t(w,null,{default:e(()=>[t(ne,{class:"pa-0"},{default:e(()=>[(u(!0),L(F,null,H(l.value.Dossier.Participants,C=>(u(),v(q,{title:h(Se).label(C.Personne),subtitle:h(ue).label(C.Camp),rounded:"",class:ve({"my-2":!0,[a(C)]:!0})},{append:e(()=>[t(ee,{variant:"elevated",color:h(Y).statutParticipant(C.Participant.Statut).color,"prepend-icon":h(Y).statutParticipant(C.Participant.Statut).icon},{default:e(()=>[s(k(h(Mt)[C.Participant.Statut]),1)]),_:2},1032,["color","prepend-icon"])]),_:2},1032,["title","subtitle","class"]))),256))]),_:1})]),_:1})]),_:1}),t(jt,{token:o.value,dossier:l.value.Dossier,"is-paiement-open":l.value.IsPaiementOpen,settings:l.value.PaiementSettings,onRefresh:i,onShowReglement:r[4]||(r[4]=C=>E.value=!0)},null,8,["token","dossier","is-paiement-open","settings"])]),_:1}),t(c,{"align-self":"center"},{default:e(()=>[t(M,{subtitle:"Fil de suivi de votre inscription"},{append:e(()=>[t(j,{onClick:r[5]||(r[5]=C=>b.value={content:"",toFondSoutien:!1})},{prepend:e(()=>[t($,null,{default:e(()=>[...r[34]||(r[34]=[s("mdi-email",-1)])]),_:1})]),default:e(()=>[r[35]||(r[35]=s(" Nous écrire",-1))]),_:1})]),default:e(()=>[t(w,null,{default:e(()=>[S("div",el,[t(Ut,{side:"end",class:"mt-4",density:"compact"},{default:e(()=>[(u(!0),L(F,null,H(n.value,C=>(u(),v(ae,{event:C,onGoToSondage:r[6]||(r[6]=oe=>U.value=oe),onGoToDocuments:r[7]||(r[7]=oe=>D.value=!0),onGoToValidation:r[8]||(r[8]=oe=>T.value=!0),onAcceptPlaceLiberee:r[9]||(r[9]=oe=>y(oe)),onReplyFondSoutien:r[10]||(r[10]=oe=>b.value={content:"",toFondSoutien:!0})},null,8,["event"]))),256))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1}),t(X,{modelValue:V.value,"onUpdate:modelValue":r[11]||(r[11]=C=>V.value=C)},{default:e(()=>[t(Tt,{participants:l.value.Dossier.Participants||[],onSave:d},null,8,["participants"])]),_:1},8,["modelValue"])]),_:1})),t(X,{"model-value":b.value!=null,"onUpdate:modelValue":r[13]||(r[13]=C=>b.value=null),"max-width":"600px"},{default:e(()=>[b.value?(u(),v(M,{key:0,title:"Nouveau message",subtitle:b.value.toFondSoutien?"Ce message ne sera visible que par le fonds de soutien.":"Ce message sera visible par le centre et les directeurs."},{default:e(()=>[t(w,null,{default:e(()=>[t(re,{autofocus:"",placeholder:"Rédigez votre message...",modelValue:b.value.content,"onUpdate:modelValue":r[12]||(r[12]=C=>b.value.content=C),rows:"10"},null,8,["modelValue"])]),_:1}),t(se,null,{default:e(()=>[t(ge),t(j,{disabled:!b.value.content.length,onClick:p},{prepend:e(()=>[t($,null,{default:e(()=>[...r[36]||(r[36]=[s("mdi-send",-1)])]),_:1})]),default:e(()=>[r[37]||(r[37]=s(" Envoyer",-1))]),_:1},8,["disabled"])]),_:1})]),_:1},8,["subtitle"])):x("",!0)]),_:1},8,["model-value"]),t(X,{"model-value":U.value!=null,"onUpdate:modelValue":r[14]||(r[14]=C=>U.value=null)},{default:e(()=>[U.value!=null?(u(),v(Gt,{key:0,token:o.value,"initial-camp":U.value},null,8,["token","initial-camp"])):x("",!0)]),_:1},8,["model-value"]),t(X,{modelValue:_.value,"onUpdate:modelValue":r[15]||(r[15]=C=>_.value=C)},{default:e(()=>[t(qt,{token:o.value},null,8,["token"])]),_:1},8,["modelValue"]),t(X,{modelValue:K.value,"onUpdate:modelValue":r[18]||(r[18]=C=>K.value=C)},{default:e(()=>[t(Bt,{token:o.value,onClose:r[16]||(r[16]=C=>K.value=!1),onUpdateNotifs:r[17]||(r[17]=C=>l.value.FichesanitaireToFillCount=C)},null,8,["token"])]),_:1},8,["modelValue"]),t(X,{modelValue:D.value,"onUpdate:modelValue":r[21]||(r[21]=C=>D.value=C),"max-width":"800px"},{default:e(()=>[t(Wt,{token:o.value,onClose:r[19]||(r[19]=C=>D.value=!1),onUpdateNotifs:r[20]||(r[20]=C=>l.value.DocumentsToReadOrFillCount=C)},null,8,["token"])]),_:1},8,["modelValue"]),l.value?(u(),v(X,{key:2,modelValue:E.value,"onUpdate:modelValue":r[22]||(r[22]=C=>E.value=C),"max-width":"800px"},{default:e(()=>[t(Zt,{token:o.value,dossier:l.value.Dossier,settings:l.value.PaiementSettings},null,8,["token","dossier","settings"])]),_:1},8,["modelValue"])):x("",!0),t(X,{modelValue:Z.value,"onUpdate:modelValue":r[23]||(r[23]=C=>Z.value=C),"max-width":"800px"},{default:e(()=>[l.value?(u(),v(Xt,{key:0,"asso-title":l.value.AssoTitle,"mail-centre":l.value.MailCentre},null,8,["asso-title","mail-centre"])):x("",!0)]),_:1},8,["modelValue"]),t(X,{modelValue:T.value,"onUpdate:modelValue":r[24]||(r[24]=C=>T.value=C),"max-width":"800px"},{default:e(()=>[l.value?(u(),v(Yt,{key:0,dossier:l.value.Dossier},null,8,["dossier"])):x("",!0)]),_:1},8,["modelValue"]),t(X,{"model-value":Q.value!=null,"onUpdate:modelValue":r[25]||(r[25]=C=>Q.value=null),"max-width":"600px"},{default:e(()=>[Q.value?(u(),v(M,{key:0,title:"Accepter la place"},{default:e(()=>[t(w,null,{default:e(()=>[s(" Confirmez-vous l'inscription de "+k(Q.value.Content.Data.ParticipantLabel)+" sur le séjour "+k(Q.value.Content.Data.CampLabel)+" ? ",1),r[38]||(r[38]=S("br",null,null,-1)),r[39]||(r[39]=S("br",null,null,-1)),r[40]||(r[40]=S("span",{class:"text-grey"},"Un mail de notification sera envoyé automatiquement au centre.",-1))]),_:1}),t(se,null,{default:e(()=>[t(ge),t(j,{color:"success",onClick:me},{default:e(()=>[...r[41]||(r[41]=[s("Confirmer",-1)])]),_:1})]),_:1})]),_:1})):x("",!0)]),_:1},8,["model-value"])],64)}}}),ll=["innerHTML"],al=J({__name:"App",setup(m){const o=xe({text:"",color:"secondary",action:void 0,timeout:4e3}),l=R(""),i=R("");return A.onError=(n,g)=>{l.value=n,i.value=g},A.showMessage=(n,g,y)=>{o.text=n,o.color=g||"success",o.action=y,o.timeout=1e4,o.timeout=4e3},(n,g)=>(u(),v(Vt,null,{default:e(()=>[t(bt,null,{default:e(()=>[t(tl),t(we,{style:{"z-index":"10000"},app:"","model-value":o.text!="","onUpdate:modelValue":g[1]||(g[1]=y=>o.text=""),timeout:o.timeout,color:o.color,location:"bottom left","close-on-content-click":""},{default:e(()=>[s(k(o.text)+" ",1),o.action?(u(),v(j,{key:0,onClick:g[0]||(g[0]=y=>o.action.action()),class:"ml-2"},{default:e(()=>[s(k(o.action.title),1)]),_:1})):x("",!0)]),_:1},8,["model-value","timeout","color"]),t(we,{app:"","model-value":l.value!="","onUpdate:modelValue":g[2]||(g[2]=y=>l.value=""),timeout:4e3,color:"red"},{default:e(()=>[S("b",null,k(l.value),1),S("div",{innerHTML:i.value},null,8,ll)]),_:1},8,["model-value"])]),_:1})]),_:1}))}}),$e=yt(al);$e.use(kt);$e.mount("#app");
