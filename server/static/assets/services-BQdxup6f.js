import{ct as L,bQ as A,bS as R,d as U,k as l,aa as x,q as p,o as v,w as t,b as r,b0 as C,V as E,f as F,g as B,h as _,i as H,e as f,m as M,cU as $,$ as q,ag as N,Z as z,az as P,j as c,b1 as b,t as k,b2 as j,b3 as I,b4 as D}from"./VSnackbar-CBECO1fY.js";class K{constructor(a,s){this.baseURL=a,this.authToken=s}getHeaders(){return{Authorization:"Bearer "+this.authToken}}async ValideTransfertFicheSanitaire(a){const s=this.baseURL+"/api/v1/espaceperso/fichesanitaires/transfert";this.startRequest();try{return await L.post(s,null,{headers:this.getHeaders(),params:{token:a.token}}),!0}catch(o){this.handleError(o)}}}class Q extends K{constructor(a,s,o){super(o,""),this.onError=a,this.showMessage=s}handleError(a){const{kind:s,messageHtml:o}=R(a);this.onError(s,o)}startRequest(){}}const d=new Q((i,a)=>{},(i,a)=>{},A()),m={TransfertFicheSanitaire:1};m.TransfertFicheSanitaire+"";const Z=["innerHTML"],G=U({__name:"App",setup(i){const a=l(""),s=l("secondary"),o=l(""),h=l("");d.onError=(n,e)=>{o.value=n,h.value=e},d.showMessage=(n,e)=>{a.value=n,s.value=e||"success"};const w="/static/repere/logo.png",g=l(!0),V=l(1);x(()=>{const n=new URLSearchParams(window.location.search),e=n.get("service")||"",u=Number(e);switch(u){case m.TransfertFicheSanitaire:V.value=u;const T=n.get("token")||"";return y(T);default:d.onError("Service invalide",`Le paramètre <i>service</i> a une valeur incorrecte : ${e}`)}});async function y(n){const e=await d.ValideTransfertFicheSanitaire({token:n});g.value=!1}return(n,e)=>(v(),p(j,null,{default:t(()=>[r(C,null,{default:t(()=>[r(E,{rounded:"",elevation:"4",color:"secondary"},{default:t(()=>[r(F,null,{default:t(()=>[r(B,null,{default:t(()=>[r(_,{"align-self":"center",cols:"auto"},{default:t(()=>[r(H,{width:"60",src:w})]),_:1}),r(_,{"align-self":"center"},{default:t(()=>[...e[2]||(e[2]=[f(" Portail ",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),r(M,{class:"fill-height"},{default:t(()=>[r($,null,{default:t(()=>[g.value?(v(),p(N,{key:0})):V.value==z(m).TransfertFicheSanitaire?(v(),p(P,{key:1,title:"Partage de fiche sanitaire",type:"success"},{default:t(()=>[...e[3]||(e[3]=[f(" L'accès à la fiche a bien été mis à jour. ",-1),c("br",null,null,-1),c("small",{class:"text-muted"},"Vous pouvez quitter cette page et actualiser votre espace de suivi pour y accéder.",-1)])]),_:1})):q("",!0)]),_:1})]),_:1}),r(b,{style:{"z-index":"10000"},app:"","model-value":a.value!="","onUpdate:modelValue":e[0]||(e[0]=u=>a.value=""),timeout:4e3,color:s.value,location:"bottom left","close-on-content-click":""},{default:t(()=>[f(k(a.value),1)]),_:1},8,["model-value","color"]),r(b,{app:"","model-value":o.value!="","onUpdate:modelValue":e[1]||(e[1]=u=>o.value=""),timeout:4e3,color:"red"},{default:t(()=>[c("b",null,k(o.value),1),c("div",{innerHTML:h.value},null,8,Z)]),_:1},8,["model-value"])]),_:1})]),_:1}))}}),S=I(G);S.use(D);S.mount("#app");
