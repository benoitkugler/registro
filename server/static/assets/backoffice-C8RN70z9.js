import{c as Ml,a as $l,f as Al,d as z,r as M,b as q,F as le,e,w as l,V as hl,g as te,h as de,i as V,j as S,k as J,l as Ul,m as N,n as b,o as Tl,t as T,p as ll,q as O,s as p,u as Q,v as W,x as oe,y as B,z as ue,A as ne,B as Rl,C as Ce,D as ke,E as Ge,G as kt,H as L,I as al,J as Ae,K as fe,L as ce,M as h,N as ge,O as De,P as Oe,Q as Dt,R as He,S as Ll,T as Qe,U as Se,W as at,X as El,Y as Ne,Z as we,_ as $e,$ as nl,a0 as X,a1 as Fe,a2 as Bl,a3 as Re,a4 as nt,a5 as Nl,a6 as se,a7 as Xe,a8 as qe,a9 as Fl,aa as Ie,ab as il,ac as ie,ad as Le,ae as be,af as ze,ag as Pe,ah as it,ai as ve,aj as Ve,ak as ul,al as _e,am as xe,an as sl,ao as Ol,ap as ql,aq as zl,ar as jl,as as Hl,at as Nt,au as Ft,av as Ql,aw as Yl,ax as Wl,ay as Kl,az as Jl,aA as Gl,aB as Xl,aC as Zl,aD as ea,aE as ta,aF as ol,aG as rl,aH as la,aI as _t,aJ as aa,aK as na,aL as wt,aM as rt,aN as St,aO as dt,aP as It,aQ as dl,aR as Ze,aS as ia,aT as Ot,aU as Ct,aV as cl,aW as ut,aX as ua,aY as he,aZ as sa,a_ as Je,a$ as oa,b0 as ml,b1 as ra,b2 as da,b3 as ca,b4 as ma,b5 as va,b6 as vl,b7 as fl,b8 as lt,b9 as fa,ba as yt,bb as Ue,bc as pa,bd as ya,be as pl,bf as ba,bg as qt,bh as xt,bi as bt,bj as gt,bk as ga,bl as Va,bm as ka,bn as yl,bo as bl,bp as _a,bq as Ca,br as xa,bs as Pa,bt as Da,bu as wa,bv as Sa,bw as Ia,bx as Ma,by as $a,bz as Aa,bA as ha,bB as zt,bC as Ua,bD as Ta}from"./VSnackbar-CgAukBO4.js";import{V as Ra,a as La,u as ct,c as U,i as jt,_ as Ea,b as mt,d as gl,e as Ba,f as Mt,g as Na,h as Fa,j as Oa,k as qa,l as za,m as ja,n as Ha,o as Ht,p as Qt,q as Qa,r as Ya}from"./VTabs-BagcHLsx.js";import{V as vt,_ as $t,a as Pt,b as Wa,c as Ka,d as Ja,e as Ga}from"./SexeField.vue_vue_type_script_setup_true_lang-C6zlppMw.js";import{V as Yt,m as Xa}from"./VSheet-DLnoQu0V.js";import{V as je}from"./VTooltip-DXEu9Zu0.js";import"./VWindowItem-6JFtH0Uu.js";const Za=Ml({locale:{locale:"fr",messages:{fr:Al}},theme:{defaultTheme:"light",themes:{light:{colors:$l}}}}),ft=z({__name:"NavBar",props:{title:{},hideMenu:{type:Boolean}},setup(t){const u="/static/repere/logo.png",n="v0.1.0",o=M(!1),a=t;return(r,d)=>(p(),q(le,null,[e(Ra,{app:"",modelValue:o.value,"onUpdate:modelValue":d[0]||(d[0]=i=>o.value=i),temporary:""},{default:l(()=>[e(te,{title:"Registro - Backoffice",subtitle:n}),e(de),e(te,{"prepend-icon":"mdi-bed",link:"",to:{path:"/camps"},color:"primary"},{default:l(()=>d[2]||(d[2]=[V(" Camps ")])),_:1}),e(te,{"prepend-icon":"mdi-calendar-multiple-check",link:"",to:{path:"/inscriptions"},color:"primary"},{default:l(()=>d[3]||(d[3]=[V(" Inscriptions ")])),_:1}),e(de),e(te,{"prepend-icon":"mdi-account-multiple",link:"",to:{path:"/annuaire"},color:"primary"},{default:l(()=>d[4]||(d[4]=[V(" Annuaire ")])),_:1}),e(de),e(te,{"prepend-icon":"mdi-logout",link:"",to:{path:"/"},color:"primary"},{default:l(()=>d[5]||(d[5]=[V(" Se déconnecter ")])),_:1})]),_:1},8,["modelValue"]),e(hl,{rounded:"",elevation:"4",color:"secondary"},{append:l(()=>[ll(r.$slots,"default"),d[6]||(d[6]=O("div",{class:"mr-2"},null,-1))]),default:l(()=>[r.hideMenu?J("",!0):(p(),S(La,{key:0,onClick:d[1]||(d[1]=i=>o.value=!o.value)})),e(Ul,null,{default:l(()=>[e(N,null,{default:l(()=>[e(b,{"align-self":"center",cols:"auto"},{default:l(()=>[e(Tl,{width:"60",src:u})]),_:1}),e(b,{"align-self":"center"},{default:l(()=>[V(T(a.title),1)]),_:1})]),_:1})]),_:1})]),_:3})],64))}}),en=z({__name:"index",setup(t){const u=ct(),n=M(!1),o=M(""),a=M([]);async function r(){const d=await U.Loggin({password:o.value});d!==void 0&&(d.IsValid?(U.setToken(d.Token),U.showMessage("Bienvenue !"),u.push({path:"/camps"})):a.value=["Clé de connection incorrecte."])}return(d,i)=>(p(),q(le,null,[e(ft,{title:"Connection au backoffice","hide-menu":""}),e(Rl,{class:"fill-height"},{default:l(()=>[e(Q,{class:"mx-auto",width:"400px"},{default:l(()=>[e(W,null,{default:l(()=>[e(oe,{label:"Clé de connection",modelValue:o.value,"onUpdate:modelValue":i[1]||(i[1]=s=>o.value=s),"error-messages":a.value,type:n.value?void 0:"password",name:"password"},{"append-inner":l(()=>[e(B,{class:"ml-2",size:"small",icon:n.value?"mdi-eye":"mdi-eye-off",flat:"",onClick:i[0]||(i[0]=s=>n.value=!n.value)},null,8,["icon"])]),_:1},8,["modelValue","error-messages","type"])]),_:1}),e(ue,null,{default:l(()=>[e(ne),e(B,{disabled:!o.value.length,onClick:r},{default:l(()=>i[2]||(i[2]=[V("Se connecter")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})],64))}}),Ye=z({__name:"IntField",props:Ce({label:{},hint:{},min:{},max:{},disabled:{type:Boolean},suffix:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const u=t,n=ke(t,"modelValue");return(o,a)=>(p(),S(oe,{label:u.label,density:"compact",variant:"outlined",type:"number",min:u.min===void 0?1:u.min,max:u.max,modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=r=>n.value=r),modelModifiers:{number:!0},"hide-details":!o.hint,hint:u.hint,disabled:u.disabled,suffix:u.suffix},null,8,["label","min","max","modelValue","hide-details","hint","disabled","suffix"]))}}),pt=z({__name:"BoolField",props:Ce({label:{},hideDetails:{type:Boolean},readonly:{type:Boolean},density:{},persistentHint:{type:Boolean},hint:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const u=t,n=ke(t,"modelValue");return(o,a)=>(p(),S(vt,{label:u.label,"model-value":n.value,"onUpdate:modelValue":a[0]||(a[0]=r=>n.value=r||!1),"hide-details":u.hideDetails,readonly:u.readonly,density:u.density,"persistent-hint":u.persistentHint,hint:u.hint},null,8,["label","model-value","hide-details","readonly","density","persistent-hint","hint"]))}}),We=z({__name:"MontantField",props:Ce({label:{},hideDetails:{type:Boolean},readonlyCurrency:{type:Boolean},disabled:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const u=t,n=ke(t,"modelValue"),o=Ge(kt);return(a,r)=>(p(),S(N,{"no-gutters":""},{default:l(()=>[e(b,{cols:u.readonlyCurrency?12:6},{default:l(()=>[e(oe,{class:"mr-1",variant:"outlined",density:"compact","hide-details":u.hideDetails,label:u.label,type:"number",disabled:u.disabled,"model-value":n.value.Cent/100,"onUpdate:modelValue":r[0]||(r[0]=d=>n.value={Cent:L(al)(Number(d)*100),Currency:n.value.Currency}),suffix:u.readonlyCurrency?L(kt)[n.value.Currency]:void 0},null,8,["hide-details","label","disabled","model-value","suffix"])]),_:1},8,["cols"]),u.readonlyCurrency?J("",!0):(p(),S(b,{key:0,cols:"6"},{default:l(()=>[e(Ae,{label:"Monnaie",variant:"outlined",density:"compact",disabled:u.disabled,items:L(o),"model-value":n.value.Currency,"hide-details":u.hideDetails,"onUpdate:modelValue":r[1]||(r[1]=d=>n.value={Cent:n.value.Cent,Currency:d})},null,8,["disabled","items","model-value","hide-details"])]),_:1}))]),_:1}))}}),Vl=ce({active:{type:[String,Array],default:void 0},disabled:{type:[Boolean,String,Array],default:!1},nextIcon:{type:De,default:"$next"},prevIcon:{type:De,default:"$prev"},modeIcon:{type:De,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),Wt=fe()({name:"VDatePickerControls",props:Vl(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(t,u){let{emit:n}=u;const o=h(()=>Array.isArray(t.disabled)?t.disabled.includes("text"):!!t.disabled),a=h(()=>Array.isArray(t.disabled)?t.disabled.includes("mode"):!!t.disabled),r=h(()=>Array.isArray(t.disabled)?t.disabled.includes("prev"):!!t.disabled),d=h(()=>Array.isArray(t.disabled)?t.disabled.includes("next"):!!t.disabled);function i(){n("click:prev")}function s(){n("click:next")}function c(){n("click:year")}function m(){n("click:month")}return ge(()=>e("div",{class:["v-date-picker-controls"]},[e(B,{class:"v-date-picker-controls__month-btn",disabled:o.value,text:t.text,variant:"text",rounded:!0,onClick:m},null),e(B,{key:"mode-btn",class:"v-date-picker-controls__mode-btn",disabled:a.value,density:"comfortable",icon:t.modeIcon,variant:"text",onClick:c},null),e(ne,{key:"mode-spacer"},null),e("div",{key:"month-buttons",class:"v-date-picker-controls__month"},[e(B,{disabled:r.value,icon:t.prevIcon,variant:"text",onClick:i},null),e(B,{disabled:d.value,icon:t.nextIcon,variant:"text",onClick:s},null)])])),{}}}),tn=ce({appendIcon:De,color:String,header:String,transition:String,onClick:Ll()},"VDatePickerHeader"),Kt=fe()({name:"VDatePickerHeader",props:tn(),emits:{click:()=>!0,"click:append":()=>!0},setup(t,u){let{emit:n,slots:o}=u;const{backgroundColorClasses:a,backgroundColorStyles:r}=Oe(t,"color");function d(){n("click")}function i(){n("click:append")}return ge(()=>{const s=!!(o.default||t.header),c=!!(o.append||t.appendIcon);return e("div",{class:["v-date-picker-header",{"v-date-picker-header--clickable":!!t.onClick},a.value],style:r.value,onClick:d},[o.prepend&&e("div",{key:"prepend",class:"v-date-picker-header__prepend"},[o.prepend()]),s&&e(Dt,{key:"content",name:t.transition},{default:()=>{var m;return[e("div",{key:t.header,class:"v-date-picker-header__content"},[((m=o.default)==null?void 0:m.call(o))??t.header])]}}),c&&e("div",{class:"v-date-picker-header__append"},[o.append?e(He,{key:"append-defaults",disabled:!t.appendIcon,defaults:{VBtn:{icon:t.appendIcon,variant:"text"}}},{default:()=>{var m;return[(m=o.append)==null?void 0:m.call(o)]}}):e(B,{key:"append-btn",icon:t.appendIcon,variant:"text",onClick:i},null)])])}),{}}}),ln=ce({allowedDates:[Array,Function],disabled:Boolean,displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:[Number,String]},"calendar");function an(t){const u=Qe(),n=Se(t,"modelValue",[],f=>at(f)),o=h(()=>t.displayValue?u.date(t.displayValue):n.value.length>0?u.date(n.value[0]):t.min?u.date(t.min):Array.isArray(t.allowedDates)?u.date(t.allowedDates[0]):u.date()),a=Se(t,"year",void 0,f=>{const C=f!=null?Number(f):u.getYear(o.value);return u.startOfYear(u.setYear(u.date(),C))},f=>u.getYear(f)),r=Se(t,"month",void 0,f=>{const C=f!=null?Number(f):u.getMonth(o.value),$=u.setYear(u.startOfMonth(u.date()),u.getYear(a.value));return u.setMonth($,C)},f=>u.getMonth(f)),d=h(()=>t.firstDayOfWeek??t.weekdays[0]),i=h(()=>{const f=Number(t.firstDayOfWeek??0);return t.weekdays.map(C=>(C+f)%7)}),s=h(()=>{const f=u.getWeekArray(r.value,d.value),C=f.flat(),$=6*7;if(t.weeksInMonth==="static"&&C.length<$){const E=C[C.length-1];let P=[];for(let D=1;D<=$-C.length;D++)P.push(u.addDays(E,D)),D%7===0&&(f.push(P),P=[])}return f});function c(f,C){return f.filter($=>i.value.includes(u.toJsDate($).getDay())).map(($,E)=>{const P=u.toISO($),D=!u.isSameMonth($,r.value),G=u.isSameDay($,u.startOfMonth(r.value)),Y=u.isSameDay($,u.endOfMonth(r.value)),ae=u.isSameDay($,r.value);return{date:$,isoDate:P,formatted:u.format($,"keyboardDate"),year:u.getYear($),month:u.getMonth($),isDisabled:I($),isWeekStart:E%7===0,isWeekEnd:E%7===6,isToday:u.isSameDay($,C),isAdjacent:D,isHidden:D&&!t.showAdjacentMonths,isStart:G,isSelected:n.value.some(Z=>u.isSameDay($,Z)),isEnd:Y,isSame:ae,localized:u.format($,"dayOfMonth")}})}const m=h(()=>{const f=u.startOfWeek(o.value,t.firstDayOfWeek),C=[];for(let E=0;E<=6;E++)C.push(u.addDays(f,E));const $=u.date();return c(C,$)}),g=h(()=>{const f=s.value.flat(),C=u.date();return c(f,C)}),y=h(()=>s.value.map(f=>f.length?El(u,f[0]):null));function I(f){if(t.disabled)return!0;const C=u.date(f);return t.min&&u.isAfter(u.date(t.min),C)||t.max&&u.isAfter(C,u.date(t.max))?!0:Array.isArray(t.allowedDates)&&t.allowedDates.length>0?!t.allowedDates.some($=>u.isSameDay(u.date($),C)):typeof t.allowedDates=="function"?!t.allowedDates(C):!1}return{displayValue:o,daysInMonth:g,daysInWeek:m,genDays:c,model:n,weeksInMonth:s,weekDays:i,weekNumbers:y}}const kl=ce({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...ln()},"VDatePickerMonth"),Jt=fe()({name:"VDatePickerMonth",props:kl(),emits:{"update:modelValue":t=>!0,"update:month":t=>!0,"update:year":t=>!0},setup(t,u){let{emit:n,slots:o}=u;const a=M(),{daysInMonth:r,model:d,weekNumbers:i}=an(t),s=Qe(),c=Ne(),m=Ne(),g=Ne(!1),y=h(()=>g.value?t.reverseTransition:t.transition);t.multiple==="range"&&d.value.length>0&&(c.value=d.value[0],d.value.length>1&&(m.value=d.value[d.value.length-1]));const I=h(()=>{const E=["number","string"].includes(typeof t.multiple)?Number(t.multiple):1/0;return d.value.length>=E});we(r,(E,P)=>{P&&(g.value=s.isBefore(E[0].date,P[0].date))});function f(E){const P=s.startOfDay(E);if(d.value.length===0?c.value=void 0:d.value.length===1&&(c.value=d.value[0],m.value=void 0),!c.value)c.value=P,d.value=[c.value];else if(m.value)c.value=E,m.value=void 0,d.value=[c.value];else{if(s.isSameDay(P,c.value)){c.value=void 0,d.value=[];return}else s.isBefore(P,c.value)?(m.value=s.endOfDay(c.value),c.value=P):m.value=s.endOfDay(P);const D=s.getDiff(m.value,c.value,"days"),G=[c.value];for(let Y=1;Y<D;Y++){const ae=s.addDays(c.value,Y);G.push(ae)}G.push(m.value),d.value=G}}function C(E){const P=d.value.findIndex(D=>s.isSameDay(D,E));if(P===-1)d.value=[...d.value,E];else{const D=[...d.value];D.splice(P,1),d.value=D}}function $(E){t.multiple==="range"?f(E):t.multiple?C(E):d.value=[E]}return()=>e("div",{class:"v-date-picker-month"},[t.showWeek&&e("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!t.hideWeekdays&&e("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[V(" ")]),i.value.map(E=>e("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[E]))]),e(Dt,{name:y.value},{default:()=>{var E;return[e("div",{ref:a,key:(E=r.value[0].date)==null?void 0:E.toString(),class:"v-date-picker-month__days"},[!t.hideWeekdays&&s.getWeekdays(t.firstDayOfWeek).map(P=>e("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[P])),r.value.map((P,D)=>{const G={props:{onClick:()=>$(P.date)},item:P,i:D};return I.value&&!P.isSelected&&(P.isDisabled=!0),e("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":P.isAdjacent,"v-date-picker-month__day--hide-adjacent":P.isHidden,"v-date-picker-month__day--selected":P.isSelected,"v-date-picker-month__day--week-end":P.isWeekEnd,"v-date-picker-month__day--week-start":P.isWeekStart}],"data-v-date":P.isDisabled?void 0:P.isoDate},[(t.showAdjacentMonths||!P.isAdjacent)&&e(He,{defaults:{VBtn:{class:"v-date-picker-month__day-btn",color:(P.isSelected||P.isToday)&&!P.isDisabled?t.color:void 0,disabled:P.isDisabled,icon:!0,ripple:!1,text:P.localized,variant:P.isDisabled?P.isToday?"outlined":"text":P.isToday&&!P.isSelected?"outlined":"flat",onClick:()=>$(P.date)}}},{default:()=>{var Y;return[((Y=o.day)==null?void 0:Y.call(o,G))??e(B,G.props,null)]}})])})])]}})])}}),_l=ce({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number},"VDatePickerMonths"),Gt=fe()({name:"VDatePickerMonths",props:_l(),emits:{"update:modelValue":t=>!0},setup(t,u){let{emit:n,slots:o}=u;const a=Qe(),r=Se(t,"modelValue"),d=h(()=>{let i=a.startOfYear(a.date());return t.year&&(i=a.setYear(i,t.year)),$e(12).map(s=>{const c=a.format(i,"monthShort"),m=!!(t.min&&a.isAfter(a.startOfMonth(a.date(t.min)),i)||t.max&&a.isAfter(i,a.startOfMonth(a.date(t.max))));return i=a.getNextMonth(i),{isDisabled:m,text:c,value:s}})});return nl(()=>{r.value=r.value??a.getMonth(a.date())}),ge(()=>e("div",{class:"v-date-picker-months",style:{height:Fe(t.height)}},[e("div",{class:"v-date-picker-months__content"},[d.value.map((i,s)=>{var g;const c={active:r.value===s,color:r.value===s?t.color:void 0,disabled:i.isDisabled,rounded:!0,text:i.text,variant:r.value===i.value?"flat":"text",onClick:()=>m(s)};function m(y){if(r.value===y){n("update:modelValue",r.value);return}r.value=y}return((g=o.month)==null?void 0:g.call(o,{month:i,i:s,props:c}))??e(B,X({key:"month"},c),null)})])])),{}}}),Cl=ce({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),Xt=fe()({name:"VDatePickerYears",props:Cl(),emits:{"update:modelValue":t=>!0},setup(t,u){let{emit:n,slots:o}=u;const a=Qe(),r=Se(t,"modelValue"),d=h(()=>{const s=a.getYear(a.date());let c=s-100,m=s+52;t.min&&(c=a.getYear(a.date(t.min))),t.max&&(m=a.getYear(a.date(t.max)));let g=a.startOfYear(a.date());return g=a.setYear(g,c),$e(m-c+1,c).map(y=>{const I=a.format(g,"year");return g=a.setYear(g,a.getYear(g)+1),{text:I,value:y}})});nl(()=>{r.value=r.value??a.getYear(a.date())});const i=Bl();return Re(async()=>{var s;await nt(),(s=i.el)==null||s.scrollIntoView({block:"center"})}),ge(()=>e("div",{class:"v-date-picker-years",style:{height:Fe(t.height)}},[e("div",{class:"v-date-picker-years__content"},[d.value.map((s,c)=>{var g;const m={ref:r.value===s.value?i:void 0,active:r.value===s.value,color:r.value===s.value?t.color:void 0,rounded:!0,text:s.text,variant:r.value===s.value?"flat":"text",onClick:()=>{if(r.value===s.value){n("update:modelValue",r.value);return}r.value=s.value}};return((g=o.year)==null?void 0:g.call(o,{year:s,i:c,props:m}))??e(B,X({key:"month"},m),null)})])])),{}}}),nn=Nl("v-picker-title"),At=ce({bgColor:String,landscape:Boolean,title:String,hideHeader:Boolean,...Xa()},"VPicker"),st=fe()({name:"VPicker",props:At(),setup(t,u){let{slots:n}=u;const{backgroundColorClasses:o,backgroundColorStyles:a}=Oe(se(t,"color"));return ge(()=>{const r=Yt.filterProps(t),d=!!(t.title||n.title);return e(Yt,X(r,{color:t.bgColor,class:["v-picker",{"v-picker--landscape":t.landscape,"v-picker--with-actions":!!n.actions},t.class],style:t.style}),{default:()=>{var i;return[!t.hideHeader&&e("div",{key:"header",class:[o.value],style:[a.value]},[d&&e(nn,{key:"picker-title"},{default:()=>{var s;return[((s=n.title)==null?void 0:s.call(n))??t.title]}}),n.header&&e("div",{class:"v-picker__header"},[n.header()])]),e("div",{class:"v-picker__body"},[(i=n.default)==null?void 0:i.call(n)]),n.actions&&e(He,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[e("div",{class:"v-picker__actions"},[n.actions()])]})]}})}),{}}}),un=ce({header:{type:String,default:"$vuetify.datePicker.header"},...Vl(),...kl({weeksInMonth:"static"}),...qe(_l(),["modelValue"]),...qe(Cl(),["modelValue"]),...At({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),sn=fe()({name:"VDatePicker",props:un(),emits:{"update:modelValue":t=>!0,"update:month":t=>!0,"update:year":t=>!0,"update:viewMode":t=>!0},setup(t,u){let{emit:n,slots:o}=u;const a=Qe(),{t:r}=Xe(),d=Se(t,"modelValue",void 0,k=>at(k),k=>t.multiple?k:k[0]),i=Se(t,"viewMode"),s=h(()=>{var A;const k=a.date((A=d.value)==null?void 0:A[0]);return k&&a.isValid(k)?k:a.date()}),c=M(Number(t.month??a.getMonth(a.startOfMonth(s.value)))),m=M(Number(t.year??a.getYear(a.startOfYear(a.setMonth(s.value,c.value))))),g=Ne(!1),y=h(()=>t.multiple&&d.value.length>1?r("$vuetify.datePicker.itemsSelected",d.value.length):d.value[0]&&a.isValid(d.value[0])?a.format(a.date(d.value[0]),"normalDateWithWeekday"):r(t.header)),I=h(()=>{let k=a.date();return k=a.setDate(k,1),k=a.setMonth(k,c.value),k=a.setYear(k,m.value),a.format(k,"monthAndYear")}),f=h(()=>`date-picker-header${g.value?"-reverse":""}-transition`),C=h(()=>{const k=a.date(t.min);return t.min&&a.isValid(k)?k:null}),$=h(()=>{const k=a.date(t.max);return t.max&&a.isValid(k)?k:null}),E=h(()=>{if(t.disabled)return!0;const k=[];if(i.value!=="month")k.push("prev","next");else{let A=a.date();if(A=a.setYear(A,m.value),A=a.setMonth(A,c.value),C.value){const K=a.addDays(a.startOfMonth(A),-1);a.isAfter(C.value,K)&&k.push("prev")}if($.value){const K=a.addDays(a.endOfMonth(A),1);a.isAfter(K,$.value)&&k.push("next")}}return k});function P(){c.value<11?c.value++:(m.value++,c.value=0,v(m.value)),Z(c.value)}function D(){c.value>0?c.value--:(m.value--,c.value=11,v(m.value)),Z(c.value)}function G(){i.value="month"}function Y(){i.value=i.value==="months"?"month":"months"}function ae(){i.value=i.value==="year"?"month":"year"}function Z(k){i.value==="months"&&Y(),n("update:month",k)}function v(k){i.value==="year"&&ae(),n("update:year",k)}return we(d,(k,A)=>{const K=at(A),x=at(k);if(!x.length)return;const w=a.date(K[K.length-1]),j=a.date(x[x.length-1]),F=a.getMonth(j),ee=a.getYear(j);F!==c.value&&(c.value=F,Z(c.value)),ee!==m.value&&(m.value=ee,v(m.value)),g.value=a.isBefore(w,j)}),ge(()=>{const k=st.filterProps(t),A=Wt.filterProps(t),K=Kt.filterProps(t),x=Jt.filterProps(t),w=qe(Gt.filterProps(t),["modelValue"]),j=qe(Xt.filterProps(t),["modelValue"]),F={header:y.value,transition:f.value};return e(st,X(k,{class:["v-date-picker",`v-date-picker--${i.value}`,{"v-date-picker--show-week":t.showWeek},t.class],style:t.style}),{title:()=>{var ee;return((ee=o.title)==null?void 0:ee.call(o))??e("div",{class:"v-date-picker__title"},[r(t.title)])},header:()=>o.header?e(He,{defaults:{VDatePickerHeader:{...F}}},{default:()=>{var ee;return[(ee=o.header)==null?void 0:ee.call(o,F)]}}):e(Kt,X({key:"header"},K,F,{onClick:i.value!=="month"?G:void 0}),{...o,default:void 0}),default:()=>e(le,null,[e(Wt,X(A,{disabled:E.value,text:I.value,"onClick:next":P,"onClick:prev":D,"onClick:month":Y,"onClick:year":ae}),null),e(Fl,{hideOnLeave:!0},{default:()=>[i.value==="months"?e(Gt,X({key:"date-picker-months"},w,{modelValue:c.value,"onUpdate:modelValue":[ee=>c.value=ee,Z],min:C.value,max:$.value,year:m.value}),null):i.value==="year"?e(Xt,X({key:"date-picker-years"},j,{modelValue:m.value,"onUpdate:modelValue":[ee=>m.value=ee,v],min:C.value,max:$.value}),null):e(Jt,X({key:"date-picker-month"},x,{modelValue:d.value,"onUpdate:modelValue":ee=>d.value=ee,month:c.value,"onUpdate:month":[ee=>c.value=ee,Z],year:m.value,"onUpdate:year":[ee=>m.value=ee,v],min:C.value,max:$.value}),null)]})]),actions:o.actions})}),{}}}),on=z({__name:"DateField",props:Ce({label:{},hideDetails:{type:Boolean},readonly:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const u=t,n=ke(t,"modelValue"),o=Qe();function a(d){r.value=!1,n.value=il(d)}const r=M(!1);return(d,i)=>u.readonly?(p(),S(oe,{key:0,class:"center-text",variant:"outlined",density:"compact","hide-details":u.hideDetails,label:u.label,"model-value":L(o).parseISO(n.value).toLocaleDateString(),readonly:""},null,8,["hide-details","label","model-value"])):(p(),S(Ie,{key:1,"close-on-content-click":!1,modelValue:r.value,"onUpdate:modelValue":i[1]||(i[1]=s=>r.value=s)},{activator:l(({props:s})=>[e(oe,X({class:"center-text"},s,{variant:"outlined",density:"compact","hide-details":u.hideDetails,label:u.label,"model-value":L(o).parseISO(n.value).toLocaleDateString()}),null,16,["hide-details","label","model-value"])]),default:l(()=>[e(sn,{"model-value":L(o).parseISO(n.value),"onUpdate:modelValue":i[0]||(i[0]=s=>a(s))},null,8,["model-value"])]),_:1},8,["modelValue"]))}}),xl=$t(on,[["__scopeId","data-v-1e184428"]]),rn=z({__name:"OptionStatut",props:Ce({camp:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const u=t,n=ke(t,"modelValue");function o(){var c;const d=(c=n.value)!=null&&c.length?n.value.map(m=>m.Id):[0],s={Id:Math.max(...d)+1,Label:"",Description:"",Prix:u.camp.Prix.Cent};n.value=(n.value||[]).concat(s),a.value=s}const a=M(null);function r(d){n.value=(n.value||[]).filter(i=>i.Id!=d.Id)}return(d,i)=>{const s=We;return p(),S(Q,{subtitle:"Le prix dépend du statut du participant, à choisir parmi la liste ci-dessous."},{append:l(()=>[e(B,{icon:"",size:"x-small",onClick:o},{default:l(()=>[e(ve,{color:"green"},{default:l(()=>i[4]||(i[4]=[V("mdi-plus")])),_:1})]),_:1})]),default:l(()=>[a.value!=null?(p(),S(ie,{key:0,"model-value":a.value!=null,"onUpdate:modelValue":i[3]||(i[3]=c=>a.value=null),"max-width":"500px"},{default:l(()=>[e(Q,{title:"Modifier le statut"},{default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(b,{cols:"12"},{default:l(()=>[e(oe,{autofocus:"",label:"Statut",modelValue:a.value.Label,"onUpdate:modelValue":i[0]||(i[0]=c=>a.value.Label=c),density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(b,{cols:"12"},{default:l(()=>[e(oe,{label:"Description",modelValue:a.value.Description,"onUpdate:modelValue":i[1]||(i[1]=c=>a.value.Description=c),density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(b,{cols:"12"},{default:l(()=>[e(s,{"model-value":{Cent:a.value.Prix,Currency:u.camp.Prix.Currency},"onUpdate:modelValue":i[2]||(i[2]=c=>a.value.Prix=c.Cent),label:"Prix","readonly-currency":""},null,8,["model-value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])):J("",!0),e(W,{class:"py-0"},{default:l(()=>[e(Le,null,{default:l(()=>{var c;return[(c=n.value)!=null&&c.length?J("",!0):(p(),S(te,{key:0},{default:l(()=>i[5]||(i[5]=[O("i",null,"Aucun statut n'est encore défini.",-1)])),_:1})),(p(!0),q(le,null,be(n.value,m=>(p(),S(te,{title:m.Label,subtitle:m.Description,onClick:g=>a.value=m},{append:l(()=>[e(N,null,{default:l(()=>[e(b,{"align-self":"center"},{default:l(()=>[e(ze,null,{default:l(()=>[V(T(L(Pe).montant({Cent:m.Prix,Currency:d.camp.Prix.Currency})),1)]),_:2},1024)]),_:2},1024),e(b,{"align-self":"center",cols:"auto"},{default:l(()=>[e(B,{icon:"",size:"x-small",class:"my-1",onClick:it(g=>r(m),["stop"])},{default:l(()=>[e(ve,{color:"red"},{default:l(()=>i[6]||(i[6]=[V("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["title","subtitle","onClick"]))),256))]}),_:1})]),_:1})]),_:1})}}}),dn=z({__name:"OptionJournee",props:Ce({camp:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const u=t,n=ke(t,"modelValue");we(()=>n.value,o,{immediate:!0});function o(){var d;const r=u.camp.Duree;((d=n.value)==null?void 0:d.length)!=r&&(n.value=Array.from({length:r}).map(i=>0))}function a(){const r=n.value,d=r[0];for(let i=0;i<r.length;i++)r[i]=d}return(r,d)=>{const i=We;return p(),S(Q,{subtitle:"Le prix est variable en fonction des jours de participation au camp."},{append:l(()=>[e(je,{text:"Appliquer le prix du premier jour à tous."},{activator:l(({props:s})=>[e(B,X(s,{icon:"mdi-arrow-expand",size:"x-small",disabled:!(n.value||[])[0],onClick:a}),null,16,["disabled"])]),_:1})]),default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[(p(!0),q(le,null,be(n.value,(s,c)=>(p(),S(b,{cols:"3"},{default:l(()=>[e(i,{label:`Jour ${c+1}`,"model-value":{Cent:s,Currency:u.camp.Prix.Currency},"onUpdate:modelValue":m=>n.value[c]=m.Cent,"readonly-currency":""},null,8,["label","model-value","onUpdate:modelValue"])]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})}}}),cn={key:0,class:"text-center"},mn=z({__name:"CampOptionsPrix",props:Ce({camp:{}},{optionPrix:{required:!0},optionPrixModifiers:{},optionQf:{required:!0},optionQfModifiers:{}}),emits:["update:optionPrix","update:optionQf"],setup(t){const u=t,n=ke(t,"optionPrix"),o=ke(t,"optionQf"),a=h(()=>Ve.isQuotientFamilialActive(o.value)),r=Ge(ul);return(d,i)=>{const s=Ye;return p(),S(Q,{title:"Options sur le prix",subtitle:"Permet de modifier le prix de base du séjour",width:"1000px"},{default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(b,{"align-self":"center"},{default:l(()=>[e(vt,{"model-value":a.value,"onUpdate:modelValue":i[0]||(i[0]=c=>o.value[3]=c?100:0),"hide-details":"",label:"Prix au quotient familial"},null,8,["model-value"])]),_:1}),e(b,{"align-self":"center"},{default:l(()=>[e(s,{suffix:"%",min:0,max:100,disabled:!a.value,"hide-details":"","readonly-currency":"",label:"entre 1 et 359",modelValue:o.value[0],"onUpdate:modelValue":i[1]||(i[1]=c=>o.value[0]=c)},null,8,["disabled","modelValue"])]),_:1}),e(b,{"align-self":"center"},{default:l(()=>[e(s,{suffix:"%",min:0,max:100,disabled:!a.value,"hide-details":"","readonly-currency":"",label:"entre 360 et 564",modelValue:o.value[1],"onUpdate:modelValue":i[2]||(i[2]=c=>o.value[1]=c)},null,8,["disabled","modelValue"])]),_:1}),e(b,{"align-self":"center"},{default:l(()=>[e(s,{suffix:"%",min:0,max:100,disabled:!a.value,"hide-details":"","readonly-currency":"",label:"entre 565 et 714",modelValue:o.value[2],"onUpdate:modelValue":i[3]||(i[3]=c=>o.value[2]=c)},null,8,["disabled","modelValue"])]),_:1}),e(b,{"align-self":"center"},{default:l(()=>[e(s,{suffix:"%",min:0,max:100,disabled:!0,"hide-details":"","readonly-currency":"",label:"plus de 715",modelValue:o.value[3],"onUpdate:modelValue":i[4]||(i[4]=c=>o.value[3]=c)},null,8,["modelValue"])]),_:1})]),_:1}),e(de,{thickness:"1",class:"my-2"}),e(N,{class:"my-2"},{default:l(()=>[e(b,{"align-self":"center",cols:"4"},{default:l(()=>[e(Ae,{variant:"outlined",density:"comfortable","hide-details":"",items:L(r),label:"Option sur le prix",modelValue:n.value.Active,"onUpdate:modelValue":i[5]||(i[5]=c=>n.value.Active=c)},null,8,["items","modelValue"])]),_:1}),e(b,{"align-self":"center"},{default:l(()=>[n.value.Active==L(_e).NoOption?(p(),q("div",cn,i[8]||(i[8]=[O("i",null,"Aucune modification sur le prix de base.",-1)]))):n.value.Active==L(_e).PrixStatut?(p(),S(rn,{key:1,camp:u.camp,modelValue:n.value.Statuts,"onUpdate:modelValue":i[6]||(i[6]=c=>n.value.Statuts=c)},null,8,["camp","modelValue"])):n.value.Active==L(_e).PrixJour?(p(),S(dn,{key:2,camp:u.camp,modelValue:n.value.Jours,"onUpdate:modelValue":i[7]||(i[7]=c=>n.value.Jours=c)},null,8,["camp","modelValue"])):J("",!0)]),_:1})]),_:1})]),_:1})]),_:1})}}}),vn={key:0,class:"mx-1"},fn={key:1,class:"mx-1"},pn={key:2,class:"mx-1"},yn=z({__name:"CampEdit",props:{camp:{}},emits:["save"],setup(t,{emit:u}){const n=t,o=u,a=M(xe(n.camp)),r=h(()=>{var d,i;return new Date(a.value.DateDebut).getFullYear()>=2020&&a.value.Places>=1&&a.value.Nom!=""&&a.value.AgeMax>=a.value.AgeMin&&a.value.OptionQuotientFamilial.every(s=>0<=s&&s<=100)&&!(a.value.OptionPrix.Active==_e.PrixStatut&&!((d=a.value.OptionPrix.Statuts)!=null&&d.length))&&!(a.value.OptionPrix.Active==_e.PrixJour&&((i=a.value.OptionPrix.Jours)==null?void 0:i.length)!=a.value.Duree)});return(d,i)=>{const s=pt,c=xl,m=Ye,g=We;return p(),S(Q,{title:"Editer le camp"},{default:l(()=>[e(W,null,{default:l(()=>[e(sl,null,{default:l(()=>[e(N,null,{default:l(()=>[e(b,null,{default:l(()=>[e(oe,{autofocus:"","hide-details":"",label:"Nom",density:"compact",variant:"outlined",modelValue:a.value.Nom,"onUpdate:modelValue":i[0]||(i[0]=y=>a.value.Nom=y)},null,8,["modelValue"])]),_:1}),e(b,null,{default:l(()=>[e(oe,{"hide-details":"",label:"Lieu",density:"compact",variant:"outlined",modelValue:a.value.Lieu,"onUpdate:modelValue":i[1]||(i[1]=y=>a.value.Lieu=y)},null,8,["modelValue"])]),_:1}),e(b,null,{default:l(()=>[e(oe,{"hide-details":"",label:"Numéro d'agrément",density:"compact",variant:"outlined",modelValue:a.value.Agrement,"onUpdate:modelValue":i[2]||(i[2]=y=>a.value.Agrement=y)},null,8,["modelValue"])]),_:1}),e(b,null,{default:l(()=>[e(s,{label:"Ouvert aux inscriptions",modelValue:a.value.Ouvert,"onUpdate:modelValue":i[3]||(i[3]=y=>a.value.Ouvert=y),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(b,{"align-self":"center",cols:"2"},{default:l(()=>[e(c,{modelValue:a.value.DateDebut,"onUpdate:modelValue":i[4]||(i[4]=y=>a.value.DateDebut=y),label:"Date de début","hide-details":""},null,8,["modelValue"])]),_:1}),e(b,{"align-self":"center",cols:"2"},{default:l(()=>[e(m,{label:"Durée (en jours)",modelValue:a.value.Duree,"onUpdate:modelValue":i[5]||(i[5]=y=>a.value.Duree=y),"hide-details":""},null,8,["modelValue"])]),_:1}),e(b,{"align-self":"center",cols:"2"},{default:l(()=>[e(c,{"model-value":L(Ve).dateFin(a.value),label:"Date de fin",readonly:"","hide-details":""},null,8,["model-value"])]),_:1}),e(b,{"align-self":"center",cols:"3"},{default:l(()=>[e(g,{label:"Prix",modelValue:a.value.Prix,"onUpdate:modelValue":i[6]||(i[6]=y=>a.value.Prix=y),"hide-details":""},null,8,["modelValue"])]),_:1}),e(b,{"align-self":"center",cols:"3",class:"text-center"},{default:l(()=>[e(Ie,{"close-on-content-click":!1},{activator:l(({props:y})=>[e(ze,X(y,{elevation:"1",label:""}),{default:l(()=>[!L(Ve).isQuotientFamilialActive(a.value.OptionQuotientFamilial)&&a.value.OptionPrix.Active==L(_e).NoOption?(p(),q("div",vn," Aucune option ")):J("",!0),L(Ve).isQuotientFamilialActive(a.value.OptionQuotientFamilial)?(p(),q("div",fn," Quotient familial ")):J("",!0),a.value.OptionPrix.Active!=L(_e).NoOption?(p(),q("div",pn,T(L(ul)[a.value.OptionPrix.Active]),1)):J("",!0)]),_:2},1040)]),default:l(()=>[e(mn,{camp:a.value,"option-prix":a.value.OptionPrix,"onUpdate:optionPrix":i[7]||(i[7]=y=>a.value.OptionPrix=y),"option-qf":a.value.OptionQuotientFamilial,"onUpdate:optionQf":i[8]||(i[8]=y=>a.value.OptionQuotientFamilial=y)},null,8,["camp","option-prix","option-qf"])]),_:1})]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(b,{"align-self":"center",cols:"2"},{default:l(()=>[e(m,{modelValue:a.value.Places,"onUpdate:modelValue":i[9]||(i[9]=y=>a.value.Places=y),label:"Nombre de places"},null,8,["modelValue"])]),_:1}),e(b,{"align-self":"center",cols:"2"},{default:l(()=>[e(m,{modelValue:a.value.AgeMin,"onUpdate:modelValue":i[10]||(i[10]=y=>a.value.AgeMin=y),label:"Âge minimum"},null,8,["modelValue"])]),_:1}),e(b,{"align-self":"center",cols:"2"},{default:l(()=>[e(m,{modelValue:a.value.AgeMax,"onUpdate:modelValue":i[11]||(i[11]=y=>a.value.AgeMax=y),label:"Âge maximum"},null,8,["modelValue"])]),_:1}),e(b,{cols:"6"},{default:l(()=>[e(s,{modelValue:a.value.NeedEquilibreGF,"onUpdate:modelValue":i[12]||(i[12]=y=>a.value.NeedEquilibreGF=y),label:"Equilibre G/F demandé",density:"compact","persistent-hint":"",hint:"Place un inscrit en liste d'attente en cas de déséquilibre Garçons/Filles"},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(b,null,{default:l(()=>[e(Pt,{variant:"outlined",density:"compact",label:"Description",hint:"Ce texte est affiché sur le formulaire d'inscription.","persistent-hint":"",rows:"3",modelValue:a.value.Description,"onUpdate:modelValue":i[13]||(i[13]=y=>a.value.Description=y)},null,8,["modelValue"])]),_:1}),e(b,{cols:"2"}),e(b,{cols:"2"},{default:l(()=>[e(s,{label:"Navette",modelValue:a.value.Navette.Actif,"onUpdate:modelValue":i[14]||(i[14]=y=>a.value.Navette.Actif=y)},null,8,["modelValue"])]),_:1}),e(b,null,{default:l(()=>[e(Pt,{variant:"outlined",density:"compact",label:"Navette",hint:"Ce texte est affiché sur le formulaire d'inscription.","persistent-hint":"",rows:"3",disabled:!a.value.Navette.Actif,modelValue:a.value.Navette.Commentaire,"onUpdate:modelValue":i[15]||(i[15]=y=>a.value.Navette.Commentaire=y)},null,8,["disabled","modelValue"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(b,null,{default:l(()=>[e(oe,{label:"Mot de passe",density:"compact",variant:"outlined",hint:"Mot de passe d'accès à la page Directeur","persistent-hint":"",modelValue:a.value.Password,"onUpdate:modelValue":i[16]||(i[16]=y=>a.value.Password=y)},null,8,["modelValue"])]),_:1}),e(b)]),_:1})]),_:1})]),_:1}),e(ue,null,{default:l(()=>[e(ne),e(B,{disabled:!r.value,onClick:i[17]||(i[17]=y=>o("save",a.value))},{default:l(()=>i[18]||(i[18]=[V("Enregistrer")])),_:1},8,["disabled"])]),_:1})]),_:1})}}}),bn=ce({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Jl(),...Kl()},"VSwitch"),gn=fe()({name:"VSwitch",inheritAttrs:!1,props:bn(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:indeterminate":t=>!0},setup(t,u){let{attrs:n,slots:o}=u;const a=Se(t,"indeterminate"),r=Se(t,"modelValue"),{loaderClasses:d}=Ol(t),{isFocused:i,focus:s,blur:c}=ql(t),m=M(),g=zl&&window.matchMedia("(forced-colors: active)").matches,y=h(()=>typeof t.loading=="string"&&t.loading!==""?t.loading:t.color),I=jl(),f=h(()=>t.id||`switch-${I}`);function C(){a.value&&(a.value=!1)}function $(E){var P,D;E.stopPropagation(),E.preventDefault(),(D=(P=m.value)==null?void 0:P.input)==null||D.click()}return ge(()=>{const[E,P]=Hl(n),D=Nt.filterProps(t),G=Ft.filterProps(t);return e(Nt,X({class:["v-switch",{"v-switch--flat":t.flat},{"v-switch--inset":t.inset},{"v-switch--indeterminate":a.value},d.value,t.class]},E,D,{modelValue:r.value,"onUpdate:modelValue":Y=>r.value=Y,id:f.value,focused:i.value,style:t.style}),{...o,default:Y=>{let{id:ae,messagesId:Z,isDisabled:v,isReadonly:k,isValid:A}=Y;const K={model:r,isValid:A};return e(Ft,X({ref:m},G,{modelValue:r.value,"onUpdate:modelValue":[x=>r.value=x,C],id:ae.value,"aria-describedby":Z.value,type:"checkbox","aria-checked":a.value?"mixed":void 0,disabled:v.value,readonly:k.value,onFocus:s,onBlur:c},P),{...o,default:x=>{let{backgroundColorClasses:w,backgroundColorStyles:j}=x;return e("div",{class:["v-switch__track",g?void 0:w.value],style:j.value,onClick:$},[o["track-true"]&&e("div",{key:"prepend",class:"v-switch__track-true"},[o["track-true"](K)]),o["track-false"]&&e("div",{key:"append",class:"v-switch__track-false"},[o["track-false"](K)])])},input:x=>{let{inputNode:w,icon:j,backgroundColorClasses:F,backgroundColorStyles:ee}=x;return e(le,null,[w,e("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":j||t.loading},t.inset||g?void 0:F.value],style:t.inset?void 0:ee.value},[o.thumb?e(He,{defaults:{VIcon:{icon:j,size:"x-small"}}},{default:()=>[o.thumb({...K,icon:j})]}):e(Ql,null,{default:()=>[t.loading?e(Yl,{name:"v-switch",active:!0,color:A.value===!1?void 0:y.value},{default:me=>o.loader?o.loader(me):e(Wl,{active:me.isActive,color:me.color,indeterminate:!0,size:"16",width:"2"},null)}):j&&e(ve,{key:String(j),icon:j,size:"x-small"},null)]})])])}})}})}),{}}}),Zt=z({__name:"TauxSelect",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(t){Re(r);const u=ke(t,"modelValue"),n=M(null),o=h(()=>{const c=Array.from(a.value.values()).map(m=>({title:m.Label,value:m.Id}));return c.sort((m,g)=>m.title.localeCompare(g.title)),c}),a=M(new Map);async function r(){const c=await U.CampsGetTaux();c!==void 0&&(a.value=Gl(c),u.value.Id>0&&(u.value=xe(a.value.get(u.value.Id)),n.value=u.value.Id))}function d(c){c?(n.value==null&&(n.value=1),u.value=xe(a.value.get(n.value))):(n.value=null,u.value.Id=0,u.value.Label="")}function i(c){u.value=xe(a.value.get(c))}const s=h(()=>{if(u.value.Id>0)return null;const c=u.value.Label;return Array.from(a.value.values()).map(g=>g.Label).includes(c)?"Ce label est déjà utilisé.":null});return(c,m)=>(p(),q(le,null,[e(N,null,{default:l(()=>[e(b,null,{default:l(()=>[e(gn,{color:"primary",label:"Utiliser un taux existant","model-value":u.value.Id>0,"onUpdate:modelValue":d,"hide-details":""},null,8,["model-value"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(b,null,{default:l(()=>[e(Ae,{variant:"outlined",density:"compact","hide-details":"",label:"Taux",items:o.value,modelValue:n.value,"onUpdate:modelValue":[m[0]||(m[0]=g=>n.value=g),i],disabled:u.value.Id<=0},null,8,["items","modelValue","disabled"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(b,null,{default:l(()=>[e(oe,{variant:"outlined",density:"compact",label:"Label",modelValue:u.value.Label,"onUpdate:modelValue":m[1]||(m[1]=g=>u.value.Label=g),disabled:u.value.Id>0,"error-messages":s.value},null,8,["modelValue","disabled","error-messages"])]),_:1}),e(b,null,{default:l(()=>[e(oe,{label:`Valeur d'un ${L(kt)[L(Xl).FrancsSuisse]}`,density:"compact",variant:"outlined",type:"number",min:"0.001",suffix:"€",hint:"Valeur en € d'une unité de la monnaie.","model-value":u.value.FrancsSuisse/1e3,"onUpdate:modelValue":m[2]||(m[2]=g=>u.value.FrancsSuisse=L(al)(Number(g)*1e3)),disabled:u.value.Id>0},null,8,["label","model-value","disabled"])]),_:1})]),_:1})],64))}}),Vn=z({__name:"CampStats",props:{stats:{}},setup(t){const u=t;function n(o,a){return`(${(a==0?0:100*o/a).toFixed(0)} %)`}return(o,a)=>(p(),S(Q,{title:"Statistiques"},{default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(b,{cols:"5"},{default:l(()=>[V(" Demandes d'inscriptions : "+T(u.stats.Inscriptions),1)]),_:1}),e(b,{class:"text-right"},{default:l(()=>[V(" Dont Filles : "+T(u.stats.InscriptionsFilles)+" "+T(n(u.stats.InscriptionsFilles,u.stats.Inscriptions))+", Suisses : "+T(u.stats.InscriptionsSuisses)+" "+T(n(u.stats.InscriptionsSuisses,u.stats.Inscriptions)),1)]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(b,{cols:"4"},{default:l(()=>[V(" Confirmées : "+T(u.stats.Valides)+" "+T(n(u.stats.Valides,u.stats.Inscriptions)),1)]),_:1}),e(b,{class:"text-right"},{default:l(()=>[V(" Dont Filles : "+T(u.stats.ValidesFilles)+" "+T(n(u.stats.ValidesFilles,u.stats.Valides))+" , Suisses : "+T(u.stats.ValidesSuisses)+" "+T(n(u.stats.ValidesSuisses,u.stats.Valides)),1)]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(b,null,{default:l(()=>[V(" A statuer : "+T(u.stats.AStatuer)+" "+T(n(u.stats.AStatuer,u.stats.Inscriptions)),1)]),_:1}),e(b,{cols:"5",class:"text-center"},{default:l(()=>[V(" Demandes d'exception : "+T(u.stats.Exceptions)+" "+T(n(u.stats.Exceptions,u.stats.Inscriptions)),1)]),_:1}),e(b,{class:"text-right"},{default:l(()=>[V(" Refus : "+T(u.stats.Refus)+" "+T(n(u.stats.Refus,u.stats.Inscriptions)),1)]),_:1})]),_:1})]),_:1})]),_:1}))}}),kn={key:0},_n=z({__name:"CampHeaderRow",props:{camp:{}},emits:["click","edit","edit-taux","delete"],setup(t,{emit:u}){const n=t,o=u,a=h(()=>n.camp.Stats.Inscriptions-n.camp.Stats.Valides),r=M(!1),d=h(()=>{switch(new Date(n.camp.Camp.Camp.DateDebut).getUTCMonth()+1){case 7:case 8:return"rgb(45, 185, 187)";case 9:case 10:case 11:return"rgb(190, 150, 60)";case 12:case 1:case 2:case 3:return"rgb(240, 240, 240)";case 4:case 5:case 6:default:return"rgb(190, 228, 100)"}});return(i,s)=>(p(),q(le,null,[e(ie,{modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=c=>r.value=c),"max-width":"600"},{default:l(()=>[e(Q,{title:"Confirmer la suppression"},{default:l(()=>[e(W,null,{default:l(()=>[s[6]||(s[6]=V(" Etes vous certain de supprimer le séjour ")),O("b",null,T(L(Ve).label(n.camp.Camp.Camp)),1),s[7]||(s[7]=V(" ? ")),s[8]||(s[8]=O("br",null,null,-1)),s[9]||(s[9]=O("br",null,null,-1)),s[10]||(s[10]=V(" Les éventuels ")),s[11]||(s[11]=O("i",null,"équipiers",-1)),s[12]||(s[12]=V(" déclarés sur ce séjour seront aussi supprimés. ")),s[13]||(s[13]=O("br",null,null,-1)),s[14]||(s[14]=O("br",null,null,-1)),s[15]||(s[15]=V(" Attention, cette opération est irréversible. "))]),_:1}),e(ue,null,{default:l(()=>[e(ne),e(B,{color:"red",onClick:s[0]||(s[0]=c=>{r.value=!1,o("delete")})},{default:l(()=>s[16]||(s[16]=[V("Supprimer")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Q,{color:d.value,"no-gutters":"",onClick:s[5]||(s[5]=c=>o("click")),class:"my-1"},{default:l(()=>[e(N,{style:Zl({"background-color":d.value}),class:"px-1","no-gutters":"",justify:"space-between"},{default:l(()=>[e(b,null,{default:l(()=>[e(te,{title:n.camp.Camp.Camp.Nom,subtitle:L(Ve).year(n.camp.Camp.Camp)},null,8,["title","subtitle"])]),_:1}),e(b,{"align-self":"center"},{default:l(()=>[V(T(L(Ve).formatPlage(i.camp.Camp.Camp)),1)]),_:1}),e(b,{cols:"2","align-self":"center"},{default:l(()=>[e(je,{width:"600",location:"left","content-class":"pa-0"},{activator:l(({props:c})=>[e(ea,X({class:"bg-white border-md border-primary"},c,{max:n.camp.Camp.Camp.Places,"model-value":n.camp.Stats.Valides,height:"36",rounded:"",color:"primary"}),{default:l(()=>[O("strong",null,[V(T(n.camp.Stats.Valides)+"/"+T(n.camp.Camp.Camp.Places)+" ",1),a.value>0?(p(),q("span",kn," (+ "+T(a.value)+")",1)):J("",!0)])]),_:2},1040,["max","model-value"])]),default:l(()=>[e(Vn,{stats:n.camp.Stats},null,8,["stats"])]),_:1})]),_:1}),e(b,{cols:"1"}),e(b,{cols:"auto","align-self":"center"},{default:l(()=>[e(Ie,null,{activator:l(({props:c})=>[e(B,X(c,{size:"x-small",class:"mx-1",icon:"mdi-dots-vertical"}),null,16)]),default:l(()=>[e(Le,{density:"compact"},{default:l(()=>[e(te,{"prepend-icon":"mdi-pencil",onClick:s[2]||(s[2]=c=>o("edit"))},{default:l(()=>s[17]||(s[17]=[V("Modifier")])),_:1}),e(te,{"prepend-icon":"mdi-currency-eur",onClick:s[3]||(s[3]=c=>o("edit-taux"))},{default:l(()=>s[18]||(s[18]=[V("Taux de conversion")])),_:1}),e(de,{thickness:"1"}),e(te,{"prepend-icon":"mdi-delete",disabled:n.camp.Stats.Inscriptions>0,onClick:s[4]||(s[4]=c=>r.value=!0)},{default:l(()=>s[19]||(s[19]=[V("Supprimer")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])]),_:1},8,["color"])],64))}});function Cn(){const t=M([]);ta(()=>t.value=[]);function u(n,o){t.value[o]=n}return{refs:t,updateRef:u}}const xn=ce({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:t=>t.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:t=>t%1===0},totalVisible:[Number,String],firstIcon:{type:De,default:"$first"},prevIcon:{type:De,default:"$prev"},nextIcon:{type:De,default:"$next"},lastIcon:{type:De,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...ia(),...Ze(),...dl(),...It(),...dt(),...St(),...rt({tag:"nav"}),...wt(),...na({variant:"text"})},"VPagination"),Pn=fe()({name:"VPagination",props:xn(),emits:{"update:modelValue":t=>!0,first:t=>!0,prev:t=>!0,next:t=>!0,last:t=>!0},setup(t,u){let{slots:n,emit:o}=u;const a=Se(t,"modelValue"),{t:r,n:d}=Xe(),{isRtl:i}=ol(),{themeClasses:s}=rl(t),{width:c}=la(),m=Ne(-1);_t(void 0,{scoped:!0});const{resizeRef:g}=aa(v=>{if(!v.length)return;const{target:k,contentRect:A}=v[0],K=k.querySelector(".v-pagination__list > *");if(!K)return;const x=A.width,w=K.offsetWidth+parseFloat(getComputedStyle(K).marginRight)*2;m.value=C(x,w)}),y=h(()=>parseInt(t.length,10)),I=h(()=>parseInt(t.start,10)),f=h(()=>t.totalVisible!=null?parseInt(t.totalVisible,10):m.value>=0?m.value:C(c.value,58));function C(v,k){const A=t.showFirstLastPage?5:3;return Math.max(0,Math.floor(+((v-k*A)/k).toFixed(2)))}const $=h(()=>{if(y.value<=0||isNaN(y.value)||y.value>Number.MAX_SAFE_INTEGER)return[];if(f.value<=0)return[];if(f.value===1)return[a.value];if(y.value<=f.value)return $e(y.value,I.value);const v=f.value%2===0,k=v?f.value/2:Math.floor(f.value/2),A=v?k:k+1,K=y.value-k;if(A-a.value>=0)return[...$e(Math.max(1,f.value-1),I.value),t.ellipsis,y.value];if(a.value-K>=(v?1:0)){const x=f.value-1,w=y.value-x+I.value;return[I.value,t.ellipsis,...$e(x,w)]}else{const x=Math.max(1,f.value-2),w=x===1?a.value:a.value-Math.ceil(x/2)+I.value;return[I.value,t.ellipsis,...$e(x,w),t.ellipsis,y.value]}});function E(v,k,A){v.preventDefault(),a.value=k,A&&o(A,k)}const{refs:P,updateRef:D}=Cn();_t({VPaginationBtn:{color:se(t,"color"),border:se(t,"border"),density:se(t,"density"),size:se(t,"size"),variant:se(t,"variant"),rounded:se(t,"rounded"),elevation:se(t,"elevation")}});const G=h(()=>$.value.map((v,k)=>{const A=K=>D(K,k);if(typeof v=="string")return{isActive:!1,key:`ellipsis-${k}`,page:v,props:{ref:A,ellipsis:!0,icon:!0,disabled:!0}};{const K=v===a.value;return{isActive:K,key:v,page:d(v),props:{ref:A,ellipsis:!1,icon:!0,disabled:!!t.disabled||+t.length<2,color:K?t.activeColor:t.color,"aria-current":K,"aria-label":r(K?t.currentPageAriaLabel:t.pageAriaLabel,v),onClick:x=>E(x,v)}}}})),Y=h(()=>{const v=!!t.disabled||a.value<=I.value,k=!!t.disabled||a.value>=I.value+y.value-1;return{first:t.showFirstLastPage?{icon:i.value?t.lastIcon:t.firstIcon,onClick:A=>E(A,I.value,"first"),disabled:v,"aria-label":r(t.firstAriaLabel),"aria-disabled":v}:void 0,prev:{icon:i.value?t.nextIcon:t.prevIcon,onClick:A=>E(A,a.value-1,"prev"),disabled:v,"aria-label":r(t.previousAriaLabel),"aria-disabled":v},next:{icon:i.value?t.prevIcon:t.nextIcon,onClick:A=>E(A,a.value+1,"next"),disabled:k,"aria-label":r(t.nextAriaLabel),"aria-disabled":k},last:t.showFirstLastPage?{icon:i.value?t.firstIcon:t.lastIcon,onClick:A=>E(A,I.value+y.value-1,"last"),disabled:k,"aria-label":r(t.lastAriaLabel),"aria-disabled":k}:void 0}});function ae(){var k;const v=a.value-I.value;(k=P.value[v])==null||k.$el.focus()}function Z(v){v.key===Ot.left&&!t.disabled&&a.value>+t.start?(a.value=a.value-1,nt(ae)):v.key===Ot.right&&!t.disabled&&a.value<I.value+y.value-1&&(a.value=a.value+1,nt(ae))}return ge(()=>e(t.tag,{ref:g,class:["v-pagination",s.value,t.class],style:t.style,role:"navigation","aria-label":r(t.ariaLabel),onKeydown:Z,"data-test":"v-pagination-root"},{default:()=>[e("ul",{class:"v-pagination__list"},[t.showFirstLastPage&&e("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[n.first?n.first(Y.value.first):e(B,X({_as:"VPaginationBtn"},Y.value.first),null)]),e("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[n.prev?n.prev(Y.value.prev):e(B,X({_as:"VPaginationBtn"},Y.value.prev),null)]),G.value.map((v,k)=>e("li",{key:v.key,class:["v-pagination__item",{"v-pagination__item--is-active":v.isActive}],"data-test":"v-pagination-item"},[n.item?n.item(v):e(B,X({_as:"VPaginationBtn"},v.props),{default:()=>[v.page]})])),e("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[n.next?n.next(Y.value.next):e(B,X({_as:"VPaginationBtn"},Y.value.next),null)]),t.showFirstLastPage&&e("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[n.last?n.last(Y.value.last):e(B,X({_as:"VPaginationBtn"},Y.value.last),null)])])]})),{}}}),Dn={key:2},Vt=16,wn=z({__name:"CampsList",emits:["click"],setup(t,{emit:u}){const n=u;Re(c);const o=Ct(new Map),a=M(!1),r=Ct({pattern:"",openOnly:!1}),d=h(()=>{const v=cl(r.pattern),k=Array.from(o.values()).filter(A=>Ve.match(A.Camp.Camp,v)&&(!r.openOnly||jt(A.Camp)));return k.sort((A,K)=>{const x=new Date(K.Camp.Camp.DateDebut).valueOf(),w=new Date(A.Camp.Camp.DateDebut).valueOf();return x==w?A.Camp.Camp.Id-K.Camp.Camp.Id:x-w}),k}),i=h(()=>d.value.slice((y.value-1)*Vt,y.value*Vt));function s(){y.value>g.value&&(y.value=g.value)}async function c(){a.value=!0;const v=await U.CampsGet();a.value=!1,v!==void 0&&(o.clear(),v==null||v.forEach(k=>o.set(k.Camp.Camp.Id,k)))}async function m(){a.value=!0;const v=await U.CampsCreate();a.value=!1,v!==void 0&&(U.showMessage("Camp ajouté avec succès."),o.set(v.Camp.Camp.Id,v),I.value=v.Camp.Camp)}const g=h(()=>Math.max(Math.ceil(d.value.length/Vt),1)),y=M(1),I=M(null);async function f(v){I.value=null,a.value=!0;const k=await U.CampsUpdate(v);a.value=!1,k!==void 0&&(U.showMessage("Séjour modifié avec succès."),o.get(k.Camp.Id).Camp=k,s())}const C=M(null);async function $(){const v=C.value;if(v==null)return;C.value=null,a.value=!0;const k=await U.CampsSetTaux({IdCamp:v.Camp.Camp.Id,Taux:v.Taux});a.value=!1,k!==void 0&&(U.showMessage("Taux modifié avec succès."),o.set(k.Camp.Camp.Id,k))}const E=M(!1),P=M(5),D=M({Id:1,Label:"",Euros:0,FrancsSuisse:0}),G=h(()=>D.value.Id>0||D.value.Label!=""),Y=h(()=>new Set(Array.from(o.values()).filter(k=>jt(k.Camp)).map(k=>k.Camp.Camp.IdTaux)).size<=1);async function ae(){E.value=!1,a.value=!0;const v=await U.CampsCreateMany({Count:P.value,Taux:D.value});a.value=!1,v!==void 0&&(U.showMessage("Séjours créés avec succès."),v==null||v.forEach(k=>o.set(k.Camp.Camp.Id,k)))}async function Z(v){a.value=!0;const k=await U.CampsDelete({id:v.Camp.Camp.Id});a.value=!1,k!==void 0&&(U.showMessage("Séjour supprimé avec succès."),o.delete(v.Camp.Camp.Id),s())}return(v,k)=>{const A=pt,K=Ye;return p(),q(le,null,[e(Q,{title:"Séjours",subtitle:o.size},{append:l(()=>[e(N,null,{default:l(()=>[e(b,{"align-self":"center",style:{width:"240px"}},{default:l(()=>[e(A,{"hide-details":"",label:"Inscriptions ouvertes seulement",modelValue:r.openOnly,"onUpdate:modelValue":[k[0]||(k[0]=x=>r.openOnly=x),s]},null,8,["modelValue"])]),_:1}),e(b,{"align-self":"center",style:{width:"240px"}},{default:l(()=>[e(oe,{label:"Rechercher",variant:"filled",density:"comfortable","hide-details":"","prepend-inner-icon":"mdi-magnify",clearable:"",modelValue:r.pattern,"onUpdate:modelValue":[k[1]||(k[1]=x=>r.pattern=x),k[3]||(k[3]=x=>s())],"onClick:clear":k[2]||(k[2]=x=>{r.pattern="",s()})},null,8,["modelValue"])]),_:1}),e(de,{vertical:"",thickness:"1"}),e(b,{"align-self":"center"},{default:l(()=>[e(Ie,null,{activator:l(({props:x})=>[e(B,X(x,{color:"success",disabled:a.value}),{prepend:l(()=>[e(ve,null,{default:l(()=>k[12]||(k[12]=[V("mdi-plus")])),_:1})]),default:l(()=>[k[13]||(k[13]=V(" Créer un séjour "))]),_:2},1040,["disabled"])]),default:l(()=>[e(Le,{density:"compact"},{default:l(()=>[e(te,{onClick:m,title:"Créer un séjour"}),e(te,{title:"Créer plusieurs séjours...",subtitle:"Permet de choisir les taux de conversion",onClick:k[4]||(k[4]=x=>E.value=!0)})]),_:1})]),_:1})]),_:1})]),_:1})]),default:l(()=>[e(W,{class:"mt-4"},{default:l(()=>[Y.value?J("",!0):(p(),S(Wa,{key:0,type:"warning"},{default:l(()=>k[14]||(k[14]=[V(" Attention, les séjours ouverts aux inscriptions ont des taux de conversion incompatibles ! ")])),_:1})),a.value?(p(),S(ut,{key:1})):d.value.length==0?(p(),q("i",Dn," Aucun camp ne correspond aux filtres actuels. ")):J("",!0),(p(!0),q(le,null,be(i.value,(x,w)=>(p(),S(_n,{key:w,camp:x,onClick:j=>n("click",x),onEdit:j=>I.value=x.Camp.Camp,onEditTaux:j=>C.value=x,onDelete:j=>Z(x)},null,8,["camp","onClick","onEdit","onEditTaux","onDelete"]))),128)),e(Pn,{length:g.value,modelValue:y.value,"onUpdate:modelValue":k[5]||(k[5]=x=>y.value=x)},null,8,["length","modelValue"])]),_:1})]),_:1},8,["subtitle"]),e(ie,{"model-value":I.value!=null,"onUpdate:modelValue":k[6]||(k[6]=x=>I.value=null)},{default:l(()=>[I.value!=null?(p(),S(yn,{key:0,camp:I.value,onSave:f},null,8,["camp"])):J("",!0)]),_:1},8,["model-value"]),e(ie,{"model-value":C.value!=null,"onUpdate:modelValue":k[8]||(k[8]=x=>C.value=null),"max-width":"600"},{default:l(()=>[C.value!=null?(p(),S(Q,{key:0,title:"Modifier le taux",subtitle:"La modification n'est possible que si aucun participant n'est enregistré."},{default:l(()=>[e(W,null,{default:l(()=>[e(Zt,{modelValue:C.value.Taux,"onUpdate:modelValue":k[7]||(k[7]=x=>C.value.Taux=x)},null,8,["modelValue"])]),_:1}),e(ue,null,{default:l(()=>[e(ne),e(B,{disabled:C.value.Stats.Inscriptions>0,onClick:$},{default:l(()=>k[15]||(k[15]=[V("Modifier")])),_:1},8,["disabled"])]),_:1})]),_:1})):J("",!0)]),_:1},8,["model-value"]),e(ie,{modelValue:E.value,"onUpdate:modelValue":k[11]||(k[11]=x=>E.value=x),"max-width":"600"},{default:l(()=>[e(Q,{title:"Créer plusieurs séjours",subtitle:"Les séjours seront liés au même taux de conversion"},{default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(b,null,{default:l(()=>[e(K,{label:"Nombre de séjours",modelValue:P.value,"onUpdate:modelValue":k[9]||(k[9]=x=>P.value=x)},null,8,["modelValue"])]),_:1})]),_:1}),e(de,{thickness:"2",class:"my-2"}),e(Zt,{modelValue:D.value,"onUpdate:modelValue":k[10]||(k[10]=x=>D.value=x)},null,8,["modelValue"])]),_:1}),e(ue,null,{default:l(()=>[e(ne),e(B,{color:"success",onClick:ae,disabled:!G.value},{default:l(()=>k[16]||(k[16]=[V("Créer")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}}),Sn={key:1},In={key:0,class:"text-center font-italic"},Mn=z({__name:"CampParticipants",props:{id:{}},setup(t){const u=t;Re(()=>{i(),a()}),we(()=>u.id,i);const n=M(!1),o=M([]);async function a(){const P=await U.GetCamps();P!==void 0&&(o.value=P||[])}const r=h(()=>{var D;const P=(((D=d.value)==null?void 0:D.Participants)||[]).map(G=>G);return P.sort(ua.cmp),P}),d=M(null);async function i(){n.value=!0;const P=await U.CampsLoad({idCamp:u.id});n.value=!1,P!==void 0&&(d.value=P)}const s=M(null);async function c(){if(s.value==null||d.value==null)return;const P=await U.ParticipantsCreate(s.value);s.value=null,P!==void 0&&(U.showMessage("Participant créé avec succès."),d.value.Participants=(d.value.Participants||[]).concat(P))}const m=M(null);async function g(P){if(m.value==null||d.value==null)return;const D=await U.ParticipantsUpdate(P);m.value=null,D!==void 0&&(U.showMessage("Participant modifié avec succès."),i())}const y=M(null);async function I(){if(y.value==null||d.value==null)return;const P=y.value.Participant.Id,D=await U.ParticipantsDelete({id:P});y.value=null,D!==void 0&&(U.showMessage("Participant supprimé avec succès."),d.value.Participants=(d.value.Participants||[]).filter(G=>G.Participant.Id!=P))}const f=M(null);async function C(){const P=f.value;P==null||d.value==null||(f.value=null,await U.ParticipantsMove(P)===void 0)||(U.showMessage("Participant déplacé avec succès.",void 0,{title:"Aller au nouveau séjour",action:()=>ht({IdCamp:P.Target,Id:P.Id})}),d.value.Participants=(d.value.Participants||[]).filter(G=>G.Participant.Id!=P.Id))}const $=M(null);async function E(){var Y;if($.value==null)return;const P=$.value.Participant.Id;$.value=null;const D=await U.ParticipantsSetPlaceLiberee({id:P});if(D===void 0||d.value==null)return;const G=(Y=d.value.Participants)==null?void 0:Y.find(ae=>ae.Participant.Id==P);G.Participant=D}return(P,D)=>{const G=Ea,Y=Na,ae=mt,Z=gl,v=Ba,k=Mt;return d.value!=null?(p(),S(Q,{key:0,title:"Participants",subtitle:L(Ve).label(d.value.Camp.Camp)},{append:l(()=>[e(B,{color:"green",onClick:D[0]||(D[0]=A=>s.value={IdCamp:u.id,IdDossier:0,IdPersonne:0})},{prepend:l(()=>[e(ve,null,{default:l(()=>D[9]||(D[9]=[V("mdi-plus")])),_:1})]),default:l(()=>[D[10]||(D[10]=V(" Créer un participant"))]),_:1})]),default:l(()=>[e(W,{class:"mt-4"},{default:l(()=>[n.value?(p(),S(ut,{key:0,type:"table"})):(p(),q("div",Sn,[e(G),r.value.length?J("",!0):(p(),q("div",In," Aucun participant n'est encore inscrit sur ce séjour. ")),(p(!0),q(le,null,be(r.value,(A,K)=>(p(),S(Y,{participant:A,index:K},{actions:l(()=>[e(Le,{density:"comfortable"},{default:l(()=>[e(te,{title:"Modifier","prepend-icon":"mdi-pencil",onClick:x=>m.value=A},null,8,["onClick"]),e(de),e(te,{title:"Changer de camp...","prepend-icon":"mdi-file-move",onClick:x=>f.value={Id:A.Participant.Id,Target:0}},null,8,["onClick"]),e(te,{title:"Notifier d'une place disponible.",subtitle:"Envoi un email","prepend-icon":"mdi-email-alert",disabled:A.Participant.Statut==L(Je).Inscrit||A.Participant.Statut==L(Je).EnAttenteReponse,onClick:x=>$.value=A},null,8,["disabled","onClick"]),e(de),e(te,{title:"Aller à la personne",onClick:x=>L(Gi)(A.Personne.Id)},null,8,["onClick"]),e(te,{title:"Aller au dossier",onClick:x=>L(wl)(A.Participant.IdDossier)},null,8,["onClick"]),e(de),e(te,{title:"Supprimer","prepend-icon":"mdi-delete",onClick:x=>y.value=A},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["participant","index"]))),256))]))]),_:1}),s.value!=null?(p(),S(ie,{key:0,"model-value":s.value!=null,"onUpdate:modelValue":D[3]||(D[3]=A=>s.value=null),"max-width":"600px"},{default:l(()=>[e(Q,{title:"Créer un participant"},{default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(b,{cols:"12"},{default:l(()=>[e(ae,{label:"Participant",modelValue:s.value.IdPersonne,"onUpdate:modelValue":D[1]||(D[1]=A=>s.value.IdPersonne=A),"initial-personne":""},null,8,["modelValue"])]),_:1}),e(b,{cols:"12"},{default:l(()=>[e(Z,{modelValue:s.value.IdDossier,"onUpdate:modelValue":D[2]||(D[2]=A=>s.value.IdDossier=A)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(ue,null,{default:l(()=>[e(ne),e(B,{color:"green",onClick:c,disabled:!(s.value.IdDossier&&s.value.IdPersonne)},{default:l(()=>D[11]||(D[11]=[V("Créer")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])):J("",!0),m.value!=null?(p(),S(ie,{key:1,"model-value":m.value!=null,"onUpdate:modelValue":D[4]||(D[4]=A=>m.value=null),"max-width":"800px"},{default:l(()=>[e(v,{participant:m.value.Participant,personne:m.value.Personne,onSave:g},null,8,["participant","personne"])]),_:1},8,["model-value"])):J("",!0),y.value!=null?(p(),S(ie,{key:2,"model-value":y.value!=null,"onUpdate:modelValue":D[5]||(D[5]=A=>y.value=null),"max-width":"600px"},{default:l(()=>[e(Q,{title:"Supprimer le participant"},{default:l(()=>[e(W,null,{default:l(()=>[D[12]||(D[12]=V(" Confirmez-vous la suppression du participant ")),O("b",null,T(L(he).label(y.value.Personne)),1),D[13]||(D[13]=V(" ? ")),D[14]||(D[14]=O("br",null,null,-1)),D[15]||(D[15]=O("br",null,null,-1)),D[16]||(D[16]=V(" Attention, cette opération est irréversible. "))]),_:1}),e(ue,null,{default:l(()=>[e(ne),e(B,{color:"red",onClick:I},{default:l(()=>D[17]||(D[17]=[V("Supprimer")])),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])):J("",!0),f.value!=null?(p(),S(ie,{key:3,"model-value":f.value!=null,"onUpdate:modelValue":D[7]||(D[7]=A=>f.value=null),"max-width":"500px"},{default:l(()=>[e(Q,{title:"Déplacer le participant"},{default:l(()=>[e(W,null,{default:l(()=>[e(k,{label:"Nouveau séjour",camps:o.value,modelValue:f.value.Target,"onUpdate:modelValue":D[6]||(D[6]=A=>f.value.Target=A)},null,8,["camps","modelValue"])]),_:1}),e(ue,null,{default:l(()=>[e(ne),e(B,{onClick:C,disabled:f.value.Target==u.id||!f.value.Target},{default:l(()=>D[18]||(D[18]=[V("Déplacer")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])):J("",!0),$.value!=null?(p(),S(ie,{key:4,"model-value":$.value!=null,"onUpdate:modelValue":D[8]||(D[8]=A=>$.value=null),"max-width":"500px"},{default:l(()=>[e(Q,{title:"Notifier d'une place disponible"},{default:l(()=>[e(W,null,{default:l(()=>[V(" Confirmez-vous l'envoi d'une notification au responsable de "+T(L(he).label($.value.Personne))+" indiquant qu'une place est disponible ? ",1),D[19]||(D[19]=O("br",null,null,-1)),D[20]||(D[20]=O("br",null,null,-1)),V(" Le nouveau statut de "+T($.value.Personne.Prenom)+" sera : ",1),O("i",null,T(L(sa)[L(Je).EnAttenteReponse]),1),D[21]||(D[21]=V(". "))]),_:1}),e(ue,null,{default:l(()=>[e(ne),e(B,{onClick:E},{default:l(()=>D[22]||(D[22]=[V("Notifier")])),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])):J("",!0)]),_:1},8,["subtitle"])):(p(),S(ut,{key:1,type:"card"}))}}}),$n=z({__name:"camps",setup(t){const u=ct(),n=h(()=>Wi(u.currentRoute.value.query)),o=h(()=>n.value.idCamp);function a(d){const i=u.currentRoute.value;u.push({path:i.path,query:{idCamp:d.Camp.Camp.Id}})}function r(){const d=u.currentRoute.value;u.push({path:d.path,query:{}})}return(d,i)=>(p(),q(le,null,[e(ft,{title:"Gestion des séjours"},{default:l(()=>[o.value!==null?(p(),S(B,{key:0,onClick:r},{prepend:l(()=>[e(ve,null,{default:l(()=>i[0]||(i[0]=[V("mdi-view-list")])),_:1})]),default:l(()=>[i[1]||(i[1]=V(" Retour à la liste"))]),_:1})):J("",!0)]),_:1}),o.value===void 0?(p(),S(wn,{key:0,onClick:a})):(p(),S(Mn,{key:1,id:o.value},null,8,["id"]))],64))}}),An={key:1,class:"text-center font-italic"},hn={key:2},Un=z({__name:"PannelInscriptions",emits:["goTo"],setup(t,{emit:u}){const n=u,o=M(!1);Re(r);const a=M([]);async function r(){o.value=!0;const g=await U.InscriptionsGet();o.value=!1,g!==void 0&&(a.value=g||[])}const d=M(""),i=h(()=>{const g=cl(d.value);return a.value.filter(y=>{var I;return he.match(y.Responsable,g)||((I=y.Participants)==null?void 0:I.some(f=>he.match(f.Personne,g)||Ve.match(f.Camp,g)))})});async function s(g,y){const I=await U.InscriptionsIdentifiePersonne({IdDossier:g,Target:y});if(I===void 0)return;U.showMessage("Profil identifié avec succès.");const f=a.value.findIndex(C=>C.Dossier.Id==g);a.value[f]=I}async function c(g){await U.InscriptionsValide({idDossier:g.Dossier.Id})!==void 0&&(U.showMessage("Inscription validée avec succès.","",{title:"Aller au dossier",action:()=>n("goTo",g.Dossier.Id)}),a.value=a.value.filter(I=>I.Dossier.Id!=g.Dossier.Id))}async function m(g){await U.DossiersDelete({id:g.Dossier.Id})!==void 0&&(U.showMessage("Inscription supprimée avec succès."),a.value=a.value.filter(I=>I.Dossier.Id!=g.Dossier.Id))}return(g,y)=>(p(),S(Q,{title:"Inscriptions",subtitle:"En attente de validation",class:"ma-2"},{append:l(()=>[e(oe,{width:"300","append-inner-icon":"mdi-magnify",label:"Rechercher","hide-details":"",modelValue:d.value,"onUpdate:modelValue":y[0]||(y[0]=I=>d.value=I)},null,8,["modelValue"])]),default:l(()=>[e(W,null,{default:l(()=>[o.value?(p(),S(ut,{key:0})):a.value.length?(p(),q("div",hn,[(p(!0),q(le,null,be(i.value,(I,f)=>(p(),S(Fa,{class:"my-1",key:f,inscription:I,onIdentifie:C=>s(I.Dossier.Id,C),onValide:C=>c(I),onDelete:C=>m(I),api:{searchSimilaires:L(U).InscriptionsSearchSimilaires.bind(L(U)),selectPersonne:L(U).SelectPersonne.bind(L(U))}},null,8,["inscription","onIdentifie","onValide","onDelete","api"]))),128))])):(p(),q("div",An," Il n'y a aucune inscription à valider. "))]),_:1})]),_:1}))}}),Tn=ce({dotColor:String,fillDot:Boolean,hideDot:Boolean,icon:De,iconColor:String,lineColor:String,...Ze(),...dt(),...St(),...It()},"VTimelineDivider"),Rn=fe()({name:"VTimelineDivider",props:Tn(),setup(t,u){let{slots:n}=u;const{sizeClasses:o,sizeStyles:a}=oa(t,"v-timeline-divider__dot"),{backgroundColorStyles:r,backgroundColorClasses:d}=Oe(se(t,"dotColor")),{roundedClasses:i}=ml(t,"v-timeline-divider__dot"),{elevationClasses:s}=ra(t),{backgroundColorClasses:c,backgroundColorStyles:m}=Oe(se(t,"lineColor"));return ge(()=>e("div",{class:["v-timeline-divider",{"v-timeline-divider--fill-dot":t.fillDot},t.class],style:t.style},[e("div",{class:["v-timeline-divider__before",c.value],style:m.value},null),!t.hideDot&&e("div",{key:"dot",class:["v-timeline-divider__dot",s.value,i.value,o.value],style:a.value},[e("div",{class:["v-timeline-divider__inner-dot",d.value,i.value],style:r.value},[n.default?e(He,{key:"icon-defaults",disabled:!t.icon,defaults:{VIcon:{color:t.iconColor,icon:t.icon,size:t.size}}},n.default):e(ve,{key:"icon",color:t.iconColor,icon:t.icon,size:t.size},null)])]),e("div",{class:["v-timeline-divider__after",c.value],style:m.value},null)])),{}}}),Pl=ce({density:String,dotColor:String,fillDot:Boolean,hideDot:Boolean,hideOpposite:{type:Boolean,default:void 0},icon:De,iconColor:String,lineInset:[Number,String],...Ze(),...ca(),...It(),...dt(),...St(),...rt()},"VTimelineItem"),Ln=fe()({name:"VTimelineItem",props:Pl(),setup(t,u){let{slots:n}=u;const{dimensionStyles:o}=da(t),a=Ne(0),r=M();return we(r,d=>{var i;d&&(a.value=((i=d.$el.querySelector(".v-timeline-divider__dot"))==null?void 0:i.getBoundingClientRect().width)??0)},{flush:"post"}),ge(()=>{var d,i;return e("div",{class:["v-timeline-item",{"v-timeline-item--fill-dot":t.fillDot},t.class],style:[{"--v-timeline-dot-size":Fe(a.value),"--v-timeline-line-inset":t.lineInset?`calc(var(--v-timeline-dot-size) / 2 + ${Fe(t.lineInset)})`:Fe(0)},t.style]},[e("div",{class:"v-timeline-item__body",style:o.value},[(d=n.default)==null?void 0:d.call(n)]),e(Rn,{ref:r,hideDot:t.hideDot,icon:t.icon,iconColor:t.iconColor,size:t.size,elevation:t.elevation,dotColor:t.dotColor,fillDot:t.fillDot,rounded:t.rounded},{default:n.icon}),t.density!=="compact"&&e("div",{class:"v-timeline-item__opposite"},[!t.hideOpposite&&((i=n.opposite)==null?void 0:i.call(n))])])}),{}}}),En=ce({align:{type:String,default:"center",validator:t=>["center","start"].includes(t)},direction:{type:String,default:"vertical",validator:t=>["vertical","horizontal"].includes(t)},justify:{type:String,default:"auto",validator:t=>["auto","center"].includes(t)},side:{type:String,validator:t=>t==null||["start","end"].includes(t)},lineThickness:{type:[String,Number],default:2},lineColor:String,truncateLine:{type:String,validator:t=>["start","end","both"].includes(t)},...va(Pl({lineInset:0}),["dotColor","fillDot","hideOpposite","iconColor","lineInset","size"]),...Ze(),...dl(),...rt(),...wt()},"VTimeline"),Bn=fe()({name:"VTimeline",props:En(),setup(t,u){let{slots:n}=u;const{themeClasses:o}=rl(t),{densityClasses:a}=ma(t),{rtlClasses:r}=ol();_t({VTimelineDivider:{lineColor:se(t,"lineColor")},VTimelineItem:{density:se(t,"density"),dotColor:se(t,"dotColor"),fillDot:se(t,"fillDot"),hideOpposite:se(t,"hideOpposite"),iconColor:se(t,"iconColor"),lineColor:se(t,"lineColor"),lineInset:se(t,"lineInset"),size:se(t,"size")}});const d=h(()=>{const s=t.side?t.side:t.density!=="default"?"end":null;return s&&`v-timeline--side-${s}`}),i=h(()=>{const s=["v-timeline--truncate-line-start","v-timeline--truncate-line-end"];switch(t.truncateLine){case"both":return s;case"start":return s[0];case"end":return s[1];default:return null}});return ge(()=>e(t.tag,{class:["v-timeline",`v-timeline--${t.direction}`,`v-timeline--align-${t.align}`,`v-timeline--justify-${t.justify}`,i.value,{"v-timeline--inset-line":!!t.lineInset},o.value,a.value,d.value,r.value,t.class],style:[{"--v-timeline-line-thickness":Fe(t.lineThickness)},t.style]},n)),{}}}),Nn={class:"ma-2"},Me=z({__name:"EventItem",props:{color:{},icon:{},time:{},size:{}},setup(t){const u=t;return(n,o)=>(p(),S(Ln,{"dot-color":u.color,width:"100%",size:u.size||"medium",elevation:2},{icon:l(()=>[O("div",Nn,[e(ve,{icon:u.icon},null,8,["icon"])])]),default:l(()=>[e(N,{justify:"space-between","no-gutters":""},{default:l(()=>[e(b,{"align-self":"center"},{default:l(()=>[ll(n.$slots,"default")]),_:3}),e(b,{"align-self":"center",cols:"2",class:"text-grey ml-4"},{default:l(()=>[V(T(L(Pe).time(u.time)),1)]),_:1})]),_:3})]),_:3},8,["dot-color","size"]))}}),Fn=z({__name:"EventPaiementV",props:{paiement:{}},emits:["edit"],setup(t,{emit:u}){const n=t,o=u;return(a,r)=>{const d=Me;return p(),S(d,{color:"#ad9726",icon:"mdi-cash",time:n.paiement.Time},{default:l(()=>[e(N,null,{default:l(()=>[e(b,{"align-self":"center"},{default:l(()=>[e(vl,null,{default:l(()=>[V(T(n.paiement.IsRemboursement?"Remboursement":"Paiement")+" ",1),n.paiement.IsRemboursement?J("",!0):(p(),q(le,{key:0},[r[1]||(r[1]=V(" de ")),O("i",null,T(n.paiement.Payeur),1)],64)),r[2]||(r[2]=V(" : ")),O("b",null,T(L(Pe).montant(n.paiement.Montant)),1)]),_:1}),e(fl,null,{default:l(()=>[V(T(n.paiement.Label),1)]),_:1})]),_:1}),e(b,{"align-self":"center",cols:"auto"},{default:l(()=>[e(B,{icon:"mdi-pencil",size:"x-small",onClick:r[0]||(r[0]=i=>o("edit"))})]),_:1})]),_:1})]),_:1},8,["time"])}}}),On=z({__name:"EventInscriptionTimeV",props:{time:{}},setup(t){const u=t;return(n,o)=>(p(),S(Me,{color:"grey",icon:"mdi-map-marker",time:u.time},{default:l(()=>o[0]||(o[0]=[V(" Inscription effectuée. ")])),_:1},8,["time"]))}}),qn={key:1},zn=z({__name:"EventMessageV",props:{event:{},content:{}},emits:["delete"],setup(t,{emit:u}){const n=t,o=u,a=h(()=>d(n.content.Message.Origine)),r=h(()=>n.content.Message.Origine==lt.FromBackoffice);function d(s){switch(s){case lt.FromBackoffice:return"bg-light-green-lighten-3";case lt.FromDirecteur:return"bg-lime";case lt.FromEspaceperso:return"bg-light-blue-lighten-3"}}const i=M(!1);return(s,c)=>(p(),S(Me,{icon:"mdi-email",color:"light-blue-darken-3",time:n.event.Created,size:"x-large"},{default:l(()=>[i.value?(p(),S(ie,{key:0,modelValue:i.value,"onUpdate:modelValue":c[1]||(c[1]=m=>i.value=m),"max-width":"400px"},{default:l(()=>[e(Q,{title:"Confirmation"},{default:l(()=>[e(W,null,{default:l(()=>c[3]||(c[3]=[V(" Confirmez-vous la suppression de ce message ? "),O("br",null,null,-1),O("br",null,null,-1),V(" Attention, cette opération est irréversible. ")])),_:1}),e(ue,null,{default:l(()=>[e(ne),e(B,{color:"red",onClick:c[0]||(c[0]=m=>o("delete"))},{default:l(()=>c[4]||(c[4]=[V("Supprimer")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])):J("",!0),e(N,{"no-gutters":""},{default:l(()=>[e(b,{"align-self":"center"},{default:l(()=>[e(Q,{class:fa(a.value)},{default:l(()=>[e(W,{class:"pa-1"},{default:l(()=>[O("pre",null,T(n.content.Message.Contenu),1)]),_:1})]),_:1},8,["class"])]),_:1}),e(b,{cols:"auto","align-self":"center"},{default:l(()=>[r.value?(p(),S(B,{key:0,icon:"",size:"x-small",class:"ml-2",onClick:c[2]||(c[2]=m=>i.value=!0)},{default:l(()=>[e(ve,{color:"red"},{default:l(()=>c[5]||(c[5]=[V("mdi-delete")])),_:1})]),_:1})):(p(),q("div",qn,[e(B,{icon:"",size:"x-small",variant:"text",disabled:""})]))]),_:1})]),_:1})]),_:1},8,["time"]))}}),jn={href:""},Hn={href:""},Qn=z({__name:"EventPlaceLibereeV",props:{event:{},content:{}},setup(t){const u=t;return(n,o)=>{const a=Me;return p(),S(a,{icon:"mdi-information-outline",color:"yellow",time:u.event.Created},{default:l(()=>[o[0]||(o[0]=V(" Une place pour ")),O("a",jn,T(u.content.ParticipantLabel),1),o[1]||(o[1]=V(" s'est libérée sur le camp ")),O("a",Hn,T(u.content.CampLabel),1),o[2]||(o[2]=V(". "))]),_:1},8,["time"])}}}),Yn=z({__name:"EventSupprimeV",props:{event:{},content:{}},setup(t){const u=t;return(n,o)=>{const a=Me;return p(),S(a,{color:"grey",icon:"mdi-close",time:u.event.Created,size:"small"},{default:l(()=>o[0]||(o[0]=[V(" Message supprimé ")])),_:1},8,["time"])}}}),Wn=z({__name:"EventAccuseReceptionV",props:{event:{},content:{}},setup(t){const u=t;return(n,o)=>{const a=Me;return p(),S(a,{color:"green",icon:"mdi-map-marker-check",time:u.event.Created},{default:l(()=>o[0]||(o[0]=[V(" Accusé de réception envoyé ")])),_:1},8,["time"])}}}),Kn=z({__name:"EventFactureV",props:{event:{},content:{}},setup(t){const u=t;return(n,o)=>{const a=Me;return p(),S(a,{color:"orange-darken-1",icon:"mdi-invoice",time:u.event.Created},{default:l(()=>o[0]||(o[0]=[V(" Facture envoyée ")])),_:1},8,["time"])}}}),Jn={href:""},Gn=z({__name:"EventCampDocsV",props:{event:{},content:{}},setup(t){const u=t;return(n,o)=>{const a=Me;return p(),S(a,{icon:"mdi-file-document",color:"light-blue",time:u.event.Created},{default:l(()=>[o[0]||(o[0]=V(" Les documents du camp ")),O("a",Jn,T(u.content.CampLabel),1),o[1]||(o[1]=V(" ont été envoyés. "))]),_:1},8,["time"])}}}),Xn=z({__name:"EventAttestationV",props:{event:{},content:{}},setup(t){const u=t,n=h(()=>{switch(u.content.Distribution){case yt.DEspacePerso:return"téléchargée depuis l'espace personnel";case yt.DMail:return"envoyée";case yt.DMailAndDownloaded:return"envoyée et téléchargée"}});return(o,a)=>{const r=Me;return p(),S(r,{icon:"mdi-invoice-check",color:"light-green-darken-1",time:u.event.Created},{default:l(()=>[a[0]||(a[0]=V(" Une ")),O("b",null,T(u.content.IsPresence?"attestation de présence":"facture acquittée"),1),V(" a été "+T(n.value)+". ",1)]),_:1},8,["time"])}}}),Zn={href:""},ei=z({__name:"EventSondageV",props:{event:{},content:{}},setup(t){const u=t;return(n,o)=>{const a=Me;return p(),S(a,{color:"purple",icon:"mdi-chat-question",time:u.event.Created},{default:l(()=>[o[0]||(o[0]=V(" Un sondage concernant le camp ")),O("a",Zn,T(u.content.CampLabel),1),o[1]||(o[1]=V(" a été envoyé. "))]),_:1},8,["time"])}}}),ti=z({__name:"EventSwitch",props:{event:{}},emits:["editPaiement","deleteMessage"],setup(t,{emit:u}){const n=t,o=u;return(a,r)=>{const d=On,i=Fn;return n.event.Kind=="inscription-time"?(p(),S(d,{key:0,time:n.event.Time},null,8,["time"])):n.event.Kind=="paiement"?(p(),S(i,{key:1,paiement:n.event.Paiement,onEdit:r[0]||(r[0]=s=>o("editPaiement",n.event.Paiement))},null,8,["paiement"])):n.event.Kind=="event"&&n.event.event.Content.Kind==L(Ue).Supprime?(p(),S(Yn,{key:2,event:n.event.event,content:n.event.event.Content.Data},null,8,["event","content"])):n.event.Kind=="event"&&n.event.event.Content.Kind==L(Ue).AccuseReception?(p(),S(Wn,{key:3,event:n.event.event,content:n.event.event.Content.Data},null,8,["event","content"])):n.event.Kind=="event"&&n.event.event.Content.Kind==L(Ue).Message?(p(),S(zn,{key:4,event:n.event.event,content:n.event.event.Content.Data,onDelete:r[1]||(r[1]=s=>o("deleteMessage",n.event.event))},null,8,["event","content"])):n.event.Kind=="event"&&n.event.event.Content.Kind==L(Ue).PlaceLiberee?(p(),S(Qn,{key:5,event:n.event.event,content:n.event.event.Content.Data},null,8,["event","content"])):n.event.Kind=="event"&&n.event.event.Content.Kind==L(Ue).Facture?(p(),S(Kn,{key:6,event:n.event.event,content:n.event.event.Content.Data},null,8,["event","content"])):n.event.Kind=="event"&&n.event.event.Content.Kind==L(Ue).CampDocs?(p(),S(Gn,{key:7,event:n.event.event,content:n.event.event.Content.Data},null,8,["event","content"])):n.event.Kind=="event"&&n.event.event.Content.Kind==L(Ue).Attestation?(p(),S(Xn,{key:8,event:n.event.event,content:n.event.event.Content.Data},null,8,["event","content"])):n.event.Kind=="event"&&n.event.event.Content.Kind==L(Ue).Sondage?(p(),S(ei,{key:9,event:n.event.event,content:n.event.event.Content.Data},null,8,["event","content"])):J("",!0)}}}),li={class:"text-grey"},ai={class:"text-grey"},ni={key:0},ii=z({__name:"FactureCard",props:{dossier:{}},setup(t){const u=t,n=h(()=>(u.dossier.Participants||[]).filter(i=>i.Participant.Statut!=Je.Inscrit).map(i=>he.label(i.Personne))),o=h(()=>(u.dossier.Participants||[]).filter(i=>i.Participant.Statut==Je.Inscrit).map(i=>({Label:he.label(i.Personne),Camp:Ve.label(i.Camp),Prix:Pe.montant(i.Camp.Prix),Bilan:u.dossier.Bilan.Inscrits[i.Participant.Id]})));function a(i){return!!(i.Remises.ReducEnfants||i.Remises.ReducEquipiers||i.Remises.ReducSpeciale.Cent)}function r(i){const s=[];return i.ReducEnfants&&s.push(`Enfants : ${i.ReducEnfants}%`),i.ReducEquipiers&&s.push(`Enfants : ${i.ReducEquipiers}%`),i.ReducSpeciale.Cent&&s.push(`Remise : ${Pe.montant(i.ReducSpeciale)}`),s.join("  ;  ")}const d=h(()=>{const i=Object.values(u.dossier.Paiements||{});return i.sort((s,c)=>new Date(s.Time).valueOf()-new Date(c.Time).valueOf()),i});return(i,s)=>(p(),S(Q,{title:"Suivi financier",subtitle:n.value.length?`Les participants en liste d'attente (${n.value.join(", ")}) ne sont pas pris en compte.`:"","min-width":"900px"},{default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(b,{cols:"3"},{default:l(()=>s[0]||(s[0]=[V("Participant")])),_:1}),e(b,{cols:"2",class:"text-center"},{default:l(()=>s[1]||(s[1]=[V("Prix du camp")])),_:1}),e(b,{cols:"2",class:"text-center"},{default:l(()=>s[2]||(s[2]=[V("Prix avec option")])),_:1}),e(b,{cols:"3",class:"text-center"},{default:l(()=>s[3]||(s[3]=[V("Aides extérieures")])),_:1}),e(b,{cols:"2",class:"text-right"},{default:l(()=>s[4]||(s[4]=[V("Sous-total")])),_:1})]),_:1}),e(de,{thickness:"1",class:"my-2"}),(p(!0),q(le,null,be(o.value,c=>(p(),q(le,null,[e(N,null,{default:l(()=>[e(b,{"align-self":"center",cols:"3"},{default:l(()=>[V(T(c.Label)+" ",1),s[5]||(s[5]=O("br",null,null,-1)),O("span",li,T(c.Camp),1)]),_:2},1024),e(b,{"align-self":"center",cols:"2",class:"text-center"},{default:l(()=>[V(T(c.Prix),1)]),_:2},1024),e(b,{"align-self":"center",cols:"2",class:"text-center"},{default:l(()=>[V(T(L(Pe).montant(c.Bilan.AvecOption))+" ",1),s[6]||(s[6]=O("br",null,null,-1)),O("span",ai,T(c.Bilan.AvecOptionDescription),1)]),_:2},1024),e(b,{"align-self":"center",cols:"3",class:"text-center"},{default:l(()=>{var m;return[(m=c.Bilan.Aides)!=null&&m.length?J("",!0):(p(),q("span",ni,"-")),(p(!0),q(le,null,be(c.Bilan.Aides,g=>(p(),S(ze,null,{default:l(()=>[V(T(g.Structure)+" : "+T(L(Pe).montant(g.Montant)),1)]),_:2},1024))),256))]}),_:2},1024),e(b,{"align-self":"center",cols:"2",class:"text-right"},{default:l(()=>[V(T(c.Bilan.AvecAides),1)]),_:2},1024)]),_:2},1024),a(c.Bilan)?(p(),S(N,{key:0,"no-gutters":""},{default:l(()=>[e(b,{cols:"10",class:"text-right"},{default:l(()=>[O("i",null,T(r(c.Bilan.Remises)),1)]),_:2},1024),e(b,{cols:"2",class:"text-right"},{default:l(()=>[V(T(c.Bilan.Net),1)]),_:2},1024)]),_:2},1024)):J("",!0)],64))),256)),e(de,{thickness:"1",class:"my-2"}),e(N,null,{default:l(()=>[e(b,{cols:"10",class:"text-right"},{default:l(()=>s[7]||(s[7]=[V("Total demandé")])),_:1}),e(b,{cols:"2",class:"text-right"},{default:l(()=>[V(T(u.dossier.Bilan.Demande),1)]),_:1})]),_:1}),e(de,{thickness:"1",class:"my-2"}),(p(!0),q(le,null,be(d.value,c=>(p(),S(N,null,{default:l(()=>[e(b,null,{default:l(()=>[V(" Paiement de "+T(c.Payeur)+", le "+T(L(Pe).date(c.Time)),1)]),_:2},1024),e(b,{cols:"2",class:"text-right"},{default:l(()=>[V(T(L(Pe).montant(c.Montant)),1)]),_:2},1024)]),_:2},1024))),256)),e(N,null,{default:l(()=>[e(b,{cols:"10",class:"text-right"},{default:l(()=>s[8]||(s[8]=[V("Solde")])),_:1}),e(b,{cols:"2",class:"text-right"},{default:l(()=>[O("b",null,T(u.dossier.Bilan.Restant),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["subtitle"]))}}),ui=z({__name:"DossierEditCard",props:{responsable:{},dossier:{}},emits:["save"],setup(t,{emit:u}){const n=t,o=u,a=M(xe(n.dossier));return(r,d)=>{const i=mt,s=Ka,c=pt;return p(),S(Q,null,{default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(b,null,{default:l(()=>[e(i,{label:"Responsable","initial-personne":n.responsable,"model-value":a.value.IdResponsable,"onUpdate:modelValue":d[0]||(d[0]=m=>m?a.value.IdResponsable=m:void 0)},null,8,["initial-personne","model-value"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(b,null,{default:l(()=>[e(s,{label:"Adresses mail en copie",modelValue:a.value.CopiesMails,"onUpdate:modelValue":d[1]||(d[1]=m=>a.value.CopiesMails=m),rule:L(pa).validMails()},null,8,["modelValue","rule"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(b,null,{default:l(()=>[e(c,{"hide-details":"",modelValue:a.value.PartageAdressesOK,"onUpdate:modelValue":d[2]||(d[2]=m=>a.value.PartageAdressesOK=m),label:"Partage des coordonnées"},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(b,null,{default:l(()=>[e(c,{"hide-details":"",modelValue:a.value.DemandeFondSoutien,"onUpdate:modelValue":d[3]||(d[3]=m=>a.value.DemandeFondSoutien=m),label:"Demande le fond de soutien"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(ue,null,{default:l(()=>[e(ne),e(B,{onClick:d[4]||(d[4]=m=>o("save",a.value))},{default:l(()=>d[5]||(d[5]=[V("Enregistrer")])),_:1})]),_:1})]),_:1})}}}),si=z({__name:"OptionJournee",props:Ce({camp:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const u=t,n=ke(t,"modelValue"),o=h(()=>(u.camp.OptionPrix.Jours||[]).map((a,r)=>r));return(a,r)=>(p(),S(Q,null,{default:l(()=>[e(W,null,{default:l(()=>{var d;return[r[1]||(r[1]=O("div",{class:"text-grey mb-2"}," Le prix est variable en fonction des jours de participation au camp. ",-1)),e(ya,{class:"overflow-x-auto",color:"secondary",multiple:"","model-value":(d=n.value)!=null&&d.length?n.value:o.value,"onUpdate:modelValue":r[0]||(r[0]=i=>n.value=i.length==o.value.length?[]:i)},{default:l(()=>[(p(!0),q(le,null,be(u.camp.OptionPrix.Jours,(i,s)=>(p(),S(B,null,{default:l(()=>[V("J "+T(s+1),1)]),_:2},1024))),256))]),_:1},8,["model-value"])]}),_:1})]),_:1}))}}),oi=z({__name:"OptionStatut",props:Ce({camp:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const u=t,n=ke(t,"modelValue"),o=h(()=>(u.camp.OptionPrix.Statuts||[]).map(r=>({value:r.Id,title:r.Label,subtitle:r.Description}))),a=h(()=>o.value.map(r=>r.value).includes(n.value));return(r,d)=>(p(),S(Q,null,{default:l(()=>[e(W,null,{default:l(()=>[d[1]||(d[1]=O("div",{class:"text-grey mb-4"},"Le prix dépend du statut du participant.",-1)),e(Ae,{clearable:"",items:o.value,label:"Statut","model-value":a.value?n.value:null,"onUpdate:modelValue":d[0]||(d[0]=i=>n.value=i??0),variant:"outlined",density:"comfortable","hide-details":""},{item:l(({item:i,props:s})=>[e(te,X(s,{title:i.title,subtitle:i.raw.subtitle}),null,16,["title","subtitle"])]),_:1},8,["items","model-value"])]),_:1})]),_:1}))}}),ri={key:2},di=z({__name:"ParticipantOptionPrix",props:{camp:{},optionAndQf:{}},emits:["update"],setup(t,{emit:u}){const n=t,o=u,a=M(xe(n.optionAndQf));return we(()=>n.optionAndQf,()=>a.value=xe(n.optionAndQf)),(r,d)=>{const i=Ye;return p(),S(Q,{title:"Prix variable",width:"800px"},{default:l(()=>[e(W,null,{default:l(()=>[e(N,{justify:"space-evenly"},{default:l(()=>[e(b,{"align-self":"center",cols:"3"},{default:l(()=>[e(i,{modelValue:a.value.quotientFamilial,"onUpdate:modelValue":d[0]||(d[0]=s=>a.value.quotientFamilial=s),label:"Quotient familial","hide-details":""},null,8,["modelValue"])]),_:1}),e(de,{thickness:"2",vertical:""}),e(b,{"align-self":"center",cols:"8"},{default:l(()=>[n.camp.OptionPrix.Active==L(_e).PrixJour?(p(),S(si,{key:0,camp:n.camp,modelValue:a.value.options.Jour,"onUpdate:modelValue":d[1]||(d[1]=s=>a.value.options.Jour=s)},null,8,["camp","modelValue"])):n.camp.OptionPrix.Active==L(_e).PrixStatut?(p(),S(oi,{key:1,camp:n.camp,modelValue:a.value.options.IdStatut,"onUpdate:modelValue":d[2]||(d[2]=s=>a.value.options.IdStatut=s)},null,8,["camp","modelValue"])):(p(),q("div",ri,"Le camp ne propose pas d'option sur le prix."))]),_:1})]),_:1})]),_:1}),e(ue,null,{default:l(()=>[e(ne),e(B,{onClick:d[3]||(d[3]=s=>o("update",a.value))},{default:l(()=>d[4]||(d[4]=[V("Enregistrer")])),_:1})]),_:1})]),_:1})}}}),ci={key:1,class:"mx-1"},mi={key:2,class:"mx-1"},vi={key:3},fi={key:4,class:"mx-1"},pi=z({__name:"RemisesChip",props:{remises:{}},emits:["update"],setup(t,{emit:u}){const n=t,o=u,a=h(()=>r.value.ReducEnfants!=0||r.value.ReducEquipiers!=0||r.value.ReducSpeciale.Cent!=0),r=M(xe(n.remises));we(()=>n.remises,()=>r.value=xe(n.remises));const d=M(!1);return(i,s)=>{const c=Ye,m=We;return p(),S(Ie,{"close-on-content-click":!1,location:"bottom",modelValue:d.value,"onUpdate:modelValue":s[4]||(s[4]=g=>d.value=g)},{activator:l(({props:g})=>[e(Q,X(g,{elevation:"1",color:"grey-lighten-2"}),{default:l(()=>[e(W,{class:"py-1 px-1"},{default:l(()=>[a.value?J("",!0):(p(),q(le,{key:0},[V(" Pas de remises ")],64)),r.value.ReducEnfants?(p(),q("span",ci," Enfants : "+T(r.value.ReducEnfants)+"% ",1)):J("",!0),r.value.ReducEquipiers?(p(),q("span",mi," Equipiers : "+T(r.value.ReducEquipiers)+"% ",1)):J("",!0),(r.value.ReducEnfants||r.value.ReducEquipiers)&&r.value.ReducSpeciale.Cent?(p(),q("br",vi)):J("",!0),r.value.ReducSpeciale.Cent?(p(),q("span",fi," Remise : "+T(L(Pe).montant(r.value.ReducSpeciale)),1)):J("",!0)]),_:1})]),_:2},1040)]),default:l(()=>[e(Q,{title:"Modifier les remises",width:"400px"},{default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(b,null,{default:l(()=>[e(c,{modelValue:r.value.ReducEnfants,"onUpdate:modelValue":s[0]||(s[0]=g=>r.value.ReducEnfants=g),label:"Remise enfants","hide-details":"",suffix:"%"},null,8,["modelValue"])]),_:1}),e(b,null,{default:l(()=>[e(c,{modelValue:r.value.ReducEquipiers,"onUpdate:modelValue":s[1]||(s[1]=g=>r.value.ReducEquipiers=g),label:"Remise équipiers","hide-details":"",suffix:"%"},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(b,null,{default:l(()=>[e(m,{class:"mt-2",modelValue:r.value.ReducSpeciale,"onUpdate:modelValue":s[2]||(s[2]=g=>r.value.ReducSpeciale=g),label:"Remise spéciale","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(ue,null,{default:l(()=>[e(ne),e(B,{onClick:s[3]||(s[3]=g=>{o("update",r.value),d.value=!1})},{default:l(()=>s[5]||(s[5]=[V("Enregistrer")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),yi=$t(pi,[["__scopeId","data-v-01096379"]]),bi=z({__name:"AideEditCard",props:{aide:{},structures:{},participant:{}},emits:["save"],setup(t,{emit:u}){const n=t,o=u,a=M(xe(n.aide)),r=h(()=>Object.values(n.structures).map(d=>({value:d.Id,title:d.Nom})));return(d,i)=>{const s=pt,c=We,m=Ye;return p(),S(Q,{title:"Modifier l'aide extérieure",subtitle:`pour ${L(he).label(n.participant.Personne)} - ${L(Ve).label(n.participant.Camp)}`},{default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(b,null,{default:l(()=>[e(Ae,{variant:"outlined",density:"comfortable",label:"Structure",items:r.value,modelValue:a.value.IdStructureaide,"onUpdate:modelValue":i[0]||(i[0]=g=>a.value.IdStructureaide=g)},null,8,["items","modelValue"])]),_:1}),e(b,null,{default:l(()=>[e(s,{modelValue:a.value.Valide,"onUpdate:modelValue":i[1]||(i[1]=g=>a.value.Valide=g),label:"Aide validée","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(b,{"align-self":"center"},{default:l(()=>[e(c,{modelValue:a.value.Valeur,"onUpdate:modelValue":i[2]||(i[2]=g=>a.value.Valeur=g),label:"Montant","hide-details":""},null,8,["modelValue"])]),_:1}),e(b,{"align-self":"center",cols:"auto"},{default:l(()=>[e(s,{"hide-details":"",label:"Par jour",modelValue:a.value.ParJour,"onUpdate:modelValue":i[3]||(i[3]=g=>a.value.ParJour=g)},null,8,["modelValue"])]),_:1}),e(b,{"align-self":"center"},{default:l(()=>[e(m,{label:"Limite",suffix:"jours",modelValue:a.value.NbJoursMax,"onUpdate:modelValue":i[4]||(i[4]=g=>a.value.NbJoursMax=g),disabled:!a.value.ParJour,hint:"0 pour ne pas limiter",min:0,"persistent-hint":""},null,8,["modelValue","disabled"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(b,null,{default:l(()=>i[6]||(i[6]=[V(" TODO: justificatif ")])),_:1})]),_:1})]),_:1}),e(ue,null,{default:l(()=>[e(ne),e(B,{onClick:i[5]||(i[5]=g=>o("save",a.value))},{default:l(()=>i[7]||(i[7]=[V("Enregistrer")])),_:1})]),_:1})]),_:1},8,["subtitle"])}}}),gi={key:0},Vi={key:1},ki=z({__name:"DossierParticipantRow",props:{participant:{},aides:{},structures:{},hasManyParticipants:{type:Boolean}},emits:["update","delete","createAide","updateAide","deleteAide","expand"],setup(t,{emit:u}){const n=t,o=u,a=h(()=>{const I=Object.values(n.aides||{});return I.sort((f,C)=>f.Id-C.Id),I}),r=h(()=>n.participant.Camp.OptionPrix.Active==_e.NoOption&&!Ve.isQuotientFamilialActive(n.participant.Camp.OptionQuotientFamilial));function d(I){var f,C;switch(n.participant.Camp.OptionPrix.Active){case _e.NoOption:return"Séjour sans option";case _e.PrixJour:const $=((f=I.Jour)==null?void 0:f.length)||0;return $==0?"Présent tous les jours":`Présent ${$} jour${$>1?"s":""}`;case _e.PrixStatut:const E=(C=n.participant.Camp.OptionPrix.Statuts)==null?void 0:C.find(P=>P.Id==I.IdStatut);return E?`Statut ${E.Label}`:"Pas d'option."}}const i=M(!1),s=M(!1),c=h(()=>Object.values(n.structures).map(I=>({value:I.Id,title:I.Nom}))),m=M(null),g=M(null),y=M(null);return(I,f)=>(p(),S(N,null,{default:l(()=>[e(b,{"align-self":"center",cols:"3"},{default:l(()=>[e(vl,null,{default:l(()=>[O("a",{href:"/camps",onClick:f[0]||(f[0]=it(C=>L(ht)(n.participant.Participant),["prevent"]))},T(L(he).label(n.participant.Personne)),1)]),_:1}),e(fl,null,{default:l(()=>[V(T(L(Ve).label(n.participant.Camp)),1)]),_:1})]),_:1}),e(b,{"align-self":"center",cols:"2",class:"text-center"},{default:l(()=>[e(Ie,{disabled:r.value,"close-on-content-click":!1,modelValue:i.value,"onUpdate:modelValue":f[2]||(f[2]=C=>i.value=C)},{activator:l(({props:C})=>[e(Q,X(C,{elevation:r.value?0:1,color:"grey-lighten-2"}),{default:l(()=>[e(W,{class:"py-1 px-1"},{default:l(()=>[r.value?(p(),q("div",gi,"Camp sans option")):(p(),q("div",Vi,[V(T(n.participant.Participant.QuotientFamilial?`QF ${n.participant.Participant.QuotientFamilial}.`:"Pas de QF.")+" ",1),f[16]||(f[16]=O("br",null,null,-1)),V(" "+T(d(n.participant.Participant.OptionPrix)),1)]))]),_:1})]),_:2},1040,["elevation"])]),default:l(()=>[e(di,{camp:n.participant.Camp,"option-and-qf":{options:n.participant.Participant.OptionPrix,quotientFamilial:n.participant.Participant.QuotientFamilial},onUpdate:f[1]||(f[1]=C=>{n.participant.Participant.OptionPrix=C.options,n.participant.Participant.QuotientFamilial=C.quotientFamilial,i.value=!1,o("update",n.participant.Participant)})},null,8,["camp","option-and-qf"])]),_:1},8,["disabled","modelValue"])]),_:1}),e(b,{"align-self":"center",class:"text-center"},{default:l(()=>[a.value.length?J("",!0):(p(),S(ze,{key:0,label:""},{default:l(()=>f[17]||(f[17]=[V("Aucune aide")])),_:1})),(p(!0),q(le,null,be(a.value,C=>(p(),S(ze,{class:"my-1","prepend-icon":"mdi-cash-plus",color:C.Valide?"green":"orange",onClick:$=>g.value=C},{close:l(()=>[e(ve,{icon:"mdi-close-circle",onClick:it($=>y.value=C,["stop"])},null,8,["onClick"])]),default:l(()=>[V(" "+T(n.structures[C.IdStructureaide].Nom)+" : "+T(L(Pe).montant(C.Valeur)),1)]),_:2},1032,["color","onClick"]))),256))]),_:1}),e(b,{"align-self":"center",class:"text-center",cols:"3"},{default:l(()=>[e(yi,{remises:n.participant.Participant.Remises,onUpdate:f[3]||(f[3]=C=>{n.participant.Participant.Remises=C,o("update",n.participant.Participant)})},null,8,["remises"])]),_:1}),e(b,{"align-self":"center",cols:"auto"},{default:l(()=>[e(Ie,{location:"left"},{activator:l(({props:C})=>[e(B,X(C,{icon:"mdi-dots-vertical",size:"small"}),null,16)]),default:l(()=>[e(Le,{density:"comfortable"},{default:l(()=>[e(te,{title:"Ajouter une aide","prepend-icon":"mdi-cash-plus",onClick:f[4]||(f[4]=C=>m.value={IdParticipant:n.participant.Participant.Id,IdStructure:0})}),e(de),n.hasManyParticipants?(p(),S(te,{key:0,"prepend-icon":"mdi-arrow-expand",title:"Étendre les options et remises",subtitle:"... au reste du dossier",onClick:f[5]||(f[5]=C=>o("expand"))})):J("",!0),e(de),e(te,{title:"Supprimer","prepend-icon":"mdi-delete",onClick:f[6]||(f[6]=C=>s.value=!0)})]),_:1})]),_:1})]),_:1}),e(ie,{modelValue:s.value,"onUpdate:modelValue":f[8]||(f[8]=C=>s.value=C),"max-width":"600px"},{default:l(()=>[e(Q,{title:"Supprimer le participant"},{default:l(()=>[e(W,null,{default:l(()=>f[18]||(f[18]=[V(" Confirmez-vous la suppression de ce participant ? "),O("br",null,null,-1),V(" Attention, cette opération est irréversible. ")])),_:1}),e(ue,null,{default:l(()=>[e(ne),e(B,{color:"red",onClick:f[7]||(f[7]=C=>{o("delete"),s.value=!1})},{default:l(()=>f[19]||(f[19]=[V("Supprimer")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),m.value!=null?(p(),S(ie,{key:0,"model-value":m.value!=null,"onUpdate:modelValue":f[11]||(f[11]=C=>m.value=null),"max-width":"400px"},{default:l(()=>[e(Q,{title:"Ajouter une aide extérieure"},{default:l(()=>[e(W,null,{default:l(()=>[e(Ae,{variant:"outlined",density:"comfortable",label:"Structure",items:c.value,"model-value":m.value.IdStructure==0?null:m.value.IdStructure,"onUpdate:modelValue":f[9]||(f[9]=C=>m.value.IdStructure=C)},null,8,["items","model-value"])]),_:1}),e(ue,null,{default:l(()=>[e(ne),e(B,{color:"green",onClick:f[10]||(f[10]=C=>{o("createAide",m.value),m.value=null}),disabled:m.value.IdStructure==0},{default:l(()=>f[20]||(f[20]=[V("Créer")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])):J("",!0),y.value!=null?(p(),S(ie,{key:1,"model-value":y.value!=null,"onUpdate:modelValue":f[13]||(f[13]=C=>y.value=null),"max-width":"600px"},{default:l(()=>[e(Q,{title:"Supprimer l'aide"},{default:l(()=>[e(W,null,{default:l(()=>f[21]||(f[21]=[V(" Confirmez-vous la suppression de l'aide extérieure ? "),O("br",null,null,-1),V(" Attention, cette opération est irréversible. ")])),_:1}),e(ue,null,{default:l(()=>[e(ne),e(B,{color:"red",onClick:f[12]||(f[12]=C=>{o("deleteAide",y.value.Id),y.value=null})},{default:l(()=>f[22]||(f[22]=[V("Supprimer")])),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])):J("",!0),g.value!=null?(p(),S(ie,{key:2,"model-value":g.value!=null,"onUpdate:modelValue":f[15]||(f[15]=C=>g.value=null),"max-width":"800px"},{default:l(()=>[e(bi,{aide:g.value,structures:n.structures,participant:n.participant,onSave:f[14]||(f[14]=C=>{o("updateAide",C),g.value=null})},null,8,["aide","structures","participant"])]),_:1},8,["model-value"])):J("",!0)]),_:1}))}});function Te(t){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return String(t).padStart(u,"0")}const _i=ce({allowedValues:Function,ampm:Boolean,color:String,disabled:Boolean,displayedValue:null,double:Boolean,format:{type:Function,default:t=>t},max:{type:Number,required:!0},min:{type:Number,required:!0},scrollable:Boolean,readonly:Boolean,rotate:{type:Number,default:0},step:{type:Number,default:1},modelValue:{type:Number}},"VTimePickerClock"),el=fe()({name:"VTimePickerClock",props:_i(),emits:{change:t=>!0,input:t=>!0},setup(t,u){let{emit:n}=u;const o=M(null),a=M(null),r=M(void 0),d=M(!1),i=M(null),s=M(null),{textColorClasses:c,textColorStyles:m}=pl(se(t,"color")),{backgroundColorClasses:g,backgroundColorStyles:y}=Oe(se(t,"color")),I=h(()=>t.max-t.min+1),f=h(()=>t.double?I.value/2:I.value),C=h(()=>360/f.value),$=h(()=>C.value*Math.PI/180),E=h(()=>t.modelValue==null?t.min:t.modelValue),P=h(()=>.62),D=h(()=>{const _=[];for(let R=t.min;R<=t.max;R=R+t.step)_.push(R);return _});we(()=>t.modelValue,_=>{r.value=_});function G(_){r.value!==_&&(r.value=_),n("input",_)}function Y(_){return!t.allowedValues||t.allowedValues(_)}function ae(_){if(!t.scrollable||t.disabled)return;_.preventDefault();const R=Math.sign(-_.deltaY||1);let H=E.value;do H=H+R,H=(H-t.min+I.value)%I.value+t.min;while(!Y(H)&&H!==E.value);H!==t.displayedValue&&G(H)}function Z(_){return t.double&&_-t.min>=f.value}function v(_){return Z(_)?P.value:1}function k(_){const R=t.rotate*Math.PI/180;return{x:Math.sin((_-t.min)*$.value+R)*v(_),y:-Math.cos((_-t.min)*$.value+R)*v(_)}}function A(_,R){const H=(Math.round(_/C.value)+(R?f.value:0))%I.value+t.min;return _<360-C.value/2?H:R?t.max-f.value+1:t.min}function K(_){const{x:R,y:H}=k(_);return{left:`${50+R*50}%`,top:`${50+H*50}%`}}function x(_,R){const H=R.x-_.x,pe=R.y-_.y;return Math.sqrt(H*H+pe*pe)}function w(_,R){const H=2*Math.atan2(R.y-_.y-x(_,R),R.x-_.x);return Math.abs(H*180/Math.PI)}function j(_){i.value===null&&(i.value=_),s.value=_,G(_)}function F(_){var Et,Bt;if(_.preventDefault(),!d.value&&_.type!=="click"||!o.value)return;const{width:R,top:H,left:pe}=(Et=o.value)==null?void 0:Et.getBoundingClientRect(),{width:ye}=((Bt=a.value)==null?void 0:Bt.getBoundingClientRect())??{width:0},{clientX:Ee,clientY:et}="touches"in _?_.touches[0]:_,Ut={x:R/2,y:-R/2},Tt={x:Ee-pe,y:H-et},Rt=Math.round(w(Ut,Tt)-t.rotate+360)%360,Lt=t.double&&x(Ut,Tt)<(ye+ye*P.value)/4,Il=Math.ceil(15/C.value);let Be;for(let tt=0;tt<Il;tt++)if(Be=A(Rt+tt*C.value,Lt),Y(Be)||(Be=A(Rt-tt*C.value,Lt),Y(Be)))return j(Be)}function ee(_){t.disabled||(_.preventDefault(),window.addEventListener("mousemove",F),window.addEventListener("touchmove",F),window.addEventListener("mouseup",me),window.addEventListener("touchend",me),i.value=null,s.value=null,d.value=!0,F(_))}function me(_){_.stopPropagation(),window.removeEventListener("mousemove",F),window.removeEventListener("touchmove",F),window.removeEventListener("mouseup",me),window.removeEventListener("touchend",me),d.value=!1,s.value!==null&&Y(s.value)&&n("change",s.value)}ge(()=>e("div",{class:[{"v-time-picker-clock":!0,"v-time-picker-clock--indeterminate":t.modelValue==null,"v-time-picker-clock--readonly":t.readonly}],onMousedown:ee,onTouchstart:ee,onWheel:ae,ref:o},[e("div",{class:"v-time-picker-clock__inner",ref:a},[e("div",{class:[{"v-time-picker-clock__hand":!0,"v-time-picker-clock__hand--inner":Z(t.modelValue)},c.value],style:[{transform:`rotate(${t.rotate+C.value*(E.value-t.min)}deg) scaleY(${v(E.value)})`},m.value]},null),D.value.map(_=>{const R=_===E.value;return e("div",{class:[{"v-time-picker-clock__item":!0,"v-time-picker-clock__item--active":R,"v-time-picker-clock__item--disabled":t.disabled||!Y(_)},R&&g.value],style:[K(_),R&&y.value]},[e("span",null,[t.format(_)])])})])]))}});var re=function(t){return t[t.Hour=1]="Hour",t[t.Minute=2]="Minute",t[t.Second=3]="Second",t}(re||{});const Ci=ce({ampm:Boolean,ampmInTitle:Boolean,ampmReadonly:Boolean,color:String,disabled:Boolean,hour:Number,minute:Number,second:Number,period:String,readonly:Boolean,useSeconds:Boolean,selecting:Number,value:Number},"VTimePickerControls"),tl=fe()({name:"VTimePickerControls",props:Ci(),emits:{"update:period":t=>!0,"update:selecting":t=>!0},setup(t,u){let{emit:n,slots:o}=u;const{t:a}=Xe();return ge(()=>{let r=t.hour;return t.ampm&&(r=r?(r-1)%12+1:12),e("div",{class:"v-time-picker-controls"},[e("div",{class:{"v-time-picker-controls__time":!0,"v-time-picker-controls__time--with-seconds":t.useSeconds}},[e(B,{active:t.selecting===1,color:t.selecting===1?t.color:void 0,disabled:t.disabled,variant:"tonal",class:{"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time--with-ampm__btn":t.ampm,"v-time-picker-controls__time--with-seconds__btn":t.useSeconds},text:t.hour==null?"--":Te(`${r}`),onClick:()=>n("update:selecting",re.Hour)},null),e("span",{class:["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":t.useSeconds}]},[V(":")]),e(B,{active:t.selecting===2,color:t.selecting===2?t.color:void 0,class:{"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":t.selecting===2,"v-time-picker-controls__time--with-ampm__btn":t.ampm,"v-time-picker-controls__time--with-seconds__btn":t.useSeconds},disabled:t.disabled,variant:"tonal",text:t.minute==null?"--":Te(t.minute),onClick:()=>n("update:selecting",re.Minute)},null),t.useSeconds&&e("span",{class:["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":t.useSeconds}],key:"secondsDivider"},[V(":")]),t.useSeconds&&e(B,{key:"secondsVal",variant:"tonal",onClick:()=>n("update:selecting",re.Second),class:{"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":t.selecting===3,"v-time-picker-controls__time--with-seconds__btn":t.useSeconds},disabled:t.disabled,text:t.second==null?"--":Te(t.second)},null),t.ampm&&t.ampmInTitle&&e("div",{class:["v-time-picker-controls__ampm",{"v-time-picker-controls__ampm--readonly":t.ampmReadonly}]},[e(B,{active:t.period==="am",color:t.period==="am"?t.color:void 0,class:{"v-time-picker-controls__ampm__am":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":t.period==="am"},disabled:t.disabled,text:a("$vuetify.timePicker.am"),variant:t.disabled&&t.period==="am"?"elevated":"tonal",onClick:()=>t.period!=="am"?n("update:period","am"):null},null),e(B,{active:t.period==="pm",color:t.period==="pm"?t.color:void 0,class:{"v-time-picker-controls__ampm__pm":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":t.period==="pm"},disabled:t.disabled,text:a("$vuetify.timePicker.pm"),variant:t.disabled&&t.period==="pm"?"elevated":"tonal",onClick:()=>t.period!=="pm"?n("update:period","pm"):null},null)])])])}),{}}}),xi=$e(24),Dl=$e(12),Pi=Dl.map(t=>t+12);$e(60);const Di={1:"hour",2:"minute",3:"second"},wi=ce({allowedHours:[Function,Array],allowedMinutes:[Function,Array],allowedSeconds:[Function,Array],ampmInTitle:Boolean,disabled:Boolean,format:{type:String,default:"ampm"},max:String,min:String,modelValue:null,readonly:Boolean,scrollable:Boolean,useSeconds:Boolean,...qe(At({title:"$vuetify.timePicker.title"}),["landscape"])},"VTimePicker"),Si=fe()({name:"VTimePicker",props:wi(),emits:{"update:hour":t=>!0,"update:minute":t=>!0,"update:period":t=>!0,"update:second":t=>!0,"update:modelValue":t=>!0},setup(t,u){let{emit:n,slots:o}=u;const{t:a}=Xe(),r=M(null),d=M(null),i=M(null),s=M(null),c=M(null),m=M(null),g=M("am"),y=M(re.Hour),I=M(null),f=M(null),C=h(()=>{let x;if(t.allowedHours instanceof Array?x=F=>t.allowedHours.includes(F):x=t.allowedHours,!t.min&&!t.max)return x;const w=t.min?Number(t.min.split(":")[0]):0,j=t.max?Number(t.max.split(":")[0]):23;return F=>F>=w*1&&F<=j*1&&(!x||x(F))}),$=h(()=>{let x;const w=!C.value||r.value===null||C.value(r.value);if(t.allowedMinutes instanceof Array?x=H=>t.allowedMinutes.includes(H):x=t.allowedMinutes,!t.min&&!t.max)return w?x:()=>!1;const[j,F]=t.min?t.min.split(":").map(Number):[0,0],[ee,me]=t.max?t.max.split(":").map(Number):[23,59],_=j*60+F*1,R=ee*60+me*1;return H=>{const pe=60*r.value+H;return pe>=_&&pe<=R&&w&&(!x||x(H))}}),E=h(()=>{let x;const j=(!C.value||r.value===null||C.value(r.value))&&(!$.value||d.value===null||$.value(d.value));if(t.allowedSeconds instanceof Array?x=Ee=>t.allowedSeconds.includes(Ee):x=t.allowedSeconds,!t.min&&!t.max)return j?x:()=>!1;const[F,ee,me]=t.min?t.min.split(":").map(Number):[0,0,0],[_,R,H]=t.max?t.max.split(":").map(Number):[23,59,59],pe=F*3600+ee*60+(me||0)*1,ye=_*3600+R*60+(H||0)*1;return Ee=>{const et=3600*r.value+60*d.value+Ee;return et>=pe&&et<=ye&&j&&(!x||x(Ee))}}),P=h(()=>t.format==="ampm");we(()=>t.modelValue,x=>Z(x)),Re(()=>{Z(t.modelValue)});function D(){return r.value!=null&&d.value!=null&&(!t.useSeconds||i.value!=null)?`${Te(r.value)}:${Te(d.value)}`+(t.useSeconds?`:${Te(i.value)}`:""):null}function G(){const x=D();x!==null&&n("update:modelValue",x)}function Y(x){return x?(x-1)%12+1:12}function ae(x,w){return x%12+(w==="pm"?12:0)}function Z(x){if(x==null||x==="")r.value=null,d.value=null,i.value=null;else if(x instanceof Date)r.value=x.getHours(),d.value=x.getMinutes(),i.value=x.getSeconds();else{const[w,,j,,F,ee]=x.trim().toLowerCase().match(/^(\d+):(\d+)(:(\d+))?([ap]m)?$/)||new Array(6);r.value=ee?ae(parseInt(w,10),ee):parseInt(w,10),d.value=parseInt(j,10),i.value=parseInt(F||0,10)}g.value=r.value==null||r.value<12?"am":"pm"}function v(x,w){const j=C.value;if(!j)return w;const F=P.value?w<12?Dl:Pi:xi;return((F.find(me=>j((me+w)%F.length+F[0]))||0)+w)%F.length+F[0]}function k(x){if(g.value=x,r.value!=null){const w=r.value+(g.value==="am"?-12:12);r.value=v("hour",w)}return n("update:period",x),G(),!0}function A(x){y.value===re.Hour?r.value=P.value?ae(x,g.value):x:y.value===re.Minute?d.value=x:i.value=x}function K(x){switch(Di[y.value]){case"hour":n("update:hour",x);break;case"minute":n("update:minute",x);break;case"second":n("update:second",x);break}const w=r.value!==null&&d.value!==null&&(t.useSeconds?i.value!==null:!0);y.value===re.Hour?y.value=re.Minute:t.useSeconds&&y.value===re.Minute&&(y.value=re.Second),!(r.value===s.value&&d.value===c.value&&(!t.useSeconds||i.value===m.value)||D()===null)&&(s.value=r.value,c.value=d.value,t.useSeconds&&(m.value=i.value),w&&G())}ge(()=>{const x=st.filterProps(t),w=tl.filterProps(t),j=el.filterProps(qe(t,["format","modelValue","min","max"]));return e(st,X(x,{color:void 0,class:["v-time-picker",t.class],style:t.style}),{title:()=>{var F;return((F=o.title)==null?void 0:F.call(o))??e("div",{class:"v-time-picker__title"},[a(t.title)])},header:()=>e(tl,X(w,{ampm:P.value||t.ampmInTitle,ampmReadonly:P.value&&!t.ampmInTitle,hour:r.value,minute:d.value,period:g.value,second:i.value,selecting:y.value,"onUpdate:period":F=>k(F),"onUpdate:selecting":F=>y.value=F,ref:I}),null),default:()=>e(el,X(j,{allowedValues:y.value===re.Hour?C.value:y.value===re.Minute?$.value:E.value,double:y.value===re.Hour&&!P.value,format:y.value===re.Hour?P.value?Y:F=>F:F=>Te(F,2),max:y.value===re.Hour?P.value&&g.value==="am"?11:23:59,min:y.value===re.Hour&&P.value&&g.value==="pm"?12:0,size:20,step:y.value===re.Hour?1:5,modelValue:y.value===re.Hour?r.value:y.value===re.Minute?d.value:i.value,onChange:K,onInput:A,ref:f}),null),actions:o.actions})})}}),Ii=z({__name:"TimeField",props:Ce({hideDetails:{type:Boolean},readonly:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const u=t,n=ke(t,"modelValue"),o=h(()=>new Date(n.value).toLocaleTimeString(void 0,{hour:"numeric",minute:"numeric"}));function a(i){const[s,c]=i.split(":"),m=new Date(n.value);m.setHours(Number(s),Number(c)),n.value=m.toISOString()}function r(i){const s=new Date(i),c=new Date(n.value);s.setHours(c.getHours(),c.getMinutes(),c.getSeconds()),n.value=s.toISOString()}const d=M(!1);return(i,s)=>{const c=xl;return p(),S(N,{"no-gutters":""},{default:l(()=>[e(b,null,{default:l(()=>[e(c,{class:"mr-2",label:"Date","model-value":L(il)(new Date(n.value)),"onUpdate:modelValue":r,"hide-details":u.hideDetails,readonly:u.readonly},null,8,["model-value","hide-details","readonly"])]),_:1}),e(b,{cols:"auto"},{default:l(()=>s[1]||(s[1]=[O("div",{class:"ma-2"},null,-1)])),_:1}),e(b,null,{default:l(()=>[e(Ie,{"close-on-content-click":!1,modelValue:d.value,"onUpdate:modelValue":s[0]||(s[0]=m=>d.value=m)},{activator:l(({props:m})=>[e(oe,X({class:"center-text"},m,{variant:"outlined",density:"compact","hide-details":u.hideDetails,label:"Moment","model-value":o.value}),null,16,["hide-details","model-value"])]),default:l(()=>[e(L(Si),{"model-value":new Date(n.value),"onUpdate:modelValue":a,format:"24hr"},null,8,["model-value"])]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),Mi=$t(Ii,[["__scopeId","data-v-4a17089b"]]),$i=z({__name:"ModePaiementField",props:Ce({hideDetails:{type:Boolean},readonly:{type:Boolean},rules:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const u=t,n=ke(t,"modelValue"),o=Ge(ba);return(a,r)=>(p(),S(Ae,{label:"Mode de paiement",variant:"outlined",density:"compact",items:L(o),readonly:u.readonly,"hide-details":u.hideDetails,modelValue:n.value,"onUpdate:modelValue":r[0]||(r[0]=d=>n.value=d),rules:u.rules},null,8,["items","readonly","hide-details","modelValue","rules"]))}}),Ai=z({__name:"PaiementEditCard",props:{paiement:{}},emits:["update","delete"],setup(t,{emit:u}){const n=t,o=u,a=M(xe(n.paiement)),r=h(()=>!0),d=M(!1);return(i,s)=>{const c=$i,m=We,g=Mi;return p(),S(Q,{title:"Modifier le paiement"},{default:l(()=>[e(ie,{modelValue:d.value,"onUpdate:modelValue":s[1]||(s[1]=y=>d.value=y),"max-width":"400px"},{default:l(()=>[e(Q,{title:"Confirmation"},{default:l(()=>[e(W,null,{default:l(()=>s[11]||(s[11]=[V(" Confirmez-vous la suppression de ce paiement ? "),O("br",null,null,-1),O("br",null,null,-1),V(" Attention, cette opération est irréversible. ")])),_:1}),e(ue,null,{default:l(()=>[e(ne),e(B,{color:"red",onClick:s[0]||(s[0]=y=>{d.value=!1,o("delete")})},{default:l(()=>s[12]||(s[12]=[V("Supprimer")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(b,null,{default:l(()=>[e(oe,{density:"compact",variant:"outlined","hide-details":"",label:"Payé par",modelValue:a.value.Payeur,"onUpdate:modelValue":s[2]||(s[2]=y=>a.value.Payeur=y)},null,8,["modelValue"])]),_:1}),e(b,null,{default:l(()=>[e(oe,{density:"compact",variant:"outlined","hide-details":"",label:"Description (optionelle)",modelValue:a.value.Label,"onUpdate:modelValue":s[3]||(s[3]=y=>a.value.Label=y)},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(b,null,{default:l(()=>[e(c,{modelValue:a.value.Mode,"onUpdate:modelValue":s[4]||(s[4]=y=>a.value.Mode=y),"hide-details":""},null,8,["modelValue"])]),_:1}),e(b,null,{default:l(()=>[e(m,{label:"Montant",modelValue:a.value.Montant,"onUpdate:modelValue":s[5]||(s[5]=y=>a.value.Montant=y),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(b,null,{default:l(()=>[e(vt,{"hide-details":"",density:"compact",label:"Remboursement ?",modelValue:a.value.IsRemboursement,"onUpdate:modelValue":s[6]||(s[6]=y=>a.value.IsRemboursement=y)},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(b,null,{default:l(()=>[e(g,{modelValue:a.value.Time,"onUpdate:modelValue":s[7]||(s[7]=y=>a.value.Time=y),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(b,null,{default:l(()=>[e(oe,{density:"compact",variant:"outlined",label:"Détails (optionnel)",modelValue:a.value.Details,"onUpdate:modelValue":s[8]||(s[8]=y=>a.value.Details=y)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(ue,null,{default:l(()=>[e(B,{color:"red",onClick:s[9]||(s[9]=y=>d.value=!0)},{default:l(()=>s[13]||(s[13]=[V("Supprimer le paiement")])),_:1}),e(ne),e(B,{onClick:s[10]||(s[10]=y=>o("update",a.value)),disabled:!r.value},{default:l(()=>s[14]||(s[14]=[V("Enregistrer")])),_:1},8,["disabled"])]),_:1})]),_:1})}}}),hi={class:"mr-1"},Ui=["onClick"],Ti={class:"overflow-y-auto",style:{"max-height":"65vh"}},Ri=["href"],Li=z({__name:"DossierDetailsPannel",props:{dossier:{},structures:{},camps:{}},emits:["updateDossier","deleteDossier","mergeDossier","createParticipant","updateParticipant","deleteParticipant","expandParticipant","createAide","updateAide","deleteAide","createPaiement","updatePaiement","deletePaiement","sendMessage","deleteMessage"],setup(t,{expose:u,emit:n}){const o=t,a=n;u({showEditPaiement:y,showEditDossier:c,scrollToLastEvent:ae});function r(Z){switch(Z){case bt.NonCommence:return"red";case bt.EnCours:return"orange";case bt.Complet:return"green"}}const d=h(()=>{const Z=(o.dossier.Dossier.Events||[]).map(A=>({Kind:"event",event:A})),v=Object.values(o.dossier.Dossier.Paiements||{}).map(A=>({Kind:"paiement",Paiement:A})),k=[{Kind:"inscription-time",Time:o.dossier.Dossier.Dossier.MomentInscription},...Z,...v];return k.sort((A,K)=>qt(A).valueOf()-qt(K).valueOf()),k}),i=M(!1),s=M(!1);function c(){s.value=!0}const m=M(null),g=M(null);function y(Z){g.value=Z}const I="Repère",f=M(!1);async function C(){await gt(o.dossier.EspacepersoURL),U.showMessage("Lien vers l'espace personnel copié.")}async function $(){await gt(o.dossier.VirementCode),U.showMessage("Identifiant de virement copié.")}async function E(Z){await gt(Z),U.showMessage("IBAN copié.")}const P=M(null),D=M(!1),G=M(""),Y=xt("timelineBottom");function ae(){nt(()=>{var Z;return(Z=Y.value)==null?void 0:Z.scrollIntoView()})}return(Z,v)=>{const k=ti,A=Mt,K=mt,x=gl;return p(),S(Q,{title:`Dossier de ${o.dossier.Dossier.Responsable}`,class:"ml-2"},{subtitle:l(()=>[(p(!0),q(le,null,be(o.dossier.Dossier.Participants,w=>(p(),q("span",hi,[O("a",{href:"/camps",onClick:it(j=>L(ht)(w.Participant),["prevent"])},T(L(he).label(w.Personne)),9,Ui)]))),256))]),append:l(()=>[e(B,{icon:"mdi-pencil",onClick:v[0]||(v[0]=w=>s.value=!0),class:"mx-1"}),e(je,{text:"Ajouter un paiement",location:"top"},{activator:l(({props:w})=>[e(B,X({icon:"",size:"small",class:"mx-1"},w,{onClick:v[1]||(v[1]=j=>a("createPaiement"))}),{default:l(()=>[e(ve,{color:"green"},{default:l(()=>v[32]||(v[32]=[V("mdi-cash-plus")])),_:1})]),_:2},1040)]),_:1}),e(je,{text:"Envoyer un message",location:"top"},{activator:l(({props:w})=>[e(B,X({icon:"",size:"small",class:"mx-1"},w,{onClick:v[2]||(v[2]=j=>D.value=!0)}),{default:l(()=>[e(ve,{color:"green"},{default:l(()=>v[33]||(v[33]=[V("mdi-email-plus")])),_:1})]),_:2},1040)]),_:1}),e(Ie,null,{activator:l(({props:w})=>[e(B,X(w,{icon:"mdi-dots-vertical",size:"small",class:"mx-1"}),null,16)]),default:l(()=>[e(Le,null,{default:l(()=>[e(te,{"prepend-icon":"mdi-link",onClick:v[3]||(v[3]=w=>f.value=!0),title:"Afficher les identifiants"}),e(de),e(te,{"prepend-icon":"mdi-file-move",onClick:v[4]||(v[4]=w=>P.value={From:o.dossier.Dossier.Dossier.Id,To:0,Notifie:!0}),title:"Fusionner vers ..."}),e(de),e(te,{"prepend-icon":"mdi-delete",onClick:v[5]||(v[5]=w=>i.value=!0),title:"Supprimer"})]),_:1})]),_:1})]),default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(b,{class:"ml-2 mb-1 text-center"},{default:l(()=>[e(Ie,null,{activator:l(({props:w})=>[e(ze,X(w,{"prepend-icon":"mdi-currency-eur",color:r(o.dossier.Dossier.Bilan.Statut)}),{default:l(()=>[V(T(o.dossier.Dossier.Bilan.Recu)+" payé sur "+T(o.dossier.Dossier.Bilan.Demande),1)]),_:2},1040,["color"])]),default:l(()=>[e(ii,{dossier:o.dossier.Dossier},null,8,["dossier"])]),_:1})]),_:1})]),_:1}),O("div",Ti,[e(Bn,{side:"end",class:"mt-4",density:"compact"},{default:l(()=>[(p(!0),q(le,null,be(d.value,(w,j)=>(p(),S(k,{event:w,key:j,onEditPaiement:v[6]||(v[6]=F=>g.value=F),onDeleteMessage:v[7]||(v[7]=F=>a("deleteMessage",F))},null,8,["event"]))),128))]),_:1}),O("div",{ref_key:"timelineBottom",ref:Y},null,512)])]),_:1}),e(ie,{modelValue:i.value,"onUpdate:modelValue":v[9]||(v[9]=w=>i.value=w),"max-width":"600px"},{default:l(()=>[e(Q,{title:"Supprimer le dossier"},{default:l(()=>[e(W,null,{default:l(()=>v[34]||(v[34]=[V(" Confirmez-vous la suppression du dossier et de ses participants ? "),O("br",null,null,-1),O("br",null,null,-1),V(" Attention, cette opération est irréversible. ")])),_:1}),e(ue,null,{default:l(()=>[e(ne),e(B,{color:"red",onClick:v[8]||(v[8]=w=>{a("deleteDossier"),i.value=!1})},{default:l(()=>v[35]||(v[35]=[V("Supprimer")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),m.value!=null?(p(),S(ie,{key:0,"model-value":m.value!=null,"onUpdate:modelValue":v[13]||(v[13]=w=>m.value=null),"max-width":"600px"},{default:l(()=>[e(Q,{title:"Ajouter un participant"},{default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(b,{cols:"12"},{default:l(()=>[e(A,{label:"Camp",camps:o.camps,modelValue:m.value.IdCamp,"onUpdate:modelValue":v[10]||(v[10]=w=>m.value.IdCamp=w)},null,8,["camps","modelValue"])]),_:1}),e(b,{cols:"12"},{default:l(()=>[e(K,{label:"Personne","initial-personne":"",modelValue:m.value.IdPersonne,"onUpdate:modelValue":v[11]||(v[11]=w=>m.value.IdPersonne=w)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(ue,null,{default:l(()=>[e(ne),e(B,{color:"green",disabled:m.value.IdPersonne==0||m.value.IdCamp==0,onClick:v[12]||(v[12]=w=>{a("createParticipant",m.value),m.value=null})},{default:l(()=>v[36]||(v[36]=[V("Ajouter")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])):J("",!0),e(ie,{modelValue:s.value,"onUpdate:modelValue":v[20]||(v[20]=w=>s.value=w)},{default:l(()=>[e(Q,{title:"Modifier le dossier"},{append:l(()=>[e(B,{onClick:v[14]||(v[14]=w=>m.value={IdCamp:0,IdPersonne:0,IdDossier:o.dossier.Dossier.Dossier.Id})},{prepend:l(()=>[e(ve,{color:"green"},{default:l(()=>v[37]||(v[37]=[V("mdi-plus")])),_:1})]),default:l(()=>[v[38]||(v[38]=V(" Ajouter un participant"))]),_:1})]),default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(b,{cols:"3"},{default:l(()=>[e(ui,{responsable:o.dossier.Dossier.Responsable,dossier:o.dossier.Dossier.Dossier,onSave:v[15]||(v[15]=w=>a("updateDossier",w))},null,8,["responsable","dossier"])]),_:1}),e(de,{thickness:"4",vertical:""}),e(b,null,{default:l(()=>[v[39]||(v[39]=O("div",{class:"my-1"},null,-1)),(p(!0),q(le,null,be(o.dossier.Dossier.Participants,w=>{var j;return p(),S(ki,{participant:w,aides:(o.dossier.Dossier.Aides||{})[w.Participant.Id],structures:o.structures,"has-many-participants":(((j=o.dossier.Dossier.Participants)==null?void 0:j.length)||0)>1,onCreateAide:v[16]||(v[16]=F=>a("createAide",F)),onDeleteAide:v[17]||(v[17]=F=>a("deleteAide",F)),onUpdateAide:v[18]||(v[18]=F=>a("updateAide",F)),onUpdate:v[19]||(v[19]=F=>a("updateParticipant",F)),onDelete:F=>a("deleteParticipant",w.Participant.Id),onExpand:F=>a("expandParticipant",w.Participant)},null,8,["participant","aides","structures","has-many-participants","onDelete","onExpand"])}),256))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),g.value!=null?(p(),S(ie,{key:1,"model-value":g.value!=null,"onUpdate:modelValue":v[23]||(v[23]=w=>g.value=null),"max-width":"600px"},{default:l(()=>[e(Ai,{paiement:g.value,onUpdate:v[21]||(v[21]=w=>{a("updatePaiement",w),g.value=null}),onDelete:v[22]||(v[22]=w=>{a("deletePaiement",g.value),g.value=null})},null,8,["paiement"])]),_:1},8,["model-value"])):J("",!0),e(ie,{modelValue:f.value,"onUpdate:modelValue":v[24]||(v[24]=w=>f.value=w),"max-width":"800px"},{default:l(()=>[e(Q,{title:"Liens et identifiants"},{default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(b,{cols:"3"},{default:l(()=>v[40]||(v[40]=[V("Espace personnel")])),_:1}),e(b,{class:"text-truncate"},{default:l(()=>[O("a",{href:o.dossier.EspacepersoURL,target:"_blank"},T(o.dossier.EspacepersoURL),9,Ri)]),_:1}),e(b,{"align-self":"center",cols:"auto"},{default:l(()=>[e(B,{size:"small",icon:"mdi-content-copy",onClick:C})]),_:1})]),_:1}),(p(!0),q(le,null,be(o.dossier.BankAccounts,w=>(p(),S(N,null,{default:l(()=>[e(b,{cols:"3"},{default:l(()=>[V("RIB ("+T(L(I))+")",1)]),_:1}),e(b,{cols:"3"},{default:l(()=>[V(T(w[0]),1)]),_:2},1024),e(b,null,{default:l(()=>[V(T(w[1]),1)]),_:2},1024),e(b,{"align-self":"center",cols:"auto"},{default:l(()=>[e(B,{size:"small",icon:"mdi-content-copy",onClick:()=>E(w[1])},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),256)),e(N,null,{default:l(()=>[e(b,{cols:"3"},{default:l(()=>v[41]||(v[41]=[V("Identification de virement")])),_:1}),e(b,null,{default:l(()=>[V(T(o.dossier.VirementCode),1)]),_:1}),e(b,{"align-self":"center",cols:"auto"},{default:l(()=>[e(B,{size:"small",icon:"mdi-content-copy",onClick:$})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),P.value!=null?(p(),S(ie,{key:2,"model-value":P.value!=null,"onUpdate:modelValue":v[28]||(v[28]=w=>P.value=null),"max-width":"600px"},{default:l(()=>[e(Q,{title:"Fusionner le dossier vers",subtitle:"Les participants, paiements et messages seront copiés vers le dossier cible."},{default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(b,{cols:"12"},{default:l(()=>[e(x,{modelValue:P.value.To,"onUpdate:modelValue":v[25]||(v[25]=w=>P.value.To=w)},null,8,["modelValue"])]),_:1}),e(b,{cols:"12"},{default:l(()=>[e(vt,{density:"compact",label:"Notifier par email",hint:"Le reponsable du dossier absorbé sera averti du changement d'espace personnel.","persistent-hint":"",modelValue:P.value.Notifie,"onUpdate:modelValue":v[26]||(v[26]=w=>P.value.Notifie=w)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(ue,null,{default:l(()=>[e(ne),e(B,{disabled:P.value.To==0||P.value.To==P.value.From,onClick:v[27]||(v[27]=w=>{a("mergeDossier",P.value),P.value=null})},{default:l(()=>v[42]||(v[42]=[V("Fusionner")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])):J("",!0),e(ie,{modelValue:D.value,"onUpdate:modelValue":v[31]||(v[31]=w=>D.value=w),"max-width":"600px"},{default:l(()=>[e(Q,{title:"Nouveau message",subtitle:"Envoie un message sur le fil de suivi et une notification par mail."},{default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(b,null,{default:l(()=>[e(Pt,{rows:"5",variant:"outlined",modelValue:G.value,"onUpdate:modelValue":v[29]||(v[29]=w=>G.value=w)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(ue,null,{default:l(()=>[e(ne),e(B,{disabled:!G.value.length,onClick:v[30]||(v[30]=w=>{a("sendMessage",G.value),D.value=!1})},{default:l(()=>v[43]||(v[43]=[V("Envoyer")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["title"])}}}),Ei=z({__name:"CreateDossierCard",emits:["create"],setup(t,{emit:u}){const n=u,o=M(0);return(a,r)=>{const d=mt;return p(),S(Q,{title:"Créer un dossier"},{default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(b,null,{default:l(()=>[e(d,{label:"Responsable légal","initial-personne":"",modelValue:o.value,"onUpdate:modelValue":r[0]||(r[0]=i=>o.value=i)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(ue,null,{default:l(()=>[e(ne),e(B,{color:"green",disabled:o.value==0,onClick:r[1]||(r[1]=i=>n("create",o.value))},{default:l(()=>r[2]||(r[2]=[V("Créer")])),_:1},8,["disabled"])]),_:1})]),_:1})}}}),Bi=ce({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:De,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...Ze(),...Ca({location:"top end"}),...dt(),...rt(),...wt(),..._a({transition:"scale-rotate-transition"})},"VBadge"),Ni=fe()({name:"VBadge",inheritAttrs:!1,props:Bi(),setup(t,u){const{backgroundColorClasses:n,backgroundColorStyles:o}=Oe(se(t,"color")),{roundedClasses:a}=ml(t),{t:r}=Xe(),{textColorClasses:d,textColorStyles:i}=pl(se(t,"textColor")),{themeClasses:s}=ga(),{locationStyles:c}=Va(t,!0,m=>(t.floating?t.dot?2:4:t.dot?8:12)+(["top","bottom"].includes(m)?+(t.offsetY??0):["left","right"].includes(m)?+(t.offsetX??0):0));return ge(()=>{const m=Number(t.content),g=!t.max||isNaN(m)?t.content:m<=+t.max?m:`${t.max}+`,[y,I]=ka(u.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return e(t.tag,X({class:["v-badge",{"v-badge--bordered":t.bordered,"v-badge--dot":t.dot,"v-badge--floating":t.floating,"v-badge--inline":t.inline},t.class]},I,{style:t.style}),{default:()=>{var f,C;return[e("div",{class:"v-badge__wrapper"},[(C=(f=u.slots).default)==null?void 0:C.call(f),e(Dt,{transition:t.transition},{default:()=>{var $,E;return[yl(e("span",X({class:["v-badge__badge",s.value,n.value,a.value,d.value],style:[o.value,i.value,t.inline?{}:c.value],"aria-atomic":"true","aria-label":r(t.label,m),"aria-live":"polite",role:"status"},y),[t.dot?void 0:u.slots.badge?(E=($=u.slots).badge)==null?void 0:E.call($):t.icon?e(ve,{icon:t.icon},null):g]),[[bl,t.modelValue]])]}})])]}})}),{}}}),Fi=z({__name:"DossierList",props:Ce({camps:{}},{query:{required:!0},queryModifiers:{}}),emits:Ce(["click","update"],["update:query"]),setup(t,{expose:u,emit:n}){const o=t,a=n,r=ke(t,"query");u({searchDossiers:s}),we(()=>r.value,s,{immediate:!0});const d=M(!1),i=M(null);async function s(){const m=await U.DossiersSearch(r.value);m!==void 0&&(i.value=m,a("update",m))}function c(){r.value.Pattern="sort:messages",s()}return(m,g)=>{const y=Oa,I=Mt;return p(),q("div",null,[e(N,null,{default:l(()=>[e(b,{"align-self":"center"},{default:l(()=>[e(y,{density:"compact",variant:"outlined","prepend-inner-icon":"mdi-magnify",label:"Rechercher un dossier","hide-details":"",clearable:"",modelValue:r.value.Pattern,"onUpdate:modelValue":[g[1]||(g[1]=f=>r.value.Pattern=f),s]},{append:l(()=>[e(je,{text:"Trier selon les nouveaux messages"},{activator:l(({props:f})=>[e(B,X(f,{icon:"",size:"small",class:"mr-1",onClick:c}),{default:l(()=>[e(ve,{color:"light-blue-darken-3"},{default:l(()=>g[5]||(g[5]=[V("mdi-email")])),_:1})]),_:2},1040)]),_:1}),e(je,{text:"Autres critères de recherche"},{activator:l(({props:f})=>[e(B,X({size:"small",variant:"flat"},f,{icon:d.value?"mdi-chevron-up":"mdi-chevron-down",onClick:g[0]||(g[0]=C=>d.value=!d.value)}),null,16,["icon"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(xa,null,{default:l(()=>[yl(e(N,{class:"mx-0"},{default:l(()=>[e(b,{cols:"5"},{default:l(()=>[e(I,{label:"Camp",camps:o.camps,"model-value":L(wa)(L(Sa)(r.value.IdCamp)),"onUpdate:modelValue":g[2]||(g[2]=f=>{r.value.IdCamp=L(Pa)(L(Da)(f)),s()})},null,8,["camps","model-value"])]),_:1}),e(b,null,{default:l(()=>[e(Ae,{density:"compact",variant:"outlined",label:"Liste d'attente",modelValue:r.value.Attente,"onUpdate:modelValue":[g[3]||(g[3]=f=>r.value.Attente=f),s],items:L(Ge)(L(Ia))},null,8,["modelValue","items"])]),_:1}),e(b,null,{default:l(()=>[e(Ae,{density:"compact",variant:"outlined",label:"Réglement",modelValue:r.value.Reglement,"onUpdate:modelValue":[g[4]||(g[4]=f=>r.value.Reglement=f),s],items:L(Ge)(L(Ma))},null,8,["modelValue","items"])]),_:1})]),_:1},512),[[bl,d.value]])]),_:1}),i.value!=null?(p(),S(Le,{key:0,class:"mt-2"},{default:l(()=>{var f;return[(f=i.value.Dossiers)!=null&&f.length?J("",!0):(p(),S(te,{key:0,class:"text-center"},{default:l(()=>g[6]||(g[6]=[O("i",null,"Aucun dossier ne correspond à votre recherche.",-1)])),_:1})),(p(!0),q(le,null,be(i.value.Dossiers,(C,$)=>(p(),S(te,{rounded:"",key:$,title:C.Responsable,subtitle:C.Participants,value:C.Id,onClick:E=>a("click",C),class:"my-1"},$a({_:2},[C.NewMessages?{name:"append",fn:l(()=>[e(Ni,{color:"light-blue-darken-3",content:C.NewMessages},null,8,["content"])]),key:"0"}:void 0]),1032,["title","subtitle","value","onClick"]))),128))]}),_:1})):J("",!0)])}}}),Oi={key:1,class:"text-center font-italic my-6"},qi=z({__name:"PannelDossiers",props:{initialDossier:{}},setup(t){const u=t;Re(()=>{d(),s(),u.initialDossier!==void 0&&y(u.initialDossier)});const n=xt("detailsPannel"),o=M(null),a=M(qa()),r=M([]);async function d(){const _=await U.GetCamps();_!==void 0&&(r.value=_||[])}const i=M({});async function s(){const _=await U.GetStructureaides();_!==void 0&&(i.value=_||{})}function c(_){var R,H;o.value={length:((R=_.Dossiers)==null?void 0:R.length)||0,total:_.Total},I.value==null&&((H=_.Dossiers)!=null&&H.length)&&f(_.Dossiers[0].Id)}const m=xt("dossierList");function g(){var _;(_=m.value)==null||_.searchDossiers()}async function y(_){a.value=za(_),await f(_)}const I=M(null);async function f(_){var H;const R=await U.DossiersLoad({id:_});R!==void 0&&(I.value=R,(H=n.value)==null||H.scrollToLastEvent())}async function C(_){f(_.Id),await U.EventsMarkMessagesSeen({idDossier:_.Id})!==void 0&&g()}async function $(){I.value!=null&&f(I.value.Dossier.Dossier.Id)}const E=M(!1);async function P(_){var H;E.value=!1;const R=await U.DossiersCreate({idResponsable:_});R!==void 0&&(U.showMessage("Dossier créé avec succès."),await y(R.Id),(H=n.value)==null||H.showEditDossier())}async function D(_){const R=await U.DossiersUpdate(_);R!==void 0&&(U.showMessage("Dossier mis à jour avec succès."),I.value!=null&&(I.value.Dossier.Dossier=_,I.value.Dossier.Responsable=R.Responsable),g())}async function G(){if(I.value==null)return;const _=I.value.Dossier.Dossier.Id;await U.DossiersDelete({id:_})!==void 0&&(U.showMessage("Dossier supprimé avec succès."),I.value=null,g())}async function Y(_){await U.DossiersMerge(_)!==void 0&&(U.showMessage("Dossier fusionné avec succès."),g(),f(_.To))}async function ae(_){await U.ParticipantsCreate(_)!==void 0&&(U.showMessage("Participant ajouté avec succès."),$())}async function Z(_){await U.ParticipantsUpdate(_)!==void 0&&(U.showMessage("Réglages du participant modifiés avec succès."),$())}async function v(_){await U.ParticipantsDelete({id:_})!==void 0&&(U.showMessage("Participant supprimé avec succès."),$())}async function k(_){var pe;if(I.value==null)return;const R=((pe=I.value.Dossier.Participants)==null?void 0:pe.map(ye=>ye.Participant).filter(ye=>ye.Id!=_.Id))||[];!R.length||(R.forEach(ye=>{ye.Remises=_.Remises,ye.QuotientFamilial=_.QuotientFamilial,ye.IdCamp==_.IdCamp&&(ye.OptionPrix=_.OptionPrix)}),(await Promise.all(R.map(ye=>U.ParticipantsUpdate(ye)))).includes(void 0))||(U.showMessage("Réglages des participants modifiés avec succès."),$())}async function A(_){const R=await U.AidesCreate(_);if(R===void 0||(U.showMessage("Aide ajoutée avec succès."),I.value==null))return;const H=I.value.Dossier.Aides||{},pe=H[_.IdParticipant]||{};pe[R.Id]=R,H[_.IdParticipant]=pe,I.value.Dossier.Aides=H}async function K(_){await U.AidesUpdate(_)!==void 0&&(U.showMessage("Aide modifiée avec succès."),$())}async function x(_){await U.AidesDelete({id:_})!==void 0&&(U.showMessage("Aide supprimée avec succès."),$())}async function w(){var R;if(I.value==null)return;const _=await U.PaiementsCreate({idDossier:I.value.Dossier.Dossier.Id});_!==void 0&&(U.showMessage("Paiement créé avec succès."),$(),(R=n.value)==null||R.showEditPaiement(_))}async function j(_){await U.PaiementsUpdate(_)!==void 0&&(U.showMessage("Paiement modifié avec succès."),$())}async function F(_){await U.PaiementsDelete({id:_.Id})!==void 0&&(U.showMessage("Paiement supprimé avec succès."),$())}async function ee(_){I.value==null||await U.EventsSendMessage({IdDossier:I.value.Dossier.Dossier.Id,Contenu:_})===void 0||(U.showMessage("Message envoyé avec succès."),$())}async function me(_){await U.EventsDelete({id:_.Id})!==void 0&&(U.showMessage("Message supprimé avec succès."),$())}return(_,R)=>(p(),S(N,{"no-gutters":"",class:"ma-2"},{default:l(()=>[e(ie,{modelValue:E.value,"onUpdate:modelValue":R[0]||(R[0]=H=>E.value=H),"max-width":"400px"},{default:l(()=>[e(Ei,{onCreate:P})]),_:1},8,["modelValue"]),e(b,{cols:"6"},{default:l(()=>[e(Q,{title:"Dossiers",subtitle:o.value==null?"-":`${o.value.length} / ${o.value.total}`},{append:l(()=>[e(B,{icon:"",size:"small",onClick:R[1]||(R[1]=H=>E.value=!0)},{default:l(()=>[e(ve,{color:"green"},{default:l(()=>R[3]||(R[3]=[V("mdi-plus")])),_:1})]),_:1})]),default:l(()=>[e(W,null,{default:l(()=>[e(Fi,{camps:r.value,query:a.value,"onUpdate:query":R[2]||(R[2]=H=>a.value=H),onClick:C,onUpdate:c,ref_key:"dossierList",ref:m},null,8,["camps","query"])]),_:1})]),_:1},8,["subtitle"])]),_:1}),e(b,null,{default:l(()=>[I.value!=null?(p(),S(Li,{key:0,dossier:I.value,structures:i.value,camps:r.value,onUpdateDossier:D,onDeleteDossier:G,onMergeDossier:Y,onCreateParticipant:ae,onUpdateParticipant:Z,onDeleteParticipant:v,onExpandParticipant:k,onCreateAide:A,onDeleteAide:x,onUpdateAide:K,onCreatePaiement:w,onUpdatePaiement:j,onDeletePaiement:F,onSendMessage:ee,onDeleteMessage:me,ref_key:"detailsPannel",ref:n},null,8,["dossier","structures","camps"])):(p(),q("div",Oi," Sélectionner un dossier... "))]),_:1})]),_:1}))}}),zi=z({__name:"inscriptions",setup(t){const u=ct(),n=h(()=>Ki(u.currentRoute.value.query)),o=h(()=>n.value.tab||"insc"),a=h(()=>n.value.idDossier);function r(d){const i=u.currentRoute.value;u.push({path:i.path,query:{tab:d}})}return(d,i)=>(p(),q(le,null,[e(ft,{title:"Suivi des inscriptions"},{default:l(()=>[e(Ha,{"model-value":o.value,"onUpdate:modelValue":i[0]||(i[0]=s=>r(s))},{default:l(()=>[e(Ht,{value:"insc"},{default:l(()=>i[1]||(i[1]=[V("Nouvelles inscriptions")])),_:1}),e(Ht,{value:"doss"},{default:l(()=>i[2]||(i[2]=[V("Suivi des dossiers")])),_:1})]),_:1},8,["model-value"])]),_:1}),e(ja,{"model-value":o.value},{default:l(()=>[e(Qt,{value:"insc"},{default:l(()=>[e(Un,{onGoTo:L(wl)},null,8,["onGoTo"])]),_:1}),e(Qt,{value:"doss"},{default:l(()=>[e(qi,{"initial-dossier":a.value},null,8,["initial-dossier"])]),_:1})]),_:1},8,["model-value"])],64))}}),ji=z({__name:"PersonneEdit",props:{personne:{}},emits:["save"],setup(t,{emit:u}){const n=t,o=u,a=M(xe(n.personne)),r=h(()=>!!(a.value.Nom&&a.value.Prenom));return(d,i)=>{const s=Ja,c=Ga;return p(),S(Q,{title:"Editer le profil"},{default:l(()=>[e(W,null,{default:l(()=>[e(sl,null,{default:l(()=>[e(N,null,{default:l(()=>[e(b,null,{default:l(()=>[e(oe,{autofocus:"","hide-details":"",label:"Nom",density:"compact",variant:"outlined",modelValue:a.value.Nom,"onUpdate:modelValue":i[0]||(i[0]=m=>a.value.Nom=m)},null,8,["modelValue"])]),_:1}),e(b,null,{default:l(()=>[e(oe,{autofocus:"","hide-details":"",label:"Nom",density:"compact",variant:"outlined",modelValue:a.value.Prenom,"onUpdate:modelValue":i[1]||(i[1]=m=>a.value.Prenom=m)},null,8,["modelValue"])]),_:1}),e(b,null,{default:l(()=>[e(s,{modelValue:a.value.Sexe,"onUpdate:modelValue":i[2]||(i[2]=m=>a.value.Sexe=m)},null,8,["modelValue"])]),_:1}),e(b,null,{default:l(()=>[e(c,{modelValue:a.value.DateNaissance,"onUpdate:modelValue":i[3]||(i[3]=m=>a.value.DateNaissance=m)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(ue,null,{default:l(()=>[e(ne),e(B,{disabled:!r.value,onClick:i[4]||(i[4]=m=>o("save",a.value))},{default:l(()=>i[5]||(i[5]=[V("Enregistrer")])),_:1},8,["disabled"])]),_:1})]),_:1})}}}),Hi=z({__name:"annuaire",setup(t){const u=ct(),n=h(()=>Ji(u.currentRoute.value.query)),o=h(()=>n.value.idPersonne);we(()=>o.value,()=>o.value!==void 0?d(o.value):null);const a=M(null);async function r(){a.value!=null&&(a.value=null,U.showMessage("Profil modifié avec succès."))}async function d(i){}return(i,s)=>(p(),q(le,null,[e(ft,{title:"Annuaire",subtitle:"Personnes et organismes"},{default:l(()=>s[1]||(s[1]=[V(" TODO ")])),_:1}),e(Q,null,{default:l(()=>[a.value!=null?(p(),S(ie,{key:0,"model-value":a.value!=null,"onUpdate:modelValue":s[0]||(s[0]=c=>a.value=null),"max-width":"800px"},{default:l(()=>[e(ji,{personne:a.value,onSave:r},null,8,["personne"])]),_:1},8,["model-value"])):J("",!0)]),_:1})],64))}}),Qi=[{path:"/",component:en},{path:"/camps",component:$n},{path:"/inscriptions",component:zi},{path:"/annuaire",component:Hi}],Yi="/backoffice",Ke=Qa({history:Ya(Yi),routes:Qi});Ke.onError((t,u)=>{var n,o;(o=(n=t==null?void 0:t.message)==null?void 0:n.includes)!=null&&o.call(n,"Failed to fetch dynamically imported module")?localStorage.getItem("vuetify:dynamic-reload")?console.error("Dynamic import error, reloading page did not fix it",t):(console.log("Reloading page to fix dynamic import error"),localStorage.setItem("vuetify:dynamic-reload","true"),location.assign(u.fullPath)):console.error(t)});Ke.isReady().then(()=>{localStorage.removeItem("vuetify:dynamic-reload")});function ot(t){return t?Number(t):void 0}function Wi(t){const u=t;return{idCamp:ot(u.idCamp),idParticipant:ot(u.idParticipant)}}function ht(t){Ke.push({path:"/camps",query:{idCamp:t.IdCamp,idParticipant:t.Id}})}function Ki(t){const u=t;return{tab:u.tab,idDossier:ot(u.idDossier)}}function wl(t){Ke.push({path:"/inscriptions",query:{tab:"doss",idDossier:t}})}function Ji(t){return{idPersonne:ot(t.idPersonne)}}function Gi(t){Ke.push({path:"/annuaire",query:{idPersonne:t}})}function Xi(t){t.use(Za).use(Ke)}const Zi=["innerHTML"],eu=z({__name:"App",setup(t){const u=Ct({text:"",color:"secondary",action:void 0,timeout:4e3}),n=M(""),o=M("");return U.onError=(a,r)=>{n.value=a,o.value=r},U.showMessage=(a,r,d)=>{u.text=a,u.color=r||"success",u.action=d,u.timeout=1e4,u.timeout=4e3},(a,r)=>{const d=Aa("router-view");return p(),S(Ua,null,{default:l(()=>[e(ha,null,{default:l(()=>[e(d),e(zt,{style:{"z-index":"10000"},app:"","model-value":u.text!="","onUpdate:modelValue":r[1]||(r[1]=i=>u.text=""),timeout:u.timeout,color:u.color,location:"bottom left","close-on-content-click":""},{default:l(()=>[V(T(u.text)+" ",1),u.action?(p(),S(B,{key:0,onClick:r[0]||(r[0]=i=>u.action.action()),class:"ml-2"},{default:l(()=>[V(T(u.action.title),1)]),_:1})):J("",!0)]),_:1},8,["model-value","timeout","color"]),e(zt,{app:"","model-value":n.value!="","onUpdate:modelValue":r[2]||(r[2]=i=>n.value=""),timeout:4e3,color:"red"},{default:l(()=>[O("b",null,T(n.value),1),O("div",{innerHTML:o.value},null,8,Zi)]),_:1},8,["model-value"])]),_:1})]),_:1})}}}),Sl=Ta(eu);Xi(Sl);Sl.mount("#app");
