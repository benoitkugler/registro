import{a as F,_ as L}from"./FileCard.vue_vue_type_script_setup_true_lang-BHMbK7fy.js";import{cx as c,d as _,k as B,a$ as H,s as f,o as p,w as t,b as r,a0 as M,n as g,e as D,j as b,g as N,a as I,F as $,a1 as j,h as U,a3 as E,B as V,r as z,ay as J}from"./VSnackbar-BDFFDPik.js";import{V as W,i as y,b as k,c as x,e as q,f as P}from"./VTextarea-BbtyCEWP.js";const i={NoBuiltin:0,CarteId:1,Permis:2,SB:3,Secourisme:4,Bafa:5,Bafd:6,CarteVitale:7,Vaccins:8,Haccp:9,BafdEquiv:10,BafaEquiv:11,CertMedicalCuisine:12,Scolarite:13,Autre:14,nbCategorieEquipier:15},Q={[i.NoBuiltin]:"-",[i.CarteId]:"Carte d'identité/Passeport",[i.Permis]:"Permis de conduire",[i.SB]:"Surveillant de baignade",[i.Secourisme]:"Secourisme (PSC1 - AFPS)",[i.Bafa]:"BAFA",[i.Bafd]:"BAFD",[i.CarteVitale]:"Carte Vitale",[i.Vaccins]:"Vaccins",[i.Haccp]:"Cuisine (HACCP)",[i.BafdEquiv]:"Equivalent BAFD",[i.BafaEquiv]:"Equivalent BAFA",[i.CertMedicalCuisine]:"Certificat médical cuisine",[i.Scolarite]:"Certificat de scolarité",[i.Autre]:"Autre",[i.nbCategorieEquipier]:""},m={AAucun:0,AAutre:1,ASb:2,ACanoe:3,AVoile:4,AMoto:5},X={[m.AAucun]:"Non effectué",[m.AAutre]:"Approfondissement",[m.ASb]:"Surveillant de baignade",[m.ACanoe]:"Canoë - Kayak",[m.AVoile]:"Voile",[m.AMoto]:"Loisirs motocyclistes"},a={DAucun:0,DBafa:1,DBafaStag:2,DBafd:3,DBafdStag:4,DCap:5,DAssSociale:6,DEducSpe:7,DMonEduc:8,DInstit:9,DProf:10,DAgreg:11,DBjeps:12,DDut:13,DEje:14,DDeug:15,DStaps:16,DBapaat:17,DBeatep:18,DZzautre:19},Y={[a.DAucun]:"Aucun",[a.DBafa]:"BAFA Titulaire",[a.DBafaStag]:"BAFA Stagiaire",[a.DBafd]:"BAFD titulaire",[a.DBafdStag]:"BAFD stagiaire",[a.DCap]:"CAP petit enfance",[a.DAssSociale]:"Assitante Sociale",[a.DEducSpe]:"Educ. spé.",[a.DMonEduc]:"Moniteur educateur",[a.DInstit]:"Professeur des écoles",[a.DProf]:"Enseignant du secondaire",[a.DAgreg]:"Agrégé",[a.DBjeps]:"BPJEPS",[a.DDut]:"DUT carrière sociale",[a.DEje]:"EJE",[a.DDeug]:"DEUG",[a.DStaps]:"STAPS",[a.DBapaat]:"BAPAAT",[a.DBeatep]:"BEATEP",[a.DZzautre]:"AUTRE"},h={NoSexe:0,Woman:1,Man:2};h.NoSexe+"",h.Woman+"",h.Man+"";class ee{constructor(l,e){this.baseURL=l,this.authToken=e}getHeaders(){return{Authorization:"Bearer "+this.authToken}}async Load(l){const e=this.baseURL+"/api/v1/equipier";this.startRequest();try{return(await c.get(e,{headers:this.getHeaders(),params:{token:l.token}})).data}catch(o){this.handleError(o)}}async LoadJoomeo(l){const e=this.baseURL+"/api/v1/equipier/joomeo";this.startRequest();try{return(await c.get(e,{headers:this.getHeaders(),params:{token:l.token}})).data}catch(o){this.handleError(o)}}async Update(l){const e=this.baseURL+"/api/v1/equipier";this.startRequest();try{return await c.post(e,l,{headers:this.getHeaders()}),!0}catch(o){this.handleError(o)}}async UpdateCharte(l){const e=this.baseURL+"/api/v1/equipier/charte";this.startRequest();try{return await c.post(e,null,{headers:this.getHeaders(),params:{token:l.token,accept:l.accept?"ok":""}}),!0}catch(o){this.handleError(o)}}async UploadDocument(l,e){const o=this.baseURL+"/api/v1/equipier/upload";this.startRequest();try{const n=new FormData;return n.append("document",l,l.name),(await c.put(o,n,{headers:this.getHeaders(),params:{token:e.token,idDemande:String(e.idDemande)}})).data}catch(n){this.handleError(n)}}async DeleteDocument(l){const e=this.baseURL+"/api/v1/equipier/upload";this.startRequest();try{return await c.delete(e,{headers:this.getHeaders(),params:{key:l.key}}),!0}catch(o){this.handleError(o)}}}const ae=_({__name:"FilesRow",props:{title:{},subtitle:{},maxDocs:{},files:{},inUpload:{type:Boolean},showUploadText:{type:Boolean}},emits:["upload","delete"],setup(v,{emit:l}){const e=v,o=l,n=B(!1),A=B(null),d=B(null),C=H("input");function S(){n.value=!0,J(()=>C.value?.openDialog())}return(R,s)=>{const T=L,w=F;return p(),f(W,{title:e.title,subtitle:e.subtitle,rounded:"",class:"bg-grey-lighten-4 my-1"},{prepend:t(()=>[z(R.$slots,"prepend")]),append:t(()=>[r(N,null,{default:t(()=>[(p(!0),I($,null,j(e.files,u=>(p(),f(U,{"align-self":"center"},{default:t(()=>[r(T,{file:u,onDelete:Z=>d.value=u},null,8,["file","onDelete"])]),_:2},1024))),256)),r(U,{"align-self":"center",cols:"auto"},{default:t(()=>[e.showUploadText?(p(),f(g,{key:0,class:"my-2",size:"small",onClick:S,disabled:e.inUpload||e.maxDocs!=0&&e.files.length>=e.maxDocs},{prepend:t(()=>[r(E,{color:"green",icon:e.inUpload?"mdi-loading":"mdi-upload",class:V(e.inUpload?"mdi-spin":void 0)},null,8,["icon","class"])]),default:t(()=>[s[5]||(s[5]=D(" Téléverser un document ",-1))]),_:1},8,["disabled"])):(p(),f(g,{key:1,class:"my-2",icon:"",size:"x-small",onClick:S,disabled:e.inUpload||e.maxDocs!=0&&e.files.length>=e.maxDocs},{default:t(()=>[r(E,{color:"green",icon:e.inUpload?"mdi-loading":"mdi-upload",class:V(e.inUpload?"mdi-spin":void 0)},null,8,["icon","class"])]),_:1},8,["disabled"]))]),_:1})]),_:1})]),default:t(()=>[r(y,{modelValue:n.value,"onUpdate:modelValue":s[2]||(s[2]=u=>n.value=u),"max-width":"600px"},{default:t(()=>[r(k,{title:"Téléverser un document"},{default:t(()=>[r(x,null,{default:t(()=>[r(w,{onUpdate:s[0]||(s[0]=u=>A.value=u),ref_key:"input",ref:C},null,512)]),_:1}),r(q,null,{default:t(()=>[r(P),r(g,{disabled:A.value==null,onClick:s[1]||(s[1]=u=>{o("upload",A.value),n.value=!1})},{default:t(()=>[...s[6]||(s[6]=[D("Téléverser",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),d.value!=null?(p(),f(y,{key:0,"model-value":d.value!=null,"onUpdate:modelValue":s[4]||(s[4]=u=>d.value=null),"max-width":"600px"},{default:t(()=>[r(k,{title:"Confirmation"},{default:t(()=>[r(x,null,{default:t(()=>[...s[7]||(s[7]=[D(" Le document va être supprimé. ",-1),b("br",null,null,-1),b("br",null,null,-1),D(" Attention, cette opération est irréversible. ",-1)])]),_:1}),r(q,null,{default:t(()=>[r(P),r(g,{color:"red",onClick:s[3]||(s[3]=u=>{o("delete",d.value),d.value=null})},{default:t(()=>[...s[8]||(s[8]=[D("Supprimer",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])):M("",!0)]),_:3},8,["title","subtitle"])}}});export{ee as A,i as C,Y as D,h as S,ae as _,X as a,Q as b};
