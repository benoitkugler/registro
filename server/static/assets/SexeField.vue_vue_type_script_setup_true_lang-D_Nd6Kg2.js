import{u as Pe,r as Ee,M,s as Ue,d as X,t as Be,v as Le,g as Te,j as Ne,V as se,w as qe,q as He,x as Oe,k as Ke,l as ze}from"./VTextarea-CO0IE_yp.js";import{q as We,s as $e,S as je,r as B,G as P,aA as Je,C as ie,D as Ge,c as D,H as Qe,J as E,bx as re,R as ce,c3 as Xe,u as Ye,b as V,O as A,c4 as Ze,c5 as ea,K as aa,cQ as ta,c6 as de,m as _,a1 as ve,c8 as la,F as j,c9 as na,v as ua,A as oa,z as sa,e as ia,d as Y,W as Z,X as ee,f as ae,o as te,B as ra,aQ as ca,cR as J,cS as da,cl as U,a3 as va,Y as fa}from"./VSnackbar--Whjvjaq.js";import{u as ma,m as ha,h as pa}from"./filter-DH6O22m2.js";import{_ as ba}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ya=$e({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...ha({filterKeys:["title"]}),...Be({hideNoData:!0,returnObject:!0}),...aa(Le({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ea({transition:!1})},"VCombobox"),ga=We()({name:"VCombobox",props:ya(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:search":e=>!0,"update:menu":e=>!0},setup(e,u){var ne;let{emit:i,slots:t}=u;const{t:x}=je(),r=B(),m=P(!1),p=P(!0),g=P(!1),C=B(),O=B(),c=P(-1);let K=!1;const{items:fe,transformIn:me,transformOut:he}=Pe(e),{textColorClasses:pe,textColorStyles:be}=Je(()=>{var a;return(a=r.value)==null?void 0:a.color}),o=ie(e,"modelValue",[],a=>me(Ge(a)),a=>{const l=he(a);return e.multiple?l:l[0]??null}),L=Ee(e),T=D(()=>!!(e.chips||t.chip)),w=D(()=>T.value||!!t.selection),F=P(!e.multiple&&!w.value?((ne=o.value[0])==null?void 0:ne.title)??"":""),h=D({get:()=>F.value,set:a=>{var l;if(F.value=a??"",!e.multiple&&!w.value&&(o.value=[M(e,a)]),a&&e.multiple&&((l=e.delimiters)!=null&&l.length)){const d=a.split(new RegExp(`(?:${e.delimiters.join("|")})+`));d.length>1&&(d.forEach(n=>{n=n.trim(),n&&S(M(e,n))}),F.value="")}a||(c.value=-1),p.value=!a}}),ye=D(()=>typeof e.counterValue=="function"?e.counterValue(o.value):typeof e.counterValue=="number"?e.counterValue:e.multiple?o.value.length:h.value.length),{filteredItems:N,getMatches:ge}=ma(e,fe,()=>p.value?"":h.value),I=D(()=>e.hideSelected?N.value.filter(a=>!o.value.some(l=>l.value===a.value)):N.value),q=D(()=>e.hideNoData&&!I.value.length||L.isReadonly.value||L.isDisabled.value),z=ie(e,"menu"),v=D({get:()=>z.value,set:a=>{var l;z.value&&!a&&((l=C.value)!=null&&l.ΨopenChildren.size)||a&&q.value||(z.value=a)}}),le=Qe(()=>v.value?e.closeText:e.openText);E(F,a=>{K?ce(()=>K=!1):m.value&&!v.value&&(v.value=!0),i("update:search",a)}),E(o,a=>{var l;!e.multiple&&!w.value&&(F.value=((l=a[0])==null?void 0:l.title)??"")});const Ve=D(()=>o.value.map(a=>a.value)),W=D(()=>{var l;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&h.value===((l=I.value[0])==null?void 0:l.title))&&I.value.length>0&&!p.value&&!g.value}),$=B(),xe=Ue($,r);function Se(a){K=!0,e.openOnClear&&(v.value=!0)}function ke(){q.value||(v.value=!0)}function Ce(a){q.value||(m.value&&(a.preventDefault(),a.stopPropagation()),v.value=!v.value)}function we(a){var l;a.key!==" "&&de(a)&&((l=r.value)==null||l.focus())}function De(a){var n,f,b,k;if(ta(a)||L.isReadonly.value)return;const l=(n=r.value)==null?void 0:n.selectionStart,d=o.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(a.key)&&a.preventDefault(),["Enter","ArrowDown"].includes(a.key)&&(v.value=!0),["Escape"].includes(a.key)&&(v.value=!1),["Enter","Escape","Tab"].includes(a.key)&&(W.value&&["Enter","Tab"].includes(a.key)&&!o.value.some(s=>{let{value:R}=s;return R===I.value[0].value})&&S(N.value[0]),p.value=!0),a.key==="ArrowDown"&&W.value&&((f=$.value)==null||f.focus("next")),a.key==="Enter"&&h.value&&(S(M(e,h.value)),w.value&&(F.value="")),["Backspace","Delete"].includes(a.key)){if(!e.multiple&&w.value&&o.value.length>0&&!h.value)return S(o.value[0],!1);if(~c.value){a.preventDefault();const s=c.value;S(o.value[c.value],!1),c.value=s>=d-1?d-2:s}else a.key==="Backspace"&&!h.value&&(c.value=d-1);return}if(e.multiple)if(a.key==="ArrowLeft"){if(c.value<0&&l&&l>0)return;const s=c.value>-1?c.value-1:d-1;o.value[s]?c.value=s:(c.value=-1,(b=r.value)==null||b.setSelectionRange(h.value.length,h.value.length))}else if(a.key==="ArrowRight"){if(c.value<0)return;const s=c.value+1;o.value[s]?c.value=s:(c.value=-1,(k=r.value)==null||k.setSelectionRange(0,0))}else~c.value&&de(a)&&(c.value=-1)}function Fe(){var a;e.eager&&((a=O.value)==null||a.calculateVisibleItems())}function Ie(){var a;m.value&&(p.value=!0,(a=r.value)==null||a.focus())}function S(a){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!a||a.props.disabled))if(e.multiple){const d=o.value.findIndex(f=>(e.valueComparator||re)(f.value,a.value)),n=l??!~d;if(~d){const f=n?[...o.value,a]:[...o.value];f.splice(d,1),o.value=f}else n&&(o.value=[...o.value,a]);e.clearOnSelect&&(h.value="")}else{const d=l!==!1;o.value=d?[a]:[],F.value=d&&!w.value?a.title:"",ce(()=>{v.value=!1,p.value=!0})}}function Re(a){m.value=!0,setTimeout(()=>{g.value=!0})}function Ae(a){g.value=!1}function _e(a){(a==null||a===""&&!e.multiple&&!w.value)&&(o.value=[])}return E(m,(a,l)=>{if(!(a||a===l)&&(c.value=-1,v.value=!1,h.value)){if(e.multiple){S(M(e,h.value));return}if(!w.value)return;o.value.some(d=>{let{title:n}=d;return n===h.value})?F.value="":S(M(e,h.value))}}),E(v,()=>{if(!e.hideSelected&&v.value&&o.value.length){const a=I.value.findIndex(l=>o.value.some(d=>(e.valueComparator||re)(d.value,l.value)));Xe&&window.requestAnimationFrame(()=>{var l;a>=0&&((l=O.value)==null||l.scrollToIndex(a))})}}),E(()=>e.items,(a,l)=>{v.value||m.value&&!l.length&&a.length&&(v.value=!0)}),Ye(()=>{const a=!!(!e.hideNoData||I.value.length||t["prepend-item"]||t["append-item"]||t["no-data"]),l=o.value.length>0,d=X.filterProps(e);return V(X,A({ref:r},d,{modelValue:h.value,"onUpdate:modelValue":[n=>h.value=n,_e],focused:m.value,"onUpdate:focused":n=>m.value=n,validationValue:o.externalValue,counterValue:ye.value,dirty:l,class:["v-combobox",{"v-combobox--active-menu":v.value,"v-combobox--chips":!!e.chips,"v-combobox--selection-slot":!!w.value,"v-combobox--selecting-index":c.value>-1,[`v-combobox--${e.multiple?"multiple":"single"}`]:!0},e.class],style:e.style,readonly:L.isReadonly.value,placeholder:l?void 0:e.placeholder,"onClick:clear":Se,"onMousedown:control":ke,onKeydown:De}),{...t,default:()=>_(j,null,[V(Te,A({ref:C,modelValue:v.value,"onUpdate:modelValue":n=>v.value=n,activator:"parent",contentClass:"v-combobox__content",disabled:q.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:Fe,onAfterLeave:Ie},e.menuProps),{default:()=>[a&&V(Ne,A({ref:$,selected:Ve.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:n=>n.preventDefault(),onKeydown:we,onFocusin:Re,onFocusout:Ae,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},xe,e.listProps),{default:()=>{var n,f,b;return[(n=t["prepend-item"])==null?void 0:n.call(t),!I.value.length&&!e.hideNoData&&(((f=t["no-data"])==null?void 0:f.call(t))??V(se,{key:"no-data",title:x(e.noDataText)},null)),V(qe,{ref:O,renderless:!0,items:I.value,itemKey:"value"},{default:k=>{var oe;let{item:s,index:R,itemRef:y}=k;const ue=A(s.props,{ref:y,key:s.value,active:W.value&&R===0?!0:void 0,onClick:()=>S(s,null)});return((oe=t.item)==null?void 0:oe.call(t,{item:s,index:R,props:ue}))??V(se,A(ue,{role:"option"}),{prepend:H=>{let{isSelected:Me}=H;return _(j,null,[e.multiple&&!e.hideSelected?V(He,{key:s.value,modelValue:Me,ripple:!1,tabindex:"-1"},null):void 0,s.props.prependAvatar&&V(Oe,{image:s.props.prependAvatar},null),s.props.prependIcon&&V(ve,{icon:s.props.prependIcon},null)])},title:()=>{var H;return p.value?s.title:pa("v-combobox",s.title,(H=ge(s))==null?void 0:H.title)}})}}),(b=t["append-item"])==null?void 0:b.call(t)]}})]}),o.value.map((n,f)=>{function b(y){y.stopPropagation(),y.preventDefault(),S(n,!1)}const k={"onClick:close":b,onKeydown(y){y.key!=="Enter"&&y.key!==" "||(y.preventDefault(),y.stopPropagation(),b(y))},onMousedown(y){y.preventDefault(),y.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},s=T.value?!!t.chip:!!t.selection,R=s?na(T.value?t.chip({item:n,index:f,props:k}):t.selection({item:n,index:f})):void 0;if(!(s&&!R))return _("div",{key:n.value,class:oa(["v-combobox__selection",f===c.value&&["v-combobox__selection--selected",pe.value]]),style:ua(f===c.value?be.value:{})},[T.value?t.chip?V(sa,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:n.title}}},{default:()=>[R]}):V(Ke,A({key:"chip",closable:e.closableChips,size:"small",text:n.title,disabled:n.props.disabled},k),null):R??_("span",{class:"v-combobox__selection-text"},[n.title,e.multiple&&f<o.value.length-1&&_("span",{class:"v-combobox__selection-comma"},[ia(",")])])])})]),"append-inner":function(){var k,s;for(var n=arguments.length,f=new Array(n),b=0;b<n;b++)f[b]=arguments[b];return _(j,null,[(k=t["append-inner"])==null?void 0:k.call(t,...f),(!e.hideNoData||e.items.length)&&e.menuIcon?V(ve,{class:"v-combobox__menu-icon",color:(s=r.value)==null?void 0:s.fieldIconColor,icon:e.menuIcon,onMousedown:Ce,onClick:la,"aria-label":x(le.value),title:x(le.value),tabindex:"-1"},null):void 0])}})}),Ze({isFocused:m,isPristine:p,menu:v,search:h,selectionIndex:c,filteredItems:N,select:S},r)}}),Da=Y({__name:"StringList",props:Z({label:{},formatter:{type:Function},hideDetails:{type:Boolean},readonly:{type:Boolean},rule:{type:Function}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const u=e,i=ee(e,"modelValue");function t(r){r=r||[];const m=u.formatter??(p=>p);i.value=r.map(m)}function x(r){return u.rule(r)}return(r,m)=>(te(),ae(ga,{variant:"outlined",density:"compact",label:u.label,chips:"",multiple:"","closable-chips":"",modelValue:i.value,"onUpdate:modelValue":[m[0]||(m[0]=p=>i.value=p),t],rules:u.rule?[x]:void 0},null,8,["label","modelValue","rules"]))}}),Va=Y({__name:"DateNaissanceField",props:Z({label:{},hideDetails:{type:Boolean},readonly:{type:Boolean},error:{},rule:{type:Function}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const u=e,i=ee(e,"modelValue"),t=ra(),x=B(ca(i.value)?"":t.parseISO(i.value).toLocaleDateString());function r(g){g=da(g),x.value=g;const C=J(g);C!==void 0&&(i.value=C)}function m(){J(x.value)===void 0&&(i.value="0001-01-01")}function p(g){if(!g.length)return u.rule("0001-01-01");const C=J(g);return C===void 0?!1:u.rule(C)}return(g,C)=>(te(),ae(X,{class:"center-text",variant:"outlined",density:"compact",placeholder:"JJ/MM/AAAA",label:u.label||"Date de naissance","model-value":x.value,"onUpdate:modelValue":r,readonly:u.readonly,rules:u.rule?[p]:void 0,"hide-details":u.hideDetails,onBlur:m},null,8,["label","model-value","readonly","rules","hide-details"]))}}),Fa=ba(Va,[["__scopeId","data-v-fb288a49"]]),G={Autre:0,Francaise:1,Suisse:2},Ia={[G.Autre]:"Autre",[G.Francaise]:"Française",[G.Suisse]:"Suisse"},Q={NoSexe:0,Woman:1,Man:2},xa={[Q.NoSexe]:"",[Q.Woman]:"Femme",[Q.Man]:"Homme"};class Ra{constructor(u,i){this.baseURL=u,this.authToken=i}getHeaders(){return{Authorization:"Bearer "+this.authToken}}async ConfirmeInscription(u){const i=this.baseURL+"/inscription/confirme";this.startRequest();try{return await U.get(i,{headers:this.getHeaders(),params:{"insc-token":u["insc-token"]}}),!0}catch(t){this.handleError(t)}}async GetCamps(){const u=this.baseURL+"/api/v1/inscription/camps";this.startRequest();try{return(await U.get(u,{headers:this.getHeaders()})).data}catch(i){this.handleError(i)}}async InitInscription(u){const i=this.baseURL+"/api/v1/inscription";this.startRequest();try{return(await U.get(i,{headers:this.getHeaders(),params:{preinscription:u.preinscription}})).data}catch(t){this.handleError(t)}}async SaveInscription(u){const i=this.baseURL+"/api/v1/inscription";this.startRequest();try{return await U.put(i,u,{headers:this.getHeaders()}),!0}catch(t){this.handleError(t)}}async SearchHistory(u){const i=this.baseURL+"/api/v1/inscription/search";this.startRequest();try{return(await U.get(i,{headers:this.getHeaders(),params:{mail:u.mail}})).data}catch(t){this.handleError(t)}}}const Aa=Y({__name:"SexeField",props:Z({hideDetails:{type:Boolean},readonly:{type:Boolean},rules:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const u=e,i=ee(e,"modelValue"),t=va(xa);return(x,r)=>(te(),ae(ze,{label:"Sexe",variant:"outlined",density:"compact",items:fa(t),readonly:u.readonly,"hide-details":u.hideDetails,modelValue:i.value,"onUpdate:modelValue":r[0]||(r[0]=m=>i.value=m),rules:u.rules},null,8,["items","readonly","hide-details","modelValue","rules"]))}});export{Ra as A,Ia as N,Q as S,ga as V,Da as _,Aa as a,Fa as b,G as c};
