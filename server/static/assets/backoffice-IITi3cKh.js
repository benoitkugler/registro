import{d as X,c as F,a as W,F as ae,b as e,w as t,V as Vl,e as b,f as kl,g as L,h as g,i as Cl,t as U,r as _l,j as T,o as V,k as D,l as xl,m as Ze,n as h,p as Pl,q as we,u as _e,s as w,v as Re,x as Ue,y as He,z as Le,A as Ct,B as Ve,I as Ne,C as Gt,M as Kt,D as Xt,E as et,G as wl,H as ze,J as $e,K as ot,L as Ke,N as Fe,O as Me,P as je,Q as Dl,R as he,S as Zt,T as ie,U as St,W as Sl,X as Il,Y as el,Z as Al,_ as $,$ as tl,a0 as Q,a1 as ce,a2 as xe,a3 as ye,a4 as ke,a5 as tt,a6 as ll,a7 as Ae,a8 as Pe,a9 as Ml,aa as Oe,ab as $l,ac as Ul,ad as Fl,ae as Rl,af as _t,ag as lt,ah as Ll,ai as It,aj as hl,ak as El,al as Tl,am as At,an as Ol,ao as Nl,ap as Bl,aq as jl,ar as ql,as as Yl,at as Hl,au as zl,av as Ql,aw as Wl,ax as Mt,ay as $t,az as yt,aA as al,aB as Jl,aC as Gl,aD as bt,aE as Kl,aF as Xl,aG as Ee,aH as Zl,aI as Xe,aJ as ea,aK as ta,aL as la,aM as aa,aN as na,aO as ua,aP as Ut,aQ as pt,aR as ia,aS as sa,aT as oa,aU as ra,aV as Ft,aW as Rt,aX as da,aY as ma,aZ as ct,a_ as ca,a$ as Lt,b0 as va,b1 as pa,b2 as ht,b3 as fa,b4 as ya,b5 as ba}from"./VSnackbar-BIrRpgjn.js";import{c as _,V as ga,u as nt,a as rt,m as nl,b as gt,_ as ut,d as Va,i as Et,e as ka,f as ul,g as Ca,h as it,j as _a,k as xa,l as Pa,n as il,o as wa,p as Da,q as Sa,r as Ia}from"./InscriptionRow.vue_vue_type_script_setup_true_lang-BlqHkiQD.js";import{V as G,a as re,b as q,c as Y,d as fe,e as se,f as ue,g as qe,h as Se,i as Z,j as De,k as Ce,l as Te,m as dt,n as Tt,o as sl,p as ol,q as rl}from"./VTextarea-ZoY5w49v.js";import{_ as Qe,a as Aa,V as Ma,b as $a,c as Ua,d as Ot,e as Nt}from"./VTabs-CYD1-hdr.js";import{_ as We,V as Fa,a as Ra}from"./EventSwitch.vue_vue_type_script_setup_true_lang-C91yEkuq.js";import{_ as xt,V as Bt,a as La,b as ha,c as Ea}from"./SexeField.vue_vue_type_script_setup_true_lang-DUTveJnU.js";import{V as at}from"./FileCard.vue_vue_type_script_setup_true_lang-CEzBY5f9.js";import{_ as Ta}from"./FilesRow.vue_vue_type_script_setup_true_lang-BnqDNgR5.js";import{V as Oa}from"./VForm-DGXL2IjR.js";import"./VSheet-CW0ileyl.js";import"./VWindowItem-CNi4e_UD.js";const vt=X({__name:"NavBar",props:{title:{},hideMenu:{type:Boolean}},setup(l){const s="/static/repere/logo.png",o="v0.6.0",m=l,a=F(()=>_.isFondsSoutien);return(i,c)=>(V(),W(ae,null,[e(ga,{app:"","model-value":!m.hideMenu,"expand-on-hover":"",permanent:"",rail:""},{append:t(()=>[e(G,{"prepend-icon":"mdi-account-circle-outline",title:a.value?"Fonds de soutien":"Administrateur"},null,8,["title"]),e(G,{"prepend-icon":"mdi-logout",link:"",to:{path:"/"},color:"primary"},{default:t(()=>[...c[3]||(c[3]=[b(" Se déconnecter ",-1)])]),_:1})]),default:t(()=>[e(G,{"prepend-icon":"mdi-menu",title:`Registro ${o}`},null,8,["title"]),e(re),e(G,{"prepend-icon":"mdi-bed",link:"",to:{path:"/camps"},color:"primary"},{default:t(()=>[...c[0]||(c[0]=[b(" Séjours ",-1)])]),_:1}),e(G,{"prepend-icon":"mdi-calendar-multiple-check",link:"",to:{path:"/inscriptions"},color:"primary"},{default:t(()=>[...c[1]||(c[1]=[b(" Inscriptions ",-1)])]),_:1}),e(re),e(G,{"prepend-icon":"mdi-account-multiple",link:"",to:{path:"/annuaire"},color:"primary"},{default:t(()=>[...c[2]||(c[2]=[b(" Annuaire ",-1)])]),_:1}),e(re)]),_:1},8,["model-value"]),e(Vl,{rounded:"",elevation:"4",color:"secondary"},{append:t(()=>[_l(i.$slots,"default"),c[4]||(c[4]=T("div",{class:"mr-2"},null,-1))]),default:t(()=>[e(kl,null,{default:t(()=>[e(L,null,{default:t(()=>[e(g,{"align-self":"center",cols:"auto"},{default:t(()=>[e(Cl,{width:"60",src:s})]),_:1}),e(g,{"align-self":"center"},{default:t(()=>[b(U(m.title),1)]),_:1})]),_:1})]),_:1})]),_:3})],64))}}),Na=X({__name:"index",setup(l){const s=nt(),o=D(!1),m=D(""),a=D([]);async function i(){const c=await _.Loggin({password:m.value});c!==void 0&&(c.IsValid?(_.setToken(c.Token,c.IsFondSoutien),_.showMessage("Bienvenue !"),s.push({path:"/inscriptions"})):a.value=["Clé de connection incorrecte."])}return(c,n)=>(V(),W(ae,null,[e(vt,{title:"Connection au backoffice","hide-menu":""}),e(Pl,{class:"fill-height"},{default:t(()=>[e(q,{class:"mx-auto",width:"400px"},{default:t(()=>[e(Y,null,{default:t(()=>[e(fe,{label:"Clé de connection",modelValue:m.value,"onUpdate:modelValue":n[1]||(n[1]=d=>m.value=d),"error-messages":a.value,type:o.value?void 0:"password",name:"password",onKeydown:n[2]||(n[2]=xl(Ze(()=>m.value.length==0?null:i(),["prevent"]),["enter"]))},{"append-inner":t(()=>[e(h,{class:"ml-2",size:"small",icon:o.value?"mdi-eye":"mdi-eye-off",flat:"",onClick:n[0]||(n[0]=d=>o.value=!o.value)},null,8,["icon"])]),_:1},8,["modelValue","error-messages","type"])]),_:1}),e(se,null,{default:t(()=>[e(ue),e(h,{disabled:!m.value.length,onClick:i},{default:t(()=>[...n[3]||(n[3]=[b("Se connecter",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})],64))}}),Pt=X({__name:"BoolField",props:we({label:{},hideDetails:{type:Boolean},readonly:{type:Boolean},density:{},persistentHint:{type:Boolean},hint:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=l,o=_e(l,"modelValue");return(m,a)=>(V(),w(qe,{label:s.label,"model-value":o.value,"onUpdate:modelValue":a[0]||(a[0]=i=>o.value=i||!1),"hide-details":s.hideDetails,readonly:s.readonly,density:s.density,"persistent-hint":s.persistentHint,hint:s.hint},null,8,["label","model-value","hide-details","readonly","density","persistent-hint","hint"]))}}),dl=Ue({active:{type:[String,Array],default:void 0},controlHeight:[Number,String],disabled:{type:[Boolean,String,Array],default:null},nextIcon:{type:Ne,default:"$next"},prevIcon:{type:Ne,default:"$prev"},modeIcon:{type:Ne,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),jt=Re()({name:"VDatePickerControls",props:dl(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(l,s){let{emit:o}=s;const{t:m}=He(),a=F(()=>Array.isArray(l.disabled)?l.disabled.includes("text"):!!l.disabled),i=F(()=>Array.isArray(l.disabled)?l.disabled.includes("mode"):!!l.disabled),c=F(()=>Array.isArray(l.disabled)?l.disabled.includes("prev"):!!l.disabled),n=F(()=>Array.isArray(l.disabled)?l.disabled.includes("next"):!!l.disabled);function d(){o("click:prev")}function u(){o("click:next")}function r(){o("click:year")}function f(){o("click:month")}return Le(()=>T("div",{class:Ve(["v-date-picker-controls"]),style:{"--v-date-picker-controls-height":Ct(l.controlHeight)}},[e(h,{class:"v-date-picker-controls__month-btn","data-testid":"month-btn",disabled:a.value,text:l.text,variant:"text",rounded:!0,onClick:f},null),e(h,{class:"v-date-picker-controls__mode-btn","data-testid":"year-btn",disabled:i.value,density:"comfortable",icon:l.modeIcon,variant:"text","aria-label":m("$vuetify.datePicker.ariaLabel.selectYear"),onClick:r},null),e(ue,null,null),T("div",{class:"v-date-picker-controls__month"},[e(h,{"data-testid":"prev-month",disabled:c.value,density:"comfortable",icon:l.prevIcon,variant:"text","aria-label":m("$vuetify.datePicker.ariaLabel.previousMonth"),onClick:d},null),e(h,{"data-testid":"next-month",disabled:n.value,icon:l.nextIcon,density:"comfortable",variant:"text","aria-label":m("$vuetify.datePicker.ariaLabel.nextMonth"),onClick:u},null)])])),{}}}),Ba=Ue({appendIcon:Ne,color:String,header:String,transition:String,onClick:wl()},"VDatePickerHeader"),qt=Re()({name:"VDatePickerHeader",props:Ba(),emits:{click:()=>!0,"click:append":()=>!0},setup(l,s){let{emit:o,slots:m}=s;const{backgroundColorClasses:a,backgroundColorStyles:i}=Gt(()=>l.color);function c(){o("click")}function n(){o("click:append")}return Le(()=>{const d=!!(m.default||l.header),u=!!(m.append||l.appendIcon);return T("div",{class:Ve(["v-date-picker-header",{"v-date-picker-header--clickable":!!l.onClick},a.value]),style:et(i.value),onClick:c},[m.prepend&&T("div",{key:"prepend",class:"v-date-picker-header__prepend"},[m.prepend()]),d&&e(Kt,{key:"content",name:l.transition},{default:()=>[T("div",{key:l.header,class:"v-date-picker-header__content"},[m.default?.()??l.header])]}),u&&T("div",{class:"v-date-picker-header__append"},[m.append?e(Xt,{key:"append-defaults",disabled:!l.appendIcon,defaults:{VBtn:{icon:l.appendIcon,variant:"text"}}},{default:()=>[m.append?.()]}):e(h,{key:"append-btn",icon:l.appendIcon,variant:"text",onClick:n},null)])])}),{}}}),ja=Ue({allowedDates:[Array,Function],disabled:{type:Boolean,default:null},displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:{type:[Number,String],default:void 0},firstDayOfYear:{type:[Number,String],default:void 0},weekdayFormat:String},"calendar");function qa(l){const s=ze(),o=$e(l,"modelValue",[],C=>ot(C).map(p=>s.date(p))),m=F(()=>l.displayValue?s.date(l.displayValue):o.value.length>0?s.date(o.value[0]):l.min?s.date(l.min):Array.isArray(l.allowedDates)?s.date(l.allowedDates[0]):s.date()),a=$e(l,"year",void 0,C=>{const p=C!=null?Number(C):s.getYear(m.value);return s.startOfYear(s.setYear(s.date(),p))},C=>s.getYear(C)),i=$e(l,"month",void 0,C=>{const p=C!=null?Number(C):s.getMonth(m.value),I=s.setYear(s.startOfMonth(s.date()),s.getYear(a.value));return s.setMonth(I,p)},C=>s.getMonth(C)),c=F(()=>{const C=s.toJsDate(s.startOfWeek(s.date(),l.firstDayOfWeek)).getDay();return s.getWeekdays(l.firstDayOfWeek,l.weekdayFormat).filter((p,I)=>l.weekdays.includes((I+C)%7))}),n=F(()=>{const C=s.getWeekArray(i.value,l.firstDayOfWeek),p=C.flat(),I=6*7;if(l.weeksInMonth==="static"&&p.length<I){const k=p[p.length-1];let A=[];for(let j=1;j<=I-p.length;j++)A.push(s.addDays(k,j)),j%7===0&&(C.push(A),A=[])}return C});function d(C,p){return C.filter(I=>l.weekdays.includes(s.toJsDate(I).getDay())).map((I,k)=>{const A=s.toISO(I),j=!s.isSameMonth(I,i.value),B=s.isSameDay(I,s.startOfMonth(i.value)),x=s.isSameDay(I,s.endOfMonth(i.value)),P=s.isSameDay(I,i.value),ee=l.weekdays.length;return{date:I,formatted:s.format(I,"keyboardDate"),isAdjacent:j,isDisabled:v(I),isEnd:x,isHidden:j&&!l.showAdjacentMonths,isSame:P,isSelected:o.value.some(ge=>s.isSameDay(I,ge)),isStart:B,isToday:s.isSameDay(I,p),isWeekEnd:k%ee===ee-1,isWeekStart:k%ee===0,isoDate:A,localized:s.format(I,"dayOfMonth"),month:s.getMonth(I),year:s.getYear(I)}})}const u=F(()=>{const C=s.startOfWeek(m.value,l.firstDayOfWeek),p=[];for(let k=0;k<=6;k++)p.push(s.addDays(C,k));const I=s.date();return d(p,I)}),r=F(()=>{const C=n.value.flat(),p=s.date();return d(C,p)}),f=F(()=>n.value.map(C=>C.length?s.getWeek(C[0],l.firstDayOfWeek,l.firstDayOfYear):null));function v(C){if(l.disabled)return!0;const p=s.date(C);return l.min&&s.isBefore(s.endOfDay(p),s.date(l.min))||l.max&&s.isAfter(p,s.date(l.max))?!0:Array.isArray(l.allowedDates)&&l.allowedDates.length>0?!l.allowedDates.some(I=>s.isSameDay(s.date(I),p)):typeof l.allowedDates=="function"?!l.allowedDates(p):!1}return{displayValue:m,daysInMonth:r,daysInWeek:u,genDays:d,model:o,weeksInMonth:n,weekdayLabels:c,weekNumbers:f}}const ml=Ue({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...je(ja(),["displayValue"])},"VDatePickerMonth"),Yt=Re()({name:"VDatePickerMonth",props:ml(),emits:{"update:modelValue":l=>!0,"update:month":l=>!0,"update:year":l=>!0},setup(l,s){let{emit:o,slots:m}=s;const a=D(),{t:i}=He(),{daysInMonth:c,model:n,weekNumbers:d,weekdayLabels:u}=qa(l),r=ze(),f=Ke(),v=Ke(),C=Ke(!1),p=Fe(()=>C.value?l.reverseTransition:l.transition);l.multiple==="range"&&n.value.length>0&&(f.value=n.value[0],n.value.length>1&&(v.value=n.value[n.value.length-1]));const I=F(()=>{const x=["number","string"].includes(typeof l.multiple)?Number(l.multiple):1/0;return n.value.length>=x});Me(c,(x,P)=>{P&&(C.value=r.isBefore(x[0].date,P[0].date))});function k(x){const P=r.startOfDay(x);if(n.value.length===0?f.value=void 0:n.value.length===1&&(f.value=n.value[0],v.value=void 0),!f.value)f.value=P,n.value=[f.value];else if(v.value)f.value=x,v.value=void 0,n.value=[f.value];else{if(r.isSameDay(P,f.value)){f.value=void 0,n.value=[];return}else r.isBefore(P,f.value)?(v.value=r.endOfDay(f.value),f.value=P):v.value=r.endOfDay(P);n.value=Dl(r,f.value,v.value)}}function A(x){const P=r.format(x.date,"fullDateWithWeekday"),ee=x.isToday?"currentDate":"selectDate";return i(`$vuetify.datePicker.ariaLabel.${ee}`,P)}function j(x){const P=n.value.findIndex(ee=>r.isSameDay(ee,x));if(P===-1)n.value=[...n.value,x];else{const ee=[...n.value];ee.splice(P,1),n.value=ee}}function B(x){l.multiple==="range"?k(x):l.multiple?j(x):n.value=[x]}Le(()=>T("div",{class:"v-date-picker-month",style:{"--v-date-picker-days-in-week":l.weekdays.length}},[l.showWeek&&T("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!l.hideWeekdays&&T("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[b(" ")]),d.value.map(x=>T("div",{class:Ve(["v-date-picker-month__day","v-date-picker-month__day--adjacent"])},[x]))]),e(Kt,{name:p.value},{default:()=>[T("div",{ref:a,key:c.value[0].date?.toString(),class:"v-date-picker-month__days"},[!l.hideWeekdays&&u.value.map(x=>T("div",{class:Ve(["v-date-picker-month__day","v-date-picker-month__weekday"])},[x])),c.value.map((x,P)=>{const ee={props:{class:"v-date-picker-month__day-btn",color:x.isSelected||x.isToday?l.color:void 0,disabled:x.isDisabled,icon:!0,ripple:!1,text:x.localized,variant:x.isSelected?"flat":x.isToday?"outlined":"text","aria-label":A(x),"aria-current":x.isToday?"date":void 0,onClick:()=>B(x.date)},item:x,i:P};return I.value&&!x.isSelected&&(x.isDisabled=!0),T("div",{class:Ve(["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":x.isAdjacent,"v-date-picker-month__day--hide-adjacent":x.isHidden,"v-date-picker-month__day--selected":x.isSelected,"v-date-picker-month__day--week-end":x.isWeekEnd,"v-date-picker-month__day--week-start":x.isWeekStart}]),"data-v-date":x.isDisabled?void 0:x.isoDate},[(l.showAdjacentMonths||!x.isAdjacent)&&(m.day?.(ee)??e(h,ee.props,null))])})])]})]))}}),cl=Ue({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number,allowedMonths:[Array,Function]},"VDatePickerMonths"),Ht=Re()({name:"VDatePickerMonths",props:cl(),emits:{"update:modelValue":l=>!0},setup(l,s){let{emit:o,slots:m}=s;const a=ze(),i=$e(l,"modelValue"),c=F(()=>{let d=a.startOfYear(a.date());return l.year&&(d=a.setYear(d,l.year)),he(12).map(u=>{const r=a.format(d,"monthShort"),f=a.format(d,"month"),v=!!(!n(u)||l.min&&a.isAfter(a.startOfMonth(a.date(l.min)),d)||l.max&&a.isAfter(d,a.startOfMonth(a.date(l.max))));return d=a.getNextMonth(d),{isDisabled:v,text:r,label:f,value:u}})});Zt(()=>{i.value=i.value??a.getMonth(a.date())});function n(d){return Array.isArray(l.allowedMonths)&&l.allowedMonths.length?l.allowedMonths.includes(d):typeof l.allowedMonths=="function"?l.allowedMonths(d):!0}return Le(()=>T("div",{class:"v-date-picker-months",style:{height:Ct(l.height)}},[T("div",{class:"v-date-picker-months__content"},[c.value.map((d,u)=>{const r={active:i.value===u,ariaLabel:d.label,color:i.value===u?l.color:void 0,disabled:d.isDisabled,rounded:!0,text:d.text,variant:i.value===d.value?"flat":"text",onClick:()=>f(u)};function f(v){if(i.value===v){o("update:modelValue",i.value);return}i.value=v}return m.month?.({month:d,i:u,props:r})??e(h,ie({key:"month"},r),null)})])])),{}}}),vl=Ue({color:String,height:[String,Number],min:null,max:null,modelValue:Number,allowedYears:[Array,Function]},"VDatePickerYears"),zt=Re()({name:"VDatePickerYears",props:vl(),directives:{vIntersect:St},emits:{"update:modelValue":l=>!0},setup(l,s){let{emit:o,slots:m}=s;const a=ze(),i=$e(l,"modelValue"),c=F(()=>{const r=a.getYear(a.date());let f=r-100,v=r+52;l.min&&(f=a.getYear(a.date(l.min))),l.max&&(v=a.getYear(a.date(l.max)));let C=a.startOfYear(a.date());return C=a.setYear(C,f),he(v-f+1,f).map(p=>{const I=a.format(C,"year");return C=a.setYear(C,a.getYear(C)+1),{text:I,value:p,isDisabled:!u(p)}})});Zt(()=>{i.value=i.value??a.getYear(a.date())});const n=Sl();function d(){n.el?.focus(),n.el?.scrollIntoView({block:"center"})}function u(r){return Array.isArray(l.allowedYears)&&l.allowedYears.length?l.allowedYears.includes(r):typeof l.allowedYears=="function"?l.allowedYears(r):!0}return Le(()=>Il(T("div",{class:"v-date-picker-years",style:{height:Ct(l.height)}},[T("div",{class:"v-date-picker-years__content"},[c.value.map((r,f)=>{const v={ref:i.value===r.value?n:void 0,active:i.value===r.value,color:i.value===r.value?l.color:void 0,rounded:!0,text:r.text,disabled:r.isDisabled,variant:i.value===r.value?"flat":"text",onClick:()=>{if(i.value===r.value){o("update:modelValue",i.value);return}i.value=r.value}};return m.year?.({year:r,i:f,props:v})??e(h,ie({key:"month"},v),null)})])]),[[St,{handler:d},null,{once:!0}]])),{}}}),Ya=Ue({header:{type:String,default:"$vuetify.datePicker.header"},headerColor:String,...dl(),...ml({weeksInMonth:"static"}),...je(cl(),["modelValue"]),...je(vl(),["modelValue"]),...nl({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),Ha=Re()({name:"VDatePicker",props:Ya(),emits:{"update:modelValue":l=>!0,"update:month":l=>!0,"update:year":l=>!0,"update:viewMode":l=>!0},setup(l,s){let{emit:o,slots:m}=s;const a=ze(),{t:i}=He(),{rtlClasses:c}=el(),n=$e(l,"modelValue",void 0,M=>ot(M).map(y=>a.date(y)),M=>l.multiple?M:M[0]),d=$e(l,"viewMode"),u=F(()=>{const M=a.date(l.min);return l.min&&a.isValid(M)?M:null}),r=F(()=>{const M=a.date(l.max);return l.max&&a.isValid(M)?M:null}),f=F(()=>{const M=a.date();let y=M;return n.value?.[0]?y=a.date(n.value[0]):u.value&&a.isBefore(M,u.value)?y=u.value:r.value&&a.isAfter(M,r.value)&&(y=r.value),y&&a.isValid(y)?y:M}),v=Fe(()=>l.headerColor??l.color),C=$e(l,"month"),p=F({get:()=>Number(C.value??a.getMonth(a.startOfMonth(f.value))),set:M=>C.value=M}),I=$e(l,"year"),k=F({get:()=>Number(I.value??a.getYear(a.startOfYear(a.setMonth(f.value,p.value)))),set:M=>I.value=M}),A=Ke(!1),j=F(()=>l.multiple&&n.value.length>1?i("$vuetify.datePicker.itemsSelected",n.value.length):n.value[0]&&a.isValid(n.value[0])?a.format(a.date(n.value[0]),"normalDateWithWeekday"):i(l.header)),B=F(()=>{let M=a.date();return M=a.setDate(M,1),M=a.setMonth(M,p.value),M=a.setYear(M,k.value),a.format(M,"monthAndYear")}),x=Fe(()=>`date-picker-header${A.value?"-reverse":""}-transition`),P=F(()=>{if(l.disabled)return!0;const M=[];if(d.value!=="month")M.push("prev","next");else{let y=a.date();if(y=a.startOfMonth(y),y=a.setMonth(y,p.value),y=a.setYear(y,k.value),u.value){const O=a.addDays(a.startOfMonth(y),-1);a.isAfter(u.value,O)&&M.push("prev")}if(r.value){const O=a.addDays(a.endOfMonth(y),1);a.isAfter(O,r.value)&&M.push("next")}}return M}),ee=F(()=>l.allowedYears||S),ge=F(()=>l.allowedMonths||te);function J(M,y){const O=l.allowedDates;if(typeof O!="function")return!0;const R=a.getDiff(y,M,"days");for(let pe=0;pe<R;pe++)if(O(a.addDays(M,pe)))return!0;return!1}function S(M){if(typeof l.allowedDates=="function"){const y=a.parseISO(`${M}-01-01`);return J(y,a.endOfYear(y))}if(Array.isArray(l.allowedDates)&&l.allowedDates.length){for(const y of l.allowedDates)if(a.getYear(a.date(y))===M)return!0;return!1}return!0}function te(M){if(typeof l.allowedDates=="function"){const y=String(M+1).padStart(2,"0"),O=a.parseISO(`${k.value}-${y}-01`);return J(O,a.endOfMonth(O))}if(Array.isArray(l.allowedDates)&&l.allowedDates.length){for(const y of l.allowedDates)if(a.getYear(a.date(y))===k.value&&a.getMonth(a.date(y))===M)return!0;return!1}return!0}function z(){p.value<11?p.value++:(k.value++,p.value=0,be()),ve()}function N(){p.value>0?p.value--:(k.value--,p.value=11,be()),ve()}function K(){d.value="month"}function oe(){d.value=d.value==="months"?"month":"months"}function le(){d.value=d.value==="year"?"month":"year"}function ve(){d.value==="months"&&oe()}function be(){d.value==="year"&&le()}return Me(n,(M,y)=>{const O=ot(y),R=ot(M);if(!R.length)return;const pe=a.date(O[O.length-1]),ne=a.date(R[R.length-1]),Ie=a.getMonth(ne),E=a.getYear(ne);Ie!==p.value&&(p.value=Ie,ve()),E!==k.value&&(k.value=E,be()),A.value=a.isBefore(pe,ne)}),Le(()=>{const M=rt.filterProps(l),y=jt.filterProps(l),O=qt.filterProps(l),R=Yt.filterProps(l),pe=je(Ht.filterProps(l),["modelValue"]),ne=je(zt.filterProps(l),["modelValue"]),Ie={color:v.value,header:j.value,transition:x.value};return e(rt,ie(M,{color:v.value,class:["v-date-picker",`v-date-picker--${d.value}`,{"v-date-picker--show-week":l.showWeek},c.value,l.class],style:l.style}),{title:()=>m.title?.()??T("div",{class:"v-date-picker__title"},[i(l.title)]),header:()=>m.header?e(Xt,{defaults:{VDatePickerHeader:{...Ie}}},{default:()=>[m.header?.(Ie)]}):e(qt,ie({key:"header"},O,Ie,{onClick:d.value!=="month"?K:void 0}),{prepend:m.prepend,append:m.append}),default:()=>T(ae,null,[e(jt,ie(y,{disabled:P.value,text:B.value,"onClick:next":z,"onClick:prev":N,"onClick:month":oe,"onClick:year":le}),null),e(Al,{hideOnLeave:!0},{default:()=>[d.value==="months"?e(Ht,ie({key:"date-picker-months"},pe,{modelValue:p.value,"onUpdate:modelValue":[E=>p.value=E,ve],min:u.value,max:r.value,year:k.value,allowedMonths:ge.value}),{month:m.month}):d.value==="year"?e(zt,ie({key:"date-picker-years"},ne,{modelValue:k.value,"onUpdate:modelValue":[E=>k.value=E,be],min:u.value,max:r.value,allowedYears:ee.value}),{year:m.year}):e(Yt,ie({key:"date-picker-month"},R,{modelValue:n.value,"onUpdate:modelValue":E=>n.value=E,month:p.value,"onUpdate:month":[E=>p.value=E,ve],year:k.value,"onUpdate:year":[E=>k.value=E,be],min:u.value,max:r.value}),{day:m.day})]})]),actions:m.actions})}),{}}}),za=X({__name:"DateField",props:we({label:{},hideDetails:{type:Boolean},readonly:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=l,o=_e(l,"modelValue"),m=ze();function a(c){i.value=!1,o.value=tl(c)}const i=D(!1);return(c,n)=>s.readonly?(V(),w(fe,{key:0,class:"center-text",variant:"outlined",density:"compact","hide-details":s.hideDetails,label:s.label,"model-value":$(m).parseISO(o.value).toLocaleDateString(),readonly:""},null,8,["hide-details","label","model-value"])):(V(),w(Se,{key:1,"close-on-content-click":!1,modelValue:i.value,"onUpdate:modelValue":n[1]||(n[1]=d=>i.value=d)},{activator:t(({props:d})=>[e(fe,ie({class:"center-text"},d,{variant:"outlined",density:"compact","hide-details":s.hideDetails,label:s.label,"model-value":$(m).parseISO(o.value).toLocaleDateString()}),null,16,["hide-details","label","model-value"])]),default:t(()=>[e(Ha,{"model-value":$(m).parseISO(o.value),"onUpdate:modelValue":n[0]||(n[0]=d=>a(d))},null,8,["model-value"])]),_:1},8,["modelValue"]))}}),pl=xt(za,[["__scopeId","data-v-1e184428"]]),Qa=X({__name:"OptionStatut",props:we({camp:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=l,o=_e(l,"modelValue");function m(){const c=o.value?.length?o.value.map(u=>u.Id):[0],d={Id:Math.max(...c)+1,Label:"",Description:"",Prix:s.camp.Prix.Cent};o.value=(o.value||[]).concat(d),a.value=d}const a=D(null);function i(c){o.value=(o.value||[]).filter(n=>n.Id!=c.Id)}return(c,n)=>{const d=We;return V(),w(q,{subtitle:"Le prix dépend du statut du participant, à choisir parmi la liste ci-dessous."},{append:t(()=>[e(h,{icon:"",size:"x-small",onClick:m},{default:t(()=>[e(ye,{color:"green"},{default:t(()=>[...n[4]||(n[4]=[b("mdi-plus",-1)])]),_:1})]),_:1})]),default:t(()=>[a.value!=null?(V(),w(Z,{key:0,"model-value":a.value!=null,"onUpdate:modelValue":n[3]||(n[3]=u=>a.value=null),"max-width":"500px"},{default:t(()=>[e(q,{title:"Modifier le statut"},{default:t(()=>[e(Y,null,{default:t(()=>[e(L,null,{default:t(()=>[e(g,{cols:"12"},{default:t(()=>[e(fe,{autofocus:"",label:"Statut",modelValue:a.value.Label,"onUpdate:modelValue":n[0]||(n[0]=u=>a.value.Label=u),density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(g,{cols:"12"},{default:t(()=>[e(fe,{label:"Description",modelValue:a.value.Description,"onUpdate:modelValue":n[1]||(n[1]=u=>a.value.Description=u),density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(g,{cols:"12"},{default:t(()=>[e(d,{"model-value":{Cent:a.value.Prix,Currency:s.camp.Prix.Currency},"onUpdate:modelValue":n[2]||(n[2]=u=>a.value.Prix=u.Cent),label:"Prix","readonly-currency":""},null,8,["model-value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])):Q("",!0),e(Y,{class:"py-0"},{default:t(()=>[e(De,null,{default:t(()=>[o.value?.length?Q("",!0):(V(),w(G,{key:0},{default:t(()=>[...n[5]||(n[5]=[T("i",null,"Aucun statut n'est encore défini.",-1)])]),_:1})),(V(!0),W(ae,null,ce(o.value,u=>(V(),w(G,{title:u.Label,subtitle:u.Description,onClick:r=>a.value=u},{append:t(()=>[e(L,null,{default:t(()=>[e(g,{"align-self":"center"},{default:t(()=>[e(Ce,null,{default:t(()=>[b(U($(xe).montant({Cent:u.Prix,Currency:l.camp.Prix.Currency})),1)]),_:2},1024)]),_:2},1024),e(g,{"align-self":"center",cols:"auto"},{default:t(()=>[e(h,{icon:"",size:"x-small",class:"my-1",onClick:Ze(r=>i(u),["stop"])},{default:t(()=>[e(ye,{color:"red"},{default:t(()=>[...n[6]||(n[6]=[b("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["title","subtitle","onClick"]))),256))]),_:1})]),_:1})]),_:1})}}}),Wa=X({__name:"OptionJournee",props:we({camp:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=l,o=_e(l,"modelValue");Me(()=>o.value,m,{immediate:!0});function m(){const i=s.camp.Duree;o.value?.length!=i&&(o.value=Array.from({length:i}).map(c=>0))}function a(){const i=o.value,c=i[0];for(let n=0;n<i.length;n++)i[n]=c}return(i,c)=>{const n=We;return V(),w(q,{subtitle:"Le prix est variable en fonction des jours de participation au camp."},{append:t(()=>[e(at,{text:"Appliquer le prix du premier jour à tous."},{activator:t(({props:d})=>[e(h,ie(d,{icon:"mdi-arrow-expand",size:"x-small",disabled:!(o.value||[])[0],onClick:a}),null,16,["disabled"])]),_:1})]),default:t(()=>[e(Y,null,{default:t(()=>[e(L,null,{default:t(()=>[(V(!0),W(ae,null,ce(o.value,(d,u)=>(V(),w(g,{cols:"3"},{default:t(()=>[e(n,{label:`Jour ${u+1}`,"model-value":{Cent:d,Currency:s.camp.Prix.Currency},"onUpdate:modelValue":r=>o.value[u]=r.Cent,"readonly-currency":""},null,8,["label","model-value","onUpdate:modelValue"])]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})}}}),Ja={key:0,class:"text-center"},Ga=X({__name:"CampOptionsPrix",props:we({camp:{}},{optionPrix:{required:!0},optionPrixModifiers:{},optionQf:{required:!0},optionQfModifiers:{}}),emits:["update:optionPrix","update:optionQf"],setup(l){const s=l,o=_e(l,"optionPrix"),m=_e(l,"optionQf"),a=F(()=>ke.isQuotientFamilialActive(m.value)),i=tt(ll);return(c,n)=>{const d=Qe;return V(),w(q,{title:"Options sur le prix",subtitle:"Permet de modifier le prix de base du séjour",width:"1000px"},{default:t(()=>[e(Y,null,{default:t(()=>[e(L,null,{default:t(()=>[e(g,{"align-self":"center"},{default:t(()=>[e(qe,{"model-value":a.value,"onUpdate:modelValue":n[0]||(n[0]=u=>m.value[3]=u?100:0),"hide-details":"",label:"Prix au quotient familial"},null,8,["model-value"])]),_:1}),e(g,{"align-self":"center"},{default:t(()=>[e(d,{suffix:"%",min:0,max:100,disabled:!a.value,"hide-details":"","readonly-currency":"",label:"entre 1 et 359",modelValue:m.value[0],"onUpdate:modelValue":n[1]||(n[1]=u=>m.value[0]=u)},null,8,["disabled","modelValue"])]),_:1}),e(g,{"align-self":"center"},{default:t(()=>[e(d,{suffix:"%",min:0,max:100,disabled:!a.value,"hide-details":"","readonly-currency":"",label:"entre 360 et 564",modelValue:m.value[1],"onUpdate:modelValue":n[2]||(n[2]=u=>m.value[1]=u)},null,8,["disabled","modelValue"])]),_:1}),e(g,{"align-self":"center"},{default:t(()=>[e(d,{suffix:"%",min:0,max:100,disabled:!a.value,"hide-details":"","readonly-currency":"",label:"entre 565 et 714",modelValue:m.value[2],"onUpdate:modelValue":n[3]||(n[3]=u=>m.value[2]=u)},null,8,["disabled","modelValue"])]),_:1}),e(g,{"align-self":"center"},{default:t(()=>[e(d,{suffix:"%",min:0,max:100,disabled:!0,"hide-details":"","readonly-currency":"",label:"plus de 715",modelValue:m.value[3],"onUpdate:modelValue":n[4]||(n[4]=u=>m.value[3]=u)},null,8,["modelValue"])]),_:1})]),_:1}),e(re,{thickness:"1",class:"my-2"}),e(L,{class:"my-2"},{default:t(()=>[e(g,{"align-self":"center",cols:"4"},{default:t(()=>[e(Te,{variant:"outlined",density:"comfortable","hide-details":"",items:$(i),label:"Option sur le prix",modelValue:o.value.Active,"onUpdate:modelValue":n[5]||(n[5]=u=>o.value.Active=u)},null,8,["items","modelValue"])]),_:1}),e(g,{"align-self":"center"},{default:t(()=>[o.value.Active==$(Ae).NoOption?(V(),W("div",Ja,[...n[8]||(n[8]=[T("i",null,"Aucune modification sur le prix de base.",-1)])])):o.value.Active==$(Ae).PrixStatut?(V(),w(Qa,{key:1,camp:s.camp,modelValue:o.value.Statuts,"onUpdate:modelValue":n[6]||(n[6]=u=>o.value.Statuts=u)},null,8,["camp","modelValue"])):o.value.Active==$(Ae).PrixJour?(V(),w(Wa,{key:2,camp:s.camp,modelValue:o.value.Jours,"onUpdate:modelValue":n[7]||(n[7]=u=>o.value.Jours=u)},null,8,["camp","modelValue"])):Q("",!0)]),_:1})]),_:1})]),_:1})]),_:1})}}}),Ka=X({__name:"CampMetaEdit",props:we({metaEntriesHints:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=l,o=_e(l,"modelValue"),m=D(Object.entries(o.value||{}));function a(){const i=Object.fromEntries(m.value);o.value=i}return F(()=>{const i=m.value.map(n=>n[0]);return i.includes("")?!0:new Set(i).size!=m.value.length}),(i,c)=>(V(),w(q,{subtitle:"Métadonnées exposées sur l'API publique"},{append:t(()=>[e(h,{size:"small",class:"ml-2",onClick:c[0]||(c[0]=n=>{m.value.push(["",""]),a()})},{prepend:t(()=>[e(ye,{color:"green"},{default:t(()=>[...c[1]||(c[1]=[b("mdi-plus",-1)])]),_:1})]),default:t(()=>[c[2]||(c[2]=b(" Ajouter une valeur",-1))]),_:1})]),default:t(()=>[e(Y,{class:"pt-2"},{default:t(()=>[(V(!0),W(ae,null,ce(m.value,(n,d)=>(V(),w(L,null,{default:t(()=>[e(g,{cols:"4"},{default:t(()=>[e(Bt,{variant:"outlined",density:"compact","hide-details":"",label:"Clé",modelValue:n[0],"onUpdate:modelValue":[u=>n[0]=u,a],autofocus:"",items:s.metaEntriesHints.keys},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),e(g,null,{default:t(()=>[e(Bt,{variant:"outlined",density:"compact","hide-details":"",label:"Valeur",modelValue:n[1],"onUpdate:modelValue":[u=>n[1]=u,a],items:s.metaEntriesHints.values},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024),e(g,{cols:"auto"},{default:t(()=>[e(h,{icon:"",size:"small",flat:"",onClick:u=>{m.value.splice(d,1),a()}},{default:t(()=>[e(ye,{color:"red"},{default:t(()=>[...c[3]||(c[3]=[b("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1}))}}),Xa=X({__name:"CampEdit",props:{camp:{},metaEntriesHints:{}},emits:["save"],setup(l,{emit:s}){const o=l,m=s,a=D(Pe(o.camp)),i=F(()=>new Date(a.value.DateDebut).getFullYear()>=2020&&a.value.Places>=1&&a.value.Nom!=""&&a.value.AgeMax>=a.value.AgeMin&&a.value.OptionQuotientFamilial.every(d=>0<=d&&d<=100)&&!(a.value.OptionPrix.Active==Ae.PrixStatut&&!a.value.OptionPrix.Statuts?.length)&&!(a.value.OptionPrix.Active==Ae.PrixJour&&a.value.OptionPrix.Jours?.length!=a.value.Duree)),c=tt(Ml);function n(d){const u=ke.isQuotientFamilialActive(d.OptionQuotientFamilial),r=d.OptionPrix.Active!=Ae.NoOption;if(!u&&!r)return"Aucune";const f=[];return ke.isQuotientFamilialActive(d.OptionQuotientFamilial)&&f.push("Quotient familial"),d.OptionPrix.Active!=Ae.NoOption&&f.push(ll[d.OptionPrix.Active]),f.join(", ")}return(d,u)=>{const r=pl,f=Qe,v=We,C=Pt;return V(),w(q,{title:"Paramètres du séjour",subtitle:$(ke).label(o.camp)},{default:t(()=>[e(Y,null,{default:t(()=>[e(q,{class:"my-2",subtitle:"Général"},{default:t(()=>[e(Y,null,{default:t(()=>[e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[e(fe,{autofocus:"","hide-details":"",label:"Nom",density:"compact",variant:"outlined",modelValue:a.value.Nom,"onUpdate:modelValue":u[0]||(u[0]=p=>a.value.Nom=p)},null,8,["modelValue"])]),_:1}),e(g,null,{default:t(()=>[e(fe,{"hide-details":"",label:"Lieu",density:"compact",variant:"outlined",modelValue:a.value.Lieu,"onUpdate:modelValue":u[1]||(u[1]=p=>a.value.Lieu=p)},null,8,["modelValue"])]),_:1}),e(g,null,{default:t(()=>[e(fe,{"hide-details":"",label:"Numéro d'agrément",density:"compact",variant:"outlined",modelValue:a.value.Agrement,"onUpdate:modelValue":u[2]||(u[2]=p=>a.value.Agrement=p)},null,8,["modelValue"])]),_:1})]),_:1}),e(L,null,{default:t(()=>[e(g,{"align-self":"center"},{default:t(()=>[e(r,{modelValue:a.value.DateDebut,"onUpdate:modelValue":u[3]||(u[3]=p=>a.value.DateDebut=p),label:"Date de début","hide-details":""},null,8,["modelValue"])]),_:1}),e(g,{"align-self":"center"},{default:t(()=>[e(f,{label:"Durée (en jours)",modelValue:a.value.Duree,"onUpdate:modelValue":u[4]||(u[4]=p=>a.value.Duree=p),"hide-details":""},null,8,["modelValue"])]),_:1}),e(g,{"align-self":"center"},{default:t(()=>[e(r,{"model-value":$(ke).dateFin(a.value),label:"Date de fin",readonly:"","hide-details":""},null,8,["model-value"])]),_:1})]),_:1})]),_:1})]),_:1}),e(q,{class:"my-2",subtitle:"Prix"},{default:t(()=>[e(Y,null,{default:t(()=>[e(L,null,{default:t(()=>[e(g,{"align-self":"center",cols:"6"},{default:t(()=>[e(v,{label:"Prix",modelValue:a.value.Prix,"onUpdate:modelValue":u[5]||(u[5]=p=>a.value.Prix=p),"hide-details":""},null,8,["modelValue"])]),_:1}),e(g,{"align-self":"center",cols:"6",class:"text-center"},{default:t(()=>[e(Se,{"close-on-content-click":!1},{activator:t(({props:p})=>[e(fe,ie(p,{readonly:"",label:"Option sur le prix",variant:"outlined",density:"compact","hide-details":"","model-value":n(a.value)}),null,16,["model-value"])]),default:t(()=>[e(Ga,{camp:a.value,"option-prix":a.value.OptionPrix,"onUpdate:optionPrix":u[6]||(u[6]=p=>a.value.OptionPrix=p),"option-qf":a.value.OptionQuotientFamilial,"onUpdate:optionQf":u[7]||(u[7]=p=>a.value.OptionQuotientFamilial=p)},null,8,["camp","option-prix","option-qf"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(q,{class:"my-2",subtitle:"Visibilité"},{default:t(()=>[e(Y,null,{default:t(()=>[e(L,null,{default:t(()=>[e(g,{"align-self":"center"},{default:t(()=>[e(Te,{label:"Ouverture aux inscriptions",variant:"outlined",density:"compact",items:$(c),"hide-details":"",modelValue:a.value.Statut,"onUpdate:modelValue":u[8]||(u[8]=p=>a.value.Statut=p)},null,8,["items","modelValue"])]),_:1}),e(g,{"align-self":"center"},{default:t(()=>[e(gt,{label:"Camp sans inscription",modelValue:a.value.WithoutInscription,"onUpdate:modelValue":u[9]||(u[9]=p=>a.value.WithoutInscription=p),color:"primary",density:"compact","persistent-hint":"",hint:a.value.WithoutInscription?"Camp externe, uniquement visible sur l'API publique.":""},null,8,["modelValue","hint"])]),_:1})]),_:1})]),_:1})]),_:1}),e(q,{class:"my-2",subtitle:"Filtres sur les inscrits"},{default:t(()=>[e(Y,null,{default:t(()=>[e(L,null,{default:t(()=>[e(g,{"align-self":"center"},{default:t(()=>[e(f,{modelValue:a.value.Places,"onUpdate:modelValue":u[10]||(u[10]=p=>a.value.Places=p),label:"Nombre de places"},null,8,["modelValue"])]),_:1}),e(g,{"align-self":"center"},{default:t(()=>[e(f,{modelValue:a.value.AgeMin,"onUpdate:modelValue":u[11]||(u[11]=p=>a.value.AgeMin=p),label:"Âge minimum"},null,8,["modelValue"])]),_:1}),e(g,{"align-self":"center"},{default:t(()=>[e(f,{modelValue:a.value.AgeMax,"onUpdate:modelValue":u[12]||(u[12]=p=>a.value.AgeMax=p),label:"Âge maximum"},null,8,["modelValue"])]),_:1})]),_:1}),e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[e(C,{modelValue:a.value.NeedEquilibreGF,"onUpdate:modelValue":u[13]||(u[13]=p=>a.value.NeedEquilibreGF=p),label:"Equilibre G/F demandé",density:"compact","persistent-hint":"",hint:"Place un inscrit en liste d'attente en cas de déséquilibre Garçons/Filles"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(q,{class:"my-2",subtitle:"Formulaire d'inscription"},{default:t(()=>[e(Y,null,{default:t(()=>[e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[e(fe,{label:"Image",density:"compact",variant:"outlined",hint:"URL d'une image affichée sur le formulaire d'inscription","persistent-hint":"",modelValue:a.value.ImageURL,"onUpdate:modelValue":u[14]||(u[14]=p=>a.value.ImageURL=p)},null,8,["modelValue"])]),_:1})]),_:1}),e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[e(dt,{variant:"outlined",density:"compact",label:"Description",hint:"Ce texte est affiché sur le formulaire d'inscription.","persistent-hint":"",rows:"3",modelValue:a.value.Description,"onUpdate:modelValue":u[15]||(u[15]=p=>a.value.Description=p)},null,8,["modelValue"])]),_:1}),e(g,{cols:"2"},{default:t(()=>[e(C,{label:"Navette",modelValue:a.value.Navette.Actif,"onUpdate:modelValue":u[16]||(u[16]=p=>a.value.Navette.Actif=p)},null,8,["modelValue"])]),_:1}),e(g,null,{default:t(()=>[e(dt,{variant:"outlined",density:"compact",label:"Navette",hint:"Ce texte est affiché sur l'espace personnel de suivi.","persistent-hint":"",rows:"3",disabled:!a.value.Navette.Actif,modelValue:a.value.Navette.Commentaire,"onUpdate:modelValue":u[17]||(u[17]=p=>a.value.Navette.Commentaire=p)},null,8,["disabled","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(q,{class:"my-2",subtitle:"Autre"},{default:t(()=>[e(Y,null,{default:t(()=>[e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[e(fe,{label:"Mot de passe",density:"compact",variant:"outlined",hint:"Mot de passe d'accès à la page Directeur","persistent-hint":"",modelValue:a.value.Password,"onUpdate:modelValue":u[18]||(u[18]=p=>a.value.Password=p)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(Ka,{"meta-entries-hints":l.metaEntriesHints,modelValue:a.value.Meta,"onUpdate:modelValue":u[19]||(u[19]=p=>a.value.Meta=p)},null,8,["meta-entries-hints","modelValue"])]),_:1}),e(se,null,{default:t(()=>[e(ue),e(h,{disabled:!i.value,onClick:u[20]||(u[20]=p=>m("save",a.value))},{default:t(()=>[...u[21]||(u[21]=[b("Enregistrer",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1},8,["subtitle"])}}}),Qt=X({__name:"TauxSelect",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(l){Oe(i);const s=_e(l,"modelValue"),o=D(null),m=F(()=>{const u=Array.from(a.value.values()).map(r=>({title:r.Label,value:r.Id}));return u.sort((r,f)=>r.title.localeCompare(f.title)),u}),a=D(new Map);async function i(){const u=await _.CampsGetTaux();u!==void 0&&(a.value=$l(u),s.value.Id>0&&(s.value=Pe(a.value.get(s.value.Id)),o.value=s.value.Id))}function c(){s.value.Id<=0?(o.value==null&&(o.value=1),s.value=Pe(a.value.get(o.value))):(o.value=null,s.value.Id=0,s.value.Label="")}function n(u){s.value=Pe(a.value.get(u))}const d=F(()=>{if(s.value.Id>0)return null;const u=s.value.Label;return Array.from(a.value.values()).map(f=>f.Label).includes(u)?"Ce label est déjà utilisé.":null});return(u,r)=>(V(),w(L,null,{default:t(()=>[e(g,{"align-self":"center"},{default:t(()=>[s.value.Id>0?(V(),w(Te,{key:0,variant:"outlined",density:"compact","hide-details":"",label:"Taux",items:m.value,modelValue:o.value,"onUpdate:modelValue":[r[0]||(r[0]=f=>o.value=f),n]},null,8,["items","modelValue"])):(V(),w(L,{key:1},{default:t(()=>[e(g,{cols:"12"},{default:t(()=>[e(fe,{variant:"outlined",density:"compact",label:"Label",modelValue:s.value.Label,"onUpdate:modelValue":r[1]||(r[1]=f=>s.value.Label=f),disabled:s.value.Id>0,"error-messages":d.value},null,8,["modelValue","disabled","error-messages"])]),_:1}),e(g,null,{default:t(()=>[e(fe,{label:`Valeur d'un ${$(Fl)[$(Rl).FrancsSuisse]}`,density:"compact",variant:"outlined",type:"number",min:"0.001",suffix:"€",hint:"Valeur en € d'une unité de la monnaie.","persistent-hint":"","model-value":s.value.FrancsSuisse/1e3,"onUpdate:modelValue":r[2]||(r[2]=f=>s.value.FrancsSuisse=$(Ul)(Number(f)*1e3)),disabled:s.value.Id>0},null,8,["label","model-value","disabled"])]),_:1})]),_:1}))]),_:1}),e(g,{cols:"auto"},{default:t(()=>[e(re,{thickness:"2",vertical:"",class:"py-4"},{default:t(()=>[...r[3]||(r[3]=[b("ou",-1)])]),_:1})]),_:1}),e(g,{"align-self":"center",cols:"auto"},{default:t(()=>[e(h,{onClick:c},{prepend:t(()=>[e(ye,null,{default:t(()=>[...r[4]||(r[4]=[b("mdi-toggle-switch",-1)])]),_:1})]),default:t(()=>[b(" "+U(s.value.Id>0?"Créer un taux":"Utiliser un taux"),1)]),_:1})]),_:1})]),_:1}))}}),Za=X({__name:"CampStats",props:{stats:{}},setup(l){const s=l;function o(m,a){return`(${(a==0?0:100*m/a).toFixed(0)} %)`}return(m,a)=>(V(),w(q,{title:"Statistiques"},{default:t(()=>[e(Y,null,{default:t(()=>[e(L,null,{default:t(()=>[e(g,{cols:"5"},{default:t(()=>[b(" Demandes d'inscriptions : "+U(s.stats.Inscriptions),1)]),_:1}),e(g,{class:"text-right"},{default:t(()=>[b(" Dont Filles : "+U(s.stats.InscriptionsFilles)+" "+U(o(s.stats.InscriptionsFilles,s.stats.Inscriptions))+", Suisses : "+U(s.stats.InscriptionsSuisses)+" "+U(o(s.stats.InscriptionsSuisses,s.stats.Inscriptions)),1)]),_:1})]),_:1}),e(L,null,{default:t(()=>[e(g,{cols:"4"},{default:t(()=>[b(" Confirmées : "+U(s.stats.Valides)+" "+U(o(s.stats.Valides,s.stats.Inscriptions)),1)]),_:1}),e(g,{class:"text-right"},{default:t(()=>[b(" Dont Filles : "+U(s.stats.ValidesFilles)+" "+U(o(s.stats.ValidesFilles,s.stats.Valides))+" , Suisses : "+U(s.stats.ValidesSuisses)+" "+U(o(s.stats.ValidesSuisses,s.stats.Valides)),1)]),_:1})]),_:1}),e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[b(" A statuer : "+U(s.stats.AStatuer)+" "+U(o(s.stats.AStatuer,s.stats.Inscriptions)),1)]),_:1}),e(g,{cols:"5",class:"text-center"},{default:t(()=>[b(" Demandes d'exception : "+U(s.stats.Exceptions)+" "+U(o(s.stats.Exceptions,s.stats.Inscriptions)),1)]),_:1}),e(g,{class:"text-right"},{default:t(()=>[b(" Refus : "+U(s.stats.Refus)+" "+U(o(s.stats.Refus,s.stats.Inscriptions)),1)]),_:1})]),_:1})]),_:1})]),_:1}))}}),en={key:0},tn=X({__name:"CampHeaderRow",props:{camp:{}},emits:["click","edit","edit-taux","delete","show-documents","send-sondage","add-directeur"],setup(l,{emit:s}){const o=l,m=s,a=F(()=>o.camp.Stats.Inscriptions-o.camp.Stats.Valides),i=D(!1),c=F(()=>{switch(new Date(o.camp.Camp.Camp.DateDebut).getUTCMonth()+1){case 7:case 8:return"rgb(45, 185, 187)";case 9:case 10:case 11:return"rgb(190, 150, 60)";case 12:case 1:case 2:case 3:return"rgb(240, 240, 240)";case 4:case 5:case 6:default:return"rgb(190, 228, 100)"}}),n=D(!1),d=D(0);return(u,r)=>{const f=ut;return V(),W(ae,null,[e(q,{color:c.value,"no-gutters":"",onClick:r[6]||(r[6]=v=>m("click")),class:"my-1"},{default:t(()=>[e(L,{style:et({"background-color":c.value}),class:"px-1","no-gutters":"",justify:"space-between"},{default:t(()=>[e(g,null,{default:t(()=>[e(G,{title:$(ke).label(o.camp.Camp.Camp),subtitle:`ID : ${o.camp.Camp.Camp.Id}`},null,8,["title","subtitle"])]),_:1}),e(g,{"align-self":"center"},{default:t(()=>[b(U($(ke).formatPlage(l.camp.Camp.Camp)),1)]),_:1}),e(g,{cols:"2","align-self":"center"},{default:t(()=>[e(at,{width:"600",location:"left","content-class":"pa-0"},{activator:t(({props:v})=>[e(_t,ie({class:"bg-white border-md border-primary"},v,{max:o.camp.Camp.Camp.Places,"model-value":o.camp.Stats.Valides,height:"36",rounded:"",color:"primary"}),{default:t(()=>[T("strong",null,[b(U(o.camp.Stats.Valides)+"/"+U(o.camp.Camp.Camp.Places)+" ",1),a.value>0?(V(),W("span",en," (+ "+U(a.value)+")",1)):Q("",!0)])]),_:1},16,["max","model-value"])]),default:t(()=>[e(Za,{stats:o.camp.Stats},null,8,["stats"])]),_:1})]),_:1}),e(g,{cols:"1"}),e(g,{cols:"auto","align-self":"center"},{default:t(()=>[e(Se,null,{activator:t(({props:v})=>[e(h,ie(v,{size:"x-small",class:"mx-1",icon:"mdi-dots-vertical"}),null,16)]),default:t(()=>[e(De,{density:"compact"},{default:t(()=>[e(G,{"prepend-icon":"mdi-pencil",onClick:r[0]||(r[0]=v=>m("edit"))},{default:t(()=>[...r[12]||(r[12]=[b("Modifier les paramètres",-1)])]),_:1}),e(G,{"prepend-icon":"mdi-currency-eur",onClick:r[1]||(r[1]=v=>m("edit-taux"))},{default:t(()=>[...r[13]||(r[13]=[b("Taux de conversion",-1)])]),_:1}),e(re,{thickness:"1"}),e(G,{"prepend-icon":"mdi-mail",onClick:r[2]||(r[2]=v=>m("show-documents")),title:"Documents"}),e(re,{thickness:"1"}),e(G,{"prepend-icon":"mdi-plus",onClick:r[3]||(r[3]=v=>n.value=!0),title:"Ajouter un directeur...",disabled:o.camp.HasDirecteur},null,8,["disabled"]),e(re,{thickness:"1"}),e(G,{title:"Envoyer le sondage",subtitle:"de fin de séjour","prepend-icon":"mdi-comment-quote",onClick:r[4]||(r[4]=v=>m("send-sondage"))}),e(re,{thickness:"1"}),e(G,{"prepend-icon":"mdi-delete",disabled:o.camp.Stats.Inscriptions>0,onClick:r[5]||(r[5]=v=>i.value=!0)},{default:t(()=>[...r[14]||(r[14]=[b("Supprimer",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])]),_:1},8,["color"]),e(Z,{modelValue:i.value,"onUpdate:modelValue":r[8]||(r[8]=v=>i.value=v),"max-width":"600"},{default:t(()=>[e(q,{title:"Confirmer la suppression"},{default:t(()=>[e(Y,null,{default:t(()=>[r[15]||(r[15]=b(" Etes vous certain de supprimer le séjour ",-1)),T("b",null,U($(ke).label(o.camp.Camp.Camp)),1),r[16]||(r[16]=b(" ? ",-1)),r[17]||(r[17]=T("br",null,null,-1)),r[18]||(r[18]=T("br",null,null,-1)),r[19]||(r[19]=b(" Les éventuels ",-1)),r[20]||(r[20]=T("i",null,"équipiers",-1)),r[21]||(r[21]=b(" déclarés sur ce séjour seront aussi supprimés. ",-1)),r[22]||(r[22]=T("br",null,null,-1)),r[23]||(r[23]=T("br",null,null,-1)),r[24]||(r[24]=b(" Attention, cette opération est irréversible. ",-1))]),_:1}),e(se,null,{default:t(()=>[e(ue),e(h,{color:"red",onClick:r[7]||(r[7]=v=>{i.value=!1,m("delete")})},{default:t(()=>[...r[25]||(r[25]=[b("Supprimer",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Z,{modelValue:n.value,"onUpdate:modelValue":r[11]||(r[11]=v=>n.value=v),"max-width":"400px"},{default:t(()=>[e(q,{title:"Ajouter un directeur"},{default:t(()=>[e(Y,null,{default:t(()=>[e(f,{"initial-personne":"",label:"Directeur",modelValue:d.value,"onUpdate:modelValue":r[9]||(r[9]=v=>d.value=v),api:$(_)},null,8,["modelValue","api"])]),_:1}),e(se,null,{default:t(()=>[e(ue),e(h,{disabled:!d.value,onClick:r[10]||(r[10]=v=>{n.value=!1,m("add-directeur",d.value)})},{default:t(()=>[...r[26]||(r[26]=[b("Ajouter",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}}),ln=X({__name:"CampsSelector",props:we({allCamps:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l,{emit:s}){const o=l,m=_e(l,"modelValue"),a=F(()=>o.allCamps.map(i=>({title:i.Label,value:i.Id})));return(i,c)=>(V(),w(Va,{multiple:"",chips:"","closable-chips":"",items:a.value,modelValue:m.value,"onUpdate:modelValue":c[0]||(c[0]=n=>m.value=n)},null,8,["items","modelValue"]))}}),an=X({__name:"DocumentsCard",props:{camp:{}},setup(l){const s=l;Oe(m);const o=D(null);async function m(){const a=await _.CampsDocuments({idCamp:s.camp.Camp.Camp.Id});a!==void 0&&(o.value=a)}return(a,i)=>{const c=Aa;return o.value!=null?(V(),w(q,{key:0,title:"Documents"},{default:t(()=>[e(Y,null,{default:t(()=>[e(De,null,{default:t(()=>[e(Tt,null,{default:t(()=>[...i[0]||(i[0]=[b("Préférences d'affichage",-1)])]),_:1}),e(G,null,{default:t(()=>[e(L,{class:"mb-2"},{default:t(()=>[e(g,null,{default:t(()=>[e(Ce,{color:o.value.ToShow.LettreDirecteur?"green":"grey","append-icon":o.value.ToShow.LettreDirecteur?"mdi-check":""},{default:t(()=>[...i[1]||(i[1]=[b("Lettre du directeur",-1)])]),_:1},8,["color","append-icon"])]),_:1}),e(g,null,{default:t(()=>[e(Ce,{color:o.value.ToShow.ListeVetements?"green":"grey","append-icon":o.value.ToShow.ListeVetements?"mdi-check":""},{default:t(()=>[...i[2]||(i[2]=[b(" Liste de vêtements",-1)])]),_:1},8,["color","append-icon"])]),_:1}),e(g,null,{default:t(()=>[e(Ce,{color:o.value.ToShow.ListeParticipants?"green":"grey","append-icon":o.value.ToShow.ListeParticipants?"mdi-check":""},{default:t(()=>[...i[3]||(i[3]=[b("Liste des participants ",-1)])]),_:1},8,["color","append-icon"])]),_:1})]),_:1})]),_:1}),e(Tt,null,{default:t(()=>[...i[4]||(i[4]=[b("Documents du séjour",-1)])]),_:1}),(V(!0),W(ae,null,ce(o.value.Generated,n=>(V(),w(G,{title:n.NomClient},{append:t(()=>[e(c,{"file-key":n.Key,"is-generated-doc":!0},null,8,["file-key"])]),_:2},1032,["title"]))),256)),(V(!0),W(ae,null,ce(o.value.ToRead,n=>(V(),w(G,{title:n.NomClient},{append:t(()=>[e(c,{"file-key":n.Key,"is-generated-doc":!1},null,8,["file-key"])]),_:2},1032,["title"]))),256)),(V(!0),W(ae,null,ce(o.value.ToUploadModeles,n=>(V(),w(G,{title:n.NomClient,subtitle:"Document à remplir"},{append:t(()=>[e(c,{"file-key":n.Key,"is-generated-doc":!1},null,8,["file-key"])]),_:2},1032,["title"]))),256))]),_:1})]),_:1})]),_:1})):(V(),w(lt,{key:1,type:"card"}))}}}),Vt=X({__name:"RequestProgressCard",props:{title:{},current:{},total:{}},setup(l){const s=l;return(o,m)=>(V(),w(q,{title:s.title},{default:t(()=>[e(Y,null,{default:t(()=>[e(_t,{max:s.total,"model-value":s.current,color:"primary",height:"24"},{default:t(()=>[b(U(s.current)+" / "+U(s.total),1)]),_:1},8,["max","model-value"])]),_:1})]),_:1},8,["title"]))}}),nn={key:0,class:"text-center my-4"},un=X({__name:"JoomeoPannel",emits:["save"],setup(l,{emit:s}){Oe(a);const o=D(null),m=D([]);async function a(){const v=await _.CampsLoadAlbums();v!==void 0&&(o.value=v||[],m.value=[])}function i(v){return o.value.find(C=>C.Camp.Id==v)}const c=D(!1),n=F(()=>c.value||!m.value.length||!o.value?!1:m.value.every(v=>i(v).Camp.JoomeoID==""));async function d(){c.value=!0;const v=await _.CampsCreateAlbums({IdCamps:m.value});c.value=!1,v!==void 0&&(It(v).forEach(([C,p])=>{i(C).Album=p}),_.showMessage("Albums Joomeo créés avec succès."))}const u=F(()=>c.value||!m.value.length||!o.value?!1:m.value.every(v=>i(v).Camp.JoomeoID!=""&&i(v).HasDirecteur));async function r(){c.value=!0;const v=await _.CampsAddDirecteursToAlbums({IdCamps:m.value,SendMail:!0});c.value=!1,v!==void 0&&(It(v).forEach(([C,p])=>{i(C).DirecteurPermission=p}),_.showMessage("Directeurs ajoutés avec succès."))}function f(v){return v.type==1&&v.albumAccessRules.allowDownload&&v.albumAccessRules.allowUpload&&v.accessRules.allowDeleteFile&&v.accessRules.allowEditFileCaption}return(v,C)=>(V(),w(q,{title:"Albums Joomeo",subtitle:"Seuls les camps en cours sont affichés."},{append:t(()=>[e(h,{disabled:!n.value,onClick:d},{prepend:t(()=>[e(ye,{color:"green"},{default:t(()=>[...C[1]||(C[1]=[b("mdi-plus",-1)])]),_:1})]),default:t(()=>[C[2]||(C[2]=b(" Créer les albums",-1))]),_:1},8,["disabled"]),e(h,{disabled:!u.value,onClick:r,class:"ml-2"},{prepend:t(()=>[e(ye,null,{default:t(()=>[...C[3]||(C[3]=[b("mdi-account-eye",-1)])]),_:1})]),default:t(()=>[C[4]||(C[4]=b(" Ajouter les directeurs",-1))]),_:1},8,["disabled"])]),default:t(()=>[c.value?(V(),w(_t,{key:0,indeterminate:""})):Q("",!0),e(Y,null,{default:t(()=>[o.value==null?(V(),W("div",nn,[e(Ll,{indeterminate:""})])):(V(),w(De,{key:1,selected:m.value,"onUpdate:selected":C[0]||(C[0]=p=>m.value=p),"select-strategy":"leaf"},{default:t(()=>[(V(!0),W(ae,null,ce(o.value,p=>(V(),w(G,{value:p.Camp.Id,title:$(ke).label(p.Camp),rounded:"",class:"my-1"},{append:t(()=>[e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[e(Ce,{color:p.Album.Id?"primary":void 0},{default:t(()=>[p.Album.Id?(V(),w(at,{key:0,activator:"parent","content-class":"pa-0"},{default:t(()=>[e(q,{title:"Album Joomeo","min-width":"400px"},{default:t(()=>[e(Y,null,{default:t(()=>[e(L,null,{default:t(()=>[e(g,{cols:"auto"},{default:t(()=>[...C[5]||(C[5]=[b("Nom",-1)])]),_:1}),e(g,{class:"text-right"},{default:t(()=>[b(U(p.Album.Label),1)]),_:2},1024)]),_:2},1024),e(L,null,{default:t(()=>[e(g,{cols:"auto"},{default:t(()=>[...C[6]||(C[6]=[b("ID",-1)])]),_:1}),e(g,{class:"text-right"},{default:t(()=>[b(U(p.Album.Id),1)]),_:2},1024)]),_:2},1024),e(L,null,{default:t(()=>[e(g,{cols:"auto"},{default:t(()=>[...C[7]||(C[7]=[b("Date de création",-1)])]),_:1}),e(g,{class:"text-right"},{default:t(()=>[b(U(new Date(p.Album.Date).toLocaleDateString("fr")),1)]),_:2},1024)]),_:2},1024),e(L,null,{default:t(()=>[e(g,{cols:"auto"},{default:t(()=>[...C[8]||(C[8]=[b("Nombre de photos",-1)])]),_:1}),e(g,{class:"text-right"},{default:t(()=>[b(U(p.Album.FilesCount),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):Q("",!0),b(" "+U(p.Album.Id==""?"Pas d'album":`Album créé le ${$(xe).date(p.Album.Date)}`),1)]),_:2},1032,["color"])]),_:2},1024),p.Album.Id?(V(),w(g,{key:0},{default:t(()=>[e(Ce,{color:p.HasDirecteur?p.DirecteurPermission.contactid!=""?"green":"orange":"red"},{default:t(()=>[p.DirecteurPermission.contactid?(V(),w(at,{key:0,activator:"parent","content-class":"pa-0"},{default:t(()=>[e(q,{title:"Accès à l'album",subtitle:"Le directeur a accès à l'album."},{default:t(()=>[e(Y,null,{default:t(()=>[e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[...C[9]||(C[9]=[b("Email",-1)])]),_:1}),e(g,{class:"text-right"},{default:t(()=>[b(U(p.DirecteurPermission.email),1)]),_:2},1024)]),_:2},1024),e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[...C[10]||(C[10]=[b("Login",-1)])]),_:1}),e(g,{class:"text-right"},{default:t(()=>[b(U(p.DirecteurPermission.login),1)]),_:2},1024)]),_:2},1024),e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[...C[11]||(C[11]=[b("Mot de passe",-1)])]),_:1}),e(g,{class:"text-right"},{default:t(()=>[b(U(p.DirecteurPermission.password),1)]),_:2},1024)]),_:2},1024),e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[...C[12]||(C[12]=[b("Permissions (écriture)",-1)])]),_:1}),e(g,{class:"text-right"},{default:t(()=>[e(ye,{icon:f(p.DirecteurPermission)?"mdi-check":"mdi-warning",color:f(p.DirecteurPermission)?"green":"orange"},null,8,["icon","color"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)):Q("",!0),b(" "+U(p.HasDirecteur?p.DirecteurPermission.contactid!=""?"Directeur ajouté":"Directeur à ajouter":"Aucun directeur"),1)]),_:2},1032,["color"])]),_:2},1024)):Q("",!0)]),_:2},1024)]),_:2},1032,["value","title"]))),256))]),_:1},8,["selected"]))]),_:1}),e(se,null,{default:t(()=>[e(ue)]),_:1})]),_:1}))}});function sn(){const l=D([]);hl(()=>l.value=[]);function s(o,m){l.value[m]=o}return{refs:l,updateRef:s}}const on=Ue({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:l=>l.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:l=>l%1===0},totalVisible:[Number,String],firstIcon:{type:Ne,default:"$first"},prevIcon:{type:Ne,default:"$prev"},nextIcon:{type:Ne,default:"$next"},lastIcon:{type:Ne,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...Wl(),...Ql(),...zl(),...Hl(),...Yl(),...ql(),...jl({tag:"nav"}),...Bl(),...Nl({variant:"text"})},"VPagination"),rn=Re()({name:"VPagination",props:on(),emits:{"update:modelValue":l=>!0,first:l=>!0,prev:l=>!0,next:l=>!0,last:l=>!0},setup(l,s){let{slots:o,emit:m}=s;const a=$e(l,"modelValue"),{t:i,n:c}=He(),{isRtl:n}=el(),{themeClasses:d}=El(l),{width:u}=Tl(),r=Ke(-1);At(void 0,{scoped:!0});const{resizeRef:f}=Ol(J=>{if(!J.length)return;const{target:S,contentRect:te}=J[0],z=S.querySelector(".v-pagination__list > *");if(!z)return;const N=te.width,K=z.offsetWidth+parseFloat(getComputedStyle(z).marginRight)*2;r.value=I(N,K)}),v=F(()=>parseInt(l.length,10)),C=F(()=>parseInt(l.start,10)),p=F(()=>l.totalVisible!=null?parseInt(l.totalVisible,10):r.value>=0?r.value:I(u.value,58));function I(J,S){const te=l.showFirstLastPage?5:3;return Math.max(0,Math.floor(Number(((J-S*te)/S).toFixed(2))))}const k=F(()=>{if(v.value<=0||isNaN(v.value)||v.value>Number.MAX_SAFE_INTEGER)return[];if(p.value<=0)return[];if(p.value===1)return[a.value];if(v.value<=p.value)return he(v.value,C.value);const J=p.value%2===0,S=J?p.value/2:Math.floor(p.value/2),te=J?S:S+1,z=v.value-S;if(te-a.value>=0)return[...he(Math.max(1,p.value-1),C.value),l.ellipsis,v.value];if(a.value-z>=(J?1:0)){const N=p.value-1,K=v.value-N+C.value;return[C.value,l.ellipsis,...he(N,K)]}else{const N=Math.max(1,p.value-2),K=N===1?a.value:a.value-Math.ceil(N/2)+C.value;return[C.value,l.ellipsis,...he(N,K),l.ellipsis,v.value]}});function A(J,S,te){J.preventDefault(),a.value=S,te&&m(te,S)}const{refs:j,updateRef:B}=sn();At({VPaginationBtn:{color:Fe(()=>l.color),border:Fe(()=>l.border),density:Fe(()=>l.density),size:Fe(()=>l.size),variant:Fe(()=>l.variant),rounded:Fe(()=>l.rounded),elevation:Fe(()=>l.elevation)}});const x=F(()=>k.value.map((J,S)=>{const te=z=>B(z,S);if(typeof J=="string")return{isActive:!1,key:`ellipsis-${S}`,page:J,props:{ref:te,ellipsis:!0,icon:!0,disabled:!0}};{const z=J===a.value;return{isActive:z,key:J,page:c(J),props:{ref:te,ellipsis:!1,icon:!0,disabled:!!l.disabled||Number(l.length)<2,color:z?l.activeColor:l.color,"aria-current":z,"aria-label":i(z?l.currentPageAriaLabel:l.pageAriaLabel,J),onClick:N=>A(N,J)}}}})),P=F(()=>{const J=!!l.disabled||a.value<=C.value,S=!!l.disabled||a.value>=C.value+v.value-1;return{first:l.showFirstLastPage?{icon:n.value?l.lastIcon:l.firstIcon,onClick:te=>A(te,C.value,"first"),disabled:J,"aria-label":i(l.firstAriaLabel),"aria-disabled":J}:void 0,prev:{icon:n.value?l.nextIcon:l.prevIcon,onClick:te=>A(te,a.value-1,"prev"),disabled:J,"aria-label":i(l.previousAriaLabel),"aria-disabled":J},next:{icon:n.value?l.prevIcon:l.nextIcon,onClick:te=>A(te,a.value+1,"next"),disabled:S,"aria-label":i(l.nextAriaLabel),"aria-disabled":S},last:l.showFirstLastPage?{icon:n.value?l.firstIcon:l.lastIcon,onClick:te=>A(te,C.value+v.value-1,"last"),disabled:S,"aria-label":i(l.lastAriaLabel),"aria-disabled":S}:void 0}});function ee(){const J=a.value-C.value;j.value[J]?.$el.focus()}function ge(J){J.key===Mt.left&&!l.disabled&&a.value>Number(l.start)?(a.value=a.value-1,$t(ee)):J.key===Mt.right&&!l.disabled&&a.value<C.value+v.value-1&&(a.value=a.value+1,$t(ee))}return Le(()=>e(l.tag,{ref:f,class:Ve(["v-pagination",d.value,l.class]),style:et(l.style),role:"navigation","aria-label":i(l.ariaLabel),onKeydown:ge,"data-test":"v-pagination-root"},{default:()=>[T("ul",{class:"v-pagination__list"},[l.showFirstLastPage&&T("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[o.first?o.first(P.value.first):e(h,ie({_as:"VPaginationBtn"},P.value.first),null)]),T("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[o.prev?o.prev(P.value.prev):e(h,ie({_as:"VPaginationBtn"},P.value.prev),null)]),x.value.map((J,S)=>T("li",{key:J.key,class:Ve(["v-pagination__item",{"v-pagination__item--is-active":J.isActive}]),"data-test":"v-pagination-item"},[o.item?o.item(J):e(h,ie({_as:"VPaginationBtn"},J.props),{default:()=>[J.page]})])),T("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[o.next?o.next(P.value.next):e(h,ie({_as:"VPaginationBtn"},P.value.next),null)]),l.showFirstLastPage&&T("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[o.last?o.last(P.value.last):e(h,ie({_as:"VPaginationBtn"},P.value.last),null)])])]})),{}}}),dn={key:2},ft=16,mn=X({__name:"CampsList",emits:["show-participants"],setup(l,{emit:s}){const o=s;Oe(r);const m=yt(new Map),a=D(!1),i=yt({pattern:"",openOnly:!1}),c=F(()=>{const M=new Set,y=new Set;for(const O of m.values())for(const R of Object.entries(O.Camp.Camp.Meta||{}))M.add(R[0]),y.add(R[1]);return{keys:Array.from(M.keys()).sort(),values:Array.from(y.keys()).sort()}}),n=F(()=>{const M=al(i.pattern),y=Array.from(m.values()).filter(O=>ke.match(O.Camp.Camp,M)&&(!i.openOnly||Et(O.Camp)));return y.sort((O,R)=>{const pe=new Date(R.Camp.Camp.DateDebut).valueOf(),ne=new Date(O.Camp.Camp.DateDebut).valueOf();return pe==ne?O.Camp.Camp.Id-R.Camp.Camp.Id:pe-ne}),y}),d=F(()=>n.value.slice((C.value-1)*ft,C.value*ft));function u(){C.value>v.value&&(C.value=v.value)}async function r(){a.value=!0;const M=await _.CampsGet();a.value=!1,M!==void 0&&(m.clear(),M?.forEach(y=>m.set(y.Camp.Camp.Id,y)))}async function f(){a.value=!0;const M=await _.CampsCreate();a.value=!1,M!==void 0&&(_.showMessage("Camp ajouté avec succès."),m.set(M.Camp.Camp.Id,M),p.value=M.Camp.Camp)}const v=F(()=>Math.max(Math.ceil(n.value.length/ft),1)),C=D(1),p=D(null);async function I(M){p.value=null,a.value=!0;const y=await _.CampsUpdate(M);a.value=!1,y!==void 0&&(_.showMessage("Séjour modifié avec succès."),m.get(y.Camp.Id).Camp=y,u())}const k=D(null);async function A(){const M=k.value;if(M==null)return;k.value=null,a.value=!0;const y=await _.CampsSetTaux({IdCamp:M.Camp.Camp.Id,Taux:M.Taux});if(a.value=!1,y===void 0)return;_.showMessage("Taux modifié avec succès.");const O=m.get(M.Camp.Camp.Id);O.Camp.Camp.IdTaux=y.Id,O.Taux=y}const j=D(!1),B=D(5),x=D({Id:1,Label:"",Euros:0,FrancsSuisse:0}),P=F(()=>x.value.Id>0||x.value.Label!=""),ee=F(()=>new Set(Array.from(m.values()).filter(y=>Et(y.Camp)).map(y=>y.Camp.Camp.IdTaux)).size<=1);async function ge(){j.value=!1,a.value=!0;const M=await _.CampsCreateMany({Count:B.value,Taux:x.value});a.value=!1,M!==void 0&&(_.showMessage("Séjours créés avec succès."),M?.forEach(y=>m.set(y.Camp.Camp.Id,y)))}async function J(M){a.value=!0;const y=await _.CampsDelete({id:M.Camp.Camp.Id});a.value=!1,y!==void 0&&(_.showMessage("Séjour supprimé avec succès."),m.delete(M.Camp.Camp.Id),u())}const S=D(!1);function te(){z.value=Array.from(m.values()).filter(M=>M.Camp.Camp.Statut!=Gl.Ouvert).map(M=>M.Camp.Camp.Id),S.value=!0}const z=D([]);async function N(){S.value=!1,!(!z.value.length||await _.CampsOuvreInscriptions({Camps:z.value})===void 0)&&(_.showMessage("Séjours ouverts aux inscriptions avec succès."),r())}const K=D(null),oe=D(null);async function le(M){oe.value={Current:0,Total:10};const y=await _.EventsSendSondages({idCamp:M});if(y===void 0){oe.value=null;return}await bt(y,O=>oe.value=O,O=>_.onError("Envoi du sondage",O)),oe.value=null,_.showMessage("Sondage envoyé avec succès.")}async function ve(M,y){await _.CampsCreateEquipier({IdPersonne:M,IdCamp:y,Roles:[Kl.Direction]})!==void 0&&(m.get(y).HasDirecteur=!0,_.showMessage("Directeur ajouté avec succès."))}const be=D(!1);return(M,y)=>{const O=Qe;return V(),W(ae,null,[e(q,{title:"Séjours",subtitle:m.size},{append:t(()=>[e(L,null,{default:t(()=>[e(g,{"align-self":"center",style:{width:"240px"}},{default:t(()=>[e(fe,{label:"Rechercher",variant:"filled",density:"comfortable","hide-details":"","prepend-inner-icon":"mdi-magnify",clearable:"",modelValue:i.pattern,"onUpdate:modelValue":[y[0]||(y[0]=R=>i.pattern=R),y[2]||(y[2]=R=>u())],"onClick:clear":y[1]||(y[1]=R=>{i.pattern="",u()})},null,8,["modelValue"])]),_:1}),e(re,{vertical:"",thickness:"1"}),e(g,{"align-self":"center",cols:"auto"},{default:t(()=>[e(Se,null,{activator:t(({props:R})=>[e(h,ie(R,{color:"success",disabled:a.value}),{prepend:t(()=>[e(ye,null,{default:t(()=>[...y[18]||(y[18]=[b("mdi-plus",-1)])]),_:1})]),default:t(()=>[y[19]||(y[19]=b(" Créer un séjour ",-1))]),_:1},16,["disabled"])]),default:t(()=>[e(De,{density:"compact"},{default:t(()=>[e(G,{onClick:f,title:"Créer un séjour"}),e(G,{title:"Créer plusieurs séjours...",subtitle:"Permet de choisir les taux de conversion",onClick:y[3]||(y[3]=R=>j.value=!0)})]),_:1})]),_:1})]),_:1}),e(g,{"align-self":"center",cols:"auto"},{default:t(()=>[e(h,{flat:"",icon:"",size:"small"},{default:t(()=>[e(ye,{icon:"mdi-dots-vertical"}),e(Se,{activator:"parent"},{default:t(()=>[e(De,{density:"compact"},{default:t(()=>[e(G,{title:"Masquer les camps fermés",subtitle:"N'afficher que les camps ouverts aux inscriptions",onClick:y[5]||(y[5]=R=>i.openOnly=!i.openOnly)},{prepend:t(()=>[e(qe,{class:"mr-2",modelValue:i.openOnly,"onUpdate:modelValue":y[4]||(y[4]=R=>i.openOnly=R),density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(re,{thickness:"1"}),e(G,{onClick:y[6]||(y[6]=R=>be.value=!0),title:"Configurer les albums Joomeo...","prepend-icon":"mdi-image-album"}),e(re,{thickness:"1"}),e(G,{onClick:te,title:"Ouvrir les inscriptions...",subtitle:"sur plusieurs séjours","prepend-icon":"mdi-lock-open"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),default:t(()=>[e(Y,{class:"mt-4"},{default:t(()=>[ee.value?Q("",!0):(V(),w(Jl,{key:0,type:"warning"},{default:t(()=>[...y[20]||(y[20]=[b(" Attention, les séjours ouverts aux inscriptions ont des taux de conversion incompatibles ! ",-1)])]),_:1})),a.value?(V(),w(lt,{key:1})):n.value.length==0?(V(),W("i",dn," Aucun camp ne correspond aux filtres actuels. ")):Q("",!0),(V(!0),W(ae,null,ce(d.value,(R,pe)=>(V(),w(tn,{key:pe,camp:R,onClick:ne=>o("show-participants",R),onEdit:ne=>p.value=R.Camp.Camp,onEditTaux:ne=>k.value=R,onDelete:ne=>J(R),onShowDocuments:ne=>K.value=R,onSendSondage:ne=>le(R.Camp.Camp.Id),onAddDirecteur:ne=>ve(ne,R.Camp.Camp.Id)},null,8,["camp","onClick","onEdit","onEditTaux","onDelete","onShowDocuments","onSendSondage","onAddDirecteur"]))),128)),e(rn,{length:v.value,modelValue:C.value,"onUpdate:modelValue":y[7]||(y[7]=R=>C.value=R)},null,8,["length","modelValue"])]),_:1})]),_:1},8,["subtitle"]),e(Z,{"model-value":p.value!=null,"onUpdate:modelValue":y[8]||(y[8]=R=>p.value=null),"max-width":"800px"},{default:t(()=>[p.value!=null?(V(),w(Xa,{key:0,camp:p.value,"meta-entries-hints":c.value,onSave:I},null,8,["camp","meta-entries-hints"])):Q("",!0)]),_:1},8,["model-value"]),e(Z,{"model-value":k.value!=null,"onUpdate:modelValue":y[10]||(y[10]=R=>k.value=null),"max-width":"600"},{default:t(()=>[k.value!=null?(V(),w(q,{key:0,title:"Modifier le taux",subtitle:"La modification n'est possible que si aucun participant n'est enregistré."},{default:t(()=>[e(Y,null,{default:t(()=>[e(Qt,{modelValue:k.value.Taux,"onUpdate:modelValue":y[9]||(y[9]=R=>k.value.Taux=R)},null,8,["modelValue"])]),_:1}),e(se,null,{default:t(()=>[e(ue),e(h,{disabled:k.value.Stats.Inscriptions>0,onClick:A},{default:t(()=>[...y[21]||(y[21]=[b("Modifier",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})):Q("",!0)]),_:1},8,["model-value"]),e(Z,{modelValue:j.value,"onUpdate:modelValue":y[13]||(y[13]=R=>j.value=R),"max-width":"600"},{default:t(()=>[e(q,{title:"Créer plusieurs séjours",subtitle:"Les séjours seront liés au même taux de conversion"},{default:t(()=>[e(Y,null,{default:t(()=>[e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[e(O,{label:"Nombre de séjours",modelValue:B.value,"onUpdate:modelValue":y[11]||(y[11]=R=>B.value=R)},null,8,["modelValue"])]),_:1})]),_:1}),e(re,{thickness:"2",class:"my-2"}),e(Qt,{modelValue:x.value,"onUpdate:modelValue":y[12]||(y[12]=R=>x.value=R)},null,8,["modelValue"])]),_:1}),e(se,null,{default:t(()=>[e(ue),e(h,{color:"success",onClick:ge,disabled:!P.value},{default:t(()=>[...y[22]||(y[22]=[b("Créer",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Z,{modelValue:S.value,"onUpdate:modelValue":y[15]||(y[15]=R=>S.value=R),"max-width":"600"},{default:t(()=>[e(q,{title:"Ouvrir les inscriptions",subtitle:"Ouvre les inscriptions sur les séjours ci-dessous"},{default:t(()=>[e(Y,null,{default:t(()=>[e(ln,{"all-camps":Array.from(m.values()).map(R=>$(ke).toItem(R.Camp)),modelValue:z.value,"onUpdate:modelValue":y[14]||(y[14]=R=>z.value=R)},null,8,["all-camps","modelValue"])]),_:1}),e(se,null,{default:t(()=>[e(ue),e(h,{onClick:N,disabled:!z.value.length},{default:t(()=>[...y[23]||(y[23]=[b("Ouvrir",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Z,{"model-value":K.value!=null,"onUpdate:modelValue":y[16]||(y[16]=R=>K.value=null),"max-width":"800px"},{default:t(()=>[K.value?(V(),w(an,{key:0,camp:K.value},null,8,["camp"])):Q("",!0)]),_:1},8,["model-value"]),e(Z,{"model-value":oe.value!=null,"max-width":"400px",persistent:""},{default:t(()=>[oe.value?(V(),w(Vt,{key:0,title:"Envoi du sondage en cours",current:oe.value.Current,total:oe.value.Total},null,8,["current","total"])):Q("",!0)]),_:1},8,["model-value"]),e(Z,{modelValue:be.value,"onUpdate:modelValue":y[17]||(y[17]=R=>be.value=R)},{default:t(()=>[e(un)]),_:1},8,["modelValue"])],64)}}}),cn={key:1},vn={key:0,class:"text-center font-italic"},pn=X({__name:"CampParticipants",props:{id:{},idParticipant:{}},setup(l){const s=l;Oe(async()=>{a(),await n(),d()}),Me(()=>s.id,n),Me(()=>s.idParticipant,d);const o=D(!1),m=D([]);async function a(){const B=await _.GetCamps();B!==void 0&&(m.value=B||[])}const i=F(()=>{const B=(c.value?.Participants||[]).map(x=>x);return B.sort(Xl.cmp),B}),c=D(null);async function n(){o.value=!0;const B=await _.CampsLoad({idCamp:s.id});o.value=!1,B!==void 0&&(c.value=B)}function d(){if(s.idParticipant===void 0)return;const B=(c.value?.Participants||[]).find(x=>x.Participant.Id==s.idParticipant);B&&(f.value=Pe(B))}const u=D(null);async function r(){if(u.value==null||c.value==null)return;const B=await _.ParticipantsCreate(u.value);u.value=null,B!==void 0&&(_.showMessage("Participant créé avec succès."),c.value.Participants=(c.value.Participants||[]).concat(B),f.value=Pe(B))}const f=D(null);async function v(B){if(f.value==null||c.value==null)return;const x=await _.ParticipantsUpdate(B);f.value=null,x!==void 0&&(_.showMessage("Participant modifié avec succès."),n())}const C=D(null);async function p(){if(C.value==null||c.value==null)return;const B=C.value.Participant.Id,x=await _.ParticipantsDelete({id:B});C.value=null,x!==void 0&&(_.showMessage("Participant supprimé avec succès."),c.value.Participants=(c.value.Participants||[]).filter(P=>P.Participant.Id!=B))}const I=D(null);async function k(){const B=I.value;B==null||c.value==null||(I.value=null,await _.ParticipantsMove(B)===void 0)||(_.showMessage("Participant déplacé avec succès.",void 0,{title:"Aller au nouveau séjour",action:()=>wt({IdCamp:B.Target,Id:B.Id})}),c.value.Participants=(c.value.Participants||[]).filter(P=>P.Participant.Id!=B.Id))}const A=D(null);async function j(){if(A.value==null)return;const B=A.value.Participant.Id;A.value=null;const x=await _.ParticipantsSetPlaceLiberee({id:B});if(x===void 0||(_.showMessage("Notification de place libérée envoyée avec succès."),c.value==null))return;const P=c.value.Participants?.find(ee=>ee.Participant.Id==B);P.Participant=x}return(B,x)=>{const P=ka,ee=_a,ge=ut,J=ul,S=Ca,te=it;return c.value!=null?(V(),w(q,{key:0,title:"Participants",subtitle:$(ke).label(c.value.Camp.Camp)},{append:t(()=>[e(h,{color:"green",onClick:x[0]||(x[0]=z=>u.value={IdCamp:s.id,IdDossier:0,IdPersonne:0})},{prepend:t(()=>[e(ye,null,{default:t(()=>[...x[9]||(x[9]=[b("mdi-plus",-1)])]),_:1})]),default:t(()=>[x[10]||(x[10]=b(" Ajouter un participant",-1))]),_:1})]),default:t(()=>[e(Y,{class:"mt-4"},{default:t(()=>[o.value?(V(),w(lt,{key:0,type:"table"})):(V(),W("div",cn,[e(P),i.value.length?Q("",!0):(V(),W("div",vn," Aucun participant n'est encore inscrit sur ce séjour. ")),(V(!0),W(ae,null,ce(i.value,(z,N)=>(V(),w(ee,{participant:z,index:N},{actions:t(()=>[e(De,{density:"comfortable"},{default:t(()=>[e(G,{title:"Modifier","prepend-icon":"mdi-pencil",onClick:K=>f.value=z},null,8,["onClick"]),e(re),e(G,{title:"Changer de camp...","prepend-icon":"mdi-file-move",onClick:K=>I.value={Id:z.Participant.Id,Target:0}},null,8,["onClick"]),e(G,{title:"Notifier d'une place disponible.",subtitle:"Envoi un email","prepend-icon":"mdi-email-alert",disabled:z.Participant.Statut==$(Xe).Inscrit||z.Participant.Statut==$(Xe).EnAttenteReponse,onClick:K=>A.value=z},null,8,["disabled","onClick"]),e(re),e(G,{title:"Aller à la personne",subtitle:`(ID : ${z.Personne.Id})`,onClick:K=>$(Ge)(z.Personne.Id)},null,8,["subtitle","onClick"]),e(G,{title:"Aller au dossier",subtitle:`(ID : ${z.Participant.IdDossier})`,onClick:K=>$(kt)(z.Participant.IdDossier)},null,8,["subtitle","onClick"]),e(re),e(G,{title:"Supprimer","prepend-icon":"mdi-delete",onClick:K=>C.value=z},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["participant","index"]))),256))]))]),_:1}),u.value!=null?(V(),w(Z,{key:0,"model-value":u.value!=null,"onUpdate:modelValue":x[3]||(x[3]=z=>u.value=null),"max-width":"600px"},{default:t(()=>[e(q,{title:"Créer un participant"},{default:t(()=>[e(Y,null,{default:t(()=>[e(L,null,{default:t(()=>[e(g,{cols:"12"},{default:t(()=>[e(ge,{label:"Participant",modelValue:u.value.IdPersonne,"onUpdate:modelValue":x[1]||(x[1]=z=>u.value.IdPersonne=z),"initial-personne":"",api:{SelectPersonne:$(_).SelectPersonne.bind($(_))}},null,8,["modelValue","api"])]),_:1}),e(g,{cols:"12"},{default:t(()=>[e(J,{modelValue:u.value.IdDossier,"onUpdate:modelValue":x[2]||(x[2]=z=>u.value.IdDossier=z)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ue),e(h,{color:"green",onClick:r,disabled:!(u.value.IdDossier&&u.value.IdPersonne)},{default:t(()=>[...x[11]||(x[11]=[b("Créer",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])):Q("",!0),f.value!=null?(V(),w(Z,{key:1,"model-value":f.value!=null,"onUpdate:modelValue":x[4]||(x[4]=z=>f.value=null),"max-width":"800px"},{default:t(()=>[e(S,{participant:f.value.Participant,personne:f.value.Personne,api:{SelectPersonne:$(_).SelectPersonne.bind($(_))},onSave:v},null,8,["participant","personne","api"])]),_:1},8,["model-value"])):Q("",!0),C.value!=null?(V(),w(Z,{key:2,"model-value":C.value!=null,"onUpdate:modelValue":x[5]||(x[5]=z=>C.value=null),"max-width":"600px"},{default:t(()=>[e(q,{title:"Supprimer le participant"},{default:t(()=>[e(Y,null,{default:t(()=>[x[12]||(x[12]=b(" Confirmez-vous la suppression du participant ",-1)),T("b",null,U($(Ee).label(C.value.Personne)),1),x[13]||(x[13]=b(" ? ",-1)),x[14]||(x[14]=T("br",null,null,-1)),x[15]||(x[15]=T("br",null,null,-1)),x[16]||(x[16]=b(" Attention, cette opération est irréversible. ",-1))]),_:1}),e(se,null,{default:t(()=>[e(ue),e(h,{color:"red",onClick:p},{default:t(()=>[...x[17]||(x[17]=[b("Supprimer",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])):Q("",!0),I.value!=null?(V(),w(Z,{key:3,"model-value":I.value!=null,"onUpdate:modelValue":x[7]||(x[7]=z=>I.value=null),"max-width":"500px"},{default:t(()=>[e(q,{title:"Déplacer le participant"},{default:t(()=>[e(Y,null,{default:t(()=>[e(te,{label:"Nouveau séjour",camps:m.value,modelValue:I.value.Target,"onUpdate:modelValue":x[6]||(x[6]=z=>I.value.Target=z)},null,8,["camps","modelValue"])]),_:1}),e(se,null,{default:t(()=>[e(ue),e(h,{onClick:k,disabled:I.value.Target==s.id||!I.value.Target},{default:t(()=>[...x[18]||(x[18]=[b("Déplacer",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])):Q("",!0),A.value!=null?(V(),w(Z,{key:4,"model-value":A.value!=null,"onUpdate:modelValue":x[8]||(x[8]=z=>A.value=null),"max-width":"500px"},{default:t(()=>[e(q,{title:"Notifier d'une place disponible"},{default:t(()=>[e(Y,null,{default:t(()=>[b(" Confirmez-vous l'envoi d'une notification au responsable de "+U($(Ee).label(A.value.Personne))+" indiquant qu'une place est disponible ? ",1),x[19]||(x[19]=T("br",null,null,-1)),x[20]||(x[20]=T("br",null,null,-1)),b(" Le nouveau statut de "+U(A.value.Personne.Prenom)+" sera : ",1),T("i",null,U($(Zl)[$(Xe).EnAttenteReponse]),1),x[21]||(x[21]=b(". ",-1))]),_:1}),e(se,null,{default:t(()=>[e(ue),e(h,{onClick:j},{default:t(()=>[...x[22]||(x[22]=[b("Notifier",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])):Q("",!0)]),_:1},8,["subtitle"])):(V(),w(lt,{key:1,type:"card"}))}}}),fn=X({__name:"camps",setup(l){const s=nt(),o=F(()=>cu(s.currentRoute.value.query)),m=F(()=>o.value.idCamp);function a(c){const n=s.currentRoute.value;s.push({path:n.path,query:{idCamp:c.Camp.Camp.Id}})}function i(){const c=s.currentRoute.value;s.push({path:c.path,query:{}})}return(c,n)=>(V(),W(ae,null,[e(vt,{title:"Gestion des séjours"},{default:t(()=>[m.value!==null?(V(),w(h,{key:0,onClick:i},{prepend:t(()=>[e(ye,null,{default:t(()=>[...n[0]||(n[0]=[b("mdi-view-list",-1)])]),_:1})]),default:t(()=>[n[1]||(n[1]=b(" Retour à la liste",-1))]),_:1})):Q("",!0)]),_:1}),m.value===void 0?(V(),w(mn,{key:0,onShowParticipants:a})):(V(),w(pn,{key:1,id:m.value,"id-participant":o.value.idParticipant},null,8,["id","id-participant"]))],64))}}),fl=X({__name:"MergeCard",props:{from:{}},emits:["merge"],setup(l,{emit:s}){const o=l,m=s,a=D(0),i=D(!0);return(c,n)=>{const d=ul;return V(),w(q,{title:"Fusionner le dossier vers",subtitle:"Les participants, paiements et messages seront copiés vers le dossier cible."},{default:t(()=>[e(Y,null,{default:t(()=>[e(L,null,{default:t(()=>[e(g,{cols:"12"},{default:t(()=>[e(d,{modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=u=>a.value=u)},null,8,["modelValue"])]),_:1}),e(g,{cols:"12"},{default:t(()=>[e(qe,{density:"compact",label:"Notifier par email",hint:"Le reponsable du dossier absorbé sera averti du changement d'espace personnel.","persistent-hint":"",modelValue:i.value,"onUpdate:modelValue":n[1]||(n[1]=u=>i.value=u)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ue),e(h,{disabled:a.value==0||a.value==o.from,onClick:n[2]||(n[2]=u=>m("merge",{From:o.from,To:a.value,Notifie:i.value}))},{default:t(()=>[...n[3]||(n[3]=[b("Fusionner",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})}}}),yn={key:1,class:"text-center font-italic"},bn={key:2},gn=X({__name:"PannelInscriptions",emits:["goTo","empty"],setup(l,{emit:s}){const o=s,m=D(!1);Oe(async()=>{await i(),a.value.length||o("empty")});const a=D([]);async function i(){m.value=!0;const I=await _.InscriptionsGet();m.value=!1,I!==void 0&&(a.value=I||[])}const c=D(""),n=F(()=>{const I=al(c.value);return a.value.filter(k=>Ee.match(k.Responsable,I)||k.Participants?.some(A=>Ee.match(A.Personne,I)||ke.match(A.Camp,I)))});async function d(I,k){const A=await _.InscriptionsIdentifiePersonne({IdDossier:I,Target:k});if(A===void 0)return;_.showMessage("Profil identifié avec succès.");const j=a.value.findIndex(B=>B.Dossier.Id==I);a.value[j]=A}const u=D(null);async function r(I,k){if(!u.value)return;const A=u.value.inscription.Dossier.Id;u.value=null;const j=await _.InscriptionsValide({IdDossier:A,Statuts:I,SendMail:k});if(j!==void 0)if(j.Dossier.IsValidated)_.showMessage("Inscription validée avec succès.","",{title:"Aller au dossier",action:()=>o("goTo",A)}),a.value=a.value.filter(B=>B.Dossier.Id!=A);else{_.showMessage("Participant validé avec succès.");const B=a.value.findIndex(x=>x.Dossier.Id==A);a.value[B]=j}}async function f(I){await _.DossiersDelete({id:I.Dossier.Id})!==void 0&&(_.showMessage("Inscription supprimée avec succès."),a.value=a.value.filter(A=>A.Dossier.Id!=I.Dossier.Id))}async function v(I,k){if(await _.ParticipantsDelete({id:k})===void 0)return;_.showMessage("Participant supprimé avec succès.");const j=a.value.find(B=>B.Dossier.Id==I);j.Participants=(j.Participants||[]).filter(B=>B.Participant.Id!=k)}const C=D(null);async function p(I){C.value=null,await _.DossiersMerge(I)!==void 0&&(_.showMessage("Inscriptions fusionnées avec succès."),i())}return(I,k)=>{const A=Pa;return V(),w(q,{title:"Inscriptions",subtitle:"En attente de validation",class:"ma-2"},{append:t(()=>[e(fe,{width:"300","append-inner-icon":"mdi-magnify",label:"Rechercher","hide-details":"",modelValue:c.value,"onUpdate:modelValue":k[0]||(k[0]=j=>c.value=j)},null,8,["modelValue"])]),default:t(()=>[e(Y,null,{default:t(()=>[m.value?(V(),w(lt,{key:0})):a.value.length?(V(),W("div",bn,[(V(!0),W(ae,null,ce(n.value,(j,B)=>(V(),w(xa,{class:"my-1",user:null,key:B,inscription:j,onIdentifie:x=>d(j.Dossier.Id,x),onValide:x=>u.value={inscription:j,participants:x===void 0?void 0:[x]},onMerge:x=>C.value=j.Dossier.Id,onDelete:x=>f(j),onDeleteParticipant:x=>v(j.Dossier.Id,x),api:{SearchSimilaires:$(_).InscriptionsSearchSimilaires.bind($(_)),SelectPersonne:$(_).SelectPersonne.bind($(_))}},null,8,["inscription","onIdentifie","onValide","onMerge","onDelete","onDeleteParticipant","api"]))),128))])):(V(),W("div",yn," Il n'y a aucune inscription à valider. "))]),_:1}),e(Z,{"model-value":C.value!=null,"onUpdate:modelValue":k[1]||(k[1]=j=>C.value=null),"max-width":"600px"},{default:t(()=>[C.value!=null?(V(),w(fl,{key:0,from:C.value,onMerge:p},null,8,["from"])):Q("",!0)]),_:1},8,["model-value"]),e(Z,{"model-value":u.value!=null,"onUpdate:modelValue":k[2]||(k[2]=j=>u.value=null),"max-width":"800px"},{default:t(()=>[u.value?(V(),w(A,{key:0,inscription:u.value.inscription,"id-participants":u.value.participants,onValide:r},null,8,["inscription","id-participants"])):Q("",!0)]),_:1},8,["model-value"])]),_:1})}}}),Vn={class:"text-grey"},kn={class:"text-grey"},Cn={key:0},_n=X({__name:"FactureCard",props:{dossier:{}},setup(l){const s=l,o=F(()=>(s.dossier.Participants||[]).filter(n=>n.Participant.Statut!=Xe.Inscrit).map(n=>Ee.label(n.Personne))),m=F(()=>(s.dossier.Participants||[]).filter(n=>n.Participant.Statut==Xe.Inscrit).map(n=>({Label:Ee.label(n.Personne),Camp:ke.label(n.Camp),Prix:xe.montant(n.Camp.Prix),Bilan:s.dossier.Bilan.Inscrits[n.Participant.Id]})));function a(n){return!!(n.Remises.ReducEnfants||n.Remises.ReducEquipiers||n.Remises.ReducSpeciale.Cent)}function i(n){const d=[];return n.ReducEnfants&&d.push(`Enfants : ${n.ReducEnfants}%`),n.ReducEquipiers&&d.push(`Enfants : ${n.ReducEquipiers}%`),n.ReducSpeciale.Cent&&d.push(`Remise : ${xe.montant(n.ReducSpeciale)}`),d.join("  ;  ")}const c=F(()=>{const n=Object.values(s.dossier.Paiements||{});return n.sort((d,u)=>new Date(d.Time).valueOf()-new Date(u.Time).valueOf()),n});return(n,d)=>(V(),w(q,{title:"Suivi financier",subtitle:o.value.length?`Les participants en liste d'attente (${o.value.join(", ")}) ne sont pas pris en compte.`:"","min-width":"900px"},{default:t(()=>[e(Y,null,{default:t(()=>[e(L,null,{default:t(()=>[e(g,{cols:"3"},{default:t(()=>[...d[0]||(d[0]=[b("Participant",-1)])]),_:1}),e(g,{cols:"2",class:"text-center"},{default:t(()=>[...d[1]||(d[1]=[b("Prix du séjour",-1)])]),_:1}),e(g,{cols:"2",class:"text-center"},{default:t(()=>[...d[2]||(d[2]=[b("Prix avec option",-1)])]),_:1}),e(g,{cols:"3",class:"text-center"},{default:t(()=>[...d[3]||(d[3]=[b("Aides extérieures",-1)])]),_:1}),e(g,{cols:"2",class:"text-right"},{default:t(()=>[...d[4]||(d[4]=[b("Sous-total",-1)])]),_:1})]),_:1}),e(re,{thickness:"1",class:"my-2"}),(V(!0),W(ae,null,ce(m.value,u=>(V(),W(ae,null,[e(L,null,{default:t(()=>[e(g,{"align-self":"center",cols:"3"},{default:t(()=>[b(U(u.Label)+" ",1),d[5]||(d[5]=T("br",null,null,-1)),T("span",Vn,U(u.Camp),1)]),_:2},1024),e(g,{"align-self":"center",cols:"2",class:"text-center"},{default:t(()=>[b(U(u.Prix),1)]),_:2},1024),e(g,{"align-self":"center",cols:"2",class:"text-center"},{default:t(()=>[b(U($(xe).montant(u.Bilan.AvecOption))+" ",1),d[6]||(d[6]=T("br",null,null,-1)),T("span",kn,U(u.Bilan.AvecOptionDescription),1)]),_:2},1024),e(g,{"align-self":"center",cols:"3",class:"text-center"},{default:t(()=>[u.Bilan.Aides?.length?Q("",!0):(V(),W("span",Cn,"-")),(V(!0),W(ae,null,ce(u.Bilan.Aides,r=>(V(),w(Ce,null,{default:t(()=>[b(U(r.Structure)+" : "+U($(xe).montant(r.Montant)),1)]),_:2},1024))),256))]),_:2},1024),e(g,{"align-self":"center",cols:"2",class:"text-right"},{default:t(()=>[b(U(u.Bilan.AvecAides),1)]),_:2},1024)]),_:2},1024),a(u.Bilan)?(V(),w(L,{key:0,"no-gutters":""},{default:t(()=>[e(g,{cols:"10",class:"text-right"},{default:t(()=>[T("i",null,U(i(u.Bilan.Remises)),1)]),_:2},1024),e(g,{cols:"2",class:"text-right"},{default:t(()=>[b(U(u.Bilan.Net),1)]),_:2},1024)]),_:2},1024)):Q("",!0)],64))),256)),e(re,{thickness:"1",class:"my-2"}),e(L,null,{default:t(()=>[e(g,{cols:"10",class:"text-right"},{default:t(()=>[...d[7]||(d[7]=[b("Total demandé",-1)])]),_:1}),e(g,{cols:"2",class:"text-right"},{default:t(()=>[b(U(s.dossier.Bilan.Demande),1)]),_:1})]),_:1}),e(re,{thickness:"1",class:"my-2"}),(V(!0),W(ae,null,ce(c.value,u=>(V(),w(L,null,{default:t(()=>[e(g,null,{default:t(()=>[b(" Paiement de "+U(u.Payeur)+", le "+U($(xe).date(u.Time)),1)]),_:2},1024),e(g,{cols:"2",class:"text-right"},{default:t(()=>[b(U(u.IsRemboursement?"+":"-")+U($(xe).montant(u.Montant)),1)]),_:2},1024)]),_:2},1024))),256)),e(L,null,{default:t(()=>[e(g,{cols:"10",class:"text-right"},{default:t(()=>[...d[8]||(d[8]=[b("Solde",-1)])]),_:1}),e(g,{cols:"2",class:"text-right"},{default:t(()=>[T("b",null,U(s.dossier.Bilan.Restant),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["subtitle"]))}});function Be(l){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return String(l).padStart(s,"0")}const xn=Ue({allowedValues:Function,ampm:Boolean,color:String,disabled:Boolean,displayedValue:null,double:Boolean,format:{type:Function,default:l=>l},max:{type:Number,required:!0},min:{type:Number,required:!0},scrollable:Boolean,readonly:Boolean,rotate:{type:Number,default:0},step:{type:Number,default:1},modelValue:{type:Number}},"VTimePickerClock"),Wt=Re()({name:"VTimePickerClock",props:xn(),emits:{change:l=>!0,input:l=>!0},setup(l,s){let{emit:o}=s;const m=D(null),a=D(null),i=D(void 0),c=D(!1),n=D(null),d=D(null),u=ea(y=>o("change",y),750),{textColorClasses:r,textColorStyles:f}=ta(()=>l.color),{backgroundColorClasses:v,backgroundColorStyles:C}=Gt(()=>l.color),p=F(()=>l.max-l.min+1),I=F(()=>l.double?p.value/2:p.value),k=F(()=>360/I.value),A=F(()=>k.value*Math.PI/180),j=F(()=>l.modelValue==null?l.min:l.modelValue),B=F(()=>.62),x=F(()=>{const y=[];for(let O=l.min;O<=l.max;O=O+l.step)y.push(O);return y});Me(()=>l.modelValue,y=>{i.value=y});function P(y){i.value!==y&&(i.value=y),o("input",y)}function ee(y){return!l.allowedValues||l.allowedValues(y)}function ge(y){if(!l.scrollable||l.disabled)return;y.preventDefault();const O=Math.sign(-y.deltaY||1);let R=j.value;do R=R+O,R=(R-l.min+p.value)%p.value+l.min;while(!ee(R)&&R!==j.value);R!==l.displayedValue&&P(R),u(R)}function J(y){return l.double&&y-l.min>=I.value}function S(y){return J(y)?B.value:1}function te(y){const O=l.rotate*Math.PI/180;return{x:Math.sin((y-l.min)*A.value+O)*S(y),y:-Math.cos((y-l.min)*A.value+O)*S(y)}}function z(y,O){const R=(Math.round(y/k.value)+(O?I.value:0))%p.value+l.min;return y<360-k.value/2?R:O?l.max-I.value+1:l.min}function N(y){const{x:O,y:R}=te(y);return{left:`${Math.round(50+O*50)}%`,top:`${Math.round(50+R*50)}%`}}function K(y,O){const R=O.x-y.x,pe=O.y-y.y;return Math.sqrt(R*R+pe*pe)}function oe(y,O){const R=2*Math.atan2(O.y-y.y-K(y,O),O.x-y.x);return Math.abs(R*180/Math.PI)}function le(y){n.value===null&&(n.value=y),d.value=y,P(y)}function ve(y){if(y.preventDefault(),!c.value&&y.type!=="click"||!m.value)return;const{width:O,top:R,left:pe}=m.value?.getBoundingClientRect(),{width:ne}=a.value?.getBoundingClientRect()??{width:0},{clientX:Ie,clientY:E}="touches"in y?y.touches[0]:y,H={x:O/2,y:-O/2},de={x:Ie-pe,y:R-E},me=Math.round(oe(H,de)-l.rotate+360)%360,Dt=l.double&&K(H,de)<(ne+ne*B.value)/4,gl=Math.ceil(15/k.value);let Ye;for(let st=0;st<gl;st++)if(Ye=z(me+st*k.value,Dt),ee(Ye)||(Ye=z(me-st*k.value,Dt),ee(Ye)))return le(Ye)}function be(y){l.disabled||(y.preventDefault(),window.addEventListener("mousemove",ve),window.addEventListener("touchmove",ve),window.addEventListener("mouseup",M),window.addEventListener("touchend",M),n.value=null,d.value=null,c.value=!0,ve(y))}function M(y){y.stopPropagation(),window.removeEventListener("mousemove",ve),window.removeEventListener("touchmove",ve),window.removeEventListener("mouseup",M),window.removeEventListener("touchend",M),c.value=!1,d.value!==null&&ee(d.value)&&o("change",d.value)}Le(()=>T("div",{class:Ve([{"v-time-picker-clock":!0,"v-time-picker-clock--indeterminate":l.modelValue==null,"v-time-picker-clock--readonly":l.readonly}]),onMousedown:be,onTouchstart:be,onWheel:ge,ref:m},[T("div",{class:"v-time-picker-clock__inner",ref:a},[T("div",{class:Ve([{"v-time-picker-clock__hand":!0,"v-time-picker-clock__hand--inner":J(l.modelValue)},r.value]),style:et([{transform:`rotate(${l.rotate+k.value*(j.value-l.min)}deg) scaleY(${S(j.value)})`},f.value])},null),x.value.map(y=>{const O=y===j.value;return T("div",{class:Ve([{"v-time-picker-clock__item":!0,"v-time-picker-clock__item--active":O,"v-time-picker-clock__item--disabled":l.disabled||!ee(y)},O&&v.value]),style:et([N(y),O&&C.value])},[T("span",null,[l.format(y)])])})])]))}}),Pn=Ue({ampm:Boolean,color:String,disabled:Boolean,hour:Number,minute:Number,second:Number,period:String,readonly:Boolean,useSeconds:Boolean,value:Number,viewMode:String},"VTimePickerControls"),Jt=Re()({name:"VTimePickerControls",props:Pn(),emits:{"update:period":l=>!0,"update:viewMode":l=>!0},setup(l,s){let{emit:o,slots:m}=s;const{t:a}=He();return Le(()=>{let i=l.hour;return l.ampm&&(i=i?(i-1)%12+1:12),T("div",{class:"v-time-picker-controls"},[T("div",{class:Ve({"v-time-picker-controls__time":!0,"v-time-picker-controls__time--with-seconds":l.useSeconds})},[e(h,{active:l.viewMode==="hour",color:l.viewMode==="hour"?l.color:void 0,disabled:l.disabled,variant:"tonal",class:Ve({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time--with-ampm__btn":l.ampm,"v-time-picker-controls__time--with-seconds__btn":l.useSeconds}),text:l.hour==null?"--":Be(`${i}`),onClick:()=>o("update:viewMode","hour")},null),T("span",{class:Ve(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":l.useSeconds}])},[b(":")]),e(h,{active:l.viewMode==="minute",color:l.viewMode==="minute"?l.color:void 0,class:Ve({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":l.viewMode==="minute","v-time-picker-controls__time--with-ampm__btn":l.ampm,"v-time-picker-controls__time--with-seconds__btn":l.useSeconds}),disabled:l.disabled,variant:"tonal",text:l.minute==null?"--":Be(l.minute),onClick:()=>o("update:viewMode","minute")},null),l.useSeconds&&T("span",{class:Ve(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":l.useSeconds}]),key:"secondsDivider"},[b(":")]),l.useSeconds&&e(h,{key:"secondsVal",active:l.viewMode==="second",color:l.viewMode==="second"?l.color:void 0,variant:"tonal",onClick:()=>o("update:viewMode","second"),class:Ve({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":l.viewMode==="second","v-time-picker-controls__time--with-seconds__btn":l.useSeconds}),disabled:l.disabled,text:l.second==null?"--":Be(l.second)},null),l.ampm&&T("div",{class:"v-time-picker-controls__ampm"},[e(h,{active:l.period==="am",color:l.period==="am"?l.color:void 0,class:Ve({"v-time-picker-controls__ampm__am":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":l.period==="am"}),disabled:l.disabled,text:a("$vuetify.timePicker.am"),variant:l.disabled&&l.period==="am"?"elevated":"tonal",onClick:()=>l.period!=="am"?o("update:period","am"):null},null),e(h,{active:l.period==="pm",color:l.period==="pm"?l.color:void 0,class:Ve({"v-time-picker-controls__ampm__pm":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":l.period==="pm"}),disabled:l.disabled,text:a("$vuetify.timePicker.pm"),variant:l.disabled&&l.period==="pm"?"elevated":"tonal",onClick:()=>l.period!=="pm"?o("update:period","pm"):null},null)])])])}),{}}}),wn=he(24),yl=he(12),Dn=yl.map(l=>l+12);he(60);const Sn=Ue({allowedHours:[Function,Array],allowedMinutes:[Function,Array],allowedSeconds:[Function,Array],disabled:Boolean,format:{type:String,default:"ampm"},max:String,min:String,viewMode:{type:String,default:"hour"},period:{type:String,default:"am",validator:l=>["am","pm"].includes(l)},modelValue:null,readonly:Boolean,scrollable:Boolean,useSeconds:Boolean,...je(nl({title:"$vuetify.timePicker.title"}),["landscape"])},"VTimePicker"),In=Re()({name:"VTimePicker",props:Sn(),emits:{"update:hour":l=>!0,"update:minute":l=>!0,"update:period":l=>!0,"update:second":l=>!0,"update:modelValue":l=>!0,"update:viewMode":l=>!0},setup(l,s){let{emit:o,slots:m}=s;const{t:a}=He(),i=D(null),c=D(null),n=D(null),d=D(null),u=D(null),r=D(null),f=$e(l,"period","am"),v=$e(l,"viewMode","hour"),C=D(null),p=D(null),I=F(()=>{let N;if(l.allowedHours instanceof Array?N=le=>l.allowedHours.includes(le):N=l.allowedHours,!l.min&&!l.max)return N;const K=l.min?Number(l.min.split(":")[0]):0,oe=l.max?Number(l.max.split(":")[0]):23;return le=>le>=Number(K)&&le<=Number(oe)&&(!N||N(le))}),k=F(()=>{let N;const K=!I.value||i.value===null||I.value(i.value);if(l.allowedMinutes instanceof Array?N=O=>l.allowedMinutes.includes(O):N=l.allowedMinutes,!l.min&&!l.max)return K?N:()=>!1;const[oe,le]=l.min?l.min.split(":").map(Number):[0,0],[ve,be]=l.max?l.max.split(":").map(Number):[23,59],M=oe*60+Number(le),y=ve*60+Number(be);return O=>{const R=60*i.value+O;return R>=M&&R<=y&&K&&(!N||N(O))}}),A=F(()=>{let N;const oe=(!I.value||i.value===null||I.value(i.value))&&(!k.value||c.value===null||k.value(c.value));if(l.allowedSeconds instanceof Array?N=ne=>l.allowedSeconds.includes(ne):N=l.allowedSeconds,!l.min&&!l.max)return oe?N:()=>!1;const[le,ve,be]=l.min?l.min.split(":").map(Number):[0,0,0],[M,y,O]=l.max?l.max.split(":").map(Number):[23,59,59],R=le*3600+ve*60+Number(be||0),pe=M*3600+y*60+Number(O||0);return ne=>{const Ie=3600*i.value+60*c.value+ne;return Ie>=R&&Ie<=pe&&oe&&(!N||N(ne))}}),j=F(()=>l.format==="ampm");Me(()=>l.period,N=>S(N)),Me(()=>l.modelValue,N=>ge(N)),Oe(()=>{ge(l.modelValue)});function B(){return i.value!=null&&c.value!=null&&(!l.useSeconds||n.value!=null)?`${Be(i.value)}:${Be(c.value)}`+(l.useSeconds?`:${Be(n.value)}`:""):null}function x(){const N=B();N!==null&&o("update:modelValue",N)}function P(N){return N?(N-1)%12+1:12}function ee(N,K){return N%12+(K==="pm"?12:0)}function ge(N){if(N==null||N==="")i.value=null,c.value=null,n.value=null;else if(N instanceof Date)i.value=N.getHours(),c.value=N.getMinutes(),n.value=N.getSeconds();else{const[K,,oe,,le,ve]=N.trim().toLowerCase().match(/^(\d+):(\d+)(:(\d+))?([ap]m)?$/)||new Array(6);i.value=ve?ee(parseInt(K,10),ve):parseInt(K,10),c.value=parseInt(oe,10),n.value=parseInt(le||0,10)}f.value=i.value==null||i.value<12?"am":"pm"}function J(N,K){const oe=I.value;if(!oe)return K;const le=j.value?K<12?yl:Dn:wn;return((le.find(be=>oe((be+K)%le.length+le[0]))||0)+K)%le.length+le[0]}function S(N){if(f.value=N,i.value!=null){const K=i.value+(f.value==="am"?-12:12);i.value=J("hour",K)}return o("update:period",N),x(),!0}function te(N){v.value==="hour"?i.value=j.value?ee(N,f.value):N:v.value==="minute"?c.value=N:n.value=N}function z(N){switch(v.value||"hour"){case"hour":o("update:hour",N);break;case"minute":o("update:minute",N);break;case"second":o("update:second",N);break}const K=i.value!==null&&c.value!==null&&(l.useSeconds?n.value!==null:!0);v.value==="hour"?v.value="minute":l.useSeconds&&v.value==="minute"&&(v.value="second"),!(i.value===d.value&&c.value===u.value&&(!l.useSeconds||n.value===r.value)||B()===null)&&(d.value=i.value,u.value=c.value,l.useSeconds&&(r.value=n.value),K&&x())}Le(()=>{const N=rt.filterProps(l),K=Jt.filterProps(l),oe=Wt.filterProps(je(l,["format","modelValue","min","max"]));return e(rt,ie(N,{color:void 0,class:["v-time-picker",l.class],style:l.style}),{title:()=>m.title?.()??T("div",{class:"v-time-picker__title"},[a(l.title)]),header:()=>e(Jt,ie(K,{ampm:j.value,hour:i.value,minute:c.value,period:f.value,second:n.value,viewMode:v.value,"onUpdate:period":le=>S(le),"onUpdate:viewMode":le=>v.value=le,ref:C}),null),default:()=>e(Wt,ie(oe,{allowedValues:v.value==="hour"?I.value:v.value==="minute"?k.value:A.value,double:v.value==="hour"&&!j.value,format:v.value==="hour"?j.value?P:le=>le:le=>Be(le,2),max:v.value==="hour"?j.value&&f.value==="am"?11:23:59,min:v.value==="hour"&&j.value&&f.value==="pm"?12:0,size:20,step:v.value==="hour"?1:5,modelValue:v.value==="hour"?i.value:v.value==="minute"?c.value:n.value,onChange:z,onInput:te,ref:p}),null),actions:m.actions})})}}),An=X({__name:"TimeField",props:we({hideDetails:{type:Boolean},readonly:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=l,o=_e(l,"modelValue"),m=F(()=>new Date(o.value).toLocaleTimeString(void 0,{hour:"numeric",minute:"numeric"}));function a(n){const[d,u]=n.split(":"),r=new Date(o.value);r.setHours(Number(d),Number(u)),o.value=r.toISOString()}function i(n){const d=new Date(n),u=new Date(o.value);d.setHours(u.getHours(),u.getMinutes(),u.getSeconds()),o.value=d.toISOString()}const c=D(!1);return(n,d)=>{const u=pl;return V(),w(L,{"no-gutters":""},{default:t(()=>[e(g,null,{default:t(()=>[e(u,{class:"mr-2",label:"Date","model-value":$(tl)(new Date(o.value)),"onUpdate:modelValue":i,"hide-details":s.hideDetails,readonly:s.readonly},null,8,["model-value","hide-details","readonly"])]),_:1}),e(g,{cols:"auto"},{default:t(()=>[...d[1]||(d[1]=[T("div",{class:"ma-2"},null,-1)])]),_:1}),e(g,null,{default:t(()=>[e(Se,{"close-on-content-click":!1,modelValue:c.value,"onUpdate:modelValue":d[0]||(d[0]=r=>c.value=r)},{activator:t(({props:r})=>[e(fe,ie({class:"center-text"},r,{variant:"outlined",density:"compact","hide-details":s.hideDetails,label:"Moment","model-value":m.value}),null,16,["hide-details","model-value"])]),default:t(()=>[e(In,{"model-value":new Date(o.value),"onUpdate:modelValue":a,format:"24hr"},null,8,["model-value"])]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),Mn=xt(An,[["__scopeId","data-v-32955f86"]]),$n=X({__name:"ModePaiementField",props:we({hideDetails:{type:Boolean},readonly:{type:Boolean},rules:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=l,o=_e(l,"modelValue"),m=tt(la);return(a,i)=>(V(),w(Te,{label:"Mode de paiement",variant:"outlined",density:"compact",items:$(m),readonly:s.readonly,"hide-details":s.hideDetails,modelValue:o.value,"onUpdate:modelValue":i[0]||(i[0]=c=>o.value=c),rules:s.rules},null,8,["items","readonly","hide-details","modelValue","rules"]))}}),Un=X({__name:"PaiementEditCard",props:{paiement:{}},emits:["update","delete"],setup(l,{emit:s}){const o=l,m=s,a=D(Pe(o.paiement)),i=F(()=>!0),c=D(!1);return(n,d)=>{const u=$n,r=We,f=Mn;return V(),w(q,{title:"Modifier le paiement"},{default:t(()=>[e(Z,{modelValue:c.value,"onUpdate:modelValue":d[1]||(d[1]=v=>c.value=v),"max-width":"400px"},{default:t(()=>[e(q,{title:"Confirmation"},{default:t(()=>[e(Y,null,{default:t(()=>[...d[11]||(d[11]=[b(" Confirmez-vous la suppression de ce paiement ? ",-1),T("br",null,null,-1),T("br",null,null,-1),b(" Attention, cette opération est irréversible. ",-1)])]),_:1}),e(se,null,{default:t(()=>[e(ue),e(h,{color:"red",onClick:d[0]||(d[0]=v=>{c.value=!1,m("delete")})},{default:t(()=>[...d[12]||(d[12]=[b("Supprimer",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Y,null,{default:t(()=>[e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[e(fe,{density:"compact",variant:"outlined","hide-details":"",label:"Payé par",modelValue:a.value.Payeur,"onUpdate:modelValue":d[2]||(d[2]=v=>a.value.Payeur=v)},null,8,["modelValue"])]),_:1}),e(g,null,{default:t(()=>[e(fe,{density:"compact",variant:"outlined","hide-details":"",label:"Description (optionelle)",modelValue:a.value.Label,"onUpdate:modelValue":d[3]||(d[3]=v=>a.value.Label=v)},null,8,["modelValue"])]),_:1})]),_:1}),e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[e(u,{modelValue:a.value.Mode,"onUpdate:modelValue":d[4]||(d[4]=v=>a.value.Mode=v),"hide-details":""},null,8,["modelValue"])]),_:1}),e(g,null,{default:t(()=>[e(r,{label:"Montant",modelValue:a.value.Montant,"onUpdate:modelValue":d[5]||(d[5]=v=>a.value.Montant=v),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[e(qe,{"hide-details":"",density:"compact",label:"Remboursement ?",modelValue:a.value.IsRemboursement,"onUpdate:modelValue":d[6]||(d[6]=v=>a.value.IsRemboursement=v)},null,8,["modelValue"])]),_:1})]),_:1}),e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[e(f,{modelValue:a.value.Time,"onUpdate:modelValue":d[7]||(d[7]=v=>a.value.Time=v),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[e(fe,{density:"compact",variant:"outlined",label:"Détails (optionnel)",modelValue:a.value.Details,"onUpdate:modelValue":d[8]||(d[8]=v=>a.value.Details=v)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(h,{color:"red",onClick:d[9]||(d[9]=v=>c.value=!0)},{default:t(()=>[...d[13]||(d[13]=[b("Supprimer le paiement",-1)])]),_:1}),e(ue),e(h,{onClick:d[10]||(d[10]=v=>m("update",a.value)),disabled:!i.value},{default:t(()=>[...d[14]||(d[14]=[b("Enregistrer",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})}}}),Fn=X({__name:"DossierEditCard",props:{responsable:{},dossier:{}},emits:["save"],setup(l,{emit:s}){const o=l,m=s,a=D(Pe(o.dossier));return(i,c)=>{const n=ut,d=La,u=Pt;return V(),w(q,null,{default:t(()=>[e(Y,null,{default:t(()=>[e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[e(n,{label:"Responsable","initial-personne":o.responsable,"model-value":a.value.IdResponsable,"onUpdate:modelValue":c[0]||(c[0]=r=>r?a.value.IdResponsable=r:void 0),api:{SelectPersonne:$(_).SelectPersonne.bind($(_))}},null,8,["initial-personne","model-value","api"])]),_:1})]),_:1}),e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[e(d,{label:"Adresses mail en copie",modelValue:a.value.CopiesMails,"onUpdate:modelValue":c[1]||(c[1]=r=>a.value.CopiesMails=r),rule:$(aa).validMails()},null,8,["modelValue","rule"])]),_:1})]),_:1}),e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[e(u,{"hide-details":"",modelValue:a.value.PartageAdressesOK,"onUpdate:modelValue":c[2]||(c[2]=r=>a.value.PartageAdressesOK=r),label:"Partage des coordonnées"},null,8,["modelValue"])]),_:1})]),_:1}),e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[e(u,{"hide-details":"",modelValue:a.value.DemandeFondSoutien,"onUpdate:modelValue":c[3]||(c[3]=r=>a.value.DemandeFondSoutien=r),label:"Demande le fonds de soutien"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ue),e(h,{onClick:c[4]||(c[4]=r=>m("save",a.value))},{default:t(()=>[...c[5]||(c[5]=[b("Enregistrer",-1)])]),_:1})]),_:1})]),_:1})}}}),Rn=X({__name:"OptionJournee",props:we({camp:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=l,o=_e(l,"modelValue"),m=F(()=>(s.camp.OptionPrix.Jours||[]).map((a,i)=>i));return(a,i)=>(V(),w(q,null,{default:t(()=>[e(Y,null,{default:t(()=>[i[1]||(i[1]=T("div",{class:"text-grey mb-2"}," Le prix est variable en fonction des jours de participation au camp. ",-1)),e(na,{class:"overflow-x-auto",color:"secondary",multiple:"","model-value":o.value?.length?o.value:m.value,"onUpdate:modelValue":i[0]||(i[0]=c=>o.value=c.length==m.value.length?[]:c)},{default:t(()=>[(V(!0),W(ae,null,ce(s.camp.OptionPrix.Jours,(c,n)=>(V(),w(h,null,{default:t(()=>[b("J "+U(n+1),1)]),_:2},1024))),256))]),_:1},8,["model-value"])]),_:1})]),_:1}))}}),Ln=X({__name:"OptionStatut",props:we({camp:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=l,o=_e(l,"modelValue"),m=F(()=>(s.camp.OptionPrix.Statuts||[]).map(i=>({value:i.Id,title:i.Label,subtitle:i.Description}))),a=F(()=>m.value.map(i=>i.value).includes(o.value));return(i,c)=>(V(),w(q,null,{default:t(()=>[e(Y,null,{default:t(()=>[c[1]||(c[1]=T("div",{class:"text-grey mb-4"},"Le prix dépend du statut du participant.",-1)),e(Te,{clearable:"",items:m.value,label:"Statut","model-value":a.value?o.value:null,"onUpdate:modelValue":c[0]||(c[0]=n=>o.value=n??0),variant:"outlined",density:"comfortable","hide-details":""},{item:t(({item:n,props:d})=>[e(G,ie(d,{title:n.title,subtitle:n.raw.subtitle}),null,16,["title","subtitle"])]),_:1},8,["items","model-value"])]),_:1})]),_:1}))}}),hn={key:2},En=X({__name:"ParticipantOptionPrix",props:{camp:{},optionAndQf:{}},emits:["update"],setup(l,{emit:s}){const o=l,m=s,a=D(Pe(o.optionAndQf));return Me(()=>o.optionAndQf,()=>a.value=Pe(o.optionAndQf)),(i,c)=>{const n=Qe;return V(),w(q,{title:"Prix variable",width:"800px"},{default:t(()=>[e(Y,null,{default:t(()=>[e(L,{justify:"space-evenly"},{default:t(()=>[e(g,{"align-self":"center",cols:"3"},{default:t(()=>[e(n,{modelValue:a.value.quotientFamilial,"onUpdate:modelValue":c[0]||(c[0]=d=>a.value.quotientFamilial=d),label:"Quotient familial","hide-details":""},null,8,["modelValue"])]),_:1}),e(re,{thickness:"2",vertical:""}),e(g,{"align-self":"center",cols:"8"},{default:t(()=>[o.camp.OptionPrix.Active==$(Ae).PrixJour?(V(),w(Rn,{key:0,camp:o.camp,modelValue:a.value.options.Jour,"onUpdate:modelValue":c[1]||(c[1]=d=>a.value.options.Jour=d)},null,8,["camp","modelValue"])):o.camp.OptionPrix.Active==$(Ae).PrixStatut?(V(),w(Ln,{key:1,camp:o.camp,modelValue:a.value.options.IdStatut,"onUpdate:modelValue":c[2]||(c[2]=d=>a.value.options.IdStatut=d)},null,8,["camp","modelValue"])):(V(),W("div",hn,"Le camp ne propose pas d'option sur le prix."))]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ue),e(h,{onClick:c[3]||(c[3]=d=>m("update",a.value))},{default:t(()=>[...c[4]||(c[4]=[b("Enregistrer",-1)])]),_:1})]),_:1})]),_:1})}}}),Tn={key:1,class:"mx-1"},On={key:2,class:"mx-1"},Nn={key:3},Bn={key:4,class:"mx-1"},jn=X({__name:"RemisesChip",props:{remises:{}},emits:["update"],setup(l,{emit:s}){const o=l,m=s,a=F(()=>i.value.ReducEnfants!=0||i.value.ReducEquipiers!=0||i.value.ReducSpeciale.Cent!=0),i=D(Pe(o.remises));Me(()=>o.remises,()=>i.value=Pe(o.remises));const c=D(!1);return(n,d)=>{const u=Qe,r=We;return V(),w(Se,{"close-on-content-click":!1,location:"bottom",modelValue:c.value,"onUpdate:modelValue":d[4]||(d[4]=f=>c.value=f)},{activator:t(({props:f})=>[e(q,ie(f,{elevation:"1",color:"grey-lighten-2"}),{default:t(()=>[e(Y,{class:"py-1 px-1"},{default:t(()=>[a.value?Q("",!0):(V(),W(ae,{key:0},[b(" Pas de remises ")],64)),i.value.ReducEnfants?(V(),W("span",Tn," Enfants : "+U(i.value.ReducEnfants)+"% ",1)):Q("",!0),i.value.ReducEquipiers?(V(),W("span",On," Equipiers : "+U(i.value.ReducEquipiers)+"% ",1)):Q("",!0),(i.value.ReducEnfants||i.value.ReducEquipiers)&&i.value.ReducSpeciale.Cent?(V(),W("br",Nn)):Q("",!0),i.value.ReducSpeciale.Cent?(V(),W("span",Bn," Remise : "+U($(xe).montant(i.value.ReducSpeciale)),1)):Q("",!0)]),_:1})]),_:1},16)]),default:t(()=>[e(q,{title:"Modifier les remises",width:"400px"},{default:t(()=>[e(Y,null,{default:t(()=>[e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[e(u,{modelValue:i.value.ReducEnfants,"onUpdate:modelValue":d[0]||(d[0]=f=>i.value.ReducEnfants=f),label:"Remise enfants","hide-details":"",suffix:"%"},null,8,["modelValue"])]),_:1}),e(g,null,{default:t(()=>[e(u,{modelValue:i.value.ReducEquipiers,"onUpdate:modelValue":d[1]||(d[1]=f=>i.value.ReducEquipiers=f),label:"Remise équipiers","hide-details":"",suffix:"%"},null,8,["modelValue"])]),_:1})]),_:1}),e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[e(r,{class:"mt-2",modelValue:i.value.ReducSpeciale,"onUpdate:modelValue":d[2]||(d[2]=f=>i.value.ReducSpeciale=f),label:"Remise spéciale","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ue),e(h,{onClick:d[3]||(d[3]=f=>{m("update",i.value),c.value=!1})},{default:t(()=>[...d[5]||(d[5]=[b("Enregistrer",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),qn=xt(jn,[["__scopeId","data-v-01096379"]]),Yn=X({__name:"AideEditCard",props:{aide:{},file:{},structures:{},participant:{}},emits:["save","deleteFile","uploadFile","showStructureaides"],setup(l,{emit:s}){const o=l,m=s,a=D(Pe(o.aide)),i=F(()=>Object.values(o.structures).map(c=>({value:c.Id,title:c.Nom})));return(c,n)=>{const d=Pt,u=We,r=Qe,f=Ta;return V(),w(q,{title:"Modifier l'aide extérieure",subtitle:`pour ${$(Ee).label(o.participant.Personne)} - ${$(ke).label(o.participant.Camp)}`},{append:t(()=>[e(h,{onClick:n[0]||(n[0]=v=>m("showStructureaides"))},{default:t(()=>[e(ye,null,{default:t(()=>[...n[9]||(n[9]=[b("mdi-view-list",-1)])]),_:1}),n[10]||(n[10]=b(" Structures",-1))]),_:1})]),default:t(()=>[e(Y,null,{default:t(()=>[e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[e(Te,{variant:"outlined",density:"comfortable",label:"Structure",items:i.value,modelValue:a.value.IdStructureaide,"onUpdate:modelValue":n[1]||(n[1]=v=>a.value.IdStructureaide=v)},null,8,["items","modelValue"])]),_:1}),e(g,null,{default:t(()=>[e(d,{modelValue:a.value.Valide,"onUpdate:modelValue":n[2]||(n[2]=v=>a.value.Valide=v),label:"Aide validée","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(L,null,{default:t(()=>[e(g,{"align-self":"center"},{default:t(()=>[e(u,{modelValue:a.value.Valeur,"onUpdate:modelValue":n[3]||(n[3]=v=>a.value.Valeur=v),label:"Montant","hide-details":""},null,8,["modelValue"])]),_:1}),e(g,{"align-self":"center",cols:"auto"},{default:t(()=>[e(d,{"hide-details":"",label:"Par jour",modelValue:a.value.ParJour,"onUpdate:modelValue":n[4]||(n[4]=v=>a.value.ParJour=v)},null,8,["modelValue"])]),_:1}),e(g,{"align-self":"center"},{default:t(()=>[e(r,{label:"Limite",suffix:"jours",modelValue:a.value.NbJoursMax,"onUpdate:modelValue":n[5]||(n[5]=v=>a.value.NbJoursMax=v),disabled:!a.value.ParJour,hint:"0 pour ne pas limiter",min:0,"persistent-hint":""},null,8,["modelValue","disabled"])]),_:1})]),_:1}),e(f,{class:"mt-4",files:o.file?[o.file]:[],title:"Document justificatif","max-docs":1,"in-upload":!1,onDelete:n[6]||(n[6]=v=>m("deleteFile")),onUpload:n[7]||(n[7]=v=>m("uploadFile",v))},null,8,["files"])]),_:1}),e(se,null,{default:t(()=>[e(ue),e(h,{onClick:n[8]||(n[8]=v=>m("save",a.value))},{default:t(()=>[...n[11]||(n[11]=[b("Enregistrer",-1)])]),_:1})]),_:1})]),_:1},8,["subtitle"])}}}),Hn=X({__name:"StructuresPannel",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(l){const s=_e(l,"modelValue"),o=F(()=>Object.values(s.value||{}).sort((d,u)=>d.Nom.localeCompare(u.Nom)));async function m(){const d=await _.StructureaideCreate();if(d===void 0)return;_.showMessage("Structure créée avec succès.");const u=s.value||{};u[d.Id]=d,s.value=u,a.value=d}const a=D(null);async function i(){const d=a.value;if(d==null||(a.value=null,await _.StructureaideUpdate(d)===void 0))return;_.showMessage("Structure modifiée avec succès.");const r=s.value||{};r[d.Id]=d,s.value=r}const c=D(null);async function n(){const d=c.value;if(d==null||(c.value=null,await _.StructureaideDelete({id:d.Id})===void 0))return;const r=s.value||{};delete r[d.Id],s.value=r,_.showMessage("Structure supprimée avec succès.")}return(d,u)=>(V(),w(q,{title:"Structures d'aide",subtitle:"Organismes pouvant distribuer une aide extérieure"},{append:t(()=>[e(h,{onClick:m},{prepend:t(()=>[e(ye,{color:"green"},{default:t(()=>[...u[5]||(u[5]=[b("mdi-plus",-1)])]),_:1})]),default:t(()=>[u[6]||(u[6]=b(" Ajouter une structure ",-1))]),_:1})]),default:t(()=>[e(Y,{class:"overflow-y-auto"},{default:t(()=>[(V(!0),W(ae,null,ce(o.value,r=>(V(),w(L,null,{default:t(()=>[e(g,{"align-self":"center"},{default:t(()=>[e(sl,null,{default:t(()=>[b(U(r.Nom),1)]),_:2},1024),e(ol,null,{default:t(()=>[b(U(r.Immatriculation),1)]),_:2},1024)]),_:2},1024),e(g,{"align-self":"center",style:{"font-size":"smaller"}},{default:t(()=>[(V(!0),W(ae,null,ce(r.Info.split(`
`),f=>(V(),W("div",null,U(f),1))),256))]),_:2},1024),e(g,{"align-self":"center",cols:"auto"},{default:t(()=>[e(Se,null,{activator:t(({props:f})=>[e(h,ie({icon:"mdi-dots-vertical"},{ref_for:!0},f,{size:"x-small"}),null,16)]),default:t(()=>[e(De,null,{default:t(()=>[e(G,{title:"Modifier","prepend-icon":"mdi-pencil",onClick:f=>a.value=$(Pe)(r)},null,8,["onClick"]),e(G,{title:"Supprimer","prepend-icon":"mdi-delete",onClick:f=>c.value=r},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),_:1}),e(Z,{"model-value":a.value!=null,"onUpdate:modelValue":u[3]||(u[3]=r=>a.value=null),"max-width":"600px"},{default:t(()=>[a.value!=null?(V(),w(q,{key:0,title:"Modifier la structure"},{default:t(()=>[e(Y,null,{default:t(()=>[e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[e(fe,{variant:"outlined",density:"compact",label:"Nom",modelValue:a.value.Nom,"onUpdate:modelValue":u[0]||(u[0]=r=>a.value.Nom=r),"hide-details":""},null,8,["modelValue"])]),_:1}),e(g,null,{default:t(()=>[e(fe,{variant:"outlined",density:"compact",label:"Immatriculation",modelValue:a.value.Immatriculation,"onUpdate:modelValue":u[1]||(u[1]=r=>a.value.Immatriculation=r),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[e(dt,{variant:"outlined",density:"compact",label:"Informations",modelValue:a.value.Info,"onUpdate:modelValue":u[2]||(u[2]=r=>a.value.Info=r),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ue),e(h,{onClick:i},{default:t(()=>[...u[7]||(u[7]=[b("Enregistrer",-1)])]),_:1})]),_:1})]),_:1})):Q("",!0)]),_:1},8,["model-value"]),e(Z,{"model-value":c.value!=null,"onUpdate:modelValue":u[4]||(u[4]=r=>c.value=null),"max-width":"450px"},{default:t(()=>[c.value!=null?(V(),w(q,{key:0,title:"Confirmation"},{default:t(()=>[e(Y,null,{default:t(()=>[b(" Confirmez-vous la suppression de la structure "+U(c.value.Nom)+" ? ",1),u[8]||(u[8]=T("br",null,null,-1)),u[9]||(u[9]=T("br",null,null,-1)),u[10]||(u[10]=b(" Attention, cette opération est irréversible. ",-1))]),_:1}),e(se,null,{default:t(()=>[e(ue),e(h,{color:"red",onClick:n},{default:t(()=>[...u[11]||(u[11]=[b("Supprimer",-1)])]),_:1})]),_:1})]),_:1})):Q("",!0)]),_:1},8,["model-value"])]),_:1}))}}),zn={key:0},Qn={key:1},Wn=X({__name:"DossierParticipantRow",props:we({participant:{},aides:{},aidesFiles:{},hasManyParticipants:{type:Boolean}},{structures:{required:!0},structuresModifiers:{}}),emits:we(["update","delete","createAide","updateAide","deleteAide","deleteFileAide","uploadFileAide","expand"],["update:structures"]),setup(l,{emit:s}){const o=l,m=_e(l,"structures"),a=s,i=F(()=>{const I=Object.values(o.aides||{});return I.sort((k,A)=>k.Id-A.Id),I}),c=F(()=>o.participant.Camp.OptionPrix.Active==Ae.NoOption&&!ke.isQuotientFamilialActive(o.participant.Camp.OptionQuotientFamilial));function n(I){switch(o.participant.Camp.OptionPrix.Active){case Ae.NoOption:return"Séjour sans option";case Ae.PrixJour:const k=I.Jour?.length||0;return k==0?"Présent tous les jours":`Présent ${k} jour${k>1?"s":""}`;case Ae.PrixStatut:const A=o.participant.Camp.OptionPrix.Statuts?.find(j=>j.Id==I.IdStatut);return A?`Statut ${A.Label}`:"Pas d'option."}}const d=D(!1),u=D(!1),r=F(()=>Object.values(m.value).map(I=>({value:I.Id,title:I.Nom})).sort((I,k)=>I.title.localeCompare(k.title))),f=D(null),v=D(null),C=D(null),p=D(!1);return(I,k)=>(V(),w(L,null,{default:t(()=>[e(g,{"align-self":"center",cols:"3"},{default:t(()=>[e(sl,null,{default:t(()=>[T("a",{href:"/camps",onClick:k[0]||(k[0]=Ze(A=>$(wt)(o.participant.Participant),["prevent"]))},U($(Ee).label(o.participant.Personne)),1)]),_:1}),e(ol,null,{default:t(()=>[b(U($(ke).label(o.participant.Camp)),1)]),_:1})]),_:1}),e(g,{"align-self":"center",cols:"2",class:"text-center"},{default:t(()=>[e(Se,{disabled:c.value,"close-on-content-click":!1,modelValue:d.value,"onUpdate:modelValue":k[2]||(k[2]=A=>d.value=A)},{activator:t(({props:A})=>[e(q,ie(A,{elevation:c.value?0:1,color:"grey-lighten-2"}),{default:t(()=>[e(Y,{class:"py-1 px-1"},{default:t(()=>[c.value?(V(),W("div",zn,"Camp sans option")):(V(),W("div",Qn,[b(U(o.participant.Participant.QuotientFamilial?`QF ${o.participant.Participant.QuotientFamilial}.`:"Pas de QF.")+" ",1),k[22]||(k[22]=T("br",null,null,-1)),b(" "+U(n(o.participant.Participant.OptionPrix)),1)]))]),_:1})]),_:1},16,["elevation"])]),default:t(()=>[e(En,{camp:o.participant.Camp,"option-and-qf":{options:o.participant.Participant.OptionPrix,quotientFamilial:o.participant.Participant.QuotientFamilial},onUpdate:k[1]||(k[1]=A=>{o.participant.Participant.OptionPrix=A.options,o.participant.Participant.QuotientFamilial=A.quotientFamilial,d.value=!1,a("update",o.participant.Participant)})},null,8,["camp","option-and-qf"])]),_:1},8,["disabled","modelValue"])]),_:1}),e(g,{"align-self":"center",class:"text-center"},{default:t(()=>[i.value.length?Q("",!0):(V(),w(Ce,{key:0,label:""},{default:t(()=>[...k[23]||(k[23]=[b("Aucune aide",-1)])]),_:1})),(V(!0),W(ae,null,ce(i.value,A=>(V(),w(Ce,{class:"my-1","prepend-icon":"mdi-cash-plus",color:A.Valide?"green":"orange",onClick:j=>v.value=A},{close:t(()=>[e(ye,{icon:"mdi-close-circle",onClick:Ze(j=>C.value=A,["stop"])},null,8,["onClick"])]),default:t(()=>[b(" "+U(m.value[A.IdStructureaide].Nom)+" : "+U($(xe).montant(A.Valeur)),1)]),_:2},1032,["color","onClick"]))),256))]),_:1}),e(g,{"align-self":"center",class:"text-center",cols:"3"},{default:t(()=>[e(qn,{remises:o.participant.Participant.Remises,onUpdate:k[3]||(k[3]=A=>{o.participant.Participant.Remises=A,a("update",o.participant.Participant)})},null,8,["remises"])]),_:1}),e(g,{"align-self":"center",cols:"auto"},{default:t(()=>[e(Se,{location:"left"},{activator:t(({props:A})=>[e(h,ie(A,{icon:"mdi-dots-vertical",size:"small"}),null,16)]),default:t(()=>[e(De,{density:"comfortable"},{default:t(()=>[e(G,{title:"Ajouter une aide","prepend-icon":"mdi-cash-plus",onClick:k[4]||(k[4]=A=>f.value={IdParticipant:o.participant.Participant.Id,IdStructure:0})}),e(re),o.hasManyParticipants?(V(),w(G,{key:0,"prepend-icon":"mdi-arrow-expand",title:"Étendre les options et remises",subtitle:"... au reste du dossier",onClick:k[5]||(k[5]=A=>a("expand"))})):Q("",!0),e(re),e(G,{title:"Supprimer","prepend-icon":"mdi-delete",onClick:k[6]||(k[6]=A=>u.value=!0)})]),_:1})]),_:1})]),_:1}),e(Z,{modelValue:u.value,"onUpdate:modelValue":k[8]||(k[8]=A=>u.value=A),"max-width":"600px"},{default:t(()=>[e(q,{title:"Supprimer le participant"},{default:t(()=>[e(Y,null,{default:t(()=>[...k[24]||(k[24]=[b(" Confirmez-vous la suppression de ce participant ? ",-1),T("br",null,null,-1),b(" Attention, cette opération est irréversible. ",-1)])]),_:1}),e(se,null,{default:t(()=>[e(ue),e(h,{color:"red",onClick:k[7]||(k[7]=A=>{a("delete"),u.value=!1})},{default:t(()=>[...k[25]||(k[25]=[b("Supprimer",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Z,{modelValue:p.value,"onUpdate:modelValue":k[10]||(k[10]=A=>p.value=A),"max-width":"650px"},{default:t(()=>[e(Hn,{modelValue:m.value,"onUpdate:modelValue":k[9]||(k[9]=A=>m.value=A)},null,8,["modelValue"])]),_:1},8,["modelValue"]),f.value!=null?(V(),w(Z,{key:0,"model-value":f.value!=null,"onUpdate:modelValue":k[14]||(k[14]=A=>f.value=null),width:"600px"},{default:t(()=>[e(q,{title:"Ajouter une aide extérieure"},{append:t(()=>[e(h,{onClick:k[11]||(k[11]=A=>p.value=!0)},{default:t(()=>[e(ye,null,{default:t(()=>[...k[26]||(k[26]=[b("mdi-view-list",-1)])]),_:1}),k[27]||(k[27]=b(" Structures",-1))]),_:1})]),default:t(()=>[e(Y,null,{default:t(()=>[e(Te,{variant:"outlined",density:"comfortable",label:"Structure",items:r.value,"model-value":f.value.IdStructure==0?null:f.value.IdStructure,"onUpdate:modelValue":k[12]||(k[12]=A=>f.value.IdStructure=A)},null,8,["items","model-value"])]),_:1}),e(se,null,{default:t(()=>[e(ue),e(h,{color:"green",onClick:k[13]||(k[13]=A=>{a("createAide",f.value),f.value=null}),disabled:f.value.IdStructure==0},{default:t(()=>[...k[28]||(k[28]=[b("Créer",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])):Q("",!0),v.value!=null?(V(),w(Z,{key:1,"model-value":v.value!=null,"onUpdate:modelValue":k[19]||(k[19]=A=>v.value=null),"max-width":"800px"},{default:t(()=>[e(Yn,{aide:v.value,file:l.aidesFiles[v.value.Id],structures:m.value,participant:o.participant,onShowStructureaides:k[15]||(k[15]=A=>p.value=!0),onSave:k[16]||(k[16]=A=>{a("updateAide",A),v.value=null}),onDeleteFile:k[17]||(k[17]=A=>a("deleteFileAide",v.value.Id)),onUploadFile:k[18]||(k[18]=A=>a("uploadFileAide",A,v.value.Id))},null,8,["aide","file","structures","participant"])]),_:1},8,["model-value"])):Q("",!0),C.value!=null?(V(),w(Z,{key:2,"model-value":C.value!=null,"onUpdate:modelValue":k[21]||(k[21]=A=>C.value=null),"max-width":"600px"},{default:t(()=>[e(q,{title:"Supprimer l'aide"},{default:t(()=>[e(Y,null,{default:t(()=>[...k[29]||(k[29]=[b(" Confirmez-vous la suppression de l'aide extérieure ? ",-1),T("br",null,null,-1),b(" Attention, cette opération est irréversible. ",-1)])]),_:1}),e(se,null,{default:t(()=>[e(ue),e(h,{color:"red",onClick:k[20]||(k[20]=A=>{a("deleteAide",C.value.Id),C.value=null})},{default:t(()=>[...k[30]||(k[30]=[b("Supprimer",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])):Q("",!0)]),_:1}))}}),Jn=X({__name:"DossierEditor",props:{dossier:{},camps:{}},emits:["updateDossier","createParticipant","updateParticipant","deleteParticipant","expandParticipant","createAide","updateAide","deleteAide","deleteFileAide","uploadFileAide"],setup(l,{emit:s}){const o=l,m=s,a=D(null);Oe(n);const i=D(!0),c=D({});async function n(){const d=await _.StructureaidesGet();d!==void 0&&(i.value=!1,c.value=d||{})}return(d,u)=>(V(),w(q,{title:"Modifier le dossier"},{append:t(()=>[e(h,{onClick:u[0]||(u[0]=r=>a.value={IdCamp:0,IdPersonne:0,IdDossier:o.dossier.Dossier.Dossier.Id})},{prepend:t(()=>[e(ye,{color:"green"},{default:t(()=>[...u[9]||(u[9]=[b("mdi-plus",-1)])]),_:1})]),default:t(()=>[u[10]||(u[10]=b(" Ajouter un participant",-1))]),_:1})]),default:t(()=>[e(Y,null,{default:t(()=>[e(L,null,{default:t(()=>[e(g,{cols:"3"},{default:t(()=>[e(Fn,{responsable:o.dossier.Dossier.Responsable,dossier:o.dossier.Dossier.Dossier,onSave:u[1]||(u[1]=r=>m("updateDossier",r))},null,8,["responsable","dossier"])]),_:1}),e(re,{thickness:"4",vertical:""}),i.value?Q("",!0):(V(),w(g,{key:0},{default:t(()=>[u[11]||(u[11]=T("div",{class:"my-1"},null,-1)),(V(!0),W(ae,null,ce(o.dossier.Dossier.Participants,r=>(V(),w(Wn,{participant:r,aides:(o.dossier.Dossier.Aides||{})[r.Participant.Id],"aides-files":o.dossier.Dossier.AidesFiles||{},"has-many-participants":(o.dossier.Dossier.Participants?.length||0)>1,structures:c.value,"onUpdate:structures":u[2]||(u[2]=f=>c.value=f),onCreateAide:u[3]||(u[3]=f=>m("createAide",f)),onDeleteAide:u[4]||(u[4]=f=>m("deleteAide",f)),onUpdateAide:u[5]||(u[5]=f=>m("updateAide",f)),onDeleteFileAide:u[6]||(u[6]=f=>m("deleteFileAide",f)),onUploadFileAide:u[7]||(u[7]=(f,v)=>m("uploadFileAide",f,v)),onUpdate:u[8]||(u[8]=f=>m("updateParticipant",f)),onDelete:f=>m("deleteParticipant",r.Participant.Id),onExpand:f=>m("expandParticipant",r.Participant)},null,8,["participant","aides","aides-files","has-many-participants","structures","onDelete","onExpand"]))),256))]),_:1}))]),_:1})]),_:1})]),_:1}))}}),Gn={class:"mr-1"},Kn=["onClick"],Xn={class:"overflow-y-auto",style:{"max-height":"65vh"}},Zn=["href"],eu=X({__name:"DossierDetailsPannel",props:{dossier:{},camps:{}},emits:["updateDossier","deleteDossier","mergeDossier","createParticipant","updateParticipant","deleteParticipant","expandParticipant","createAide","updateAide","deleteAide","deleteFileAide","uploadFileAide","createPaiement","updatePaiement","deletePaiement","sendMessage","deleteMessage","sendFacture"],setup(l,{expose:s,emit:o}){const m=l,a=o;s({showEditPaiement:f,showEditDossier:d});const i=F(()=>ua(m.dossier.Dossier,_.isFondsSoutien?Ut.FondSoutien:Ut.Backoffice)),c=D(!1),n=D(!1);function d(){n.value=!0}const u=D(null),r=D(null);function f(x){r.value=x}const v="Repère",C=D(!1);async function p(){await pt(m.dossier.EspacepersoURL),_.showMessage("Lien vers l'espace personnel copié.")}async function I(){await pt(m.dossier.VirementCode),_.showMessage("Identifiant de virement copié.")}async function k(x){await pt(x),_.showMessage("IBAN copié.")}const A=D(!1),j=D(!1),B=D("");return(x,P)=>{const ee=Ra,ge=it,J=ut;return V(),w(q,{title:`Dossier de ${m.dossier.Dossier.Responsable}`,class:"ml-2"},{subtitle:t(()=>[(V(!0),W(ae,null,ce(m.dossier.Dossier.Participants,S=>(V(),W("span",Gn,[T("a",{href:"/camps",onClick:Ze(te=>$(wt)(S.Participant),["prevent"])},U($(Ee).label(S.Personne)),9,Kn)]))),256))]),append:t(()=>[e(h,{icon:"mdi-pencil",onClick:P[0]||(P[0]=S=>n.value=!0),class:"mx-1"}),e(Se,null,{activator:t(({props:S})=>[e(h,ie(S,{icon:"mdi-dots-vertical",size:"small",class:"mx-1"}),null,16)]),default:t(()=>[e(De,{density:"compact"},{default:t(()=>[e(G,{"prepend-icon":"mdi-email",onClick:P[1]||(P[1]=S=>j.value=!0),title:"Envoyer un message",subtitle:"Notification par email"}),e(G,{"prepend-icon":"mdi-invoice-send",onClick:P[2]||(P[2]=S=>a("sendFacture")),title:"Envoyer une demande de règlement",subtitle:"Notification par email"}),e(re),e(G,{"prepend-icon":"mdi-cash-plus",onClick:P[3]||(P[3]=S=>a("createPaiement")),title:"Ajouter un paiement"}),e(re),e(G,{"prepend-icon":"mdi-link",onClick:P[4]||(P[4]=S=>C.value=!0),title:"Afficher les identifiants"}),e(re),e(G,{"prepend-icon":"mdi-file-move",onClick:P[5]||(P[5]=S=>A.value=!0),title:"Fusionner vers ..."}),e(re),e(G,{onClick:P[6]||(P[6]=S=>c.value=!0),title:"Supprimer"},{prepend:t(()=>[e(ye,{color:"red"},{default:t(()=>[...P[35]||(P[35]=[b("mdi-delete",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),default:t(()=>[e(Y,null,{default:t(()=>[e(L,null,{default:t(()=>[e(g,{class:"ml-2 mb-1 text-center"},{default:t(()=>[e(Se,null,{activator:t(({props:S})=>[e(Ce,ie(S,{"prepend-icon":"mdi-currency-eur",color:$(xe).colorStatutPaiement(m.dossier.Dossier.Bilan.Statut)}),{default:t(()=>[b(U(m.dossier.Dossier.Bilan.Recu)+" payé sur "+U(m.dossier.Dossier.Bilan.Demande),1)]),_:1},16,["color"])]),default:t(()=>[e(_n,{dossier:m.dossier.Dossier},null,8,["dossier"])]),_:1})]),_:1})]),_:1}),T("div",Xn,[e(Fa,{side:"end",class:"mt-4",density:"compact"},{default:t(()=>[(V(!0),W(ae,null,ce(i.value,(S,te)=>(V(),w(ee,{event:S,key:te,onEditPaiement:P[7]||(P[7]=z=>r.value=z),onDeleteMessage:P[8]||(P[8]=z=>a("deleteMessage",z))},null,8,["event"]))),128))]),_:1})])]),_:1}),e(Z,{modelValue:c.value,"onUpdate:modelValue":P[10]||(P[10]=S=>c.value=S),"max-width":"600px"},{default:t(()=>[e(q,{title:"Supprimer le dossier"},{default:t(()=>[e(Y,null,{default:t(()=>[...P[36]||(P[36]=[b(" Confirmez-vous la suppression du dossier et de ses participants ? ",-1),T("br",null,null,-1),T("br",null,null,-1),b(" Attention, cette opération est irréversible. ",-1)])]),_:1}),e(se,null,{default:t(()=>[e(ue),e(h,{color:"red",onClick:P[9]||(P[9]=S=>{a("deleteDossier"),c.value=!1})},{default:t(()=>[...P[37]||(P[37]=[b("Supprimer",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),u.value!=null?(V(),w(Z,{key:0,"model-value":u.value!=null,"onUpdate:modelValue":P[14]||(P[14]=S=>u.value=null),"max-width":"600px"},{default:t(()=>[e(q,{title:"Ajouter un participant"},{default:t(()=>[e(Y,null,{default:t(()=>[e(L,null,{default:t(()=>[e(g,{cols:"12"},{default:t(()=>[e(ge,{label:"Camp",camps:m.camps,modelValue:u.value.IdCamp,"onUpdate:modelValue":P[11]||(P[11]=S=>u.value.IdCamp=S)},null,8,["camps","modelValue"])]),_:1}),e(g,{cols:"12"},{default:t(()=>[e(J,{label:"Personne","initial-personne":"",modelValue:u.value.IdPersonne,"onUpdate:modelValue":P[12]||(P[12]=S=>u.value.IdPersonne=S),api:{SelectPersonne:$(_).SelectPersonne.bind($(_))}},null,8,["modelValue","api"])]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ue),e(h,{color:"green",disabled:u.value.IdPersonne==0||u.value.IdCamp==0,onClick:P[13]||(P[13]=S=>{a("createParticipant",u.value),u.value=null})},{default:t(()=>[...P[38]||(P[38]=[b("Ajouter",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])):Q("",!0),e(Z,{modelValue:n.value,"onUpdate:modelValue":P[25]||(P[25]=S=>n.value=S)},{default:t(()=>[e(Jn,{dossier:m.dossier,camps:m.camps,onUpdateDossier:P[15]||(P[15]=S=>a("updateDossier",S)),onCreateParticipant:P[16]||(P[16]=S=>a("createParticipant",S)),onUpdateParticipant:P[17]||(P[17]=S=>a("updateParticipant",S)),onDeleteParticipant:P[18]||(P[18]=S=>a("deleteParticipant",S)),onExpandParticipant:P[19]||(P[19]=S=>a("expandParticipant",S)),onCreateAide:P[20]||(P[20]=S=>a("createAide",S)),onUpdateAide:P[21]||(P[21]=S=>a("updateAide",S)),onDeleteAide:P[22]||(P[22]=S=>a("deleteAide",S)),onDeleteFileAide:P[23]||(P[23]=S=>a("deleteFileAide",S)),onUploadFileAide:P[24]||(P[24]=(S,te)=>a("uploadFileAide",S,te))},null,8,["dossier","camps"])]),_:1},8,["modelValue"]),r.value!=null?(V(),w(Z,{key:1,"model-value":r.value!=null,"onUpdate:modelValue":P[28]||(P[28]=S=>r.value=null),"max-width":"600px"},{default:t(()=>[e(Un,{paiement:r.value,onUpdate:P[26]||(P[26]=S=>{a("updatePaiement",S),r.value=null}),onDelete:P[27]||(P[27]=S=>{a("deletePaiement",r.value),r.value=null})},null,8,["paiement"])]),_:1},8,["model-value"])):Q("",!0),e(Z,{modelValue:C.value,"onUpdate:modelValue":P[29]||(P[29]=S=>C.value=S),"max-width":"800px"},{default:t(()=>[e(q,{title:"Liens et identifiants"},{default:t(()=>[e(Y,null,{default:t(()=>[e(L,null,{default:t(()=>[e(g,{cols:"3"},{default:t(()=>[...P[39]||(P[39]=[b("Espace personnel",-1)])]),_:1}),e(g,{class:"text-truncate"},{default:t(()=>[T("a",{href:m.dossier.EspacepersoURL,target:"_blank"},U(m.dossier.EspacepersoURL),9,Zn)]),_:1}),e(g,{"align-self":"center",cols:"auto"},{default:t(()=>[e(h,{size:"small",icon:"mdi-content-copy",onClick:p})]),_:1})]),_:1}),(V(!0),W(ae,null,ce(m.dossier.BankAccounts,S=>(V(),w(L,null,{default:t(()=>[e(g,{cols:"3"},{default:t(()=>[b("RIB ("+U($(v))+")",1)]),_:1}),e(g,{cols:"3"},{default:t(()=>[b(U(S[0]),1)]),_:2},1024),e(g,null,{default:t(()=>[b(U(S[1]),1)]),_:2},1024),e(g,{"align-self":"center",cols:"auto"},{default:t(()=>[e(h,{size:"small",icon:"mdi-content-copy",onClick:()=>k(S[1])},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),256)),e(L,null,{default:t(()=>[e(g,{cols:"3"},{default:t(()=>[...P[40]||(P[40]=[b("Identification de virement",-1)])]),_:1}),e(g,null,{default:t(()=>[b(U(m.dossier.VirementCode),1)]),_:1}),e(g,{"align-self":"center",cols:"auto"},{default:t(()=>[e(h,{size:"small",icon:"mdi-content-copy",onClick:I})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Z,{modelValue:A.value,"onUpdate:modelValue":P[31]||(P[31]=S=>A.value=S),"max-width":"600px"},{default:t(()=>[e(fl,{from:m.dossier.Dossier.Dossier.Id,onMerge:P[30]||(P[30]=S=>{a("mergeDossier",S),A.value=!1})},null,8,["from"])]),_:1},8,["modelValue"]),e(Z,{modelValue:j.value,"onUpdate:modelValue":P[34]||(P[34]=S=>j.value=S),"max-width":"600px"},{default:t(()=>[e(q,{title:"Nouveau message",subtitle:"Envoie un message sur le fil de suivi et une notification par mail."},{default:t(()=>[e(Y,null,{default:t(()=>[e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[e(dt,{rows:"5",variant:"outlined",modelValue:B.value,"onUpdate:modelValue":P[32]||(P[32]=S=>B.value=S)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ue),e(h,{disabled:!B.value.length,onClickOnce:P[33]||(P[33]=S=>{a("sendMessage",B.value),j.value=!1})},{default:t(()=>[...P[41]||(P[41]=[b("Envoyer",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["title"])}}}),tu=X({__name:"CreateDossierCard",emits:["create"],setup(l,{emit:s}){const o=s,m=D(0);return(a,i)=>{const c=ut;return V(),w(q,{title:"Créer un dossier"},{default:t(()=>[e(Y,null,{default:t(()=>[e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[e(c,{label:"Responsable légal",modelValue:m.value,"onUpdate:modelValue":i[0]||(i[0]=n=>m.value=n),"initial-personne":"",api:{SelectPersonne:$(_).SelectPersonne.bind($(_))}},null,8,["modelValue","api"])]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ue),e(h,{color:"green",disabled:m.value==0,onClick:i[1]||(i[1]=n=>o("create",m.value))},{default:t(()=>[...i[2]||(i[2]=[b("Créer",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})}}}),lu=X({__name:"DossierList",props:we({camps:{},allowFondsSoutien:{type:Boolean},selected:{}},{query:{required:!0},queryModifiers:{}}),emits:we(["click","update"],["update:query"]),setup(l,{expose:s,emit:o}){const m=l,a=o,i=_e(l,"query");s({searchDossiers:n}),Me(()=>i.value,n,{immediate:!0});const c=D(null);async function n(){const d=await _.DossiersSearch(i.value);d!==void 0&&(c.value=d,a("update",d))}return(d,u)=>{const r=it,f=il;return V(),W("div",null,[e(L,null,{default:t(()=>[e(g,{"align-self":"center"},{default:t(()=>[e(f,{density:"compact",variant:"outlined","prepend-inner-icon":"mdi-magnify",label:"Rechercher un dossier","hide-details":"",clearable:"",modelValue:i.value.Pattern,"onUpdate:modelValue":[u[5]||(u[5]=v=>i.value.Pattern=v),n]},{"append-inner":t(()=>[i.value.IdCamp.Valid?(V(),w(Ce,{key:0,class:"ml-1",size:"small","prepend-icon":"mdi-bed"},{default:t(()=>[b(U(m.camps.find(v=>v.Id==i.value.IdCamp.Id)?.Label),1)]),_:1})):Q("",!0),i.value.Attente!=$(da).EmptyQA?(V(),w(Ce,{key:1,class:"ml-1",size:"small","prepend-icon":"mdi-clock"},{default:t(()=>[b(U($(Ft)[i.value.Attente]),1)]),_:1})):Q("",!0),i.value.Reglement!=$(ma).EmptyQR?(V(),w(Ce,{key:2,class:"ml-1",size:"small","prepend-icon":"mdi-currency-eur"},{default:t(()=>[b(U($(Rt)[i.value.Reglement]),1)]),_:1})):Q("",!0),i.value.OnlyFondSoutien?(V(),w(Ce,{key:3,class:"ml-1",size:"small"},{default:t(()=>[...u[6]||(u[6]=[b(" Fonds de soutien ",-1)])]),_:1})):Q("",!0)]),append:t(()=>[e(Se,{location:"left top","close-on-content-click":!1},{activator:t(({props:v})=>[e(h,ie(v,{size:"small",variant:"flat",icon:""}),{default:t(()=>[e(ye,null,{default:t(()=>[...u[7]||(u[7]=[b("mdi-filter-cog",-1)])]),_:1}),e(at,{activator:"parent",text:"Autres critères de recherche"})]),_:1},16)]),default:t(()=>[e(q,{"min-width":"400px",title:"Filtrer les dossiers"},{default:t(()=>[e(Y,null,{default:t(()=>[e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[e(r,{label:"Camp",camps:m.camps,"model-value":$(oa)($(ra)(i.value.IdCamp)),"onUpdate:modelValue":u[0]||(u[0]=v=>{i.value.IdCamp=$(ia)($(sa)(v)),n()})},null,8,["camps","model-value"])]),_:1})]),_:1}),e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[e(Te,{density:"compact",variant:"outlined",label:"Liste d'attente",modelValue:i.value.Attente,"onUpdate:modelValue":[u[1]||(u[1]=v=>i.value.Attente=v),n],items:$(tt)($(Ft)),"hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1}),e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[e(Te,{density:"compact",variant:"outlined",label:"Réglement",modelValue:i.value.Reglement,"onUpdate:modelValue":[u[2]||(u[2]=v=>i.value.Reglement=v),n],items:$(tt)($(Rt)),"hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1}),e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[e(gt,{label:"Trier selon les nouveaux messages",hint:"Affiche les nouveaux messages en premier.","persistent-hint":"",density:"compact",color:"light-blue-darken-3",modelValue:i.value.SortByNewMessages,"onUpdate:modelValue":[u[3]||(u[3]=v=>i.value.SortByNewMessages=v),n]},null,8,["modelValue"])]),_:1})]),_:1}),m.allowFondsSoutien?(V(),w(L,{key:0},{default:t(()=>[e(g,null,{default:t(()=>[e(gt,{label:"Fonds de soutien",hint:"N'affiche que les dossiers demandant le fonds de soutien.","persistent-hint":"",density:"compact",color:"orange",modelValue:i.value.OnlyFondSoutien,"onUpdate:modelValue":[u[4]||(u[4]=v=>i.value.OnlyFondSoutien=v),n]},null,8,["modelValue"])]),_:1})]),_:1})):Q("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),c.value!=null?(V(),w(De,{key:0,class:"mt-2",selected:m.selected?[m.selected]:void 0},{default:t(()=>[c.value.Dossiers?.length?Q("",!0):(V(),w(G,{key:0,class:"text-center"},{default:t(()=>[...u[8]||(u[8]=[T("i",null,"Aucun dossier ne correspond à votre recherche.",-1)])]),_:1})),(V(!0),W(ae,null,ce(c.value.Dossiers,(v,C)=>(V(),w(G,{rounded:"",key:C,title:v.Responsable,subtitle:v.Participants,value:v.Id,onClick:p=>a("click",v),class:"my-1"},ct({_:2},[v.NewMessages?{name:"append",fn:t(()=>[e(Ma,{color:"light-blue-darken-3",content:v.NewMessages},null,8,["content"])]),key:"0"}:void 0]),1032,["title","subtitle","value","onClick"]))),128))]),_:1},8,["selected"])):Q("",!0)])}}}),au=X({__name:"SendDocumentsCampCard",props:{camps:{}},emits:["send"],setup(l,{emit:s}){const o=l,m=s,a=D(0),i=D(null);async function c(){const u=await _.EventsSendDocumentsCampPreview({idCamp:a.value});u!==void 0&&(i.value=u,n.value=(u.Dossiers||[]).filter(r=>!r.DocumentsSent).map(r=>r.Id))}const n=D([]),d=F(()=>n.value.length==(i.value?.Dossiers||[]).length);return(u,r)=>{const f=it;return V(),w(q,{title:"Envoyer les documents d'un séjour"},{default:t(()=>[e(Y,null,{default:t(()=>[e(L,null,{default:t(()=>[e(g,{"align-self":"center",cols:"5"},{default:t(()=>[e(f,{camps:o.camps,label:"Séjour",modelValue:a.value,"onUpdate:modelValue":[r[0]||(r[0]=v=>a.value=v),c]},null,8,["camps","modelValue"])]),_:1}),e(g,{"align-self":"center"},{default:t(()=>[i.value?(V(),w(q,{key:0,subtitle:"Dossiers à contacter"},ct({default:t(()=>[e(Y,null,{default:t(()=>[e(De,{selectable:"",selected:n.value,"onUpdate:selected":r[2]||(r[2]=v=>n.value=v),"select-strategy":"leaf"},{default:t(()=>[(V(!0),W(ae,null,ce(i.value.Dossiers,v=>(V(),w(G,{title:v.Responsable,subtitle:v.Participants,value:v.Id,rounded:"",class:"my-1"},{append:t(({isSelected:C,select:p})=>[e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[v.DocumentsSent?(V(),w(Ce,{key:0,color:"green",class:"mr-2"},{default:t(()=>[...r[4]||(r[4]=[b("Envoyés",-1)])]),_:1})):Q("",!0)]),_:2},1024),e(g,null,{default:t(()=>[e(rl,{density:"compact","hide-details":"","model-value":C,"onUpdate:modelValue":p},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["title","subtitle","value"]))),256))]),_:1},8,["selected"])]),_:1})]),_:2},[i.value.Dossiers?.length?{name:"append",fn:t(()=>[e(qe,{label:"Tout sélectionner",density:"compact","hide-details":"",indeterminate:!!n.value.length&&n.value.length!=(i.value.Dossiers||[]).length,"model-value":n.value.length==(i.value.Dossiers||[]).length,"onUpdate:modelValue":r[1]||(r[1]=v=>n.value=d.value?[]:(i.value.Dossiers||[]).map(C=>C.Id))},null,8,["indeterminate","model-value"])]),key:"0"}:void 0]),1024)):Q("",!0)]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ue),e(h,{disabled:!a.value||!n.value.length,onClick:r[3]||(r[3]=v=>m("send",a.value,n.value))},{append:t(()=>[e(ye,null,{default:t(()=>[...r[5]||(r[5]=[b("mdi-send",-1)])]),_:1})]),default:t(()=>[r[6]||(r[6]=b(" Envoyer ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})}}}),nu=X({__name:"SendRelancePaiementCard",props:{camps:{}},emits:["send"],setup(l,{emit:s}){const o=l,m=s,a=D(0),i=D([]);async function c(){const u=await _.EventsSendRelancePaiementPreview({idCamp:a.value});u!==void 0&&(i.value=u||[],n.value=(u||[]).map(r=>r.Id))}const n=D([]),d=F(()=>n.value.length==i.value.length);return(u,r)=>{const f=it;return V(),w(q,{title:"Envoyer une relance de paiement"},{default:t(()=>[e(Y,null,{default:t(()=>[e(L,null,{default:t(()=>[e(g,{"align-self":"center",cols:"5"},{default:t(()=>[e(f,{camps:o.camps,label:"Séjour",modelValue:a.value,"onUpdate:modelValue":[r[0]||(r[0]=v=>a.value=v),c]},null,8,["camps","modelValue"])]),_:1}),e(g,{"align-self":"center"},{default:t(()=>[i.value?(V(),w(q,{key:0,subtitle:"Dossiers à relancer"},ct({default:t(()=>[e(Y,null,{default:t(()=>[e(De,{selectable:"",selected:n.value,"onUpdate:selected":r[2]||(r[2]=v=>n.value=v),"select-strategy":"leaf",density:"comfortable"},{default:t(()=>[(V(!0),W(ae,null,ce(i.value,(v,C)=>(V(),w(G,{key:v.Id,title:v.Responsable,subtitle:$(ca)(v.LastEventFacture)?"":`Dernière demande : ${$(xe).time(v.LastEventFacture)}`,value:v.Id,rounded:"",class:"my-1"},{append:t(({isSelected:p,select:I})=>[e(L,null,{default:t(()=>[e(g,{"align-self":"center"},{default:t(()=>[e(Ce,{class:"mr-2",color:$(xe).colorStatutPaiement(v.Bilan.Statut)},{default:t(()=>[b(U(v.Bilan.Recu)+" / "+U(v.Bilan.Demande),1)]),_:2},1032,["color"])]),_:2},1024),e(g,{"align-self":"center"},{default:t(()=>[e(rl,{density:"compact","hide-details":"","model-value":p,"onUpdate:modelValue":I},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["title","subtitle","value"]))),128))]),_:1},8,["selected"])]),_:1})]),_:2},[i.value.length?{name:"append",fn:t(()=>[e(qe,{label:"Tout sélectionner",density:"compact","hide-details":"",indeterminate:!!n.value.length&&n.value.length!=i.value.length,"model-value":n.value.length==i.value.length,"onUpdate:modelValue":r[1]||(r[1]=v=>n.value=d.value?[]:i.value.map(C=>C.Id))},null,8,["indeterminate","model-value"])]),key:"0"}:void 0]),1024)):Q("",!0)]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ue),e(h,{disabled:!a.value||!n.value.length,onClick:r[3]||(r[3]=v=>m("send",a.value,n.value))},{append:t(()=>[e(ye,null,{default:t(()=>[...r[4]||(r[4]=[b("mdi-send",-1)])]),_:1})]),default:t(()=>[r[5]||(r[5]=b(" Envoyer ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})}}}),uu={key:1,class:"text-center font-italic my-6"},iu=X({__name:"PannelDossiers",props:{initialDossier:{}},setup(l){const s=l;Oe(()=>{c(),s.initialDossier!==void 0&&r(s.initialDossier)}),Me(()=>s.initialDossier,()=>{s.initialDossier!==void 0&&r(s.initialDossier)});const o=Lt("detailsPannel"),m=D(null),a=D(wa()),i=D([]);async function c(){const E=await _.GetCamps();E!==void 0&&(i.value=E||[])}function n(E){m.value={length:E.Dossiers?.length||0,total:E.Total}}const d=Lt("dossierList");function u(){d.value?.searchDossiers()}async function r(E){await v(E),a.value=Da(E)}const f=D(null);async function v(E){const H=await _.DossiersLoad({id:E});H!==void 0&&(f.value=H)}async function C(E){v(E.Id),await _.EventsMarkMessagesSeen({idDossier:E.Id})!==void 0&&u()}async function p(){f.value!=null&&v(f.value.Dossier.Dossier.Id)}const I=D(!1);async function k(E){I.value=!1;const H=await _.DossiersCreate({idResponsable:E});H!==void 0&&(_.showMessage("Dossier créé avec succès."),await r(H.Id),o.value?.showEditDossier())}async function A(E){const H=await _.DossiersUpdate(E);H!==void 0&&(_.showMessage("Dossier mis à jour avec succès."),f.value!=null&&(f.value.Dossier.Dossier=E,f.value.Dossier.Responsable=H.Responsable),u())}async function j(){if(f.value==null)return;const E=f.value.Dossier.Dossier.Id;await _.DossiersDelete({id:E})!==void 0&&(_.showMessage("Dossier supprimé avec succès."),f.value=null,u())}async function B(E){await _.DossiersMerge(E)!==void 0&&(_.showMessage("Dossier fusionné avec succès."),u(),v(E.To))}async function x(E){await _.ParticipantsCreate(E)!==void 0&&(_.showMessage("Participant ajouté avec succès."),p())}async function P(E){await _.ParticipantsUpdate(E)!==void 0&&(_.showMessage("Réglages du participant modifiés avec succès."),p())}async function ee(E){await _.ParticipantsDelete({id:E})!==void 0&&(_.showMessage("Participant supprimé avec succès."),p())}async function ge(E){if(f.value==null)return;const H=f.value.Dossier.Participants?.map(me=>me.Participant).filter(me=>me.Id!=E.Id)||[];!H.length||(H.forEach(me=>{me.Remises=E.Remises,me.QuotientFamilial=E.QuotientFamilial,me.IdCamp==E.IdCamp&&(me.OptionPrix=E.OptionPrix)}),(await Promise.all(H.map(me=>_.ParticipantsUpdate(me)))).includes(void 0))||(_.showMessage("Réglages des participants modifiés avec succès."),p())}async function J(E){const H=await _.AidesCreate(E);if(H===void 0||(_.showMessage("Aide ajoutée avec succès."),f.value==null))return;const de=f.value.Dossier.Aides||{},me=de[E.IdParticipant]||{};me[H.Id]=H,de[E.IdParticipant]=me,f.value.Dossier.Aides=de}async function S(E){await _.AidesUpdate(E)!==void 0&&(_.showMessage("Aide modifiée avec succès."),p())}async function te(E){await _.AidesJustificatifDelete({idAide:E})!==void 0&&(_.showMessage("Justificatif supprimé avec succès."),f.value!=null&&f.value.Dossier.AidesFiles&&delete f.value.Dossier.AidesFiles[E])}async function z(E,H){const de=await _.AidesJustificatifUpload(E,{idAide:H});if(de!==void 0&&(_.showMessage("Justificatif téléversé avec succès."),f.value!=null)){const me=f.value.Dossier.AidesFiles||{};me[H]=de,f.value.Dossier.AidesFiles=me}}async function N(E){await _.AidesDelete({id:E})!==void 0&&(_.showMessage("Aide supprimée avec succès."),p())}async function K(){if(f.value==null)return;const E=await _.PaiementsCreate({idDossier:f.value.Dossier.Dossier.Id});E!==void 0&&(_.showMessage("Paiement créé avec succès."),p(),o.value?.showEditPaiement(E))}async function oe(E){await _.PaiementsUpdate(E)!==void 0&&(_.showMessage("Paiement modifié avec succès."),p())}async function le(E){await _.PaiementsDelete({id:E.Id})!==void 0&&(_.showMessage("Paiement supprimé avec succès."),p())}async function ve(E){f.value==null||await _.EventsSendMessage({IdDossier:f.value.Dossier.Dossier.Id,Contenu:E})===void 0||(_.showMessage("Message envoyé avec succès."),p())}async function be(E){await _.EventsDelete({id:E.Id})!==void 0&&(_.showMessage("Message supprimé avec succès."),p())}async function M(){f.value==null||await _.EventsSendFacture({idDossier:f.value.Dossier.Dossier.Id})===void 0||(_.showMessage("Demande de règlement envoyé avec succès."),p())}const y=D(!1),O=D(null);async function R(E,H){O.value={Current:0,Total:H.length};const de=await _.EventsSendDocumentsCamp({IdCamp:E,IdDossiers:H});if(de===void 0){O.value=null;return}await bt(de,me=>O.value=me,me=>_.onError("Envoi des documents",me)),O.value=null,p(),_.showMessage("Documents du séjour envoyés avec succès.")}const pe=D(!1),ne=D(null);async function Ie(E,H){ne.value={Current:0,Total:H.length};const de=await _.EventsSendRelancePaiement({IdDossiers:H});if(de===void 0){ne.value=null;return}await bt(de,me=>ne.value=me,me=>_.onError("Envoi de la relance",me)),ne.value=null,p(),_.showMessage("Toutes les relances ont été envoyées avec succès.")}return(E,H)=>(V(),w(L,{"no-gutters":"",class:"ma-2"},{default:t(()=>[e(g,{cols:"6"},{default:t(()=>[e(q,{title:"Dossiers",subtitle:m.value==null?"-":`${m.value.length} affiché(s) / ${m.value.total}`},{append:t(()=>[e(h,{icon:"",size:"small",onClick:H[0]||(H[0]=de=>I.value=!0)},{default:t(()=>[e(ye,{color:"green"},{default:t(()=>[...H[7]||(H[7]=[b("mdi-plus",-1)])]),_:1})]),_:1}),e(re,{thickness:"1",vertical:"",class:"mx-2"}),e(h,{size:"small"},{prepend:t(()=>[e(ye,null,{default:t(()=>[...H[8]||(H[8]=[b("mdi-send-circle-outline",-1)])]),_:1})]),default:t(()=>[H[9]||(H[9]=b(" Actions ",-1)),e(Se,{activator:"parent"},{default:t(()=>[e(De,null,{default:t(()=>[e(G,{title:"Documents...",subtitle:"Paramétrer et envoyer les documents d'un séjour","prepend-icon":"mdi-mail",onClick:H[1]||(H[1]=de=>y.value=!0)}),e(re),e(G,{title:"Relance de paiement...",subtitle:"Paramétrer et envoyer une relance, pour un séjour","prepend-icon":"mdi-invoice-send",onClick:H[2]||(H[2]=de=>pe.value=!0)})]),_:1})]),_:1})]),_:1})]),default:t(()=>[e(Y,null,{default:t(()=>[e(lu,{camps:i.value,"allow-fonds-soutien":$(_).isFondsSoutien,selected:f.value?.Dossier.Dossier.Id,query:a.value,"onUpdate:query":H[3]||(H[3]=de=>a.value=de),onClick:C,onUpdate:n,ref_key:"dossierList",ref:d},null,8,["camps","allow-fonds-soutien","selected","query"])]),_:1})]),_:1},8,["subtitle"])]),_:1}),e(g,{cols:"6"},{default:t(()=>[f.value!=null?(V(),w(eu,{key:0,dossier:f.value,camps:i.value,onUpdateDossier:A,onDeleteDossier:j,onMergeDossier:B,onCreateParticipant:x,onUpdateParticipant:P,onDeleteParticipant:ee,onExpandParticipant:ge,onCreateAide:J,onDeleteAide:N,onUpdateAide:S,onDeleteFileAide:te,onUploadFileAide:z,onCreatePaiement:K,onUpdatePaiement:oe,onDeletePaiement:le,onSendMessage:ve,onDeleteMessage:be,onSendFacture:M,ref_key:"detailsPannel",ref:o},null,8,["dossier","camps"])):(V(),W("div",uu," Sélectionner un dossier... "))]),_:1}),e(Z,{modelValue:I.value,"onUpdate:modelValue":H[4]||(H[4]=de=>I.value=de),"max-width":"400px"},{default:t(()=>[e(tu,{onCreate:k})]),_:1},8,["modelValue"]),e(Z,{modelValue:y.value,"onUpdate:modelValue":H[5]||(H[5]=de=>y.value=de),"max-width":"1000px"},{default:t(()=>[e(au,{camps:i.value,onSend:R},null,8,["camps"])]),_:1},8,["modelValue"]),e(Z,{modelValue:pe.value,"onUpdate:modelValue":H[6]||(H[6]=de=>pe.value=de),"max-width":"1000px"},{default:t(()=>[e(nu,{camps:i.value,onSend:Ie},null,8,["camps"])]),_:1},8,["modelValue"]),e(Z,{"model-value":O.value!=null,"max-width":"400px",persistent:""},{default:t(()=>[O.value?(V(),w(Vt,{key:0,title:"Envoi des documents en cours",current:O.value.Current,total:O.value.Total},null,8,["current","total"])):Q("",!0)]),_:1},8,["model-value"]),e(Z,{"model-value":ne.value!=null,"max-width":"400px",persistent:""},{default:t(()=>[ne.value?(V(),w(Vt,{key:0,title:"Envoi des relances en cours",current:ne.value.Current,total:ne.value.Total},null,8,["current","total"])):Q("",!0)]),_:1},8,["model-value"])]),_:1}))}}),su=X({__name:"inscriptions",setup(l){const s=nt(),o=F(()=>vu(s.currentRoute.value.query)),m=F(()=>o.value.tab||"insc"),a=F(()=>o.value.idDossier);function i(c){const n=s.currentRoute.value;s.push({path:n.path,query:{tab:c}})}return(c,n)=>(V(),W(ae,null,[e(vt,{title:"Suivi des inscriptions"},{default:t(()=>[e(Ua,{"model-value":m.value,"onUpdate:modelValue":n[0]||(n[0]=d=>i(d))},{default:t(()=>[e(Ot,{value:"insc"},{default:t(()=>[...n[2]||(n[2]=[b("Inscriptions en attente",-1)])]),_:1}),e(Ot,{value:"doss"},{default:t(()=>[...n[3]||(n[3]=[b("Suivi des dossiers",-1)])]),_:1})]),_:1},8,["model-value"])]),_:1}),e($a,{"model-value":m.value},{default:t(()=>[e(Nt,{value:"insc"},{default:t(()=>[e(gn,{onGoTo:$(kt),onEmpty:n[1]||(n[1]=d=>$(kt)())},null,8,["onGoTo"])]),_:1}),e(Nt,{value:"doss"},{default:t(()=>[e(iu,{"initial-dossier":a.value},null,8,["initial-dossier"])]),_:1})]),_:1},8,["model-value"])],64))}}),ou=X({__name:"PersonneEdit",props:{personne:{}},emits:["save"],setup(l,{emit:s}){const o=l,m=s,a=D(Pe(o.personne)),i=F(()=>!!(a.value.Nom&&a.value.Prenom));return(c,n)=>{const d=ha,u=Ea;return V(),w(q,{title:"Editer le profil"},{default:t(()=>[e(Y,null,{default:t(()=>[e(Oa,null,{default:t(()=>[e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[e(fe,{autofocus:"","hide-details":"",label:"Nom",density:"compact",variant:"outlined",modelValue:a.value.Nom,"onUpdate:modelValue":n[0]||(n[0]=r=>a.value.Nom=r)},null,8,["modelValue"])]),_:1}),e(g,null,{default:t(()=>[e(fe,{"hide-details":"",label:"Prénom",density:"compact",variant:"outlined",modelValue:a.value.Prenom,"onUpdate:modelValue":n[1]||(n[1]=r=>a.value.Prenom=r)},null,8,["modelValue"])]),_:1}),e(g,null,{default:t(()=>[e(d,{modelValue:a.value.Sexe,"onUpdate:modelValue":n[2]||(n[2]=r=>a.value.Sexe=r)},null,8,["modelValue"])]),_:1}),e(g,null,{default:t(()=>[e(u,{modelValue:a.value.DateNaissance,"onUpdate:modelValue":n[3]||(n[3]=r=>a.value.DateNaissance=r)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ue),e(h,{disabled:!i.value,onClick:n[4]||(n[4]=r=>m("save",a.value))},{default:t(()=>[...n[5]||(n[5]=[b("Enregistrer",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})}}}),ru=X({__name:"annuaire",setup(l){const s=nt(),o=F(()=>pu(s.currentRoute.value.query)),m=F(()=>o.value.idPersonne);Me(()=>m.value,()=>m.value!==void 0?r(m.value):null,{immediate:!0});const a=D([]),i=D("");async function c(){if(!i.value)return;const f=await _.PersonnesGet({search:i.value});f!==void 0&&(a.value=f||[])}async function n(){const f=await _.PersonnesCreate();f!==void 0&&(_.showMessage("Profil créé avec succès."),a.value.push(f),Ge(f.Id))}const d=D(null);async function u(f){d.value=null;const v=await _.PersonnesUpdate(f);if(v===void 0)return;_.showMessage("Profil modifié avec succès."),Ge();const C=a.value.findIndex(p=>p.Id==f.Id);a.value[C]=v}async function r(f){const v=await _.PersonnesLoad({id:f});v!==void 0&&(d.value=v)}return(f,v)=>{const C=il;return V(),W(ae,null,[e(vt,{title:"Annuaire : personnes et organismes"},{default:t(()=>[...v[2]||(v[2]=[b(" TODO ",-1)])]),_:1}),e(q,{class:"ma-2"},{append:t(()=>[e(h,{color:"green",onClick:n},{default:t(()=>[...v[3]||(v[3]=[b("Créer un nouveau profil",-1)])]),_:1})]),default:t(()=>[e(Y,null,{default:t(()=>[e(L,null,{default:t(()=>[e(g,null,{default:t(()=>[e(C,{"prepend-inner-icon":"mdi-magnify",label:"Recherche",modelValue:i.value,"onUpdate:modelValue":[v[0]||(v[0]=p=>i.value=p),c]},null,8,["modelValue"]),e(De,null,{default:t(()=>[(V(!0),W(ae,null,ce(a.value,p=>(V(),w(G,{title:p.Label,subtitle:$(xe).dateNaissance(p.DateNaissance),"prepend-icon":$(xe).sexeIcon(p.Sexe),onClick:I=>$(Ge)(p.Id)},ct({_:2},[p.IsTemp?{name:"append",fn:t(()=>[e(Ce,{"prepend-icon":"mdi-alert",color:"warning"},{default:t(()=>[...v[4]||(v[4]=[b(" Ce profil est temporaire et devrait être identifié. ",-1)])]),_:1})]),key:"0"}:void 0]),1032,["title","subtitle","prepend-icon","onClick"]))),256))]),_:1})]),_:1}),e(g)]),_:1})]),_:1}),d.value!=null?(V(),w(Z,{key:0,"model-value":d.value!=null,"onUpdate:modelValue":v[1]||(v[1]=p=>{d.value=null,$(Ge)(void 0)}),"max-width":"800px"},{default:t(()=>[e(ou,{personne:d.value,onSave:u},null,8,["personne"])]),_:1},8,["model-value"])):Q("",!0)]),_:1})],64)}}}),du=[{path:"/",component:Na},{path:"/camps",component:fn},{path:"/inscriptions",component:su},{path:"/annuaire",component:ru}],mu="/backoffice",Je=Sa({history:Ia(mu),routes:du});Je.onError((l,s)=>{l?.message?.includes?.("Failed to fetch dynamically imported module")?localStorage.getItem("vuetify:dynamic-reload")?console.error("Dynamic import error, reloading page did not fix it",l):(console.log("Reloading page to fix dynamic import error"),localStorage.setItem("vuetify:dynamic-reload","true"),location.assign(s.fullPath)):console.error(l)});Je.isReady().then(()=>{localStorage.removeItem("vuetify:dynamic-reload")});function mt(l){return l?Number(l):void 0}function cu(l){const s=l;return{idCamp:mt(s.idCamp),idParticipant:mt(s.idParticipant)}}function wt(l){Je.push({path:"/camps",query:{idCamp:l.IdCamp,idParticipant:l.Id}})}function vu(l){const s=l;return{tab:s.tab,idDossier:mt(s.idDossier)}}function kt(l){Je.push({path:"/inscriptions",query:{tab:"doss",idDossier:l}})}function pu(l){return{idPersonne:mt(l.idPersonne)}}function Ge(l){Je.push({path:"/annuaire",query:{idPersonne:l}})}const fu=["innerHTML"],yu=X({__name:"App",setup(l){const s=yt({text:"",color:"secondary",action:void 0,timeout:4e3}),o=D(""),m=D("");return _.onError=(i,c)=>{o.value=i,m.value=c},_.showMessage=(i,c,n)=>{s.text=i,s.color=c||"success",s.action=n,s.timeout=1e4,s.timeout=4e3},nt().beforeEach(async(i,c)=>{if(!_.hasToken()&&i.path!=="/")return{path:"/"}}),(i,c)=>{const n=va("router-view");return V(),w(fa,null,{default:t(()=>[e(pa,null,{default:t(()=>[e(n),e(ht,{style:{"z-index":"10000"},app:"","model-value":s.text!="","onUpdate:modelValue":c[1]||(c[1]=d=>s.text=""),timeout:s.timeout,color:s.color,location:"bottom left","close-on-content-click":""},{default:t(()=>[b(U(s.text)+" ",1),s.action?(V(),w(h,{key:0,onClick:c[0]||(c[0]=d=>s.action.action()),class:"ml-2"},{default:t(()=>[b(U(s.action.title),1)]),_:1})):Q("",!0)]),_:1},8,["model-value","timeout","color"]),e(ht,{app:"","model-value":o.value!="","onUpdate:modelValue":c[2]||(c[2]=d=>o.value=""),timeout:4e3,color:"red"},{default:t(()=>[T("b",null,U(o.value),1),T("div",{innerHTML:m.value},null,8,fu)]),_:1},8,["model-value"])]),_:1})]),_:1})}}}),bl=ya(yu);bl.use(ba).use(Je);bl.mount("#app");
