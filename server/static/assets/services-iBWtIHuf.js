import{cx as L,b7 as A,b9 as x,d as R,k as l,aa as B,s as p,o as v,w as t,b as s,b1 as C,V as E,f as F,g as U,h as _,i as H,e as f,p as M,cW as N,a0 as $,ag as q,_ as P,aB as z,j as c,b2 as b,t as k,b3 as j,b4 as I,b5 as D}from"./VSnackbar-BIrRpgjn.js";class K{constructor(a,r){this.baseURL=a,this.authToken=r}getHeaders(){return{Authorization:"Bearer "+this.authToken}}async ValideTransfertFicheSanitaire(a){const r=this.baseURL+"/api/v1/espaceperso/fichesanitaires/transfert";this.startRequest();try{return await L.post(r,null,{headers:this.getHeaders(),params:{token:a.token}}),!0}catch(o){this.handleError(o)}}}class W extends K{constructor(a,r,o){super(o,""),this.onError=a,this.showMessage=r}handleError(a){const{kind:r,messageHtml:o}=x(a);this.onError(r,o)}startRequest(){}}const d=new W((i,a)=>{},(i,a)=>{},A()),h={TransfertFicheSanitaire:1};h.TransfertFicheSanitaire+"";const G=["innerHTML"],J=R({__name:"App",setup(i){const a=l(""),r=l("secondary"),o=l(""),m=l("");d.onError=(n,e)=>{o.value=n,m.value=e},d.showMessage=(n,e)=>{a.value=n,r.value=e||"success"};const y="/static/repere/logo.png",g=l(!0),V=l(1);B(()=>{const n=new URLSearchParams(window.location.search),e=n.get("service")||"",u=Number(e);switch(u){case h.TransfertFicheSanitaire:V.value=u;const T=n.get("token")||"";return S(T);default:d.onError("Service invalide",`Le paramètre <i>service</i> a une valeur incorrecte : ${e}`)}});async function S(n){const e=await d.ValideTransfertFicheSanitaire({token:n});g.value=!1}return(n,e)=>(v(),p(j,null,{default:t(()=>[s(C,null,{default:t(()=>[s(E,{rounded:"",elevation:"4",color:"secondary"},{default:t(()=>[s(F,null,{default:t(()=>[s(U,null,{default:t(()=>[s(_,{"align-self":"center",cols:"auto"},{default:t(()=>[s(H,{width:"60",src:y})]),_:1}),s(_,{"align-self":"center"},{default:t(()=>[...e[2]||(e[2]=[f(" Portail ",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),s(M,{class:"fill-height"},{default:t(()=>[s(N,null,{default:t(()=>[g.value?(v(),p(q,{key:0})):V.value==P(h).TransfertFicheSanitaire?(v(),p(z,{key:1,title:"Partage de fiche sanitaire",type:"success"},{default:t(()=>[...e[3]||(e[3]=[f(" L'accès à la fiche a bien été mis à jour. ",-1),c("br",null,null,-1),c("small",{class:"text-muted"},"Vous pouvez quitter cette page et actualiser votre espace de suivi pour y accéder.",-1)])]),_:1})):$("",!0)]),_:1})]),_:1}),s(b,{style:{"z-index":"10000"},app:"","model-value":a.value!="","onUpdate:modelValue":e[0]||(e[0]=u=>a.value=""),timeout:4e3,color:r.value,location:"bottom left","close-on-content-click":""},{default:t(()=>[f(k(a.value),1)]),_:1},8,["model-value","color"]),s(b,{app:"","model-value":o.value!="","onUpdate:modelValue":e[1]||(e[1]=u=>o.value=""),timeout:4e3,color:"red"},{default:t(()=>[c("b",null,k(o.value),1),c("div",{innerHTML:m.value},null,8,G)]),_:1},8,["model-value"])]),_:1})]),_:1}))}}),w=I(J);w.use(D);w.mount("#app");
