import{d as Z,c as h,a as H,F as ne,b as e,w as t,V as kl,e as V,f as _l,g as j,h as b,i as Cl,t as R,r as xl,j as L,o as y,u as nt,k as M,l as E,m as Pl,n as we,p as xe,q as w,s as Re,v as Fe,x as He,y as Le,z as kt,A as be,I as Oe,B as Jt,M as Gt,C as Kt,D as et,E as wl,G as Qe,H as Ue,J as st,K as Xe,L as he,N as $e,O as je,P as Dl,Q as Te,R as Xt,S as ue,T as St,U as Sl,W as Il,X as Zt,Y as Ml,Z as F,_ as el,$ as J,a0 as ve,a1 as Pe,a2 as tt,a3 as ke,a4 as _e,a5 as lt,a6 as tl,a7 as Ae,a8 as Ce,a9 as Al,aa as Be,ab as $l,ac as Ul,ad as Fl,ae as hl,af as ll,ag as at,ah as Rl,ai as Ll,aj as Tl,ak as It,al as El,am as Nl,an as Ol,ao as Bl,ap as ql,aq as jl,ar as Yl,as as zl,at as Hl,au as Ql,av as Mt,aw as At,ax as yt,ay as al,az as Wl,aA as Jl,aB as gt,aC as Gl,aD as Ee,aE as Kl,aF as Ze,aG as Xl,aH as Zl,aI as ea,aJ as ta,aK as la,aL as aa,aM as $t,aN as pt,aO as na,aP as ua,aQ as ia,aR as sa,aS as Ut,aT as Ft,aU as oa,aV as ra,aW as mt,aX as da,aY as ht,aZ as ma,a_ as ca,a$ as va,b0 as pa,b1 as Rt,b2 as fa,b3 as ya,b4 as ga}from"./VSnackbar-CBECO1fY.js";import{c as _,V as ba,a as ot,m as nl,b as Va,i as Lt,_ as ka,d as ct,e as ul,f as _a,g as ut,h as Ca,j as xa,k as Pa,l as il,n as Tt,o as wa,p as Da}from"./VSwitch-EeWoJ_DB.js";import{V as X,a as de,b as Q,c as W,d as fe,e as oe,f as se,g as Ye,h as De,i as le,j as Se,k as Ve,l as Ne,m as rt,n as Et,o as sl,p as ol,q as rl}from"./VTextarea-HUR-vMJk.js";import{_ as We,V as Sa,a as Ia,b as Ma,c as Nt,d as Ot}from"./VTabs-C_ygT-Yw.js";import{_ as Je,a as Aa,V as $a,b as Ua}from"./EventSwitch.vue_vue_type_script_setup_true_lang-z499WKc7.js";import{_ as _t}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as Ct}from"./FileCard.vue_vue_type_script_setup_true_lang-hHmw8cBR.js";import{V as dl}from"./filter-Cvf4p--q.js";import{_ as Fa,a as ha,b as Ra}from"./SexeField.vue_vue_type_script_setup_true_lang-CqY4D109.js";import{_ as La}from"./FilesRow.vue_vue_type_script_setup_true_lang-fSoshGuI.js";import"./VSheet-E-nHdF9h.js";import"./VWindowItem-kLhqlp7D.js";const vt=Z({__name:"NavBar",props:{title:{},hideMenu:{type:Boolean}},setup(l){const s="/static/repere/logo.png",r="v0.4.0",d=l,a=h(()=>_.isFondSoutien);return(o,m)=>(y(),H(ne,null,[e(ba,{app:"","model-value":!d.hideMenu,"expand-on-hover":"",permanent:"",rail:""},{append:t(()=>[e(X,{"prepend-icon":"mdi-account-circle-outline",title:a.value?"Fond de soutien":"Administrateur"},null,8,["title"]),e(X,{"prepend-icon":"mdi-logout",link:"",to:{path:"/"},color:"primary"},{default:t(()=>[...m[3]||(m[3]=[V(" Se déconnecter ",-1)])]),_:1})]),default:t(()=>[e(X,{"prepend-icon":"mdi-menu",title:`Registro ${r}`},null,8,["title"]),e(de),e(X,{"prepend-icon":"mdi-bed",link:"",to:{path:"/camps"},color:"primary"},{default:t(()=>[...m[0]||(m[0]=[V(" Séjours ",-1)])]),_:1}),e(X,{"prepend-icon":"mdi-calendar-multiple-check",link:"",to:{path:"/inscriptions"},color:"primary"},{default:t(()=>[...m[1]||(m[1]=[V(" Inscriptions ",-1)])]),_:1}),e(de),e(X,{"prepend-icon":"mdi-account-multiple",link:"",to:{path:"/annuaire"},color:"primary"},{default:t(()=>[...m[2]||(m[2]=[V(" Annuaire ",-1)])]),_:1}),e(de)]),_:1},8,["model-value"]),e(kl,{rounded:"",elevation:"4",color:"secondary"},{append:t(()=>[xl(o.$slots,"default"),m[4]||(m[4]=L("div",{class:"mr-2"},null,-1))]),default:t(()=>[e(_l,null,{default:t(()=>[e(j,null,{default:t(()=>[e(b,{"align-self":"center",cols:"auto"},{default:t(()=>[e(Cl,{width:"60",src:s})]),_:1}),e(b,{"align-self":"center"},{default:t(()=>[V(R(d.title),1)]),_:1})]),_:1})]),_:1})]),_:3})],64))}}),Ta=Z({__name:"index",setup(l){const s=nt(),r=M(!1),d=M(""),a=M([]);async function o(){const m=await _.Loggin({password:d.value});m!==void 0&&(m.IsValid?(_.setToken(m.Token,m.IsFondSoutien),_.showMessage("Bienvenue !"),s.push({path:"/camps"})):a.value=["Clé de connection incorrecte."])}return(m,u)=>(y(),H(ne,null,[e(vt,{title:"Connection au backoffice","hide-menu":""}),e(Pl,{class:"fill-height"},{default:t(()=>[e(Q,{class:"mx-auto",width:"400px"},{default:t(()=>[e(W,null,{default:t(()=>[e(fe,{label:"Clé de connection",modelValue:d.value,"onUpdate:modelValue":u[1]||(u[1]=n=>d.value=n),"error-messages":a.value,type:r.value?void 0:"password",name:"password"},{"append-inner":t(()=>[e(E,{class:"ml-2",size:"small",icon:r.value?"mdi-eye":"mdi-eye-off",flat:"",onClick:u[0]||(u[0]=n=>r.value=!r.value)},null,8,["icon"])]),_:1},8,["modelValue","error-messages","type"])]),_:1}),e(oe,null,{default:t(()=>[e(se),e(E,{disabled:!d.value.length,onClick:o},{default:t(()=>[...u[2]||(u[2]=[V("Se connecter",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})],64))}}),xt=Z({__name:"BoolField",props:we({label:{},hideDetails:{type:Boolean},readonly:{type:Boolean},density:{},persistentHint:{type:Boolean},hint:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=l,r=xe(l,"modelValue");return(d,a)=>(y(),w(Ye,{label:s.label,"model-value":r.value,"onUpdate:modelValue":a[0]||(a[0]=o=>r.value=o||!1),"hide-details":s.hideDetails,readonly:s.readonly,density:s.density,"persistent-hint":s.persistentHint,hint:s.hint},null,8,["label","model-value","hide-details","readonly","density","persistent-hint","hint"]))}}),ml=Fe({active:{type:[String,Array],default:void 0},controlHeight:[Number,String],disabled:{type:[Boolean,String,Array],default:null},nextIcon:{type:Oe,default:"$next"},prevIcon:{type:Oe,default:"$prev"},modeIcon:{type:Oe,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),Bt=Re()({name:"VDatePickerControls",props:ml(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(l,s){let{emit:r}=s;const{t:d}=He(),a=h(()=>Array.isArray(l.disabled)?l.disabled.includes("text"):!!l.disabled),o=h(()=>Array.isArray(l.disabled)?l.disabled.includes("mode"):!!l.disabled),m=h(()=>Array.isArray(l.disabled)?l.disabled.includes("prev"):!!l.disabled),u=h(()=>Array.isArray(l.disabled)?l.disabled.includes("next"):!!l.disabled);function n(){r("click:prev")}function i(){r("click:next")}function c(){r("click:year")}function p(){r("click:month")}return Le(()=>L("div",{class:be(["v-date-picker-controls"]),style:{"--v-date-picker-controls-height":kt(l.controlHeight)}},[e(E,{class:"v-date-picker-controls__month-btn","data-testid":"month-btn",disabled:a.value,text:l.text,variant:"text",rounded:!0,onClick:p},null),e(E,{class:"v-date-picker-controls__mode-btn","data-testid":"year-btn",disabled:o.value,density:"comfortable",icon:l.modeIcon,variant:"text","aria-label":d("$vuetify.datePicker.ariaLabel.selectYear"),onClick:c},null),e(se,null,null),L("div",{class:"v-date-picker-controls__month"},[e(E,{"data-testid":"prev-month",disabled:m.value,density:"comfortable",icon:l.prevIcon,variant:"text","aria-label":d("$vuetify.datePicker.ariaLabel.previousMonth"),onClick:n},null),e(E,{"data-testid":"next-month",disabled:u.value,icon:l.nextIcon,density:"comfortable",variant:"text","aria-label":d("$vuetify.datePicker.ariaLabel.nextMonth"),onClick:i},null)])])),{}}}),Ea=Fe({appendIcon:Oe,color:String,header:String,transition:String,onClick:wl()},"VDatePickerHeader"),qt=Re()({name:"VDatePickerHeader",props:Ea(),emits:{click:()=>!0,"click:append":()=>!0},setup(l,s){let{emit:r,slots:d}=s;const{backgroundColorClasses:a,backgroundColorStyles:o}=Jt(()=>l.color);function m(){r("click")}function u(){r("click:append")}return Le(()=>{const n=!!(d.default||l.header),i=!!(d.append||l.appendIcon);return L("div",{class:be(["v-date-picker-header",{"v-date-picker-header--clickable":!!l.onClick},a.value]),style:et(o.value),onClick:m},[d.prepend&&L("div",{key:"prepend",class:"v-date-picker-header__prepend"},[d.prepend()]),n&&e(Gt,{key:"content",name:l.transition},{default:()=>{var c;return[L("div",{key:l.header,class:"v-date-picker-header__content"},[((c=d.default)==null?void 0:c.call(d))??l.header])]}}),i&&L("div",{class:"v-date-picker-header__append"},[d.append?e(Kt,{key:"append-defaults",disabled:!l.appendIcon,defaults:{VBtn:{icon:l.appendIcon,variant:"text"}}},{default:()=>{var c;return[(c=d.append)==null?void 0:c.call(d)]}}):e(E,{key:"append-btn",icon:l.appendIcon,variant:"text",onClick:u},null)])])}),{}}}),Na=Fe({allowedDates:[Array,Function],disabled:{type:Boolean,default:null},displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:{type:[Number,String],default:void 0},firstDayOfYear:{type:[Number,String],default:void 0},weekdayFormat:String},"calendar");function Oa(l){const s=Qe(),r=Ue(l,"modelValue",[],f=>st(f).map(P=>s.date(P))),d=h(()=>l.displayValue?s.date(l.displayValue):r.value.length>0?s.date(r.value[0]):l.min?s.date(l.min):Array.isArray(l.allowedDates)?s.date(l.allowedDates[0]):s.date()),a=Ue(l,"year",void 0,f=>{const P=f!=null?Number(f):s.getYear(d.value);return s.startOfYear(s.setYear(s.date(),P))},f=>s.getYear(f)),o=Ue(l,"month",void 0,f=>{const P=f!=null?Number(f):s.getMonth(d.value),C=s.setYear(s.startOfMonth(s.date()),s.getYear(a.value));return s.setMonth(C,P)},f=>s.getMonth(f)),m=h(()=>{const f=s.toJsDate(s.startOfWeek(s.date(),l.firstDayOfWeek)).getDay();return s.getWeekdays(l.firstDayOfWeek,l.weekdayFormat).filter((P,C)=>l.weekdays.includes((C+f)%7))}),u=h(()=>{const f=s.getWeekArray(o.value,l.firstDayOfWeek),P=f.flat(),C=6*7;if(l.weeksInMonth==="static"&&P.length<C){const k=P[P.length-1];let D=[];for(let q=1;q<=C-P.length;q++)D.push(s.addDays(k,q)),q%7===0&&(f.push(D),D=[])}return f});function n(f,P){return f.filter(C=>l.weekdays.includes(s.toJsDate(C).getDay())).map((C,k)=>{const D=s.toISO(C),q=!s.isSameMonth(C,o.value),N=s.isSameDay(C,s.startOfMonth(o.value)),x=s.isSameDay(C,s.endOfMonth(o.value)),g=s.isSameDay(C,o.value),te=l.weekdays.length;return{date:C,formatted:s.format(C,"keyboardDate"),isAdjacent:q,isDisabled:v(C),isEnd:x,isHidden:q&&!l.showAdjacentMonths,isSame:g,isSelected:r.value.some(me=>s.isSameDay(C,me)),isStart:N,isToday:s.isSameDay(C,P),isWeekEnd:k%te===te-1,isWeekStart:k%te===0,isoDate:D,localized:s.format(C,"dayOfMonth"),month:s.getMonth(C),year:s.getYear(C)}})}const i=h(()=>{const f=s.startOfWeek(d.value,l.firstDayOfWeek),P=[];for(let k=0;k<=6;k++)P.push(s.addDays(f,k));const C=s.date();return n(P,C)}),c=h(()=>{const f=u.value.flat(),P=s.date();return n(f,P)}),p=h(()=>u.value.map(f=>f.length?s.getWeek(f[0],l.firstDayOfWeek,l.firstDayOfYear):null));function v(f){if(l.disabled)return!0;const P=s.date(f);return l.min&&s.isBefore(s.endOfDay(P),s.date(l.min))||l.max&&s.isAfter(P,s.date(l.max))?!0:Array.isArray(l.allowedDates)&&l.allowedDates.length>0?!l.allowedDates.some(C=>s.isSameDay(s.date(C),P)):typeof l.allowedDates=="function"?!l.allowedDates(P):!1}return{displayValue:d,daysInMonth:c,daysInWeek:i,genDays:n,model:r,weeksInMonth:u,weekdayLabels:m,weekNumbers:p}}const cl=Fe({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...je(Na(),["displayValue"])},"VDatePickerMonth"),jt=Re()({name:"VDatePickerMonth",props:cl(),emits:{"update:modelValue":l=>!0,"update:month":l=>!0,"update:year":l=>!0},setup(l,s){let{emit:r,slots:d}=s;const a=M(),{t:o}=He(),{daysInMonth:m,model:u,weekNumbers:n,weekdayLabels:i}=Oa(l),c=Qe(),p=Xe(),v=Xe(),f=Xe(!1),P=he(()=>f.value?l.reverseTransition:l.transition);l.multiple==="range"&&u.value.length>0&&(p.value=u.value[0],u.value.length>1&&(v.value=u.value[u.value.length-1]));const C=h(()=>{const x=["number","string"].includes(typeof l.multiple)?Number(l.multiple):1/0;return u.value.length>=x});$e(m,(x,g)=>{g&&(f.value=c.isBefore(x[0].date,g[0].date))});function k(x){const g=c.startOfDay(x);if(u.value.length===0?p.value=void 0:u.value.length===1&&(p.value=u.value[0],v.value=void 0),!p.value)p.value=g,u.value=[p.value];else if(v.value)p.value=x,v.value=void 0,u.value=[p.value];else{if(c.isSameDay(g,p.value)){p.value=void 0,u.value=[];return}else c.isBefore(g,p.value)?(v.value=c.endOfDay(p.value),p.value=g):v.value=c.endOfDay(g);u.value=Dl(c,p.value,v.value)}}function D(x){const g=c.format(x.date,"fullDateWithWeekday"),te=x.isToday?"currentDate":"selectDate";return o(`$vuetify.datePicker.ariaLabel.${te}`,g)}function q(x){const g=u.value.findIndex(te=>c.isSameDay(te,x));if(g===-1)u.value=[...u.value,x];else{const te=[...u.value];te.splice(g,1),u.value=te}}function N(x){l.multiple==="range"?k(x):l.multiple?q(x):u.value=[x]}Le(()=>L("div",{class:"v-date-picker-month",style:{"--v-date-picker-days-in-week":l.weekdays.length}},[l.showWeek&&L("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!l.hideWeekdays&&L("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[V(" ")]),n.value.map(x=>L("div",{class:be(["v-date-picker-month__day","v-date-picker-month__day--adjacent"])},[x]))]),e(Gt,{name:P.value},{default:()=>{var x;return[L("div",{ref:a,key:(x=m.value[0].date)==null?void 0:x.toString(),class:"v-date-picker-month__days"},[!l.hideWeekdays&&i.value.map(g=>L("div",{class:be(["v-date-picker-month__day","v-date-picker-month__weekday"])},[g])),m.value.map((g,te)=>{var z;const me={props:{class:"v-date-picker-month__day-btn",color:g.isSelected||g.isToday?l.color:void 0,disabled:g.isDisabled,icon:!0,ripple:!1,text:g.localized,variant:g.isSelected?"flat":g.isToday?"outlined":"text","aria-label":D(g),"aria-current":g.isToday?"date":void 0,onClick:()=>N(g.date)},item:g,i:te};return C.value&&!g.isSelected&&(g.isDisabled=!0),L("div",{class:be(["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":g.isAdjacent,"v-date-picker-month__day--hide-adjacent":g.isHidden,"v-date-picker-month__day--selected":g.isSelected,"v-date-picker-month__day--week-end":g.isWeekEnd,"v-date-picker-month__day--week-start":g.isWeekStart}]),"data-v-date":g.isDisabled?void 0:g.isoDate},[(l.showAdjacentMonths||!g.isAdjacent)&&(((z=d.day)==null?void 0:z.call(d,me))??e(E,me.props,null))])})])]}})]))}}),vl=Fe({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number,allowedMonths:[Array,Function]},"VDatePickerMonths"),Yt=Re()({name:"VDatePickerMonths",props:vl(),emits:{"update:modelValue":l=>!0},setup(l,s){let{emit:r,slots:d}=s;const a=Qe(),o=Ue(l,"modelValue"),m=h(()=>{let n=a.startOfYear(a.date());return l.year&&(n=a.setYear(n,l.year)),Te(12).map(i=>{const c=a.format(n,"monthShort"),p=a.format(n,"month"),v=!!(!u(i)||l.min&&a.isAfter(a.startOfMonth(a.date(l.min)),n)||l.max&&a.isAfter(n,a.startOfMonth(a.date(l.max))));return n=a.getNextMonth(n),{isDisabled:v,text:c,label:p,value:i}})});Xt(()=>{o.value=o.value??a.getMonth(a.date())});function u(n){return Array.isArray(l.allowedMonths)&&l.allowedMonths.length?l.allowedMonths.includes(n):typeof l.allowedMonths=="function"?l.allowedMonths(n):!0}return Le(()=>L("div",{class:"v-date-picker-months",style:{height:kt(l.height)}},[L("div",{class:"v-date-picker-months__content"},[m.value.map((n,i)=>{var v;const c={active:o.value===i,ariaLabel:n.label,color:o.value===i?l.color:void 0,disabled:n.isDisabled,rounded:!0,text:n.text,variant:o.value===n.value?"flat":"text",onClick:()=>p(i)};function p(f){if(o.value===f){r("update:modelValue",o.value);return}o.value=f}return((v=d.month)==null?void 0:v.call(d,{month:n,i,props:c}))??e(E,ue({key:"month"},c),null)})])])),{}}}),pl=Fe({color:String,height:[String,Number],min:null,max:null,modelValue:Number,allowedYears:[Array,Function]},"VDatePickerYears"),zt=Re()({name:"VDatePickerYears",props:pl(),directives:{vIntersect:St},emits:{"update:modelValue":l=>!0},setup(l,s){let{emit:r,slots:d}=s;const a=Qe(),o=Ue(l,"modelValue"),m=h(()=>{const c=a.getYear(a.date());let p=c-100,v=c+52;l.min&&(p=a.getYear(a.date(l.min))),l.max&&(v=a.getYear(a.date(l.max)));let f=a.startOfYear(a.date());return f=a.setYear(f,p),Te(v-p+1,p).map(P=>{const C=a.format(f,"year");return f=a.setYear(f,a.getYear(f)+1),{text:C,value:P,isDisabled:!i(P)}})});Xt(()=>{o.value=o.value??a.getYear(a.date())});const u=Sl();function n(){var c,p;(c=u.el)==null||c.focus(),(p=u.el)==null||p.scrollIntoView({block:"center"})}function i(c){return Array.isArray(l.allowedYears)&&l.allowedYears.length?l.allowedYears.includes(c):typeof l.allowedYears=="function"?l.allowedYears(c):!0}return Le(()=>Il(L("div",{class:"v-date-picker-years",style:{height:kt(l.height)}},[L("div",{class:"v-date-picker-years__content"},[m.value.map((c,p)=>{var f;const v={ref:o.value===c.value?u:void 0,active:o.value===c.value,color:o.value===c.value?l.color:void 0,rounded:!0,text:c.text,disabled:c.isDisabled,variant:o.value===c.value?"flat":"text",onClick:()=>{if(o.value===c.value){r("update:modelValue",o.value);return}o.value=c.value}};return((f=d.year)==null?void 0:f.call(d,{year:c,i:p,props:v}))??e(E,ue({key:"month"},v),null)})])]),[[St,{handler:n},null,{once:!0}]])),{}}}),Ba=Fe({header:{type:String,default:"$vuetify.datePicker.header"},headerColor:String,...ml(),...cl({weeksInMonth:"static"}),...je(vl(),["modelValue"]),...je(pl(),["modelValue"]),...nl({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),qa=Re()({name:"VDatePicker",props:Ba(),emits:{"update:modelValue":l=>!0,"update:month":l=>!0,"update:year":l=>!0,"update:viewMode":l=>!0},setup(l,s){let{emit:r,slots:d}=s;const a=Qe(),{t:o}=He(),{rtlClasses:m}=Zt(),u=Ue(l,"modelValue",void 0,A=>st(A).map(I=>a.date(I)),A=>l.multiple?A:A[0]),n=Ue(l,"viewMode"),i=h(()=>{const A=a.date(l.min);return l.min&&a.isValid(A)?A:null}),c=h(()=>{const A=a.date(l.max);return l.max&&a.isValid(A)?A:null}),p=h(()=>{var B;const A=a.date();let I=A;return(B=u.value)!=null&&B[0]?I=a.date(u.value[0]):i.value&&a.isBefore(A,i.value)?I=i.value:c.value&&a.isAfter(A,c.value)&&(I=c.value),I&&a.isValid(I)?I:A}),v=he(()=>l.headerColor??l.color),f=Ue(l,"month"),P=h({get:()=>Number(f.value??a.getMonth(a.startOfMonth(p.value))),set:A=>f.value=A}),C=Ue(l,"year"),k=h({get:()=>Number(C.value??a.getYear(a.startOfYear(a.setMonth(p.value,P.value)))),set:A=>C.value=A}),D=Xe(!1),q=h(()=>l.multiple&&u.value.length>1?o("$vuetify.datePicker.itemsSelected",u.value.length):u.value[0]&&a.isValid(u.value[0])?a.format(a.date(u.value[0]),"normalDateWithWeekday"):o(l.header)),N=h(()=>{let A=a.date();return A=a.setDate(A,1),A=a.setMonth(A,P.value),A=a.setYear(A,k.value),a.format(A,"monthAndYear")}),x=he(()=>`date-picker-header${D.value?"-reverse":""}-transition`),g=h(()=>{if(l.disabled)return!0;const A=[];if(n.value!=="month")A.push("prev","next");else{let I=a.date();if(I=a.startOfMonth(I),I=a.setMonth(I,P.value),I=a.setYear(I,k.value),i.value){const B=a.addDays(a.startOfMonth(I),-1);a.isAfter(i.value,B)&&A.push("prev")}if(c.value){const B=a.addDays(a.endOfMonth(I),1);a.isAfter(B,c.value)&&A.push("next")}}return A}),te=h(()=>l.allowedYears||S),me=h(()=>l.allowedMonths||ee);function z(A,I){const B=l.allowedDates;if(typeof B!="function")return!0;const ae=a.getDiff(I,A,"days");for(let ge=0;ge<ae;ge++)if(B(a.addDays(A,ge)))return!0;return!1}function S(A){if(typeof l.allowedDates=="function"){const I=a.parseISO(`${A}-01-01`);return z(I,a.endOfYear(I))}if(Array.isArray(l.allowedDates)&&l.allowedDates.length){for(const I of l.allowedDates)if(a.getYear(a.date(I))===A)return!0;return!1}return!0}function ee(A){if(typeof l.allowedDates=="function"){const I=String(A+1).padStart(2,"0"),B=a.parseISO(`${k.value}-${I}-01`);return z(B,a.endOfMonth(B))}if(Array.isArray(l.allowedDates)&&l.allowedDates.length){for(const I of l.allowedDates)if(a.getYear(a.date(I))===k.value&&a.getMonth(a.date(I))===A)return!0;return!1}return!0}function G(){P.value<11?P.value++:(k.value++,P.value=0,re()),$()}function T(){P.value>0?P.value--:(k.value--,P.value=11,re()),$()}function K(){n.value="month"}function ce(){n.value=n.value==="months"?"month":"months"}function O(){n.value=n.value==="year"?"month":"year"}function $(){n.value==="months"&&ce()}function re(){n.value==="year"&&O()}return $e(u,(A,I)=>{const B=st(I),ae=st(A);if(!ae.length)return;const ge=a.date(B[B.length-1]),pe=a.date(ae[ae.length-1]),Ie=a.getMonth(pe),U=a.getYear(pe);Ie!==P.value&&(P.value=Ie,$()),U!==k.value&&(k.value=U,re()),D.value=a.isBefore(ge,pe)}),Le(()=>{const A=ot.filterProps(l),I=Bt.filterProps(l),B=qt.filterProps(l),ae=jt.filterProps(l),ge=je(Yt.filterProps(l),["modelValue"]),pe=je(zt.filterProps(l),["modelValue"]),Ie={color:v.value,header:q.value,transition:x.value};return e(ot,ue(A,{color:v.value,class:["v-date-picker",`v-date-picker--${n.value}`,{"v-date-picker--show-week":l.showWeek},m.value,l.class],style:l.style}),{title:()=>{var U;return((U=d.title)==null?void 0:U.call(d))??L("div",{class:"v-date-picker__title"},[o(l.title)])},header:()=>d.header?e(Kt,{defaults:{VDatePickerHeader:{...Ie}}},{default:()=>{var U;return[(U=d.header)==null?void 0:U.call(d,Ie)]}}):e(qt,ue({key:"header"},B,Ie,{onClick:n.value!=="month"?K:void 0}),{prepend:d.prepend,append:d.append}),default:()=>L(ne,null,[e(Bt,ue(I,{disabled:g.value,text:N.value,"onClick:next":G,"onClick:prev":T,"onClick:month":ce,"onClick:year":O}),null),e(Ml,{hideOnLeave:!0},{default:()=>[n.value==="months"?e(Yt,ue({key:"date-picker-months"},ge,{modelValue:P.value,"onUpdate:modelValue":[U=>P.value=U,$],min:i.value,max:c.value,year:k.value,allowedMonths:me.value}),{month:d.month}):n.value==="year"?e(zt,ue({key:"date-picker-years"},pe,{modelValue:k.value,"onUpdate:modelValue":[U=>k.value=U,re],min:i.value,max:c.value,allowedYears:te.value}),{year:d.year}):e(jt,ue({key:"date-picker-month"},ae,{modelValue:u.value,"onUpdate:modelValue":U=>u.value=U,month:P.value,"onUpdate:month":[U=>P.value=U,$],year:k.value,"onUpdate:year":[U=>k.value=U,re],min:i.value,max:c.value}),{day:d.day})]})]),actions:d.actions})}),{}}}),ja=Z({__name:"DateField",props:we({label:{},hideDetails:{type:Boolean},readonly:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=l,r=xe(l,"modelValue"),d=Qe();function a(m){o.value=!1,r.value=el(m)}const o=M(!1);return(m,u)=>s.readonly?(y(),w(fe,{key:0,class:"center-text",variant:"outlined",density:"compact","hide-details":s.hideDetails,label:s.label,"model-value":F(d).parseISO(r.value).toLocaleDateString(),readonly:""},null,8,["hide-details","label","model-value"])):(y(),w(De,{key:1,"close-on-content-click":!1,modelValue:o.value,"onUpdate:modelValue":u[1]||(u[1]=n=>o.value=n)},{activator:t(({props:n})=>[e(fe,ue({class:"center-text"},n,{variant:"outlined",density:"compact","hide-details":s.hideDetails,label:s.label,"model-value":F(d).parseISO(r.value).toLocaleDateString()}),null,16,["hide-details","label","model-value"])]),default:t(()=>[e(qa,{"model-value":F(d).parseISO(r.value),"onUpdate:modelValue":u[0]||(u[0]=n=>a(n))},null,8,["model-value"])]),_:1},8,["modelValue"]))}}),fl=_t(ja,[["__scopeId","data-v-1e184428"]]),Ya=Z({__name:"OptionStatut",props:we({camp:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=l,r=xe(l,"modelValue");function d(){var i;const m=(i=r.value)!=null&&i.length?r.value.map(c=>c.Id):[0],n={Id:Math.max(...m)+1,Label:"",Description:"",Prix:s.camp.Prix.Cent};r.value=(r.value||[]).concat(n),a.value=n}const a=M(null);function o(m){r.value=(r.value||[]).filter(u=>u.Id!=m.Id)}return(m,u)=>{const n=Je;return y(),w(Q,{subtitle:"Le prix dépend du statut du participant, à choisir parmi la liste ci-dessous."},{append:t(()=>[e(E,{icon:"",size:"x-small",onClick:d},{default:t(()=>[e(ke,{color:"green"},{default:t(()=>[...u[4]||(u[4]=[V("mdi-plus",-1)])]),_:1})]),_:1})]),default:t(()=>[a.value!=null?(y(),w(le,{key:0,"model-value":a.value!=null,"onUpdate:modelValue":u[3]||(u[3]=i=>a.value=null),"max-width":"500px"},{default:t(()=>[e(Q,{title:"Modifier le statut"},{default:t(()=>[e(W,null,{default:t(()=>[e(j,null,{default:t(()=>[e(b,{cols:"12"},{default:t(()=>[e(fe,{autofocus:"",label:"Statut",modelValue:a.value.Label,"onUpdate:modelValue":u[0]||(u[0]=i=>a.value.Label=i),density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(b,{cols:"12"},{default:t(()=>[e(fe,{label:"Description",modelValue:a.value.Description,"onUpdate:modelValue":u[1]||(u[1]=i=>a.value.Description=i),density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(b,{cols:"12"},{default:t(()=>[e(n,{"model-value":{Cent:a.value.Prix,Currency:s.camp.Prix.Currency},"onUpdate:modelValue":u[2]||(u[2]=i=>a.value.Prix=i.Cent),label:"Prix","readonly-currency":""},null,8,["model-value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])):J("",!0),e(W,{class:"py-0"},{default:t(()=>[e(Se,null,{default:t(()=>{var i;return[(i=r.value)!=null&&i.length?J("",!0):(y(),w(X,{key:0},{default:t(()=>[...u[5]||(u[5]=[L("i",null,"Aucun statut n'est encore défini.",-1)])]),_:1})),(y(!0),H(ne,null,ve(r.value,c=>(y(),w(X,{title:c.Label,subtitle:c.Description,onClick:p=>a.value=c},{append:t(()=>[e(j,null,{default:t(()=>[e(b,{"align-self":"center"},{default:t(()=>[e(Ve,null,{default:t(()=>[V(R(F(Pe).montant({Cent:c.Prix,Currency:m.camp.Prix.Currency})),1)]),_:2},1024)]),_:2},1024),e(b,{"align-self":"center",cols:"auto"},{default:t(()=>[e(E,{icon:"",size:"x-small",class:"my-1",onClick:tt(p=>o(c),["stop"])},{default:t(()=>[e(ke,{color:"red"},{default:t(()=>[...u[6]||(u[6]=[V("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["title","subtitle","onClick"]))),256))]}),_:1})]),_:1})]),_:1})}}}),za=Z({__name:"OptionJournee",props:we({camp:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=l,r=xe(l,"modelValue");$e(()=>r.value,d,{immediate:!0});function d(){var m;const o=s.camp.Duree;((m=r.value)==null?void 0:m.length)!=o&&(r.value=Array.from({length:o}).map(u=>0))}function a(){const o=r.value,m=o[0];for(let u=0;u<o.length;u++)o[u]=m}return(o,m)=>{const u=Je;return y(),w(Q,{subtitle:"Le prix est variable en fonction des jours de participation au camp."},{append:t(()=>[e(Ct,{text:"Appliquer le prix du premier jour à tous."},{activator:t(({props:n})=>[e(E,ue(n,{icon:"mdi-arrow-expand",size:"x-small",disabled:!(r.value||[])[0],onClick:a}),null,16,["disabled"])]),_:1})]),default:t(()=>[e(W,null,{default:t(()=>[e(j,null,{default:t(()=>[(y(!0),H(ne,null,ve(r.value,(n,i)=>(y(),w(b,{cols:"3"},{default:t(()=>[e(u,{label:`Jour ${i+1}`,"model-value":{Cent:n,Currency:s.camp.Prix.Currency},"onUpdate:modelValue":c=>r.value[i]=c.Cent,"readonly-currency":""},null,8,["label","model-value","onUpdate:modelValue"])]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})}}}),Ha={key:0,class:"text-center"},Qa=Z({__name:"CampOptionsPrix",props:we({camp:{}},{optionPrix:{required:!0},optionPrixModifiers:{},optionQf:{required:!0},optionQfModifiers:{}}),emits:["update:optionPrix","update:optionQf"],setup(l){const s=l,r=xe(l,"optionPrix"),d=xe(l,"optionQf"),a=h(()=>_e.isQuotientFamilialActive(d.value)),o=lt(tl);return(m,u)=>{const n=We;return y(),w(Q,{title:"Options sur le prix",subtitle:"Permet de modifier le prix de base du séjour",width:"1000px"},{default:t(()=>[e(W,null,{default:t(()=>[e(j,null,{default:t(()=>[e(b,{"align-self":"center"},{default:t(()=>[e(Ye,{"model-value":a.value,"onUpdate:modelValue":u[0]||(u[0]=i=>d.value[3]=i?100:0),"hide-details":"",label:"Prix au quotient familial"},null,8,["model-value"])]),_:1}),e(b,{"align-self":"center"},{default:t(()=>[e(n,{suffix:"%",min:0,max:100,disabled:!a.value,"hide-details":"","readonly-currency":"",label:"entre 1 et 359",modelValue:d.value[0],"onUpdate:modelValue":u[1]||(u[1]=i=>d.value[0]=i)},null,8,["disabled","modelValue"])]),_:1}),e(b,{"align-self":"center"},{default:t(()=>[e(n,{suffix:"%",min:0,max:100,disabled:!a.value,"hide-details":"","readonly-currency":"",label:"entre 360 et 564",modelValue:d.value[1],"onUpdate:modelValue":u[2]||(u[2]=i=>d.value[1]=i)},null,8,["disabled","modelValue"])]),_:1}),e(b,{"align-self":"center"},{default:t(()=>[e(n,{suffix:"%",min:0,max:100,disabled:!a.value,"hide-details":"","readonly-currency":"",label:"entre 565 et 714",modelValue:d.value[2],"onUpdate:modelValue":u[3]||(u[3]=i=>d.value[2]=i)},null,8,["disabled","modelValue"])]),_:1}),e(b,{"align-self":"center"},{default:t(()=>[e(n,{suffix:"%",min:0,max:100,disabled:!0,"hide-details":"","readonly-currency":"",label:"plus de 715",modelValue:d.value[3],"onUpdate:modelValue":u[4]||(u[4]=i=>d.value[3]=i)},null,8,["modelValue"])]),_:1})]),_:1}),e(de,{thickness:"1",class:"my-2"}),e(j,{class:"my-2"},{default:t(()=>[e(b,{"align-self":"center",cols:"4"},{default:t(()=>[e(Ne,{variant:"outlined",density:"comfortable","hide-details":"",items:F(o),label:"Option sur le prix",modelValue:r.value.Active,"onUpdate:modelValue":u[5]||(u[5]=i=>r.value.Active=i)},null,8,["items","modelValue"])]),_:1}),e(b,{"align-self":"center"},{default:t(()=>[r.value.Active==F(Ae).NoOption?(y(),H("div",Ha,[...u[8]||(u[8]=[L("i",null,"Aucune modification sur le prix de base.",-1)])])):r.value.Active==F(Ae).PrixStatut?(y(),w(Ya,{key:1,camp:s.camp,modelValue:r.value.Statuts,"onUpdate:modelValue":u[6]||(u[6]=i=>r.value.Statuts=i)},null,8,["camp","modelValue"])):r.value.Active==F(Ae).PrixJour?(y(),w(za,{key:2,camp:s.camp,modelValue:r.value.Jours,"onUpdate:modelValue":u[7]||(u[7]=i=>r.value.Jours=i)},null,8,["camp","modelValue"])):J("",!0)]),_:1})]),_:1})]),_:1})]),_:1})}}}),Wa={key:0,class:"mx-1"},Ja={key:1,class:"mx-1"},Ga={key:2,class:"mx-1"},Ka=Z({__name:"CampEdit",props:{camp:{}},emits:["save"],setup(l,{emit:s}){const r=l,d=s,a=M(Ce(r.camp)),o=h(()=>{var u,n;return new Date(a.value.DateDebut).getFullYear()>=2020&&a.value.Places>=1&&a.value.Nom!=""&&a.value.AgeMax>=a.value.AgeMin&&a.value.OptionQuotientFamilial.every(i=>0<=i&&i<=100)&&!(a.value.OptionPrix.Active==Ae.PrixStatut&&!((u=a.value.OptionPrix.Statuts)!=null&&u.length))&&!(a.value.OptionPrix.Active==Ae.PrixJour&&((n=a.value.OptionPrix.Jours)==null?void 0:n.length)!=a.value.Duree)}),m=lt(Al);return(u,n)=>{const i=fl,c=We,p=Je,v=xt;return y(),w(Q,{title:"Editer le séjour"},{default:t(()=>[e(W,null,{default:t(()=>[e(dl,null,{default:t(()=>[e(j,null,{default:t(()=>[e(b,null,{default:t(()=>[e(fe,{autofocus:"","hide-details":"",label:"Nom",density:"compact",variant:"outlined",modelValue:a.value.Nom,"onUpdate:modelValue":n[0]||(n[0]=f=>a.value.Nom=f)},null,8,["modelValue"])]),_:1}),e(b,null,{default:t(()=>[e(fe,{"hide-details":"",label:"Lieu",density:"compact",variant:"outlined",modelValue:a.value.Lieu,"onUpdate:modelValue":n[1]||(n[1]=f=>a.value.Lieu=f)},null,8,["modelValue"])]),_:1}),e(b,null,{default:t(()=>[e(fe,{"hide-details":"",label:"Numéro d'agrément",density:"compact",variant:"outlined",modelValue:a.value.Agrement,"onUpdate:modelValue":n[2]||(n[2]=f=>a.value.Agrement=f)},null,8,["modelValue"])]),_:1}),e(b,null,{default:t(()=>[e(Ne,{label:"Ouverture aux inscriptions",variant:"outlined",density:"compact",items:F(m),"hide-details":"",modelValue:a.value.Statut,"onUpdate:modelValue":n[3]||(n[3]=f=>a.value.Statut=f)},null,8,["items","modelValue"])]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(b,{"align-self":"center",cols:"2"},{default:t(()=>[e(i,{modelValue:a.value.DateDebut,"onUpdate:modelValue":n[4]||(n[4]=f=>a.value.DateDebut=f),label:"Date de début","hide-details":""},null,8,["modelValue"])]),_:1}),e(b,{"align-self":"center",cols:"2"},{default:t(()=>[e(c,{label:"Durée (en jours)",modelValue:a.value.Duree,"onUpdate:modelValue":n[5]||(n[5]=f=>a.value.Duree=f),"hide-details":""},null,8,["modelValue"])]),_:1}),e(b,{"align-self":"center",cols:"2"},{default:t(()=>[e(i,{"model-value":F(_e).dateFin(a.value),label:"Date de fin",readonly:"","hide-details":""},null,8,["model-value"])]),_:1}),e(b,{"align-self":"center",cols:"3"},{default:t(()=>[e(p,{label:"Prix",modelValue:a.value.Prix,"onUpdate:modelValue":n[6]||(n[6]=f=>a.value.Prix=f),"hide-details":""},null,8,["modelValue"])]),_:1}),e(b,{"align-self":"center",cols:"3",class:"text-center"},{default:t(()=>[e(De,{"close-on-content-click":!1},{activator:t(({props:f})=>[e(Ve,ue(f,{elevation:"1",label:""}),{default:t(()=>[!F(_e).isQuotientFamilialActive(a.value.OptionQuotientFamilial)&&a.value.OptionPrix.Active==F(Ae).NoOption?(y(),H("div",Wa," Aucune option ")):J("",!0),F(_e).isQuotientFamilialActive(a.value.OptionQuotientFamilial)?(y(),H("div",Ja," Quotient familial ")):J("",!0),a.value.OptionPrix.Active!=F(Ae).NoOption?(y(),H("div",Ga,R(F(tl)[a.value.OptionPrix.Active]),1)):J("",!0)]),_:1},16)]),default:t(()=>[e(Qa,{camp:a.value,"option-prix":a.value.OptionPrix,"onUpdate:optionPrix":n[7]||(n[7]=f=>a.value.OptionPrix=f),"option-qf":a.value.OptionQuotientFamilial,"onUpdate:optionQf":n[8]||(n[8]=f=>a.value.OptionQuotientFamilial=f)},null,8,["camp","option-prix","option-qf"])]),_:1})]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(b,{"align-self":"center",cols:"2"},{default:t(()=>[e(c,{modelValue:a.value.Places,"onUpdate:modelValue":n[9]||(n[9]=f=>a.value.Places=f),label:"Nombre de places"},null,8,["modelValue"])]),_:1}),e(b,{"align-self":"center",cols:"2"},{default:t(()=>[e(c,{modelValue:a.value.AgeMin,"onUpdate:modelValue":n[10]||(n[10]=f=>a.value.AgeMin=f),label:"Âge minimum"},null,8,["modelValue"])]),_:1}),e(b,{"align-self":"center",cols:"2"},{default:t(()=>[e(c,{modelValue:a.value.AgeMax,"onUpdate:modelValue":n[11]||(n[11]=f=>a.value.AgeMax=f),label:"Âge maximum"},null,8,["modelValue"])]),_:1}),e(b,{cols:"6"},{default:t(()=>[e(v,{modelValue:a.value.NeedEquilibreGF,"onUpdate:modelValue":n[12]||(n[12]=f=>a.value.NeedEquilibreGF=f),label:"Equilibre G/F demandé",density:"compact","persistent-hint":"",hint:"Place un inscrit en liste d'attente en cas de déséquilibre Garçons/Filles"},null,8,["modelValue"])]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(b,null,{default:t(()=>[e(rt,{variant:"outlined",density:"compact",label:"Description",hint:"Ce texte est affiché sur le formulaire d'inscription.","persistent-hint":"",rows:"3",modelValue:a.value.Description,"onUpdate:modelValue":n[13]||(n[13]=f=>a.value.Description=f)},null,8,["modelValue"])]),_:1}),e(b,{cols:"2"}),e(b,{cols:"2"},{default:t(()=>[e(v,{label:"Navette",modelValue:a.value.Navette.Actif,"onUpdate:modelValue":n[14]||(n[14]=f=>a.value.Navette.Actif=f)},null,8,["modelValue"])]),_:1}),e(b,null,{default:t(()=>[e(rt,{variant:"outlined",density:"compact",label:"Navette",hint:"Ce texte est affiché sur l'espace personnel de suivi.","persistent-hint":"",rows:"3",disabled:!a.value.Navette.Actif,modelValue:a.value.Navette.Commentaire,"onUpdate:modelValue":n[15]||(n[15]=f=>a.value.Navette.Commentaire=f)},null,8,["disabled","modelValue"])]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(b,null,{default:t(()=>[e(fe,{label:"Image",density:"compact",variant:"outlined",hint:"Lien vers une image affichée sur le formulaire d'inscription","persistent-hint":"",modelValue:a.value.ImageURL,"onUpdate:modelValue":n[16]||(n[16]=f=>a.value.ImageURL=f)},null,8,["modelValue"])]),_:1}),e(b,null,{default:t(()=>[e(fe,{label:"Mot de passe",density:"compact",variant:"outlined",hint:"Mot de passe d'accès à la page Directeur","persistent-hint":"",modelValue:a.value.Password,"onUpdate:modelValue":n[17]||(n[17]=f=>a.value.Password=f)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(oe,null,{default:t(()=>[e(se),e(E,{disabled:!o.value,onClick:n[18]||(n[18]=f=>d("save",a.value))},{default:t(()=>[...n[19]||(n[19]=[V("Enregistrer",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})}}}),Ht=Z({__name:"TauxSelect",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(l){Be(o);const s=xe(l,"modelValue"),r=M(null),d=h(()=>{const i=Array.from(a.value.values()).map(c=>({title:c.Label,value:c.Id}));return i.sort((c,p)=>c.title.localeCompare(p.title)),i}),a=M(new Map);async function o(){const i=await _.CampsGetTaux();i!==void 0&&(a.value=$l(i),s.value.Id>0&&(s.value=Ce(a.value.get(s.value.Id)),r.value=s.value.Id))}function m(){s.value.Id<=0?(r.value==null&&(r.value=1),s.value=Ce(a.value.get(r.value))):(r.value=null,s.value.Id=0,s.value.Label="")}function u(i){s.value=Ce(a.value.get(i))}const n=h(()=>{if(s.value.Id>0)return null;const i=s.value.Label;return Array.from(a.value.values()).map(p=>p.Label).includes(i)?"Ce label est déjà utilisé.":null});return(i,c)=>(y(),w(j,null,{default:t(()=>[e(b,{"align-self":"center"},{default:t(()=>[s.value.Id>0?(y(),w(Ne,{key:0,variant:"outlined",density:"compact","hide-details":"",label:"Taux",items:d.value,modelValue:r.value,"onUpdate:modelValue":[c[0]||(c[0]=p=>r.value=p),u]},null,8,["items","modelValue"])):(y(),w(j,{key:1},{default:t(()=>[e(b,{cols:"12"},{default:t(()=>[e(fe,{variant:"outlined",density:"compact",label:"Label",modelValue:s.value.Label,"onUpdate:modelValue":c[1]||(c[1]=p=>s.value.Label=p),disabled:s.value.Id>0,"error-messages":n.value},null,8,["modelValue","disabled","error-messages"])]),_:1}),e(b,null,{default:t(()=>[e(fe,{label:`Valeur d'un ${F(Fl)[F(hl).FrancsSuisse]}`,density:"compact",variant:"outlined",type:"number",min:"0.001",suffix:"€",hint:"Valeur en € d'une unité de la monnaie.","persistent-hint":"","model-value":s.value.FrancsSuisse/1e3,"onUpdate:modelValue":c[2]||(c[2]=p=>s.value.FrancsSuisse=F(Ul)(Number(p)*1e3)),disabled:s.value.Id>0},null,8,["label","model-value","disabled"])]),_:1})]),_:1}))]),_:1}),e(b,{cols:"auto"},{default:t(()=>[e(de,{thickness:"2",vertical:"",class:"py-4"},{default:t(()=>[...c[3]||(c[3]=[V("ou",-1)])]),_:1})]),_:1}),e(b,{"align-self":"center",cols:"auto"},{default:t(()=>[e(E,{onClick:m},{prepend:t(()=>[e(ke,null,{default:t(()=>[...c[4]||(c[4]=[V("mdi-toggle-switch",-1)])]),_:1})]),default:t(()=>[V(" "+R(s.value.Id>0?"Créer un taux":"Utiliser un taux"),1)]),_:1})]),_:1})]),_:1}))}}),Xa=Z({__name:"CampStats",props:{stats:{}},setup(l){const s=l;function r(d,a){return`(${(a==0?0:100*d/a).toFixed(0)} %)`}return(d,a)=>(y(),w(Q,{title:"Statistiques"},{default:t(()=>[e(W,null,{default:t(()=>[e(j,null,{default:t(()=>[e(b,{cols:"5"},{default:t(()=>[V(" Demandes d'inscriptions : "+R(s.stats.Inscriptions),1)]),_:1}),e(b,{class:"text-right"},{default:t(()=>[V(" Dont Filles : "+R(s.stats.InscriptionsFilles)+" "+R(r(s.stats.InscriptionsFilles,s.stats.Inscriptions))+", Suisses : "+R(s.stats.InscriptionsSuisses)+" "+R(r(s.stats.InscriptionsSuisses,s.stats.Inscriptions)),1)]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(b,{cols:"4"},{default:t(()=>[V(" Confirmées : "+R(s.stats.Valides)+" "+R(r(s.stats.Valides,s.stats.Inscriptions)),1)]),_:1}),e(b,{class:"text-right"},{default:t(()=>[V(" Dont Filles : "+R(s.stats.ValidesFilles)+" "+R(r(s.stats.ValidesFilles,s.stats.Valides))+" , Suisses : "+R(s.stats.ValidesSuisses)+" "+R(r(s.stats.ValidesSuisses,s.stats.Valides)),1)]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(b,null,{default:t(()=>[V(" A statuer : "+R(s.stats.AStatuer)+" "+R(r(s.stats.AStatuer,s.stats.Inscriptions)),1)]),_:1}),e(b,{cols:"5",class:"text-center"},{default:t(()=>[V(" Demandes d'exception : "+R(s.stats.Exceptions)+" "+R(r(s.stats.Exceptions,s.stats.Inscriptions)),1)]),_:1}),e(b,{class:"text-right"},{default:t(()=>[V(" Refus : "+R(s.stats.Refus)+" "+R(r(s.stats.Refus,s.stats.Inscriptions)),1)]),_:1})]),_:1})]),_:1})]),_:1}))}}),Za={key:0},en=Z({__name:"CampHeaderRow",props:{camp:{}},emits:["click","show-participants","edit-taux","delete","show-documents","send-sondage"],setup(l,{emit:s}){const r=l,d=s,a=h(()=>r.camp.Stats.Inscriptions-r.camp.Stats.Valides),o=M(!1),m=h(()=>{switch(new Date(r.camp.Camp.Camp.DateDebut).getUTCMonth()+1){case 7:case 8:return"rgb(45, 185, 187)";case 9:case 10:case 11:return"rgb(190, 150, 60)";case 12:case 1:case 2:case 3:return"rgb(240, 240, 240)";case 4:case 5:case 6:default:return"rgb(190, 228, 100)"}});return(u,n)=>(y(),H(ne,null,[e(le,{modelValue:o.value,"onUpdate:modelValue":n[1]||(n[1]=i=>o.value=i),"max-width":"600"},{default:t(()=>[e(Q,{title:"Confirmer la suppression"},{default:t(()=>[e(W,null,{default:t(()=>[n[9]||(n[9]=V(" Etes vous certain de supprimer le séjour ",-1)),L("b",null,R(F(_e).label(r.camp.Camp.Camp)),1),n[10]||(n[10]=V(" ? ",-1)),n[11]||(n[11]=L("br",null,null,-1)),n[12]||(n[12]=L("br",null,null,-1)),n[13]||(n[13]=V(" Les éventuels ",-1)),n[14]||(n[14]=L("i",null,"équipiers",-1)),n[15]||(n[15]=V(" déclarés sur ce séjour seront aussi supprimés. ",-1)),n[16]||(n[16]=L("br",null,null,-1)),n[17]||(n[17]=L("br",null,null,-1)),n[18]||(n[18]=V(" Attention, cette opération est irréversible. ",-1))]),_:1}),e(oe,null,{default:t(()=>[e(se),e(E,{color:"red",onClick:n[0]||(n[0]=i=>{o.value=!1,d("delete")})},{default:t(()=>[...n[19]||(n[19]=[V("Supprimer",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Q,{color:m.value,"no-gutters":"",onClick:n[8]||(n[8]=i=>d("click")),class:"my-1"},{default:t(()=>[e(j,{style:et({"background-color":m.value}),class:"px-1","no-gutters":"",justify:"space-between"},{default:t(()=>[e(b,null,{default:t(()=>[e(X,{title:F(_e).label(r.camp.Camp.Camp),subtitle:`ID : ${r.camp.Camp.Camp.Id}`},null,8,["title","subtitle"])]),_:1}),e(b,{"align-self":"center"},{default:t(()=>[V(R(F(_e).formatPlage(u.camp.Camp.Camp)),1)]),_:1}),e(b,{cols:"2","align-self":"center"},{default:t(()=>[e(Ct,{width:"600",location:"left","content-class":"pa-0"},{activator:t(({props:i})=>[e(ll,ue({class:"bg-white border-md border-primary"},i,{max:r.camp.Camp.Camp.Places,"model-value":r.camp.Stats.Valides,height:"36",rounded:"",color:"primary",onClick:n[2]||(n[2]=tt(c=>d("show-participants"),["stop"]))}),{default:t(()=>[L("strong",null,[V(R(r.camp.Stats.Valides)+"/"+R(r.camp.Camp.Camp.Places)+" ",1),a.value>0?(y(),H("span",Za," (+ "+R(a.value)+")",1)):J("",!0)])]),_:1},16,["max","model-value"])]),default:t(()=>[e(Xa,{stats:r.camp.Stats},null,8,["stats"])]),_:1})]),_:1}),e(b,{cols:"1"}),e(b,{cols:"auto","align-self":"center"},{default:t(()=>[e(De,null,{activator:t(({props:i})=>[e(E,ue(i,{size:"x-small",class:"mx-1",icon:"mdi-dots-vertical"}),null,16)]),default:t(()=>[e(Se,{density:"compact"},{default:t(()=>[e(X,{"prepend-icon":"mdi-view-list",onClick:n[3]||(n[3]=i=>d("show-participants"))},{default:t(()=>[...n[20]||(n[20]=[V("Afficher les participants",-1)])]),_:1}),e(X,{"prepend-icon":"mdi-currency-eur",onClick:n[4]||(n[4]=i=>d("edit-taux"))},{default:t(()=>[...n[21]||(n[21]=[V("Taux de conversion",-1)])]),_:1}),e(de,{thickness:"1"}),e(X,{"prepend-icon":"mdi-mail",onClick:n[5]||(n[5]=i=>d("show-documents")),title:"Documents"}),e(de,{thickness:"1"}),e(X,{title:"Envoyer le sondage",subtitle:"de fin de séjour","prepend-icon":"mdi-comment-quote",onClick:n[6]||(n[6]=i=>d("send-sondage"))}),e(de,{thickness:"1"}),e(X,{"prepend-icon":"mdi-delete",disabled:r.camp.Stats.Inscriptions>0,onClick:n[7]||(n[7]=i=>o.value=!0)},{default:t(()=>[...n[22]||(n[22]=[V("Supprimer",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])]),_:1},8,["color"])],64))}}),tn=Z({__name:"CampsSelector",props:we({allCamps:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l,{emit:s}){const r=l,d=xe(l,"modelValue"),a=h(()=>r.allCamps.map(o=>({title:o.Label,value:o.Id})));return(o,m)=>(y(),w(Va,{multiple:"",chips:"","closable-chips":"",items:a.value,modelValue:d.value,"onUpdate:modelValue":m[0]||(m[0]=u=>d.value=u)},null,8,["items","modelValue"]))}}),ln=Z({__name:"DocumentsCard",props:{camp:{}},setup(l){const s=l;Be(d);const r=M(null);async function d(){const a=await _.CampsDocuments({idCamp:s.camp.Camp.Camp.Id});a!==void 0&&(r.value=a)}return(a,o)=>{const m=Aa;return r.value!=null?(y(),w(Q,{key:0,title:"Documents"},{default:t(()=>[e(W,null,{default:t(()=>[e(Se,null,{default:t(()=>[e(Et,null,{default:t(()=>[...o[0]||(o[0]=[V("Préférences d'affichage",-1)])]),_:1}),e(X,null,{default:t(()=>[e(j,{class:"mb-2"},{default:t(()=>[e(b,null,{default:t(()=>[e(Ve,{color:r.value.ToShow.LettreDirecteur?"green":"grey","append-icon":r.value.ToShow.LettreDirecteur?"mdi-check":""},{default:t(()=>[...o[1]||(o[1]=[V("Lettre du directeur",-1)])]),_:1},8,["color","append-icon"])]),_:1}),e(b,null,{default:t(()=>[e(Ve,{color:r.value.ToShow.ListeVetements?"green":"grey","append-icon":r.value.ToShow.ListeVetements?"mdi-check":""},{default:t(()=>[...o[2]||(o[2]=[V(" Liste de vêtements",-1)])]),_:1},8,["color","append-icon"])]),_:1}),e(b,null,{default:t(()=>[e(Ve,{color:r.value.ToShow.ListeParticipants?"green":"grey","append-icon":r.value.ToShow.ListeParticipants?"mdi-check":""},{default:t(()=>[...o[3]||(o[3]=[V("Liste des participants ",-1)])]),_:1},8,["color","append-icon"])]),_:1})]),_:1})]),_:1}),e(Et,null,{default:t(()=>[...o[4]||(o[4]=[V("Documents du séjour",-1)])]),_:1}),(y(!0),H(ne,null,ve(r.value.Generated,u=>(y(),w(X,{title:u.NomClient},{append:t(()=>[e(m,{"file-key":u.Key,"is-generated-doc":!0},null,8,["file-key"])]),_:2},1032,["title"]))),256)),(y(!0),H(ne,null,ve(r.value.ToRead,u=>(y(),w(X,{title:u.NomClient},{append:t(()=>[e(m,{"file-key":u.Key,"is-generated-doc":!1},null,8,["file-key"])]),_:2},1032,["title"]))),256)),(y(!0),H(ne,null,ve(r.value.ToUploadModeles,u=>(y(),w(X,{title:u.NomClient,subtitle:"Document à remplir"},{append:t(()=>[e(m,{"file-key":u.Key,"is-generated-doc":!1},null,8,["file-key"])]),_:2},1032,["title"]))),256))]),_:1})]),_:1})]),_:1})):(y(),w(at,{key:1,type:"card"}))}}}),bt=Z({__name:"RequestProgressCard",props:{title:{},current:{},total:{}},setup(l){const s=l;return(r,d)=>(y(),w(Q,{title:s.title},{default:t(()=>[e(W,null,{default:t(()=>[e(ll,{max:s.total,"model-value":s.current,color:"primary",height:"24"},{default:t(()=>[V(R(s.current)+" / "+R(s.total),1)]),_:1},8,["max","model-value"])]),_:1})]),_:1},8,["title"]))}});function an(){const l=M([]);Rl(()=>l.value=[]);function s(r,d){l.value[d]=r}return{refs:l,updateRef:s}}const nn=Fe({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:l=>l.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:l=>l%1===0},totalVisible:[Number,String],firstIcon:{type:Oe,default:"$first"},prevIcon:{type:Oe,default:"$prev"},nextIcon:{type:Oe,default:"$next"},lastIcon:{type:Oe,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...Ql(),...Hl(),...zl(),...Yl(),...jl(),...ql(),...Bl({tag:"nav"}),...Ol(),...Nl({variant:"text"})},"VPagination"),un=Re()({name:"VPagination",props:nn(),emits:{"update:modelValue":l=>!0,first:l=>!0,prev:l=>!0,next:l=>!0,last:l=>!0},setup(l,s){let{slots:r,emit:d}=s;const a=Ue(l,"modelValue"),{t:o,n:m}=He(),{isRtl:u}=Zt(),{themeClasses:n}=Ll(l),{width:i}=Tl(),c=Xe(-1);It(void 0,{scoped:!0});const{resizeRef:p}=El(z=>{if(!z.length)return;const{target:S,contentRect:ee}=z[0],G=S.querySelector(".v-pagination__list > *");if(!G)return;const T=ee.width,K=G.offsetWidth+parseFloat(getComputedStyle(G).marginRight)*2;c.value=C(T,K)}),v=h(()=>parseInt(l.length,10)),f=h(()=>parseInt(l.start,10)),P=h(()=>l.totalVisible!=null?parseInt(l.totalVisible,10):c.value>=0?c.value:C(i.value,58));function C(z,S){const ee=l.showFirstLastPage?5:3;return Math.max(0,Math.floor(Number(((z-S*ee)/S).toFixed(2))))}const k=h(()=>{if(v.value<=0||isNaN(v.value)||v.value>Number.MAX_SAFE_INTEGER)return[];if(P.value<=0)return[];if(P.value===1)return[a.value];if(v.value<=P.value)return Te(v.value,f.value);const z=P.value%2===0,S=z?P.value/2:Math.floor(P.value/2),ee=z?S:S+1,G=v.value-S;if(ee-a.value>=0)return[...Te(Math.max(1,P.value-1),f.value),l.ellipsis,v.value];if(a.value-G>=(z?1:0)){const T=P.value-1,K=v.value-T+f.value;return[f.value,l.ellipsis,...Te(T,K)]}else{const T=Math.max(1,P.value-2),K=T===1?a.value:a.value-Math.ceil(T/2)+f.value;return[f.value,l.ellipsis,...Te(T,K),l.ellipsis,v.value]}});function D(z,S,ee){z.preventDefault(),a.value=S,ee&&d(ee,S)}const{refs:q,updateRef:N}=an();It({VPaginationBtn:{color:he(()=>l.color),border:he(()=>l.border),density:he(()=>l.density),size:he(()=>l.size),variant:he(()=>l.variant),rounded:he(()=>l.rounded),elevation:he(()=>l.elevation)}});const x=h(()=>k.value.map((z,S)=>{const ee=G=>N(G,S);if(typeof z=="string")return{isActive:!1,key:`ellipsis-${S}`,page:z,props:{ref:ee,ellipsis:!0,icon:!0,disabled:!0}};{const G=z===a.value;return{isActive:G,key:z,page:m(z),props:{ref:ee,ellipsis:!1,icon:!0,disabled:!!l.disabled||Number(l.length)<2,color:G?l.activeColor:l.color,"aria-current":G,"aria-label":o(G?l.currentPageAriaLabel:l.pageAriaLabel,z),onClick:T=>D(T,z)}}}})),g=h(()=>{const z=!!l.disabled||a.value<=f.value,S=!!l.disabled||a.value>=f.value+v.value-1;return{first:l.showFirstLastPage?{icon:u.value?l.lastIcon:l.firstIcon,onClick:ee=>D(ee,f.value,"first"),disabled:z,"aria-label":o(l.firstAriaLabel),"aria-disabled":z}:void 0,prev:{icon:u.value?l.nextIcon:l.prevIcon,onClick:ee=>D(ee,a.value-1,"prev"),disabled:z,"aria-label":o(l.previousAriaLabel),"aria-disabled":z},next:{icon:u.value?l.prevIcon:l.nextIcon,onClick:ee=>D(ee,a.value+1,"next"),disabled:S,"aria-label":o(l.nextAriaLabel),"aria-disabled":S},last:l.showFirstLastPage?{icon:u.value?l.firstIcon:l.lastIcon,onClick:ee=>D(ee,f.value+v.value-1,"last"),disabled:S,"aria-label":o(l.lastAriaLabel),"aria-disabled":S}:void 0}});function te(){var S;const z=a.value-f.value;(S=q.value[z])==null||S.$el.focus()}function me(z){z.key===Mt.left&&!l.disabled&&a.value>Number(l.start)?(a.value=a.value-1,At(te)):z.key===Mt.right&&!l.disabled&&a.value<f.value+v.value-1&&(a.value=a.value+1,At(te))}return Le(()=>e(l.tag,{ref:p,class:be(["v-pagination",n.value,l.class]),style:et(l.style),role:"navigation","aria-label":o(l.ariaLabel),onKeydown:me,"data-test":"v-pagination-root"},{default:()=>[L("ul",{class:"v-pagination__list"},[l.showFirstLastPage&&L("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[r.first?r.first(g.value.first):e(E,ue({_as:"VPaginationBtn"},g.value.first),null)]),L("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[r.prev?r.prev(g.value.prev):e(E,ue({_as:"VPaginationBtn"},g.value.prev),null)]),x.value.map((z,S)=>L("li",{key:z.key,class:be(["v-pagination__item",{"v-pagination__item--is-active":z.isActive}]),"data-test":"v-pagination-item"},[r.item?r.item(z):e(E,ue({_as:"VPaginationBtn"},z.props),{default:()=>[z.page]})])),L("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[r.next?r.next(g.value.next):e(E,ue({_as:"VPaginationBtn"},g.value.next),null)]),l.showFirstLastPage&&L("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[r.last?r.last(g.value.last):e(E,ue({_as:"VPaginationBtn"},g.value.last),null)])])]})),{}}}),sn={key:2},ft=16,on=Z({__name:"CampsList",emits:["show-participants"],setup(l,{emit:s}){const r=s;Be(i);const d=yt(new Map),a=M(!1),o=yt({pattern:"",openOnly:!1}),m=h(()=>{const O=al(o.pattern),$=Array.from(d.values()).filter(re=>_e.match(re.Camp.Camp,O)&&(!o.openOnly||Lt(re.Camp)));return $.sort((re,A)=>{const I=new Date(A.Camp.Camp.DateDebut).valueOf(),B=new Date(re.Camp.Camp.DateDebut).valueOf();return I==B?re.Camp.Camp.Id-A.Camp.Camp.Id:I-B}),$}),u=h(()=>m.value.slice((v.value-1)*ft,v.value*ft));function n(){v.value>p.value&&(v.value=p.value)}async function i(){a.value=!0;const O=await _.CampsGet();a.value=!1,O!==void 0&&(d.clear(),O==null||O.forEach($=>d.set($.Camp.Camp.Id,$)))}async function c(){a.value=!0;const O=await _.CampsCreate();a.value=!1,O!==void 0&&(_.showMessage("Camp ajouté avec succès."),d.set(O.Camp.Camp.Id,O),f.value=O.Camp.Camp)}const p=h(()=>Math.max(Math.ceil(m.value.length/ft),1)),v=M(1),f=M(null);async function P(O){f.value=null,a.value=!0;const $=await _.CampsUpdate(O);a.value=!1,$!==void 0&&(_.showMessage("Séjour modifié avec succès."),d.get($.Camp.Id).Camp=$,n())}const C=M(null);async function k(){const O=C.value;if(O==null)return;C.value=null,a.value=!0;const $=await _.CampsSetTaux({IdCamp:O.Camp.Camp.Id,Taux:O.Taux});a.value=!1,$!==void 0&&(_.showMessage("Taux modifié avec succès."),d.set($.Camp.Camp.Id,$))}const D=M(!1),q=M(5),N=M({Id:1,Label:"",Euros:0,FrancsSuisse:0}),x=h(()=>N.value.Id>0||N.value.Label!=""),g=h(()=>new Set(Array.from(d.values()).filter($=>Lt($.Camp)).map($=>$.Camp.Camp.IdTaux)).size<=1);async function te(){D.value=!1,a.value=!0;const O=await _.CampsCreateMany({Count:q.value,Taux:N.value});a.value=!1,O!==void 0&&(_.showMessage("Séjours créés avec succès."),O==null||O.forEach($=>d.set($.Camp.Camp.Id,$)))}async function me(O){a.value=!0;const $=await _.CampsDelete({id:O.Camp.Camp.Id});a.value=!1,$!==void 0&&(_.showMessage("Séjour supprimé avec succès."),d.delete(O.Camp.Camp.Id),n())}const z=M(!1);function S(){ee.value=Array.from(d.values()).filter(O=>O.Camp.Camp.Statut!=Jl.Ouvert).map(O=>O.Camp.Camp.Id),z.value=!0}const ee=M([]);async function G(){z.value=!1,!(!ee.value.length||await _.CampsOuvreInscriptions({Camps:ee.value})===void 0)&&(_.showMessage("Séjours ouverts aux inscriptions avec succès."),i())}const T=M(null),K=M(null);async function ce(O){K.value={Current:0,Total:10};const $=await _.EventsSendSondages({idCamp:O});if($===void 0){K.value=null;return}await gt($,re=>K.value=re,re=>_.onError("Envoi du sondage",re)),K.value=null,_.showMessage("Sondage envoyé avec succès.")}return(O,$)=>{const re=We;return y(),H(ne,null,[e(Q,{title:"Séjours",subtitle:d.size},{append:t(()=>[e(j,null,{default:t(()=>[e(b,{"align-self":"center",style:{width:"240px"}},{default:t(()=>[e(fe,{label:"Rechercher",variant:"filled",density:"comfortable","hide-details":"","prepend-inner-icon":"mdi-magnify",clearable:"",modelValue:o.pattern,"onUpdate:modelValue":[$[0]||($[0]=A=>o.pattern=A),$[2]||($[2]=A=>n())],"onClick:clear":$[1]||($[1]=A=>{o.pattern="",n()})},null,8,["modelValue"])]),_:1}),e(de,{vertical:"",thickness:"1"}),e(b,{"align-self":"center",cols:"auto"},{default:t(()=>[e(De,null,{activator:t(({props:A})=>[e(E,ue(A,{color:"success",disabled:a.value}),{prepend:t(()=>[e(ke,null,{default:t(()=>[...$[16]||($[16]=[V("mdi-plus",-1)])]),_:1})]),default:t(()=>[$[17]||($[17]=V(" Créer un séjour ",-1))]),_:1},16,["disabled"])]),default:t(()=>[e(Se,{density:"compact"},{default:t(()=>[e(X,{onClick:c,title:"Créer un séjour"}),e(X,{title:"Créer plusieurs séjours...",subtitle:"Permet de choisir les taux de conversion",onClick:$[3]||($[3]=A=>D.value=!0)})]),_:1})]),_:1})]),_:1}),e(b,{"align-self":"center",cols:"auto"},{default:t(()=>[e(De,null,{activator:t(({props:A})=>[e(E,ue(A,{flat:"",icon:"mdi-dots-vertical",size:"small"}),null,16)]),default:t(()=>[e(Se,{density:"compact"},{default:t(()=>[e(X,{title:"Masquer les camps fermés",subtitle:"N'afficher que les camps ouverts aux inscriptions",onClick:$[5]||($[5]=A=>o.openOnly=!o.openOnly)},{prepend:t(()=>[e(Ye,{class:"mr-2",modelValue:o.openOnly,"onUpdate:modelValue":$[4]||($[4]=A=>o.openOnly=A),density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(de,{thickness:"1"}),e(X,{onClick:S,title:"Ouvrir les inscriptions","prepend-icon":"mdi-lock-open"})]),_:1})]),_:1})]),_:1})]),_:1})]),default:t(()=>[e(W,{class:"mt-4"},{default:t(()=>[g.value?J("",!0):(y(),w(Wl,{key:0,type:"warning"},{default:t(()=>[...$[18]||($[18]=[V(" Attention, les séjours ouverts aux inscriptions ont des taux de conversion incompatibles ! ",-1)])]),_:1})),a.value?(y(),w(at,{key:1})):m.value.length==0?(y(),H("i",sn," Aucun camp ne correspond aux filtres actuels. ")):J("",!0),(y(!0),H(ne,null,ve(u.value,(A,I)=>(y(),w(en,{key:I,camp:A,onClick:B=>f.value=A.Camp.Camp,onShowParticipants:B=>r("show-participants",A),onEditTaux:B=>C.value=A,onDelete:B=>me(A),onShowDocuments:B=>T.value=A,onSendSondage:B=>ce(A.Camp.Camp.Id)},null,8,["camp","onClick","onShowParticipants","onEditTaux","onDelete","onShowDocuments","onSendSondage"]))),128)),e(un,{length:p.value,modelValue:v.value,"onUpdate:modelValue":$[6]||($[6]=A=>v.value=A)},null,8,["length","modelValue"])]),_:1})]),_:1},8,["subtitle"]),e(le,{"model-value":f.value!=null,"onUpdate:modelValue":$[7]||($[7]=A=>f.value=null)},{default:t(()=>[f.value!=null?(y(),w(Ka,{key:0,camp:f.value,onSave:P},null,8,["camp"])):J("",!0)]),_:1},8,["model-value"]),e(le,{"model-value":C.value!=null,"onUpdate:modelValue":$[9]||($[9]=A=>C.value=null),"max-width":"600"},{default:t(()=>[C.value!=null?(y(),w(Q,{key:0,title:"Modifier le taux",subtitle:"La modification n'est possible que si aucun participant n'est enregistré."},{default:t(()=>[e(W,null,{default:t(()=>[e(Ht,{modelValue:C.value.Taux,"onUpdate:modelValue":$[8]||($[8]=A=>C.value.Taux=A)},null,8,["modelValue"])]),_:1}),e(oe,null,{default:t(()=>[e(se),e(E,{disabled:C.value.Stats.Inscriptions>0,onClick:k},{default:t(()=>[...$[19]||($[19]=[V("Modifier",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})):J("",!0)]),_:1},8,["model-value"]),e(le,{modelValue:D.value,"onUpdate:modelValue":$[12]||($[12]=A=>D.value=A),"max-width":"600"},{default:t(()=>[e(Q,{title:"Créer plusieurs séjours",subtitle:"Les séjours seront liés au même taux de conversion"},{default:t(()=>[e(W,null,{default:t(()=>[e(j,null,{default:t(()=>[e(b,null,{default:t(()=>[e(re,{label:"Nombre de séjours",modelValue:q.value,"onUpdate:modelValue":$[10]||($[10]=A=>q.value=A)},null,8,["modelValue"])]),_:1})]),_:1}),e(de,{thickness:"2",class:"my-2"}),e(Ht,{modelValue:N.value,"onUpdate:modelValue":$[11]||($[11]=A=>N.value=A)},null,8,["modelValue"])]),_:1}),e(oe,null,{default:t(()=>[e(se),e(E,{color:"success",onClick:te,disabled:!x.value},{default:t(()=>[...$[20]||($[20]=[V("Créer",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(le,{modelValue:z.value,"onUpdate:modelValue":$[14]||($[14]=A=>z.value=A),"max-width":"600"},{default:t(()=>[e(Q,{title:"Ouvrir les inscriptions",subtitle:"Ouvre les inscriptions sur les séjours ci-dessous"},{default:t(()=>[e(W,null,{default:t(()=>[e(tn,{"all-camps":Array.from(d.values()).map(A=>F(_e).toItem(A.Camp)),modelValue:ee.value,"onUpdate:modelValue":$[13]||($[13]=A=>ee.value=A)},null,8,["all-camps","modelValue"])]),_:1}),e(oe,null,{default:t(()=>[e(se),e(E,{onClick:G,disabled:!ee.value.length},{default:t(()=>[...$[21]||($[21]=[V("Ouvrir",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(le,{"model-value":T.value!=null,"onUpdate:modelValue":$[15]||($[15]=A=>T.value=null),"max-width":"800px"},{default:t(()=>[T.value?(y(),w(ln,{key:0,camp:T.value},null,8,["camp"])):J("",!0)]),_:1},8,["model-value"]),e(le,{"model-value":K.value!=null,"max-width":"400px",persistent:""},{default:t(()=>[K.value?(y(),w(bt,{key:0,title:"Envoi du sondage en cours",current:K.value.Current,total:K.value.Total},null,8,["current","total"])):J("",!0)]),_:1},8,["model-value"])],64)}}}),rn={key:1},dn={key:0,class:"text-center font-italic"},mn=Z({__name:"CampParticipants",props:{id:{},idParticipant:{}},setup(l){const s=l;Be(async()=>{a(),await u(),n()}),$e(()=>s.id,u),$e(()=>s.idParticipant,n);const r=M(!1),d=M([]);async function a(){const N=await _.GetCamps();N!==void 0&&(d.value=N||[])}const o=h(()=>{var x;const N=(((x=m.value)==null?void 0:x.Participants)||[]).map(g=>g);return N.sort(Gl.cmp),N}),m=M(null);async function u(){r.value=!0;const N=await _.CampsLoad({idCamp:s.id});r.value=!1,N!==void 0&&(m.value=N)}function n(){var x;if(s.idParticipant===void 0)return;const N=(((x=m.value)==null?void 0:x.Participants)||[]).find(g=>g.Participant.Id==s.idParticipant);N&&(p.value=Ce(N))}const i=M(null);async function c(){if(i.value==null||m.value==null)return;const N=await _.ParticipantsCreate(i.value);i.value=null,N!==void 0&&(_.showMessage("Participant créé avec succès."),m.value.Participants=(m.value.Participants||[]).concat(N),p.value=Ce(N))}const p=M(null);async function v(N){if(p.value==null||m.value==null)return;const x=await _.ParticipantsUpdate(N);p.value=null,x!==void 0&&(_.showMessage("Participant modifié avec succès."),u())}const f=M(null);async function P(){if(f.value==null||m.value==null)return;const N=f.value.Participant.Id,x=await _.ParticipantsDelete({id:N});f.value=null,x!==void 0&&(_.showMessage("Participant supprimé avec succès."),m.value.Participants=(m.value.Participants||[]).filter(g=>g.Participant.Id!=N))}const C=M(null);async function k(){const N=C.value;N==null||m.value==null||(C.value=null,await _.ParticipantsMove(N)===void 0)||(_.showMessage("Participant déplacé avec succès.",void 0,{title:"Aller au nouveau séjour",action:()=>Pt({IdCamp:N.Target,Id:N.Id})}),m.value.Participants=(m.value.Participants||[]).filter(g=>g.Participant.Id!=N.Id))}const D=M(null);async function q(){var te;if(D.value==null)return;const N=D.value.Participant.Id;D.value=null;const x=await _.ParticipantsSetPlaceLiberee({id:N});if(x===void 0||(_.showMessage("Notification de place libérée envoyée avec succès."),m.value==null))return;const g=(te=m.value.Participants)==null?void 0:te.find(me=>me.Participant.Id==N);g.Participant=x}return(N,x)=>{const g=ka,te=Ca,me=ct,z=ul,S=_a,ee=ut;return m.value!=null?(y(),w(Q,{key:0,title:"Participants",subtitle:F(_e).label(m.value.Camp.Camp)},{append:t(()=>[e(E,{color:"green",onClick:x[0]||(x[0]=G=>i.value={IdCamp:s.id,IdDossier:0,IdPersonne:0})},{prepend:t(()=>[e(ke,null,{default:t(()=>[...x[9]||(x[9]=[V("mdi-plus",-1)])]),_:1})]),default:t(()=>[x[10]||(x[10]=V(" Créer un participant",-1))]),_:1})]),default:t(()=>[e(W,{class:"mt-4"},{default:t(()=>[r.value?(y(),w(at,{key:0,type:"table"})):(y(),H("div",rn,[e(g),o.value.length?J("",!0):(y(),H("div",dn," Aucun participant n'est encore inscrit sur ce séjour. ")),(y(!0),H(ne,null,ve(o.value,(G,T)=>(y(),w(te,{participant:G,index:T},{actions:t(()=>[e(Se,{density:"comfortable"},{default:t(()=>[e(X,{title:"Modifier","prepend-icon":"mdi-pencil",onClick:K=>p.value=G},null,8,["onClick"]),e(de),e(X,{title:"Changer de camp...","prepend-icon":"mdi-file-move",onClick:K=>C.value={Id:G.Participant.Id,Target:0}},null,8,["onClick"]),e(X,{title:"Notifier d'une place disponible.",subtitle:"Envoi un email","prepend-icon":"mdi-email-alert",disabled:G.Participant.Statut==F(Ze).Inscrit||G.Participant.Statut==F(Ze).EnAttenteReponse,onClick:K=>D.value=G},null,8,["disabled","onClick"]),e(de),e(X,{title:"Aller à la personne",subtitle:`(ID : ${G.Personne.Id})`,onClick:K=>F(Ke)(G.Personne.Id)},null,8,["subtitle","onClick"]),e(X,{title:"Aller au dossier",subtitle:`(ID : ${G.Participant.IdDossier})`,onClick:K=>F(Vt)(G.Participant.IdDossier)},null,8,["subtitle","onClick"]),e(de),e(X,{title:"Supprimer","prepend-icon":"mdi-delete",onClick:K=>f.value=G},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["participant","index"]))),256))]))]),_:1}),i.value!=null?(y(),w(le,{key:0,"model-value":i.value!=null,"onUpdate:modelValue":x[3]||(x[3]=G=>i.value=null),"max-width":"600px"},{default:t(()=>[e(Q,{title:"Créer un participant"},{default:t(()=>[e(W,null,{default:t(()=>[e(j,null,{default:t(()=>[e(b,{cols:"12"},{default:t(()=>[e(me,{label:"Participant",modelValue:i.value.IdPersonne,"onUpdate:modelValue":x[1]||(x[1]=G=>i.value.IdPersonne=G),"initial-personne":"",api:{SelectPersonne:F(_).SelectPersonne.bind(F(_))}},null,8,["modelValue","api"])]),_:1}),e(b,{cols:"12"},{default:t(()=>[e(z,{modelValue:i.value.IdDossier,"onUpdate:modelValue":x[2]||(x[2]=G=>i.value.IdDossier=G)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(oe,null,{default:t(()=>[e(se),e(E,{color:"green",onClick:c,disabled:!(i.value.IdDossier&&i.value.IdPersonne)},{default:t(()=>[...x[11]||(x[11]=[V("Créer",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])):J("",!0),p.value!=null?(y(),w(le,{key:1,"model-value":p.value!=null,"onUpdate:modelValue":x[4]||(x[4]=G=>p.value=null),"max-width":"800px"},{default:t(()=>[e(S,{participant:p.value.Participant,personne:p.value.Personne,api:{SelectPersonne:F(_).SelectPersonne.bind(F(_))},onSave:v},null,8,["participant","personne","api"])]),_:1},8,["model-value"])):J("",!0),f.value!=null?(y(),w(le,{key:2,"model-value":f.value!=null,"onUpdate:modelValue":x[5]||(x[5]=G=>f.value=null),"max-width":"600px"},{default:t(()=>[e(Q,{title:"Supprimer le participant"},{default:t(()=>[e(W,null,{default:t(()=>[x[12]||(x[12]=V(" Confirmez-vous la suppression du participant ",-1)),L("b",null,R(F(Ee).label(f.value.Personne)),1),x[13]||(x[13]=V(" ? ",-1)),x[14]||(x[14]=L("br",null,null,-1)),x[15]||(x[15]=L("br",null,null,-1)),x[16]||(x[16]=V(" Attention, cette opération est irréversible. ",-1))]),_:1}),e(oe,null,{default:t(()=>[e(se),e(E,{color:"red",onClick:P},{default:t(()=>[...x[17]||(x[17]=[V("Supprimer",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])):J("",!0),C.value!=null?(y(),w(le,{key:3,"model-value":C.value!=null,"onUpdate:modelValue":x[7]||(x[7]=G=>C.value=null),"max-width":"500px"},{default:t(()=>[e(Q,{title:"Déplacer le participant"},{default:t(()=>[e(W,null,{default:t(()=>[e(ee,{label:"Nouveau séjour",camps:d.value,modelValue:C.value.Target,"onUpdate:modelValue":x[6]||(x[6]=G=>C.value.Target=G)},null,8,["camps","modelValue"])]),_:1}),e(oe,null,{default:t(()=>[e(se),e(E,{onClick:k,disabled:C.value.Target==s.id||!C.value.Target},{default:t(()=>[...x[18]||(x[18]=[V("Déplacer",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])):J("",!0),D.value!=null?(y(),w(le,{key:4,"model-value":D.value!=null,"onUpdate:modelValue":x[8]||(x[8]=G=>D.value=null),"max-width":"500px"},{default:t(()=>[e(Q,{title:"Notifier d'une place disponible"},{default:t(()=>[e(W,null,{default:t(()=>[V(" Confirmez-vous l'envoi d'une notification au responsable de "+R(F(Ee).label(D.value.Personne))+" indiquant qu'une place est disponible ? ",1),x[19]||(x[19]=L("br",null,null,-1)),x[20]||(x[20]=L("br",null,null,-1)),V(" Le nouveau statut de "+R(D.value.Personne.Prenom)+" sera : ",1),L("i",null,R(F(Kl)[F(Ze).EnAttenteReponse]),1),x[21]||(x[21]=V(". ",-1))]),_:1}),e(oe,null,{default:t(()=>[e(se),e(E,{onClick:q},{default:t(()=>[...x[22]||(x[22]=[V("Notifier",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])):J("",!0)]),_:1},8,["subtitle"])):(y(),w(at,{key:1,type:"card"}))}}}),cn=Z({__name:"camps",setup(l){const s=nt(),r=h(()=>ru(s.currentRoute.value.query)),d=h(()=>r.value.idCamp);function a(m){const u=s.currentRoute.value;s.push({path:u.path,query:{idCamp:m.Camp.Camp.Id}})}function o(){const m=s.currentRoute.value;s.push({path:m.path,query:{}})}return(m,u)=>(y(),H(ne,null,[e(vt,{title:"Gestion des séjours"},{default:t(()=>[d.value!==null?(y(),w(E,{key:0,onClick:o},{prepend:t(()=>[e(ke,null,{default:t(()=>[...u[0]||(u[0]=[V("mdi-view-list",-1)])]),_:1})]),default:t(()=>[u[1]||(u[1]=V(" Retour à la liste",-1))]),_:1})):J("",!0)]),_:1}),d.value===void 0?(y(),w(on,{key:0,onShowParticipants:a})):(y(),w(mn,{key:1,id:d.value,"id-participant":r.value.idParticipant},null,8,["id","id-participant"]))],64))}}),yl=Z({__name:"MergeCard",props:{from:{}},emits:["merge"],setup(l,{emit:s}){const r=l,d=s,a=M(0),o=M(!0);return(m,u)=>{const n=ul;return y(),w(Q,{title:"Fusionner le dossier vers",subtitle:"Les participants, paiements et messages seront copiés vers le dossier cible."},{default:t(()=>[e(W,null,{default:t(()=>[e(j,null,{default:t(()=>[e(b,{cols:"12"},{default:t(()=>[e(n,{modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=i=>a.value=i)},null,8,["modelValue"])]),_:1}),e(b,{cols:"12"},{default:t(()=>[e(Ye,{density:"compact",label:"Notifier par email",hint:"Le reponsable du dossier absorbé sera averti du changement d'espace personnel.","persistent-hint":"",modelValue:o.value,"onUpdate:modelValue":u[1]||(u[1]=i=>o.value=i)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(oe,null,{default:t(()=>[e(se),e(E,{disabled:a.value==0||a.value==r.from,onClick:u[2]||(u[2]=i=>d("merge",{From:r.from,To:a.value,Notifie:o.value}))},{default:t(()=>[...u[3]||(u[3]=[V("Fusionner",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})}}}),vn={key:1,class:"text-center font-italic"},pn={key:2},fn=Z({__name:"PannelInscriptions",emits:["goTo","empty"],setup(l,{emit:s}){const r=s,d=M(!1);Be(async()=>{await o(),a.value.length||r("empty")});const a=M([]);async function o(){d.value=!0;const C=await _.InscriptionsGet();d.value=!1,C!==void 0&&(a.value=C||[])}const m=M(""),u=h(()=>{const C=al(m.value);return a.value.filter(k=>{var D;return Ee.match(k.Responsable,C)||((D=k.Participants)==null?void 0:D.some(q=>Ee.match(q.Personne,C)||_e.match(q.Camp,C)))})});async function n(C,k){const D=await _.InscriptionsIdentifiePersonne({IdDossier:C,Target:k});if(D===void 0)return;_.showMessage("Profil identifié avec succès.");const q=a.value.findIndex(N=>N.Dossier.Id==C);a.value[q]=D}const i=M(null);async function c(C,k){if(!i.value)return;const D=i.value.inscription.Dossier.Id;i.value=null;const q=await _.InscriptionsValide({IdDossier:D,Statuts:C,SendMail:k});if(q!==void 0)if(q.Dossier.IsValidated)_.showMessage("Inscription validée avec succès.","",{title:"Aller au dossier",action:()=>r("goTo",D)}),a.value=a.value.filter(N=>N.Dossier.Id!=D);else{_.showMessage("Participant validé avec succès.");const N=a.value.findIndex(x=>x.Dossier.Id==D);a.value[N]=q}}async function p(C){await _.DossiersDelete({id:C.Dossier.Id})!==void 0&&(_.showMessage("Inscription supprimée avec succès."),a.value=a.value.filter(D=>D.Dossier.Id!=C.Dossier.Id))}async function v(C,k){if(await _.ParticipantsDelete({id:k})===void 0)return;_.showMessage("Participant supprimé avec succès.");const q=a.value.find(N=>N.Dossier.Id==C);q.Participants=(q.Participants||[]).filter(N=>N.Participant.Id!=k)}const f=M(null);async function P(C){f.value=null,await _.DossiersMerge(C)!==void 0&&(_.showMessage("Inscriptions fusionnées avec succès."),o())}return(C,k)=>{const D=Pa;return y(),w(Q,{title:"Inscriptions",subtitle:"En attente de validation",class:"ma-2"},{append:t(()=>[e(fe,{width:"300","append-inner-icon":"mdi-magnify",label:"Rechercher","hide-details":"",modelValue:m.value,"onUpdate:modelValue":k[0]||(k[0]=q=>m.value=q)},null,8,["modelValue"])]),default:t(()=>[e(W,null,{default:t(()=>[d.value?(y(),w(at,{key:0})):a.value.length?(y(),H("div",pn,[(y(!0),H(ne,null,ve(u.value,(q,N)=>(y(),w(xa,{class:"my-1",user:null,key:N,inscription:q,onIdentifie:x=>n(q.Dossier.Id,x),onValide:x=>i.value={inscription:q,participants:x===void 0?void 0:[x]},onMerge:x=>f.value=q.Dossier.Id,onDelete:x=>p(q),onDeleteParticipant:x=>v(q.Dossier.Id,x),api:{SearchSimilaires:F(_).InscriptionsSearchSimilaires.bind(F(_)),SelectPersonne:F(_).SelectPersonne.bind(F(_))}},null,8,["inscription","onIdentifie","onValide","onMerge","onDelete","onDeleteParticipant","api"]))),128))])):(y(),H("div",vn," Il n'y a aucune inscription à valider. "))]),_:1}),e(le,{"model-value":f.value!=null,"onUpdate:modelValue":k[1]||(k[1]=q=>f.value=null),"max-width":"600px"},{default:t(()=>[f.value!=null?(y(),w(yl,{key:0,from:f.value,onMerge:P},null,8,["from"])):J("",!0)]),_:1},8,["model-value"]),e(le,{"model-value":i.value!=null,"onUpdate:modelValue":k[2]||(k[2]=q=>i.value=null),"max-width":"800px"},{default:t(()=>[i.value?(y(),w(D,{key:0,inscription:i.value.inscription,"id-participants":i.value.participants,onValide:c},null,8,["inscription","id-participants"])):J("",!0)]),_:1},8,["model-value"])]),_:1})}}}),yn={class:"text-grey"},gn={class:"text-grey"},bn={key:0},Vn=Z({__name:"FactureCard",props:{dossier:{}},setup(l){const s=l,r=h(()=>(s.dossier.Participants||[]).filter(u=>u.Participant.Statut!=Ze.Inscrit).map(u=>Ee.label(u.Personne))),d=h(()=>(s.dossier.Participants||[]).filter(u=>u.Participant.Statut==Ze.Inscrit).map(u=>({Label:Ee.label(u.Personne),Camp:_e.label(u.Camp),Prix:Pe.montant(u.Camp.Prix),Bilan:s.dossier.Bilan.Inscrits[u.Participant.Id]})));function a(u){return!!(u.Remises.ReducEnfants||u.Remises.ReducEquipiers||u.Remises.ReducSpeciale.Cent)}function o(u){const n=[];return u.ReducEnfants&&n.push(`Enfants : ${u.ReducEnfants}%`),u.ReducEquipiers&&n.push(`Enfants : ${u.ReducEquipiers}%`),u.ReducSpeciale.Cent&&n.push(`Remise : ${Pe.montant(u.ReducSpeciale)}`),n.join("  ;  ")}const m=h(()=>{const u=Object.values(s.dossier.Paiements||{});return u.sort((n,i)=>new Date(n.Time).valueOf()-new Date(i.Time).valueOf()),u});return(u,n)=>(y(),w(Q,{title:"Suivi financier",subtitle:r.value.length?`Les participants en liste d'attente (${r.value.join(", ")}) ne sont pas pris en compte.`:"","min-width":"900px"},{default:t(()=>[e(W,null,{default:t(()=>[e(j,null,{default:t(()=>[e(b,{cols:"3"},{default:t(()=>[...n[0]||(n[0]=[V("Participant",-1)])]),_:1}),e(b,{cols:"2",class:"text-center"},{default:t(()=>[...n[1]||(n[1]=[V("Prix du séjour",-1)])]),_:1}),e(b,{cols:"2",class:"text-center"},{default:t(()=>[...n[2]||(n[2]=[V("Prix avec option",-1)])]),_:1}),e(b,{cols:"3",class:"text-center"},{default:t(()=>[...n[3]||(n[3]=[V("Aides extérieures",-1)])]),_:1}),e(b,{cols:"2",class:"text-right"},{default:t(()=>[...n[4]||(n[4]=[V("Sous-total",-1)])]),_:1})]),_:1}),e(de,{thickness:"1",class:"my-2"}),(y(!0),H(ne,null,ve(d.value,i=>(y(),H(ne,null,[e(j,null,{default:t(()=>[e(b,{"align-self":"center",cols:"3"},{default:t(()=>[V(R(i.Label)+" ",1),n[5]||(n[5]=L("br",null,null,-1)),L("span",yn,R(i.Camp),1)]),_:2},1024),e(b,{"align-self":"center",cols:"2",class:"text-center"},{default:t(()=>[V(R(i.Prix),1)]),_:2},1024),e(b,{"align-self":"center",cols:"2",class:"text-center"},{default:t(()=>[V(R(F(Pe).montant(i.Bilan.AvecOption))+" ",1),n[6]||(n[6]=L("br",null,null,-1)),L("span",gn,R(i.Bilan.AvecOptionDescription),1)]),_:2},1024),e(b,{"align-self":"center",cols:"3",class:"text-center"},{default:t(()=>{var c;return[(c=i.Bilan.Aides)!=null&&c.length?J("",!0):(y(),H("span",bn,"-")),(y(!0),H(ne,null,ve(i.Bilan.Aides,p=>(y(),w(Ve,null,{default:t(()=>[V(R(p.Structure)+" : "+R(F(Pe).montant(p.Montant)),1)]),_:2},1024))),256))]}),_:2},1024),e(b,{"align-self":"center",cols:"2",class:"text-right"},{default:t(()=>[V(R(i.Bilan.AvecAides),1)]),_:2},1024)]),_:2},1024),a(i.Bilan)?(y(),w(j,{key:0,"no-gutters":""},{default:t(()=>[e(b,{cols:"10",class:"text-right"},{default:t(()=>[L("i",null,R(o(i.Bilan.Remises)),1)]),_:2},1024),e(b,{cols:"2",class:"text-right"},{default:t(()=>[V(R(i.Bilan.Net),1)]),_:2},1024)]),_:2},1024)):J("",!0)],64))),256)),e(de,{thickness:"1",class:"my-2"}),e(j,null,{default:t(()=>[e(b,{cols:"10",class:"text-right"},{default:t(()=>[...n[7]||(n[7]=[V("Total demandé",-1)])]),_:1}),e(b,{cols:"2",class:"text-right"},{default:t(()=>[V(R(s.dossier.Bilan.Demande),1)]),_:1})]),_:1}),e(de,{thickness:"1",class:"my-2"}),(y(!0),H(ne,null,ve(m.value,i=>(y(),w(j,null,{default:t(()=>[e(b,null,{default:t(()=>[V(" Paiement de "+R(i.Payeur)+", le "+R(F(Pe).date(i.Time)),1)]),_:2},1024),e(b,{cols:"2",class:"text-right"},{default:t(()=>[V(R(i.IsRemboursement?"+":"-")+R(F(Pe).montant(i.Montant)),1)]),_:2},1024)]),_:2},1024))),256)),e(j,null,{default:t(()=>[e(b,{cols:"10",class:"text-right"},{default:t(()=>[...n[8]||(n[8]=[V("Solde",-1)])]),_:1}),e(b,{cols:"2",class:"text-right"},{default:t(()=>[L("b",null,R(s.dossier.Bilan.Restant),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["subtitle"]))}});function qe(l){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return String(l).padStart(s,"0")}const kn=Fe({allowedValues:Function,ampm:Boolean,color:String,disabled:Boolean,displayedValue:null,double:Boolean,format:{type:Function,default:l=>l},max:{type:Number,required:!0},min:{type:Number,required:!0},scrollable:Boolean,readonly:Boolean,rotate:{type:Number,default:0},step:{type:Number,default:1},modelValue:{type:Number}},"VTimePickerClock"),Qt=Re()({name:"VTimePickerClock",props:kn(),emits:{change:l=>!0,input:l=>!0},setup(l,s){let{emit:r}=s;const d=M(null),a=M(null),o=M(void 0),m=M(!1),u=M(null),n=M(null),i=Xl(I=>r("change",I),750),{textColorClasses:c,textColorStyles:p}=Zl(()=>l.color),{backgroundColorClasses:v,backgroundColorStyles:f}=Jt(()=>l.color),P=h(()=>l.max-l.min+1),C=h(()=>l.double?P.value/2:P.value),k=h(()=>360/C.value),D=h(()=>k.value*Math.PI/180),q=h(()=>l.modelValue==null?l.min:l.modelValue),N=h(()=>.62),x=h(()=>{const I=[];for(let B=l.min;B<=l.max;B=B+l.step)I.push(B);return I});$e(()=>l.modelValue,I=>{o.value=I});function g(I){o.value!==I&&(o.value=I),r("input",I)}function te(I){return!l.allowedValues||l.allowedValues(I)}function me(I){if(!l.scrollable||l.disabled)return;I.preventDefault();const B=Math.sign(-I.deltaY||1);let ae=q.value;do ae=ae+B,ae=(ae-l.min+P.value)%P.value+l.min;while(!te(ae)&&ae!==q.value);ae!==l.displayedValue&&g(ae),i(ae)}function z(I){return l.double&&I-l.min>=C.value}function S(I){return z(I)?N.value:1}function ee(I){const B=l.rotate*Math.PI/180;return{x:Math.sin((I-l.min)*D.value+B)*S(I),y:-Math.cos((I-l.min)*D.value+B)*S(I)}}function G(I,B){const ae=(Math.round(I/k.value)+(B?C.value:0))%P.value+l.min;return I<360-k.value/2?ae:B?l.max-C.value+1:l.min}function T(I){const{x:B,y:ae}=ee(I);return{left:`${Math.round(50+B*50)}%`,top:`${Math.round(50+ae*50)}%`}}function K(I,B){const ae=B.x-I.x,ge=B.y-I.y;return Math.sqrt(ae*ae+ge*ge)}function ce(I,B){const ae=2*Math.atan2(B.y-I.y-K(I,B),B.x-I.x);return Math.abs(ae*180/Math.PI)}function O(I){u.value===null&&(u.value=I),n.value=I,g(I)}function $(I){var wt,Dt;if(I.preventDefault(),!m.value&&I.type!=="click"||!d.value)return;const{width:B,top:ae,left:ge}=(wt=d.value)==null?void 0:wt.getBoundingClientRect(),{width:pe}=((Dt=a.value)==null?void 0:Dt.getBoundingClientRect())??{width:0},{clientX:Ie,clientY:U}="touches"in I?I.touches[0]:I,Y={x:B/2,y:-B/2},ie={x:Ie-ge,y:ae-U},ye=Math.round(ce(Y,ie)-l.rotate+360)%360,Me=l.double&&K(Y,ie)<(pe+pe*N.value)/4,Vl=Math.ceil(15/k.value);let ze;for(let it=0;it<Vl;it++)if(ze=G(ye+it*k.value,Me),te(ze)||(ze=G(ye-it*k.value,Me),te(ze)))return O(ze)}function re(I){l.disabled||(I.preventDefault(),window.addEventListener("mousemove",$),window.addEventListener("touchmove",$),window.addEventListener("mouseup",A),window.addEventListener("touchend",A),u.value=null,n.value=null,m.value=!0,$(I))}function A(I){I.stopPropagation(),window.removeEventListener("mousemove",$),window.removeEventListener("touchmove",$),window.removeEventListener("mouseup",A),window.removeEventListener("touchend",A),m.value=!1,n.value!==null&&te(n.value)&&r("change",n.value)}Le(()=>L("div",{class:be([{"v-time-picker-clock":!0,"v-time-picker-clock--indeterminate":l.modelValue==null,"v-time-picker-clock--readonly":l.readonly}]),onMousedown:re,onTouchstart:re,onWheel:me,ref:d},[L("div",{class:"v-time-picker-clock__inner",ref:a},[L("div",{class:be([{"v-time-picker-clock__hand":!0,"v-time-picker-clock__hand--inner":z(l.modelValue)},c.value]),style:et([{transform:`rotate(${l.rotate+k.value*(q.value-l.min)}deg) scaleY(${S(q.value)})`},p.value])},null),x.value.map(I=>{const B=I===q.value;return L("div",{class:be([{"v-time-picker-clock__item":!0,"v-time-picker-clock__item--active":B,"v-time-picker-clock__item--disabled":l.disabled||!te(I)},B&&v.value]),style:et([T(I),B&&f.value])},[L("span",null,[l.format(I)])])})])]))}}),_n=Fe({ampm:Boolean,color:String,disabled:Boolean,hour:Number,minute:Number,second:Number,period:String,readonly:Boolean,useSeconds:Boolean,value:Number,viewMode:String},"VTimePickerControls"),Wt=Re()({name:"VTimePickerControls",props:_n(),emits:{"update:period":l=>!0,"update:viewMode":l=>!0},setup(l,s){let{emit:r,slots:d}=s;const{t:a}=He();return Le(()=>{let o=l.hour;return l.ampm&&(o=o?(o-1)%12+1:12),L("div",{class:"v-time-picker-controls"},[L("div",{class:be({"v-time-picker-controls__time":!0,"v-time-picker-controls__time--with-seconds":l.useSeconds})},[e(E,{active:l.viewMode==="hour",color:l.viewMode==="hour"?l.color:void 0,disabled:l.disabled,variant:"tonal",class:be({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time--with-ampm__btn":l.ampm,"v-time-picker-controls__time--with-seconds__btn":l.useSeconds}),text:l.hour==null?"--":qe(`${o}`),onClick:()=>r("update:viewMode","hour")},null),L("span",{class:be(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":l.useSeconds}])},[V(":")]),e(E,{active:l.viewMode==="minute",color:l.viewMode==="minute"?l.color:void 0,class:be({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":l.viewMode==="minute","v-time-picker-controls__time--with-ampm__btn":l.ampm,"v-time-picker-controls__time--with-seconds__btn":l.useSeconds}),disabled:l.disabled,variant:"tonal",text:l.minute==null?"--":qe(l.minute),onClick:()=>r("update:viewMode","minute")},null),l.useSeconds&&L("span",{class:be(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":l.useSeconds}]),key:"secondsDivider"},[V(":")]),l.useSeconds&&e(E,{key:"secondsVal",active:l.viewMode==="second",color:l.viewMode==="second"?l.color:void 0,variant:"tonal",onClick:()=>r("update:viewMode","second"),class:be({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":l.viewMode==="second","v-time-picker-controls__time--with-seconds__btn":l.useSeconds}),disabled:l.disabled,text:l.second==null?"--":qe(l.second)},null),l.ampm&&L("div",{class:"v-time-picker-controls__ampm"},[e(E,{active:l.period==="am",color:l.period==="am"?l.color:void 0,class:be({"v-time-picker-controls__ampm__am":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":l.period==="am"}),disabled:l.disabled,text:a("$vuetify.timePicker.am"),variant:l.disabled&&l.period==="am"?"elevated":"tonal",onClick:()=>l.period!=="am"?r("update:period","am"):null},null),e(E,{active:l.period==="pm",color:l.period==="pm"?l.color:void 0,class:be({"v-time-picker-controls__ampm__pm":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":l.period==="pm"}),disabled:l.disabled,text:a("$vuetify.timePicker.pm"),variant:l.disabled&&l.period==="pm"?"elevated":"tonal",onClick:()=>l.period!=="pm"?r("update:period","pm"):null},null)])])])}),{}}}),Cn=Te(24),gl=Te(12),xn=gl.map(l=>l+12);Te(60);const Pn=Fe({allowedHours:[Function,Array],allowedMinutes:[Function,Array],allowedSeconds:[Function,Array],disabled:Boolean,format:{type:String,default:"ampm"},max:String,min:String,viewMode:{type:String,default:"hour"},period:{type:String,default:"am",validator:l=>["am","pm"].includes(l)},modelValue:null,readonly:Boolean,scrollable:Boolean,useSeconds:Boolean,...je(nl({title:"$vuetify.timePicker.title"}),["landscape"])},"VTimePicker"),wn=Re()({name:"VTimePicker",props:Pn(),emits:{"update:hour":l=>!0,"update:minute":l=>!0,"update:period":l=>!0,"update:second":l=>!0,"update:modelValue":l=>!0,"update:viewMode":l=>!0},setup(l,s){let{emit:r,slots:d}=s;const{t:a}=He(),o=M(null),m=M(null),u=M(null),n=M(null),i=M(null),c=M(null),p=Ue(l,"period","am"),v=Ue(l,"viewMode","hour"),f=M(null),P=M(null),C=h(()=>{let T;if(l.allowedHours instanceof Array?T=O=>l.allowedHours.includes(O):T=l.allowedHours,!l.min&&!l.max)return T;const K=l.min?Number(l.min.split(":")[0]):0,ce=l.max?Number(l.max.split(":")[0]):23;return O=>O>=Number(K)&&O<=Number(ce)&&(!T||T(O))}),k=h(()=>{let T;const K=!C.value||o.value===null||C.value(o.value);if(l.allowedMinutes instanceof Array?T=B=>l.allowedMinutes.includes(B):T=l.allowedMinutes,!l.min&&!l.max)return K?T:()=>!1;const[ce,O]=l.min?l.min.split(":").map(Number):[0,0],[$,re]=l.max?l.max.split(":").map(Number):[23,59],A=ce*60+Number(O),I=$*60+Number(re);return B=>{const ae=60*o.value+B;return ae>=A&&ae<=I&&K&&(!T||T(B))}}),D=h(()=>{let T;const ce=(!C.value||o.value===null||C.value(o.value))&&(!k.value||m.value===null||k.value(m.value));if(l.allowedSeconds instanceof Array?T=pe=>l.allowedSeconds.includes(pe):T=l.allowedSeconds,!l.min&&!l.max)return ce?T:()=>!1;const[O,$,re]=l.min?l.min.split(":").map(Number):[0,0,0],[A,I,B]=l.max?l.max.split(":").map(Number):[23,59,59],ae=O*3600+$*60+Number(re||0),ge=A*3600+I*60+Number(B||0);return pe=>{const Ie=3600*o.value+60*m.value+pe;return Ie>=ae&&Ie<=ge&&ce&&(!T||T(pe))}}),q=h(()=>l.format==="ampm");$e(()=>l.period,T=>S(T)),$e(()=>l.modelValue,T=>me(T)),Be(()=>{me(l.modelValue)});function N(){return o.value!=null&&m.value!=null&&(!l.useSeconds||u.value!=null)?`${qe(o.value)}:${qe(m.value)}`+(l.useSeconds?`:${qe(u.value)}`:""):null}function x(){const T=N();T!==null&&r("update:modelValue",T)}function g(T){return T?(T-1)%12+1:12}function te(T,K){return T%12+(K==="pm"?12:0)}function me(T){if(T==null||T==="")o.value=null,m.value=null,u.value=null;else if(T instanceof Date)o.value=T.getHours(),m.value=T.getMinutes(),u.value=T.getSeconds();else{const[K,,ce,,O,$]=T.trim().toLowerCase().match(/^(\d+):(\d+)(:(\d+))?([ap]m)?$/)||new Array(6);o.value=$?te(parseInt(K,10),$):parseInt(K,10),m.value=parseInt(ce,10),u.value=parseInt(O||0,10)}p.value=o.value==null||o.value<12?"am":"pm"}function z(T,K){const ce=C.value;if(!ce)return K;const O=q.value?K<12?gl:xn:Cn;return((O.find(re=>ce((re+K)%O.length+O[0]))||0)+K)%O.length+O[0]}function S(T){if(p.value=T,o.value!=null){const K=o.value+(p.value==="am"?-12:12);o.value=z("hour",K)}return r("update:period",T),x(),!0}function ee(T){v.value==="hour"?o.value=q.value?te(T,p.value):T:v.value==="minute"?m.value=T:u.value=T}function G(T){switch(v.value||"hour"){case"hour":r("update:hour",T);break;case"minute":r("update:minute",T);break;case"second":r("update:second",T);break}const K=o.value!==null&&m.value!==null&&(l.useSeconds?u.value!==null:!0);v.value==="hour"?v.value="minute":l.useSeconds&&v.value==="minute"&&(v.value="second"),!(o.value===n.value&&m.value===i.value&&(!l.useSeconds||u.value===c.value)||N()===null)&&(n.value=o.value,i.value=m.value,l.useSeconds&&(c.value=u.value),K&&x())}Le(()=>{const T=ot.filterProps(l),K=Wt.filterProps(l),ce=Qt.filterProps(je(l,["format","modelValue","min","max"]));return e(ot,ue(T,{color:void 0,class:["v-time-picker",l.class],style:l.style}),{title:()=>{var O;return((O=d.title)==null?void 0:O.call(d))??L("div",{class:"v-time-picker__title"},[a(l.title)])},header:()=>e(Wt,ue(K,{ampm:q.value,hour:o.value,minute:m.value,period:p.value,second:u.value,viewMode:v.value,"onUpdate:period":O=>S(O),"onUpdate:viewMode":O=>v.value=O,ref:f}),null),default:()=>e(Qt,ue(ce,{allowedValues:v.value==="hour"?C.value:v.value==="minute"?k.value:D.value,double:v.value==="hour"&&!q.value,format:v.value==="hour"?q.value?g:O=>O:O=>qe(O,2),max:v.value==="hour"?q.value&&p.value==="am"?11:23:59,min:v.value==="hour"&&q.value&&p.value==="pm"?12:0,size:20,step:v.value==="hour"?1:5,modelValue:v.value==="hour"?o.value:v.value==="minute"?m.value:u.value,onChange:G,onInput:ee,ref:P}),null),actions:d.actions})})}}),Dn=Z({__name:"TimeField",props:we({hideDetails:{type:Boolean},readonly:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=l,r=xe(l,"modelValue"),d=h(()=>new Date(r.value).toLocaleTimeString(void 0,{hour:"numeric",minute:"numeric"}));function a(u){const[n,i]=u.split(":"),c=new Date(r.value);c.setHours(Number(n),Number(i)),r.value=c.toISOString()}function o(u){const n=new Date(u),i=new Date(r.value);n.setHours(i.getHours(),i.getMinutes(),i.getSeconds()),r.value=n.toISOString()}const m=M(!1);return(u,n)=>{const i=fl;return y(),w(j,{"no-gutters":""},{default:t(()=>[e(b,null,{default:t(()=>[e(i,{class:"mr-2",label:"Date","model-value":F(el)(new Date(r.value)),"onUpdate:modelValue":o,"hide-details":s.hideDetails,readonly:s.readonly},null,8,["model-value","hide-details","readonly"])]),_:1}),e(b,{cols:"auto"},{default:t(()=>[...n[1]||(n[1]=[L("div",{class:"ma-2"},null,-1)])]),_:1}),e(b,null,{default:t(()=>[e(De,{"close-on-content-click":!1,modelValue:m.value,"onUpdate:modelValue":n[0]||(n[0]=c=>m.value=c)},{activator:t(({props:c})=>[e(fe,ue({class:"center-text"},c,{variant:"outlined",density:"compact","hide-details":s.hideDetails,label:"Moment","model-value":d.value}),null,16,["hide-details","model-value"])]),default:t(()=>[e(wn,{"model-value":new Date(r.value),"onUpdate:modelValue":a,format:"24hr"},null,8,["model-value"])]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),Sn=_t(Dn,[["__scopeId","data-v-32955f86"]]),In=Z({__name:"ModePaiementField",props:we({hideDetails:{type:Boolean},readonly:{type:Boolean},rules:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=l,r=xe(l,"modelValue"),d=lt(ea);return(a,o)=>(y(),w(Ne,{label:"Mode de paiement",variant:"outlined",density:"compact",items:F(d),readonly:s.readonly,"hide-details":s.hideDetails,modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=m=>r.value=m),rules:s.rules},null,8,["items","readonly","hide-details","modelValue","rules"]))}}),Mn=Z({__name:"PaiementEditCard",props:{paiement:{}},emits:["update","delete"],setup(l,{emit:s}){const r=l,d=s,a=M(Ce(r.paiement)),o=h(()=>!0),m=M(!1);return(u,n)=>{const i=In,c=Je,p=Sn;return y(),w(Q,{title:"Modifier le paiement"},{default:t(()=>[e(le,{modelValue:m.value,"onUpdate:modelValue":n[1]||(n[1]=v=>m.value=v),"max-width":"400px"},{default:t(()=>[e(Q,{title:"Confirmation"},{default:t(()=>[e(W,null,{default:t(()=>[...n[11]||(n[11]=[V(" Confirmez-vous la suppression de ce paiement ? ",-1),L("br",null,null,-1),L("br",null,null,-1),V(" Attention, cette opération est irréversible. ",-1)])]),_:1}),e(oe,null,{default:t(()=>[e(se),e(E,{color:"red",onClick:n[0]||(n[0]=v=>{m.value=!1,d("delete")})},{default:t(()=>[...n[12]||(n[12]=[V("Supprimer",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(W,null,{default:t(()=>[e(j,null,{default:t(()=>[e(b,null,{default:t(()=>[e(fe,{density:"compact",variant:"outlined","hide-details":"",label:"Payé par",modelValue:a.value.Payeur,"onUpdate:modelValue":n[2]||(n[2]=v=>a.value.Payeur=v)},null,8,["modelValue"])]),_:1}),e(b,null,{default:t(()=>[e(fe,{density:"compact",variant:"outlined","hide-details":"",label:"Description (optionelle)",modelValue:a.value.Label,"onUpdate:modelValue":n[3]||(n[3]=v=>a.value.Label=v)},null,8,["modelValue"])]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(b,null,{default:t(()=>[e(i,{modelValue:a.value.Mode,"onUpdate:modelValue":n[4]||(n[4]=v=>a.value.Mode=v),"hide-details":""},null,8,["modelValue"])]),_:1}),e(b,null,{default:t(()=>[e(c,{label:"Montant",modelValue:a.value.Montant,"onUpdate:modelValue":n[5]||(n[5]=v=>a.value.Montant=v),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(b,null,{default:t(()=>[e(Ye,{"hide-details":"",density:"compact",label:"Remboursement ?",modelValue:a.value.IsRemboursement,"onUpdate:modelValue":n[6]||(n[6]=v=>a.value.IsRemboursement=v)},null,8,["modelValue"])]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(b,null,{default:t(()=>[e(p,{modelValue:a.value.Time,"onUpdate:modelValue":n[7]||(n[7]=v=>a.value.Time=v),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(b,null,{default:t(()=>[e(fe,{density:"compact",variant:"outlined",label:"Détails (optionnel)",modelValue:a.value.Details,"onUpdate:modelValue":n[8]||(n[8]=v=>a.value.Details=v)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(oe,null,{default:t(()=>[e(E,{color:"red",onClick:n[9]||(n[9]=v=>m.value=!0)},{default:t(()=>[...n[13]||(n[13]=[V("Supprimer le paiement",-1)])]),_:1}),e(se),e(E,{onClick:n[10]||(n[10]=v=>d("update",a.value)),disabled:!o.value},{default:t(()=>[...n[14]||(n[14]=[V("Enregistrer",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})}}}),An=Z({__name:"DossierEditCard",props:{responsable:{},dossier:{}},emits:["save"],setup(l,{emit:s}){const r=l,d=s,a=M(Ce(r.dossier));return(o,m)=>{const u=ct,n=Fa,i=xt;return y(),w(Q,null,{default:t(()=>[e(W,null,{default:t(()=>[e(j,null,{default:t(()=>[e(b,null,{default:t(()=>[e(u,{label:"Responsable","initial-personne":r.responsable,"model-value":a.value.IdResponsable,"onUpdate:modelValue":m[0]||(m[0]=c=>c?a.value.IdResponsable=c:void 0),api:{SelectPersonne:F(_).SelectPersonne.bind(F(_))}},null,8,["initial-personne","model-value","api"])]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(b,null,{default:t(()=>[e(n,{label:"Adresses mail en copie",modelValue:a.value.CopiesMails,"onUpdate:modelValue":m[1]||(m[1]=c=>a.value.CopiesMails=c),rule:F(ta).validMails()},null,8,["modelValue","rule"])]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(b,null,{default:t(()=>[e(i,{"hide-details":"",modelValue:a.value.PartageAdressesOK,"onUpdate:modelValue":m[2]||(m[2]=c=>a.value.PartageAdressesOK=c),label:"Partage des coordonnées"},null,8,["modelValue"])]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(b,null,{default:t(()=>[e(i,{"hide-details":"",modelValue:a.value.DemandeFondSoutien,"onUpdate:modelValue":m[3]||(m[3]=c=>a.value.DemandeFondSoutien=c),label:"Demande le fond de soutien"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(oe,null,{default:t(()=>[e(se),e(E,{onClick:m[4]||(m[4]=c=>d("save",a.value))},{default:t(()=>[...m[5]||(m[5]=[V("Enregistrer",-1)])]),_:1})]),_:1})]),_:1})}}}),$n=Z({__name:"OptionJournee",props:we({camp:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=l,r=xe(l,"modelValue"),d=h(()=>(s.camp.OptionPrix.Jours||[]).map((a,o)=>o));return(a,o)=>(y(),w(Q,null,{default:t(()=>[e(W,null,{default:t(()=>{var m;return[o[1]||(o[1]=L("div",{class:"text-grey mb-2"}," Le prix est variable en fonction des jours de participation au camp. ",-1)),e(la,{class:"overflow-x-auto",color:"secondary",multiple:"","model-value":(m=r.value)!=null&&m.length?r.value:d.value,"onUpdate:modelValue":o[0]||(o[0]=u=>r.value=u.length==d.value.length?[]:u)},{default:t(()=>[(y(!0),H(ne,null,ve(s.camp.OptionPrix.Jours,(u,n)=>(y(),w(E,null,{default:t(()=>[V("J "+R(n+1),1)]),_:2},1024))),256))]),_:1},8,["model-value"])]}),_:1})]),_:1}))}}),Un=Z({__name:"OptionStatut",props:we({camp:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=l,r=xe(l,"modelValue"),d=h(()=>(s.camp.OptionPrix.Statuts||[]).map(o=>({value:o.Id,title:o.Label,subtitle:o.Description}))),a=h(()=>d.value.map(o=>o.value).includes(r.value));return(o,m)=>(y(),w(Q,null,{default:t(()=>[e(W,null,{default:t(()=>[m[1]||(m[1]=L("div",{class:"text-grey mb-4"},"Le prix dépend du statut du participant.",-1)),e(Ne,{clearable:"",items:d.value,label:"Statut","model-value":a.value?r.value:null,"onUpdate:modelValue":m[0]||(m[0]=u=>r.value=u??0),variant:"outlined",density:"comfortable","hide-details":""},{item:t(({item:u,props:n})=>[e(X,ue(n,{title:u.title,subtitle:u.raw.subtitle}),null,16,["title","subtitle"])]),_:1},8,["items","model-value"])]),_:1})]),_:1}))}}),Fn={key:2},hn=Z({__name:"ParticipantOptionPrix",props:{camp:{},optionAndQf:{}},emits:["update"],setup(l,{emit:s}){const r=l,d=s,a=M(Ce(r.optionAndQf));return $e(()=>r.optionAndQf,()=>a.value=Ce(r.optionAndQf)),(o,m)=>{const u=We;return y(),w(Q,{title:"Prix variable",width:"800px"},{default:t(()=>[e(W,null,{default:t(()=>[e(j,{justify:"space-evenly"},{default:t(()=>[e(b,{"align-self":"center",cols:"3"},{default:t(()=>[e(u,{modelValue:a.value.quotientFamilial,"onUpdate:modelValue":m[0]||(m[0]=n=>a.value.quotientFamilial=n),label:"Quotient familial","hide-details":""},null,8,["modelValue"])]),_:1}),e(de,{thickness:"2",vertical:""}),e(b,{"align-self":"center",cols:"8"},{default:t(()=>[r.camp.OptionPrix.Active==F(Ae).PrixJour?(y(),w($n,{key:0,camp:r.camp,modelValue:a.value.options.Jour,"onUpdate:modelValue":m[1]||(m[1]=n=>a.value.options.Jour=n)},null,8,["camp","modelValue"])):r.camp.OptionPrix.Active==F(Ae).PrixStatut?(y(),w(Un,{key:1,camp:r.camp,modelValue:a.value.options.IdStatut,"onUpdate:modelValue":m[2]||(m[2]=n=>a.value.options.IdStatut=n)},null,8,["camp","modelValue"])):(y(),H("div",Fn,"Le camp ne propose pas d'option sur le prix."))]),_:1})]),_:1})]),_:1}),e(oe,null,{default:t(()=>[e(se),e(E,{onClick:m[3]||(m[3]=n=>d("update",a.value))},{default:t(()=>[...m[4]||(m[4]=[V("Enregistrer",-1)])]),_:1})]),_:1})]),_:1})}}}),Rn={key:1,class:"mx-1"},Ln={key:2,class:"mx-1"},Tn={key:3},En={key:4,class:"mx-1"},Nn=Z({__name:"RemisesChip",props:{remises:{}},emits:["update"],setup(l,{emit:s}){const r=l,d=s,a=h(()=>o.value.ReducEnfants!=0||o.value.ReducEquipiers!=0||o.value.ReducSpeciale.Cent!=0),o=M(Ce(r.remises));$e(()=>r.remises,()=>o.value=Ce(r.remises));const m=M(!1);return(u,n)=>{const i=We,c=Je;return y(),w(De,{"close-on-content-click":!1,location:"bottom",modelValue:m.value,"onUpdate:modelValue":n[4]||(n[4]=p=>m.value=p)},{activator:t(({props:p})=>[e(Q,ue(p,{elevation:"1",color:"grey-lighten-2"}),{default:t(()=>[e(W,{class:"py-1 px-1"},{default:t(()=>[a.value?J("",!0):(y(),H(ne,{key:0},[V(" Pas de remises ")],64)),o.value.ReducEnfants?(y(),H("span",Rn," Enfants : "+R(o.value.ReducEnfants)+"% ",1)):J("",!0),o.value.ReducEquipiers?(y(),H("span",Ln," Equipiers : "+R(o.value.ReducEquipiers)+"% ",1)):J("",!0),(o.value.ReducEnfants||o.value.ReducEquipiers)&&o.value.ReducSpeciale.Cent?(y(),H("br",Tn)):J("",!0),o.value.ReducSpeciale.Cent?(y(),H("span",En," Remise : "+R(F(Pe).montant(o.value.ReducSpeciale)),1)):J("",!0)]),_:1})]),_:1},16)]),default:t(()=>[e(Q,{title:"Modifier les remises",width:"400px"},{default:t(()=>[e(W,null,{default:t(()=>[e(j,null,{default:t(()=>[e(b,null,{default:t(()=>[e(i,{modelValue:o.value.ReducEnfants,"onUpdate:modelValue":n[0]||(n[0]=p=>o.value.ReducEnfants=p),label:"Remise enfants","hide-details":"",suffix:"%"},null,8,["modelValue"])]),_:1}),e(b,null,{default:t(()=>[e(i,{modelValue:o.value.ReducEquipiers,"onUpdate:modelValue":n[1]||(n[1]=p=>o.value.ReducEquipiers=p),label:"Remise équipiers","hide-details":"",suffix:"%"},null,8,["modelValue"])]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(b,null,{default:t(()=>[e(c,{class:"mt-2",modelValue:o.value.ReducSpeciale,"onUpdate:modelValue":n[2]||(n[2]=p=>o.value.ReducSpeciale=p),label:"Remise spéciale","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(oe,null,{default:t(()=>[e(se),e(E,{onClick:n[3]||(n[3]=p=>{d("update",o.value),m.value=!1})},{default:t(()=>[...n[5]||(n[5]=[V("Enregistrer",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),On=_t(Nn,[["__scopeId","data-v-01096379"]]),Bn=Z({__name:"AideEditCard",props:{aide:{},file:{},structures:{},participant:{}},emits:["save","deleteFile","uploadFile","showStructureaides"],setup(l,{emit:s}){const r=l,d=s,a=M(Ce(r.aide)),o=h(()=>Object.values(r.structures).map(m=>({value:m.Id,title:m.Nom})));return(m,u)=>{const n=xt,i=Je,c=We,p=La;return y(),w(Q,{title:"Modifier l'aide extérieure",subtitle:`pour ${F(Ee).label(r.participant.Personne)} - ${F(_e).label(r.participant.Camp)}`},{append:t(()=>[e(E,{onClick:u[0]||(u[0]=v=>d("showStructureaides"))},{default:t(()=>[e(ke,null,{default:t(()=>[...u[9]||(u[9]=[V("mdi-view-list",-1)])]),_:1}),u[10]||(u[10]=V(" Structures",-1))]),_:1})]),default:t(()=>[e(W,null,{default:t(()=>[e(j,null,{default:t(()=>[e(b,null,{default:t(()=>[e(Ne,{variant:"outlined",density:"comfortable",label:"Structure",items:o.value,modelValue:a.value.IdStructureaide,"onUpdate:modelValue":u[1]||(u[1]=v=>a.value.IdStructureaide=v)},null,8,["items","modelValue"])]),_:1}),e(b,null,{default:t(()=>[e(n,{modelValue:a.value.Valide,"onUpdate:modelValue":u[2]||(u[2]=v=>a.value.Valide=v),label:"Aide validée","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(b,{"align-self":"center"},{default:t(()=>[e(i,{modelValue:a.value.Valeur,"onUpdate:modelValue":u[3]||(u[3]=v=>a.value.Valeur=v),label:"Montant","hide-details":""},null,8,["modelValue"])]),_:1}),e(b,{"align-self":"center",cols:"auto"},{default:t(()=>[e(n,{"hide-details":"",label:"Par jour",modelValue:a.value.ParJour,"onUpdate:modelValue":u[4]||(u[4]=v=>a.value.ParJour=v)},null,8,["modelValue"])]),_:1}),e(b,{"align-self":"center"},{default:t(()=>[e(c,{label:"Limite",suffix:"jours",modelValue:a.value.NbJoursMax,"onUpdate:modelValue":u[5]||(u[5]=v=>a.value.NbJoursMax=v),disabled:!a.value.ParJour,hint:"0 pour ne pas limiter",min:0,"persistent-hint":""},null,8,["modelValue","disabled"])]),_:1})]),_:1}),e(p,{class:"mt-4",files:r.file?[r.file]:[],title:"Document justificatif","max-docs":1,"in-upload":!1,onDelete:u[6]||(u[6]=v=>d("deleteFile")),onUpload:u[7]||(u[7]=v=>d("uploadFile",v))},null,8,["files"])]),_:1}),e(oe,null,{default:t(()=>[e(se),e(E,{onClick:u[8]||(u[8]=v=>d("save",a.value))},{default:t(()=>[...u[11]||(u[11]=[V("Enregistrer",-1)])]),_:1})]),_:1})]),_:1},8,["subtitle"])}}}),qn=Z({__name:"StructuresPannel",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(l){const s=xe(l,"modelValue"),r=h(()=>Object.values(s.value||{}).sort((n,i)=>n.Nom.localeCompare(i.Nom)));async function d(){const n=await _.StructureaideCreate();if(n===void 0)return;_.showMessage("Structure créée avec succès.");const i=s.value||{};i[n.Id]=n,s.value=i,a.value=n}const a=M(null);async function o(){const n=a.value;if(n==null||(a.value=null,await _.StructureaideUpdate(n)===void 0))return;_.showMessage("Structure modifiée avec succès.");const c=s.value||{};c[n.Id]=n,s.value=c}const m=M(null);async function u(){const n=m.value;if(n==null||(m.value=null,await _.StructureaideDelete({id:n.Id})===void 0))return;const c=s.value||{};delete c[n.Id],s.value=c,_.showMessage("Structure supprimée avec succès.")}return(n,i)=>(y(),w(Q,{title:"Structures d'aide",subtitle:"Organismes pouvant distribuer une aide extérieure"},{append:t(()=>[e(E,{onClick:d},{prepend:t(()=>[e(ke,{color:"green"},{default:t(()=>[...i[5]||(i[5]=[V("mdi-plus",-1)])]),_:1})]),default:t(()=>[i[6]||(i[6]=V(" Ajouter une structure ",-1))]),_:1})]),default:t(()=>[e(W,{class:"overflow-y-auto"},{default:t(()=>[(y(!0),H(ne,null,ve(r.value,c=>(y(),w(j,null,{default:t(()=>[e(b,{"align-self":"center"},{default:t(()=>[e(sl,null,{default:t(()=>[V(R(c.Nom),1)]),_:2},1024),e(ol,null,{default:t(()=>[V(R(c.Immatriculation),1)]),_:2},1024)]),_:2},1024),e(b,{"align-self":"center",style:{"font-size":"smaller"}},{default:t(()=>[(y(!0),H(ne,null,ve(c.Info.split(`
`),p=>(y(),H("div",null,R(p),1))),256))]),_:2},1024),e(b,{"align-self":"center",cols:"auto"},{default:t(()=>[e(De,null,{activator:t(({props:p})=>[e(E,ue({icon:"mdi-dots-vertical"},{ref_for:!0},p,{size:"x-small"}),null,16)]),default:t(()=>[e(Se,null,{default:t(()=>[e(X,{title:"Modifier","prepend-icon":"mdi-pencil",onClick:p=>a.value=F(Ce)(c)},null,8,["onClick"]),e(X,{title:"Supprimer","prepend-icon":"mdi-delete",onClick:p=>m.value=c},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),_:1}),e(le,{"model-value":a.value!=null,"onUpdate:modelValue":i[3]||(i[3]=c=>a.value=null),"max-width":"600px"},{default:t(()=>[a.value!=null?(y(),w(Q,{key:0,title:"Modifier la structure"},{default:t(()=>[e(W,null,{default:t(()=>[e(j,null,{default:t(()=>[e(b,null,{default:t(()=>[e(fe,{variant:"outlined",density:"compact",label:"Nom",modelValue:a.value.Nom,"onUpdate:modelValue":i[0]||(i[0]=c=>a.value.Nom=c),"hide-details":""},null,8,["modelValue"])]),_:1}),e(b,null,{default:t(()=>[e(fe,{variant:"outlined",density:"compact",label:"Immatriculation",modelValue:a.value.Immatriculation,"onUpdate:modelValue":i[1]||(i[1]=c=>a.value.Immatriculation=c),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(b,null,{default:t(()=>[e(rt,{variant:"outlined",density:"compact",label:"Informations",modelValue:a.value.Info,"onUpdate:modelValue":i[2]||(i[2]=c=>a.value.Info=c),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(oe,null,{default:t(()=>[e(se),e(E,{onClick:o},{default:t(()=>[...i[7]||(i[7]=[V("Enregistrer",-1)])]),_:1})]),_:1})]),_:1})):J("",!0)]),_:1},8,["model-value"]),e(le,{"model-value":m.value!=null,"onUpdate:modelValue":i[4]||(i[4]=c=>m.value=null),"max-width":"450px"},{default:t(()=>[m.value!=null?(y(),w(Q,{key:0,title:"Confirmation"},{default:t(()=>[e(W,null,{default:t(()=>[V(" Confirmez-vous la suppression de la structure "+R(m.value.Nom)+" ? ",1),i[8]||(i[8]=L("br",null,null,-1)),i[9]||(i[9]=L("br",null,null,-1)),i[10]||(i[10]=V(" Attention, cette opération est irréversible. ",-1))]),_:1}),e(oe,null,{default:t(()=>[e(se),e(E,{color:"red",onClick:u},{default:t(()=>[...i[11]||(i[11]=[V("Supprimer",-1)])]),_:1})]),_:1})]),_:1})):J("",!0)]),_:1},8,["model-value"])]),_:1}))}}),jn={key:0},Yn={key:1},zn=Z({__name:"DossierParticipantRow",props:we({participant:{},aides:{},aidesFiles:{},hasManyParticipants:{type:Boolean}},{structures:{required:!0},structuresModifiers:{}}),emits:we(["update","delete","createAide","updateAide","deleteAide","deleteFileAide","uploadFileAide","expand"],["update:structures"]),setup(l,{emit:s}){const r=l,d=xe(l,"structures"),a=s,o=h(()=>{const C=Object.values(r.aides||{});return C.sort((k,D)=>k.Id-D.Id),C}),m=h(()=>r.participant.Camp.OptionPrix.Active==Ae.NoOption&&!_e.isQuotientFamilialActive(r.participant.Camp.OptionQuotientFamilial));function u(C){var k,D;switch(r.participant.Camp.OptionPrix.Active){case Ae.NoOption:return"Séjour sans option";case Ae.PrixJour:const q=((k=C.Jour)==null?void 0:k.length)||0;return q==0?"Présent tous les jours":`Présent ${q} jour${q>1?"s":""}`;case Ae.PrixStatut:const N=(D=r.participant.Camp.OptionPrix.Statuts)==null?void 0:D.find(x=>x.Id==C.IdStatut);return N?`Statut ${N.Label}`:"Pas d'option."}}const n=M(!1),i=M(!1),c=h(()=>Object.values(d.value).map(C=>({value:C.Id,title:C.Nom})).sort((C,k)=>C.title.localeCompare(k.title))),p=M(null),v=M(null),f=M(null),P=M(!1);return(C,k)=>(y(),w(j,null,{default:t(()=>[e(b,{"align-self":"center",cols:"3"},{default:t(()=>[e(sl,null,{default:t(()=>[L("a",{href:"/camps",onClick:k[0]||(k[0]=tt(D=>F(Pt)(r.participant.Participant),["prevent"]))},R(F(Ee).label(r.participant.Personne)),1)]),_:1}),e(ol,null,{default:t(()=>[V(R(F(_e).label(r.participant.Camp)),1)]),_:1})]),_:1}),e(b,{"align-self":"center",cols:"2",class:"text-center"},{default:t(()=>[e(De,{disabled:m.value,"close-on-content-click":!1,modelValue:n.value,"onUpdate:modelValue":k[2]||(k[2]=D=>n.value=D)},{activator:t(({props:D})=>[e(Q,ue(D,{elevation:m.value?0:1,color:"grey-lighten-2"}),{default:t(()=>[e(W,{class:"py-1 px-1"},{default:t(()=>[m.value?(y(),H("div",jn,"Camp sans option")):(y(),H("div",Yn,[V(R(r.participant.Participant.QuotientFamilial?`QF ${r.participant.Participant.QuotientFamilial}.`:"Pas de QF.")+" ",1),k[22]||(k[22]=L("br",null,null,-1)),V(" "+R(u(r.participant.Participant.OptionPrix)),1)]))]),_:1})]),_:1},16,["elevation"])]),default:t(()=>[e(hn,{camp:r.participant.Camp,"option-and-qf":{options:r.participant.Participant.OptionPrix,quotientFamilial:r.participant.Participant.QuotientFamilial},onUpdate:k[1]||(k[1]=D=>{r.participant.Participant.OptionPrix=D.options,r.participant.Participant.QuotientFamilial=D.quotientFamilial,n.value=!1,a("update",r.participant.Participant)})},null,8,["camp","option-and-qf"])]),_:1},8,["disabled","modelValue"])]),_:1}),e(b,{"align-self":"center",class:"text-center"},{default:t(()=>[o.value.length?J("",!0):(y(),w(Ve,{key:0,label:""},{default:t(()=>[...k[23]||(k[23]=[V("Aucune aide",-1)])]),_:1})),(y(!0),H(ne,null,ve(o.value,D=>(y(),w(Ve,{class:"my-1","prepend-icon":"mdi-cash-plus",color:D.Valide?"green":"orange",onClick:q=>v.value=D},{close:t(()=>[e(ke,{icon:"mdi-close-circle",onClick:tt(q=>f.value=D,["stop"])},null,8,["onClick"])]),default:t(()=>[V(" "+R(d.value[D.IdStructureaide].Nom)+" : "+R(F(Pe).montant(D.Valeur)),1)]),_:2},1032,["color","onClick"]))),256))]),_:1}),e(b,{"align-self":"center",class:"text-center",cols:"3"},{default:t(()=>[e(On,{remises:r.participant.Participant.Remises,onUpdate:k[3]||(k[3]=D=>{r.participant.Participant.Remises=D,a("update",r.participant.Participant)})},null,8,["remises"])]),_:1}),e(b,{"align-self":"center",cols:"auto"},{default:t(()=>[e(De,{location:"left"},{activator:t(({props:D})=>[e(E,ue(D,{icon:"mdi-dots-vertical",size:"small"}),null,16)]),default:t(()=>[e(Se,{density:"comfortable"},{default:t(()=>[e(X,{title:"Ajouter une aide","prepend-icon":"mdi-cash-plus",onClick:k[4]||(k[4]=D=>p.value={IdParticipant:r.participant.Participant.Id,IdStructure:0})}),e(de),r.hasManyParticipants?(y(),w(X,{key:0,"prepend-icon":"mdi-arrow-expand",title:"Étendre les options et remises",subtitle:"... au reste du dossier",onClick:k[5]||(k[5]=D=>a("expand"))})):J("",!0),e(de),e(X,{title:"Supprimer","prepend-icon":"mdi-delete",onClick:k[6]||(k[6]=D=>i.value=!0)})]),_:1})]),_:1})]),_:1}),e(le,{modelValue:i.value,"onUpdate:modelValue":k[8]||(k[8]=D=>i.value=D),"max-width":"600px"},{default:t(()=>[e(Q,{title:"Supprimer le participant"},{default:t(()=>[e(W,null,{default:t(()=>[...k[24]||(k[24]=[V(" Confirmez-vous la suppression de ce participant ? ",-1),L("br",null,null,-1),V(" Attention, cette opération est irréversible. ",-1)])]),_:1}),e(oe,null,{default:t(()=>[e(se),e(E,{color:"red",onClick:k[7]||(k[7]=D=>{a("delete"),i.value=!1})},{default:t(()=>[...k[25]||(k[25]=[V("Supprimer",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(le,{modelValue:P.value,"onUpdate:modelValue":k[10]||(k[10]=D=>P.value=D),"max-width":"650px"},{default:t(()=>[e(qn,{modelValue:d.value,"onUpdate:modelValue":k[9]||(k[9]=D=>d.value=D)},null,8,["modelValue"])]),_:1},8,["modelValue"]),p.value!=null?(y(),w(le,{key:0,"model-value":p.value!=null,"onUpdate:modelValue":k[14]||(k[14]=D=>p.value=null),width:"600px"},{default:t(()=>[e(Q,{title:"Ajouter une aide extérieure"},{append:t(()=>[e(E,{onClick:k[11]||(k[11]=D=>P.value=!0)},{default:t(()=>[e(ke,null,{default:t(()=>[...k[26]||(k[26]=[V("mdi-view-list",-1)])]),_:1}),k[27]||(k[27]=V(" Structures",-1))]),_:1})]),default:t(()=>[e(W,null,{default:t(()=>[e(Ne,{variant:"outlined",density:"comfortable",label:"Structure",items:c.value,"model-value":p.value.IdStructure==0?null:p.value.IdStructure,"onUpdate:modelValue":k[12]||(k[12]=D=>p.value.IdStructure=D)},null,8,["items","model-value"])]),_:1}),e(oe,null,{default:t(()=>[e(se),e(E,{color:"green",onClick:k[13]||(k[13]=D=>{a("createAide",p.value),p.value=null}),disabled:p.value.IdStructure==0},{default:t(()=>[...k[28]||(k[28]=[V("Créer",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])):J("",!0),v.value!=null?(y(),w(le,{key:1,"model-value":v.value!=null,"onUpdate:modelValue":k[19]||(k[19]=D=>v.value=null),"max-width":"800px"},{default:t(()=>[e(Bn,{aide:v.value,file:C.aidesFiles[v.value.Id],structures:d.value,participant:r.participant,onShowStructureaides:k[15]||(k[15]=D=>P.value=!0),onSave:k[16]||(k[16]=D=>{a("updateAide",D),v.value=null}),onDeleteFile:k[17]||(k[17]=D=>a("deleteFileAide",v.value.Id)),onUploadFile:k[18]||(k[18]=D=>a("uploadFileAide",D,v.value.Id))},null,8,["aide","file","structures","participant"])]),_:1},8,["model-value"])):J("",!0),f.value!=null?(y(),w(le,{key:2,"model-value":f.value!=null,"onUpdate:modelValue":k[21]||(k[21]=D=>f.value=null),"max-width":"600px"},{default:t(()=>[e(Q,{title:"Supprimer l'aide"},{default:t(()=>[e(W,null,{default:t(()=>[...k[29]||(k[29]=[V(" Confirmez-vous la suppression de l'aide extérieure ? ",-1),L("br",null,null,-1),V(" Attention, cette opération est irréversible. ",-1)])]),_:1}),e(oe,null,{default:t(()=>[e(se),e(E,{color:"red",onClick:k[20]||(k[20]=D=>{a("deleteAide",f.value.Id),f.value=null})},{default:t(()=>[...k[30]||(k[30]=[V("Supprimer",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])):J("",!0)]),_:1}))}}),Hn=Z({__name:"DossierEditor",props:{dossier:{},camps:{}},emits:["updateDossier","createParticipant","updateParticipant","deleteParticipant","expandParticipant","createAide","updateAide","deleteAide","deleteFileAide","uploadFileAide"],setup(l,{emit:s}){const r=l,d=s,a=M(null);Be(u);const o=M(!0),m=M({});async function u(){const n=await _.StructureaidesGet();n!==void 0&&(o.value=!1,m.value=n||{})}return(n,i)=>(y(),w(Q,{title:"Modifier le dossier"},{append:t(()=>[e(E,{onClick:i[0]||(i[0]=c=>a.value={IdCamp:0,IdPersonne:0,IdDossier:r.dossier.Dossier.Dossier.Id})},{prepend:t(()=>[e(ke,{color:"green"},{default:t(()=>[...i[9]||(i[9]=[V("mdi-plus",-1)])]),_:1})]),default:t(()=>[i[10]||(i[10]=V(" Ajouter un participant",-1))]),_:1})]),default:t(()=>[e(W,null,{default:t(()=>[e(j,null,{default:t(()=>[e(b,{cols:"3"},{default:t(()=>[e(An,{responsable:r.dossier.Dossier.Responsable,dossier:r.dossier.Dossier.Dossier,onSave:i[1]||(i[1]=c=>d("updateDossier",c))},null,8,["responsable","dossier"])]),_:1}),e(de,{thickness:"4",vertical:""}),o.value?J("",!0):(y(),w(b,{key:0},{default:t(()=>[i[11]||(i[11]=L("div",{class:"my-1"},null,-1)),(y(!0),H(ne,null,ve(r.dossier.Dossier.Participants,c=>{var p;return y(),w(zn,{participant:c,aides:(r.dossier.Dossier.Aides||{})[c.Participant.Id],"aides-files":r.dossier.Dossier.AidesFiles||{},"has-many-participants":(((p=r.dossier.Dossier.Participants)==null?void 0:p.length)||0)>1,structures:m.value,"onUpdate:structures":i[2]||(i[2]=v=>m.value=v),onCreateAide:i[3]||(i[3]=v=>d("createAide",v)),onDeleteAide:i[4]||(i[4]=v=>d("deleteAide",v)),onUpdateAide:i[5]||(i[5]=v=>d("updateAide",v)),onDeleteFileAide:i[6]||(i[6]=v=>d("deleteFileAide",v)),onUploadFileAide:i[7]||(i[7]=(v,f)=>d("uploadFileAide",v,f)),onUpdate:i[8]||(i[8]=v=>d("updateParticipant",v)),onDelete:v=>d("deleteParticipant",c.Participant.Id),onExpand:v=>d("expandParticipant",c.Participant)},null,8,["participant","aides","aides-files","has-many-participants","structures","onDelete","onExpand"])}),256))]),_:1}))]),_:1})]),_:1})]),_:1}))}}),Qn={class:"mr-1"},Wn=["onClick"],Jn={class:"overflow-y-auto",style:{"max-height":"65vh"}},Gn=["href"],Kn=Z({__name:"DossierDetailsPannel",props:{dossier:{},camps:{}},emits:["updateDossier","deleteDossier","mergeDossier","createParticipant","updateParticipant","deleteParticipant","expandParticipant","createAide","updateAide","deleteAide","deleteFileAide","uploadFileAide","createPaiement","updatePaiement","deletePaiement","sendMessage","deleteMessage","sendFacture"],setup(l,{expose:s,emit:r}){const d=l,a=r;s({showEditPaiement:p,showEditDossier:n});const o=h(()=>aa(d.dossier.Dossier,_.isFondSoutien?$t.FondSoutien:$t.Backoffice)),m=M(!1),u=M(!1);function n(){u.value=!0}const i=M(null),c=M(null);function p(x){c.value=x}const v="Repère",f=M(!1);async function P(){await pt(d.dossier.EspacepersoURL),_.showMessage("Lien vers l'espace personnel copié.")}async function C(){await pt(d.dossier.VirementCode),_.showMessage("Identifiant de virement copié.")}async function k(x){await pt(x),_.showMessage("IBAN copié.")}const D=M(!1),q=M(!1),N=M("");return(x,g)=>{const te=Ua,me=ut,z=ct;return y(),w(Q,{title:`Dossier de ${d.dossier.Dossier.Responsable}`,class:"ml-2"},{subtitle:t(()=>[(y(!0),H(ne,null,ve(d.dossier.Dossier.Participants,S=>(y(),H("span",Qn,[L("a",{href:"/camps",onClick:tt(ee=>F(Pt)(S.Participant),["prevent"])},R(F(Ee).label(S.Personne)),9,Wn)]))),256))]),append:t(()=>[e(E,{icon:"mdi-pencil",onClick:g[0]||(g[0]=S=>u.value=!0),class:"mx-1"}),e(De,null,{activator:t(({props:S})=>[e(E,ue(S,{icon:"mdi-dots-vertical",size:"small",class:"mx-1"}),null,16)]),default:t(()=>[e(Se,{density:"compact"},{default:t(()=>[e(X,{"prepend-icon":"mdi-email",onClick:g[1]||(g[1]=S=>q.value=!0),title:"Envoyer un message",subtitle:"Notification par email"}),e(X,{"prepend-icon":"mdi-invoice-send",onClick:g[2]||(g[2]=S=>a("sendFacture")),title:"Envoyer une demande de règlement",subtitle:"Notification par email"}),e(de),e(X,{"prepend-icon":"mdi-cash-plus",onClick:g[3]||(g[3]=S=>a("createPaiement")),title:"Ajouter un paiement"}),e(de),e(X,{"prepend-icon":"mdi-link",onClick:g[4]||(g[4]=S=>f.value=!0),title:"Afficher les identifiants"}),e(de),e(X,{"prepend-icon":"mdi-file-move",onClick:g[5]||(g[5]=S=>D.value=!0),title:"Fusionner vers ..."}),e(de),e(X,{onClick:g[6]||(g[6]=S=>m.value=!0),title:"Supprimer"},{prepend:t(()=>[e(ke,{color:"red"},{default:t(()=>[...g[35]||(g[35]=[V("mdi-delete",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),default:t(()=>[e(W,null,{default:t(()=>[e(j,null,{default:t(()=>[e(b,{class:"ml-2 mb-1 text-center"},{default:t(()=>[e(De,null,{activator:t(({props:S})=>[e(Ve,ue(S,{"prepend-icon":"mdi-currency-eur",color:F(Pe).colorStatutPaiement(d.dossier.Dossier.Bilan.Statut)}),{default:t(()=>[V(R(d.dossier.Dossier.Bilan.Recu)+" payé sur "+R(d.dossier.Dossier.Bilan.Demande),1)]),_:1},16,["color"])]),default:t(()=>[e(Vn,{dossier:d.dossier.Dossier},null,8,["dossier"])]),_:1})]),_:1})]),_:1}),L("div",Jn,[e($a,{side:"end",class:"mt-4",density:"compact"},{default:t(()=>[(y(!0),H(ne,null,ve(o.value,(S,ee)=>(y(),w(te,{event:S,key:ee,onEditPaiement:g[7]||(g[7]=G=>c.value=G),onDeleteMessage:g[8]||(g[8]=G=>a("deleteMessage",G))},null,8,["event"]))),128))]),_:1})])]),_:1}),e(le,{modelValue:m.value,"onUpdate:modelValue":g[10]||(g[10]=S=>m.value=S),"max-width":"600px"},{default:t(()=>[e(Q,{title:"Supprimer le dossier"},{default:t(()=>[e(W,null,{default:t(()=>[...g[36]||(g[36]=[V(" Confirmez-vous la suppression du dossier et de ses participants ? ",-1),L("br",null,null,-1),L("br",null,null,-1),V(" Attention, cette opération est irréversible. ",-1)])]),_:1}),e(oe,null,{default:t(()=>[e(se),e(E,{color:"red",onClick:g[9]||(g[9]=S=>{a("deleteDossier"),m.value=!1})},{default:t(()=>[...g[37]||(g[37]=[V("Supprimer",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),i.value!=null?(y(),w(le,{key:0,"model-value":i.value!=null,"onUpdate:modelValue":g[14]||(g[14]=S=>i.value=null),"max-width":"600px"},{default:t(()=>[e(Q,{title:"Ajouter un participant"},{default:t(()=>[e(W,null,{default:t(()=>[e(j,null,{default:t(()=>[e(b,{cols:"12"},{default:t(()=>[e(me,{label:"Camp",camps:d.camps,modelValue:i.value.IdCamp,"onUpdate:modelValue":g[11]||(g[11]=S=>i.value.IdCamp=S)},null,8,["camps","modelValue"])]),_:1}),e(b,{cols:"12"},{default:t(()=>[e(z,{label:"Personne","initial-personne":"",modelValue:i.value.IdPersonne,"onUpdate:modelValue":g[12]||(g[12]=S=>i.value.IdPersonne=S),api:{SelectPersonne:F(_).SelectPersonne.bind(F(_))}},null,8,["modelValue","api"])]),_:1})]),_:1})]),_:1}),e(oe,null,{default:t(()=>[e(se),e(E,{color:"green",disabled:i.value.IdPersonne==0||i.value.IdCamp==0,onClick:g[13]||(g[13]=S=>{a("createParticipant",i.value),i.value=null})},{default:t(()=>[...g[38]||(g[38]=[V("Ajouter",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])):J("",!0),e(le,{modelValue:u.value,"onUpdate:modelValue":g[25]||(g[25]=S=>u.value=S)},{default:t(()=>[e(Hn,{dossier:d.dossier,camps:d.camps,onUpdateDossier:g[15]||(g[15]=S=>a("updateDossier",S)),onCreateParticipant:g[16]||(g[16]=S=>a("createParticipant",S)),onUpdateParticipant:g[17]||(g[17]=S=>a("updateParticipant",S)),onDeleteParticipant:g[18]||(g[18]=S=>a("deleteParticipant",S)),onExpandParticipant:g[19]||(g[19]=S=>a("expandParticipant",S)),onCreateAide:g[20]||(g[20]=S=>a("createAide",S)),onUpdateAide:g[21]||(g[21]=S=>a("updateAide",S)),onDeleteAide:g[22]||(g[22]=S=>a("deleteAide",S)),onDeleteFileAide:g[23]||(g[23]=S=>a("deleteFileAide",S)),onUploadFileAide:g[24]||(g[24]=(S,ee)=>a("uploadFileAide",S,ee))},null,8,["dossier","camps"])]),_:1},8,["modelValue"]),c.value!=null?(y(),w(le,{key:1,"model-value":c.value!=null,"onUpdate:modelValue":g[28]||(g[28]=S=>c.value=null),"max-width":"600px"},{default:t(()=>[e(Mn,{paiement:c.value,onUpdate:g[26]||(g[26]=S=>{a("updatePaiement",S),c.value=null}),onDelete:g[27]||(g[27]=S=>{a("deletePaiement",c.value),c.value=null})},null,8,["paiement"])]),_:1},8,["model-value"])):J("",!0),e(le,{modelValue:f.value,"onUpdate:modelValue":g[29]||(g[29]=S=>f.value=S),"max-width":"800px"},{default:t(()=>[e(Q,{title:"Liens et identifiants"},{default:t(()=>[e(W,null,{default:t(()=>[e(j,null,{default:t(()=>[e(b,{cols:"3"},{default:t(()=>[...g[39]||(g[39]=[V("Espace personnel",-1)])]),_:1}),e(b,{class:"text-truncate"},{default:t(()=>[L("a",{href:d.dossier.EspacepersoURL,target:"_blank"},R(d.dossier.EspacepersoURL),9,Gn)]),_:1}),e(b,{"align-self":"center",cols:"auto"},{default:t(()=>[e(E,{size:"small",icon:"mdi-content-copy",onClick:P})]),_:1})]),_:1}),(y(!0),H(ne,null,ve(d.dossier.BankAccounts,S=>(y(),w(j,null,{default:t(()=>[e(b,{cols:"3"},{default:t(()=>[V("RIB ("+R(F(v))+")",1)]),_:1}),e(b,{cols:"3"},{default:t(()=>[V(R(S[0]),1)]),_:2},1024),e(b,null,{default:t(()=>[V(R(S[1]),1)]),_:2},1024),e(b,{"align-self":"center",cols:"auto"},{default:t(()=>[e(E,{size:"small",icon:"mdi-content-copy",onClick:()=>k(S[1])},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),256)),e(j,null,{default:t(()=>[e(b,{cols:"3"},{default:t(()=>[...g[40]||(g[40]=[V("Identification de virement",-1)])]),_:1}),e(b,null,{default:t(()=>[V(R(d.dossier.VirementCode),1)]),_:1}),e(b,{"align-self":"center",cols:"auto"},{default:t(()=>[e(E,{size:"small",icon:"mdi-content-copy",onClick:C})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(le,{modelValue:D.value,"onUpdate:modelValue":g[31]||(g[31]=S=>D.value=S),"max-width":"600px"},{default:t(()=>[e(yl,{from:d.dossier.Dossier.Dossier.Id,onMerge:g[30]||(g[30]=S=>{a("mergeDossier",S),D.value=!1})},null,8,["from"])]),_:1},8,["modelValue"]),e(le,{modelValue:q.value,"onUpdate:modelValue":g[34]||(g[34]=S=>q.value=S),"max-width":"600px"},{default:t(()=>[e(Q,{title:"Nouveau message",subtitle:"Envoie un message sur le fil de suivi et une notification par mail."},{default:t(()=>[e(W,null,{default:t(()=>[e(j,null,{default:t(()=>[e(b,null,{default:t(()=>[e(rt,{rows:"5",variant:"outlined",modelValue:N.value,"onUpdate:modelValue":g[32]||(g[32]=S=>N.value=S)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(oe,null,{default:t(()=>[e(se),e(E,{disabled:!N.value.length,onClickOnce:g[33]||(g[33]=S=>{a("sendMessage",N.value),q.value=!1})},{default:t(()=>[...g[41]||(g[41]=[V("Envoyer",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["title"])}}}),Xn=Z({__name:"CreateDossierCard",emits:["create"],setup(l,{emit:s}){const r=s,d=M(0);return(a,o)=>{const m=ct;return y(),w(Q,{title:"Créer un dossier"},{default:t(()=>[e(W,null,{default:t(()=>[e(j,null,{default:t(()=>[e(b,null,{default:t(()=>[e(m,{label:"Responsable légal",modelValue:d.value,"onUpdate:modelValue":o[0]||(o[0]=u=>d.value=u),"initial-personne":"",api:{SelectPersonne:F(_).SelectPersonne.bind(F(_))}},null,8,["modelValue","api"])]),_:1})]),_:1})]),_:1}),e(oe,null,{default:t(()=>[e(se),e(E,{color:"green",disabled:d.value==0,onClick:o[1]||(o[1]=u=>r("create",d.value))},{default:t(()=>[...o[2]||(o[2]=[V("Créer",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})}}}),Zn=Z({__name:"DossierList",props:we({camps:{},selected:{}},{query:{required:!0},queryModifiers:{}}),emits:we(["click","update"],["update:query"]),setup(l,{expose:s,emit:r}){const d=l,a=r,o=xe(l,"query");s({searchDossiers:u}),$e(()=>o.value,u,{immediate:!0});const m=M(null);async function u(){const n=await _.DossiersSearch(o.value);n!==void 0&&(m.value=n,a("update",n))}return(n,i)=>{const c=ut,p=il;return y(),H("div",null,[e(j,null,{default:t(()=>[e(b,{"align-self":"center"},{default:t(()=>[e(p,{density:"compact",variant:"outlined","prepend-inner-icon":"mdi-magnify",label:"Rechercher un dossier","hide-details":"",clearable:"",modelValue:o.value.Pattern,"onUpdate:modelValue":[i[5]||(i[5]=v=>o.value.Pattern=v),u]},{"append-inner":t(()=>[o.value.IdCamp.Valid?(y(),w(Ve,{key:0,class:"ml-1",size:"small","prepend-icon":"mdi-bed"},{default:t(()=>{var v;return[V(R((v=d.camps.find(f=>f.Id==o.value.IdCamp.Id))==null?void 0:v.Label),1)]}),_:1})):J("",!0),o.value.Attente!=F(oa).EmptyQA?(y(),w(Ve,{key:1,class:"ml-1",size:"small","prepend-icon":"mdi-clock"},{default:t(()=>[V(R(F(Ut)[o.value.Attente]),1)]),_:1})):J("",!0),o.value.Reglement!=F(ra).EmptyQR?(y(),w(Ve,{key:2,class:"ml-1",size:"small","prepend-icon":"mdi-currency-eur"},{default:t(()=>[V(R(F(Ft)[o.value.Reglement]),1)]),_:1})):J("",!0),o.value.OnlyFondSoutien?(y(),w(Ve,{key:3,class:"ml-1",size:"small"},{default:t(()=>[...i[6]||(i[6]=[V(" Fond de soutien ",-1)])]),_:1})):J("",!0)]),append:t(()=>[e(De,{location:"left top","close-on-content-click":!1},{activator:t(({props:v})=>[e(E,ue(v,{size:"small",variant:"flat",icon:""}),{default:t(()=>[e(ke,null,{default:t(()=>[...i[7]||(i[7]=[V("mdi-filter-cog",-1)])]),_:1}),e(Ct,{activator:"parent",text:"Autres critères de recherche"})]),_:1},16)]),default:t(()=>[e(Q,{"min-width":"400px",title:"Filtrer les dossiers"},{default:t(()=>[e(W,null,{default:t(()=>[e(j,null,{default:t(()=>[e(b,null,{default:t(()=>[e(c,{label:"Camp",camps:d.camps,"model-value":F(ia)(F(sa)(o.value.IdCamp)),"onUpdate:modelValue":i[0]||(i[0]=v=>{o.value.IdCamp=F(na)(F(ua)(v)),u()})},null,8,["camps","model-value"])]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(b,null,{default:t(()=>[e(Ne,{density:"compact",variant:"outlined",label:"Liste d'attente",modelValue:o.value.Attente,"onUpdate:modelValue":[i[1]||(i[1]=v=>o.value.Attente=v),u],items:F(lt)(F(Ut)),"hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(b,null,{default:t(()=>[e(Ne,{density:"compact",variant:"outlined",label:"Réglement",modelValue:o.value.Reglement,"onUpdate:modelValue":[i[2]||(i[2]=v=>o.value.Reglement=v),u],items:F(lt)(F(Ft)),"hide-details":""},null,8,["modelValue","items"])]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(b,null,{default:t(()=>[e(Tt,{label:"Trier selon les nouveaux messages",hint:"Affiche les nouveaux messages en premier.","persistent-hint":"",density:"compact",color:"light-blue-darken-3",modelValue:o.value.SortByNewMessages,"onUpdate:modelValue":[i[3]||(i[3]=v=>o.value.SortByNewMessages=v),u]},null,8,["modelValue"])]),_:1})]),_:1}),e(j,null,{default:t(()=>[e(b,null,{default:t(()=>[e(Tt,{label:"Fond de soutien",hint:"N'affiche que les dossiers demandant le fond de soutien.","persistent-hint":"",density:"compact",color:"orange",modelValue:o.value.OnlyFondSoutien,"onUpdate:modelValue":[i[4]||(i[4]=v=>o.value.OnlyFondSoutien=v),u]},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),m.value!=null?(y(),w(Se,{key:0,class:"mt-2",selected:d.selected?[d.selected]:void 0},{default:t(()=>{var v;return[(v=m.value.Dossiers)!=null&&v.length?J("",!0):(y(),w(X,{key:0,class:"text-center"},{default:t(()=>[...i[8]||(i[8]=[L("i",null,"Aucun dossier ne correspond à votre recherche.",-1)])]),_:1})),(y(!0),H(ne,null,ve(m.value.Dossiers,(f,P)=>(y(),w(X,{rounded:"",key:P,title:f.Responsable,subtitle:f.Participants,value:f.Id,onClick:C=>a("click",f),class:"my-1"},mt({_:2},[f.NewMessages?{name:"append",fn:t(()=>[e(Sa,{color:"light-blue-darken-3",content:f.NewMessages},null,8,["content"])]),key:"0"}:void 0]),1032,["title","subtitle","value","onClick"]))),128))]}),_:1},8,["selected"])):J("",!0)])}}}),eu=Z({__name:"SendDocumentsCampCard",props:{camps:{}},emits:["send"],setup(l,{emit:s}){const r=l,d=s,a=M(0),o=M(null);async function m(){const i=await _.EventsSendDocumentsCampPreview({idCamp:a.value});i!==void 0&&(o.value=i,u.value=(i.Dossiers||[]).filter(c=>!c.DocumentsSent).map(c=>c.Id))}const u=M([]),n=h(()=>{var i;return u.value.length==(((i=o.value)==null?void 0:i.Dossiers)||[]).length});return(i,c)=>{const p=ut;return y(),w(Q,{title:"Envoyer les documents d'un séjour"},{default:t(()=>[e(W,null,{default:t(()=>[e(j,null,{default:t(()=>[e(b,{"align-self":"center",cols:"5"},{default:t(()=>[e(p,{camps:r.camps,label:"Séjour",modelValue:a.value,"onUpdate:modelValue":[c[0]||(c[0]=v=>a.value=v),m]},null,8,["camps","modelValue"])]),_:1}),e(b,{"align-self":"center"},{default:t(()=>{var v;return[o.value?(y(),w(Q,{key:0,subtitle:"Dossiers à contacter"},mt({default:t(()=>[e(W,null,{default:t(()=>[e(Se,{selectable:"",selected:u.value,"onUpdate:selected":c[2]||(c[2]=f=>u.value=f),"select-strategy":"leaf"},{default:t(()=>[(y(!0),H(ne,null,ve(o.value.Dossiers,f=>(y(),w(X,{title:f.Responsable,subtitle:f.Participants,value:f.Id,rounded:"",class:"my-1"},{append:t(({isSelected:P,select:C})=>[e(j,null,{default:t(()=>[e(b,null,{default:t(()=>[f.DocumentsSent?(y(),w(Ve,{key:0,color:"green",class:"mr-2"},{default:t(()=>[...c[4]||(c[4]=[V("Envoyés",-1)])]),_:1})):J("",!0)]),_:2},1024),e(b,null,{default:t(()=>[e(rl,{density:"compact","hide-details":"","model-value":P,"onUpdate:modelValue":C},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["title","subtitle","value"]))),256))]),_:1},8,["selected"])]),_:1})]),_:2},[(v=o.value.Dossiers)!=null&&v.length?{name:"append",fn:t(()=>[e(Ye,{label:"Tout sélectionner",density:"compact","hide-details":"",indeterminate:!!u.value.length&&u.value.length!=(o.value.Dossiers||[]).length,"model-value":u.value.length==(o.value.Dossiers||[]).length,"onUpdate:modelValue":c[1]||(c[1]=f=>u.value=n.value?[]:(o.value.Dossiers||[]).map(P=>P.Id))},null,8,["indeterminate","model-value"])]),key:"0"}:void 0]),1024)):J("",!0)]}),_:1})]),_:1})]),_:1}),e(oe,null,{default:t(()=>[e(se),e(E,{disabled:!a.value||!u.value.length,onClick:c[3]||(c[3]=v=>d("send",a.value,u.value))},{append:t(()=>[e(ke,null,{default:t(()=>[...c[5]||(c[5]=[V("mdi-send",-1)])]),_:1})]),default:t(()=>[c[6]||(c[6]=V(" Envoyer ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})}}}),tu=Z({__name:"SendRelancePaiementCard",props:{camps:{}},emits:["send"],setup(l,{emit:s}){const r=l,d=s,a=M(0),o=M([]);async function m(){const i=await _.EventsSendRelancePaiementPreview({idCamp:a.value});i!==void 0&&(o.value=i||[],u.value=(i||[]).map(c=>c.Id))}const u=M([]),n=h(()=>u.value.length==o.value.length);return(i,c)=>{const p=ut;return y(),w(Q,{title:"Envoyer une relance de paiement"},{default:t(()=>[e(W,null,{default:t(()=>[e(j,null,{default:t(()=>[e(b,{"align-self":"center",cols:"5"},{default:t(()=>[e(p,{camps:r.camps,label:"Séjour",modelValue:a.value,"onUpdate:modelValue":[c[0]||(c[0]=v=>a.value=v),m]},null,8,["camps","modelValue"])]),_:1}),e(b,{"align-self":"center"},{default:t(()=>[o.value?(y(),w(Q,{key:0,subtitle:"Dossiers à relancer"},mt({default:t(()=>[e(W,null,{default:t(()=>[e(Se,{selectable:"",selected:u.value,"onUpdate:selected":c[2]||(c[2]=v=>u.value=v),"select-strategy":"leaf",density:"comfortable"},{default:t(()=>[(y(!0),H(ne,null,ve(o.value,(v,f)=>(y(),w(X,{key:v.Id,title:v.Responsable,subtitle:F(da)(v.LastEventFacture)?"":`Dernière demande : ${F(Pe).time(v.LastEventFacture)}`,value:v.Id,rounded:"",class:"my-1"},{append:t(({isSelected:P,select:C})=>[e(j,null,{default:t(()=>[e(b,{"align-self":"center"},{default:t(()=>[e(Ve,{class:"mr-2",color:F(Pe).colorStatutPaiement(v.Bilan.Statut)},{default:t(()=>[V(R(v.Bilan.Recu)+" / "+R(v.Bilan.Demande),1)]),_:2},1032,["color"])]),_:2},1024),e(b,{"align-self":"center"},{default:t(()=>[e(rl,{density:"compact","hide-details":"","model-value":P,"onUpdate:modelValue":C},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["title","subtitle","value"]))),128))]),_:1},8,["selected"])]),_:1})]),_:2},[o.value.length?{name:"append",fn:t(()=>[e(Ye,{label:"Tout sélectionner",density:"compact","hide-details":"",indeterminate:!!u.value.length&&u.value.length!=o.value.length,"model-value":u.value.length==o.value.length,"onUpdate:modelValue":c[1]||(c[1]=v=>u.value=n.value?[]:o.value.map(f=>f.Id))},null,8,["indeterminate","model-value"])]),key:"0"}:void 0]),1024)):J("",!0)]),_:1})]),_:1})]),_:1}),e(oe,null,{default:t(()=>[e(se),e(E,{disabled:!a.value||!u.value.length,onClick:c[3]||(c[3]=v=>d("send",a.value,u.value))},{append:t(()=>[e(ke,null,{default:t(()=>[...c[4]||(c[4]=[V("mdi-send",-1)])]),_:1})]),default:t(()=>[c[5]||(c[5]=V(" Envoyer ",-1))]),_:1},8,["disabled"])]),_:1})]),_:1})}}}),lu={key:1,class:"text-center font-italic my-6"},au=Z({__name:"PannelDossiers",props:{initialDossier:{}},setup(l){const s=l;Be(()=>{m(),s.initialDossier!==void 0&&c(s.initialDossier)}),$e(()=>s.initialDossier,()=>{s.initialDossier!==void 0&&c(s.initialDossier)});const r=ht("detailsPannel"),d=M(null),a=M(wa()),o=M([]);async function m(){const U=await _.GetCamps();U!==void 0&&(o.value=U||[])}function u(U){var Y;d.value={length:((Y=U.Dossiers)==null?void 0:Y.length)||0,total:U.Total}}const n=ht("dossierList");function i(){var U;(U=n.value)==null||U.searchDossiers()}async function c(U){await v(U),a.value=Da(U)}const p=M(null);async function v(U){const Y=await _.DossiersLoad({id:U});Y!==void 0&&(p.value=Y)}async function f(U){v(U.Id),await _.EventsMarkMessagesSeen({idDossier:U.Id})!==void 0&&i()}async function P(){p.value!=null&&v(p.value.Dossier.Dossier.Id)}const C=M(!1);async function k(U){var ie;C.value=!1;const Y=await _.DossiersCreate({idResponsable:U});Y!==void 0&&(_.showMessage("Dossier créé avec succès."),await c(Y.Id),(ie=r.value)==null||ie.showEditDossier())}async function D(U){const Y=await _.DossiersUpdate(U);Y!==void 0&&(_.showMessage("Dossier mis à jour avec succès."),p.value!=null&&(p.value.Dossier.Dossier=U,p.value.Dossier.Responsable=Y.Responsable),i())}async function q(){if(p.value==null)return;const U=p.value.Dossier.Dossier.Id;await _.DossiersDelete({id:U})!==void 0&&(_.showMessage("Dossier supprimé avec succès."),p.value=null,i())}async function N(U){await _.DossiersMerge(U)!==void 0&&(_.showMessage("Dossier fusionné avec succès."),i(),v(U.To))}async function x(U){await _.ParticipantsCreate(U)!==void 0&&(_.showMessage("Participant ajouté avec succès."),P())}async function g(U){await _.ParticipantsUpdate(U)!==void 0&&(_.showMessage("Réglages du participant modifiés avec succès."),P())}async function te(U){await _.ParticipantsDelete({id:U})!==void 0&&(_.showMessage("Participant supprimé avec succès."),P())}async function me(U){var ye;if(p.value==null)return;const Y=((ye=p.value.Dossier.Participants)==null?void 0:ye.map(Me=>Me.Participant).filter(Me=>Me.Id!=U.Id))||[];!Y.length||(Y.forEach(Me=>{Me.Remises=U.Remises,Me.QuotientFamilial=U.QuotientFamilial,Me.IdCamp==U.IdCamp&&(Me.OptionPrix=U.OptionPrix)}),(await Promise.all(Y.map(Me=>_.ParticipantsUpdate(Me)))).includes(void 0))||(_.showMessage("Réglages des participants modifiés avec succès."),P())}async function z(U){const Y=await _.AidesCreate(U);if(Y===void 0||(_.showMessage("Aide ajoutée avec succès."),p.value==null))return;const ie=p.value.Dossier.Aides||{},ye=ie[U.IdParticipant]||{};ye[Y.Id]=Y,ie[U.IdParticipant]=ye,p.value.Dossier.Aides=ie}async function S(U){await _.AidesUpdate(U)!==void 0&&(_.showMessage("Aide modifiée avec succès."),P())}async function ee(U){await _.AidesJustificatifDelete({idAide:U})!==void 0&&(_.showMessage("Justificatif supprimé avec succès."),p.value!=null&&p.value.Dossier.AidesFiles&&delete p.value.Dossier.AidesFiles[U])}async function G(U,Y){const ie=await _.AidesJustificatifUpload(U,{idAide:Y});if(ie!==void 0&&(_.showMessage("Justificatif téléversé avec succès."),p.value!=null)){const ye=p.value.Dossier.AidesFiles||{};ye[Y]=ie,p.value.Dossier.AidesFiles=ye}}async function T(U){await _.AidesDelete({id:U})!==void 0&&(_.showMessage("Aide supprimée avec succès."),P())}async function K(){var Y;if(p.value==null)return;const U=await _.PaiementsCreate({idDossier:p.value.Dossier.Dossier.Id});U!==void 0&&(_.showMessage("Paiement créé avec succès."),P(),(Y=r.value)==null||Y.showEditPaiement(U))}async function ce(U){await _.PaiementsUpdate(U)!==void 0&&(_.showMessage("Paiement modifié avec succès."),P())}async function O(U){await _.PaiementsDelete({id:U.Id})!==void 0&&(_.showMessage("Paiement supprimé avec succès."),P())}async function $(U){p.value==null||await _.EventsSendMessage({IdDossier:p.value.Dossier.Dossier.Id,Contenu:U})===void 0||(_.showMessage("Message envoyé avec succès."),P())}async function re(U){await _.EventsDelete({id:U.Id})!==void 0&&(_.showMessage("Message supprimé avec succès."),P())}async function A(){p.value==null||await _.EventsSendFacture({idDossier:p.value.Dossier.Dossier.Id})===void 0||(_.showMessage("Demande de règlement envoyé avec succès."),P())}const I=M(!1),B=M(null);async function ae(U,Y){B.value={Current:0,Total:Y.length};const ie=await _.EventsSendDocumentsCamp({IdCamp:U,IdDossiers:Y});if(ie===void 0){B.value=null;return}await gt(ie,ye=>B.value=ye,ye=>_.onError("Envoi des documents",ye)),B.value=null,P(),_.showMessage("Documents du séjour envoyés avec succès.")}const ge=M(!1),pe=M(null);async function Ie(U,Y){pe.value={Current:0,Total:Y.length};const ie=await _.EventsSendRelancePaiement({IdDossiers:Y});if(ie===void 0){pe.value=null;return}await gt(ie,ye=>pe.value=ye,ye=>_.onError("Envoi de la relance",ye)),pe.value=null,P(),_.showMessage("Toutes les relances ont été envoyées avec succès.")}return(U,Y)=>(y(),w(j,{"no-gutters":"",class:"ma-2"},{default:t(()=>[e(b,{cols:"6"},{default:t(()=>[e(Q,{title:"Dossiers",subtitle:d.value==null?"-":`${d.value.length} affiché(s) / ${d.value.total}`},{append:t(()=>[e(E,{icon:"",size:"small",onClick:Y[0]||(Y[0]=ie=>C.value=!0)},{default:t(()=>[e(ke,{color:"green"},{default:t(()=>[...Y[7]||(Y[7]=[V("mdi-plus",-1)])]),_:1})]),_:1}),e(de,{thickness:"1",vertical:"",class:"mx-2"}),e(E,{size:"small"},{default:t(()=>[Y[8]||(Y[8]=V(" Actions ",-1)),e(De,{activator:"parent"},{default:t(()=>[e(Se,null,{default:t(()=>[e(X,{title:"Envoyer les documents",subtitle:"d'un séjour","prepend-icon":"mdi-mail",onClick:Y[1]||(Y[1]=ie=>I.value=!0)}),e(de),e(X,{title:"Envoyer une relance de paiement","prepend-icon":"mdi-invoice-send",onClick:Y[2]||(Y[2]=ie=>ge.value=!0)})]),_:1})]),_:1})]),_:1})]),default:t(()=>[e(W,null,{default:t(()=>{var ie;return[e(Zn,{camps:o.value,selected:(ie=p.value)==null?void 0:ie.Dossier.Dossier.Id,query:a.value,"onUpdate:query":Y[3]||(Y[3]=ye=>a.value=ye),onClick:f,onUpdate:u,ref_key:"dossierList",ref:n},null,8,["camps","selected","query"])]}),_:1})]),_:1},8,["subtitle"])]),_:1}),e(b,{cols:"6"},{default:t(()=>[p.value!=null?(y(),w(Kn,{key:0,dossier:p.value,camps:o.value,onUpdateDossier:D,onDeleteDossier:q,onMergeDossier:N,onCreateParticipant:x,onUpdateParticipant:g,onDeleteParticipant:te,onExpandParticipant:me,onCreateAide:z,onDeleteAide:T,onUpdateAide:S,onDeleteFileAide:ee,onUploadFileAide:G,onCreatePaiement:K,onUpdatePaiement:ce,onDeletePaiement:O,onSendMessage:$,onDeleteMessage:re,onSendFacture:A,ref_key:"detailsPannel",ref:r},null,8,["dossier","camps"])):(y(),H("div",lu," Sélectionner un dossier... "))]),_:1}),e(le,{modelValue:C.value,"onUpdate:modelValue":Y[4]||(Y[4]=ie=>C.value=ie),"max-width":"400px"},{default:t(()=>[e(Xn,{onCreate:k})]),_:1},8,["modelValue"]),e(le,{modelValue:I.value,"onUpdate:modelValue":Y[5]||(Y[5]=ie=>I.value=ie),"max-width":"1000px"},{default:t(()=>[e(eu,{camps:o.value,onSend:ae},null,8,["camps"])]),_:1},8,["modelValue"]),e(le,{modelValue:ge.value,"onUpdate:modelValue":Y[6]||(Y[6]=ie=>ge.value=ie),"max-width":"1000px"},{default:t(()=>[e(tu,{camps:o.value,onSend:Ie},null,8,["camps"])]),_:1},8,["modelValue"]),e(le,{"model-value":B.value!=null,"max-width":"400px",persistent:""},{default:t(()=>[B.value?(y(),w(bt,{key:0,title:"Envoi des documents en cours",current:B.value.Current,total:B.value.Total},null,8,["current","total"])):J("",!0)]),_:1},8,["model-value"]),e(le,{"model-value":pe.value!=null,"max-width":"400px",persistent:""},{default:t(()=>[pe.value?(y(),w(bt,{key:0,title:"Envoi des relances en cours",current:pe.value.Current,total:pe.value.Total},null,8,["current","total"])):J("",!0)]),_:1},8,["model-value"])]),_:1}))}}),nu=Z({__name:"inscriptions",setup(l){const s=nt(),r=h(()=>du(s.currentRoute.value.query)),d=h(()=>r.value.tab||"insc"),a=h(()=>r.value.idDossier);function o(m){const u=s.currentRoute.value;s.push({path:u.path,query:{tab:m}})}return(m,u)=>(y(),H(ne,null,[e(vt,{title:"Suivi des inscriptions"},{default:t(()=>[e(Ma,{"model-value":d.value,"onUpdate:modelValue":u[0]||(u[0]=n=>o(n))},{default:t(()=>[e(Nt,{value:"insc"},{default:t(()=>[...u[2]||(u[2]=[V("Nouvelles inscriptions",-1)])]),_:1}),e(Nt,{value:"doss"},{default:t(()=>[...u[3]||(u[3]=[V("Suivi des dossiers",-1)])]),_:1})]),_:1},8,["model-value"])]),_:1}),e(Ia,{"model-value":d.value},{default:t(()=>[e(Ot,{value:"insc"},{default:t(()=>[e(fn,{onGoTo:F(Vt),onEmpty:u[1]||(u[1]=n=>F(Vt)())},null,8,["onGoTo"])]),_:1}),e(Ot,{value:"doss"},{default:t(()=>[e(au,{"initial-dossier":a.value},null,8,["initial-dossier"])]),_:1})]),_:1},8,["model-value"])],64))}}),uu=Z({__name:"PersonneEdit",props:{personne:{}},emits:["save"],setup(l,{emit:s}){const r=l,d=s,a=M(Ce(r.personne)),o=h(()=>!!(a.value.Nom&&a.value.Prenom));return(m,u)=>{const n=ha,i=Ra;return y(),w(Q,{title:"Editer le profil"},{default:t(()=>[e(W,null,{default:t(()=>[e(dl,null,{default:t(()=>[e(j,null,{default:t(()=>[e(b,null,{default:t(()=>[e(fe,{autofocus:"","hide-details":"",label:"Nom",density:"compact",variant:"outlined",modelValue:a.value.Nom,"onUpdate:modelValue":u[0]||(u[0]=c=>a.value.Nom=c)},null,8,["modelValue"])]),_:1}),e(b,null,{default:t(()=>[e(fe,{"hide-details":"",label:"Prénom",density:"compact",variant:"outlined",modelValue:a.value.Prenom,"onUpdate:modelValue":u[1]||(u[1]=c=>a.value.Prenom=c)},null,8,["modelValue"])]),_:1}),e(b,null,{default:t(()=>[e(n,{modelValue:a.value.Sexe,"onUpdate:modelValue":u[2]||(u[2]=c=>a.value.Sexe=c)},null,8,["modelValue"])]),_:1}),e(b,null,{default:t(()=>[e(i,{modelValue:a.value.DateNaissance,"onUpdate:modelValue":u[3]||(u[3]=c=>a.value.DateNaissance=c)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(oe,null,{default:t(()=>[e(se),e(E,{disabled:!o.value,onClick:u[4]||(u[4]=c=>d("save",a.value))},{default:t(()=>[...u[5]||(u[5]=[V("Enregistrer",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})}}}),iu=Z({__name:"annuaire",setup(l){const s=nt(),r=h(()=>mu(s.currentRoute.value.query)),d=h(()=>r.value.idPersonne);$e(()=>d.value,()=>d.value!==void 0?c(d.value):null,{immediate:!0});const a=M([]),o=M("");async function m(){if(!o.value)return;const p=await _.PersonnesGet({search:o.value});p!==void 0&&(a.value=p||[])}async function u(){const p=await _.PersonnesCreate();p!==void 0&&(_.showMessage("Profil créé avec succès."),a.value.push(p),Ke(p.Id))}const n=M(null);async function i(p){n.value=null;const v=await _.PersonnesUpdate(p);if(v===void 0)return;_.showMessage("Profil modifié avec succès."),Ke();const f=a.value.findIndex(P=>P.Id==p.Id);a.value[f]=v}async function c(p){const v=await _.PersonnesLoad({id:p});v!==void 0&&(n.value=v)}return(p,v)=>{const f=il;return y(),H(ne,null,[e(vt,{title:"Annuaire : personnes et organismes"},{default:t(()=>[...v[2]||(v[2]=[V(" TODO ",-1)])]),_:1}),e(Q,{class:"ma-2"},{append:t(()=>[e(E,{color:"green",onClick:u},{default:t(()=>[...v[3]||(v[3]=[V("Créer un nouveau profil",-1)])]),_:1})]),default:t(()=>[e(W,null,{default:t(()=>[e(j,null,{default:t(()=>[e(b,null,{default:t(()=>[e(f,{"prepend-inner-icon":"mdi-magnify",label:"Recherche",modelValue:o.value,"onUpdate:modelValue":[v[0]||(v[0]=P=>o.value=P),m]},null,8,["modelValue"]),e(Se,null,{default:t(()=>[(y(!0),H(ne,null,ve(a.value,P=>(y(),w(X,{title:P.Label,subtitle:F(Pe).dateNaissance(P.DateNaissance),"prepend-icon":F(Pe).sexeIcon(P.Sexe),onClick:C=>F(Ke)(P.Id)},mt({_:2},[P.IsTemp?{name:"append",fn:t(()=>[e(Ve,{"prepend-icon":"mdi-alert",color:"warning"},{default:t(()=>[...v[4]||(v[4]=[V(" Ce profil est temporaire et devrait être identifié. ",-1)])]),_:1})]),key:"0"}:void 0]),1032,["title","subtitle","prepend-icon","onClick"]))),256))]),_:1})]),_:1}),e(b)]),_:1})]),_:1}),n.value!=null?(y(),w(le,{key:0,"model-value":n.value!=null,"onUpdate:modelValue":v[1]||(v[1]=P=>{n.value=null,F(Ke)(void 0)}),"max-width":"800px"},{default:t(()=>[e(uu,{personne:n.value,onSave:i},null,8,["personne"])]),_:1},8,["model-value"])):J("",!0)]),_:1})],64)}}}),su=[{path:"/",component:Ta},{path:"/camps",component:cn},{path:"/inscriptions",component:nu},{path:"/annuaire",component:iu}],ou="/backoffice",Ge=ma({history:ca(ou),routes:su});Ge.onError((l,s)=>{var r,d;(d=(r=l==null?void 0:l.message)==null?void 0:r.includes)!=null&&d.call(r,"Failed to fetch dynamically imported module")?localStorage.getItem("vuetify:dynamic-reload")?console.error("Dynamic import error, reloading page did not fix it",l):(console.log("Reloading page to fix dynamic import error"),localStorage.setItem("vuetify:dynamic-reload","true"),location.assign(s.fullPath)):console.error(l)});Ge.isReady().then(()=>{localStorage.removeItem("vuetify:dynamic-reload")});function dt(l){return l?Number(l):void 0}function ru(l){const s=l;return{idCamp:dt(s.idCamp),idParticipant:dt(s.idParticipant)}}function Pt(l){Ge.push({path:"/camps",query:{idCamp:l.IdCamp,idParticipant:l.Id}})}function du(l){const s=l;return{tab:s.tab,idDossier:dt(s.idDossier)}}function Vt(l){Ge.push({path:"/inscriptions",query:{tab:"doss",idDossier:l}})}function mu(l){return{idPersonne:dt(l.idPersonne)}}function Ke(l){Ge.push({path:"/annuaire",query:{idPersonne:l}})}const cu=["innerHTML"],vu=Z({__name:"App",setup(l){const s=yt({text:"",color:"secondary",action:void 0,timeout:4e3}),r=M(""),d=M("");return _.onError=(o,m)=>{r.value=o,d.value=m},_.showMessage=(o,m,u)=>{s.text=o,s.color=m||"success",s.action=u,s.timeout=1e4,s.timeout=4e3},nt().beforeEach(async(o,m)=>{if(!_.hasToken()&&o.path!=="/")return{path:"/"}}),(o,m)=>{const u=va("router-view");return y(),w(fa,null,{default:t(()=>[e(pa,null,{default:t(()=>[e(u),e(Rt,{style:{"z-index":"10000"},app:"","model-value":s.text!="","onUpdate:modelValue":m[1]||(m[1]=n=>s.text=""),timeout:s.timeout,color:s.color,location:"bottom left","close-on-content-click":""},{default:t(()=>[V(R(s.text)+" ",1),s.action?(y(),w(E,{key:0,onClick:m[0]||(m[0]=n=>s.action.action()),class:"ml-2"},{default:t(()=>[V(R(s.action.title),1)]),_:1})):J("",!0)]),_:1},8,["model-value","timeout","color"]),e(Rt,{app:"","model-value":r.value!="","onUpdate:modelValue":m[2]||(m[2]=n=>r.value=""),timeout:4e3,color:"red"},{default:t(()=>[L("b",null,R(r.value),1),L("div",{innerHTML:d.value},null,8,cu)]),_:1},8,["model-value"])]),_:1})]),_:1})}}}),bl=ya(vu);bl.use(ga).use(Ge);bl.mount("#app");
