import{v as ee,x as M,J as te,c4 as ze,cg as Re,N as L,k as T,c as f,T as w,z as ne,cK as W,b as c,ci as le,P as $e,cL as Ne,y as Le,K as ae,cM as J,L as Me,O as je,ch as Oe,j as m,F as $,B as _e,ay as ie,cN as Ee,d as oe,a$ as Ke,s as re,o as se,w as p,_ as B,a2 as H,e as P,t as Ue,n as q,bl as Q,i as Ge}from"./VSnackbar-BIrRpgjn.js";import{u as We,r as X,I as Y,J as Je,v as He,K as qe,k as Qe,h as Xe,b as Z,c as Ye,V as Ze,e as et,f as tt}from"./VTextarea-ZoY5w49v.js";const nt=M({id:String,interactive:Boolean,text:String,...$e(Ne({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:null}),["absolute","persistent"])},"VTooltip"),ft=ee()({name:"VTooltip",props:nt(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:l}=i;const o=te(e,"modelValue"),{scopeId:a}=ze(),n=Re(),u=L(()=>e.id||`v-tooltip-${n}`),r=T(),v=f(()=>e.location.split(" ").length>1?e.location:e.location+" center"),I=f(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),y=L(()=>e.transition!=null?e.transition:o.value?"scale-transition":"fade-transition"),g=f(()=>w({"aria-describedby":u.value},e.activatorProps));return ne(()=>{const k=W.filterProps(e);return c(W,w({ref:r,class:["v-tooltip",{"v-tooltip--interactive":e.interactive},e.class],style:e.style,id:u.value},k,{modelValue:o.value,"onUpdate:modelValue":h=>o.value=h,transition:y.value,absolute:!0,location:v.value,origin:I.value,persistent:!0,role:"tooltip",activatorProps:g.value,_disableGlobalStack:!0},a),{activator:l.activator,default:function(){for(var h=arguments.length,C=new Array(h),F=0;F<h;F++)C[F]=arguments[F];return l.default?.(...C)??e.text}})}),le({},r)}});function lt(){function e(l){return[...l.dataTransfer?.items??[]].filter(a=>a.kind==="file").map(a=>a.webkitGetAsEntry()).filter(Boolean).length>0||[...l.dataTransfer?.files??[]].length>0}async function i(l){const o=[],a=[...l.dataTransfer?.items??[]].filter(n=>n.kind==="file").map(n=>n.webkitGetAsEntry()).filter(Boolean);if(a.length)for(const n of a){const u=await ue(n,ce(".",n));o.push(...u.map(r=>r.file))}else o.push(...l.dataTransfer?.files??[]);return o}return{handleDrop:i,hasFilesOrFolders:e}}function ue(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new Promise((l,o)=>{e.isFile?e.file(n=>l([{file:n,path:i}]),o):e.isDirectory&&e.createReader().readEntries(async n=>{const u=[];for(const r of n)u.push(...await ue(r,ce(i,r)));l(u)})})}function ce(e,i){return i.isDirectory?`${e}/${i.name}`:e}const at=M({filterByType:String},"file-accept");function it(e){const i=f(()=>e.filterByType?ot(e.filterByType):null);function l(o){if(i.value){const a=o.filter(i.value);return{accepted:a,rejected:o.filter(n=>!a.includes(n))}}return{accepted:o,rejected:[]}}return{filterAccepted:l}}function ot(e){const i=e.split(",").map(n=>n.trim().toLowerCase()),l=i.filter(n=>n.startsWith(".")),o=i.filter(n=>n.endsWith("/*")),a=i.filter(n=>!l.includes(n)&&!o.includes(n));return n=>{const u=n.name.split(".").at(-1)?.toLowerCase()??"",r=n.type.split("/").at(0)?.toLowerCase()??"";return a.includes(n.type)||l.includes(`.${u}`)||o.includes(`${r}/*`)}}const rt=M({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},truncateLength:{type:[Number,String],default:22},...He({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>ae(e).every(i=>i!=null&&typeof i=="object")},...at(),...Je({clearable:!0})},"VFileInput"),st=ee()({name:"VFileInput",inheritAttrs:!1,props:rt(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0,rejected:e=>!0},setup(e,i){let{attrs:l,emit:o,slots:a}=i;const{t:n}=Le(),{filterAccepted:u}=it(e),r=te(e,"modelValue",e.modelValue,t=>ae(t),t=>!e.multiple&&Array.isArray(t)?t[0]:t),{isFocused:v,focus:I,blur:y}=We(e),g=f(()=>typeof e.showSize!="boolean"?e.showSize:void 0),k=f(()=>(r.value??[]).reduce((t,s)=>{let{size:b=0}=s;return t+b},0)),h=f(()=>J(k.value,g.value)),C=f(()=>(r.value??[]).map(t=>{const{name:s="",size:b=0}=t,V=he(s);return e.showSize?`${V} (${J(b,g.value)})`:V})),F=f(()=>{const t=r.value?.length??0;return e.showSize?n(e.counterSizeString,t,h.value):n(e.counterString,t)}),j=T(),O=T(),d=T(),de=L(()=>v.value||e.active),_=f(()=>["plain","underlined"].includes(e.variant)),D=Me(!1),{handleDrop:fe,hasFilesOrFolders:ve}=lt();function x(){d.value!==document.activeElement&&d.value?.focus(),v.value||I()}function pe(t){d.value?.click()}function me(t){o("mousedown:control",t)}function ye(t){d.value?.click(),o("click:control",t)}function ge(t){t.stopPropagation(),x(),ie(()=>{r.value=[],Ee(e["onClick:clear"],t)})}function he(t){if(t.length<Number(e.truncateLength))return t;const s=Math.floor((Number(e.truncateLength)-1)/2);return`${t.slice(0,s)}…${t.slice(t.length-s)}`}function be(t){t.preventDefault(),t.stopImmediatePropagation(),D.value=!0}function Ve(t){t.preventDefault(),D.value=!1}async function ke(t){if(t.preventDefault(),t.stopImmediatePropagation(),D.value=!1,!d.value||!ve(t))return;const s=await fe(t);E(s)}function Ce(t){if(!(!t.target||t.repack))if(e.filterByType)E([...t.target.files]);else{const s=t.target;r.value=[...s.files??[]]}}function E(t){const s=new DataTransfer,{accepted:b,rejected:V}=u(t);V.length&&o("rejected",V);for(const z of b)s.items.add(z);d.value.files=s.files,r.value=[...s.files];const A=new Event("change",{bubbles:!0});A.repack=!0,d.value.dispatchEvent(A)}return je(r,t=>{(!Array.isArray(t)||!t.length)&&d.value&&(d.value.value="")}),ne(()=>{const t=!!(a.counter||e.counter),s=!!(t||a.details),[b,V]=Oe(l),{modelValue:A,...z}=X.filterProps(e),Fe={...Y.filterProps(e),"onClick:clear":ge},we=l.webkitdirectory!==void 0&&l.webkitdirectory!==!1,Ie=l.accept?String(l.accept):void 0,Se=we?void 0:e.filterByType??Ie;return c(X,w({ref:j,modelValue:e.multiple?r.value:r.value[0],class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--dragging":D.value,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":_.value},e.class],style:e.style,"onClick:prepend":pe},b,z,{centerAffix:!_.value,focused:v.value}),{...a,default:R=>{let{id:Te,isDisabled:K,isDirty:U,isReadonly:G,isValid:De,hasDetails:Be}=R;return c(Y,w({ref:O,prependIcon:e.prependIcon,onMousedown:me,onClick:ye,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},Fe,{id:Te.value,active:de.value||U.value,dirty:U.value||e.dirty,disabled:K.value,focused:v.value,details:Be.value,error:De.value===!1,onDragover:be,onDrop:ke}),{...a,default:Pe=>{let{props:{class:xe,...Ae}}=Pe;return m($,null,[m("input",w({ref:d,type:"file",accept:Se,readonly:G.value,disabled:K.value,multiple:e.multiple,name:e.name,onClick:S=>{S.stopPropagation(),G.value&&S.preventDefault(),x()},onChange:Ce,onDragleave:Ve,onFocus:x,onBlur:y},Ae,V),null),m("div",{class:_e(xe)},[!!r.value?.length&&!e.hideInput&&(a.selection?a.selection({fileNames:C.value,totalBytes:k.value,totalBytesReadable:h.value}):e.chips?C.value.map(S=>c(Qe,{key:S,size:"small",text:S},null)):C.value.join(", "))])])}})},details:s?R=>m($,null,[a.details?.(R),t&&m($,null,[m("span",null,null),c(qe,{active:!!r.value?.length,value:F.value,disabled:e.disabled},a.counter)])]):void 0})}),le({},j,O,d)}}),N=5e6,vt=oe({__name:"FileInput",props:{label:{}},emits:["update"],setup(e,{expose:i,emit:l}){const o=e,a=l,n=T(null);function u(y){return y?y.size<=N||`Taille maximale : ${N/1e6}MB`:!0}function r(){n.value&&n.value.size>N||a("update",n.value)}i({openDialog:I});const v=Ke("input");function I(){ie(()=>v.value?.click())}return(y,g)=>(se(),re(st,{label:o.label,density:"comfortable",accept:".jpg,.jpeg,.png,.pdf",multiple:!1,modelValue:n.value,"onUpdate:modelValue":[g[0]||(g[0]=k=>n.value=k),r],rules:[u],"show-size":"",ref_key:"input",ref:v},null,8,["label","modelValue","rules"]))}}),ut={class:"text-right ml-2"},pt=oe({__name:"FileCard",props:{file:{},readonly:{type:Boolean}},emits:["delete"],setup(e,{emit:i}){const l=e,o=i;return(a,n)=>(se(),re(Xe,null,{activator:p(({props:u})=>[c(Z,w({class:"my-2"},u),{default:p(()=>[c(Ge,{cover:"",src:B(Q).LoadMiniature(l.file.Key),width:"56px"},null,8,["src"])]),_:1},16)]),default:p(()=>[c(Z,null,{default:p(()=>[c(Ye,{class:"px-0"},{default:p(()=>[c(Ze,{"min-width":"400",title:l.file.NomClient,subtitle:B(H).size(l.file.Taille)},{append:p(()=>[m("div",ut,[n[1]||(n[1]=P(" téléversé le ",-1)),n[2]||(n[2]=m("br",null,null,-1)),P(" "+Ue(B(H).time(l.file.Uploaded)),1)])]),_:1},8,["title","subtitle"])]),_:1}),c(et,null,{default:p(()=>[c(q,{onClick:n[0]||(n[0]=u=>o("delete")),color:"red"},{default:p(()=>[...n[3]||(n[3]=[P(" Supprimer ",-1)])]),_:1}),c(tt),c(q,{href:B(Q).LoadDocument(l.file.Key)},{default:p(()=>[...n[4]||(n[4]=[P(" Télécharger ",-1)])]),_:1},8,["href"])]),_:1})]),_:1})]),_:1}))}});export{ft as V,pt as _,vt as a};
