import{cl as z,bJ as Ne,bL as je,d as W,r as D,f as g,o as r,V as qe,w as e,b as t,h as He,i as h,j as f,k as Oe,e as o,t as k,l as Be,m as U,a as F,F as x,_ as O,Y as S,a2 as ie,ax as Ce,n as q,a1 as N,c as B,O as Se,aJ as ze,aI as Je,g as E,Q as de,$ as ee,bq as _e,br as ye,A as fe,ac as be,au as K,as as De,a6 as Ke,U as Ve,aC as Ge,q as We,s as Qe,S as Xe,ae as Ze,C as Ye,bh as et,L as tt,G as lt,cd as at,u as nt,v as st,aj as ot,ak as ut,al as it,ao as rt,ap as dt,I as he,W as mt,X as pt,aQ as ct,aP as ke,bC as ft,aG as Pe,aE as vt,p as gt,aT as bt,aU as we,aV as Vt,aW as _t,aX as yt}from"./VSnackbar--Whjvjaq.js";import{_ as kt,a as Ct,V as St,b as Ut}from"./EventSwitch.vue_vue_type_script_setup_true_lang-CKZMyUU7.js";import{h as ht,_ as Pt,a as Fe,d as Ie,b as xe,c as Te,V as ce,f as Ae}from"./VTabs-D_kyzDPx.js";import{b as M,c as w,k as Z,d as ue,e as oe,f as ve,l as Me,V as H,h as J,g as ge,a as Re,i as X,m as re,j as se,n as Le}from"./VTextarea-CO0IE_yp.js";import{a as wt,V as At}from"./FileCard.vue_vue_type_script_setup_true_lang-C4k0psNR.js";import{_ as Ee}from"./FilesDemande.vue_vue_type_script_setup_true_lang-YNKxNScS.js";import{_ as Mt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VWindowItem-DGtVTXXk.js";import"./FilesRow.vue_vue_type_script_setup_true_lang-B4aTo-0Z.js";const me={CampDocs:"CampDocs",Facture:"Facture",PlaceLiberee:"PlaceLiberee",Sondage:"Sondage",Validation:"Validation"},pe={Complet:3,EnCours:2,NonCommence:1};pe.Complet+"",pe.EnCours+"",pe.NonCommence+"";const G={AStatuer:0,Refuse:1,AttenteProfilInvalide:2,AttenteCampComplet:3,EnAttenteReponse:4,Inscrit:5},Rt={[G.AStatuer]:"A statuer",[G.Refuse]:"Refusé définitivement",[G.AttenteProfilInvalide]:"Profil limite",[G.AttenteCampComplet]:"Camp complet",[G.EnAttenteReponse]:"En attente de réponse",[G.Inscrit]:"Inscrit"},Lt={Euros:0},Q={Cheque:0,EnLigne:1,Virement:2,Especes:3,Ancv:4,Helloasso:5},Dt={[Q.Cheque]:"Chèque",[Q.EnLigne]:"Carte bancaire (en ligne)",[Q.Virement]:"Virement",[Q.Especes]:"Espèces",[Q.Ancv]:"ANCV",[Q.Helloasso]:"Helloasso"},Ft={Espaceperso:0},ae={NoFiche:0,Outdated:1,UpToDate:2};ae.NoFiche+"",ae.Outdated+"",ae.UpToDate+"";class It{constructor(s,a){this.baseURL=s,this.authToken=a}getHeaders(){return{Authorization:"Bearer "+this.authToken}}async Load(s){const a=this.baseURL+"/api/v1/espaceperso";this.startRequest();try{return(await z.get(a,{headers:this.getHeaders(),params:{token:s.token}})).data}catch(d){this.handleError(d)}}async SendMessage(s){const a=this.baseURL+"/api/v1/espaceperso/message";this.startRequest();try{return(await z.post(a,s,{headers:this.getHeaders()})).data}catch(d){this.handleError(d)}}async UpdateParticipants(s){const a=this.baseURL+"/api/v1/espaceperso/participants";this.startRequest();try{return await z.post(a,s,{headers:this.getHeaders()}),!0}catch(d){this.handleError(d)}}async CreateAide(s,a,d){const n=this.baseURL+"/api/v1/espaceperso/aide";this.startRequest();try{const v=new FormData;return v.append("document",s,s.name),v.append("aide",JSON.stringify(a)),await z.post(n,v,{headers:this.getHeaders(),params:{token:d.token}}),!0}catch(v){this.handleError(v)}}async GetStructureaides(){const s=this.baseURL+"/api/v1/espaceperso/structureaides";this.startRequest();try{return(await z.get(s,{headers:this.getHeaders()})).data}catch(a){this.handleError(a)}}async LoadJoomeo(s){const a=this.baseURL+"/api/v1/espaceperso/joomeo";this.startRequest();try{return(await z.get(a,{headers:this.getHeaders(),params:{token:s.token}})).data}catch(d){this.handleError(d)}}async LoadFichesanitaires(s){const a=this.baseURL+"/api/v1/espaceperso/fichesanitaires";this.startRequest();try{return(await z.get(a,{headers:this.getHeaders(),params:{token:s.token}})).data}catch(d){this.handleError(d)}}async UpdateFichesanitaire(s){const a=this.baseURL+"/api/v1/espaceperso/fichesanitaires";this.startRequest();try{return await z.post(a,s,{headers:this.getHeaders()}),!0}catch(d){this.handleError(d)}}async UploadVaccin(s,a){const d=this.baseURL+"/api/v1/espaceperso/fichesanitaires";this.startRequest();try{const n=new FormData;return n.append("file",s,s.name),(await z.put(d,n,{headers:this.getHeaders(),params:{token:a.token,idPersonne:String(a.idPersonne)}})).data}catch(n){this.handleError(n)}}async DeleteVaccin(s){const a=this.baseURL+"/api/v1/espaceperso/fichesanitaires";this.startRequest();try{return await z.delete(a,{headers:this.getHeaders(),params:{key:s.key}}),!0}catch(d){this.handleError(d)}}async TransfertFicheSanitaire(s){const a=this.baseURL+"/api/v1/espaceperso/fichesanitaires/transfert";this.startRequest();try{return await z.put(a,null,{headers:this.getHeaders(),params:{token:s.token,idPersonne:String(s.idPersonne)}}),!0}catch(d){this.handleError(d)}}async AcceptePlaceLiberee(s){const a=this.baseURL+"/api/v1/espaceperso/events/accept-place-liberee";this.startRequest();try{return await z.post(a,null,{headers:this.getHeaders(),params:{token:s.token,idEvent:String(s.idEvent)}}),!0}catch(d){this.handleError(d)}}async LoadSondages(s){const a=this.baseURL+"/api/v1/espaceperso/sondages";this.startRequest();try{return(await z.get(a,{headers:this.getHeaders(),params:{token:s.token}})).data}catch(d){this.handleError(d)}}async UpdateSondages(s){const a=this.baseURL+"/api/v1/espaceperso/sondages";this.startRequest();try{return await z.post(a,s,{headers:this.getHeaders()}),!0}catch(d){this.handleError(d)}}async LoadDocuments(s){const a=this.baseURL+"/api/v1/espaceperso/documents";this.startRequest();try{return(await z.get(a,{headers:this.getHeaders(),params:{token:s.token}})).data}catch(d){this.handleError(d)}}async UploadDocument(s,a){const d=this.baseURL+"/api/v1/espaceperso/documents";this.startRequest();try{const n=new FormData;return n.append("file",s,s.name),(await z.post(d,n,{headers:this.getHeaders(),params:{token:a.token,idDemande:String(a.idDemande),idPersonne:String(a.idPersonne)}})).data}catch(n){this.handleError(n)}}async DeleteDocument(s){const a=this.baseURL+"/api/v1/espaceperso/documents";this.startRequest();try{return await z.delete(a,{headers:this.getHeaders(),params:{key:s.key}}),!0}catch(d){this.handleError(d)}}}class xt extends It{constructor(s,a,d){super(d,""),this.onError=s,this.showMessage=a}handleError(s){const{kind:a,messageHtml:d}=je(s);this.onError(a,d)}startRequest(){}}const A=new xt((c,s)=>{},(c,s)=>{},Ne()),Tt=W({__name:"NavBar",props:{title:{},hideMenu:{type:Boolean}},setup(c){const s=c,a="/static/repere/logo.png";return D(!1),(d,n)=>(r(),g(qe,{rounded:"",elevation:"4",color:"secondary"},{append:e(()=>[Be(d.$slots,"default"),n[0]||(n[0]=U("div",{class:"mr-2"},null,-1))]),default:e(()=>[t(He,null,{default:e(()=>[t(h,null,{default:e(()=>[t(f,{"align-self":"center",cols:"auto"},{default:e(()=>[t(Oe,{width:"60",src:a})]),_:1}),t(f,{"align-self":"center"},{default:e(()=>[o(k(s.title),1)]),_:1})]),_:1})]),_:1})]),_:3}))}}),Et=W({__name:"ParticipantsEditCard",props:{participants:{}},emits:["save"],setup(c,{emit:s}){const a=c,d=s,n=D(a.participants.map(v=>v.Participant));return(v,V)=>{const m=ht;return r(),g(M,{title:"Modifier les options"},{default:e(()=>[t(w,null,{default:e(()=>[t(h,null,{default:e(()=>[(r(!0),F(x,null,O(a.participants,(_,b)=>(r(),g(f,{cols:"6"},{default:e(()=>[t(M,{title:S(Ce).label(_.Personne),subtitle:S(ie).label(_.Camp)},{default:e(()=>[t(w,null,{default:e(()=>[t(h,null,{default:e(()=>[t(f,null,{default:e(()=>[_.Camp.Navette.Actif?(r(),g(m,{key:0,modelValue:n.value[b].Navette,"onUpdate:modelValue":l=>n.value[b].Navette=l,hint:_.Camp.Navette.Commentaire},null,8,["modelValue","onUpdate:modelValue","hint"])):(r(),g(Z,{key:1},{default:e(()=>V[1]||(V[1]=[o("Ce séjour ne propose pas de navette.")])),_:1,__:[1]}))]),_:2},1024)]),_:2},1024),t(h,null,{default:e(()=>[t(f,null,{default:e(()=>[t(ue,{modelValue:n.value[b].Commentaire,"onUpdate:modelValue":l=>n.value[b].Commentaire=l,label:"Information libre",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),t(h,null,{default:e(()=>[t(f,null,{default:e(()=>V[2]||(V[2]=[o(" TODO: option prix ")])),_:1,__:[2]})]),_:1})]),_:2},1024)]),_:2},1032,["title","subtitle"])]),_:2},1024))),256))]),_:1})]),_:1}),t(oe,null,{default:e(()=>[t(ve),t(q,{onClick:V[0]||(V[0]=_=>d("save",n.value)),color:"green"},{prepend:e(()=>[t(N,null,{default:e(()=>V[3]||(V[3]=[o("mdi-content-save-cog")])),_:1,__:[3]})]),default:e(()=>[V[4]||(V[4]=o(" Enregistrer"))]),_:1,__:[4]})]),_:1})]),_:1})}}}),$t=W({__name:"AideCard",props:{dossier:{},structureaides:{}},emits:["save"],setup(c,{emit:s}){const a=c,d=s,n=D({Id:0,IdStructureaide:0,IdParticipant:(a.dossier.Participants||[])[0].Participant.Id,Valide:!1,Valeur:{Currency:Lt.Euros,Cent:0},ParJour:!1,NbJoursMax:0}),v=D(null),V=B(()=>n.value?v.value!=null&&n.value.IdParticipant!=0&&n.value.IdStructureaide!=0&&n.value.Valeur.Cent!=0:!1),m=B(()=>(a.dossier.Participants||[]).map(b=>({title:Ce.label(b.Personne),subtitle:ie.label(b.Camp),value:b.Participant.Id}))),_=B(()=>Object.values(a.structureaides||{}).map(b=>({value:b.Id,title:b.Nom})));return(b,l)=>{const p=kt,u=Pt,P=wt;return r(),g(M,{title:"Ajouter une aide extérieure",subtitle:"Cette aide sera vérifiée par le centre."},{default:e(()=>[t(w,null,{default:e(()=>[t(h,null,{default:e(()=>[t(f,null,{default:e(()=>[t(Me,{variant:"outlined",density:"comfortable",label:"Participant concerné",modelValue:n.value.IdParticipant,"onUpdate:modelValue":l[0]||(l[0]=C=>n.value.IdParticipant=C),items:m.value},{item:e(({item:C,props:R})=>[t(H,Se(R,{title:C.raw.title,subtitle:C.raw.subtitle}),null,16,["title","subtitle"])]),_:1},8,["modelValue","items"])]),_:1})]),_:1}),t(h,null,{default:e(()=>[t(f,null,{default:e(()=>[t(Me,{variant:"outlined",density:"comfortable",label:"Structure","model-value":S(Je)(n.value.IdStructureaide),"onUpdate:modelValue":l[1]||(l[1]=C=>n.value.IdStructureaide=S(ze)(C)),items:_.value,"no-data-text":"Aucune structure n'est disponible."},null,8,["model-value","items"])]),_:1})]),_:1}),t(h,null,{default:e(()=>[t(f,{"align-self":"center"},{default:e(()=>[t(p,{label:"Valeur",modelValue:n.value.Valeur,"onUpdate:modelValue":l[2]||(l[2]=C=>n.value.Valeur=C),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),t(h,null,{default:e(()=>[t(f,{"align-self":"center"},{default:e(()=>[t(J,{modelValue:n.value.ParJour,"onUpdate:modelValue":l[3]||(l[3]=C=>n.value.ParJour=C),label:"Montant par jour","hide-details":""},null,8,["modelValue"])]),_:1}),t(f,{"align-self":"center"},{default:e(()=>[n.value.ParJour?(r(),g(u,{key:0,label:"Limite sur le nombre de jours",modelValue:n.value.NbJoursMax,"onUpdate:modelValue":l[4]||(l[4]=C=>n.value.NbJoursMax=C),min:0,hint:"0 pour ne pas limiter","persistent-hint":""},null,8,["modelValue"])):E("",!0)]),_:1})]),_:1}),t(h,null,{default:e(()=>[t(f,null,{default:e(()=>[t(P,{label:"Pièce justificative",onUpdate:l[5]||(l[5]=C=>v.value=C)})]),_:1})]),_:1})]),_:1}),t(oe,null,{default:e(()=>[t(ve),t(q,{color:"green",disabled:!V.value,onClick:l[6]||(l[6]=C=>d("save",n.value,v.value))},{default:e(()=>l[7]||(l[7]=[o(" Ajouter pour vérification ")])),_:1,__:[7]},8,["disabled"])]),_:1})]),_:1})}}}),Nt=W({__name:"FinancesCard",props:{token:{},dossier:{},isPaiementOpen:{type:Boolean}},emits:["refresh","showReglement"],setup(c,{emit:s}){const a=c,d=s;de(b);const n=D(!1);async function v(l,p){n.value=!1,await A.CreateAide(p,l,{token:a.token})!==void 0&&(A.showMessage("Aide ajoutée avec succès (validation à venir). Merci !"),d("refresh"))}const V=B(()=>{const l=[];return Object.values(a.dossier.Aides||{}).forEach(p=>l.push(...Object.values(p||{}))),l}),m=B(()=>V.value.filter(l=>!l.Valide).length),_=D({});async function b(){const l=await A.GetStructureaides();l!==void 0&&(_.value=l||{})}return(l,p)=>(r(),g(M,{subtitle:"Réglement",class:"mt-2"},{append:e(()=>{var u;return[t(q,{size:"small",class:"mr-1",onClick:p[0]||(p[0]=P=>d("showReglement")),disabled:!a.isPaiementOpen||a.dossier.Bilan.Statut==S(pe).Complet},{prepend:e(()=>[t(N,null,{default:e(()=>p[3]||(p[3]=[o("mdi-cash-plus")])),_:1,__:[3]})]),default:e(()=>[p[4]||(p[4]=o(" Régler "))]),_:1,__:[4]},8,["disabled"]),t(q,{size:"small",disabled:!((u=a.dossier.Participants)!=null&&u.length),onClick:p[1]||(p[1]=P=>n.value=!0)},{prepend:e(()=>[t(N,{color:"green"},{default:e(()=>p[5]||(p[5]=[o("mdi-plus")])),_:1,__:[5]})]),default:e(()=>[p[6]||(p[6]=o(" Ajouter une aide "))]),_:1,__:[6]},8,["disabled"])]}),default:e(()=>[t(w,null,{default:e(()=>[t(h,{class:"mt-2"},{default:e(()=>[t(f,null,{default:e(()=>p[7]||(p[7]=[o("Prix des séjours")])),_:1,__:[7]}),t(f,{cols:"4",class:"text-right"},{default:e(()=>[o(k(l.dossier.Bilan.Demande),1)]),_:1})]),_:1}),t(h,{class:"my-0"},{default:e(()=>[t(f,{cols:"auto"},{default:e(()=>[t(ge,null,{activator:e(({props:u})=>[t(N,_e(ye(u)),{default:e(()=>p[8]||(p[8]=[o(" mdi-view-list ")])),_:2,__:[8]},1040)]),default:e(()=>[_.value?(r(),g(M,{key:0,title:"Aides extérieures"},{default:e(()=>[t(w,null,{default:e(()=>[(r(!0),F(x,null,O(V.value,u=>(r(),g(Z,{color:u.Valide?void 0:"orange",class:"mx-1"},{default:e(()=>[o(k(_.value[u.IdStructureaide].Nom)+" : "+k(S(ee).montant(u.Valeur)),1)]),_:2},1032,["color"]))),256))]),_:1})]),_:1})):E("",!0)]),_:1})]),_:1}),t(f,null,{default:e(()=>[p[10]||(p[10]=o(" Dont aides extérieures ")),m.value?(r(),g(N,{key:0,color:"orange"},{default:e(()=>p[9]||(p[9]=[o("mdi-clock")])),_:1,__:[9]})):E("",!0)]),_:1,__:[10]}),t(f,{cols:"4",class:"text-right"},{default:e(()=>[o(k(l.dossier.Bilan.Aides),1)]),_:1})]),_:1}),t(Re,{thickness:"1"}),t(h,{class:"my-0"},{default:e(()=>[t(f,{cols:"auto"},{default:e(()=>[t(ge,null,{activator:e(({props:u})=>[t(N,_e(ye(u)),{default:e(()=>p[11]||(p[11]=[o(" mdi-view-list ")])),_:2,__:[11]},1040)]),default:e(()=>[t(M,{title:"Paiements"},{default:e(()=>[t(w,null,{default:e(()=>[(r(!0),F(x,null,O(a.dossier.Paiements,u=>(r(),g(Z,{class:"mx-1"},{default:e(()=>[o(k(u.Payeur)+" : "+k(S(ee).montant(u.Montant)),1)]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})]),_:1}),t(f,null,{default:e(()=>p[12]||(p[12]=[o(" Paiements ")])),_:1,__:[12]}),t(f,{cols:"4",class:"text-right"},{default:e(()=>[o(k(l.dossier.Bilan.Recu),1)]),_:1})]),_:1}),t(Re,{thickness:"1"}),t(h,{class:"my-0"},{default:e(()=>[t(f,null,{default:e(()=>p[13]||(p[13]=[o("Montant restant à régler")])),_:1,__:[13]}),t(f,{cols:"4",class:"text-right"},{default:e(()=>[U("b",{class:fe(l.dossier.Bilan.Statut==S(pe).Complet?"text-green":"text-orange")},k(l.dossier.Bilan.Restant),3)]),_:1})]),_:1})]),_:1}),t(X,{modelValue:n.value,"onUpdate:modelValue":p[2]||(p[2]=u=>n.value=u),"max-width":"450px"},{default:e(()=>[t($t,{dossier:a.dossier,structureaides:_.value,onSave:v},null,8,["dossier","structureaides"])]),_:1},8,["modelValue"])]),_:1}))}}),jt={key:0},qt=W({__name:"JoomeoCard",props:{token:{}},setup(c){const s=c;de(d);const a=D(null);async function d(){const n=await A.LoadJoomeo({token:s.token});n!==void 0&&(a.value=n)}return(n,v)=>a.value==null?(r(),g(be,{key:0,class:"mx-auto",width:"600px",type:"card"})):a.value.Loggin?(r(),g(M,{key:1,class:"mx-auto",title:"Identifiants et albums Joomeo",subtitle:"Retrouvez les photos prises dans nos séjours.","min-width":"600px"},{default:e(()=>[t(w,null,{default:e(()=>[t(h,null,{default:e(()=>[t(f,null,{default:e(()=>[v[0]||(v[0]=o(" Identifiant : ")),U("b",null,k(a.value.Loggin),1)]),_:1,__:[0]}),t(f,null,{default:e(()=>[v[1]||(v[1]=o(" Mot de passe : ")),U("b",null,k(a.value.Password),1)]),_:1,__:[1]})]),_:1}),t(h,null,{default:e(()=>[t(f,null,{default:e(()=>{var V;return[(V=a.value.Albums)!=null&&V.length?E("",!0):(r(),F("i",jt,"Aucun album n'est encore disponible.")),(r(!0),F(x,null,O(a.value.Albums,m=>(r(),g(Z,{class:"mx-1"},{default:e(()=>[o(k(m),1)]),_:2},1024))),256))]}),_:1})]),_:1})]),_:1}),t(oe,null,{default:e(()=>[t(q,{block:"",color:"primary",variant:"outlined",href:a.value.SpaceURL,target:"_blank"},{default:e(()=>v[2]||(v[2]=[o(" Accéder à mon espace jooméo ")])),_:1,__:[2]},8,["href"])]),_:1})]),_:1})):(r(),g(K,{key:2,class:"mx-auto",type:"info"},{default:e(()=>v[3]||(v[3]=[o(" Il n'y a encore rien à voir... ")])),_:1,__:[3]}))}}),Ht={class:"pa-2"},Ot=W({__name:"FichesanitaireForm",props:{fiche:{}},emits:["save","uploadVaccin","deleteVaccin","transfert"],setup(c,{emit:s}){const a=c,d=s,n=De(Ke(a.fiche.Fichesanitaire)),v=D(a.fiche.RespoSecuriteSociale),V=B(()=>n.Allergies.Asthme||n.Allergies.Alimentaires||n.Allergies.Medicamenteuses||n.Allergies.Autres.length!=0),m=B(()=>a.fiche.Fichesanitaire.Mails||[]),_=B(()=>a.fiche.State==ae.NoFiche?void 0:`Dernière modification : ${ee.time(a.fiche.Fichesanitaire.LastModif)} / Propriétaire(s) :
         ${m.value.join(" ; ")}`);return(b,l)=>{const p=Ee;return r(),F("div",Ht,[t(M,{title:a.fiche.Personne,subtitle:_.value},{default:e(()=>[t(w,null,{default:e(()=>{var u;return[a.fiche.IsLocked?(r(),g(K,{key:0},{default:e(()=>[o(" Votre adresse mail n'est pas reconnu dans notre système comme celle du responsable de cette fiche sanitaire. Elle est actuellement liée "+k(m.value.length>=2?"aux adresses":"à l'adresse")+" ",1),U("b",null,k(m.value.join(" ; ")),1),l[30]||(l[30]=o(". ")),l[31]||(l[31]=U("br",null,null,-1)),o(" Afin de protéger vos données, vous devez demander un transfert des droits de lecture et d'écriture. Un mail contenant un lien de transfert va être envoyé "+k(m.value.length>=2?"aux adresses":"à l'adresse")+" ",1),U("i",null,"("+k(m.value.join(" ; "))+")",1),l[32]||(l[32]=o(". ")),t(q,{variant:"outlined",onClick:l[0]||(l[0]=P=>d("transfert")),block:"",class:"mt-4"},{prepend:e(()=>[t(N,null,{default:e(()=>l[28]||(l[28]=[o("mdi-lock-open")])),_:1,__:[28]})]),default:e(()=>[l[29]||(l[29]=o(" Demander le transfert de la fiche sanitaire "))]),_:1,__:[29]})]),_:1,__:[30,31,32]})):a.fiche.State==S(ae).UpToDate&&((u=a.fiche.VaccinsFiles)!=null&&u.length)?(r(),g(K,{key:1,type:"success"},{default:e(()=>l[33]||(l[33]=[o(" La fiche sanitaire est à jour. Merci ! ")])),_:1,__:[33]})):a.fiche.State==S(ae).UpToDate?(r(),g(K,{key:2,type:"warning"},{default:e(()=>l[34]||(l[34]=[o(" La fiche sanitaire est à jour, mais vous n'avez déposé aucun vaccin. ")])),_:1,__:[34]})):a.fiche.State==S(ae).Outdated?(r(),g(K,{key:3,type:"warning"},{default:e(()=>l[35]||(l[35]=[o(" Merci de bien vouloir vérifier que les données ci-dessous sont à jour et les valider. "),U("br",null,null,-1),o("Nous avons besoin de votre consentement, décrit dans l'encart "),U("b",null,"Validation",-1),o(" (en bas de page). ")])),_:1,__:[35]})):(r(),g(K,{key:4,type:"info"},{default:e(()=>l[36]||(l[36]=[o(" Merci de compléter la fiche sanitaire ci-dessous. ")])),_:1,__:[36]}))]}),_:1})]),_:1},8,["title","subtitle"]),a.fiche.IsLocked?E("",!0):(r(),F(x,{key:0},[t(M,{subtitle:"Vaccinations",class:"my-2"},{default:e(()=>[t(w,null,{default:e(()=>[l[37]||(l[37]=o(" Merci de joindre le scan des pages « vaccinations » du carnet de santé du participant. Seul le DTPolio est obligatoire pour être accueilli en séjour de vacances. ")),l[38]||(l[38]=U("br",null,null,-1)),l[39]||(l[39]=U("i",null," Si le participant n’a pas les vaccins obligatoires, joindre un certificat médical de contre-indication. ",-1)),t(p,{class:"mt-2",demande:a.fiche.VaccinsDemande,files:a.fiche.VaccinsFiles||[],"in-upload":!1,optionnelle:null,"show-upload-text":"",onUpload:l[1]||(l[1]=u=>d("uploadVaccin",u)),onDelete:l[2]||(l[2]=u=>d("deleteVaccin",u))},null,8,["demande","files"])]),_:1,__:[37,38,39]})]),_:1}),t(M,{subtitle:"Handicap",class:"my-2"},{default:e(()=>[t(w,null,{default:e(()=>[t(J,{modelValue:n.Handicap,"onUpdate:modelValue":l[3]||(l[3]=u=>n.Handicap=u),color:"primary",label:"Le participant est porteur de handicap. ","hide-details":""},null,8,["modelValue"]),t(Ve,null,{default:e(()=>[t(K,{modelValue:n.Handicap,"onUpdate:modelValue":l[4]||(l[4]=u=>n.Handicap=u),color:"blue-lighten-4"},{default:e(()=>l[40]||(l[40]=[o(" Merci de "),U("b",null,"contacter",-1),o(" au plus vite le directeur afin qu’un accueil individualisé puisse être mis en place. ")])),_:1,__:[40]},8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(M,{subtitle:"Traitement",class:"my-2"},{default:e(()=>[t(w,null,{default:e(()=>[t(J,{modelValue:n.TraitementMedical,"onUpdate:modelValue":l[5]||(l[5]=u=>n.TraitementMedical=u),color:"primary",label:"Le participant suit un traitement médical pendant le séjour.","hide-details":""},null,8,["modelValue"]),t(Ve,null,{default:e(()=>[t(K,{modelValue:n.TraitementMedical,"onUpdate:modelValue":l[6]||(l[6]=u=>n.TraitementMedical=u),color:"blue-lighten-4"},{default:e(()=>l[41]||(l[41]=[o(" Merci de joindre une "),U("b",null,"ordonnance",-1),o(" récente et les "),U("b",null,"médicaments",-1),o(" correspondants (avec la notice). Aucun médicament ne pourra être pris sans ordonnance. ")])),_:1,__:[41]},8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(M,{subtitle:"Maladies",class:"my-2"},{default:e(()=>[t(w,null,{default:e(()=>[l[42]||(l[42]=o(" Le participant a-t-il déjà eu les maladies suivantes ? ")),t(h,{class:"mt-2"},{default:e(()=>[t(f,{cols:"3",class:"py-0"},{default:e(()=>[t(J,{modelValue:n.Maladies.Rubeole,"onUpdate:modelValue":l[7]||(l[7]=u=>n.Maladies.Rubeole=u),color:"primary",label:"Rubéole","hide-details":""},null,8,["modelValue"])]),_:1}),t(f,{cols:"3",class:"py-0"},{default:e(()=>[t(J,{modelValue:n.Maladies.Varicelle,"onUpdate:modelValue":l[8]||(l[8]=u=>n.Maladies.Varicelle=u),color:"primary",label:"Varicelle","hide-details":""},null,8,["modelValue"])]),_:1}),t(f,{cols:"3",class:"py-0"},{default:e(()=>[t(J,{modelValue:n.Maladies.Angine,"onUpdate:modelValue":l[9]||(l[9]=u=>n.Maladies.Angine=u),color:"primary",label:"Angine","hide-details":""},null,8,["modelValue"])]),_:1}),t(f,{cols:"3",class:"py-0"},{default:e(()=>[t(J,{modelValue:n.Maladies.Oreillons,"onUpdate:modelValue":l[10]||(l[10]=u=>n.Maladies.Oreillons=u),color:"primary",label:"Oreillons","hide-details":""},null,8,["modelValue"])]),_:1}),t(f,{cols:"3",class:"py-0"},{default:e(()=>[t(J,{modelValue:n.Maladies.Scarlatine,"onUpdate:modelValue":l[11]||(l[11]=u=>n.Maladies.Scarlatine=u),color:"primary",label:"Scarlatine","hide-details":""},null,8,["modelValue"])]),_:1}),t(f,{cols:"3",class:"py-0"},{default:e(()=>[t(J,{modelValue:n.Maladies.Coqueluche,"onUpdate:modelValue":l[12]||(l[12]=u=>n.Maladies.Coqueluche=u),color:"primary",label:"Coqueluche","hide-details":""},null,8,["modelValue"])]),_:1}),t(f,{cols:"3",class:"py-0"},{default:e(()=>[t(J,{modelValue:n.Maladies.Otite,"onUpdate:modelValue":l[13]||(l[13]=u=>n.Maladies.Otite=u),color:"primary",label:"Otite","hide-details":""},null,8,["modelValue"])]),_:1}),t(f,{cols:"3",class:"py-0"},{default:e(()=>[t(J,{modelValue:n.Maladies.Rougeole,"onUpdate:modelValue":l[14]||(l[14]=u=>n.Maladies.Rougeole=u),color:"primary",label:"Rougeole","hide-details":""},null,8,["modelValue"])]),_:1}),t(f,{cols:"3",class:"py-0"},{default:e(()=>[t(J,{modelValue:n.Maladies.Rhumatisme,"onUpdate:modelValue":l[15]||(l[15]=u=>n.Maladies.Rhumatisme=u),color:"primary",label:"Rhumatisme articulaire aigü ","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1,__:[42]})]),_:1}),t(M,{subtitle:"Allergies",class:"my-2"},{default:e(()=>[t(w,null,{default:e(()=>[l[43]||(l[43]=o(" Le participant a-t-il une des allergies suivantes ? ")),t(h,{class:"mt-2"},{default:e(()=>[t(f,{"align-self":"center",cols:"3",class:"py-0"},{default:e(()=>[t(J,{modelValue:n.Allergies.Asthme,"onUpdate:modelValue":l[16]||(l[16]=u=>n.Allergies.Asthme=u),color:"primary",label:"Asthme","hide-details":""},null,8,["modelValue"])]),_:1}),t(f,{"align-self":"center",cols:"3",class:"py-0"},{default:e(()=>[t(J,{modelValue:n.Allergies.Alimentaires,"onUpdate:modelValue":l[17]||(l[17]=u=>n.Allergies.Alimentaires=u),color:"primary",label:"Alimentaires","hide-details":""},null,8,["modelValue"])]),_:1}),t(f,{"align-self":"center",cols:"3",class:"py-0"},{default:e(()=>[t(J,{modelValue:n.Allergies.Medicamenteuses,"onUpdate:modelValue":l[18]||(l[18]=u=>n.Allergies.Medicamenteuses=u),color:"primary",label:"Médicamenteuses","hide-details":""},null,8,["modelValue"])]),_:1}),t(f,{"align-self":"center",cols:"3",class:"py-0"},{default:e(()=>[t(ue,{density:"compact",variant:"outlined","hide-details":"",label:"Autres allergies",modelValue:n.Allergies.Autres,"onUpdate:modelValue":l[19]||(l[19]=u=>n.Allergies.Autres=u)},null,8,["modelValue"])]),_:1})]),_:1}),t(Ve,null,{default:e(()=>[V.value?(r(),g(h,{key:0},{default:e(()=>[t(f,null,{default:e(()=>[t(re,{variant:"outlined",label:"Conduite à tenir",modelValue:n.Allergies.ConduiteATenir,"onUpdate:modelValue":l[20]||(l[20]=u=>n.Allergies.ConduiteATenir=u),hint:"Préciser la cause de l’allergie et la conduite à tenir (si automédication le signaler). Si un PAI a été mis en place durant le temps scolaire, merci de nous le signaler.","persistent-hint":"",rules:[S(Ge).required("Merci de nous informer de la conduite à tenir en cas d'allergie.")]},null,8,["modelValue","rules"])]),_:1})]),_:1})):E("",!0)]),_:1})]),_:1,__:[43]})]),_:1}),t(M,{subtitle:"Divers",class:"my-2"},{default:e(()=>[t(w,null,{default:e(()=>[t(h,null,{default:e(()=>[t(f,null,{default:e(()=>[t(re,{variant:"outlined",label:"Difficultés de santé",modelValue:n.DifficultesSante,"onUpdate:modelValue":l[21]||(l[21]=u=>n.DifficultesSante=u),hint:"Indiquer les difficultés de santé (maladie, accident, crises convulsives, hospitalisation, opération, rééducation) en précisant les dates et les précautions à prendre.","persistent-hint":""},null,8,["modelValue"])]),_:1}),t(f,null,{default:e(()=>[t(re,{variant:"outlined",label:"Recommandations utiles",modelValue:n.Recommandations,"onUpdate:modelValue":l[22]||(l[22]=u=>n.Recommandations=u),hint:"Préciser si le participant porte des lunettes, des lentilles, des prothèses auditives, des prothèses dentaires...","persistent-hint":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(M,{subtitle:"Médecin traitant",class:"my-2"},{default:e(()=>[t(w,null,{default:e(()=>[t(h,null,{default:e(()=>[t(f,null,{default:e(()=>[t(ue,{variant:"outlined",density:"compact",label:"Nom",modelValue:n.Medecin.Nom,"onUpdate:modelValue":l[23]||(l[23]=u=>n.Medecin.Nom=u),"hide-details":""},null,8,["modelValue"])]),_:1}),t(f,null,{default:e(()=>[t(ue,{variant:"outlined",density:"compact",label:"Téléphone","model-value":S(ee).tel(n.Medecin.Tel),"onUpdate:modelValue":l[24]||(l[24]=u=>n.Medecin.Tel=u),"hide-details":""},null,8,["model-value"])]),_:1})]),_:1})]),_:1})]),_:1}),t(M,{subtitle:"Responsable légal",class:"my-2"},{default:e(()=>[t(w,null,{default:e(()=>[t(h,null,{default:e(()=>[t(f,{"align-self":"center"},{default:e(()=>{var u;return[l[45]||(l[45]=o(" Téléphone : ")),(u=a.fiche.RespoTels)!=null&&u.length?E("",!0):(r(),g(Z,{key:0,label:""},{default:e(()=>l[44]||(l[44]=[o("Aucun numéro")])),_:1,__:[44]})),(r(!0),F(x,null,O(a.fiche.RespoTels,P=>(r(),g(Z,{label:"",class:"mx-1"},{default:e(()=>[o(k(S(ee).tel(P)),1)]),_:2},1024))),256))]}),_:1,__:[45]}),t(f,{"align-self":"center"},{default:e(()=>[t(ue,{variant:"outlined",density:"compact",label:"Numéro de contact","model-value":S(ee).tel(n.Tel),"onUpdate:modelValue":l[25]||(l[25]=u=>n.Tel=u),hint:"Numéro de téléphone supplémentaire (optionnel)","persistent-hint":""},null,8,["model-value"])]),_:1})]),_:1}),t(h,null,{default:e(()=>[t(f,null,{default:e(()=>[t(ue,{variant:"outlined",density:"compact",label:"Sécurité sociale",modelValue:v.value,"onUpdate:modelValue":l[26]||(l[26]=u=>v.value=u),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),t(M,{class:"mt-4",variant:"outlined",color:"success",title:"Validation"},{default:e(()=>[t(w,{class:"text-black"},{default:e(()=>l[46]||(l[46]=[o(" Le responsable légal déclare "),U("b",null,"exacts",-1),o(" les renseignements portés sur ce formulaire et autorise le responsable du séjour à prendre, le cas échéant, "),U("b",null,"toutes mesures",-1),o(" (traitement médical, hospitalisation, intervention chirurgicale) rendues nécessaires par l'état du participant. Il autorise également, si nécessaire, le directeur du séjour à faire sortir le participant de l’hôpital après une hospitalisation. ")])),_:1,__:[46]}),t(oe,null,{default:e(()=>[t(q,{block:"",color:"success",onClick:l[27]||(l[27]=u=>d("save",n,v.value))},{prepend:e(()=>[t(N,null,{default:e(()=>l[47]||(l[47]=[o("mdi-content-save")])),_:1,__:[47]})]),default:e(()=>[o(" Enregistrer la fiche sanitaire de "+k(a.fiche.Personne),1)]),_:1})]),_:1})]),_:1})],64))])}}}),Bt=W({__name:"FichessanitairesCard",props:{token:{}},emits:["close","updateNotifs"],setup(c,{emit:s}){const a=c,d=s;de(V);const n=D(0),v=D([]);async function V(){const p=await A.LoadFichesanitaires({token:a.token});p!==void 0&&(v.value=p.Fiches||[],v.value.length&&n.value==0&&(n.value=v.value[0].Fichesanitaire.IdPersonne),d("updateNotifs",p.ToFillCount))}async function m(p,u){await A.UpdateFichesanitaire({Token:a.token,Fichesanitaire:p,SecuriteSocialeResponsable:u})!==void 0&&(A.showMessage("La fiche sanitaire a bien été enregistrée. Merci !"),V())}async function _(p,u){const P=v.value[p];await A.UploadVaccin(u,{token:a.token,idPersonne:P.Fichesanitaire.IdPersonne})!==void 0&&(V(),A.showMessage("Le vaccin a bien été téléversé. Merci !"))}async function b(p,u){v.value[p],await A.DeleteVaccin({key:u.Key})!==void 0&&(V(),A.showMessage("Le vaccin a bien été supprimé."))}async function l(p){d("close"),await A.TransfertFicheSanitaire({token:a.token,idPersonne:p.IdPersonne})!==void 0&&A.showMessage("Mail de transfert envoyé avec succès.")}return(p,u)=>(r(),g(M,{title:"Fiches sanitaires et vaccins"},{append:e(()=>[t(xe,{modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=P=>n.value=P)},{default:e(()=>[(r(!0),F(x,null,O(v.value,P=>(r(),g(Te,{value:P.Fichesanitaire.IdPersonne},{default:e(()=>{var C;return[o(k(P.Personne)+" ",1),P.State==S(ae).NoFiche||P.State==S(ae).Outdated||!((C=P.VaccinsFiles)!=null&&C.length)?(r(),g(N,{key:0,class:"ml-2",color:"warning"},{default:e(()=>u[1]||(u[1]=[o(" mdi-alert ")])),_:1,__:[1]})):(r(),g(N,{key:1,class:"ml-2",color:"success"},{default:e(()=>u[2]||(u[2]=[o(" mdi-check ")])),_:1,__:[2]}))]}),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])]),default:e(()=>[t(w,null,{default:e(()=>[t(Fe,{"model-value":n.value},{default:e(()=>[(r(!0),F(x,null,O(v.value,(P,C)=>(r(),g(Ie,{value:P.Fichesanitaire.IdPersonne},{default:e(()=>[t(Ot,{fiche:P,onSave:m,onUploadVaccin:R=>_(C,R),onDeleteVaccin:R=>b(C,R),onTransfert:R=>l(P.Fichesanitaire)},null,8,["fiche","onUploadVaccin","onDeleteVaccin","onTransfert"])]),_:2},1032,["value"]))),256))]),_:1},8,["model-value"])]),_:1})]),_:1}))}}),zt=Qe({name:String,itemAriaLabel:{type:String,default:"$vuetify.rating.ariaLabel.item"},activeColor:String,color:String,clearable:Boolean,disabled:Boolean,emptyIcon:{type:he,default:"$ratingEmpty"},fullIcon:{type:he,default:"$ratingFull"},halfIncrements:Boolean,hover:Boolean,length:{type:[Number,String],default:5},readonly:Boolean,modelValue:{type:[Number,String],default:0},itemLabels:Array,itemLabelPosition:{type:String,default:"top",validator:c=>["top","bottom"].includes(c)},ripple:Boolean,...dt(),...rt(),...it(),...ut(),...ot()},"VRating"),Jt=We()({name:"VRating",props:zt(),emits:{"update:modelValue":c=>!0},setup(c,s){let{slots:a}=s;const{t:d}=Xe(),{themeClasses:n}=Ze(c),v=Ye(c,"modelValue"),V=B(()=>et(parseFloat(v.value),0,Number(c.length))),m=B(()=>tt(Number(c.length),1)),_=B(()=>m.value.flatMap(L=>c.halfIncrements?[L-.5,L]:[L])),b=lt(-1),l=B(()=>_.value.map(L=>{const j=c.hover&&b.value>-1,$=V.value>=L,T=b.value>=L,I=(j?T:$)?c.fullIcon:c.emptyIcon,i=c.activeColor??c.color,Y=$||T?i:c.color;return{isFilled:$,isHovered:T,icon:I,color:Y}})),p=B(()=>[0,..._.value].map(L=>{function j(){b.value=L}function $(){b.value=-1}function T(){c.disabled||c.readonly||(v.value=V.value===L&&c.clearable?0:L)}return{onMouseenter:c.hover?j:void 0,onMouseleave:c.hover?$:void 0,onClick:T}})),u=at(),P=B(()=>c.name??`v-rating-${u}`);function C(L){var te,Ue;let{value:j,index:$,showStar:T=!0}=L;const{onMouseenter:ne,onMouseleave:I,onClick:i}=p.value[$+1],Y=`${P.value}-${String(j).replace(".","-")}`,y={color:(te=l.value[$])==null?void 0:te.color,density:c.density,disabled:c.disabled,icon:(Ue=l.value[$])==null?void 0:Ue.icon,ripple:c.ripple,size:c.size,variant:"plain"};return U(x,null,[U("label",{for:Y,class:fe({"v-rating__item--half":c.halfIncrements&&j%1>0,"v-rating__item--full":c.halfIncrements&&j%1===0}),onMouseenter:ne,onMouseleave:I,onClick:i},[U("span",{class:"v-rating__hidden"},[d(c.itemAriaLabel,j,c.length)]),T?a.item?a.item({...l.value[$],props:y,value:j,index:$,rating:V.value}):t(q,Se({"aria-label":d(c.itemAriaLabel,j,c.length)},y),null):void 0]),U("input",{class:"v-rating__hidden",name:P.value,id:Y,type:"radio",value:j,checked:V.value===j,tabindex:-1,readonly:c.readonly,disabled:c.disabled},null)])}function R(L){return a["item-label"]?a["item-label"](L):L.label?U("span",null,[L.label]):U("span",null,[o(" ")])}return nt(()=>{var j;const L=!!((j=c.itemLabels)!=null&&j.length)||a["item-label"];return t(c.tag,{class:fe(["v-rating",{"v-rating--hover":c.hover,"v-rating--readonly":c.readonly},n.value,c.class]),style:st(c.style)},{default:()=>[t(C,{value:0,index:-1,showStar:!1},null),m.value.map(($,T)=>{var ne,I;return U("div",{class:"v-rating__wrapper"},[L&&c.itemLabelPosition==="top"?R({value:$,index:T,label:(ne=c.itemLabels)==null?void 0:ne[T]}):void 0,U("div",{class:"v-rating__item"},[c.halfIncrements?U(x,null,[t(C,{value:$-.5,index:T*2},null),t(C,{value:$,index:T*2+1},null)]):t(C,{value:$,index:T},null)]),L&&c.itemLabelPosition==="bottom"?R({value:$,index:T,label:(I=c.itemLabels)==null?void 0:I[T]}):void 0])})]})}),{}}}),le=W({__name:"RatingField",props:mt({label:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(c){const s=c,a=pt(c,"modelValue");return(d,n)=>(r(),g(h,{"no-gutters":""},{default:e(()=>[t(f,{cols:"12"},{default:e(()=>[o(k(s.label),1)]),_:1}),t(f,{cols:"12"},{default:e(()=>[t(Jt,{hover:"",color:"primary",length:4,modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=v=>a.value=v),size:"32"},null,8,["modelValue"])]),_:1})]),_:1}))}}),Kt={key:1},Gt=W({__name:"SondagesCard",props:{token:{},initialCamp:{}},setup(c){const s=c;de(n);const a=D(0),d=D(null);async function n(){const m=await A.LoadSondages({token:s.token});if(m===void 0)return;d.value=m||[];const _=(m||[]).filter(v);(m||[]).map(b=>b.Sondage.IdCamp).includes(s.initialCamp)?a.value=s.initialCamp:_.length?a.value=_[0].Sondage.IdCamp:a.value==0&&(m!=null&&m.length)&&(a.value=m[0].Sondage.IdCamp)}function v(m){return ct(m.Sondage.Modified)}async function V(m){await A.UpdateSondages({Token:s.token,Id:m.Id,IdCamp:m.IdCamp,Reponse:m})!==void 0&&(n(),A.showMessage("Votre réponse a bien été enregistrée. Merci !"))}return(m,_)=>{var b;return d.value==null?(r(),g(be,{key:0,type:"card"})):d.value!=null?(r(),g(M,{key:1,title:"Enquête de satisfaction",width:(b=d.value)!=null&&b.length?void 0:"600px",class:"mx-auto"},{default:e(()=>[t(w,null,{default:e(()=>[d.value.length?(r(),g(K,{key:0,color:"secondary",icon:"mdi-comment-quote"},{default:e(()=>_[1]||(_[1]=[o(" Afin d'améliorer nos prestations, nous avons à cœur de vous laisser la parole. Vos suggestions, remarques et ressentis nous aiderons à améliorer nos séjours. Merci d'avance de ce temps que vous réserverez pour répondre à cette courte enquête. ")])),_:1,__:[1]})):(r(),F("div",Kt," L'enquête n'est pas encore ouverte. Vous pouvez repasser à la fin du séjour. ")),d.value.length?(r(),g(xe,{key:2,modelValue:a.value,"onUpdate:modelValue":_[0]||(_[0]=l=>a.value=l),grow:"",class:"mt-2"},{default:e(()=>[(r(!0),F(x,null,O(d.value,l=>(r(),g(Te,{value:l.Sondage.IdCamp},{default:e(()=>[o(k(l.Camp)+" ",1),v(l)?(r(),g(ce,{key:0,inline:"",content:"Nouveau",color:"pink"})):E("",!0)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])):E("",!0),t(Fe,{"model-value":a.value,class:"mt-2"},{default:e(()=>[(r(!0),F(x,null,O(d.value,l=>(r(),g(Ie,{value:l.Sondage.IdCamp},{default:e(()=>[t(M,{subtitle:"Vos impressions sur le séjour"},{default:e(()=>[t(w,null,{default:e(()=>[t(h,null,{default:e(()=>[t(f,{cols:"6"},{default:e(()=>[t(h,null,{default:e(()=>[t(f,null,{default:e(()=>[t(le,{label:"Informations avant le séjour",modelValue:l.Sondage.InfosAvantSejour,"onUpdate:modelValue":p=>l.Sondage.InfosAvantSejour=p},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(f,null,{default:e(()=>[t(le,{label:"Informations pendant le séjour",modelValue:l.Sondage.InfosPendantSejour,"onUpdate:modelValue":p=>l.Sondage.InfosPendantSejour=p},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(f,null,{default:e(()=>[t(le,{label:"L'hébergement",modelValue:l.Sondage.Hebergement,"onUpdate:modelValue":p=>l.Sondage.Hebergement=p},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),t(h,null,{default:e(()=>[t(f,null,{default:e(()=>[t(le,{label:"Les activités",modelValue:l.Sondage.Activites,"onUpdate:modelValue":p=>l.Sondage.Activites=p},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(f,null,{default:e(()=>[t(le,{label:"Le thème",modelValue:l.Sondage.Theme,"onUpdate:modelValue":p=>l.Sondage.Theme=p},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(f,null,{default:e(()=>[t(le,{label:"La nourriture",modelValue:l.Sondage.Nourriture,"onUpdate:modelValue":p=>l.Sondage.Nourriture=p},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),t(h,null,{default:e(()=>[t(f,null,{default:e(()=>[t(le,{label:"L'hygiène corporelle et vestimentaire",modelValue:l.Sondage.Hygiene,"onUpdate:modelValue":p=>l.Sondage.Hygiene=p},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(f,null,{default:e(()=>[t(le,{label:"L'ambiance du groupe",modelValue:l.Sondage.Ambiance,"onUpdate:modelValue":p=>l.Sondage.Ambiance=p},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(f,null,{default:e(()=>[t(le,{label:"Le ressenti global de votre enfant",modelValue:l.Sondage.Ressenti,"onUpdate:modelValue":p=>l.Sondage.Ressenti=p},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),t(f,{cols:"6"},{default:e(()=>[t(h,null,{default:e(()=>[t(f,{cols:"12"},{default:e(()=>[t(re,{rows:"3",label:"Message du participant",hint:"Le participant souhaite donner son avis : des regrets ? de bons souvenirs ? des propositions d'amélioration ?","persistent-hint":"",modelValue:l.Sondage.MessageEnfant,"onUpdate:modelValue":p=>l.Sondage.MessageEnfant=p},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(f,null,{default:e(()=>[t(re,{rows:"3",label:"Message du responsable",hint:"En tant que responsable, vous avez une remarque, une suggestion, un ressenti à partager : avec plaisir ! Nous prendrons soin de vous apporter une réponse en cas de besoin.","persistent-hint":"",modelValue:l.Sondage.MessageResponsable,"onUpdate:modelValue":p=>l.Sondage.MessageResponsable=p},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),t(oe,null,{default:e(()=>[t(q,{block:"",variant:"outlined",color:"success",onClick:p=>V(l.Sondage)},{prepend:e(()=>[t(N,null,{default:e(()=>_[2]||(_[2]=[o("mdi-content-save")])),_:1,__:[2]})]),default:e(()=>[o(" Enregistrer mon retour pour le séjour "+k(l.Camp),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["value"]))),256))]),_:1},8,["model-value"])]),_:1})]),_:1},8,["width"])):E("",!0)}}}),Wt=W({__name:"DocumentsCard",props:{token:{}},emits:["updateNotifs"],setup(c,{emit:s}){const a=c,d=s;de(v);const n=D(null);async function v(){const _=await A.LoadDocuments({token:a.token});_!==void 0&&(n.value=_,d("updateNotifs",_.ToReadOrFillCount))}async function V(_,b,l){await A.UploadDocument(l,{token:a.token,idPersonne:_,idDemande:b})!==void 0&&(A.showMessage("Document téléversé avec succès. Merci !"),await v(),d("updateNotifs",n.value.ToReadOrFillCount))}async function m(_){await A.DeleteDocument({key:_.Key})!==void 0&&(A.showMessage("Document supprimé avec succès."),await v(),d("updateNotifs",n.value.ToReadOrFillCount))}return(_,b)=>{const l=Ct,p=Ee;return r(),g(M,{title:"Documents des séjours",subtitle:"Vous retrouvez ici les documents des séjours auxquels vous participez, à lire ou remplir."},{append:e(()=>b[0]||(b[0]=[])),default:e(()=>[n.value!=null?(r(),g(w,{key:0},{default:e(()=>[t(se,null,{default:e(()=>{var u,P;return[t(Le,null,{default:e(()=>b[1]||(b[1]=[o("À lire")])),_:1,__:[1]}),(u=n.value.FilesToRead)!=null&&u.length?E("",!0):(r(),g(H,{key:0},{default:e(()=>b[2]||(b[2]=[U("i",null,"Aucun document à lire.",-1)])),_:1,__:[2]})),(r(!0),F(x,null,O(n.value.FilesToRead,C=>(r(),F(x,null,[(r(!0),F(x,null,O(C.Files,R=>(r(),g(H,{title:R.NomClient,subtitle:C.Camp},{append:e(()=>[t(l,{fileKey:R.Key,isGeneratedDoc:!1},null,8,["fileKey"])]),_:2},1032,["title","subtitle"]))),256)),(r(!0),F(x,null,O(C.Generated,R=>(r(),g(H,{title:R.NomClient,subtitle:C.Camp},{append:e(()=>[t(l,{fileKey:R.Key,isGeneratedDoc:!0},null,8,["fileKey"])]),_:2},1032,["title","subtitle"]))),256))],64))),256)),t(Le,null,{default:e(()=>b[3]||(b[3]=[o("À fournir")])),_:1,__:[3]}),(P=n.value.FilesToUpload)!=null&&P.length?E("",!0):(r(),g(H,{key:1},{default:e(()=>b[4]||(b[4]=[U("i",null,"Aucun document à fournir.",-1)])),_:1,__:[4]})),(r(!0),F(x,null,O(n.value.FilesToUpload,C=>(r(),F(x,null,[(r(!0),F(x,null,O(C.Demandes,R=>(r(),g(p,{demande:R.Demande,files:R.Uploaded||[],inUpload:!1,title:`Document pour ${C.Personne}`,optionnelle:null,showUploadText:!0,onUpload:L=>V(C.IdPersonne,R.Demande.Id,L),onDelete:m},ke({_:2},[R.Demande.IdFile.Valid?{name:"prepend",fn:e(()=>[t(At,{"content-class":"pa-1"},{activator:e(({props:L})=>[t(q,Se({ref_for:!0},L,{href:S(ft)(R.DemandeFile.Key),class:"mr-2",size:"small"}),{prepend:e(()=>[t(N,null,{default:e(()=>b[5]||(b[5]=[o("mdi-download")])),_:1,__:[5]})]),default:e(()=>[b[6]||(b[6]=o(" Modèle"))]),_:2,__:[6]},1040,["href"])]),default:e(()=>[t(l,{"file-key":R.DemandeFile.Key,isGeneratedDoc:!1,large:!0},null,8,["file-key"])]),_:2},1024)]),key:"0"}:void 0]),1032,["demande","files","title","onUpload"]))),256))],64))),256))]}),_:1})]),_:1})):(r(),g(be,{key:1}))]),_:1})}}}),Qt=W({__name:"FinancesReglementCard",props:{token:{},dossier:{},settings:{}},emits:["refresh"],setup(c,{emit:s}){const a=c,d=D(Q.EnLigne);async function n(V){await Pe(V),A.showMessage("IBAN copié avec succès.")}async function v(V){await Pe(V),A.showMessage("Identifiant de virement copié avec succès.")}return(V,m)=>(r(),g(M,{title:"Régler la pension",class:"mt-2"},{default:e(()=>[t(w,null,{default:e(()=>[m[13]||(m[13]=o(" Le montant de la pension à régler est de ")),U("b",null,k(a.dossier.Bilan.Restant),1),m[14]||(m[14]=o(". ")),t(h,{class:"mt-4"},{default:e(()=>[t(f,{"align-self":"start",cols:"4"},{default:e(()=>[t(se,{class:"py-0",selectable:"",selected:d.value,"onUpdate:selected":m[0]||(m[0]=_=>d.value=_)},{default:e(()=>[t(H,{rounded:"",class:"my-2",title:"Payer en ligne",subtitle:"par carte bancaire",value:S(Q).EnLigne,disabled:!a.settings.SupportPaiementByCard},{append:e(()=>[t(N,null,{default:e(()=>m[2]||(m[2]=[o("mdi-credit-card")])),_:1,__:[2]})]),_:1},8,["value","disabled"]),t(H,{rounded:"",class:"my-2",title:"Payer par virement",value:S(Q).Virement},{append:e(()=>[t(N,null,{default:e(()=>m[3]||(m[3]=[o("mdi-bank")])),_:1,__:[3]})]),_:1},8,["value"]),t(H,{rounded:"",class:"my-2",title:"Payer par chèque",value:S(Q).Cheque},{append:e(()=>[t(N,null,{default:e(()=>m[4]||(m[4]=[o("mdi-checkbook")])),_:1,__:[4]})]),_:1},8,["value"])]),_:1},8,["selected"])]),_:1}),t(f,{"align-self":"start",cols:"8"},{default:e(()=>[t(M,{title:S(Dt)[d.value]},{default:e(()=>[d.value==S(Q).EnLigne?(r(),g(w,{key:0},{default:e(()=>m[5]||(m[5]=[o(" TODO: see https://github.com/benoitkugler/registro/issues/76 ")])),_:1,__:[5]})):d.value==S(Q).Virement?(r(),g(w,{key:1},{default:e(()=>{var _;return[o(" Vous pouvez effectuer votre virement vers "+k((_=a.settings.BankAccounts)!=null&&_.length?"l'un des comptes suivants":"le compte suivant")+" : ",1),t(se,{class:"my-2"},{default:e(()=>[(r(!0),F(x,null,O(a.settings.BankAccounts,b=>(r(),g(H,{title:b[0],subtitle:b[1]},{append:e(()=>[t(q,{size:"x-small",icon:"mdi-content-copy",onClick:l=>n(b[1])},null,8,["onClick"])]),_:2},1032,["title","subtitle"]))),256))]),_:1}),t(K,{type:"info"},{default:e(()=>[m[6]||(m[6]=o(" Merci d'indiquer impérativement le ")),m[7]||(m[7]=U("b",null,"label",-1)),m[8]||(m[8]=o(" suivant sur votre virement, qui nous permettra de l'identifier : ")),t(h,{"no-gutters":"",class:"mt-2"},{default:e(()=>[t(f,{"align-self":"center",class:"text-center"},{default:e(()=>[t(Z,{variant:"elevated"},{default:e(()=>[o(k(a.settings.VirementCode),1)]),_:1})]),_:1}),t(f,{"align-self":"center",cols:"auto"},{default:e(()=>[t(q,{class:"my-2",size:"x-small",icon:"mdi-content-copy",onClick:m[1]||(m[1]=b=>v(a.settings.VirementCode))})]),_:1})]),_:1})]),_:1,__:[6,7,8]})]}),_:1})):d.value==S(Q).Cheque?(r(),g(w,{key:2},{default:e(()=>[m[10]||(m[10]=o(" Merci d'envoyer votre chèque à l'ordre ")),U("b",null,k(a.settings.Cheque.Ordre),1),m[11]||(m[11]=o(" à l'adresse suivante : ")),t(h,{justify:"center"},{default:e(()=>[t(f,{cols:"auto"},{default:e(()=>[t(M,{class:"my-2"},{default:e(()=>[t(w,null,{default:e(()=>[o(k(a.settings.Cheque.Adresse[0])+" ",1),m[9]||(m[9]=U("br",null,null,-1)),o(" "+k(a.settings.Cheque.Adresse[1]),1)]),_:1,__:[9]})]),_:1})]),_:1})]),_:1}),m[12]||(m[12]=o(" Il sera encaissé environ une dizaine de jours avant le début du séjour. "))]),_:1,__:[10,11,12]})):E("",!0)]),_:1},8,["title"])]),_:1})]),_:1})]),_:1,__:[13,14]})]),_:1}))}}),Xt={};function Zt(c,s){return r(),g(M,{title:"Bienvenue sur votre espace de suivi !"},{default:e(()=>[t(w,null,{default:e(()=>[s[1]||(s[1]=o(" Cette page regroupe toutes les informations liées à votre inscription et vous permet d'interagir avec les directeurs de séjour et le centre d'inscription. ")),t(K,{type:"info",class:"my-4"},{default:e(()=>s[0]||(s[0]=[o(" Le fil de messages vous permet de converser directement avec le centre. Merci de privilégier ce système aux mails. ")])),_:1,__:[0]}),s[2]||(s[2]=o(" Cet espace évoluera au fil de l'inscription, et vous donnera accès aux étapes suivantes : ")),t(se,null,{default:e(()=>[t(H,{title:"Validation",subtitle:"Après prise en compte de votre inscription par le centre.","append-icon":"mdi-check"}),t(H,{title:"Réglement de la pension","append-icon":"mdi-currency-eur"}),t(H,{title:"Documents des séjours",subtitle:"Lettre du directeur, fiches sanitaires, autres documents, ...","append-icon":"mdi-mail"}),t(H,{title:"Album photo",subtitle:"Accès vers une plateforme dédiée aux photos de vos séjours.","append-icon":"mdi-image-album"}),t(H,{title:"Justificatifs",subtitle:"Téléchargement d'une attestation de présence ou d'une facture acquittée.","append-icon":"mdi-download"}),t(H,{title:"Sondage",subtitle:"Un espace de commentaire ouvert à la fin des séjours.","append-icon":"mdi-comment-quote"})]),_:1})]),_:1,__:[1,2]})]),_:1})}const Yt=Mt(Xt,[["render",Zt]]),el=W({__name:"ValidationInscriptionCard",props:{dossier:{}},setup(c){const s=c,a=B(()=>(s.dossier.Participants||[]).filter(v=>v.Participant.Statut==G.Inscrit)),d=B(()=>(s.dossier.Participants||[]).filter(v=>v.Participant.Statut!=G.Inscrit&&v.Participant.Statut!=G.AStatuer)),n=B(()=>(s.dossier.Participants||[]).filter(v=>v.Participant.Statut==G.AStatuer));return(v,V)=>(r(),g(M,{title:"Inscription reçue"},{default:e(()=>[t(w,null,{default:e(()=>[V[0]||(V[0]=U("div",{class:"mb-4"}," Nous avons bien reçu votre demande d'inscription, et nous vous en remercions. Voici son statut : ",-1)),a.value.length?(r(),g(K,{key:0,color:"lime-lighten-1",class:"my-2",elevation:"2",icon:S(ee).statutParticipant(S(G).Inscrit).icon},{default:e(()=>[t(h,null,{default:e(()=>[t(f,{cols:"7"},{default:e(()=>[o("Nous sommes ravis de vous confirmer "+k(a.value.length==1?"cette participation":"ces participations")+" et nous nous réjouissons des moments à passer ensemble !",1)]),_:1}),t(f,{"align-self":"center",class:"text-right"},{default:e(()=>[(r(!0),F(x,null,O(a.value,m=>(r(),g(Z,{class:"my-1"},{default:e(()=>[o(k(m.Personne.Prenom)+" : "+k(S(ie).label(m.Camp)),1)]),_:2},1024))),256))]),_:1})]),_:1})]),_:1},8,["icon"])):E("",!0),d.value.length?(r(),g(K,{key:1,color:"orange-lighten-3",class:"my-2",elevation:"2",icon:S(ee).statutParticipant(S(G).AttenteCampComplet).icon},{default:e(()=>[t(h,null,{default:e(()=>[t(f,{cols:"7"},{default:e(()=>[o("Malheureusement, nous avons dû placer "+k(d.value.length==1?"cette demande":"ces demandes")+" en liste d'attente. Nous reviendrons vers vous si une place se libère.",1)]),_:1}),t(f,{"align-self":"center",class:"text-right"},{default:e(()=>[(r(!0),F(x,null,O(d.value,m=>(r(),g(Z,{class:"my-1"},{default:e(()=>[o(k(m.Personne.Prenom)+" : "+k(S(ie).label(m.Camp)),1)]),_:2},1024))),256))]),_:1})]),_:1})]),_:1},8,["icon"])):E("",!0),n.value.length?(r(),g(K,{key:2,type:"warning",color:"grey-lighten-1",class:"my-2",elevation:"2"},{default:e(()=>[t(h,null,{default:e(()=>[t(f,{cols:"7"},{default:e(()=>[o(" Nous n'avons pas encore statué pour "+k(n.value.length==1?"cette demande":"ces demandes")+" et nous reviendrons vers vous au plus vite. ",1)]),_:1}),t(f,{"align-self":"center",class:"text-right"},{default:e(()=>[(r(!0),F(x,null,O(n.value,m=>(r(),g(Z,{class:"my-1"},{default:e(()=>[o(k(m.Personne.Prenom)+" : "+k(S(ie).label(m.Camp)),1)]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})):E("",!0)]),_:1,__:[0]})]),_:1}))}}),tl={class:"overflow-y-auto",style:{"max-height":"75vh"}},ll=W({__name:"Main",setup(c){const s=D("");de(async()=>{const I=new URLSearchParams(window.location.search),i=I.get("token")||"",Y=!!I.get("from-inscription"),y=Number(I.get("idEvent")||0);if(s.value=i,await d(),!!a.value){if(Y){$.value=!0;return}V(y)}});const a=D(null);async function d(){const I=await A.Load({token:s.value});I!==void 0&&(a.value=I)}const n=B(()=>a.value==null?[]:vt(a.value.Dossier,Ft.Espaceperso)),v=B(()=>a.value?a.value.DocumentsToReadOrFillCount+a.value.FichesanitaireToFillCount:0);function V(I){if(!a.value)return;const i=(a.value.Dossier.Events||[]).find(Y=>Y.Id==I);if(i)switch(i.Content.Kind){case me.Validation:j.value=!0;return;case me.Facture:L.value=!0;return;case me.PlaceLiberee:T.value=i;return;case me.CampDocs:R.value=!0;return;case me.Sondage:u.value=i.Content.Data.IdCamp;return;default:return}}const m=D(null);async function _(){if(!m.value||!a.value)return;const I={Token:s.value,Message:m.value.content,OnlyToFondSoutien:m.value.toFondSoutien};m.value=null;const i=await A.SendMessage(I);i!==void 0&&(A.showMessage("Message envoyé avec succès."),a.value.Dossier.Events=(a.value.Dossier.Events||[]).concat(i))}function b(I){return I.Participant.Statut==G.Inscrit?"bg-lime-lighten-2":I.Participant.Statut==G.AStatuer?"bg-grey-lighten-1":"bg-orange-lighten-3"}const l=D(!1);async function p(I){l.value=!1,await A.UpdateParticipants({Token:s.value,Participants:I})!==void 0&&A.showMessage("Modifications enregistrées avec succès. Merci !")}const u=D(null),P=D(!1),C=D(!1),R=D(!1),L=D(!1),j=D(!1),$=D(!1),T=D(null);async function ne(){const I=T.value;!I||(T.value=null,await A.AcceptePlaceLiberee({token:s.value,idEvent:I.Id})===void 0)||(d(),A.showMessage("Place acceptée avec succès."))}return(I,i)=>{const Y=Ut;return r(),F(x,null,[t(Tt,{title:"Espace de suivi de votre inscription"},{default:e(()=>[t(q,{onClick:i[0]||(i[0]=y=>u.value=0)},{prepend:e(()=>[t(N,null,{default:e(()=>i[26]||(i[26]=[o("mdi-comment-quote")])),_:1,__:[26]})]),default:e(()=>[i[27]||(i[27]=o(" Avis "))]),_:1,__:[27]}),t(q,{onClick:i[1]||(i[1]=y=>P.value=!0)},{prepend:e(()=>[t(N,null,{default:e(()=>i[28]||(i[28]=[o("mdi-image-album")])),_:1,__:[28]})]),default:e(()=>[i[29]||(i[29]=o(" Album photos "))]),_:1,__:[29]}),t(ge,null,{activator:e(({props:y})=>[t(q,_e(ye(y)),{prepend:e(()=>[t(N,null,{default:e(()=>i[30]||(i[30]=[o("mdi-download")])),_:1,__:[30]})]),default:e(()=>[i[31]||(i[31]=o(" Justificatifs "))]),_:2,__:[31]},1040)]),default:e(()=>[t(se,null,{default:e(()=>[t(H,{title:"Attestation de présence",subtitle:"Télécharger au format .pdf","prepend-icon":"mdi-file-document-check",link:"",href:S(Ae).DownloadAttestationPresence(s.value)},null,8,["href"]),t(H,{title:"Facture",subtitle:"Télécharger au format .pdf","prepend-icon":"mdi-invoice-list",href:S(Ae).DownloadFacture(s.value)},null,8,["href"])]),_:1})]),_:1})]),_:1}),a.value==null?(r(),g(be,{key:0,type:"card"})):(r(),g(gt,{key:1,class:"fill-height",fluid:""},{default:e(()=>[t(h,null,{default:e(()=>[t(f,{"align-self":"center",cols:"5"},{default:e(()=>[t(M,{subtitle:"Participants"},{append:e(()=>[t(q,{size:"small",class:"mr-1"},{prepend:e(()=>[t(N,null,{default:e(()=>i[32]||(i[32]=[o("mdi-folder")])),_:1,__:[32]})]),default:e(()=>[t(ce,{color:v.value?"pink":"transparent",content:v.value||"",floating:""},{default:e(()=>i[33]||(i[33]=[o(" Documents ")])),_:1,__:[33]},8,["color","content"]),t(ge,{activator:"parent"},{default:e(()=>[t(se,null,{default:e(()=>[t(H,{title:"Documents du séjour",subtitle:"Lettre du directeur, ...","prepend-icon":"mdi-mail",onClick:i[2]||(i[2]=y=>R.value=!0)},ke({_:2},[a.value.DocumentsToReadOrFillCount?{name:"append",fn:e(()=>[t(ce,{color:"pink",content:a.value.DocumentsToReadOrFillCount,inline:""},null,8,["content"])]),key:"0"}:void 0]),1024),t(H,{title:"Fiches sanitaires","prepend-icon":"mdi-pill",onClick:i[3]||(i[3]=y=>C.value=!0)},ke({_:2},[a.value.FichesanitaireToFillCount?{name:"append",fn:e(()=>[t(ce,{color:"pink",content:a.value.FichesanitaireToFillCount,inline:""},null,8,["content"])]),key:"0"}:void 0]),1024)]),_:1})]),_:1})]),_:1})]),default:e(()=>[t(w,null,{default:e(()=>[t(se,{class:"pa-0"},{default:e(()=>[(r(!0),F(x,null,O(a.value.Dossier.Participants,y=>(r(),g(H,{title:S(Ce).label(y.Personne),subtitle:S(ie).label(y.Camp),rounded:"",class:fe({"my-2":!0,[b(y)]:!0})},{append:e(()=>[t(Z,{variant:"elevated",color:S(ee).statutParticipant(y.Participant.Statut).color,"prepend-icon":S(ee).statutParticipant(y.Participant.Statut).icon},{default:e(()=>[o(k(S(Rt)[y.Participant.Statut]),1)]),_:2},1032,["color","prepend-icon"])]),_:2},1032,["title","subtitle","class"]))),256))]),_:1})]),_:1})]),_:1}),t(Nt,{token:s.value,dossier:a.value.Dossier,"is-paiement-open":a.value.IsPaiementOpen,settings:a.value.PaiementSettings,onRefresh:d,onShowReglement:i[4]||(i[4]=y=>L.value=!0)},null,8,["token","dossier","is-paiement-open","settings"])]),_:1}),t(f,{"align-self":"center"},{default:e(()=>[t(M,{subtitle:"Fil de suivi de votre inscription"},{append:e(()=>[t(q,{onClick:i[5]||(i[5]=y=>m.value={content:"",toFondSoutien:!1})},{prepend:e(()=>[t(N,null,{default:e(()=>i[34]||(i[34]=[o("mdi-email")])),_:1,__:[34]})]),default:e(()=>[i[35]||(i[35]=o(" Nous écrire"))]),_:1,__:[35]})]),default:e(()=>[t(w,null,{default:e(()=>[U("div",tl,[t(St,{side:"end",class:"mt-4",density:"compact"},{default:e(()=>[(r(!0),F(x,null,O(n.value,y=>(r(),g(Y,{event:y,onGoToSondage:i[6]||(i[6]=te=>u.value=te),onGoToDocuments:i[7]||(i[7]=te=>R.value=!0),onGoToValidation:i[8]||(i[8]=te=>j.value=!0),onAcceptPlaceLiberee:i[9]||(i[9]=te=>V(te)),onReplyFondSoutien:i[10]||(i[10]=te=>m.value={content:"",toFondSoutien:!0})},null,8,["event"]))),256))]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1}),t(X,{modelValue:l.value,"onUpdate:modelValue":i[11]||(i[11]=y=>l.value=y)},{default:e(()=>[t(Et,{participants:a.value.Dossier.Participants||[],onSave:p},null,8,["participants"])]),_:1},8,["modelValue"])]),_:1})),t(X,{"model-value":m.value!=null,"onUpdate:modelValue":i[13]||(i[13]=y=>m.value=null),"max-width":"600px"},{default:e(()=>[m.value?(r(),g(M,{key:0,title:"Nouveau message",subtitle:m.value.toFondSoutien?"Ce message ne sera visible que par le fond de soutien.":"Ce message sera visible par le centre et les directeurs."},{default:e(()=>[t(w,null,{default:e(()=>[t(re,{autofocus:"",placeholder:"Rédigez votre message...",modelValue:m.value.content,"onUpdate:modelValue":i[12]||(i[12]=y=>m.value.content=y),rows:"10"},null,8,["modelValue"])]),_:1}),t(oe,null,{default:e(()=>[t(ve),t(q,{disabled:!m.value.content.length,onClick:_},{prepend:e(()=>[t(N,null,{default:e(()=>i[36]||(i[36]=[o("mdi-send")])),_:1,__:[36]})]),default:e(()=>[i[37]||(i[37]=o(" Envoyer"))]),_:1,__:[37]},8,["disabled"])]),_:1})]),_:1},8,["subtitle"])):E("",!0)]),_:1},8,["model-value"]),t(X,{"model-value":u.value!=null,"onUpdate:modelValue":i[14]||(i[14]=y=>u.value=null)},{default:e(()=>[u.value!=null?(r(),g(Gt,{key:0,token:s.value,"initial-camp":u.value},null,8,["token","initial-camp"])):E("",!0)]),_:1},8,["model-value"]),t(X,{modelValue:P.value,"onUpdate:modelValue":i[15]||(i[15]=y=>P.value=y)},{default:e(()=>[t(qt,{token:s.value},null,8,["token"])]),_:1},8,["modelValue"]),t(X,{modelValue:C.value,"onUpdate:modelValue":i[18]||(i[18]=y=>C.value=y)},{default:e(()=>[t(Bt,{token:s.value,onClose:i[16]||(i[16]=y=>C.value=!1),onUpdateNotifs:i[17]||(i[17]=y=>a.value.FichesanitaireToFillCount=y)},null,8,["token"])]),_:1},8,["modelValue"]),t(X,{modelValue:R.value,"onUpdate:modelValue":i[21]||(i[21]=y=>R.value=y),"max-width":"800px"},{default:e(()=>[t(Wt,{token:s.value,onClose:i[19]||(i[19]=y=>R.value=!1),onUpdateNotifs:i[20]||(i[20]=y=>a.value.DocumentsToReadOrFillCount=y)},null,8,["token"])]),_:1},8,["modelValue"]),a.value?(r(),g(X,{key:2,modelValue:L.value,"onUpdate:modelValue":i[22]||(i[22]=y=>L.value=y),"max-width":"800px"},{default:e(()=>[t(Qt,{token:s.value,dossier:a.value.Dossier,settings:a.value.PaiementSettings},null,8,["token","dossier","settings"])]),_:1},8,["modelValue"])):E("",!0),t(X,{modelValue:$.value,"onUpdate:modelValue":i[23]||(i[23]=y=>$.value=y),"max-width":"800px"},{default:e(()=>[t(Yt)]),_:1},8,["modelValue"]),t(X,{modelValue:j.value,"onUpdate:modelValue":i[24]||(i[24]=y=>j.value=y),"max-width":"800px"},{default:e(()=>[a.value?(r(),g(el,{key:0,dossier:a.value.Dossier},null,8,["dossier"])):E("",!0)]),_:1},8,["modelValue"]),t(X,{"model-value":T.value!=null,"onUpdate:modelValue":i[25]||(i[25]=y=>T.value=null),"max-width":"600px"},{default:e(()=>[T.value?(r(),g(M,{key:0,title:"Accepter la place"},{default:e(()=>[t(w,null,{default:e(()=>[o(" Confirmez-vous l'inscription de "+k(T.value.Content.Data.ParticipantLabel)+" sur le séjour "+k(T.value.Content.Data.CampLabel)+" ? ",1),i[38]||(i[38]=U("br",null,null,-1)),i[39]||(i[39]=U("br",null,null,-1)),i[40]||(i[40]=U("span",{class:"text-grey"},"Un mail de notification sera envoyé automatiquement au centre.",-1))]),_:1,__:[38,39,40]}),t(oe,null,{default:e(()=>[t(ve),t(q,{color:"success",onClick:ne},{default:e(()=>i[41]||(i[41]=[o("Confirmer")])),_:1,__:[41]})]),_:1})]),_:1})):E("",!0)]),_:1},8,["model-value"])],64)}}}),al=["innerHTML"],nl=W({__name:"App",setup(c){const s=De({text:"",color:"secondary",action:void 0,timeout:4e3}),a=D(""),d=D("");return A.onError=(n,v)=>{a.value=n,d.value=v},A.showMessage=(n,v,V)=>{s.text=n,s.color=v||"success",s.action=V,s.timeout=1e4,s.timeout=4e3},(n,v)=>(r(),g(Vt,null,{default:e(()=>[t(bt,null,{default:e(()=>[t(ll),t(we,{style:{"z-index":"10000"},app:"","model-value":s.text!="","onUpdate:modelValue":v[1]||(v[1]=V=>s.text=""),timeout:s.timeout,color:s.color,location:"bottom left","close-on-content-click":""},{default:e(()=>[o(k(s.text)+" ",1),s.action?(r(),g(q,{key:0,onClick:v[0]||(v[0]=V=>s.action.action()),class:"ml-2"},{default:e(()=>[o(k(s.action.title),1)]),_:1})):E("",!0)]),_:1},8,["model-value","timeout","color"]),t(we,{app:"","model-value":a.value!="","onUpdate:modelValue":v[2]||(v[2]=V=>a.value=""),timeout:4e3,color:"red"},{default:e(()=>[U("b",null,k(a.value),1),U("div",{innerHTML:d.value},null,8,al)]),_:1},8,["model-value"])]),_:1})]),_:1}))}}),$e=_t(nl);$e.use(yt);$e.mount("#app");
