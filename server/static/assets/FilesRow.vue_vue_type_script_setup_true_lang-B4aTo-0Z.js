import{a as w,_ as F}from"./FileCard.vue_vue_type_script_setup_true_lang-C4k0psNR.js";import{cl as c,d as L,r as h,aR as H,f,o as p,w as t,b as r,g as M,n as B,e as D,m as U,i as N,a as I,F as $,_ as j,j as E,a1 as V,A as y,l as z,R as J}from"./VSnackbar--Whjvjaq.js";import{V as W,i as k,b as _,c as x,e as q,f as R}from"./VTextarea-CO0IE_yp.js";const o={NoBuiltin:0,CarteId:1,Permis:2,SB:3,Secourisme:4,Bafa:5,Bafd:6,CarteVitale:7,Vaccins:8,Haccp:9,BafdEquiv:10,BafaEquiv:11,CertMedicalCuisine:12,Scolarite:13,Autre:14,nbCategorieEquipier:15},Q={[o.NoBuiltin]:"-",[o.CarteId]:"Carte d'identité/Passeport",[o.Permis]:"Permis de conduire",[o.SB]:"Surveillant de baignade",[o.Secourisme]:"Secourisme (PSC1 - AFPS)",[o.Bafa]:"BAFA",[o.Bafd]:"BAFD",[o.CarteVitale]:"Carte Vitale",[o.Vaccins]:"Vaccins",[o.Haccp]:"Cuisine (HACCP)",[o.BafdEquiv]:"Equivalent BAFD",[o.BafaEquiv]:"Equivalent BAFA",[o.CertMedicalCuisine]:"Certificat médical cuisine",[o.Scolarite]:"Certificat de scolarité",[o.Autre]:"Autre",[o.nbCategorieEquipier]:""},m={AAucun:0,AAutre:1,ASb:2,ACanoe:3,AVoile:4,AMoto:5},X={[m.AAucun]:"Non effectué",[m.AAutre]:"Approfondissement",[m.ASb]:"Surveillant de baignade",[m.ACanoe]:"Canoë - Kayak",[m.AVoile]:"Voile",[m.AMoto]:"Loisirs motocyclistes"},a={DAucun:0,DBafa:1,DBafaStag:2,DBafd:3,DBafdStag:4,DCap:5,DAssSociale:6,DEducSpe:7,DMonEduc:8,DInstit:9,DProf:10,DAgreg:11,DBjeps:12,DDut:13,DEje:14,DDeug:15,DStaps:16,DBapaat:17,DBeatep:18,DZzautre:19},Y={[a.DAucun]:"Aucun",[a.DBafa]:"BAFA Titulaire",[a.DBafaStag]:"BAFA Stagiaire",[a.DBafd]:"BAFD titulaire",[a.DBafdStag]:"BAFD stagiaire",[a.DCap]:"CAP petit enfance",[a.DAssSociale]:"Assitante Sociale",[a.DEducSpe]:"Educ. spé.",[a.DMonEduc]:"Moniteur educateur",[a.DInstit]:"Professeur des écoles",[a.DProf]:"Enseignant du secondaire",[a.DAgreg]:"Agrégé",[a.DBjeps]:"BPJEPS",[a.DDut]:"DUT carrière sociale",[a.DEje]:"EJE",[a.DDeug]:"DEUG",[a.DStaps]:"STAPS",[a.DBapaat]:"BAPAAT",[a.DBeatep]:"BEATEP",[a.DZzautre]:"AUTRE"},v={NoSexe:0,Woman:1,Man:2};v.NoSexe+"",v.Woman+"",v.Man+"";class ee{constructor(l,e){this.baseURL=l,this.authToken=e}getHeaders(){return{Authorization:"Bearer "+this.authToken}}async Load(l){const e=this.baseURL+"/api/v1/equipier";this.startRequest();try{return(await c.get(e,{headers:this.getHeaders(),params:{token:l.token}})).data}catch(i){this.handleError(i)}}async LoadJoomeo(l){const e=this.baseURL+"/api/v1/equipier/joomeo";this.startRequest();try{return(await c.get(e,{headers:this.getHeaders(),params:{token:l.token}})).data}catch(i){this.handleError(i)}}async Update(l){const e=this.baseURL+"/api/v1/equipier";this.startRequest();try{return await c.post(e,l,{headers:this.getHeaders()}),!0}catch(i){this.handleError(i)}}async UpdateCharte(l){const e=this.baseURL+"/api/v1/equipier/charte";this.startRequest();try{return await c.post(e,null,{headers:this.getHeaders(),params:{token:l.token,accept:l.accept?"ok":""}}),!0}catch(i){this.handleError(i)}}async UploadDocument(l,e){const i=this.baseURL+"/api/v1/equipier/upload";this.startRequest();try{const n=new FormData;return n.append("document",l,l.name),(await c.put(i,n,{headers:this.getHeaders(),params:{token:e.token,idDemande:String(e.idDemande)}})).data}catch(n){this.handleError(n)}}async DeleteDocument(l){const e=this.baseURL+"/api/v1/equipier/upload";this.startRequest();try{return await c.delete(e,{headers:this.getHeaders(),params:{key:l.key}}),!0}catch(i){this.handleError(i)}}}const ae=L({__name:"FilesRow",props:{title:{},subtitle:{},maxDocs:{},files:{},inUpload:{type:Boolean},showUploadText:{type:Boolean}},emits:["upload","delete"],setup(C,{emit:l}){const e=C,i=l,n=h(!1),A=h(null),d=h(null),S=H("input");function b(){n.value=!0,J(()=>{var g;return(g=S.value)==null?void 0:g.openDialog()})}return(g,s)=>{const P=F,T=w;return p(),f(W,{title:e.title,subtitle:e.subtitle,rounded:"",class:"bg-grey-lighten-4 my-1"},{prepend:t(()=>[z(g.$slots,"prepend")]),append:t(()=>[r(N,null,{default:t(()=>[(p(!0),I($,null,j(e.files,u=>(p(),f(E,{"align-self":"center"},{default:t(()=>[r(P,{file:u,onDelete:Z=>d.value=u},null,8,["file","onDelete"])]),_:2},1024))),256)),r(E,{"align-self":"center",cols:"auto"},{default:t(()=>[e.showUploadText?(p(),f(B,{key:0,class:"my-2",size:"small",onClick:b,disabled:e.inUpload||e.maxDocs!=0&&e.files.length>=e.maxDocs},{prepend:t(()=>[r(V,{color:"green",icon:e.inUpload?"mdi-loading":"mdi-upload",class:y(e.inUpload?"mdi-spin":void 0)},null,8,["icon","class"])]),default:t(()=>[s[5]||(s[5]=D(" Téléverser un document "))]),_:1,__:[5]},8,["disabled"])):(p(),f(B,{key:1,class:"my-2",icon:"",size:"x-small",onClick:b,disabled:e.inUpload||e.maxDocs!=0&&e.files.length>=e.maxDocs},{default:t(()=>[r(V,{color:"green",icon:e.inUpload?"mdi-loading":"mdi-upload",class:y(e.inUpload?"mdi-spin":void 0)},null,8,["icon","class"])]),_:1},8,["disabled"]))]),_:1})]),_:1})]),default:t(()=>[r(k,{modelValue:n.value,"onUpdate:modelValue":s[2]||(s[2]=u=>n.value=u),"max-width":"600px"},{default:t(()=>[r(_,{title:"Téléverser un document"},{default:t(()=>[r(x,null,{default:t(()=>[r(T,{onUpdate:s[0]||(s[0]=u=>A.value=u),ref_key:"input",ref:S},null,512)]),_:1}),r(q,null,{default:t(()=>[r(R),r(B,{disabled:A.value==null,onClick:s[1]||(s[1]=u=>{i("upload",A.value),n.value=!1})},{default:t(()=>s[6]||(s[6]=[D("Téléverser")])),_:1,__:[6]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),d.value!=null?(p(),f(k,{key:0,"model-value":d.value!=null,"onUpdate:modelValue":s[4]||(s[4]=u=>d.value=null),"max-width":"600px"},{default:t(()=>[r(_,{title:"Confirmation"},{default:t(()=>[r(x,null,{default:t(()=>s[7]||(s[7]=[D(" Le document va être supprimé. "),U("br",null,null,-1),U("br",null,null,-1),D(" Attention, cette opération est irréversible. ")])),_:1,__:[7]}),r(q,null,{default:t(()=>[r(R),r(B,{color:"red",onClick:s[3]||(s[3]=u=>{i("delete",d.value),d.value=null})},{default:t(()=>s[8]||(s[8]=[D("Supprimer")])),_:1,__:[8]})]),_:1})]),_:1})]),_:1},8,["model-value"])):M("",!0)]),_:3},8,["title","subtitle"])}}});export{ee as A,o as C,Y as D,v as S,ae as _,X as a,Q as b};
