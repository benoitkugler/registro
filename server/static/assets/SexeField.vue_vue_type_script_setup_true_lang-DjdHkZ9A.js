import{s as _e,t as Ae,H as A,v as Me,w as Pe,b as X,x as Ee,y as Be,e as Le,g as Ue,V as ne,z as Te,a as Ne,k as He,n as Oe,h as qe,i as ze}from"./VTextarea-p7qetQbe.js";import{z as Ke,A as $e,B as je,k as L,P as M,aO as Je,N as ue,O as We,c as C,aC as P,d1 as Ge,R as E,bN as oe,cj as Xe,C as Ze,b as y,X as D,cg as Qe,ck as Ye,S as ea,d2 as aa,cl as se,j as F,a6 as re,cn as la,F as J,co as ta,cp as na,J as ua,E as oa,H as sa,e as ra,d as Z,v as Q,x as Y,y as ee,o as ae,L as ia,b1 as ca,d3 as W,d4 as da,cA as B,a8 as va,a1 as fa}from"./VSnackbar-CoLoRMBr.js";import{u as ma,m as ha,h as pa}from"./VForm-DfUsynlk.js";import{_ as ya}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ba=$e({alwaysFilter:Boolean,autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...ha({filterKeys:["title"]}),...Ee({hideNoData:!0,returnObject:!0}),...ea(Be({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Ye({transition:!1})},"VCombobox"),ga=Ke()({name:"VCombobox",props:ba(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:search":e=>!0,"update:menu":e=>!0},setup(e,u){let{emit:s,slots:t}=u;const{t:S}=je(),r=L(),f=M(!1),h=M(!0),g=M(!1),x=L(),U=L(),i=M(-1);let T=!1;const{items:le,transformIn:ie,transformOut:ce}=_e(e),{textColorClasses:de,textColorStyles:ve}=Je(()=>r.value?.color),o=ue(e,"modelValue",[],a=>ie(We(a)),a=>{const c=ce(a);return e.multiple?c:c[0]??null}),N=Ae(e),H=C(()=>!!(e.chips||t.chip)),k=C(()=>H.value||!!t.selection),w=M(!e.multiple&&!k.value?o.value[0]?.title??"":""),m=C({get:()=>w.value,set:async a=>{if(w.value=a??"",!e.multiple&&!k.value&&(o.value=[A(e,a)],P(()=>U.value?.scrollToIndex(0))),a&&e.multiple&&e.delimiters?.length){const c=e.delimiters.map(Ge).join("|"),d=a.split(new RegExp(`(?:${c})+`));if(d.length>1){for(let l of d)l=l.trim(),l&&(V(A(e,l)),await P());w.value=""}}a||(i.value=-1),h.value=!a}}),fe=C(()=>typeof e.counterValue=="function"?e.counterValue(o.value):typeof e.counterValue=="number"?e.counterValue:e.multiple?o.value.length:m.value.length),{filteredItems:O,getMatches:me}=ma(e,le,()=>e.alwaysFilter||!h.value?m.value:""),I=C(()=>e.hideSelected?O.value.filter(a=>!o.value.some(c=>c.value===a.value)):O.value),q=C(()=>e.hideNoData&&!I.value.length||N.isReadonly.value||N.isDisabled.value),K=ue(e,"menu"),v=C({get:()=>K.value,set:a=>{K.value&&!a&&x.value?.Î¨openChildren.size||a&&q.value||(K.value=a)}}),{menuId:he,ariaExpanded:pe,ariaControls:ye,ariaLabel:te}=Me(e,v);E(w,a=>{T?P(()=>T=!1):f.value&&!v.value&&(v.value=!0),s("update:search",a)}),E(o,a=>{!e.multiple&&!k.value&&(w.value=a[0]?.title??"")});const be=C(()=>o.value.map(a=>a.value)),$=C(()=>(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&m.value===I.value[0]?.title)&&I.value.length>0&&!h.value&&!g.value),j=L(),ge=Pe(j,r);function Ve(a){T=!0,P(()=>T=!1),e.openOnClear&&(v.value=!0)}function xe(){q.value||(v.value=!0)}function ke(a){q.value||(f.value&&(a.preventDefault(),a.stopPropagation()),v.value=!v.value)}function Ce(a){(se(a)||a.key==="Backspace")&&r.value?.focus()}function Se(a){if(aa(a)||N.isReadonly.value)return;const c=r.value?.selectionStart,d=o.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(a.key)&&a.preventDefault(),["Enter","ArrowDown"].includes(a.key)&&(v.value=!0),["Escape"].includes(a.key)&&(v.value=!1),["Enter","Escape","Tab"].includes(a.key)&&($.value&&["Enter","Tab"].includes(a.key)&&!o.value.some(l=>{let{value:n}=l;return n===I.value[0].value})&&V(O.value[0]),h.value=!0),a.key==="ArrowDown"&&$.value&&j.value?.focus("next"),a.key==="Enter"&&m.value&&(V(A(e,m.value)),k.value&&(w.value="")),["Backspace","Delete"].includes(a.key)){if(!e.multiple&&k.value&&o.value.length>0&&!m.value)return V(o.value[0],!1);if(~i.value){a.preventDefault();const l=i.value;V(o.value[i.value],!1),i.value=l>=d-1?d-2:l}else a.key==="Backspace"&&!m.value&&(i.value=d-1);return}if(e.multiple)if(a.key==="ArrowLeft"){if(i.value<0&&c&&c>0)return;const l=i.value>-1?i.value-1:d-1;o.value[l]?i.value=l:(i.value=-1,r.value?.setSelectionRange(m.value.length,m.value.length))}else if(a.key==="ArrowRight"){if(i.value<0)return;const l=i.value+1;o.value[l]?i.value=l:(i.value=-1,r.value?.setSelectionRange(0,0))}else~i.value&&se(a)&&(i.value=-1)}function we(){e.eager&&U.value?.calculateVisibleItems()}function Ie(){f.value&&(h.value=!0,r.value?.focus())}function V(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!a||a.props.disabled))if(e.multiple){const d=o.value.findIndex(n=>(e.valueComparator||oe)(n.value,a.value)),l=c??!~d;if(~d){const n=l?[...o.value,a]:[...o.value];n.splice(d,1),o.value=n}else l&&(o.value=[...o.value,a]);e.clearOnSelect&&(m.value="")}else{const d=c!==!1;o.value=d?[a]:[],w.value=d&&!k.value?a.title:"",P(()=>{v.value=!1,h.value=!0})}}function De(a){f.value=!0,setTimeout(()=>{g.value=!0})}function Fe(a){g.value=!1}function Re(a){(a==null||a===""&&!e.multiple&&!k.value)&&(o.value=[])}return E(f,(a,c)=>{if(!(a||a===c)&&(i.value=-1,v.value=!1,m.value)){if(e.multiple){V(A(e,m.value));return}if(!k.value)return;o.value.some(d=>{let{title:l}=d;return l===m.value})?w.value="":V(A(e,m.value))}}),E(v,()=>{if(!e.hideSelected&&v.value&&o.value.length){const a=I.value.findIndex(c=>o.value.some(d=>(e.valueComparator||oe)(d.value,c.value)));Xe&&window.requestAnimationFrame(()=>{a>=0&&U.value?.scrollToIndex(a)})}}),E(le,(a,c)=>{v.value||f.value&&!c.length&&a.length&&(v.value=!0)}),Ze(()=>{const a=!!(!e.hideNoData||I.value.length||t["prepend-item"]||t["append-item"]||t["no-data"]),c=o.value.length>0,d=X.filterProps(e);return y(X,D({ref:r},d,{modelValue:m.value,"onUpdate:modelValue":[l=>m.value=l,Re],focused:f.value,"onUpdate:focused":l=>f.value=l,validationValue:o.externalValue,counterValue:fe.value,dirty:c,class:["v-combobox",{"v-combobox--active-menu":v.value,"v-combobox--chips":!!e.chips,"v-combobox--selection-slot":!!k.value,"v-combobox--selecting-index":i.value>-1,[`v-combobox--${e.multiple?"multiple":"single"}`]:!0},e.class],style:e.style,readonly:N.isReadonly.value,placeholder:c?void 0:e.placeholder,"onClick:clear":Ve,"onMousedown:control":xe,onKeydown:Se,"aria-expanded":pe.value,"aria-controls":ye.value}),{...t,default:()=>F(J,null,[y(Le,D({id:he.value,ref:x,modelValue:v.value,"onUpdate:modelValue":l=>v.value=l,activator:"parent",contentClass:"v-combobox__content",disabled:q.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:we,onAfterLeave:Ie},e.menuProps),{default:()=>[a&&y(Ue,D({ref:j,filterable:!0,selected:be.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:l=>l.preventDefault(),selectable:!0,onKeydown:Ce,onFocusin:De,onFocusout:Fe,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},ge,e.listProps),{default:()=>[t["prepend-item"]?.(),!I.value.length&&!e.hideNoData&&(t["no-data"]?.()??y(ne,{key:"no-data",title:S(e.noDataText)},null)),y(Te,{ref:U,renderless:!0,items:I.value,itemKey:"value"},{default:l=>{let{item:n,index:p,itemRef:z}=l;const R=D(n.props,{ref:z,key:n.value,active:$.value&&p===0?!0:void 0,onClick:()=>V(n,null)});return n.type==="divider"?t.divider?.({props:n.raw,index:p})??y(Ne,D(n.props,{key:`divider-${p}`}),null):n.type==="subheader"?t.subheader?.({props:n.raw,index:p})??y(He,D(n.props,{key:`subheader-${p}`}),null):t.item?.({item:n,index:p,props:R})??y(ne,D(R,{role:"option"}),{prepend:_=>{let{isSelected:b}=_;return F(J,null,[e.multiple&&!e.hideSelected?y(Oe,{key:n.value,modelValue:b,ripple:!1,tabindex:"-1"},null):void 0,n.props.prependAvatar&&y(ta,{image:n.props.prependAvatar},null),n.props.prependIcon&&y(re,{icon:n.props.prependIcon},null)])},title:()=>h.value?n.title:pa("v-combobox",n.title,me(n)?.title)})}}),t["append-item"]?.()]})]}),o.value.map((l,n)=>{function p(b){b.stopPropagation(),b.preventDefault(),V(l,!1)}const z={"onClick:close":p,onKeydown(b){b.key!=="Enter"&&b.key!==" "||(b.preventDefault(),b.stopPropagation(),p(b))},onMousedown(b){b.preventDefault(),b.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},R=H.value?!!t.chip:!!t.selection,_=R?na(H.value?t.chip({item:l,index:n,props:z}):t.selection({item:l,index:n})):void 0;if(!(R&&!_))return F("div",{key:l.value,class:oa(["v-combobox__selection",n===i.value&&["v-combobox__selection--selected",de.value]]),style:ua(n===i.value?ve.value:{})},[H.value?t.chip?y(sa,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:l.title}}},{default:()=>[_]}):y(qe,D({key:"chip",closable:e.closableChips,size:"small",text:l.title,disabled:l.props.disabled},z),null):_??F("span",{class:"v-combobox__selection-text"},[l.title,e.multiple&&n<o.value.length-1&&F("span",{class:"v-combobox__selection-comma"},[ra(",")])])])})]),"append-inner":function(){for(var l=arguments.length,n=new Array(l),p=0;p<l;p++)n[p]=arguments[p];return F(J,null,[t["append-inner"]?.(...n),(!e.hideNoData||e.items.length)&&e.menuIcon?y(re,{class:"v-combobox__menu-icon",color:r.value?.fieldIconColor,icon:e.menuIcon,onMousedown:ke,onClick:la,"aria-label":te.value,title:te.value,tabindex:"-1"},null):void 0])}})}),Qe({isFocused:f,isPristine:h,menu:v,search:m,selectionIndex:i,filteredItems:O,select:V},r)}}),Ia=Z({__name:"StringList",props:Q({label:{},formatter:{type:Function},hideDetails:{type:Boolean},readonly:{type:Boolean},rule:{type:Function}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const u=e,s=Y(e,"modelValue");function t(r){r=r||[];const f=u.formatter??(h=>h);s.value=r.map(f)}function S(r){return u.rule(r)}return(r,f)=>(ae(),ee(ga,{variant:"outlined",density:"compact",label:u.label,chips:"",multiple:"","closable-chips":"",modelValue:s.value,"onUpdate:modelValue":[f[0]||(f[0]=h=>s.value=h),t],rules:u.rule?[S]:void 0},null,8,["label","modelValue","rules"]))}}),Va=Z({__name:"DateNaissanceField",props:Q({label:{},hideDetails:{type:Boolean},readonly:{type:Boolean},error:{},rule:{type:Function}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const u=e,s=Y(e,"modelValue"),t=ia(),S=L(ca(s.value)?"":t.parseISO(s.value).toLocaleDateString());function r(g){g=da(g),S.value=g;const x=W(g);x!==void 0&&(s.value=x)}function f(){W(S.value)===void 0&&(s.value="0001-01-01")}function h(g){if(!g.length)return u.rule("0001-01-01");const x=W(g);return x===void 0?!1:u.rule(x)}return(g,x)=>(ae(),ee(X,{class:"center-text",variant:"outlined",density:"compact",placeholder:"JJ/MM/AAAA",label:u.label||"Date de naissance","model-value":S.value,"onUpdate:modelValue":r,readonly:u.readonly,rules:u.rule?[h]:void 0,"hide-details":u.hideDetails,onBlur:f},null,8,["label","model-value","readonly","rules","hide-details"]))}}),Da=ya(Va,[["__scopeId","data-v-fb288a49"]]),G={NoSexe:0,Woman:1,Man:2},xa={[G.NoSexe]:"",[G.Woman]:"Femme",[G.Man]:"Homme"};class Fa{constructor(u,s){this.baseURL=u,this.authToken=s}getHeaders(){return{Authorization:"Bearer "+this.authToken}}async ConfirmeInscription(u){const s=this.baseURL+"/inscription/confirme";this.startRequest();try{return await B.get(s,{headers:this.getHeaders(),params:{"insc-token":u["insc-token"]}}),!0}catch(t){this.handleError(t)}}async GetCamps(){const u=this.baseURL+"/api/v1/inscription/camps";this.startRequest();try{return(await B.get(u,{headers:this.getHeaders()})).data}catch(s){this.handleError(s)}}async InitInscription(u){const s=this.baseURL+"/api/v1/inscription";this.startRequest();try{return(await B.get(s,{headers:this.getHeaders(),params:{preinscription:u.preinscription}})).data}catch(t){this.handleError(t)}}async SaveInscription(u){const s=this.baseURL+"/api/v1/inscription";this.startRequest();try{return await B.put(s,u,{headers:this.getHeaders()}),!0}catch(t){this.handleError(t)}}async SearchHistory(u){const s=this.baseURL+"/api/v1/inscription/search";this.startRequest();try{return(await B.get(s,{headers:this.getHeaders(),params:{mail:u.mail}})).data}catch(t){this.handleError(t)}}}const Ra=Z({__name:"SexeField",props:Q({hideDetails:{type:Boolean},readonly:{type:Boolean},rules:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const u=e,s=Y(e,"modelValue"),t=va(xa);return(S,r)=>(ae(),ee(ze,{label:"Sexe",variant:"outlined",density:"compact",items:fa(t),readonly:u.readonly,"hide-details":u.hideDetails,modelValue:s.value,"onUpdate:modelValue":r[0]||(r[0]=f=>s.value=f),rules:u.rules},null,8,["items","readonly","hide-details","modelValue","rules"]))}});export{Fa as A,G as S,ga as V,Ia as _,Ra as a,Da as b};
