import{u as _e,r as Ae,N as A,s as Me,t as Ee,d as Y,v as Pe,w as Be,h as Le,j as Ue,V as ne,x as Te,a as Ne,n as qe,q as He,y as Oe,k as Ke,l as ze}from"./VTextarea-iANrb6Vp.js";import{q as $e,s as je,v as We,k as L,J as M,aG as Ge,G as ue,H as Je,c as S,av as E,cX as Ye,L as P,bE as oe,c9 as Ze,x as Xe,b as y,R as D,ca as Qe,cb as ea,N as aa,cY as ta,cc as se,j as F,a2 as re,ce as la,F as W,cf as na,C as ua,z as oa,B as sa,e as ra,d as Z,n as X,u as Q,p as ee,o as ae,D as ia,aW as ca,cZ as G,c_ as da,cs as B,a4 as va,Y as fa}from"./VSnackbar-BIDVaiYL.js";import{u as ma,m as ha,h as pa}from"./filter-C0t48wCN.js";const ya=(e,u)=>{const o=e.__vccOpts||e;for(const[l,V]of u)o[l]=V;return o},ba=je({alwaysFilter:Boolean,autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...ha({filterKeys:["title"]}),...Pe({hideNoData:!0,returnObject:!0}),...aa(Be({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...ea({transition:!1})},"VCombobox"),ga=$e()({name:"VCombobox",props:ba(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:search":e=>!0,"update:menu":e=>!0},setup(e,u){let{emit:o,slots:l}=u;const{t:V}=We(),r=L(),f=M(!1),h=M(!0),g=M(!1),k=L(),U=L(),i=M(-1);let T=!1;const{items:te,transformIn:ie,transformOut:ce}=_e(e),{textColorClasses:de,textColorStyles:ve}=Ge(()=>r.value?.color),s=ue(e,"modelValue",[],a=>ie(Je(a)),a=>{const c=ce(a);return e.multiple?c:c[0]??null}),N=Ae(e),q=S(()=>!!(e.chips||l.chip)),C=S(()=>q.value||!!l.selection),w=M(!e.multiple&&!C.value?s.value[0]?.title??"":""),m=S({get:()=>w.value,set:async a=>{if(w.value=a??"",!e.multiple&&!C.value&&(s.value=[A(e,a)],E(()=>U.value?.scrollToIndex(0))),a&&e.multiple&&e.delimiters?.length){const c=e.delimiters.map(Ye).join("|"),d=a.split(new RegExp(`(?:${c})+`));if(d.length>1){for(let t of d)t=t.trim(),t&&(x(A(e,t)),await E());w.value=""}}a||(i.value=-1),h.value=!a}}),fe=S(()=>typeof e.counterValue=="function"?e.counterValue(s.value):typeof e.counterValue=="number"?e.counterValue:e.multiple?s.value.length:m.value.length),{filteredItems:H,getMatches:me}=ma(e,te,()=>e.alwaysFilter||!h.value?m.value:""),I=S(()=>e.hideSelected?H.value.filter(a=>!s.value.some(c=>c.value===a.value)):H.value),O=S(()=>e.hideNoData&&!I.value.length||N.isReadonly.value||N.isDisabled.value),z=ue(e,"menu"),v=S({get:()=>z.value,set:a=>{z.value&&!a&&k.value?.Î¨openChildren.size||a&&O.value||(z.value=a)}}),{menuId:he,ariaExpanded:pe,ariaControls:ye,ariaLabel:le}=Me(e,v);P(w,a=>{T?E(()=>T=!1):f.value&&!v.value&&(v.value=!0),o("update:search",a)}),P(s,a=>{!e.multiple&&!C.value&&(w.value=a[0]?.title??"")});const be=S(()=>s.value.map(a=>a.value)),$=S(()=>(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&m.value===I.value[0]?.title)&&I.value.length>0&&!h.value&&!g.value),j=L(),ge=Ee(j,r);function Ve(a){T=!0,E(()=>T=!1),e.openOnClear&&(v.value=!0)}function xe(){O.value||(v.value=!0)}function ke(a){O.value||(f.value&&(a.preventDefault(),a.stopPropagation()),v.value=!v.value)}function Ce(a){(se(a)||a.key==="Backspace")&&r.value?.focus()}function Se(a){if(ta(a)||N.isReadonly.value)return;const c=r.value?.selectionStart,d=s.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(a.key)&&a.preventDefault(),["Enter","ArrowDown"].includes(a.key)&&(v.value=!0),["Escape"].includes(a.key)&&(v.value=!1),["Enter","Escape","Tab"].includes(a.key)&&($.value&&["Enter","Tab"].includes(a.key)&&!s.value.some(t=>{let{value:n}=t;return n===I.value[0].value})&&x(H.value[0]),h.value=!0),a.key==="ArrowDown"&&$.value&&j.value?.focus("next"),a.key==="Enter"&&m.value&&(x(A(e,m.value)),C.value&&(w.value="")),["Backspace","Delete"].includes(a.key)){if(!e.multiple&&C.value&&s.value.length>0&&!m.value)return x(s.value[0],!1);if(~i.value){a.preventDefault();const t=i.value;x(s.value[i.value],!1),i.value=t>=d-1?d-2:t}else a.key==="Backspace"&&!m.value&&(i.value=d-1);return}if(e.multiple)if(a.key==="ArrowLeft"){if(i.value<0&&c&&c>0)return;const t=i.value>-1?i.value-1:d-1;s.value[t]?i.value=t:(i.value=-1,r.value?.setSelectionRange(m.value.length,m.value.length))}else if(a.key==="ArrowRight"){if(i.value<0)return;const t=i.value+1;s.value[t]?i.value=t:(i.value=-1,r.value?.setSelectionRange(0,0))}else~i.value&&se(a)&&(i.value=-1)}function we(){e.eager&&U.value?.calculateVisibleItems()}function Ie(){f.value&&(h.value=!0,r.value?.focus())}function x(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!a||a.props.disabled))if(e.multiple){const d=s.value.findIndex(n=>(e.valueComparator||oe)(n.value,a.value)),t=c??!~d;if(~d){const n=t?[...s.value,a]:[...s.value];n.splice(d,1),s.value=n}else t&&(s.value=[...s.value,a]);e.clearOnSelect&&(m.value="")}else{const d=c!==!1;s.value=d?[a]:[],w.value=d&&!C.value?a.title:"",E(()=>{v.value=!1,h.value=!0})}}function De(a){f.value=!0,setTimeout(()=>{g.value=!0})}function Fe(a){g.value=!1}function Re(a){(a==null||a===""&&!e.multiple&&!C.value)&&(s.value=[])}return P(f,(a,c)=>{if(!(a||a===c)&&(i.value=-1,v.value=!1,m.value)){if(e.multiple){x(A(e,m.value));return}if(!C.value)return;s.value.some(d=>{let{title:t}=d;return t===m.value})?w.value="":x(A(e,m.value))}}),P(v,()=>{if(!e.hideSelected&&v.value&&s.value.length){const a=I.value.findIndex(c=>s.value.some(d=>(e.valueComparator||oe)(d.value,c.value)));Ze&&window.requestAnimationFrame(()=>{a>=0&&U.value?.scrollToIndex(a)})}}),P(te,(a,c)=>{v.value||f.value&&!c.length&&a.length&&(v.value=!0)}),Xe(()=>{const a=!!(!e.hideNoData||I.value.length||l["prepend-item"]||l["append-item"]||l["no-data"]),c=s.value.length>0,d=Y.filterProps(e);return y(Y,D({ref:r},d,{modelValue:m.value,"onUpdate:modelValue":[t=>m.value=t,Re],focused:f.value,"onUpdate:focused":t=>f.value=t,validationValue:s.externalValue,counterValue:fe.value,dirty:c,class:["v-combobox",{"v-combobox--active-menu":v.value,"v-combobox--chips":!!e.chips,"v-combobox--selection-slot":!!C.value,"v-combobox--selecting-index":i.value>-1,[`v-combobox--${e.multiple?"multiple":"single"}`]:!0},e.class],style:e.style,readonly:N.isReadonly.value,placeholder:c?void 0:e.placeholder,"onClick:clear":Ve,"onMousedown:control":xe,onKeydown:Se,"aria-expanded":pe.value,"aria-controls":ye.value}),{...l,default:()=>F(W,null,[y(Le,D({id:he.value,ref:k,modelValue:v.value,"onUpdate:modelValue":t=>v.value=t,activator:"parent",contentClass:"v-combobox__content",disabled:O.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:we,onAfterLeave:Ie},e.menuProps),{default:()=>[a&&y(Ue,D({ref:j,filterable:!0,selected:be.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:t=>t.preventDefault(),selectable:!0,onKeydown:Ce,onFocusin:De,onFocusout:Fe,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},ge,e.listProps),{default:()=>[l["prepend-item"]?.(),!I.value.length&&!e.hideNoData&&(l["no-data"]?.()??y(ne,{key:"no-data",title:V(e.noDataText)},null)),y(Te,{ref:U,renderless:!0,items:I.value,itemKey:"value"},{default:t=>{let{item:n,index:p,itemRef:K}=t;const R=D(n.props,{ref:K,key:n.value,active:$.value&&p===0?!0:void 0,onClick:()=>x(n,null)});return n.type==="divider"?l.divider?.({props:n.raw,index:p})??y(Ne,D(n.props,{key:`divider-${p}`}),null):n.type==="subheader"?l.subheader?.({props:n.raw,index:p})??y(qe,D(n.props,{key:`subheader-${p}`}),null):l.item?.({item:n,index:p,props:R})??y(ne,D(R,{role:"option"}),{prepend:_=>{let{isSelected:b}=_;return F(W,null,[e.multiple&&!e.hideSelected?y(He,{key:n.value,modelValue:b,ripple:!1,tabindex:"-1"},null):void 0,n.props.prependAvatar&&y(Oe,{image:n.props.prependAvatar},null),n.props.prependIcon&&y(re,{icon:n.props.prependIcon},null)])},title:()=>h.value?n.title:pa("v-combobox",n.title,me(n)?.title)})}}),l["append-item"]?.()]})]}),s.value.map((t,n)=>{function p(b){b.stopPropagation(),b.preventDefault(),x(t,!1)}const K={"onClick:close":p,onKeydown(b){b.key!=="Enter"&&b.key!==" "||(b.preventDefault(),b.stopPropagation(),p(b))},onMousedown(b){b.preventDefault(),b.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},R=q.value?!!l.chip:!!l.selection,_=R?na(q.value?l.chip({item:t,index:n,props:K}):l.selection({item:t,index:n})):void 0;if(!(R&&!_))return F("div",{key:t.value,class:oa(["v-combobox__selection",n===i.value&&["v-combobox__selection--selected",de.value]]),style:ua(n===i.value?ve.value:{})},[q.value?l.chip?y(sa,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:t.title}}},{default:()=>[_]}):y(Ke,D({key:"chip",closable:e.closableChips,size:"small",text:t.title,disabled:t.props.disabled},K),null):_??F("span",{class:"v-combobox__selection-text"},[t.title,e.multiple&&n<s.value.length-1&&F("span",{class:"v-combobox__selection-comma"},[ra(",")])])])})]),"append-inner":function(){for(var t=arguments.length,n=new Array(t),p=0;p<t;p++)n[p]=arguments[p];return F(W,null,[l["append-inner"]?.(...n),(!e.hideNoData||e.items.length)&&e.menuIcon?y(re,{class:"v-combobox__menu-icon",color:r.value?.fieldIconColor,icon:e.menuIcon,onMousedown:ke,onClick:la,"aria-label":le.value,title:le.value,tabindex:"-1"},null):void 0])}})}),Qe({isFocused:f,isPristine:h,menu:v,search:m,selectionIndex:i,filteredItems:H,select:x},r)}}),wa=Z({__name:"StringList",props:X({label:{},formatter:{type:Function},hideDetails:{type:Boolean},readonly:{type:Boolean},rule:{type:Function}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const u=e,o=Q(e,"modelValue");function l(r){r=r||[];const f=u.formatter??(h=>h);o.value=r.map(f)}function V(r){return u.rule(r)}return(r,f)=>(ae(),ee(ga,{variant:"outlined",density:"compact",label:u.label,chips:"",multiple:"","closable-chips":"",modelValue:o.value,"onUpdate:modelValue":[f[0]||(f[0]=h=>o.value=h),l],rules:u.rule?[V]:void 0},null,8,["label","modelValue","rules"]))}}),Va=Z({__name:"DateNaissanceField",props:X({label:{},hideDetails:{type:Boolean},readonly:{type:Boolean},error:{},rule:{type:Function}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const u=e,o=Q(e,"modelValue"),l=ia(),V=L(ca(o.value)?"":l.parseISO(o.value).toLocaleDateString());function r(g){g=da(g),V.value=g;const k=G(g);k!==void 0&&(o.value=k)}function f(){G(V.value)===void 0&&(o.value="0001-01-01")}function h(g){if(!g.length)return u.rule("0001-01-01");const k=G(g);return k===void 0?!1:u.rule(k)}return(g,k)=>(ae(),ee(Y,{class:"center-text",variant:"outlined",density:"compact",placeholder:"JJ/MM/AAAA",label:u.label||"Date de naissance","model-value":V.value,"onUpdate:modelValue":r,readonly:u.readonly,rules:u.rule?[h]:void 0,"hide-details":u.hideDetails,onBlur:f},null,8,["label","model-value","readonly","rules","hide-details"]))}}),Ia=ya(Va,[["__scopeId","data-v-fb288a49"]]),J={NoSexe:0,Woman:1,Man:2},xa={[J.NoSexe]:"",[J.Woman]:"Femme",[J.Man]:"Homme"};class Da{constructor(u,o){this.baseURL=u,this.authToken=o}getHeaders(){return{Authorization:"Bearer "+this.authToken}}async ConfirmeInscription(u){const o=this.baseURL+"/inscription/confirme";this.startRequest();try{return await B.get(o,{headers:this.getHeaders(),params:{"insc-token":u["insc-token"]}}),!0}catch(l){this.handleError(l)}}async GetCamps(){const u=this.baseURL+"/api/v1/inscription/camps";this.startRequest();try{return(await B.get(u,{headers:this.getHeaders()})).data}catch(o){this.handleError(o)}}async InitInscription(u){const o=this.baseURL+"/api/v1/inscription";this.startRequest();try{return(await B.get(o,{headers:this.getHeaders(),params:{preinscription:u.preinscription}})).data}catch(l){this.handleError(l)}}async SaveInscription(u){const o=this.baseURL+"/api/v1/inscription";this.startRequest();try{return await B.put(o,u,{headers:this.getHeaders()}),!0}catch(l){this.handleError(l)}}async SearchHistory(u){const o=this.baseURL+"/api/v1/inscription/search";this.startRequest();try{return(await B.get(o,{headers:this.getHeaders(),params:{mail:u.mail}})).data}catch(l){this.handleError(l)}}}const Fa=Z({__name:"SexeField",props:X({hideDetails:{type:Boolean},readonly:{type:Boolean},rules:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const u=e,o=Q(e,"modelValue"),l=va(xa);return(V,r)=>(ae(),ee(ze,{label:"Sexe",variant:"outlined",density:"compact",items:fa(l),readonly:u.readonly,"hide-details":u.hideDetails,modelValue:o.value,"onUpdate:modelValue":r[0]||(r[0]=f=>o.value=f),rules:u.rules},null,8,["items","readonly","hide-details","modelValue","rules"]))}});export{Da as A,J as S,ga as V,ya as _,wa as a,Fa as b,Ia as c};
