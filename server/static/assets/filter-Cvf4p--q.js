import{s as L,v as j,k as P,y as V,j as F,D as C,A as k,ca as I,at as x,K as _,c as A,Z as M,R as D,J as S,cR as $,F as z}from"./VSnackbar-CBECO1fY.js";import{O as B,P as E}from"./VTextarea-HUR-vMJk.js";const J=j({...x(),...E()},"VForm"),H=L()({name:"VForm",props:J(),emits:{"update:modelValue":t=>!0,submit:t=>!0},setup(t,r){let{slots:e,emit:l}=r;const n=B(t),i=P();function c(a){a.preventDefault(),n.reset()}function u(a){const f=a,s=n.validate();f.then=s.then.bind(s),f.catch=s.catch.bind(s),f.finally=s.finally.bind(s),l("submit",f),f.defaultPrevented||s.then(y=>{var m;let{valid:o}=y;o&&((m=i.value)==null||m.submit())}),f.preventDefault()}return V(()=>{var a;return F("form",{ref:i,class:k(["v-form",t.class]),style:C(t.style),novalidate:!0,onReset:c,onSubmit:u},[(a=e.default)==null?void 0:a.call(e,n)])}),I(n,i)}}),N=(t,r,e)=>{if(t==null||r==null)return-1;if(!r.length)return 0;t=t.toString().toLocaleLowerCase(),r=r.toString().toLocaleLowerCase();const l=[];let n=t.indexOf(r);for(;~n;)l.push([n,n+r.length]),n=t.indexOf(r,n+r.length);return l.length?l:-1};function w(t,r){if(!(t==null||typeof t=="boolean"||t===-1))return typeof t=="number"?[[t,t+r.length]]:Array.isArray(t[0])?t:[t]}const T=j({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function Q(t,r,e){var a;const l=[],n=(e==null?void 0:e.default)??N,i=e!=null&&e.filterKeys?S(e.filterKeys):!1,c=Object.keys((e==null?void 0:e.customKeyFilter)??{}).length;if(!(t!=null&&t.length))return l;let u=null;e:for(let f=0;f<t.length;f++){const[s,y=s]=S(t[f]),o={},m={};let d=-1;if((r||c>0)&&!(e!=null&&e.noFilter)){let b=!1;if(typeof s=="object"){if(s.type==="divider"||s.type==="subheader"){(u==null?void 0:u.type)==="divider"&&s.type==="subheader"&&l.push(u),u={index:f,matches:{},type:s.type};continue}const O=i||Object.keys(y);b=O.length===c;for(const v of O){const R=$(y,v),K=(a=e==null?void 0:e.customKeyFilter)==null?void 0:a[v];if(d=K?K(R,r,s):n(R,r,s),d!==-1&&d!==!1)K?o[v]=w(d,r):m[v]=w(d,r);else if((e==null?void 0:e.filterMode)==="every")continue e}}else d=n(s,r,s),d!==-1&&d!==!1&&(m.title=w(d,r));const g=Object.keys(m).length,h=Object.keys(o).length;if(!g&&!h||(e==null?void 0:e.filterMode)==="union"&&h!==c&&!g||(e==null?void 0:e.filterMode)==="intersection"&&(h!==c||!g&&c>0&&!b))continue}u&&(l.push(u),u=null),l.push({index:f,matches:{...m,...o}})}return l}function U(t,r,e,l){const n=_([]),i=_(new Map),c=A(()=>M(r));D(()=>{const a=typeof e=="function"?e():M(e),f=typeof a!="string"&&typeof a!="number"?"":String(a),s=Q(c.value,f,{customKeyFilter:{...t.customKeyFilter,...M(l==null?void 0:l.customKeyFilter)},default:t.customFilter,filterKeys:t.filterKeys,filterMode:t.filterMode,noFilter:t.noFilter}),y=M(r),o=[],m=new Map;s.forEach(d=>{let{index:b,matches:g}=d;const h=y[b];o.push(h),m.set(h.value,g)}),n.value=o,i.value=m});function u(a){return i.value.get(a.value)}return{filteredItems:n,filteredMatches:i,getMatches:u}}function W(t,r,e){return e==null||!e.length?r:e.map((l,n)=>{const i=n===0?0:e[n-1][1],c=[F("span",{class:k(`${t}__unmask`)},[r.slice(i,l[0])]),F("span",{class:k(`${t}__mask`)},[r.slice(l[0],l[1])])];return n===e.length-1&&c.push(F("span",{class:k(`${t}__unmask`)},[r.slice(l[1])])),F(z,null,[c])})}export{H as V,W as h,T as m,U as u};
