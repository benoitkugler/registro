import{d as ee,r as M,c as z,F as ne,a as e,w as t,V as cl,b as _,e as A,f as G,g as vl,h as B,i as y,j as pl,t as E,k as fl,l as R,o as f,m as N,n as yl,p as Ae,q as Se,s as O,u as $e,v as Ne,x as yt,I as Te,y as qt,M as jt,z as zt,A as pe,E as _l,B as qe,C as Fe,D as et,G as Ye,H as Me,J as Ie,K as he,L as Ue,N as Ht,O as le,P as bl,Q as Le,R as vt,S as it,T as Qt,U as gl,W as ge,X as _e,Y as F,Z as Yt,_ as ce,$ as we,a0 as Je,a1 as be,a2 as ye,a3 as tt,a4 as Wt,a5 as ke,a6 as Ce,a7 as Vl,a8 as kl,a9 as Cl,aa as xl,ab as Jt,ac as Ge,ad as Pl,ae as wl,af as Dl,ag as Dt,ah as Sl,ai as Il,aj as Ml,ak as Al,al as $l,am as Ul,an as Fl,ao as Rl,ap as Ll,aq as Tl,ar as St,as as pt,at as Gt,au as Nl,av as Ol,aw as Re,ax as El,ay as We,az as hl,aA as Bl,aB as ql,aC as jl,aD as zl,aE as dt,aF as mt,aG as Hl,aH as Ql,aI as Yl,aJ as Wl,aK as Jl,aL as Gl,aM as Kl,aN as Xl,aO as Zl,aP as _t,aQ as ea,aR as It,aS as ta,aT as la,aU as Mt,aV as aa,aW as na,aX as ua}from"./VSnackbar-4WS0ckTD.js";import{V as ia,a as sa,u as Ke,c as x,b as lt,m as Kt,d as oa,i as At,_ as ra,e as st,f as Xt,g as da,h as ot,j as ma,k as ca,l as va,n as Zt,o as pa,p as fa,q as ya,r as _a}from"./InscriptionRow.vue_vue_type_script_setup_true_lang-CSJi_EoB.js";import{V as K,a as de,b as Q,c as W,d as me,e as se,f as ue,g as xe,h as Xe,i as ae,j as Pe,k as De,l as Oe,m as at,n as $t,o as el,p as tl,q as ba}from"./VTextarea-vvA5kftK.js";import{_ as je,V as ga,a as Va,b as ka,c as Ut,d as Ft}from"./VTabs-dWCBinIf.js";import{_ as ze,a as Ca,V as xa,b as Pa}from"./EventSwitch.vue_vue_type_script_setup_true_lang-Z6L8UQBu.js";import{_ as bt,a as wa,b as Da,c as Sa}from"./SexeField.vue_vue_type_script_setup_true_lang-Bj6uQtmg.js";import{V as nt}from"./FileCard.vue_vue_type_script_setup_true_lang-igzkYVuw.js";import{V as ll}from"./filter-CvjbZj6R.js";import{_ as Ia}from"./FilesRow.vue_vue_type_script_setup_true_lang-LKee0-LZ.js";import"./VSheet-DqdHlFc4.js";import"./VWindowItem-B61QShv2.js";const rt=ee({__name:"NavBar",props:{title:{},hideMenu:{type:Boolean}},setup(l){const s="/static/repere/logo.png",i="v0.2.2",m=M(!1),a=l;return(o,d)=>(f(),z(ne,null,[e(ia,{app:"",modelValue:m.value,"onUpdate:modelValue":d[0]||(d[0]=n=>m.value=n),temporary:""},{default:t(()=>[e(K,{title:"Registro - Backoffice",subtitle:i}),e(de),e(K,{"prepend-icon":"mdi-bed",link:"",to:{path:"/camps"},color:"primary"},{default:t(()=>d[2]||(d[2]=[_(" Séjours ")])),_:1,__:[2]}),e(K,{"prepend-icon":"mdi-calendar-multiple-check",link:"",to:{path:"/inscriptions"},color:"primary"},{default:t(()=>d[3]||(d[3]=[_(" Inscriptions ")])),_:1,__:[3]}),e(de),e(K,{"prepend-icon":"mdi-account-multiple",link:"",to:{path:"/annuaire"},color:"primary"},{default:t(()=>d[4]||(d[4]=[_(" Annuaire ")])),_:1,__:[4]}),e(de),e(K,{"prepend-icon":"mdi-logout",link:"",to:{path:"/"},color:"primary"},{default:t(()=>d[5]||(d[5]=[_(" Se déconnecter ")])),_:1,__:[5]})]),_:1},8,["modelValue"]),e(cl,{rounded:"",elevation:"4",color:"secondary"},{append:t(()=>[fl(o.$slots,"default"),d[6]||(d[6]=R("div",{class:"mr-2"},null,-1))]),default:t(()=>[o.hideMenu?G("",!0):(f(),A(sa,{key:0,onClick:d[1]||(d[1]=n=>m.value=!m.value)})),e(vl,null,{default:t(()=>[e(B,null,{default:t(()=>[e(y,{"align-self":"center",cols:"auto"},{default:t(()=>[e(pl,{width:"60",src:s})]),_:1}),e(y,{"align-self":"center"},{default:t(()=>[_(E(a.title),1)]),_:1})]),_:1})]),_:1})]),_:3})],64))}}),Ma=ee({__name:"index",setup(l){const s=Ke(),i=M(!1),m=M(""),a=M([]);async function o(){const d=await x.Loggin({password:m.value});d!==void 0&&(d.IsValid?(x.setToken(d.Token),x.showMessage("Bienvenue !"),s.push({path:"/camps"})):a.value=["Clé de connection incorrecte."])}return(d,n)=>(f(),z(ne,null,[e(rt,{title:"Connection au backoffice","hide-menu":""}),e(yl,{class:"fill-height"},{default:t(()=>[e(Q,{class:"mx-auto",width:"400px"},{default:t(()=>[e(W,null,{default:t(()=>[e(me,{label:"Clé de connection",modelValue:m.value,"onUpdate:modelValue":n[1]||(n[1]=u=>m.value=u),"error-messages":a.value,type:i.value?void 0:"password",name:"password"},{"append-inner":t(()=>[e(N,{class:"ml-2",size:"small",icon:i.value?"mdi-eye":"mdi-eye-off",flat:"",onClick:n[0]||(n[0]=u=>i.value=!i.value)},null,8,["icon"])]),_:1},8,["modelValue","error-messages","type"])]),_:1}),e(se,null,{default:t(()=>[e(ue),e(N,{disabled:!m.value.length,onClick:o},{default:t(()=>n[2]||(n[2]=[_("Se connecter")])),_:1,__:[2]},8,["disabled"])]),_:1})]),_:1})]),_:1})],64))}}),al=Se({active:{type:[String,Array],default:void 0},controlHeight:[Number,String],disabled:{type:[Boolean,String,Array],default:null},nextIcon:{type:Te,default:"$next"},prevIcon:{type:Te,default:"$prev"},modeIcon:{type:Te,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),Rt=Ae()({name:"VDatePickerControls",props:al(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(l,s){let{emit:i}=s;const m=O(()=>Array.isArray(l.disabled)?l.disabled.includes("text"):!!l.disabled),a=O(()=>Array.isArray(l.disabled)?l.disabled.includes("mode"):!!l.disabled),o=O(()=>Array.isArray(l.disabled)?l.disabled.includes("prev"):!!l.disabled),d=O(()=>Array.isArray(l.disabled)?l.disabled.includes("next"):!!l.disabled);function n(){i("click:prev")}function u(){i("click:next")}function r(){i("click:year")}function v(){i("click:month")}return $e(()=>R("div",{class:["v-date-picker-controls"],style:Ne({"--v-date-picker-controls-height":yt(l.controlHeight)})},[e(N,{class:"v-date-picker-controls__month-btn","data-testid":"month-btn",disabled:m.value,text:l.text,variant:"text",rounded:!0,onClick:v},null),e(N,{class:"v-date-picker-controls__mode-btn","data-testid":"year-btn",disabled:a.value,density:"comfortable",icon:l.modeIcon,variant:"text",onClick:r},null),e(ue,null,null),R("div",{class:"v-date-picker-controls__month"},[e(N,{"data-testid":"prev-month",disabled:o.value,density:"comfortable",icon:l.prevIcon,variant:"text",onClick:n},null),e(N,{"data-testid":"next-month",disabled:d.value,icon:l.nextIcon,density:"comfortable",variant:"text",onClick:u},null)])])),{}}}),Aa=Se({appendIcon:Te,color:String,header:String,transition:String,onClick:_l()},"VDatePickerHeader"),Lt=Ae()({name:"VDatePickerHeader",props:Aa(),emits:{click:()=>!0,"click:append":()=>!0},setup(l,s){let{emit:i,slots:m}=s;const{backgroundColorClasses:a,backgroundColorStyles:o}=qt(()=>l.color);function d(){i("click")}function n(){i("click:append")}return $e(()=>{const u=!!(m.default||l.header),r=!!(m.append||l.appendIcon);return R("div",{class:pe(["v-date-picker-header",{"v-date-picker-header--clickable":!!l.onClick},a.value]),style:Ne(o.value),onClick:d},[m.prepend&&R("div",{key:"prepend",class:"v-date-picker-header__prepend"},[m.prepend()]),u&&e(jt,{key:"content",name:l.transition},{default:()=>{var v;return[R("div",{key:l.header,class:"v-date-picker-header__content"},[((v=m.default)==null?void 0:v.call(m))??l.header])]}}),r&&R("div",{class:"v-date-picker-header__append"},[m.append?e(zt,{key:"append-defaults",disabled:!l.appendIcon,defaults:{VBtn:{icon:l.appendIcon,variant:"text"}}},{default:()=>{var v;return[(v=m.append)==null?void 0:v.call(m)]}}):e(N,{key:"append-btn",icon:l.appendIcon,variant:"text",onClick:n},null)])])}),{}}}),$a=Se({allowedDates:[Array,Function],disabled:{type:Boolean,default:null},displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:{type:[Number,String],default:void 0}},"calendar");function Ua(l){const s=qe(),i=Fe(l,"modelValue",[],S=>et(S).map(g=>s.date(g))),m=O(()=>l.displayValue?s.date(l.displayValue):i.value.length>0?s.date(i.value[0]):l.min?s.date(l.min):Array.isArray(l.allowedDates)?s.date(l.allowedDates[0]):s.date()),a=Fe(l,"year",void 0,S=>{const g=S!=null?Number(S):s.getYear(m.value);return s.startOfYear(s.setYear(s.date(),g))},S=>s.getYear(S)),o=Fe(l,"month",void 0,S=>{const g=S!=null?Number(S):s.getMonth(m.value),$=s.setYear(s.startOfMonth(s.date()),s.getYear(a.value));return s.setMonth($,g)},S=>s.getMonth(S)),d=O(()=>{const S=s.toJsDate(s.startOfWeek(s.date(),l.firstDayOfWeek)).getDay();return[0,1,2,3,4,5,6].map(g=>(g+S)%7)}),n=O(()=>{const S=s.getWeekArray(o.value,l.firstDayOfWeek),g=S.flat(),$=6*7;if(l.weeksInMonth==="static"&&g.length<$){const b=g[g.length-1];let k=[];for(let P=1;P<=$-g.length;P++)k.push(s.addDays(b,P)),P%7===0&&(S.push(k),k=[])}return S});function u(S,g){return S.filter($=>d.value.includes(s.toJsDate($).getDay())).map(($,b)=>{const k=s.toISO($),P=!s.isSameMonth($,o.value),w=s.isSameDay($,s.startOfMonth(o.value)),Y=s.isSameDay($,s.endOfMonth(o.value)),H=s.isSameDay($,o.value);return{date:$,formatted:s.format($,"keyboardDate"),isAdjacent:P,isDisabled:c($),isEnd:Y,isHidden:P&&!l.showAdjacentMonths,isSame:H,isSelected:i.value.some(D=>s.isSameDay($,D)),isStart:w,isToday:s.isSameDay($,g),isWeekEnd:b%7===6,isWeekStart:b%7===0,isoDate:k,localized:s.format($,"dayOfMonth"),month:s.getMonth($),year:s.getYear($)}})}const r=O(()=>{const S=s.startOfWeek(m.value,l.firstDayOfWeek),g=[];for(let b=0;b<=6;b++)g.push(s.addDays(S,b));const $=s.date();return u(g,$)}),v=O(()=>{const S=n.value.flat(),g=s.date();return u(S,g)}),p=O(()=>n.value.map(S=>S.length?s.getWeek(S[0],l.firstDayOfWeek):null));function c(S){if(l.disabled)return!0;const g=s.date(S);return l.min&&s.isAfter(s.date(l.min),g)||l.max&&s.isAfter(g,s.date(l.max))?!0:Array.isArray(l.allowedDates)&&l.allowedDates.length>0?!l.allowedDates.some($=>s.isSameDay(s.date($),g)):typeof l.allowedDates=="function"?!l.allowedDates(g):!l.weekdays.includes(s.toJsDate(g).getDay())}return{displayValue:m,daysInMonth:v,daysInWeek:r,genDays:u,model:i,weeksInMonth:n,weekDays:d,weekNumbers:p}}const nl=Se({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...he($a(),["displayValue"])},"VDatePickerMonth"),Tt=Ae()({name:"VDatePickerMonth",props:nl(),emits:{"update:modelValue":l=>!0,"update:month":l=>!0,"update:year":l=>!0},setup(l,s){let{emit:i,slots:m}=s;const a=M(),{daysInMonth:o,model:d,weekNumbers:n}=Ua(l),u=qe(),r=Ye(),v=Ye(),p=Ye(!1),c=Me(()=>p.value?l.reverseTransition:l.transition);l.multiple==="range"&&d.value.length>0&&(r.value=d.value[0],d.value.length>1&&(v.value=d.value[d.value.length-1]));const S=O(()=>{const k=["number","string"].includes(typeof l.multiple)?Number(l.multiple):1/0;return d.value.length>=k});Ie(o,(k,P)=>{P&&(p.value=u.isBefore(k[0].date,P[0].date))});function g(k){const P=u.startOfDay(k);if(d.value.length===0?r.value=void 0:d.value.length===1&&(r.value=d.value[0],v.value=void 0),!r.value)r.value=P,d.value=[r.value];else if(v.value)r.value=k,v.value=void 0,d.value=[r.value];else{if(u.isSameDay(P,r.value)){r.value=void 0,d.value=[];return}else u.isBefore(P,r.value)?(v.value=u.endOfDay(r.value),r.value=P):v.value=u.endOfDay(P);const w=u.getDiff(v.value,r.value,"days"),Y=[r.value];for(let H=1;H<w;H++){const D=u.addDays(r.value,H);Y.push(D)}Y.push(v.value),d.value=Y}}function $(k){const P=d.value.findIndex(w=>u.isSameDay(w,k));if(P===-1)d.value=[...d.value,k];else{const w=[...d.value];w.splice(P,1),d.value=w}}function b(k){l.multiple==="range"?g(k):l.multiple?$(k):d.value=[k]}$e(()=>R("div",{class:"v-date-picker-month"},[l.showWeek&&R("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!l.hideWeekdays&&R("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[_(" ")]),n.value.map(k=>R("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[k]))]),e(jt,{name:c.value},{default:()=>{var k;return[R("div",{ref:a,key:(k=o.value[0].date)==null?void 0:k.toString(),class:"v-date-picker-month__days"},[!l.hideWeekdays&&u.getWeekdays(l.firstDayOfWeek).map(P=>R("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[P])),o.value.map((P,w)=>{var H;const Y={props:{class:"v-date-picker-month__day-btn",color:P.isSelected||P.isToday?l.color:void 0,disabled:P.isDisabled,icon:!0,ripple:!1,text:P.localized,variant:P.isSelected?"flat":P.isToday?"outlined":"text",onClick:()=>b(P.date)},item:P,i:w};return S.value&&!P.isSelected&&(P.isDisabled=!0),R("div",{class:pe(["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":P.isAdjacent,"v-date-picker-month__day--hide-adjacent":P.isHidden,"v-date-picker-month__day--selected":P.isSelected,"v-date-picker-month__day--week-end":P.isWeekEnd,"v-date-picker-month__day--week-start":P.isWeekStart}]),"data-v-date":P.isDisabled?void 0:P.isoDate},[(l.showAdjacentMonths||!P.isAdjacent)&&(((H=m.day)==null?void 0:H.call(m,Y))??e(N,Y.props,null))])})])]}})]))}}),ul=Se({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number},"VDatePickerMonths"),Nt=Ae()({name:"VDatePickerMonths",props:ul(),emits:{"update:modelValue":l=>!0},setup(l,s){let{emit:i,slots:m}=s;const a=qe(),o=Fe(l,"modelValue"),d=O(()=>{let n=a.startOfYear(a.date());return l.year&&(n=a.setYear(n,l.year)),Ue(12).map(u=>{const r=a.format(n,"monthShort"),v=!!(l.min&&a.isAfter(a.startOfMonth(a.date(l.min)),n)||l.max&&a.isAfter(n,a.startOfMonth(a.date(l.max))));return n=a.getNextMonth(n),{isDisabled:v,text:r,value:u}})});return Ht(()=>{o.value=o.value??a.getMonth(a.date())}),$e(()=>R("div",{class:"v-date-picker-months",style:Ne({height:yt(l.height)})},[R("div",{class:"v-date-picker-months__content"},[d.value.map((n,u)=>{var p;const r={active:o.value===u,color:o.value===u?l.color:void 0,disabled:n.isDisabled,rounded:!0,text:n.text,variant:o.value===n.value?"flat":"text",onClick:()=>v(u)};function v(c){if(o.value===c){i("update:modelValue",o.value);return}o.value=c}return((p=m.month)==null?void 0:p.call(m,{month:n,i:u,props:r}))??e(N,le({key:"month"},r),null)})])])),{}}}),il=Se({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),Ot=Ae()({name:"VDatePickerYears",props:il(),emits:{"update:modelValue":l=>!0},setup(l,s){let{emit:i,slots:m}=s;const a=qe(),o=Fe(l,"modelValue"),d=O(()=>{const u=a.getYear(a.date());let r=u-100,v=u+52;l.min&&(r=a.getYear(a.date(l.min))),l.max&&(v=a.getYear(a.date(l.max)));let p=a.startOfYear(a.date());return p=a.setYear(p,r),Ue(v-r+1,r).map(c=>{const S=a.format(p,"year");return p=a.setYear(p,a.getYear(p)+1),{text:S,value:c}})});Ht(()=>{o.value=o.value??a.getYear(a.date())});const n=bl();return Le(async()=>{var u;await vt(),(u=n.el)==null||u.scrollIntoView({block:"center"})}),$e(()=>R("div",{class:"v-date-picker-years",style:Ne({height:yt(l.height)})},[R("div",{class:"v-date-picker-years__content"},[d.value.map((u,r)=>{var p;const v={ref:o.value===u.value?n:void 0,active:o.value===u.value,color:o.value===u.value?l.color:void 0,rounded:!0,text:u.text,variant:o.value===u.value?"flat":"text",onClick:()=>{if(o.value===u.value){i("update:modelValue",o.value);return}o.value=u.value}};return((p=m.year)==null?void 0:p.call(m,{year:u,i:r,props:v}))??e(N,le({key:"month"},v),null)})])])),{}}}),Fa=Se({header:{type:String,default:"$vuetify.datePicker.header"},headerColor:String,...al(),...nl({weeksInMonth:"static"}),...he(ul(),["modelValue"]),...he(il(),["modelValue"]),...Kt({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),Ra=Ae()({name:"VDatePicker",props:Fa(),emits:{"update:modelValue":l=>!0,"update:month":l=>!0,"update:year":l=>!0,"update:viewMode":l=>!0},setup(l,s){let{emit:i,slots:m}=s;const a=qe(),{t:o}=it(),{rtlClasses:d}=Qt(),n=Fe(l,"modelValue",void 0,h=>et(h).map(I=>a.date(I)),h=>l.multiple?h:h[0]),u=Fe(l,"viewMode"),r=O(()=>{const h=a.date(l.min);return l.min&&a.isValid(h)?h:null}),v=O(()=>{const h=a.date(l.max);return l.max&&a.isValid(h)?h:null}),p=O(()=>{var J;const h=a.date();let I=h;return(J=n.value)!=null&&J[0]?I=a.date(n.value[0]):r.value&&a.isBefore(h,r.value)?I=r.value:v.value&&a.isAfter(h,v.value)&&(I=v.value),I&&a.isValid(I)?I:h}),c=Me(()=>l.headerColor??l.color),S=M(Number(l.month??a.getMonth(a.startOfMonth(p.value)))),g=M(Number(l.year??a.getYear(a.startOfYear(a.setMonth(p.value,S.value))))),$=Ye(!1),b=O(()=>l.multiple&&n.value.length>1?o("$vuetify.datePicker.itemsSelected",n.value.length):n.value[0]&&a.isValid(n.value[0])?a.format(a.date(n.value[0]),"normalDateWithWeekday"):o(l.header)),k=O(()=>{let h=a.date();return h=a.setDate(h,1),h=a.setMonth(h,S.value),h=a.setYear(h,g.value),a.format(h,"monthAndYear")}),P=Me(()=>`date-picker-header${$.value?"-reverse":""}-transition`),w=O(()=>{if(l.disabled)return!0;const h=[];if(u.value!=="month")h.push("prev","next");else{let I=a.date();if(I=a.startOfMonth(I),I=a.setMonth(I,S.value),I=a.setYear(I,g.value),r.value){const J=a.addDays(a.startOfMonth(I),-1);a.isAfter(r.value,J)&&h.push("prev")}if(v.value){const J=a.addDays(a.endOfMonth(I),1);a.isAfter(J,v.value)&&h.push("next")}}return h});function Y(){S.value<11?S.value++:(g.value++,S.value=0,V(g.value)),Z(S.value)}function H(){S.value>0?S.value--:(g.value--,S.value=11,V(g.value)),Z(S.value)}function D(){u.value="month"}function ve(){u.value=u.value==="months"?"month":"months"}function j(){u.value=u.value==="year"?"month":"year"}function Z(h){u.value==="months"&&ve(),i("update:month",h)}function V(h){u.value==="year"&&j(),i("update:year",h)}return Ie(n,(h,I)=>{const J=et(I),oe=et(h);if(!oe.length)return;const T=a.date(J[J.length-1]),U=a.date(oe[oe.length-1]),re=a.getMonth(U),C=a.getYear(U);re!==S.value&&(S.value=re,Z(S.value)),C!==g.value&&(g.value=C,V(g.value)),$.value=a.isBefore(T,U)}),$e(()=>{const h=lt.filterProps(l),I=Rt.filterProps(l),J=Lt.filterProps(l),oe=Tt.filterProps(l),T=he(Nt.filterProps(l),["modelValue"]),U=he(Ot.filterProps(l),["modelValue"]),re={color:c.value,header:b.value,transition:P.value};return e(lt,le(h,{color:c.value,class:["v-date-picker",`v-date-picker--${u.value}`,{"v-date-picker--show-week":l.showWeek},d.value,l.class],style:l.style}),{title:()=>{var C;return((C=m.title)==null?void 0:C.call(m))??R("div",{class:"v-date-picker__title"},[o(l.title)])},header:()=>m.header?e(zt,{defaults:{VDatePickerHeader:{...re}}},{default:()=>{var C;return[(C=m.header)==null?void 0:C.call(m,re)]}}):e(Lt,le({key:"header"},J,re,{onClick:u.value!=="month"?D:void 0}),{...m,default:void 0}),default:()=>R(ne,null,[e(Rt,le(I,{disabled:w.value,text:k.value,"onClick:next":Y,"onClick:prev":H,"onClick:month":ve,"onClick:year":j}),null),e(gl,{hideOnLeave:!0},{default:()=>[u.value==="months"?e(Nt,le({key:"date-picker-months"},T,{modelValue:S.value,"onUpdate:modelValue":[C=>S.value=C,Z],min:r.value,max:v.value,year:g.value}),null):u.value==="year"?e(Ot,le({key:"date-picker-years"},U,{modelValue:g.value,"onUpdate:modelValue":[C=>g.value=C,V],min:r.value,max:v.value}),null):e(Tt,le({key:"date-picker-month"},oe,{modelValue:n.value,"onUpdate:modelValue":C=>n.value=C,month:S.value,"onUpdate:month":[C=>S.value=C,Z],year:g.value,"onUpdate:year":[C=>g.value=C,V],min:r.value,max:v.value}),null)]})]),actions:m.actions})}),{}}}),La=ee({__name:"DateField",props:ge({label:{},hideDetails:{type:Boolean},readonly:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=l,i=_e(l,"modelValue"),m=qe();function a(d){o.value=!1,i.value=Yt(d)}const o=M(!1);return(d,n)=>s.readonly?(f(),A(me,{key:0,class:"center-text",variant:"outlined",density:"compact","hide-details":s.hideDetails,label:s.label,"model-value":F(m).parseISO(i.value).toLocaleDateString(),readonly:""},null,8,["hide-details","label","model-value"])):(f(),A(xe,{key:1,"close-on-content-click":!1,modelValue:o.value,"onUpdate:modelValue":n[1]||(n[1]=u=>o.value=u)},{activator:t(({props:u})=>[e(me,le({class:"center-text"},u,{variant:"outlined",density:"compact","hide-details":s.hideDetails,label:s.label,"model-value":F(m).parseISO(i.value).toLocaleDateString()}),null,16,["hide-details","label","model-value"])]),default:t(()=>[e(Ra,{"model-value":F(m).parseISO(i.value),"onUpdate:modelValue":n[0]||(n[0]=u=>a(u))},null,8,["model-value"])]),_:1},8,["modelValue"]))}}),sl=bt(La,[["__scopeId","data-v-1e184428"]]),gt=ee({__name:"BoolField",props:ge({label:{},hideDetails:{type:Boolean},readonly:{type:Boolean},density:{},persistentHint:{type:Boolean},hint:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=l,i=_e(l,"modelValue");return(m,a)=>(f(),A(Xe,{label:s.label,"model-value":i.value,"onUpdate:modelValue":a[0]||(a[0]=o=>i.value=o||!1),"hide-details":s.hideDetails,readonly:s.readonly,density:s.density,"persistent-hint":s.persistentHint,hint:s.hint},null,8,["label","model-value","hide-details","readonly","density","persistent-hint","hint"]))}}),Ta=ee({__name:"OptionStatut",props:ge({camp:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=l,i=_e(l,"modelValue");function m(){var r;const d=(r=i.value)!=null&&r.length?i.value.map(v=>v.Id):[0],u={Id:Math.max(...d)+1,Label:"",Description:"",Prix:s.camp.Prix.Cent};i.value=(i.value||[]).concat(u),a.value=u}const a=M(null);function o(d){i.value=(i.value||[]).filter(n=>n.Id!=d.Id)}return(d,n)=>{const u=ze;return f(),A(Q,{subtitle:"Le prix dépend du statut du participant, à choisir parmi la liste ci-dessous."},{append:t(()=>[e(N,{icon:"",size:"x-small",onClick:m},{default:t(()=>[e(be,{color:"green"},{default:t(()=>n[4]||(n[4]=[_("mdi-plus")])),_:1,__:[4]})]),_:1})]),default:t(()=>[a.value!=null?(f(),A(ae,{key:0,"model-value":a.value!=null,"onUpdate:modelValue":n[3]||(n[3]=r=>a.value=null),"max-width":"500px"},{default:t(()=>[e(Q,{title:"Modifier le statut"},{default:t(()=>[e(W,null,{default:t(()=>[e(B,null,{default:t(()=>[e(y,{cols:"12"},{default:t(()=>[e(me,{autofocus:"",label:"Statut",modelValue:a.value.Label,"onUpdate:modelValue":n[0]||(n[0]=r=>a.value.Label=r),density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(y,{cols:"12"},{default:t(()=>[e(me,{label:"Description",modelValue:a.value.Description,"onUpdate:modelValue":n[1]||(n[1]=r=>a.value.Description=r),density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(y,{cols:"12"},{default:t(()=>[e(u,{"model-value":{Cent:a.value.Prix,Currency:s.camp.Prix.Currency},"onUpdate:modelValue":n[2]||(n[2]=r=>a.value.Prix=r.Cent),label:"Prix","readonly-currency":""},null,8,["model-value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])):G("",!0),e(W,{class:"py-0"},{default:t(()=>[e(Pe,null,{default:t(()=>{var r;return[(r=i.value)!=null&&r.length?G("",!0):(f(),A(K,{key:0},{default:t(()=>n[5]||(n[5]=[R("i",null,"Aucun statut n'est encore défini.",-1)])),_:1,__:[5]})),(f(!0),z(ne,null,ce(i.value,v=>(f(),A(K,{title:v.Label,subtitle:v.Description,onClick:p=>a.value=v},{append:t(()=>[e(B,null,{default:t(()=>[e(y,{"align-self":"center"},{default:t(()=>[e(De,null,{default:t(()=>[_(E(F(we).montant({Cent:v.Prix,Currency:d.camp.Prix.Currency})),1)]),_:2},1024)]),_:2},1024),e(y,{"align-self":"center",cols:"auto"},{default:t(()=>[e(N,{icon:"",size:"x-small",class:"my-1",onClick:Je(p=>o(v),["stop"])},{default:t(()=>[e(be,{color:"red"},{default:t(()=>n[6]||(n[6]=[_("mdi-delete")])),_:1,__:[6]})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["title","subtitle","onClick"]))),256))]}),_:1})]),_:1})]),_:1})}}}),Na=ee({__name:"OptionJournee",props:ge({camp:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=l,i=_e(l,"modelValue");Ie(()=>i.value,m,{immediate:!0});function m(){var d;const o=s.camp.Duree;((d=i.value)==null?void 0:d.length)!=o&&(i.value=Array.from({length:o}).map(n=>0))}function a(){const o=i.value,d=o[0];for(let n=0;n<o.length;n++)o[n]=d}return(o,d)=>{const n=ze;return f(),A(Q,{subtitle:"Le prix est variable en fonction des jours de participation au camp."},{append:t(()=>[e(nt,{text:"Appliquer le prix du premier jour à tous."},{activator:t(({props:u})=>[e(N,le(u,{icon:"mdi-arrow-expand",size:"x-small",disabled:!(i.value||[])[0],onClick:a}),null,16,["disabled"])]),_:1})]),default:t(()=>[e(W,null,{default:t(()=>[e(B,null,{default:t(()=>[(f(!0),z(ne,null,ce(i.value,(u,r)=>(f(),A(y,{cols:"3"},{default:t(()=>[e(n,{label:`Jour ${r+1}`,"model-value":{Cent:u,Currency:s.camp.Prix.Currency},"onUpdate:modelValue":v=>i.value[r]=v.Cent,"readonly-currency":""},null,8,["label","model-value","onUpdate:modelValue"])]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})}}}),Oa={key:0,class:"text-center"},Ea=ee({__name:"CampOptionsPrix",props:ge({camp:{}},{optionPrix:{required:!0},optionPrixModifiers:{},optionQf:{required:!0},optionQfModifiers:{}}),emits:["update:optionPrix","update:optionQf"],setup(l){const s=l,i=_e(l,"optionPrix"),m=_e(l,"optionQf"),a=O(()=>ye.isQuotientFamilialActive(m.value)),o=tt(Wt);return(d,n)=>{const u=je;return f(),A(Q,{title:"Options sur le prix",subtitle:"Permet de modifier le prix de base du séjour",width:"1000px"},{default:t(()=>[e(W,null,{default:t(()=>[e(B,null,{default:t(()=>[e(y,{"align-self":"center"},{default:t(()=>[e(Xe,{"model-value":a.value,"onUpdate:modelValue":n[0]||(n[0]=r=>m.value[3]=r?100:0),"hide-details":"",label:"Prix au quotient familial"},null,8,["model-value"])]),_:1}),e(y,{"align-self":"center"},{default:t(()=>[e(u,{suffix:"%",min:0,max:100,disabled:!a.value,"hide-details":"","readonly-currency":"",label:"entre 1 et 359",modelValue:m.value[0],"onUpdate:modelValue":n[1]||(n[1]=r=>m.value[0]=r)},null,8,["disabled","modelValue"])]),_:1}),e(y,{"align-self":"center"},{default:t(()=>[e(u,{suffix:"%",min:0,max:100,disabled:!a.value,"hide-details":"","readonly-currency":"",label:"entre 360 et 564",modelValue:m.value[1],"onUpdate:modelValue":n[2]||(n[2]=r=>m.value[1]=r)},null,8,["disabled","modelValue"])]),_:1}),e(y,{"align-self":"center"},{default:t(()=>[e(u,{suffix:"%",min:0,max:100,disabled:!a.value,"hide-details":"","readonly-currency":"",label:"entre 565 et 714",modelValue:m.value[2],"onUpdate:modelValue":n[3]||(n[3]=r=>m.value[2]=r)},null,8,["disabled","modelValue"])]),_:1}),e(y,{"align-self":"center"},{default:t(()=>[e(u,{suffix:"%",min:0,max:100,disabled:!0,"hide-details":"","readonly-currency":"",label:"plus de 715",modelValue:m.value[3],"onUpdate:modelValue":n[4]||(n[4]=r=>m.value[3]=r)},null,8,["modelValue"])]),_:1})]),_:1}),e(de,{thickness:"1",class:"my-2"}),e(B,{class:"my-2"},{default:t(()=>[e(y,{"align-self":"center",cols:"4"},{default:t(()=>[e(Oe,{variant:"outlined",density:"comfortable","hide-details":"",items:F(o),label:"Option sur le prix",modelValue:i.value.Active,"onUpdate:modelValue":n[5]||(n[5]=r=>i.value.Active=r)},null,8,["items","modelValue"])]),_:1}),e(y,{"align-self":"center"},{default:t(()=>[i.value.Active==F(ke).NoOption?(f(),z("div",Oa,n[8]||(n[8]=[R("i",null,"Aucune modification sur le prix de base.",-1)]))):i.value.Active==F(ke).PrixStatut?(f(),A(Ta,{key:1,camp:s.camp,modelValue:i.value.Statuts,"onUpdate:modelValue":n[6]||(n[6]=r=>i.value.Statuts=r)},null,8,["camp","modelValue"])):i.value.Active==F(ke).PrixJour?(f(),A(Na,{key:2,camp:s.camp,modelValue:i.value.Jours,"onUpdate:modelValue":n[7]||(n[7]=r=>i.value.Jours=r)},null,8,["camp","modelValue"])):G("",!0)]),_:1})]),_:1})]),_:1})]),_:1})}}}),ha={key:0,class:"mx-1"},Ba={key:1,class:"mx-1"},qa={key:2,class:"mx-1"},ja=ee({__name:"CampEdit",props:{camp:{}},emits:["save"],setup(l,{emit:s}){const i=l,m=s,a=M(Ce(i.camp)),o=O(()=>{var d,n;return new Date(a.value.DateDebut).getFullYear()>=2020&&a.value.Places>=1&&a.value.Nom!=""&&a.value.AgeMax>=a.value.AgeMin&&a.value.OptionQuotientFamilial.every(u=>0<=u&&u<=100)&&!(a.value.OptionPrix.Active==ke.PrixStatut&&!((d=a.value.OptionPrix.Statuts)!=null&&d.length))&&!(a.value.OptionPrix.Active==ke.PrixJour&&((n=a.value.OptionPrix.Jours)==null?void 0:n.length)!=a.value.Duree)});return(d,n)=>{const u=gt,r=sl,v=je,p=ze;return f(),A(Q,{title:"Editer le séjour"},{default:t(()=>[e(W,null,{default:t(()=>[e(ll,null,{default:t(()=>[e(B,null,{default:t(()=>[e(y,null,{default:t(()=>[e(me,{autofocus:"","hide-details":"",label:"Nom",density:"compact",variant:"outlined",modelValue:a.value.Nom,"onUpdate:modelValue":n[0]||(n[0]=c=>a.value.Nom=c)},null,8,["modelValue"])]),_:1}),e(y,null,{default:t(()=>[e(me,{"hide-details":"",label:"Lieu",density:"compact",variant:"outlined",modelValue:a.value.Lieu,"onUpdate:modelValue":n[1]||(n[1]=c=>a.value.Lieu=c)},null,8,["modelValue"])]),_:1}),e(y,null,{default:t(()=>[e(me,{"hide-details":"",label:"Numéro d'agrément",density:"compact",variant:"outlined",modelValue:a.value.Agrement,"onUpdate:modelValue":n[2]||(n[2]=c=>a.value.Agrement=c)},null,8,["modelValue"])]),_:1}),e(y,null,{default:t(()=>[e(u,{label:"Ouvert aux inscriptions",modelValue:a.value.Ouvert,"onUpdate:modelValue":n[3]||(n[3]=c=>a.value.Ouvert=c),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(B,null,{default:t(()=>[e(y,{"align-self":"center",cols:"2"},{default:t(()=>[e(r,{modelValue:a.value.DateDebut,"onUpdate:modelValue":n[4]||(n[4]=c=>a.value.DateDebut=c),label:"Date de début","hide-details":""},null,8,["modelValue"])]),_:1}),e(y,{"align-self":"center",cols:"2"},{default:t(()=>[e(v,{label:"Durée (en jours)",modelValue:a.value.Duree,"onUpdate:modelValue":n[5]||(n[5]=c=>a.value.Duree=c),"hide-details":""},null,8,["modelValue"])]),_:1}),e(y,{"align-self":"center",cols:"2"},{default:t(()=>[e(r,{"model-value":F(ye).dateFin(a.value),label:"Date de fin",readonly:"","hide-details":""},null,8,["model-value"])]),_:1}),e(y,{"align-self":"center",cols:"3"},{default:t(()=>[e(p,{label:"Prix",modelValue:a.value.Prix,"onUpdate:modelValue":n[6]||(n[6]=c=>a.value.Prix=c),"hide-details":""},null,8,["modelValue"])]),_:1}),e(y,{"align-self":"center",cols:"3",class:"text-center"},{default:t(()=>[e(xe,{"close-on-content-click":!1},{activator:t(({props:c})=>[e(De,le(c,{elevation:"1",label:""}),{default:t(()=>[!F(ye).isQuotientFamilialActive(a.value.OptionQuotientFamilial)&&a.value.OptionPrix.Active==F(ke).NoOption?(f(),z("div",ha," Aucune option ")):G("",!0),F(ye).isQuotientFamilialActive(a.value.OptionQuotientFamilial)?(f(),z("div",Ba," Quotient familial ")):G("",!0),a.value.OptionPrix.Active!=F(ke).NoOption?(f(),z("div",qa,E(F(Wt)[a.value.OptionPrix.Active]),1)):G("",!0)]),_:2},1040)]),default:t(()=>[e(Ea,{camp:a.value,"option-prix":a.value.OptionPrix,"onUpdate:optionPrix":n[7]||(n[7]=c=>a.value.OptionPrix=c),"option-qf":a.value.OptionQuotientFamilial,"onUpdate:optionQf":n[8]||(n[8]=c=>a.value.OptionQuotientFamilial=c)},null,8,["camp","option-prix","option-qf"])]),_:1})]),_:1})]),_:1}),e(B,null,{default:t(()=>[e(y,{"align-self":"center",cols:"2"},{default:t(()=>[e(v,{modelValue:a.value.Places,"onUpdate:modelValue":n[9]||(n[9]=c=>a.value.Places=c),label:"Nombre de places"},null,8,["modelValue"])]),_:1}),e(y,{"align-self":"center",cols:"2"},{default:t(()=>[e(v,{modelValue:a.value.AgeMin,"onUpdate:modelValue":n[10]||(n[10]=c=>a.value.AgeMin=c),label:"Âge minimum"},null,8,["modelValue"])]),_:1}),e(y,{"align-self":"center",cols:"2"},{default:t(()=>[e(v,{modelValue:a.value.AgeMax,"onUpdate:modelValue":n[11]||(n[11]=c=>a.value.AgeMax=c),label:"Âge maximum"},null,8,["modelValue"])]),_:1}),e(y,{cols:"6"},{default:t(()=>[e(u,{modelValue:a.value.NeedEquilibreGF,"onUpdate:modelValue":n[12]||(n[12]=c=>a.value.NeedEquilibreGF=c),label:"Equilibre G/F demandé",density:"compact","persistent-hint":"",hint:"Place un inscrit en liste d'attente en cas de déséquilibre Garçons/Filles"},null,8,["modelValue"])]),_:1})]),_:1}),e(B,null,{default:t(()=>[e(y,null,{default:t(()=>[e(at,{variant:"outlined",density:"compact",label:"Description",hint:"Ce texte est affiché sur le formulaire d'inscription.","persistent-hint":"",rows:"3",modelValue:a.value.Description,"onUpdate:modelValue":n[13]||(n[13]=c=>a.value.Description=c)},null,8,["modelValue"])]),_:1}),e(y,{cols:"2"}),e(y,{cols:"2"},{default:t(()=>[e(u,{label:"Navette",modelValue:a.value.Navette.Actif,"onUpdate:modelValue":n[14]||(n[14]=c=>a.value.Navette.Actif=c)},null,8,["modelValue"])]),_:1}),e(y,null,{default:t(()=>[e(at,{variant:"outlined",density:"compact",label:"Navette",hint:"Ce texte est affiché sur l'espace personnel de suivi.","persistent-hint":"",rows:"3",disabled:!a.value.Navette.Actif,modelValue:a.value.Navette.Commentaire,"onUpdate:modelValue":n[15]||(n[15]=c=>a.value.Navette.Commentaire=c)},null,8,["disabled","modelValue"])]),_:1})]),_:1}),e(B,null,{default:t(()=>[e(y,null,{default:t(()=>[e(me,{label:"Image",density:"compact",variant:"outlined",hint:"Lien vers une image affichée sur le formulaire d'inscription","persistent-hint":"",modelValue:a.value.ImageURL,"onUpdate:modelValue":n[16]||(n[16]=c=>a.value.ImageURL=c)},null,8,["modelValue"])]),_:1}),e(y,null,{default:t(()=>[e(me,{label:"Mot de passe",density:"compact",variant:"outlined",hint:"Mot de passe d'accès à la page Directeur","persistent-hint":"",modelValue:a.value.Password,"onUpdate:modelValue":n[17]||(n[17]=c=>a.value.Password=c)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ue),e(N,{disabled:!o.value,onClick:n[18]||(n[18]=c=>m("save",a.value))},{default:t(()=>n[19]||(n[19]=[_("Enregistrer")])),_:1,__:[19]},8,["disabled"])]),_:1})]),_:1})}}}),Et=ee({__name:"TauxSelect",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(l){Le(o);const s=_e(l,"modelValue"),i=M(null),m=O(()=>{const r=Array.from(a.value.values()).map(v=>({title:v.Label,value:v.Id}));return r.sort((v,p)=>v.title.localeCompare(p.title)),r}),a=M(new Map);async function o(){const r=await x.CampsGetTaux();r!==void 0&&(a.value=Vl(r),s.value.Id>0&&(s.value=Ce(a.value.get(s.value.Id)),i.value=s.value.Id))}function d(){s.value.Id<=0?(i.value==null&&(i.value=1),s.value=Ce(a.value.get(i.value))):(i.value=null,s.value.Id=0,s.value.Label="")}function n(r){s.value=Ce(a.value.get(r))}const u=O(()=>{if(s.value.Id>0)return null;const r=s.value.Label;return Array.from(a.value.values()).map(p=>p.Label).includes(r)?"Ce label est déjà utilisé.":null});return(r,v)=>(f(),A(B,null,{default:t(()=>[e(y,{"align-self":"center"},{default:t(()=>[s.value.Id>0?(f(),A(Oe,{key:0,variant:"outlined",density:"compact","hide-details":"",label:"Taux",items:m.value,modelValue:i.value,"onUpdate:modelValue":[v[0]||(v[0]=p=>i.value=p),n]},null,8,["items","modelValue"])):(f(),A(B,{key:1},{default:t(()=>[e(y,{cols:"12"},{default:t(()=>[e(me,{variant:"outlined",density:"compact",label:"Label",modelValue:s.value.Label,"onUpdate:modelValue":v[1]||(v[1]=p=>s.value.Label=p),disabled:s.value.Id>0,"error-messages":u.value},null,8,["modelValue","disabled","error-messages"])]),_:1}),e(y,null,{default:t(()=>[e(me,{label:`Valeur d'un ${F(Cl)[F(xl).FrancsSuisse]}`,density:"compact",variant:"outlined",type:"number",min:"0.001",suffix:"€",hint:"Valeur en € d'une unité de la monnaie.","persistent-hint":"","model-value":s.value.FrancsSuisse/1e3,"onUpdate:modelValue":v[2]||(v[2]=p=>s.value.FrancsSuisse=F(kl)(Number(p)*1e3)),disabled:s.value.Id>0},null,8,["label","model-value","disabled"])]),_:1})]),_:1}))]),_:1}),e(y,{cols:"auto"},{default:t(()=>[e(de,{thickness:"2",vertical:"",class:"py-4"},{default:t(()=>v[3]||(v[3]=[_("ou")])),_:1,__:[3]})]),_:1}),e(y,{"align-self":"center",cols:"auto"},{default:t(()=>[e(N,{onClick:d},{prepend:t(()=>[e(be,null,{default:t(()=>v[4]||(v[4]=[_("mdi-toggle-switch")])),_:1,__:[4]})]),default:t(()=>[_(" "+E(s.value.Id>0?"Créer un taux":"Utiliser un taux"),1)]),_:1})]),_:1})]),_:1}))}}),za=ee({__name:"CampStats",props:{stats:{}},setup(l){const s=l;function i(m,a){return`(${(a==0?0:100*m/a).toFixed(0)} %)`}return(m,a)=>(f(),A(Q,{title:"Statistiques"},{default:t(()=>[e(W,null,{default:t(()=>[e(B,null,{default:t(()=>[e(y,{cols:"5"},{default:t(()=>[_(" Demandes d'inscriptions : "+E(s.stats.Inscriptions),1)]),_:1}),e(y,{class:"text-right"},{default:t(()=>[_(" Dont Filles : "+E(s.stats.InscriptionsFilles)+" "+E(i(s.stats.InscriptionsFilles,s.stats.Inscriptions))+", Suisses : "+E(s.stats.InscriptionsSuisses)+" "+E(i(s.stats.InscriptionsSuisses,s.stats.Inscriptions)),1)]),_:1})]),_:1}),e(B,null,{default:t(()=>[e(y,{cols:"4"},{default:t(()=>[_(" Confirmées : "+E(s.stats.Valides)+" "+E(i(s.stats.Valides,s.stats.Inscriptions)),1)]),_:1}),e(y,{class:"text-right"},{default:t(()=>[_(" Dont Filles : "+E(s.stats.ValidesFilles)+" "+E(i(s.stats.ValidesFilles,s.stats.Valides))+" , Suisses : "+E(s.stats.ValidesSuisses)+" "+E(i(s.stats.ValidesSuisses,s.stats.Valides)),1)]),_:1})]),_:1}),e(B,null,{default:t(()=>[e(y,null,{default:t(()=>[_(" A statuer : "+E(s.stats.AStatuer)+" "+E(i(s.stats.AStatuer,s.stats.Inscriptions)),1)]),_:1}),e(y,{cols:"5",class:"text-center"},{default:t(()=>[_(" Demandes d'exception : "+E(s.stats.Exceptions)+" "+E(i(s.stats.Exceptions,s.stats.Inscriptions)),1)]),_:1}),e(y,{class:"text-right"},{default:t(()=>[_(" Refus : "+E(s.stats.Refus)+" "+E(i(s.stats.Refus,s.stats.Inscriptions)),1)]),_:1})]),_:1})]),_:1})]),_:1}))}}),Ha={key:0},Qa=ee({__name:"CampHeaderRow",props:{camp:{}},emits:["click","show-participants","edit-taux","delete","show-documents","send-sondage"],setup(l,{emit:s}){const i=l,m=s,a=O(()=>i.camp.Stats.Inscriptions-i.camp.Stats.Valides),o=M(!1),d=O(()=>{switch(new Date(i.camp.Camp.Camp.DateDebut).getUTCMonth()+1){case 7:case 8:return"rgb(45, 185, 187)";case 9:case 10:case 11:return"rgb(190, 150, 60)";case 12:case 1:case 2:case 3:return"rgb(240, 240, 240)";case 4:case 5:case 6:default:return"rgb(190, 228, 100)"}});return(n,u)=>(f(),z(ne,null,[e(ae,{modelValue:o.value,"onUpdate:modelValue":u[1]||(u[1]=r=>o.value=r),"max-width":"600"},{default:t(()=>[e(Q,{title:"Confirmer la suppression"},{default:t(()=>[e(W,null,{default:t(()=>[u[9]||(u[9]=_(" Etes vous certain de supprimer le séjour ")),R("b",null,E(F(ye).label(i.camp.Camp.Camp)),1),u[10]||(u[10]=_(" ? ")),u[11]||(u[11]=R("br",null,null,-1)),u[12]||(u[12]=R("br",null,null,-1)),u[13]||(u[13]=_(" Les éventuels ")),u[14]||(u[14]=R("i",null,"équipiers",-1)),u[15]||(u[15]=_(" déclarés sur ce séjour seront aussi supprimés. ")),u[16]||(u[16]=R("br",null,null,-1)),u[17]||(u[17]=R("br",null,null,-1)),u[18]||(u[18]=_(" Attention, cette opération est irréversible. "))]),_:1,__:[9,10,11,12,13,14,15,16,17,18]}),e(se,null,{default:t(()=>[e(ue),e(N,{color:"red",onClick:u[0]||(u[0]=r=>{o.value=!1,m("delete")})},{default:t(()=>u[19]||(u[19]=[_("Supprimer")])),_:1,__:[19]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Q,{color:d.value,"no-gutters":"",onClick:u[8]||(u[8]=r=>m("click")),class:"my-1"},{default:t(()=>[e(B,{style:Ne({"background-color":d.value}),class:"px-1","no-gutters":"",justify:"space-between"},{default:t(()=>[e(y,null,{default:t(()=>[e(K,{title:F(ye).label(i.camp.Camp.Camp),subtitle:`ID : ${i.camp.Camp.Camp.Id}`},null,8,["title","subtitle"])]),_:1}),e(y,{"align-self":"center"},{default:t(()=>[_(E(F(ye).formatPlage(n.camp.Camp.Camp)),1)]),_:1}),e(y,{cols:"2","align-self":"center"},{default:t(()=>[e(nt,{width:"600",location:"left","content-class":"pa-0"},{activator:t(({props:r})=>[e(Jt,le({class:"bg-white border-md border-primary"},r,{max:i.camp.Camp.Camp.Places,"model-value":i.camp.Stats.Valides,height:"36",rounded:"",color:"primary",onClick:u[2]||(u[2]=Je(v=>m("show-participants"),["stop"]))}),{default:t(()=>[R("strong",null,[_(E(i.camp.Stats.Valides)+"/"+E(i.camp.Camp.Camp.Places)+" ",1),a.value>0?(f(),z("span",Ha," (+ "+E(a.value)+")",1)):G("",!0)])]),_:2},1040,["max","model-value"])]),default:t(()=>[e(za,{stats:i.camp.Stats},null,8,["stats"])]),_:1})]),_:1}),e(y,{cols:"1"}),e(y,{cols:"auto","align-self":"center"},{default:t(()=>[e(xe,null,{activator:t(({props:r})=>[e(N,le(r,{size:"x-small",class:"mx-1",icon:"mdi-dots-vertical"}),null,16)]),default:t(()=>[e(Pe,{density:"compact"},{default:t(()=>[e(K,{"prepend-icon":"mdi-view-list",onClick:u[3]||(u[3]=r=>m("show-participants"))},{default:t(()=>u[20]||(u[20]=[_("Afficher les participants")])),_:1,__:[20]}),e(K,{"prepend-icon":"mdi-currency-eur",onClick:u[4]||(u[4]=r=>m("edit-taux"))},{default:t(()=>u[21]||(u[21]=[_("Taux de conversion")])),_:1,__:[21]}),e(de,{thickness:"1"}),e(K,{"prepend-icon":"mdi-mail",onClick:u[5]||(u[5]=r=>m("show-documents")),title:"Documents"}),e(de,{thickness:"1"}),e(K,{title:"Envoyer le sondage",subtitle:"de fin de séjour","prepend-icon":"mdi-comment-quote",onClick:u[6]||(u[6]=r=>m("send-sondage"))}),e(de,{thickness:"1"}),e(K,{"prepend-icon":"mdi-delete",disabled:i.camp.Stats.Inscriptions>0,onClick:u[7]||(u[7]=r=>o.value=!0)},{default:t(()=>u[22]||(u[22]=[_("Supprimer")])),_:1,__:[22]},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])]),_:1},8,["color"])],64))}}),Ya=ee({__name:"CampsSelector",props:ge({allCamps:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l,{emit:s}){const i=l,m=_e(l,"modelValue"),a=O(()=>i.allCamps.map(o=>({title:o.Label,value:o.Id})));return(o,d)=>(f(),A(oa,{multiple:"",chips:"","closable-chips":"",items:a.value,modelValue:m.value,"onUpdate:modelValue":d[0]||(d[0]=n=>m.value=n)},null,8,["items","modelValue"]))}}),Wa=ee({__name:"DocumentsCard",props:{camp:{}},setup(l){const s=l;Le(m);const i=M(null);async function m(){const a=await x.CampsDocuments({idCamp:s.camp.Camp.Camp.Id});a!==void 0&&(i.value=a)}return(a,o)=>{const d=Ca;return i.value!=null?(f(),A(Q,{key:0,title:"Documents"},{default:t(()=>[e(W,null,{default:t(()=>[e(Pe,null,{default:t(()=>[e($t,null,{default:t(()=>o[0]||(o[0]=[_("Préférences d'affichage")])),_:1,__:[0]}),e(K,null,{default:t(()=>[e(B,{class:"mb-2"},{default:t(()=>[e(y,null,{default:t(()=>[e(De,{color:i.value.ToShow.LettreDirecteur?"green":"grey","append-icon":i.value.ToShow.LettreDirecteur?"mdi-check":""},{default:t(()=>o[1]||(o[1]=[_("Lettre du directeur")])),_:1,__:[1]},8,["color","append-icon"])]),_:1}),e(y,null,{default:t(()=>[e(De,{color:i.value.ToShow.ListeVetements?"green":"grey","append-icon":i.value.ToShow.ListeVetements?"mdi-check":""},{default:t(()=>o[2]||(o[2]=[_(" Liste de vêtements")])),_:1,__:[2]},8,["color","append-icon"])]),_:1}),e(y,null,{default:t(()=>[e(De,{color:i.value.ToShow.ListeParticipants?"green":"grey","append-icon":i.value.ToShow.ListeParticipants?"mdi-check":""},{default:t(()=>o[3]||(o[3]=[_("Liste des participants ")])),_:1,__:[3]},8,["color","append-icon"])]),_:1})]),_:1})]),_:1}),e($t,null,{default:t(()=>o[4]||(o[4]=[_("Documents du séjour")])),_:1,__:[4]}),(f(!0),z(ne,null,ce(i.value.Generated,n=>(f(),A(K,{title:n.NomClient},{append:t(()=>[e(d,{"file-key":n.Key,"is-generated-doc":!0},null,8,["file-key"])]),_:2},1032,["title"]))),256)),(f(!0),z(ne,null,ce(i.value.ToRead,n=>(f(),A(K,{title:n.NomClient},{append:t(()=>[e(d,{"file-key":n.Key,"is-generated-doc":!1},null,8,["file-key"])]),_:2},1032,["title"]))),256)),(f(!0),z(ne,null,ce(i.value.ToUploadModeles,n=>(f(),A(K,{title:n.NomClient,subtitle:"Document à remplir"},{append:t(()=>[e(d,{"file-key":n.Key,"is-generated-doc":!1},null,8,["file-key"])]),_:2},1032,["title"]))),256))]),_:1})]),_:1})]),_:1})):(f(),A(Ge,{key:1,type:"card"}))}}});function Ja(){const l=M([]);Pl(()=>l.value=[]);function s(i,m){l.value[m]=i}return{refs:l,updateRef:s}}const Ga=Se({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:l=>l.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:l=>l%1===0},totalVisible:[Number,String],firstIcon:{type:Te,default:"$first"},prevIcon:{type:Te,default:"$prev"},nextIcon:{type:Te,default:"$next"},lastIcon:{type:Te,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...Tl(),...Ll(),...Rl(),...Fl(),...Ul(),...$l(),...Al({tag:"nav"}),...Ml(),...Il({variant:"text"})},"VPagination"),Ka=Ae()({name:"VPagination",props:Ga(),emits:{"update:modelValue":l=>!0,first:l=>!0,prev:l=>!0,next:l=>!0,last:l=>!0},setup(l,s){let{slots:i,emit:m}=s;const a=Fe(l,"modelValue"),{t:o,n:d}=it(),{isRtl:n}=Qt(),{themeClasses:u}=wl(l),{width:r}=Dl(),v=Ye(-1);Dt(void 0,{scoped:!0});const{resizeRef:p}=Sl(j=>{if(!j.length)return;const{target:Z,contentRect:V}=j[0],h=Z.querySelector(".v-pagination__list > *");if(!h)return;const I=V.width,J=h.offsetWidth+parseFloat(getComputedStyle(h).marginRight)*2;v.value=$(I,J)}),c=O(()=>parseInt(l.length,10)),S=O(()=>parseInt(l.start,10)),g=O(()=>l.totalVisible!=null?parseInt(l.totalVisible,10):v.value>=0?v.value:$(r.value,58));function $(j,Z){const V=l.showFirstLastPage?5:3;return Math.max(0,Math.floor(Number(((j-Z*V)/Z).toFixed(2))))}const b=O(()=>{if(c.value<=0||isNaN(c.value)||c.value>Number.MAX_SAFE_INTEGER)return[];if(g.value<=0)return[];if(g.value===1)return[a.value];if(c.value<=g.value)return Ue(c.value,S.value);const j=g.value%2===0,Z=j?g.value/2:Math.floor(g.value/2),V=j?Z:Z+1,h=c.value-Z;if(V-a.value>=0)return[...Ue(Math.max(1,g.value-1),S.value),l.ellipsis,c.value];if(a.value-h>=(j?1:0)){const I=g.value-1,J=c.value-I+S.value;return[S.value,l.ellipsis,...Ue(I,J)]}else{const I=Math.max(1,g.value-2),J=I===1?a.value:a.value-Math.ceil(I/2)+S.value;return[S.value,l.ellipsis,...Ue(I,J),l.ellipsis,c.value]}});function k(j,Z,V){j.preventDefault(),a.value=Z,V&&m(V,Z)}const{refs:P,updateRef:w}=Ja();Dt({VPaginationBtn:{color:Me(()=>l.color),border:Me(()=>l.border),density:Me(()=>l.density),size:Me(()=>l.size),variant:Me(()=>l.variant),rounded:Me(()=>l.rounded),elevation:Me(()=>l.elevation)}});const Y=O(()=>b.value.map((j,Z)=>{const V=h=>w(h,Z);if(typeof j=="string")return{isActive:!1,key:`ellipsis-${Z}`,page:j,props:{ref:V,ellipsis:!0,icon:!0,disabled:!0}};{const h=j===a.value;return{isActive:h,key:j,page:d(j),props:{ref:V,ellipsis:!1,icon:!0,disabled:!!l.disabled||Number(l.length)<2,color:h?l.activeColor:l.color,"aria-current":h,"aria-label":o(h?l.currentPageAriaLabel:l.pageAriaLabel,j),onClick:I=>k(I,j)}}}})),H=O(()=>{const j=!!l.disabled||a.value<=S.value,Z=!!l.disabled||a.value>=S.value+c.value-1;return{first:l.showFirstLastPage?{icon:n.value?l.lastIcon:l.firstIcon,onClick:V=>k(V,S.value,"first"),disabled:j,"aria-label":o(l.firstAriaLabel),"aria-disabled":j}:void 0,prev:{icon:n.value?l.nextIcon:l.prevIcon,onClick:V=>k(V,a.value-1,"prev"),disabled:j,"aria-label":o(l.previousAriaLabel),"aria-disabled":j},next:{icon:n.value?l.prevIcon:l.nextIcon,onClick:V=>k(V,a.value+1,"next"),disabled:Z,"aria-label":o(l.nextAriaLabel),"aria-disabled":Z},last:l.showFirstLastPage?{icon:n.value?l.firstIcon:l.lastIcon,onClick:V=>k(V,S.value+c.value-1,"last"),disabled:Z,"aria-label":o(l.lastAriaLabel),"aria-disabled":Z}:void 0}});function D(){var Z;const j=a.value-S.value;(Z=P.value[j])==null||Z.$el.focus()}function ve(j){j.key===St.left&&!l.disabled&&a.value>Number(l.start)?(a.value=a.value-1,vt(D)):j.key===St.right&&!l.disabled&&a.value<S.value+c.value-1&&(a.value=a.value+1,vt(D))}return $e(()=>e(l.tag,{ref:p,class:pe(["v-pagination",u.value,l.class]),style:Ne(l.style),role:"navigation","aria-label":o(l.ariaLabel),onKeydown:ve,"data-test":"v-pagination-root"},{default:()=>[R("ul",{class:"v-pagination__list"},[l.showFirstLastPage&&R("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[i.first?i.first(H.value.first):e(N,le({_as:"VPaginationBtn"},H.value.first),null)]),R("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[i.prev?i.prev(H.value.prev):e(N,le({_as:"VPaginationBtn"},H.value.prev),null)]),Y.value.map((j,Z)=>R("li",{key:j.key,class:pe(["v-pagination__item",{"v-pagination__item--is-active":j.isActive}]),"data-test":"v-pagination-item"},[i.item?i.item(j):e(N,le({_as:"VPaginationBtn"},j.props),{default:()=>[j.page]})])),R("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[i.next?i.next(H.value.next):e(N,le({_as:"VPaginationBtn"},H.value.next),null)]),l.showFirstLastPage&&R("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[i.last?i.last(H.value.last):e(N,le({_as:"VPaginationBtn"},H.value.last),null)])])]})),{}}}),Xa={key:2},ct=16,Za=ee({__name:"CampsList",emits:["show-participants"],setup(l,{emit:s}){const i=s;Le(r);const m=pt(new Map),a=M(!1),o=pt({pattern:"",openOnly:!1}),d=O(()=>{const T=Gt(o.pattern),U=Array.from(m.values()).filter(re=>ye.match(re.Camp.Camp,T)&&(!o.openOnly||At(re.Camp)));return U.sort((re,C)=>{const X=new Date(C.Camp.Camp.DateDebut).valueOf(),te=new Date(re.Camp.Camp.DateDebut).valueOf();return X==te?re.Camp.Camp.Id-C.Camp.Camp.Id:X-te}),U}),n=O(()=>d.value.slice((c.value-1)*ct,c.value*ct));function u(){c.value>p.value&&(c.value=p.value)}async function r(){a.value=!0;const T=await x.CampsGet();a.value=!1,T!==void 0&&(m.clear(),T==null||T.forEach(U=>m.set(U.Camp.Camp.Id,U)))}async function v(){a.value=!0;const T=await x.CampsCreate();a.value=!1,T!==void 0&&(x.showMessage("Camp ajouté avec succès."),m.set(T.Camp.Camp.Id,T),S.value=T.Camp.Camp)}const p=O(()=>Math.max(Math.ceil(d.value.length/ct),1)),c=M(1),S=M(null);async function g(T){S.value=null,a.value=!0;const U=await x.CampsUpdate(T);a.value=!1,U!==void 0&&(x.showMessage("Séjour modifié avec succès."),m.get(U.Camp.Id).Camp=U,u())}const $=M(null);async function b(){const T=$.value;if(T==null)return;$.value=null,a.value=!0;const U=await x.CampsSetTaux({IdCamp:T.Camp.Camp.Id,Taux:T.Taux});a.value=!1,U!==void 0&&(x.showMessage("Taux modifié avec succès."),m.set(U.Camp.Camp.Id,U))}const k=M(!1),P=M(5),w=M({Id:1,Label:"",Euros:0,FrancsSuisse:0}),Y=O(()=>w.value.Id>0||w.value.Label!=""),H=O(()=>new Set(Array.from(m.values()).filter(U=>At(U.Camp)).map(U=>U.Camp.Camp.IdTaux)).size<=1);async function D(){k.value=!1,a.value=!0;const T=await x.CampsCreateMany({Count:P.value,Taux:w.value});a.value=!1,T!==void 0&&(x.showMessage("Séjours créés avec succès."),T==null||T.forEach(U=>m.set(U.Camp.Camp.Id,U)))}async function ve(T){a.value=!0;const U=await x.CampsDelete({id:T.Camp.Camp.Id});a.value=!1,U!==void 0&&(x.showMessage("Séjour supprimé avec succès."),m.delete(T.Camp.Camp.Id),u())}const j=M(!1);function Z(){V.value=Array.from(m.values()).filter(T=>!T.Camp.Camp.Ouvert).map(T=>T.Camp.Camp.Id),j.value=!0}const V=M([]);async function h(){j.value=!1,!(!V.value.length||await x.CampsOuvreInscriptions({Camps:V.value})===void 0)&&(x.showMessage("Séjours ouverts aux inscriptions avec succès."),r())}const I=M(null),J=M(!1);async function oe(T){J.value=!0;const U=await x.EventsSendSondages({idCamp:T});J.value=!1,U!==void 0&&x.showMessage("Sondage envoyé avec succès.")}return(T,U)=>{const re=je;return f(),z(ne,null,[e(Q,{title:"Séjours",subtitle:m.size},{append:t(()=>[e(B,null,{default:t(()=>[e(y,{"align-self":"center",style:{width:"240px"}},{default:t(()=>[e(me,{label:"Rechercher",variant:"filled",density:"comfortable","hide-details":"","prepend-inner-icon":"mdi-magnify",clearable:"",modelValue:o.pattern,"onUpdate:modelValue":[U[0]||(U[0]=C=>o.pattern=C),U[2]||(U[2]=C=>u())],"onClick:clear":U[1]||(U[1]=C=>{o.pattern="",u()})},null,8,["modelValue"])]),_:1}),e(de,{vertical:"",thickness:"1"}),e(y,{"align-self":"center",cols:"auto"},{default:t(()=>[e(xe,null,{activator:t(({props:C})=>[e(N,le(C,{color:"success",disabled:a.value}),{prepend:t(()=>[e(be,null,{default:t(()=>U[16]||(U[16]=[_("mdi-plus")])),_:1,__:[16]})]),default:t(()=>[U[17]||(U[17]=_(" Créer un séjour "))]),_:2,__:[17]},1040,["disabled"])]),default:t(()=>[e(Pe,{density:"compact"},{default:t(()=>[e(K,{onClick:v,title:"Créer un séjour"}),e(K,{title:"Créer plusieurs séjours...",subtitle:"Permet de choisir les taux de conversion",onClick:U[3]||(U[3]=C=>k.value=!0)})]),_:1})]),_:1})]),_:1}),e(y,{"align-self":"center",cols:"auto"},{default:t(()=>[e(xe,null,{activator:t(({props:C})=>[e(N,le(C,{flat:"",icon:"mdi-dots-vertical",size:"small"}),null,16)]),default:t(()=>[e(Pe,{density:"compact"},{default:t(()=>[e(K,{title:"Masquer les camps fermés",subtitle:"N'afficher que les camps ouverts aux inscriptions",onClick:U[5]||(U[5]=C=>o.openOnly=!o.openOnly)},{prepend:t(()=>[e(Xe,{class:"mr-2",modelValue:o.openOnly,"onUpdate:modelValue":U[4]||(U[4]=C=>o.openOnly=C),density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(de,{thickness:"1"}),e(K,{onClick:Z,title:"Ouvrir les inscriptions","prepend-icon":"mdi-lock-open"})]),_:1})]),_:1})]),_:1})]),_:1})]),default:t(()=>[e(W,{class:"mt-4"},{default:t(()=>[H.value?G("",!0):(f(),A(Nl,{key:0,type:"warning"},{default:t(()=>U[18]||(U[18]=[_(" Attention, les séjours ouverts aux inscriptions ont des taux de conversion incompatibles ! ")])),_:1,__:[18]})),a.value?(f(),A(Ge,{key:1})):d.value.length==0?(f(),z("i",Xa," Aucun camp ne correspond aux filtres actuels. ")):G("",!0),J.value?(f(),A(Jt,{key:3,indeterminate:"",color:"secondary"})):G("",!0),(f(!0),z(ne,null,ce(n.value,(C,X)=>(f(),A(Qa,{key:X,camp:C,onClick:te=>S.value=C.Camp.Camp,onShowParticipants:te=>i("show-participants",C),onEditTaux:te=>$.value=C,onDelete:te=>ve(C),onShowDocuments:te=>I.value=C,onSendSondage:te=>oe(C.Camp.Camp.Id)},null,8,["camp","onClick","onShowParticipants","onEditTaux","onDelete","onShowDocuments","onSendSondage"]))),128)),e(Ka,{length:p.value,modelValue:c.value,"onUpdate:modelValue":U[6]||(U[6]=C=>c.value=C)},null,8,["length","modelValue"])]),_:1})]),_:1},8,["subtitle"]),e(ae,{"model-value":S.value!=null,"onUpdate:modelValue":U[7]||(U[7]=C=>S.value=null)},{default:t(()=>[S.value!=null?(f(),A(ja,{key:0,camp:S.value,onSave:g},null,8,["camp"])):G("",!0)]),_:1},8,["model-value"]),e(ae,{"model-value":$.value!=null,"onUpdate:modelValue":U[9]||(U[9]=C=>$.value=null),"max-width":"600"},{default:t(()=>[$.value!=null?(f(),A(Q,{key:0,title:"Modifier le taux",subtitle:"La modification n'est possible que si aucun participant n'est enregistré."},{default:t(()=>[e(W,null,{default:t(()=>[e(Et,{modelValue:$.value.Taux,"onUpdate:modelValue":U[8]||(U[8]=C=>$.value.Taux=C)},null,8,["modelValue"])]),_:1}),e(se,null,{default:t(()=>[e(ue),e(N,{disabled:$.value.Stats.Inscriptions>0,onClick:b},{default:t(()=>U[19]||(U[19]=[_("Modifier")])),_:1,__:[19]},8,["disabled"])]),_:1})]),_:1})):G("",!0)]),_:1},8,["model-value"]),e(ae,{modelValue:k.value,"onUpdate:modelValue":U[12]||(U[12]=C=>k.value=C),"max-width":"600"},{default:t(()=>[e(Q,{title:"Créer plusieurs séjours",subtitle:"Les séjours seront liés au même taux de conversion"},{default:t(()=>[e(W,null,{default:t(()=>[e(B,null,{default:t(()=>[e(y,null,{default:t(()=>[e(re,{label:"Nombre de séjours",modelValue:P.value,"onUpdate:modelValue":U[10]||(U[10]=C=>P.value=C)},null,8,["modelValue"])]),_:1})]),_:1}),e(de,{thickness:"2",class:"my-2"}),e(Et,{modelValue:w.value,"onUpdate:modelValue":U[11]||(U[11]=C=>w.value=C)},null,8,["modelValue"])]),_:1}),e(se,null,{default:t(()=>[e(ue),e(N,{color:"success",onClick:D,disabled:!Y.value},{default:t(()=>U[20]||(U[20]=[_("Créer")])),_:1,__:[20]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ae,{modelValue:j.value,"onUpdate:modelValue":U[14]||(U[14]=C=>j.value=C),"max-width":"600"},{default:t(()=>[e(Q,{title:"Ouvrir les inscriptions",subtitle:"Ouvre les inscriptions sur les séjours ci-dessous"},{default:t(()=>[e(W,null,{default:t(()=>[e(Ya,{"all-camps":Array.from(m.values()).map(C=>F(ye).toItem(C.Camp)),modelValue:V.value,"onUpdate:modelValue":U[13]||(U[13]=C=>V.value=C)},null,8,["all-camps","modelValue"])]),_:1}),e(se,null,{default:t(()=>[e(ue),e(N,{onClick:h,disabled:!V.value.length},{default:t(()=>U[21]||(U[21]=[_("Ouvrir")])),_:1,__:[21]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ae,{"model-value":I.value!=null,"onUpdate:modelValue":U[15]||(U[15]=C=>I.value=null),"max-width":"800px"},{default:t(()=>[I.value?(f(),A(Wa,{key:0,camp:I.value},null,8,["camp"])):G("",!0)]),_:1},8,["model-value"])],64)}}}),en={key:1},tn={key:0,class:"text-center font-italic"},ln=ee({__name:"CampParticipants",props:{id:{}},setup(l){const s=l;Le(()=>{n(),a()}),Ie(()=>s.id,n);const i=M(!1),m=M([]);async function a(){const P=await x.GetCamps();P!==void 0&&(m.value=P||[])}const o=O(()=>{var w;const P=(((w=d.value)==null?void 0:w.Participants)||[]).map(Y=>Y);return P.sort(Ol.cmp),P}),d=M(null);async function n(){i.value=!0;const P=await x.CampsLoad({idCamp:s.id});i.value=!1,P!==void 0&&(d.value=P)}const u=M(null);async function r(){if(u.value==null||d.value==null)return;const P=await x.ParticipantsCreate(u.value);u.value=null,P!==void 0&&(x.showMessage("Participant créé avec succès."),d.value.Participants=(d.value.Participants||[]).concat(P))}const v=M(null);async function p(P){if(v.value==null||d.value==null)return;const w=await x.ParticipantsUpdate(P);v.value=null,w!==void 0&&(x.showMessage("Participant modifié avec succès."),n())}const c=M(null);async function S(){if(c.value==null||d.value==null)return;const P=c.value.Participant.Id,w=await x.ParticipantsDelete({id:P});c.value=null,w!==void 0&&(x.showMessage("Participant supprimé avec succès."),d.value.Participants=(d.value.Participants||[]).filter(Y=>Y.Participant.Id!=P))}const g=M(null);async function $(){const P=g.value;P==null||d.value==null||(g.value=null,await x.ParticipantsMove(P)===void 0)||(x.showMessage("Participant déplacé avec succès.",void 0,{title:"Aller au nouveau séjour",action:()=>Vt({IdCamp:P.Target,Id:P.Id})}),d.value.Participants=(d.value.Participants||[]).filter(Y=>Y.Participant.Id!=P.Id))}const b=M(null);async function k(){var H;if(b.value==null)return;const P=b.value.Participant.Id;b.value=null;const w=await x.ParticipantsSetPlaceLiberee({id:P});if(w===void 0||d.value==null)return;const Y=(H=d.value.Participants)==null?void 0:H.find(D=>D.Participant.Id==P);Y.Participant=w}return(P,w)=>{const Y=ra,H=ma,D=st,ve=Xt,j=da,Z=ot;return d.value!=null?(f(),A(Q,{key:0,title:"Participants",subtitle:F(ye).label(d.value.Camp.Camp)},{append:t(()=>[e(N,{color:"green",onClick:w[0]||(w[0]=V=>u.value={IdCamp:s.id,IdDossier:0,IdPersonne:0})},{prepend:t(()=>[e(be,null,{default:t(()=>w[9]||(w[9]=[_("mdi-plus")])),_:1,__:[9]})]),default:t(()=>[w[10]||(w[10]=_(" Créer un participant"))]),_:1,__:[10]})]),default:t(()=>[e(W,{class:"mt-4"},{default:t(()=>[i.value?(f(),A(Ge,{key:0,type:"table"})):(f(),z("div",en,[e(Y),o.value.length?G("",!0):(f(),z("div",tn," Aucun participant n'est encore inscrit sur ce séjour. ")),(f(!0),z(ne,null,ce(o.value,(V,h)=>(f(),A(H,{participant:V,index:h},{actions:t(()=>[e(Pe,{density:"comfortable"},{default:t(()=>[e(K,{title:"Modifier","prepend-icon":"mdi-pencil",onClick:I=>v.value=V},null,8,["onClick"]),e(de),e(K,{title:"Changer de camp...","prepend-icon":"mdi-file-move",onClick:I=>g.value={Id:V.Participant.Id,Target:0}},null,8,["onClick"]),e(K,{title:"Notifier d'une place disponible.",subtitle:"Envoi un email","prepend-icon":"mdi-email-alert",disabled:V.Participant.Statut==F(We).Inscrit||V.Participant.Statut==F(We).EnAttenteReponse,onClick:I=>b.value=V},null,8,["disabled","onClick"]),e(de),e(K,{title:"Aller à la personne",subtitle:`(ID : ${V.Personne.Id})`,onClick:I=>F(Qe)(V.Personne.Id)},null,8,["subtitle","onClick"]),e(K,{title:"Aller au dossier",subtitle:`(ID : ${V.Participant.IdDossier})`,onClick:I=>F(ft)(V.Participant.IdDossier)},null,8,["subtitle","onClick"]),e(de),e(K,{title:"Supprimer","prepend-icon":"mdi-delete",onClick:I=>c.value=V},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["participant","index"]))),256))]))]),_:1}),u.value!=null?(f(),A(ae,{key:0,"model-value":u.value!=null,"onUpdate:modelValue":w[3]||(w[3]=V=>u.value=null),"max-width":"600px"},{default:t(()=>[e(Q,{title:"Créer un participant"},{default:t(()=>[e(W,null,{default:t(()=>[e(B,null,{default:t(()=>[e(y,{cols:"12"},{default:t(()=>[e(D,{label:"Participant",modelValue:u.value.IdPersonne,"onUpdate:modelValue":w[1]||(w[1]=V=>u.value.IdPersonne=V),"initial-personne":"",api:{SelectPersonne:F(x).SelectPersonne.bind(F(x))}},null,8,["modelValue","api"])]),_:1}),e(y,{cols:"12"},{default:t(()=>[e(ve,{modelValue:u.value.IdDossier,"onUpdate:modelValue":w[2]||(w[2]=V=>u.value.IdDossier=V)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ue),e(N,{color:"green",onClick:r,disabled:!(u.value.IdDossier&&u.value.IdPersonne)},{default:t(()=>w[11]||(w[11]=[_("Créer")])),_:1,__:[11]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])):G("",!0),v.value!=null?(f(),A(ae,{key:1,"model-value":v.value!=null,"onUpdate:modelValue":w[4]||(w[4]=V=>v.value=null),"max-width":"800px"},{default:t(()=>[e(j,{participant:v.value.Participant,personne:v.value.Personne,api:{SelectPersonne:F(x).SelectPersonne.bind(F(x))},onSave:p},null,8,["participant","personne","api"])]),_:1},8,["model-value"])):G("",!0),c.value!=null?(f(),A(ae,{key:2,"model-value":c.value!=null,"onUpdate:modelValue":w[5]||(w[5]=V=>c.value=null),"max-width":"600px"},{default:t(()=>[e(Q,{title:"Supprimer le participant"},{default:t(()=>[e(W,null,{default:t(()=>[w[12]||(w[12]=_(" Confirmez-vous la suppression du participant ")),R("b",null,E(F(Re).label(c.value.Personne)),1),w[13]||(w[13]=_(" ? ")),w[14]||(w[14]=R("br",null,null,-1)),w[15]||(w[15]=R("br",null,null,-1)),w[16]||(w[16]=_(" Attention, cette opération est irréversible. "))]),_:1,__:[12,13,14,15,16]}),e(se,null,{default:t(()=>[e(ue),e(N,{color:"red",onClick:S},{default:t(()=>w[17]||(w[17]=[_("Supprimer")])),_:1,__:[17]})]),_:1})]),_:1})]),_:1},8,["model-value"])):G("",!0),g.value!=null?(f(),A(ae,{key:3,"model-value":g.value!=null,"onUpdate:modelValue":w[7]||(w[7]=V=>g.value=null),"max-width":"500px"},{default:t(()=>[e(Q,{title:"Déplacer le participant"},{default:t(()=>[e(W,null,{default:t(()=>[e(Z,{label:"Nouveau séjour",camps:m.value,modelValue:g.value.Target,"onUpdate:modelValue":w[6]||(w[6]=V=>g.value.Target=V)},null,8,["camps","modelValue"])]),_:1}),e(se,null,{default:t(()=>[e(ue),e(N,{onClick:$,disabled:g.value.Target==s.id||!g.value.Target},{default:t(()=>w[18]||(w[18]=[_("Déplacer")])),_:1,__:[18]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])):G("",!0),b.value!=null?(f(),A(ae,{key:4,"model-value":b.value!=null,"onUpdate:modelValue":w[8]||(w[8]=V=>b.value=null),"max-width":"500px"},{default:t(()=>[e(Q,{title:"Notifier d'une place disponible"},{default:t(()=>[e(W,null,{default:t(()=>[_(" Confirmez-vous l'envoi d'une notification au responsable de "+E(F(Re).label(b.value.Personne))+" indiquant qu'une place est disponible ? ",1),w[19]||(w[19]=R("br",null,null,-1)),w[20]||(w[20]=R("br",null,null,-1)),_(" Le nouveau statut de "+E(b.value.Personne.Prenom)+" sera : ",1),R("i",null,E(F(El)[F(We).EnAttenteReponse]),1),w[21]||(w[21]=_(". "))]),_:1,__:[19,20,21]}),e(se,null,{default:t(()=>[e(ue),e(N,{onClick:k},{default:t(()=>w[22]||(w[22]=[_("Notifier")])),_:1,__:[22]})]),_:1})]),_:1})]),_:1},8,["model-value"])):G("",!0)]),_:1},8,["subtitle"])):(f(),A(Ge,{key:1,type:"card"}))}}}),an=ee({__name:"camps",setup(l){const s=Ke(),i=O(()=>eu(s.currentRoute.value.query)),m=O(()=>i.value.idCamp);function a(d){const n=s.currentRoute.value;s.push({path:n.path,query:{idCamp:d.Camp.Camp.Id}})}function o(){const d=s.currentRoute.value;s.push({path:d.path,query:{}})}return(d,n)=>(f(),z(ne,null,[e(rt,{title:"Gestion des séjours"},{default:t(()=>[m.value!==null?(f(),A(N,{key:0,onClick:o},{prepend:t(()=>[e(be,null,{default:t(()=>n[0]||(n[0]=[_("mdi-view-list")])),_:1,__:[0]})]),default:t(()=>[n[1]||(n[1]=_(" Retour à la liste"))]),_:1,__:[1]})):G("",!0)]),_:1}),m.value===void 0?(f(),A(Za,{key:0,onShowParticipants:a})):(f(),A(ln,{key:1,id:m.value},null,8,["id"]))],64))}}),ol=ee({__name:"MergeCard",props:{from:{}},emits:["merge"],setup(l,{emit:s}){const i=l,m=s,a=M(0),o=M(!0);return(d,n)=>{const u=Xt;return f(),A(Q,{title:"Fusionner le dossier vers",subtitle:"Les participants, paiements et messages seront copiés vers le dossier cible."},{default:t(()=>[e(W,null,{default:t(()=>[e(B,null,{default:t(()=>[e(y,{cols:"12"},{default:t(()=>[e(u,{modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=r=>a.value=r)},null,8,["modelValue"])]),_:1}),e(y,{cols:"12"},{default:t(()=>[e(Xe,{density:"compact",label:"Notifier par email",hint:"Le reponsable du dossier absorbé sera averti du changement d'espace personnel.","persistent-hint":"",modelValue:o.value,"onUpdate:modelValue":n[1]||(n[1]=r=>o.value=r)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ue),e(N,{disabled:a.value==0||a.value==i.from,onClick:n[2]||(n[2]=r=>m("merge",{From:i.from,To:a.value,Notifie:o.value}))},{default:t(()=>n[3]||(n[3]=[_("Fusionner")])),_:1,__:[3]},8,["disabled"])]),_:1})]),_:1})}}}),nn={key:1,class:"text-center font-italic"},un={key:2},sn=ee({__name:"PannelInscriptions",emits:["goTo","empty"],setup(l,{emit:s}){const i=s,m=M(!1);Le(async()=>{await o(),a.value.length||i("empty")});const a=M([]);async function o(){m.value=!0;const b=await x.InscriptionsGet();m.value=!1,b!==void 0&&(a.value=b||[])}const d=M(""),n=O(()=>{const b=Gt(d.value);return a.value.filter(k=>{var P;return Re.match(k.Responsable,b)||((P=k.Participants)==null?void 0:P.some(w=>Re.match(w.Personne,b)||ye.match(w.Camp,b)))})});async function u(b,k){const P=await x.InscriptionsIdentifiePersonne({IdDossier:b,Target:k});if(P===void 0)return;x.showMessage("Profil identifié avec succès.");const w=a.value.findIndex(Y=>Y.Dossier.Id==b);a.value[w]=P}const r=M(null);async function v(b){const k=await x.InscriptionsHintValide({idDossier:b.Dossier.Id});k!==void 0&&(r.value={inscription:b,statuts:k||{}})}async function p(b,k){if(!r.value)return;const P=r.value.inscription.Dossier.Id;r.value=null,await x.InscriptionsValide({IdDossier:P,Statuts:b,SendMail:k})!==void 0&&(x.showMessage("Inscription validée avec succès.","",{title:"Aller au dossier",action:()=>i("goTo",P)}),a.value=a.value.filter(Y=>Y.Dossier.Id!=P))}async function c(b){await x.DossiersDelete({id:b.Dossier.Id})!==void 0&&(x.showMessage("Inscription supprimée avec succès."),a.value=a.value.filter(P=>P.Dossier.Id!=b.Dossier.Id))}async function S(b,k){if(await x.ParticipantsDelete({id:k})===void 0)return;x.showMessage("Participant supprimé avec succès.");const w=a.value.find(Y=>Y.Dossier.Id==b);w.Participants=(w.Participants||[]).filter(Y=>Y.Participant.Id!=k)}const g=M(null);async function $(b){g.value=null,await x.DossiersMerge(b)!==void 0&&(x.showMessage("Inscriptions fusionnées avec succès."),o())}return(b,k)=>{const P=va;return f(),A(Q,{title:"Inscriptions",subtitle:"En attente de validation",class:"ma-2"},{append:t(()=>[e(me,{width:"300","append-inner-icon":"mdi-magnify",label:"Rechercher","hide-details":"",modelValue:d.value,"onUpdate:modelValue":k[0]||(k[0]=w=>d.value=w)},null,8,["modelValue"])]),default:t(()=>[e(W,null,{default:t(()=>[m.value?(f(),A(Ge,{key:0})):a.value.length?(f(),z("div",un,[(f(!0),z(ne,null,ce(n.value,(w,Y)=>(f(),A(ca,{class:"my-1",key:Y,inscription:w,onIdentifie:H=>u(w.Dossier.Id,H),onValide:H=>v(w),onMerge:H=>g.value=w.Dossier.Id,onDelete:H=>c(w),onDeleteParticipant:H=>S(w.Dossier.Id,H),api:{SearchSimilaires:F(x).InscriptionsSearchSimilaires.bind(F(x)),SelectPersonne:F(x).SelectPersonne.bind(F(x))}},null,8,["inscription","onIdentifie","onValide","onMerge","onDelete","onDeleteParticipant","api"]))),128))])):(f(),z("div",nn," Il n'y a aucune inscription à valider. "))]),_:1}),e(ae,{"model-value":g.value!=null,"onUpdate:modelValue":k[1]||(k[1]=w=>g.value=null),"max-width":"600px"},{default:t(()=>[g.value!=null?(f(),A(ol,{key:0,from:g.value,onMerge:$},null,8,["from"])):G("",!0)]),_:1},8,["model-value"]),e(ae,{"model-value":r.value!=null,"onUpdate:modelValue":k[2]||(k[2]=w=>r.value=null),"max-width":"800px"},{default:t(()=>[r.value?(f(),A(P,{key:0,inscription:r.value.inscription,statuts:r.value.statuts,rights:{AgeInvalide:!0,CampComplet:!0},onValide:p},null,8,["inscription","statuts"])):G("",!0)]),_:1},8,["model-value"])]),_:1})}}}),on={class:"text-grey"},rn={class:"text-grey"},dn={key:0},mn=ee({__name:"FactureCard",props:{dossier:{}},setup(l){const s=l,i=O(()=>(s.dossier.Participants||[]).filter(n=>n.Participant.Statut!=We.Inscrit).map(n=>Re.label(n.Personne))),m=O(()=>(s.dossier.Participants||[]).filter(n=>n.Participant.Statut==We.Inscrit).map(n=>({Label:Re.label(n.Personne),Camp:ye.label(n.Camp),Prix:we.montant(n.Camp.Prix),Bilan:s.dossier.Bilan.Inscrits[n.Participant.Id]})));function a(n){return!!(n.Remises.ReducEnfants||n.Remises.ReducEquipiers||n.Remises.ReducSpeciale.Cent)}function o(n){const u=[];return n.ReducEnfants&&u.push(`Enfants : ${n.ReducEnfants}%`),n.ReducEquipiers&&u.push(`Enfants : ${n.ReducEquipiers}%`),n.ReducSpeciale.Cent&&u.push(`Remise : ${we.montant(n.ReducSpeciale)}`),u.join("  ;  ")}const d=O(()=>{const n=Object.values(s.dossier.Paiements||{});return n.sort((u,r)=>new Date(u.Time).valueOf()-new Date(r.Time).valueOf()),n});return(n,u)=>(f(),A(Q,{title:"Suivi financier",subtitle:i.value.length?`Les participants en liste d'attente (${i.value.join(", ")}) ne sont pas pris en compte.`:"","min-width":"900px"},{default:t(()=>[e(W,null,{default:t(()=>[e(B,null,{default:t(()=>[e(y,{cols:"3"},{default:t(()=>u[0]||(u[0]=[_("Participant")])),_:1,__:[0]}),e(y,{cols:"2",class:"text-center"},{default:t(()=>u[1]||(u[1]=[_("Prix du séjour")])),_:1,__:[1]}),e(y,{cols:"2",class:"text-center"},{default:t(()=>u[2]||(u[2]=[_("Prix avec option")])),_:1,__:[2]}),e(y,{cols:"3",class:"text-center"},{default:t(()=>u[3]||(u[3]=[_("Aides extérieures")])),_:1,__:[3]}),e(y,{cols:"2",class:"text-right"},{default:t(()=>u[4]||(u[4]=[_("Sous-total")])),_:1,__:[4]})]),_:1}),e(de,{thickness:"1",class:"my-2"}),(f(!0),z(ne,null,ce(m.value,r=>(f(),z(ne,null,[e(B,null,{default:t(()=>[e(y,{"align-self":"center",cols:"3"},{default:t(()=>[_(E(r.Label)+" ",1),u[5]||(u[5]=R("br",null,null,-1)),R("span",on,E(r.Camp),1)]),_:2,__:[5]},1024),e(y,{"align-self":"center",cols:"2",class:"text-center"},{default:t(()=>[_(E(r.Prix),1)]),_:2},1024),e(y,{"align-self":"center",cols:"2",class:"text-center"},{default:t(()=>[_(E(F(we).montant(r.Bilan.AvecOption))+" ",1),u[6]||(u[6]=R("br",null,null,-1)),R("span",rn,E(r.Bilan.AvecOptionDescription),1)]),_:2,__:[6]},1024),e(y,{"align-self":"center",cols:"3",class:"text-center"},{default:t(()=>{var v;return[(v=r.Bilan.Aides)!=null&&v.length?G("",!0):(f(),z("span",dn,"-")),(f(!0),z(ne,null,ce(r.Bilan.Aides,p=>(f(),A(De,null,{default:t(()=>[_(E(p.Structure)+" : "+E(F(we).montant(p.Montant)),1)]),_:2},1024))),256))]}),_:2},1024),e(y,{"align-self":"center",cols:"2",class:"text-right"},{default:t(()=>[_(E(r.Bilan.AvecAides),1)]),_:2},1024)]),_:2},1024),a(r.Bilan)?(f(),A(B,{key:0,"no-gutters":""},{default:t(()=>[e(y,{cols:"10",class:"text-right"},{default:t(()=>[R("i",null,E(o(r.Bilan.Remises)),1)]),_:2},1024),e(y,{cols:"2",class:"text-right"},{default:t(()=>[_(E(r.Bilan.Net),1)]),_:2},1024)]),_:2},1024)):G("",!0)],64))),256)),e(de,{thickness:"1",class:"my-2"}),e(B,null,{default:t(()=>[e(y,{cols:"10",class:"text-right"},{default:t(()=>u[7]||(u[7]=[_("Total demandé")])),_:1,__:[7]}),e(y,{cols:"2",class:"text-right"},{default:t(()=>[_(E(s.dossier.Bilan.Demande),1)]),_:1})]),_:1}),e(de,{thickness:"1",class:"my-2"}),(f(!0),z(ne,null,ce(d.value,r=>(f(),A(B,null,{default:t(()=>[e(y,null,{default:t(()=>[_(" Paiement de "+E(r.Payeur)+", le "+E(F(we).date(r.Time)),1)]),_:2},1024),e(y,{cols:"2",class:"text-right"},{default:t(()=>[_(E(r.IsRemboursement?"+":"-")+E(F(we).montant(r.Montant)),1)]),_:2},1024)]),_:2},1024))),256)),e(B,null,{default:t(()=>[e(y,{cols:"10",class:"text-right"},{default:t(()=>u[8]||(u[8]=[_("Solde")])),_:1,__:[8]}),e(y,{cols:"2",class:"text-right"},{default:t(()=>[R("b",null,E(s.dossier.Bilan.Restant),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["subtitle"]))}});function Ee(l){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return String(l).padStart(s,"0")}const cn=Se({allowedValues:Function,ampm:Boolean,color:String,disabled:Boolean,displayedValue:null,double:Boolean,format:{type:Function,default:l=>l},max:{type:Number,required:!0},min:{type:Number,required:!0},scrollable:Boolean,readonly:Boolean,rotate:{type:Number,default:0},step:{type:Number,default:1},modelValue:{type:Number}},"VTimePickerClock"),ht=Ae()({name:"VTimePickerClock",props:cn(),emits:{change:l=>!0,input:l=>!0},setup(l,s){let{emit:i}=s;const m=M(null),a=M(null),o=M(void 0),d=M(!1),n=M(null),u=M(null),{textColorClasses:r,textColorStyles:v}=hl(()=>l.color),{backgroundColorClasses:p,backgroundColorStyles:c}=qt(()=>l.color),S=O(()=>l.max-l.min+1),g=O(()=>l.double?S.value/2:S.value),$=O(()=>360/g.value),b=O(()=>$.value*Math.PI/180),k=O(()=>l.modelValue==null?l.min:l.modelValue),P=O(()=>.62),w=O(()=>{const C=[];for(let X=l.min;X<=l.max;X=X+l.step)C.push(X);return C});Ie(()=>l.modelValue,C=>{o.value=C});function Y(C){o.value!==C&&(o.value=C),i("input",C)}function H(C){return!l.allowedValues||l.allowedValues(C)}function D(C){if(!l.scrollable||l.disabled)return;C.preventDefault();const X=Math.sign(-C.deltaY||1);let te=k.value;do te=te+X,te=(te-l.min+S.value)%S.value+l.min;while(!H(te)&&te!==k.value);te!==l.displayedValue&&Y(te)}function ve(C){return l.double&&C-l.min>=g.value}function j(C){return ve(C)?P.value:1}function Z(C){const X=l.rotate*Math.PI/180;return{x:Math.sin((C-l.min)*b.value+X)*j(C),y:-Math.cos((C-l.min)*b.value+X)*j(C)}}function V(C,X){const te=(Math.round(C/$.value)+(X?g.value:0))%S.value+l.min;return C<360-$.value/2?te:X?l.max-g.value+1:l.min}function h(C){const{x:X,y:te}=Z(C);return{left:`${Math.round(50+X*50)}%`,top:`${Math.round(50+te*50)}%`}}function I(C,X){const te=X.x-C.x,L=X.y-C.y;return Math.sqrt(te*te+L*L)}function J(C,X){const te=2*Math.atan2(X.y-C.y-I(C,X),X.x-C.x);return Math.abs(te*180/Math.PI)}function oe(C){n.value===null&&(n.value=C),u.value=C,Y(C)}function T(C){var Pt,wt;if(C.preventDefault(),!d.value&&C.type!=="click"||!m.value)return;const{width:X,top:te,left:L}=(Pt=m.value)==null?void 0:Pt.getBoundingClientRect(),{width:q}=((wt=a.value)==null?void 0:wt.getBoundingClientRect())??{width:0},{clientX:ie,clientY:fe}="touches"in C?C.touches[0]:C,Ve={x:X/2,y:-X/2},kt={x:ie-L,y:te-fe},Ct=Math.round(J(Ve,kt)-l.rotate+360)%360,xt=l.double&&I(Ve,kt)<(q+q*P.value)/4,ml=Math.ceil(15/$.value);let Be;for(let Ze=0;Ze<ml;Ze++)if(Be=V(Ct+Ze*$.value,xt),H(Be)||(Be=V(Ct-Ze*$.value,xt),H(Be)))return oe(Be)}function U(C){l.disabled||(C.preventDefault(),window.addEventListener("mousemove",T),window.addEventListener("touchmove",T),window.addEventListener("mouseup",re),window.addEventListener("touchend",re),n.value=null,u.value=null,d.value=!0,T(C))}function re(C){C.stopPropagation(),window.removeEventListener("mousemove",T),window.removeEventListener("touchmove",T),window.removeEventListener("mouseup",re),window.removeEventListener("touchend",re),d.value=!1,u.value!==null&&H(u.value)&&i("change",u.value)}$e(()=>R("div",{class:pe([{"v-time-picker-clock":!0,"v-time-picker-clock--indeterminate":l.modelValue==null,"v-time-picker-clock--readonly":l.readonly}]),onMousedown:U,onTouchstart:U,onWheel:D,ref:m},[R("div",{class:"v-time-picker-clock__inner",ref:a},[R("div",{class:pe([{"v-time-picker-clock__hand":!0,"v-time-picker-clock__hand--inner":ve(l.modelValue)},r.value]),style:Ne([{transform:`rotate(${l.rotate+$.value*(k.value-l.min)}deg) scaleY(${j(k.value)})`},v.value])},null),w.value.map(C=>{const X=C===k.value;return R("div",{class:pe([{"v-time-picker-clock__item":!0,"v-time-picker-clock__item--active":X,"v-time-picker-clock__item--disabled":l.disabled||!H(C)},X&&p.value]),style:Ne([h(C),X&&c.value])},[R("span",null,[l.format(C)])])})])]))}}),vn=Se({ampm:Boolean,ampmInTitle:Boolean,ampmReadonly:Boolean,color:String,disabled:Boolean,hour:Number,minute:Number,second:Number,period:String,readonly:Boolean,useSeconds:Boolean,value:Number,viewMode:String},"VTimePickerControls"),Bt=Ae()({name:"VTimePickerControls",props:vn(),emits:{"update:period":l=>!0,"update:viewMode":l=>!0},setup(l,s){let{emit:i,slots:m}=s;const{t:a}=it();return $e(()=>{let o=l.hour;return l.ampm&&(o=o?(o-1)%12+1:12),R("div",{class:"v-time-picker-controls"},[R("div",{class:pe({"v-time-picker-controls__time":!0,"v-time-picker-controls__time--with-seconds":l.useSeconds})},[e(N,{active:l.viewMode==="hour",color:l.viewMode==="hour"?l.color:void 0,disabled:l.disabled,variant:"tonal",class:pe({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time--with-ampm__btn":l.ampm,"v-time-picker-controls__time--with-seconds__btn":l.useSeconds}),text:l.hour==null?"--":Ee(`${o}`),onClick:()=>i("update:viewMode","hour")},null),R("span",{class:pe(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":l.useSeconds}])},[_(":")]),e(N,{active:l.viewMode==="minute",color:l.viewMode==="minute"?l.color:void 0,class:pe({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":l.viewMode==="minute","v-time-picker-controls__time--with-ampm__btn":l.ampm,"v-time-picker-controls__time--with-seconds__btn":l.useSeconds}),disabled:l.disabled,variant:"tonal",text:l.minute==null?"--":Ee(l.minute),onClick:()=>i("update:viewMode","minute")},null),l.useSeconds&&R("span",{class:pe(["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":l.useSeconds}]),key:"secondsDivider"},[_(":")]),l.useSeconds&&e(N,{key:"secondsVal",active:l.viewMode==="second",color:l.viewMode==="second"?l.color:void 0,variant:"tonal",onClick:()=>i("update:viewMode","second"),class:pe({"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":l.viewMode==="second","v-time-picker-controls__time--with-seconds__btn":l.useSeconds}),disabled:l.disabled,text:l.second==null?"--":Ee(l.second)},null),l.ampm&&l.ampmInTitle&&R("div",{class:pe(["v-time-picker-controls__ampm",{"v-time-picker-controls__ampm--readonly":l.ampmReadonly}])},[e(N,{active:l.period==="am",color:l.period==="am"?l.color:void 0,class:pe({"v-time-picker-controls__ampm__am":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":l.period==="am"}),disabled:l.disabled,text:a("$vuetify.timePicker.am"),variant:l.disabled&&l.period==="am"?"elevated":"tonal",onClick:()=>l.period!=="am"?i("update:period","am"):null},null),e(N,{active:l.period==="pm",color:l.period==="pm"?l.color:void 0,class:pe({"v-time-picker-controls__ampm__pm":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":l.period==="pm"}),disabled:l.disabled,text:a("$vuetify.timePicker.pm"),variant:l.disabled&&l.period==="pm"?"elevated":"tonal",onClick:()=>l.period!=="pm"?i("update:period","pm"):null},null)])])])}),{}}}),pn=Ue(24),rl=Ue(12),fn=rl.map(l=>l+12);Ue(60);const yn=Se({allowedHours:[Function,Array],allowedMinutes:[Function,Array],allowedSeconds:[Function,Array],ampmInTitle:Boolean,disabled:Boolean,format:{type:String,default:"ampm"},max:String,min:String,viewMode:{type:String,default:"hour"},modelValue:null,readonly:Boolean,scrollable:Boolean,useSeconds:Boolean,...he(Kt({title:"$vuetify.timePicker.title"}),["landscape"])},"VTimePicker"),_n=Ae()({name:"VTimePicker",props:yn(),emits:{"update:hour":l=>!0,"update:minute":l=>!0,"update:period":l=>!0,"update:second":l=>!0,"update:modelValue":l=>!0,"update:viewMode":l=>!0},setup(l,s){let{emit:i,slots:m}=s;const{t:a}=it(),o=M(null),d=M(null),n=M(null),u=M(null),r=M(null),v=M(null),p=M("am"),c=Fe(l,"viewMode","hour"),S=M(null),g=M(null),$=O(()=>{let I;if(l.allowedHours instanceof Array?I=T=>l.allowedHours.includes(T):I=l.allowedHours,!l.min&&!l.max)return I;const J=l.min?Number(l.min.split(":")[0]):0,oe=l.max?Number(l.max.split(":")[0]):23;return T=>T>=Number(J)&&T<=Number(oe)&&(!I||I(T))}),b=O(()=>{let I;const J=!$.value||o.value===null||$.value(o.value);if(l.allowedMinutes instanceof Array?I=te=>l.allowedMinutes.includes(te):I=l.allowedMinutes,!l.min&&!l.max)return J?I:()=>!1;const[oe,T]=l.min?l.min.split(":").map(Number):[0,0],[U,re]=l.max?l.max.split(":").map(Number):[23,59],C=oe*60+Number(T),X=U*60+Number(re);return te=>{const L=60*o.value+te;return L>=C&&L<=X&&J&&(!I||I(te))}}),k=O(()=>{let I;const oe=(!$.value||o.value===null||$.value(o.value))&&(!b.value||d.value===null||b.value(d.value));if(l.allowedSeconds instanceof Array?I=ie=>l.allowedSeconds.includes(ie):I=l.allowedSeconds,!l.min&&!l.max)return oe?I:()=>!1;const[T,U,re]=l.min?l.min.split(":").map(Number):[0,0,0],[C,X,te]=l.max?l.max.split(":").map(Number):[23,59,59],L=T*3600+U*60+Number(re||0),q=C*3600+X*60+Number(te||0);return ie=>{const fe=3600*o.value+60*d.value+ie;return fe>=L&&fe<=q&&oe&&(!I||I(ie))}}),P=O(()=>l.format==="ampm");Ie(()=>l.modelValue,I=>ve(I)),Le(()=>{ve(l.modelValue)});function w(){return o.value!=null&&d.value!=null&&(!l.useSeconds||n.value!=null)?`${Ee(o.value)}:${Ee(d.value)}`+(l.useSeconds?`:${Ee(n.value)}`:""):null}function Y(){const I=w();I!==null&&i("update:modelValue",I)}function H(I){return I?(I-1)%12+1:12}function D(I,J){return I%12+(J==="pm"?12:0)}function ve(I){if(I==null||I==="")o.value=null,d.value=null,n.value=null;else if(I instanceof Date)o.value=I.getHours(),d.value=I.getMinutes(),n.value=I.getSeconds();else{const[J,,oe,,T,U]=I.trim().toLowerCase().match(/^(\d+):(\d+)(:(\d+))?([ap]m)?$/)||new Array(6);o.value=U?D(parseInt(J,10),U):parseInt(J,10),d.value=parseInt(oe,10),n.value=parseInt(T||0,10)}p.value=o.value==null||o.value<12?"am":"pm"}function j(I,J){const oe=$.value;if(!oe)return J;const T=P.value?J<12?rl:fn:pn;return((T.find(re=>oe((re+J)%T.length+T[0]))||0)+J)%T.length+T[0]}function Z(I){if(p.value=I,o.value!=null){const J=o.value+(p.value==="am"?-12:12);o.value=j("hour",J)}return i("update:period",I),Y(),!0}function V(I){c.value==="hour"?o.value=P.value?D(I,p.value):I:c.value==="minute"?d.value=I:n.value=I}function h(I){switch(c.value||"hour"){case"hour":i("update:hour",I);break;case"minute":i("update:minute",I);break;case"second":i("update:second",I);break}const J=o.value!==null&&d.value!==null&&(l.useSeconds?n.value!==null:!0);c.value==="hour"?c.value="minute":l.useSeconds&&c.value==="minute"&&(c.value="second"),!(o.value===u.value&&d.value===r.value&&(!l.useSeconds||n.value===v.value)||w()===null)&&(u.value=o.value,r.value=d.value,l.useSeconds&&(v.value=n.value),J&&Y())}$e(()=>{const I=lt.filterProps(l),J=Bt.filterProps(l),oe=ht.filterProps(he(l,["format","modelValue","min","max"]));return e(lt,le(I,{color:void 0,class:["v-time-picker",l.class],style:l.style}),{title:()=>{var T;return((T=m.title)==null?void 0:T.call(m))??R("div",{class:"v-time-picker__title"},[a(l.title)])},header:()=>e(Bt,le(J,{ampm:P.value||l.ampmInTitle,ampmReadonly:P.value&&!l.ampmInTitle,hour:o.value,minute:d.value,period:p.value,second:n.value,viewMode:c.value,"onUpdate:period":T=>Z(T),"onUpdate:viewMode":T=>c.value=T,ref:S}),null),default:()=>e(ht,le(oe,{allowedValues:c.value==="hour"?$.value:c.value==="minute"?b.value:k.value,double:c.value==="hour"&&!P.value,format:c.value==="hour"?P.value?H:T=>T:T=>Ee(T,2),max:c.value==="hour"?P.value&&p.value==="am"?11:23:59,min:c.value==="hour"&&P.value&&p.value==="pm"?12:0,size:20,step:c.value==="hour"?1:5,modelValue:c.value==="hour"?o.value:c.value==="minute"?d.value:n.value,onChange:h,onInput:V,ref:g}),null),actions:m.actions})})}}),bn=ee({__name:"TimeField",props:ge({hideDetails:{type:Boolean},readonly:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=l,i=_e(l,"modelValue"),m=O(()=>new Date(i.value).toLocaleTimeString(void 0,{hour:"numeric",minute:"numeric"}));function a(n){const[u,r]=n.split(":"),v=new Date(i.value);v.setHours(Number(u),Number(r)),i.value=v.toISOString()}function o(n){const u=new Date(n),r=new Date(i.value);u.setHours(r.getHours(),r.getMinutes(),r.getSeconds()),i.value=u.toISOString()}const d=M(!1);return(n,u)=>{const r=sl;return f(),A(B,{"no-gutters":""},{default:t(()=>[e(y,null,{default:t(()=>[e(r,{class:"mr-2",label:"Date","model-value":F(Yt)(new Date(i.value)),"onUpdate:modelValue":o,"hide-details":s.hideDetails,readonly:s.readonly},null,8,["model-value","hide-details","readonly"])]),_:1}),e(y,{cols:"auto"},{default:t(()=>u[1]||(u[1]=[R("div",{class:"ma-2"},null,-1)])),_:1,__:[1]}),e(y,null,{default:t(()=>[e(xe,{"close-on-content-click":!1,modelValue:d.value,"onUpdate:modelValue":u[0]||(u[0]=v=>d.value=v)},{activator:t(({props:v})=>[e(me,le({class:"center-text"},v,{variant:"outlined",density:"compact","hide-details":s.hideDetails,label:"Moment","model-value":m.value}),null,16,["hide-details","model-value"])]),default:t(()=>[e(F(_n),{"model-value":new Date(i.value),"onUpdate:modelValue":a,format:"24hr"},null,8,["model-value"])]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),gn=bt(bn,[["__scopeId","data-v-4a17089b"]]),Vn=ee({__name:"ModePaiementField",props:ge({hideDetails:{type:Boolean},readonly:{type:Boolean},rules:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=l,i=_e(l,"modelValue"),m=tt(Bl);return(a,o)=>(f(),A(Oe,{label:"Mode de paiement",variant:"outlined",density:"compact",items:F(m),readonly:s.readonly,"hide-details":s.hideDetails,modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=d=>i.value=d),rules:s.rules},null,8,["items","readonly","hide-details","modelValue","rules"]))}}),kn=ee({__name:"PaiementEditCard",props:{paiement:{}},emits:["update","delete"],setup(l,{emit:s}){const i=l,m=s,a=M(Ce(i.paiement)),o=O(()=>!0),d=M(!1);return(n,u)=>{const r=Vn,v=ze,p=gn;return f(),A(Q,{title:"Modifier le paiement"},{default:t(()=>[e(ae,{modelValue:d.value,"onUpdate:modelValue":u[1]||(u[1]=c=>d.value=c),"max-width":"400px"},{default:t(()=>[e(Q,{title:"Confirmation"},{default:t(()=>[e(W,null,{default:t(()=>u[11]||(u[11]=[_(" Confirmez-vous la suppression de ce paiement ? "),R("br",null,null,-1),R("br",null,null,-1),_(" Attention, cette opération est irréversible. ")])),_:1,__:[11]}),e(se,null,{default:t(()=>[e(ue),e(N,{color:"red",onClick:u[0]||(u[0]=c=>{d.value=!1,m("delete")})},{default:t(()=>u[12]||(u[12]=[_("Supprimer")])),_:1,__:[12]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(W,null,{default:t(()=>[e(B,null,{default:t(()=>[e(y,null,{default:t(()=>[e(me,{density:"compact",variant:"outlined","hide-details":"",label:"Payé par",modelValue:a.value.Payeur,"onUpdate:modelValue":u[2]||(u[2]=c=>a.value.Payeur=c)},null,8,["modelValue"])]),_:1}),e(y,null,{default:t(()=>[e(me,{density:"compact",variant:"outlined","hide-details":"",label:"Description (optionelle)",modelValue:a.value.Label,"onUpdate:modelValue":u[3]||(u[3]=c=>a.value.Label=c)},null,8,["modelValue"])]),_:1})]),_:1}),e(B,null,{default:t(()=>[e(y,null,{default:t(()=>[e(r,{modelValue:a.value.Mode,"onUpdate:modelValue":u[4]||(u[4]=c=>a.value.Mode=c),"hide-details":""},null,8,["modelValue"])]),_:1}),e(y,null,{default:t(()=>[e(v,{label:"Montant",modelValue:a.value.Montant,"onUpdate:modelValue":u[5]||(u[5]=c=>a.value.Montant=c),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(B,null,{default:t(()=>[e(y,null,{default:t(()=>[e(Xe,{"hide-details":"",density:"compact",label:"Remboursement ?",modelValue:a.value.IsRemboursement,"onUpdate:modelValue":u[6]||(u[6]=c=>a.value.IsRemboursement=c)},null,8,["modelValue"])]),_:1})]),_:1}),e(B,null,{default:t(()=>[e(y,null,{default:t(()=>[e(p,{modelValue:a.value.Time,"onUpdate:modelValue":u[7]||(u[7]=c=>a.value.Time=c),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(B,null,{default:t(()=>[e(y,null,{default:t(()=>[e(me,{density:"compact",variant:"outlined",label:"Détails (optionnel)",modelValue:a.value.Details,"onUpdate:modelValue":u[8]||(u[8]=c=>a.value.Details=c)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(N,{color:"red",onClick:u[9]||(u[9]=c=>d.value=!0)},{default:t(()=>u[13]||(u[13]=[_("Supprimer le paiement")])),_:1,__:[13]}),e(ue),e(N,{onClick:u[10]||(u[10]=c=>m("update",a.value)),disabled:!o.value},{default:t(()=>u[14]||(u[14]=[_("Enregistrer")])),_:1,__:[14]},8,["disabled"])]),_:1})]),_:1})}}}),Cn=ee({__name:"DossierEditCard",props:{responsable:{},dossier:{}},emits:["save"],setup(l,{emit:s}){const i=l,m=s,a=M(Ce(i.dossier));return(o,d)=>{const n=st,u=wa,r=gt;return f(),A(Q,null,{default:t(()=>[e(W,null,{default:t(()=>[e(B,null,{default:t(()=>[e(y,null,{default:t(()=>[e(n,{label:"Responsable","initial-personne":i.responsable,"model-value":a.value.IdResponsable,"onUpdate:modelValue":d[0]||(d[0]=v=>v?a.value.IdResponsable=v:void 0),api:{SelectPersonne:F(x).SelectPersonne.bind(F(x))}},null,8,["initial-personne","model-value","api"])]),_:1})]),_:1}),e(B,null,{default:t(()=>[e(y,null,{default:t(()=>[e(u,{label:"Adresses mail en copie",modelValue:a.value.CopiesMails,"onUpdate:modelValue":d[1]||(d[1]=v=>a.value.CopiesMails=v),rule:F(ql).validMails()},null,8,["modelValue","rule"])]),_:1})]),_:1}),e(B,null,{default:t(()=>[e(y,null,{default:t(()=>[e(r,{"hide-details":"",modelValue:a.value.PartageAdressesOK,"onUpdate:modelValue":d[2]||(d[2]=v=>a.value.PartageAdressesOK=v),label:"Partage des coordonnées"},null,8,["modelValue"])]),_:1})]),_:1}),e(B,null,{default:t(()=>[e(y,null,{default:t(()=>[e(r,{"hide-details":"",modelValue:a.value.DemandeFondSoutien,"onUpdate:modelValue":d[3]||(d[3]=v=>a.value.DemandeFondSoutien=v),label:"Demande le fond de soutien"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ue),e(N,{onClick:d[4]||(d[4]=v=>m("save",a.value))},{default:t(()=>d[5]||(d[5]=[_("Enregistrer")])),_:1,__:[5]})]),_:1})]),_:1})}}}),xn=ee({__name:"OptionJournee",props:ge({camp:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=l,i=_e(l,"modelValue"),m=O(()=>(s.camp.OptionPrix.Jours||[]).map((a,o)=>o));return(a,o)=>(f(),A(Q,null,{default:t(()=>[e(W,null,{default:t(()=>{var d;return[o[1]||(o[1]=R("div",{class:"text-grey mb-2"}," Le prix est variable en fonction des jours de participation au camp. ",-1)),e(jl,{class:"overflow-x-auto",color:"secondary",multiple:"","model-value":(d=i.value)!=null&&d.length?i.value:m.value,"onUpdate:modelValue":o[0]||(o[0]=n=>i.value=n.length==m.value.length?[]:n)},{default:t(()=>[(f(!0),z(ne,null,ce(s.camp.OptionPrix.Jours,(n,u)=>(f(),A(N,null,{default:t(()=>[_("J "+E(u+1),1)]),_:2},1024))),256))]),_:1},8,["model-value"])]}),_:1,__:[1]})]),_:1}))}}),Pn=ee({__name:"OptionStatut",props:ge({camp:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const s=l,i=_e(l,"modelValue"),m=O(()=>(s.camp.OptionPrix.Statuts||[]).map(o=>({value:o.Id,title:o.Label,subtitle:o.Description}))),a=O(()=>m.value.map(o=>o.value).includes(i.value));return(o,d)=>(f(),A(Q,null,{default:t(()=>[e(W,null,{default:t(()=>[d[1]||(d[1]=R("div",{class:"text-grey mb-4"},"Le prix dépend du statut du participant.",-1)),e(Oe,{clearable:"",items:m.value,label:"Statut","model-value":a.value?i.value:null,"onUpdate:modelValue":d[0]||(d[0]=n=>i.value=n??0),variant:"outlined",density:"comfortable","hide-details":""},{item:t(({item:n,props:u})=>[e(K,le(u,{title:n.title,subtitle:n.raw.subtitle}),null,16,["title","subtitle"])]),_:1},8,["items","model-value"])]),_:1,__:[1]})]),_:1}))}}),wn={key:2},Dn=ee({__name:"ParticipantOptionPrix",props:{camp:{},optionAndQf:{}},emits:["update"],setup(l,{emit:s}){const i=l,m=s,a=M(Ce(i.optionAndQf));return Ie(()=>i.optionAndQf,()=>a.value=Ce(i.optionAndQf)),(o,d)=>{const n=je;return f(),A(Q,{title:"Prix variable",width:"800px"},{default:t(()=>[e(W,null,{default:t(()=>[e(B,{justify:"space-evenly"},{default:t(()=>[e(y,{"align-self":"center",cols:"3"},{default:t(()=>[e(n,{modelValue:a.value.quotientFamilial,"onUpdate:modelValue":d[0]||(d[0]=u=>a.value.quotientFamilial=u),label:"Quotient familial","hide-details":""},null,8,["modelValue"])]),_:1}),e(de,{thickness:"2",vertical:""}),e(y,{"align-self":"center",cols:"8"},{default:t(()=>[i.camp.OptionPrix.Active==F(ke).PrixJour?(f(),A(xn,{key:0,camp:i.camp,modelValue:a.value.options.Jour,"onUpdate:modelValue":d[1]||(d[1]=u=>a.value.options.Jour=u)},null,8,["camp","modelValue"])):i.camp.OptionPrix.Active==F(ke).PrixStatut?(f(),A(Pn,{key:1,camp:i.camp,modelValue:a.value.options.IdStatut,"onUpdate:modelValue":d[2]||(d[2]=u=>a.value.options.IdStatut=u)},null,8,["camp","modelValue"])):(f(),z("div",wn,"Le camp ne propose pas d'option sur le prix."))]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ue),e(N,{onClick:d[3]||(d[3]=u=>m("update",a.value))},{default:t(()=>d[4]||(d[4]=[_("Enregistrer")])),_:1,__:[4]})]),_:1})]),_:1})}}}),Sn={key:1,class:"mx-1"},In={key:2,class:"mx-1"},Mn={key:3},An={key:4,class:"mx-1"},$n=ee({__name:"RemisesChip",props:{remises:{}},emits:["update"],setup(l,{emit:s}){const i=l,m=s,a=O(()=>o.value.ReducEnfants!=0||o.value.ReducEquipiers!=0||o.value.ReducSpeciale.Cent!=0),o=M(Ce(i.remises));Ie(()=>i.remises,()=>o.value=Ce(i.remises));const d=M(!1);return(n,u)=>{const r=je,v=ze;return f(),A(xe,{"close-on-content-click":!1,location:"bottom",modelValue:d.value,"onUpdate:modelValue":u[4]||(u[4]=p=>d.value=p)},{activator:t(({props:p})=>[e(Q,le(p,{elevation:"1",color:"grey-lighten-2"}),{default:t(()=>[e(W,{class:"py-1 px-1"},{default:t(()=>[a.value?G("",!0):(f(),z(ne,{key:0},[_(" Pas de remises ")],64)),o.value.ReducEnfants?(f(),z("span",Sn," Enfants : "+E(o.value.ReducEnfants)+"% ",1)):G("",!0),o.value.ReducEquipiers?(f(),z("span",In," Equipiers : "+E(o.value.ReducEquipiers)+"% ",1)):G("",!0),(o.value.ReducEnfants||o.value.ReducEquipiers)&&o.value.ReducSpeciale.Cent?(f(),z("br",Mn)):G("",!0),o.value.ReducSpeciale.Cent?(f(),z("span",An," Remise : "+E(F(we).montant(o.value.ReducSpeciale)),1)):G("",!0)]),_:1})]),_:2},1040)]),default:t(()=>[e(Q,{title:"Modifier les remises",width:"400px"},{default:t(()=>[e(W,null,{default:t(()=>[e(B,null,{default:t(()=>[e(y,null,{default:t(()=>[e(r,{modelValue:o.value.ReducEnfants,"onUpdate:modelValue":u[0]||(u[0]=p=>o.value.ReducEnfants=p),label:"Remise enfants","hide-details":"",suffix:"%"},null,8,["modelValue"])]),_:1}),e(y,null,{default:t(()=>[e(r,{modelValue:o.value.ReducEquipiers,"onUpdate:modelValue":u[1]||(u[1]=p=>o.value.ReducEquipiers=p),label:"Remise équipiers","hide-details":"",suffix:"%"},null,8,["modelValue"])]),_:1})]),_:1}),e(B,null,{default:t(()=>[e(y,null,{default:t(()=>[e(v,{class:"mt-2",modelValue:o.value.ReducSpeciale,"onUpdate:modelValue":u[2]||(u[2]=p=>o.value.ReducSpeciale=p),label:"Remise spéciale","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ue),e(N,{onClick:u[3]||(u[3]=p=>{m("update",o.value),d.value=!1})},{default:t(()=>u[5]||(u[5]=[_("Enregistrer")])),_:1,__:[5]})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Un=bt($n,[["__scopeId","data-v-01096379"]]),Fn=ee({__name:"AideEditCard",props:{aide:{},file:{},structures:{},participant:{}},emits:["save","deleteFile","uploadFile","showStructureaides"],setup(l,{emit:s}){const i=l,m=s,a=M(Ce(i.aide)),o=O(()=>Object.values(i.structures).map(d=>({value:d.Id,title:d.Nom})));return(d,n)=>{const u=gt,r=ze,v=je,p=Ia;return f(),A(Q,{title:"Modifier l'aide extérieure",subtitle:`pour ${F(Re).label(i.participant.Personne)} - ${F(ye).label(i.participant.Camp)}`},{append:t(()=>[e(N,{onClick:n[0]||(n[0]=c=>m("showStructureaides"))},{default:t(()=>[e(be,null,{default:t(()=>n[9]||(n[9]=[_("mdi-view-list")])),_:1,__:[9]}),n[10]||(n[10]=_(" Structures"))]),_:1,__:[10]})]),default:t(()=>[e(W,null,{default:t(()=>[e(B,null,{default:t(()=>[e(y,null,{default:t(()=>[e(Oe,{variant:"outlined",density:"comfortable",label:"Structure",items:o.value,modelValue:a.value.IdStructureaide,"onUpdate:modelValue":n[1]||(n[1]=c=>a.value.IdStructureaide=c)},null,8,["items","modelValue"])]),_:1}),e(y,null,{default:t(()=>[e(u,{modelValue:a.value.Valide,"onUpdate:modelValue":n[2]||(n[2]=c=>a.value.Valide=c),label:"Aide validée","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(B,null,{default:t(()=>[e(y,{"align-self":"center"},{default:t(()=>[e(r,{modelValue:a.value.Valeur,"onUpdate:modelValue":n[3]||(n[3]=c=>a.value.Valeur=c),label:"Montant","hide-details":""},null,8,["modelValue"])]),_:1}),e(y,{"align-self":"center",cols:"auto"},{default:t(()=>[e(u,{"hide-details":"",label:"Par jour",modelValue:a.value.ParJour,"onUpdate:modelValue":n[4]||(n[4]=c=>a.value.ParJour=c)},null,8,["modelValue"])]),_:1}),e(y,{"align-self":"center"},{default:t(()=>[e(v,{label:"Limite",suffix:"jours",modelValue:a.value.NbJoursMax,"onUpdate:modelValue":n[5]||(n[5]=c=>a.value.NbJoursMax=c),disabled:!a.value.ParJour,hint:"0 pour ne pas limiter",min:0,"persistent-hint":""},null,8,["modelValue","disabled"])]),_:1})]),_:1}),e(p,{class:"mt-4",files:i.file?[i.file]:[],title:"Document justificatif","max-docs":1,"in-upload":!1,onDelete:n[6]||(n[6]=c=>m("deleteFile")),onUpload:n[7]||(n[7]=c=>m("uploadFile",c))},null,8,["files"])]),_:1}),e(se,null,{default:t(()=>[e(ue),e(N,{onClick:n[8]||(n[8]=c=>m("save",a.value))},{default:t(()=>n[11]||(n[11]=[_("Enregistrer")])),_:1,__:[11]})]),_:1})]),_:1},8,["subtitle"])}}}),Rn=ee({__name:"StructuresPannel",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(l){const s=_e(l,"modelValue"),i=O(()=>Object.values(s.value||{}).sort((u,r)=>u.Nom.localeCompare(r.Nom)));async function m(){const u=await x.StructureaideCreate();if(u===void 0)return;x.showMessage("Structure créée avec succès.");const r=s.value||{};r[u.Id]=u,s.value=r,a.value=u}const a=M(null);async function o(){const u=a.value;if(u==null||(a.value=null,await x.StructureaideUpdate(u)===void 0))return;x.showMessage("Structure modifiée avec succès.");const v=s.value||{};v[u.Id]=u,s.value=v}const d=M(null);async function n(){const u=d.value;if(u==null||(d.value=null,await x.StructureaideDelete({id:u.Id})===void 0))return;const v=s.value||{};delete v[u.Id],s.value=v,x.showMessage("Structure supprimée avec succès.")}return(u,r)=>(f(),A(Q,{title:"Structures d'aide",subtitle:"Organismes pouvant distribuer une aide extérieure"},{append:t(()=>[e(N,{onClick:m},{prepend:t(()=>[e(be,{color:"green"},{default:t(()=>r[5]||(r[5]=[_("mdi-plus")])),_:1,__:[5]})]),default:t(()=>[r[6]||(r[6]=_(" Ajouter une structure "))]),_:1,__:[6]})]),default:t(()=>[e(W,{class:"overflow-y-auto"},{default:t(()=>[(f(!0),z(ne,null,ce(i.value,v=>(f(),A(B,null,{default:t(()=>[e(y,{"align-self":"center"},{default:t(()=>[e(el,null,{default:t(()=>[_(E(v.Nom),1)]),_:2},1024),e(tl,null,{default:t(()=>[_(E(v.Immatriculation),1)]),_:2},1024)]),_:2},1024),e(y,{"align-self":"center",style:{"font-size":"smaller"}},{default:t(()=>[(f(!0),z(ne,null,ce(v.Info.split(`
`),p=>(f(),z("div",null,E(p),1))),256))]),_:2},1024),e(y,{"align-self":"center",cols:"auto"},{default:t(()=>[e(xe,null,{activator:t(({props:p})=>[e(N,le({icon:"mdi-dots-vertical"},{ref_for:!0},p,{size:"x-small"}),null,16)]),default:t(()=>[e(Pe,null,{default:t(()=>[e(K,{title:"Modifier","prepend-icon":"mdi-pencil",onClick:p=>a.value=F(Ce)(v)},null,8,["onClick"]),e(K,{title:"Supprimer","prepend-icon":"mdi-delete",onClick:p=>d.value=v},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),_:1}),e(ae,{"model-value":a.value!=null,"onUpdate:modelValue":r[3]||(r[3]=v=>a.value=null),"max-width":"600px"},{default:t(()=>[a.value!=null?(f(),A(Q,{key:0,title:"Modifier la structure"},{default:t(()=>[e(W,null,{default:t(()=>[e(B,null,{default:t(()=>[e(y,null,{default:t(()=>[e(me,{variant:"outlined",density:"compact",label:"Nom",modelValue:a.value.Nom,"onUpdate:modelValue":r[0]||(r[0]=v=>a.value.Nom=v),"hide-details":""},null,8,["modelValue"])]),_:1}),e(y,null,{default:t(()=>[e(me,{variant:"outlined",density:"compact",label:"Immatriculation",modelValue:a.value.Immatriculation,"onUpdate:modelValue":r[1]||(r[1]=v=>a.value.Immatriculation=v),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(B,null,{default:t(()=>[e(y,null,{default:t(()=>[e(at,{variant:"outlined",density:"compact",label:"Informations",modelValue:a.value.Info,"onUpdate:modelValue":r[2]||(r[2]=v=>a.value.Info=v),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ue),e(N,{onClick:o},{default:t(()=>r[7]||(r[7]=[_("Enregistrer")])),_:1,__:[7]})]),_:1})]),_:1})):G("",!0)]),_:1},8,["model-value"]),e(ae,{"model-value":d.value!=null,"onUpdate:modelValue":r[4]||(r[4]=v=>d.value=null),"max-width":"450px"},{default:t(()=>[d.value!=null?(f(),A(Q,{key:0,title:"Confirmation"},{default:t(()=>[e(W,null,{default:t(()=>[_(" Confirmez-vous la suppression de la structure "+E(d.value.Nom)+" ? ",1),r[8]||(r[8]=R("br",null,null,-1)),r[9]||(r[9]=R("br",null,null,-1)),r[10]||(r[10]=_(" Attention, cette opération est irréversible. "))]),_:1,__:[8,9,10]}),e(se,null,{default:t(()=>[e(ue),e(N,{color:"red",onClick:n},{default:t(()=>r[11]||(r[11]=[_("Supprimer")])),_:1,__:[11]})]),_:1})]),_:1})):G("",!0)]),_:1},8,["model-value"])]),_:1}))}}),Ln={key:0},Tn={key:1},Nn=ee({__name:"DossierParticipantRow",props:ge({participant:{},aides:{},aidesFiles:{},hasManyParticipants:{type:Boolean}},{structures:{required:!0},structuresModifiers:{}}),emits:ge(["update","delete","createAide","updateAide","deleteAide","deleteFileAide","uploadFileAide","expand"],["update:structures"]),setup(l,{emit:s}){const i=l,m=_e(l,"structures"),a=s,o=O(()=>{const $=Object.values(i.aides||{});return $.sort((b,k)=>b.Id-k.Id),$}),d=O(()=>i.participant.Camp.OptionPrix.Active==ke.NoOption&&!ye.isQuotientFamilialActive(i.participant.Camp.OptionQuotientFamilial));function n($){var b,k;switch(i.participant.Camp.OptionPrix.Active){case ke.NoOption:return"Séjour sans option";case ke.PrixJour:const P=((b=$.Jour)==null?void 0:b.length)||0;return P==0?"Présent tous les jours":`Présent ${P} jour${P>1?"s":""}`;case ke.PrixStatut:const w=(k=i.participant.Camp.OptionPrix.Statuts)==null?void 0:k.find(Y=>Y.Id==$.IdStatut);return w?`Statut ${w.Label}`:"Pas d'option."}}const u=M(!1),r=M(!1),v=O(()=>Object.values(m.value).map($=>({value:$.Id,title:$.Nom})).sort(($,b)=>$.title.localeCompare(b.title))),p=M(null),c=M(null),S=M(null),g=M(!1);return($,b)=>(f(),A(B,null,{default:t(()=>[e(y,{"align-self":"center",cols:"3"},{default:t(()=>[e(el,null,{default:t(()=>[R("a",{href:"/camps",onClick:b[0]||(b[0]=Je(k=>F(Vt)(i.participant.Participant),["prevent"]))},E(F(Re).label(i.participant.Personne)),1)]),_:1}),e(tl,null,{default:t(()=>[_(E(F(ye).label(i.participant.Camp)),1)]),_:1})]),_:1}),e(y,{"align-self":"center",cols:"2",class:"text-center"},{default:t(()=>[e(xe,{disabled:d.value,"close-on-content-click":!1,modelValue:u.value,"onUpdate:modelValue":b[2]||(b[2]=k=>u.value=k)},{activator:t(({props:k})=>[e(Q,le(k,{elevation:d.value?0:1,color:"grey-lighten-2"}),{default:t(()=>[e(W,{class:"py-1 px-1"},{default:t(()=>[d.value?(f(),z("div",Ln,"Camp sans option")):(f(),z("div",Tn,[_(E(i.participant.Participant.QuotientFamilial?`QF ${i.participant.Participant.QuotientFamilial}.`:"Pas de QF.")+" ",1),b[22]||(b[22]=R("br",null,null,-1)),_(" "+E(n(i.participant.Participant.OptionPrix)),1)]))]),_:1})]),_:2},1040,["elevation"])]),default:t(()=>[e(Dn,{camp:i.participant.Camp,"option-and-qf":{options:i.participant.Participant.OptionPrix,quotientFamilial:i.participant.Participant.QuotientFamilial},onUpdate:b[1]||(b[1]=k=>{i.participant.Participant.OptionPrix=k.options,i.participant.Participant.QuotientFamilial=k.quotientFamilial,u.value=!1,a("update",i.participant.Participant)})},null,8,["camp","option-and-qf"])]),_:1},8,["disabled","modelValue"])]),_:1}),e(y,{"align-self":"center",class:"text-center"},{default:t(()=>[o.value.length?G("",!0):(f(),A(De,{key:0,label:""},{default:t(()=>b[23]||(b[23]=[_("Aucune aide")])),_:1,__:[23]})),(f(!0),z(ne,null,ce(o.value,k=>(f(),A(De,{class:"my-1","prepend-icon":"mdi-cash-plus",color:k.Valide?"green":"orange",onClick:P=>c.value=k},{close:t(()=>[e(be,{icon:"mdi-close-circle",onClick:Je(P=>S.value=k,["stop"])},null,8,["onClick"])]),default:t(()=>[_(" "+E(m.value[k.IdStructureaide].Nom)+" : "+E(F(we).montant(k.Valeur)),1)]),_:2},1032,["color","onClick"]))),256))]),_:1}),e(y,{"align-self":"center",class:"text-center",cols:"3"},{default:t(()=>[e(Un,{remises:i.participant.Participant.Remises,onUpdate:b[3]||(b[3]=k=>{i.participant.Participant.Remises=k,a("update",i.participant.Participant)})},null,8,["remises"])]),_:1}),e(y,{"align-self":"center",cols:"auto"},{default:t(()=>[e(xe,{location:"left"},{activator:t(({props:k})=>[e(N,le(k,{icon:"mdi-dots-vertical",size:"small"}),null,16)]),default:t(()=>[e(Pe,{density:"comfortable"},{default:t(()=>[e(K,{title:"Ajouter une aide","prepend-icon":"mdi-cash-plus",onClick:b[4]||(b[4]=k=>p.value={IdParticipant:i.participant.Participant.Id,IdStructure:0})}),e(de),i.hasManyParticipants?(f(),A(K,{key:0,"prepend-icon":"mdi-arrow-expand",title:"Étendre les options et remises",subtitle:"... au reste du dossier",onClick:b[5]||(b[5]=k=>a("expand"))})):G("",!0),e(de),e(K,{title:"Supprimer","prepend-icon":"mdi-delete",onClick:b[6]||(b[6]=k=>r.value=!0)})]),_:1})]),_:1})]),_:1}),e(ae,{modelValue:r.value,"onUpdate:modelValue":b[8]||(b[8]=k=>r.value=k),"max-width":"600px"},{default:t(()=>[e(Q,{title:"Supprimer le participant"},{default:t(()=>[e(W,null,{default:t(()=>b[24]||(b[24]=[_(" Confirmez-vous la suppression de ce participant ? "),R("br",null,null,-1),_(" Attention, cette opération est irréversible. ")])),_:1,__:[24]}),e(se,null,{default:t(()=>[e(ue),e(N,{color:"red",onClick:b[7]||(b[7]=k=>{a("delete"),r.value=!1})},{default:t(()=>b[25]||(b[25]=[_("Supprimer")])),_:1,__:[25]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ae,{modelValue:g.value,"onUpdate:modelValue":b[10]||(b[10]=k=>g.value=k),"max-width":"650px"},{default:t(()=>[e(Rn,{modelValue:m.value,"onUpdate:modelValue":b[9]||(b[9]=k=>m.value=k)},null,8,["modelValue"])]),_:1},8,["modelValue"]),p.value!=null?(f(),A(ae,{key:0,"model-value":p.value!=null,"onUpdate:modelValue":b[14]||(b[14]=k=>p.value=null),width:"600px"},{default:t(()=>[e(Q,{title:"Ajouter une aide extérieure"},{append:t(()=>[e(N,{onClick:b[11]||(b[11]=k=>g.value=!0)},{default:t(()=>[e(be,null,{default:t(()=>b[26]||(b[26]=[_("mdi-view-list")])),_:1,__:[26]}),b[27]||(b[27]=_(" Structures"))]),_:1,__:[27]})]),default:t(()=>[e(W,null,{default:t(()=>[e(Oe,{variant:"outlined",density:"comfortable",label:"Structure",items:v.value,"model-value":p.value.IdStructure==0?null:p.value.IdStructure,"onUpdate:modelValue":b[12]||(b[12]=k=>p.value.IdStructure=k)},null,8,["items","model-value"])]),_:1}),e(se,null,{default:t(()=>[e(ue),e(N,{color:"green",onClick:b[13]||(b[13]=k=>{a("createAide",p.value),p.value=null}),disabled:p.value.IdStructure==0},{default:t(()=>b[28]||(b[28]=[_("Créer")])),_:1,__:[28]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])):G("",!0),c.value!=null?(f(),A(ae,{key:1,"model-value":c.value!=null,"onUpdate:modelValue":b[19]||(b[19]=k=>c.value=null),"max-width":"800px"},{default:t(()=>[e(Fn,{aide:c.value,file:$.aidesFiles[c.value.Id],structures:m.value,participant:i.participant,onShowStructureaides:b[15]||(b[15]=k=>g.value=!0),onSave:b[16]||(b[16]=k=>{a("updateAide",k),c.value=null}),onDeleteFile:b[17]||(b[17]=k=>a("deleteFileAide",c.value.Id)),onUploadFile:b[18]||(b[18]=k=>a("uploadFileAide",k,c.value.Id))},null,8,["aide","file","structures","participant"])]),_:1},8,["model-value"])):G("",!0),S.value!=null?(f(),A(ae,{key:2,"model-value":S.value!=null,"onUpdate:modelValue":b[21]||(b[21]=k=>S.value=null),"max-width":"600px"},{default:t(()=>[e(Q,{title:"Supprimer l'aide"},{default:t(()=>[e(W,null,{default:t(()=>b[29]||(b[29]=[_(" Confirmez-vous la suppression de l'aide extérieure ? "),R("br",null,null,-1),_(" Attention, cette opération est irréversible. ")])),_:1,__:[29]}),e(se,null,{default:t(()=>[e(ue),e(N,{color:"red",onClick:b[20]||(b[20]=k=>{a("deleteAide",S.value.Id),S.value=null})},{default:t(()=>b[30]||(b[30]=[_("Supprimer")])),_:1,__:[30]})]),_:1})]),_:1})]),_:1},8,["model-value"])):G("",!0)]),_:1}))}}),On=ee({__name:"DossierEditor",props:{dossier:{},camps:{}},emits:["updateDossier","createParticipant","updateParticipant","deleteParticipant","expandParticipant","createAide","updateAide","deleteAide","deleteFileAide","uploadFileAide"],setup(l,{emit:s}){const i=l,m=s,a=M(null);Le(n);const o=M(!0),d=M({});async function n(){const u=await x.StructureaidesGet();u!==void 0&&(o.value=!1,d.value=u||{})}return(u,r)=>(f(),A(Q,{title:"Modifier le dossier"},{append:t(()=>[e(N,{onClick:r[0]||(r[0]=v=>a.value={IdCamp:0,IdPersonne:0,IdDossier:i.dossier.Dossier.Dossier.Id})},{prepend:t(()=>[e(be,{color:"green"},{default:t(()=>r[9]||(r[9]=[_("mdi-plus")])),_:1,__:[9]})]),default:t(()=>[r[10]||(r[10]=_(" Ajouter un participant"))]),_:1,__:[10]})]),default:t(()=>[e(W,null,{default:t(()=>[e(B,null,{default:t(()=>[e(y,{cols:"3"},{default:t(()=>[e(Cn,{responsable:i.dossier.Dossier.Responsable,dossier:i.dossier.Dossier.Dossier,onSave:r[1]||(r[1]=v=>m("updateDossier",v))},null,8,["responsable","dossier"])]),_:1}),e(de,{thickness:"4",vertical:""}),o.value?G("",!0):(f(),A(y,{key:0},{default:t(()=>[r[11]||(r[11]=R("div",{class:"my-1"},null,-1)),(f(!0),z(ne,null,ce(i.dossier.Dossier.Participants,v=>{var p;return f(),A(Nn,{participant:v,aides:(i.dossier.Dossier.Aides||{})[v.Participant.Id],"aides-files":i.dossier.Dossier.AidesFiles||{},"has-many-participants":(((p=i.dossier.Dossier.Participants)==null?void 0:p.length)||0)>1,structures:d.value,"onUpdate:structures":r[2]||(r[2]=c=>d.value=c),onCreateAide:r[3]||(r[3]=c=>m("createAide",c)),onDeleteAide:r[4]||(r[4]=c=>m("deleteAide",c)),onUpdateAide:r[5]||(r[5]=c=>m("updateAide",c)),onDeleteFileAide:r[6]||(r[6]=c=>m("deleteFileAide",c)),onUploadFileAide:r[7]||(r[7]=(c,S)=>m("uploadFileAide",c,S)),onUpdate:r[8]||(r[8]=c=>m("updateParticipant",c)),onDelete:c=>m("deleteParticipant",v.Participant.Id),onExpand:c=>m("expandParticipant",v.Participant)},null,8,["participant","aides","aides-files","has-many-participants","structures","onDelete","onExpand"])}),256))]),_:1,__:[11]}))]),_:1})]),_:1})]),_:1}))}}),En={class:"mr-1"},hn=["onClick"],Bn={class:"overflow-y-auto",style:{"max-height":"65vh"}},qn=["href"],jn=ee({__name:"DossierDetailsPannel",props:{dossier:{},camps:{}},emits:["updateDossier","deleteDossier","mergeDossier","createParticipant","updateParticipant","deleteParticipant","expandParticipant","createAide","updateAide","deleteAide","deleteFileAide","uploadFileAide","createPaiement","updatePaiement","deletePaiement","sendMessage","deleteMessage","sendFacture"],setup(l,{expose:s,emit:i}){const m=l,a=i;s({showEditPaiement:c,showEditDossier:r});function o(H){switch(H){case dt.NonCommence:return"red";case dt.EnCours:return"orange";case dt.Complet:return"green"}}const d=O(()=>zl(m.dossier.Dossier,"backoffice")),n=M(!1),u=M(!1);function r(){u.value=!0}const v=M(null),p=M(null);function c(H){p.value=H}const S="Repère",g=M(!1);async function $(){await mt(m.dossier.EspacepersoURL),x.showMessage("Lien vers l'espace personnel copié.")}async function b(){await mt(m.dossier.VirementCode),x.showMessage("Identifiant de virement copié.")}async function k(H){await mt(H),x.showMessage("IBAN copié.")}const P=M(!1),w=M(!1),Y=M("");return(H,D)=>{const ve=Pa,j=ot,Z=st;return f(),A(Q,{title:`Dossier de ${m.dossier.Dossier.Responsable}`,class:"ml-2"},{subtitle:t(()=>[(f(!0),z(ne,null,ce(m.dossier.Dossier.Participants,V=>(f(),z("span",En,[R("a",{href:"/camps",onClick:Je(h=>F(Vt)(V.Participant),["prevent"])},E(F(Re).label(V.Personne)),9,hn)]))),256))]),append:t(()=>[e(N,{icon:"mdi-pencil",onClick:D[0]||(D[0]=V=>u.value=!0),class:"mx-1"}),e(xe,null,{activator:t(({props:V})=>[e(N,le(V,{icon:"mdi-dots-vertical",size:"small",class:"mx-1"}),null,16)]),default:t(()=>[e(Pe,{density:"compact"},{default:t(()=>[e(K,{"prepend-icon":"mdi-email",onClick:D[1]||(D[1]=V=>w.value=!0),title:"Envoyer un message",subtitle:"Notification par email"}),e(K,{"prepend-icon":"mdi-invoice-send",onClick:D[2]||(D[2]=V=>a("sendFacture")),title:"Envoyer une demande de règlement",subtitle:"Notification par email"}),e(de),e(K,{"prepend-icon":"mdi-cash-plus",onClick:D[3]||(D[3]=V=>a("createPaiement")),title:"Ajouter un paiement"}),e(de),e(K,{"prepend-icon":"mdi-link",onClick:D[4]||(D[4]=V=>g.value=!0),title:"Afficher les identifiants"}),e(de),e(K,{"prepend-icon":"mdi-file-move",onClick:D[5]||(D[5]=V=>P.value=!0),title:"Fusionner vers ..."}),e(de),e(K,{onClick:D[6]||(D[6]=V=>n.value=!0),title:"Supprimer"},{prepend:t(()=>[e(be,{color:"red"},{default:t(()=>D[35]||(D[35]=[_("mdi-delete")])),_:1,__:[35]})]),_:1})]),_:1})]),_:1})]),default:t(()=>[e(W,null,{default:t(()=>[e(B,null,{default:t(()=>[e(y,{class:"ml-2 mb-1 text-center"},{default:t(()=>[e(xe,null,{activator:t(({props:V})=>[e(De,le(V,{"prepend-icon":"mdi-currency-eur",color:o(m.dossier.Dossier.Bilan.Statut)}),{default:t(()=>[_(E(m.dossier.Dossier.Bilan.Recu)+" payé sur "+E(m.dossier.Dossier.Bilan.Demande),1)]),_:2},1040,["color"])]),default:t(()=>[e(mn,{dossier:m.dossier.Dossier},null,8,["dossier"])]),_:1})]),_:1})]),_:1}),R("div",Bn,[e(xa,{side:"end",class:"mt-4",density:"compact"},{default:t(()=>[(f(!0),z(ne,null,ce(d.value,(V,h)=>(f(),A(ve,{event:V,key:h,onEditPaiement:D[7]||(D[7]=I=>p.value=I),onDeleteMessage:D[8]||(D[8]=I=>a("deleteMessage",I))},null,8,["event"]))),128))]),_:1})])]),_:1}),e(ae,{modelValue:n.value,"onUpdate:modelValue":D[10]||(D[10]=V=>n.value=V),"max-width":"600px"},{default:t(()=>[e(Q,{title:"Supprimer le dossier"},{default:t(()=>[e(W,null,{default:t(()=>D[36]||(D[36]=[_(" Confirmez-vous la suppression du dossier et de ses participants ? "),R("br",null,null,-1),R("br",null,null,-1),_(" Attention, cette opération est irréversible. ")])),_:1,__:[36]}),e(se,null,{default:t(()=>[e(ue),e(N,{color:"red",onClick:D[9]||(D[9]=V=>{a("deleteDossier"),n.value=!1})},{default:t(()=>D[37]||(D[37]=[_("Supprimer")])),_:1,__:[37]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),v.value!=null?(f(),A(ae,{key:0,"model-value":v.value!=null,"onUpdate:modelValue":D[14]||(D[14]=V=>v.value=null),"max-width":"600px"},{default:t(()=>[e(Q,{title:"Ajouter un participant"},{default:t(()=>[e(W,null,{default:t(()=>[e(B,null,{default:t(()=>[e(y,{cols:"12"},{default:t(()=>[e(j,{label:"Camp",camps:m.camps,modelValue:v.value.IdCamp,"onUpdate:modelValue":D[11]||(D[11]=V=>v.value.IdCamp=V)},null,8,["camps","modelValue"])]),_:1}),e(y,{cols:"12"},{default:t(()=>[e(Z,{label:"Personne","initial-personne":"",modelValue:v.value.IdPersonne,"onUpdate:modelValue":D[12]||(D[12]=V=>v.value.IdPersonne=V),api:{SelectPersonne:F(x).SelectPersonne.bind(F(x))}},null,8,["modelValue","api"])]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ue),e(N,{color:"green",disabled:v.value.IdPersonne==0||v.value.IdCamp==0,onClick:D[13]||(D[13]=V=>{a("createParticipant",v.value),v.value=null})},{default:t(()=>D[38]||(D[38]=[_("Ajouter")])),_:1,__:[38]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])):G("",!0),e(ae,{modelValue:u.value,"onUpdate:modelValue":D[25]||(D[25]=V=>u.value=V)},{default:t(()=>[e(On,{dossier:m.dossier,camps:m.camps,onUpdateDossier:D[15]||(D[15]=V=>a("updateDossier",V)),onCreateParticipant:D[16]||(D[16]=V=>a("createParticipant",V)),onUpdateParticipant:D[17]||(D[17]=V=>a("updateParticipant",V)),onDeleteParticipant:D[18]||(D[18]=V=>a("deleteParticipant",V)),onExpandParticipant:D[19]||(D[19]=V=>a("expandParticipant",V)),onCreateAide:D[20]||(D[20]=V=>a("createAide",V)),onUpdateAide:D[21]||(D[21]=V=>a("updateAide",V)),onDeleteAide:D[22]||(D[22]=V=>a("deleteAide",V)),onDeleteFileAide:D[23]||(D[23]=V=>a("deleteFileAide",V)),onUploadFileAide:D[24]||(D[24]=(V,h)=>a("uploadFileAide",V,h))},null,8,["dossier","camps"])]),_:1},8,["modelValue"]),p.value!=null?(f(),A(ae,{key:1,"model-value":p.value!=null,"onUpdate:modelValue":D[28]||(D[28]=V=>p.value=null),"max-width":"600px"},{default:t(()=>[e(kn,{paiement:p.value,onUpdate:D[26]||(D[26]=V=>{a("updatePaiement",V),p.value=null}),onDelete:D[27]||(D[27]=V=>{a("deletePaiement",p.value),p.value=null})},null,8,["paiement"])]),_:1},8,["model-value"])):G("",!0),e(ae,{modelValue:g.value,"onUpdate:modelValue":D[29]||(D[29]=V=>g.value=V),"max-width":"800px"},{default:t(()=>[e(Q,{title:"Liens et identifiants"},{default:t(()=>[e(W,null,{default:t(()=>[e(B,null,{default:t(()=>[e(y,{cols:"3"},{default:t(()=>D[39]||(D[39]=[_("Espace personnel")])),_:1,__:[39]}),e(y,{class:"text-truncate"},{default:t(()=>[R("a",{href:m.dossier.EspacepersoURL,target:"_blank"},E(m.dossier.EspacepersoURL),9,qn)]),_:1}),e(y,{"align-self":"center",cols:"auto"},{default:t(()=>[e(N,{size:"small",icon:"mdi-content-copy",onClick:$})]),_:1})]),_:1}),(f(!0),z(ne,null,ce(m.dossier.BankAccounts,V=>(f(),A(B,null,{default:t(()=>[e(y,{cols:"3"},{default:t(()=>[_("RIB ("+E(F(S))+")",1)]),_:1}),e(y,{cols:"3"},{default:t(()=>[_(E(V[0]),1)]),_:2},1024),e(y,null,{default:t(()=>[_(E(V[1]),1)]),_:2},1024),e(y,{"align-self":"center",cols:"auto"},{default:t(()=>[e(N,{size:"small",icon:"mdi-content-copy",onClick:()=>k(V[1])},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),256)),e(B,null,{default:t(()=>[e(y,{cols:"3"},{default:t(()=>D[40]||(D[40]=[_("Identification de virement")])),_:1,__:[40]}),e(y,null,{default:t(()=>[_(E(m.dossier.VirementCode),1)]),_:1}),e(y,{"align-self":"center",cols:"auto"},{default:t(()=>[e(N,{size:"small",icon:"mdi-content-copy",onClick:b})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ae,{modelValue:P.value,"onUpdate:modelValue":D[31]||(D[31]=V=>P.value=V),"max-width":"600px"},{default:t(()=>[e(ol,{from:m.dossier.Dossier.Dossier.Id,onMerge:D[30]||(D[30]=V=>{a("mergeDossier",V),P.value=!1})},null,8,["from"])]),_:1},8,["modelValue"]),e(ae,{modelValue:w.value,"onUpdate:modelValue":D[34]||(D[34]=V=>w.value=V),"max-width":"600px"},{default:t(()=>[e(Q,{title:"Nouveau message",subtitle:"Envoie un message sur le fil de suivi et une notification par mail."},{default:t(()=>[e(W,null,{default:t(()=>[e(B,null,{default:t(()=>[e(y,null,{default:t(()=>[e(at,{rows:"5",variant:"outlined",modelValue:Y.value,"onUpdate:modelValue":D[32]||(D[32]=V=>Y.value=V)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ue),e(N,{disabled:!Y.value.length,onClickOnce:D[33]||(D[33]=V=>{a("sendMessage",Y.value),w.value=!1})},{default:t(()=>D[41]||(D[41]=[_("Envoyer")])),_:1,__:[41]},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["title"])}}}),zn=ee({__name:"CreateDossierCard",emits:["create"],setup(l,{emit:s}){const i=s,m=M(0);return(a,o)=>{const d=st;return f(),A(Q,{title:"Créer un dossier"},{default:t(()=>[e(W,null,{default:t(()=>[e(B,null,{default:t(()=>[e(y,null,{default:t(()=>[e(d,{label:"Responsable légal",modelValue:m.value,"onUpdate:modelValue":o[0]||(o[0]=n=>m.value=n),"initial-personne":"",api:{SelectPersonne:F(x).SelectPersonne.bind(F(x))}},null,8,["modelValue","api"])]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ue),e(N,{color:"green",disabled:m.value==0,onClick:o[1]||(o[1]=n=>i("create",m.value))},{default:t(()=>o[2]||(o[2]=[_("Créer")])),_:1,__:[2]},8,["disabled"])]),_:1})]),_:1})}}}),Hn=ee({__name:"DossierList",props:ge({camps:{},selected:{}},{query:{required:!0},queryModifiers:{}}),emits:ge(["click","update"],["update:query"]),setup(l,{expose:s,emit:i}){const m=l,a=i,o=_e(l,"query");s({searchDossiers:u}),Ie(()=>o.value,u,{immediate:!0});const d=M(!1),n=M(null);async function u(){const v=await x.DossiersSearch(o.value);v!==void 0&&(n.value=v,a("update",v))}function r(){o.value.Pattern="sort:messages",u()}return(v,p)=>{const c=Zt,S=ot;return f(),z("div",null,[e(B,null,{default:t(()=>[e(y,{"align-self":"center"},{default:t(()=>[e(c,{density:"compact",variant:"outlined","prepend-inner-icon":"mdi-magnify",label:"Rechercher un dossier","hide-details":"",clearable:"",modelValue:o.value.Pattern,"onUpdate:modelValue":[p[1]||(p[1]=g=>o.value.Pattern=g),u]},{append:t(()=>[e(nt,{text:"Trier selon les nouveaux messages"},{activator:t(({props:g})=>[e(N,le(g,{icon:"",size:"small",class:"mr-1",onClick:r}),{default:t(()=>[e(be,{color:"light-blue-darken-3"},{default:t(()=>p[5]||(p[5]=[_("mdi-email")])),_:1,__:[5]})]),_:2},1040)]),_:1}),e(nt,{text:"Autres critères de recherche"},{activator:t(({props:g})=>[e(N,le({size:"small",variant:"flat"},g,{icon:d.value?"mdi-chevron-up":"mdi-chevron-down",onClick:p[0]||(p[0]=$=>d.value=!d.value)}),null,16,["icon"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(Hl,null,{default:t(()=>[Ql(e(B,{class:"mx-0"},{default:t(()=>[e(y,{cols:"5"},{default:t(()=>[e(S,{label:"Camp",camps:m.camps,"model-value":F(Gl)(F(Kl)(o.value.IdCamp)),"onUpdate:modelValue":p[2]||(p[2]=g=>{o.value.IdCamp=F(Wl)(F(Jl)(g)),u()})},null,8,["camps","model-value"])]),_:1}),e(y,null,{default:t(()=>[e(Oe,{density:"compact",variant:"outlined",label:"Liste d'attente",modelValue:o.value.Attente,"onUpdate:modelValue":[p[3]||(p[3]=g=>o.value.Attente=g),u],items:F(tt)(F(Xl))},null,8,["modelValue","items"])]),_:1}),e(y,null,{default:t(()=>[e(Oe,{density:"compact",variant:"outlined",label:"Réglement",modelValue:o.value.Reglement,"onUpdate:modelValue":[p[4]||(p[4]=g=>o.value.Reglement=g),u],items:F(tt)(F(Zl))},null,8,["modelValue","items"])]),_:1})]),_:1},512),[[Yl,d.value]])]),_:1}),n.value!=null?(f(),A(Pe,{key:0,class:"mt-2",selected:m.selected?[m.selected]:void 0},{default:t(()=>{var g;return[(g=n.value.Dossiers)!=null&&g.length?G("",!0):(f(),A(K,{key:0,class:"text-center"},{default:t(()=>p[6]||(p[6]=[R("i",null,"Aucun dossier ne correspond à votre recherche.",-1)])),_:1,__:[6]})),(f(!0),z(ne,null,ce(n.value.Dossiers,($,b)=>(f(),A(K,{rounded:"",key:b,title:$.Responsable,subtitle:$.Participants,value:$.Id,onClick:k=>a("click",$),class:"my-1"},_t({_:2},[$.NewMessages?{name:"append",fn:t(()=>[e(ga,{color:"light-blue-darken-3",content:$.NewMessages},null,8,["content"])]),key:"0"}:void 0]),1032,["title","subtitle","value","onClick"]))),128))]}),_:1},8,["selected"])):G("",!0)])}}}),Qn=ee({__name:"SendDocumentsCampCard",props:{camps:{}},emits:["send"],setup(l,{emit:s}){const i=l,m=s,a=M(0),o=M(null);async function d(){const r=await x.EventsSendDocumentsCampPreview({idCamp:a.value});r!==void 0&&(o.value=r,n.value=(r.Dossiers||[]).filter(v=>!v.DocumentsSent).map(v=>v.Id))}const n=M([]),u=M(!1);return(r,v)=>{const p=ot;return f(),A(Q,{title:"Envoyer les documents d'un séjour"},{default:t(()=>[e(W,null,{default:t(()=>[e(B,null,{default:t(()=>[e(y,{"align-self":"center",cols:"5"},{default:t(()=>[e(p,{camps:i.camps,label:"Séjour",modelValue:a.value,"onUpdate:modelValue":[v[0]||(v[0]=c=>a.value=c),d]},null,8,["camps","modelValue"])]),_:1}),e(y,{"align-self":"center"},{default:t(()=>[o.value?(f(),A(Q,{key:0,subtitle:"Dossiers à contacter"},{default:t(()=>[e(W,null,{default:t(()=>[e(Pe,{selectable:"",selected:n.value,"onUpdate:selected":v[1]||(v[1]=c=>n.value=c),"select-strategy":"leaf"},{default:t(()=>[(f(!0),z(ne,null,ce(o.value.Dossiers,c=>(f(),A(K,{title:c.Responsable,subtitle:c.Participants,value:c.Id,rounded:"",class:"my-1"},_t({append:t(({isSelected:S,select:g})=>[e(ba,{density:"compact","hide-details":"","model-value":S,"onUpdate:modelValue":g},null,8,["model-value","onUpdate:modelValue"])]),_:2},[c.DocumentsSent?{name:"prepend",fn:t(()=>[e(De,{color:"green",class:"mr-2"},{default:t(()=>v[3]||(v[3]=[_("Envoyés")])),_:1,__:[3]})]),key:"0"}:void 0]),1032,["title","subtitle","value"]))),256))]),_:1},8,["selected"])]),_:1})]),_:1})):G("",!0)]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ue),e(N,{disabled:!a.value||!n.value.length||u.value,onClick:v[2]||(v[2]=c=>{u.value=!0,m("send",a.value,n.value)})},{append:t(()=>[u.value?(f(),A(ea,{key:0,indeterminate:""})):(f(),A(be,{key:1},{default:t(()=>v[4]||(v[4]=[_("mdi-send")])),_:1,__:[4]}))]),default:t(()=>[v[5]||(v[5]=_(" Envoyer "))]),_:1,__:[5]},8,["disabled"])]),_:1})]),_:1})}}}),Yn={key:1,class:"text-center font-italic my-6"},Wn=ee({__name:"PannelDossiers",props:{initialDossier:{}},setup(l){const s=l;Le(()=>{d(),s.initialDossier!==void 0&&v(s.initialDossier)}),Ie(()=>s.initialDossier,()=>{s.initialDossier!==void 0&&v(s.initialDossier)});const i=It("detailsPannel"),m=M(null),a=M(pa()),o=M([]);async function d(){const L=await x.GetCamps();L!==void 0&&(o.value=L||[])}function n(L){var q;m.value={length:((q=L.Dossiers)==null?void 0:q.length)||0,total:L.Total}}const u=It("dossierList");function r(){var L;(L=u.value)==null||L.searchDossiers()}async function v(L){await c(L),a.value=fa(L)}const p=M(null);async function c(L){const q=await x.DossiersLoad({id:L});q!==void 0&&(p.value=q)}async function S(L){c(L.Id),await x.EventsMarkMessagesSeen({idDossier:L.Id})!==void 0&&r()}async function g(){p.value!=null&&c(p.value.Dossier.Dossier.Id)}const $=M(!1);async function b(L){var ie;$.value=!1;const q=await x.DossiersCreate({idResponsable:L});q!==void 0&&(x.showMessage("Dossier créé avec succès."),await v(q.Id),(ie=i.value)==null||ie.showEditDossier())}async function k(L){const q=await x.DossiersUpdate(L);q!==void 0&&(x.showMessage("Dossier mis à jour avec succès."),p.value!=null&&(p.value.Dossier.Dossier=L,p.value.Dossier.Responsable=q.Responsable),r())}async function P(){if(p.value==null)return;const L=p.value.Dossier.Dossier.Id;await x.DossiersDelete({id:L})!==void 0&&(x.showMessage("Dossier supprimé avec succès."),p.value=null,r())}async function w(L){await x.DossiersMerge(L)!==void 0&&(x.showMessage("Dossier fusionné avec succès."),r(),c(L.To))}async function Y(L){await x.ParticipantsCreate(L)!==void 0&&(x.showMessage("Participant ajouté avec succès."),g())}async function H(L){await x.ParticipantsUpdate(L)!==void 0&&(x.showMessage("Réglages du participant modifiés avec succès."),g())}async function D(L){await x.ParticipantsDelete({id:L})!==void 0&&(x.showMessage("Participant supprimé avec succès."),g())}async function ve(L){var fe;if(p.value==null)return;const q=((fe=p.value.Dossier.Participants)==null?void 0:fe.map(Ve=>Ve.Participant).filter(Ve=>Ve.Id!=L.Id))||[];!q.length||(q.forEach(Ve=>{Ve.Remises=L.Remises,Ve.QuotientFamilial=L.QuotientFamilial,Ve.IdCamp==L.IdCamp&&(Ve.OptionPrix=L.OptionPrix)}),(await Promise.all(q.map(Ve=>x.ParticipantsUpdate(Ve)))).includes(void 0))||(x.showMessage("Réglages des participants modifiés avec succès."),g())}async function j(L){const q=await x.AidesCreate(L);if(q===void 0||(x.showMessage("Aide ajoutée avec succès."),p.value==null))return;const ie=p.value.Dossier.Aides||{},fe=ie[L.IdParticipant]||{};fe[q.Id]=q,ie[L.IdParticipant]=fe,p.value.Dossier.Aides=ie}async function Z(L){await x.AidesUpdate(L)!==void 0&&(x.showMessage("Aide modifiée avec succès."),g())}async function V(L){await x.AidesJustificatifDelete({idAide:L})!==void 0&&(x.showMessage("Justificatif supprimé avec succès."),p.value!=null&&p.value.Dossier.AidesFiles&&delete p.value.Dossier.AidesFiles[L])}async function h(L,q){const ie=await x.AidesJustificatifUpload(L,{idAide:q});if(ie!==void 0&&(x.showMessage("Justificatif téléversé avec succès."),p.value!=null)){const fe=p.value.Dossier.AidesFiles||{};fe[q]=ie,p.value.Dossier.AidesFiles=fe}}async function I(L){await x.AidesDelete({id:L})!==void 0&&(x.showMessage("Aide supprimée avec succès."),g())}async function J(){var q;if(p.value==null)return;const L=await x.PaiementsCreate({idDossier:p.value.Dossier.Dossier.Id});L!==void 0&&(x.showMessage("Paiement créé avec succès."),g(),(q=i.value)==null||q.showEditPaiement(L))}async function oe(L){await x.PaiementsUpdate(L)!==void 0&&(x.showMessage("Paiement modifié avec succès."),g())}async function T(L){await x.PaiementsDelete({id:L.Id})!==void 0&&(x.showMessage("Paiement supprimé avec succès."),g())}async function U(L){p.value==null||await x.EventsSendMessage({IdDossier:p.value.Dossier.Dossier.Id,Contenu:L})===void 0||(x.showMessage("Message envoyé avec succès."),g())}async function re(L){await x.EventsDelete({id:L.Id})!==void 0&&(x.showMessage("Message supprimé avec succès."),g())}async function C(){p.value==null||await x.EventsSendFacture({idDossier:p.value.Dossier.Dossier.Id})===void 0||(x.showMessage("Demande de règlement envoyé avec succès."),g())}const X=M(!1);async function te(L,q){const ie=await x.EventsSendDocumentsCamp({IdCamp:L,IdDossiers:q});X.value=!1,ie!==void 0&&(g(),x.showMessage("Documents du séjour envoyés avec succès."))}return(L,q)=>(f(),A(B,{"no-gutters":"",class:"ma-2"},{default:t(()=>[e(y,{cols:"6"},{default:t(()=>[e(Q,{title:"Dossiers",subtitle:m.value==null?"-":`${m.value.length} affiché(s) / ${m.value.total}`},{append:t(()=>[e(N,{icon:"",size:"small",onClick:q[0]||(q[0]=ie=>$.value=!0)},{default:t(()=>[e(be,{color:"green"},{default:t(()=>q[5]||(q[5]=[_("mdi-plus")])),_:1,__:[5]})]),_:1}),e(de,{thickness:"1",vertical:"",class:"mx-2"}),e(N,{size:"small"},{default:t(()=>[q[6]||(q[6]=_(" Actions ")),e(xe,{activator:"parent"},{default:t(()=>[e(Pe,null,{default:t(()=>[e(K,{title:"Envoyer les documents",subtitle:"d'un séjour","prepend-icon":"mdi-mail",onClick:q[1]||(q[1]=ie=>X.value=!0)})]),_:1})]),_:1})]),_:1,__:[6]})]),default:t(()=>[e(W,null,{default:t(()=>{var ie;return[e(Hn,{camps:o.value,selected:(ie=p.value)==null?void 0:ie.Dossier.Dossier.Id,query:a.value,"onUpdate:query":q[2]||(q[2]=fe=>a.value=fe),onClick:S,onUpdate:n,ref_key:"dossierList",ref:u},null,8,["camps","selected","query"])]}),_:1})]),_:1},8,["subtitle"])]),_:1}),e(y,{cols:"6"},{default:t(()=>[p.value!=null?(f(),A(jn,{key:0,dossier:p.value,camps:o.value,onUpdateDossier:k,onDeleteDossier:P,onMergeDossier:w,onCreateParticipant:Y,onUpdateParticipant:H,onDeleteParticipant:D,onExpandParticipant:ve,onCreateAide:j,onDeleteAide:I,onUpdateAide:Z,onDeleteFileAide:V,onUploadFileAide:h,onCreatePaiement:J,onUpdatePaiement:oe,onDeletePaiement:T,onSendMessage:U,onDeleteMessage:re,onSendFacture:C,ref_key:"detailsPannel",ref:i},null,8,["dossier","camps"])):(f(),z("div",Yn," Sélectionner un dossier... "))]),_:1}),e(ae,{modelValue:$.value,"onUpdate:modelValue":q[3]||(q[3]=ie=>$.value=ie),"max-width":"400px"},{default:t(()=>[e(zn,{onCreate:b})]),_:1},8,["modelValue"]),e(ae,{modelValue:X.value,"onUpdate:modelValue":q[4]||(q[4]=ie=>X.value=ie),"max-width":"1000px"},{default:t(()=>[e(Qn,{camps:o.value,onSend:te},null,8,["camps"])]),_:1},8,["modelValue"])]),_:1}))}}),Jn=ee({__name:"inscriptions",setup(l){const s=Ke(),i=O(()=>tu(s.currentRoute.value.query)),m=O(()=>i.value.tab||"insc"),a=O(()=>i.value.idDossier);function o(d){const n=s.currentRoute.value;s.push({path:n.path,query:{tab:d}})}return(d,n)=>(f(),z(ne,null,[e(rt,{title:"Suivi des inscriptions"},{default:t(()=>[e(ka,{"model-value":m.value,"onUpdate:modelValue":n[0]||(n[0]=u=>o(u))},{default:t(()=>[e(Ut,{value:"insc"},{default:t(()=>n[2]||(n[2]=[_("Nouvelles inscriptions")])),_:1,__:[2]}),e(Ut,{value:"doss"},{default:t(()=>n[3]||(n[3]=[_("Suivi des dossiers")])),_:1,__:[3]})]),_:1},8,["model-value"])]),_:1}),e(Va,{"model-value":m.value},{default:t(()=>[e(Ft,{value:"insc"},{default:t(()=>[e(sn,{onGoTo:F(ft),onEmpty:n[1]||(n[1]=u=>F(ft)())},null,8,["onGoTo"])]),_:1}),e(Ft,{value:"doss"},{default:t(()=>[e(Wn,{"initial-dossier":a.value},null,8,["initial-dossier"])]),_:1})]),_:1},8,["model-value"])],64))}}),Gn=ee({__name:"PersonneEdit",props:{personne:{}},emits:["save"],setup(l,{emit:s}){const i=l,m=s,a=M(Ce(i.personne)),o=O(()=>!!(a.value.Nom&&a.value.Prenom));return(d,n)=>{const u=Da,r=Sa;return f(),A(Q,{title:"Editer le profil"},{default:t(()=>[e(W,null,{default:t(()=>[e(ll,null,{default:t(()=>[e(B,null,{default:t(()=>[e(y,null,{default:t(()=>[e(me,{autofocus:"","hide-details":"",label:"Nom",density:"compact",variant:"outlined",modelValue:a.value.Nom,"onUpdate:modelValue":n[0]||(n[0]=v=>a.value.Nom=v)},null,8,["modelValue"])]),_:1}),e(y,null,{default:t(()=>[e(me,{"hide-details":"",label:"Prénom",density:"compact",variant:"outlined",modelValue:a.value.Prenom,"onUpdate:modelValue":n[1]||(n[1]=v=>a.value.Prenom=v)},null,8,["modelValue"])]),_:1}),e(y,null,{default:t(()=>[e(u,{modelValue:a.value.Sexe,"onUpdate:modelValue":n[2]||(n[2]=v=>a.value.Sexe=v)},null,8,["modelValue"])]),_:1}),e(y,null,{default:t(()=>[e(r,{modelValue:a.value.DateNaissance,"onUpdate:modelValue":n[3]||(n[3]=v=>a.value.DateNaissance=v)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ue),e(N,{disabled:!o.value,onClick:n[4]||(n[4]=v=>m("save",a.value))},{default:t(()=>n[5]||(n[5]=[_("Enregistrer")])),_:1,__:[5]},8,["disabled"])]),_:1})]),_:1})}}}),Kn=ee({__name:"annuaire",setup(l){const s=Ke(),i=O(()=>lu(s.currentRoute.value.query)),m=O(()=>i.value.idPersonne);Ie(()=>m.value,()=>m.value!==void 0?v(m.value):null,{immediate:!0});const a=M([]),o=M("");async function d(){if(!o.value)return;const p=await x.PersonnesGet({search:o.value});p!==void 0&&(a.value=p||[])}async function n(){const p=await x.PersonnesCreate();p!==void 0&&(x.showMessage("Profil créé avec succès."),a.value.push(p),Qe(p.Id))}const u=M(null);async function r(p){u.value=null;const c=await x.PersonnesUpdate(p);if(c===void 0)return;x.showMessage("Profil modifié avec succès."),Qe();const S=a.value.findIndex(g=>g.Id==p.Id);a.value[S]=c}async function v(p){const c=await x.PersonnesLoad({id:p});c!==void 0&&(u.value=c)}return(p,c)=>{const S=Zt;return f(),z(ne,null,[e(rt,{title:"Annuaire : personnes et organismes"},{default:t(()=>c[2]||(c[2]=[_(" TODO ")])),_:1,__:[2]}),e(Q,{class:"ma-2"},{append:t(()=>[e(N,{color:"green",onClick:n},{default:t(()=>c[3]||(c[3]=[_("Créer un nouveau profil")])),_:1,__:[3]})]),default:t(()=>[e(W,null,{default:t(()=>[e(B,null,{default:t(()=>[e(y,null,{default:t(()=>[e(S,{"prepend-inner-icon":"mdi-magnify",label:"Recherche",modelValue:o.value,"onUpdate:modelValue":[c[0]||(c[0]=g=>o.value=g),d]},null,8,["modelValue"]),e(Pe,null,{default:t(()=>[(f(!0),z(ne,null,ce(a.value,g=>(f(),A(K,{title:g.Label,subtitle:F(we).dateNaissance(g.DateNaissance),"prepend-icon":F(we).sexeIcon(g.Sexe),onClick:$=>F(Qe)(g.Id)},_t({_:2},[g.IsTemp?{name:"append",fn:t(()=>[e(De,{"prepend-icon":"mdi-alert",color:"warning"},{default:t(()=>c[4]||(c[4]=[_(" Ce profil est temporaire et devrait être identifié. ")])),_:1,__:[4]})]),key:"0"}:void 0]),1032,["title","subtitle","prepend-icon","onClick"]))),256))]),_:1})]),_:1}),e(y)]),_:1})]),_:1}),u.value!=null?(f(),A(ae,{key:0,"model-value":u.value!=null,"onUpdate:modelValue":c[1]||(c[1]=g=>{u.value=null,F(Qe)(void 0)}),"max-width":"800px"},{default:t(()=>[e(Gn,{personne:u.value,onSave:r},null,8,["personne"])]),_:1},8,["model-value"])):G("",!0)]),_:1})],64)}}}),Xn=[{path:"/",component:Ma},{path:"/camps",component:an},{path:"/inscriptions",component:Jn},{path:"/annuaire",component:Kn}],Zn="/backoffice",He=ya({history:_a(Zn),routes:Xn});He.onError((l,s)=>{var i,m;(m=(i=l==null?void 0:l.message)==null?void 0:i.includes)!=null&&m.call(i,"Failed to fetch dynamically imported module")?localStorage.getItem("vuetify:dynamic-reload")?console.error("Dynamic import error, reloading page did not fix it",l):(console.log("Reloading page to fix dynamic import error"),localStorage.setItem("vuetify:dynamic-reload","true"),location.assign(s.fullPath)):console.error(l)});He.isReady().then(()=>{localStorage.removeItem("vuetify:dynamic-reload")});function ut(l){return l?Number(l):void 0}function eu(l){const s=l;return{idCamp:ut(s.idCamp),idParticipant:ut(s.idParticipant)}}function Vt(l){He.push({path:"/camps",query:{idCamp:l.IdCamp,idParticipant:l.Id}})}function tu(l){const s=l;return{tab:s.tab,idDossier:ut(s.idDossier)}}function ft(l){He.push({path:"/inscriptions",query:{tab:"doss",idDossier:l}})}function lu(l){return{idPersonne:ut(l.idPersonne)}}function Qe(l){He.push({path:"/annuaire",query:{idPersonne:l}})}const au=["innerHTML"],nu=ee({__name:"App",setup(l){const s=pt({text:"",color:"secondary",action:void 0,timeout:4e3}),i=M(""),m=M("");return x.onError=(o,d)=>{i.value=o,m.value=d},x.showMessage=(o,d,n)=>{s.text=o,s.color=d||"success",s.action=n,s.timeout=1e4,s.timeout=4e3},Ke().beforeEach(async(o,d)=>{if(!x.hasToken()&&o.path!=="/")return{path:"/"}}),(o,d)=>{const n=ta("router-view");return f(),A(aa,null,{default:t(()=>[e(la,null,{default:t(()=>[e(n),e(Mt,{style:{"z-index":"10000"},app:"","model-value":s.text!="","onUpdate:modelValue":d[1]||(d[1]=u=>s.text=""),timeout:s.timeout,color:s.color,location:"bottom left","close-on-content-click":""},{default:t(()=>[_(E(s.text)+" ",1),s.action?(f(),A(N,{key:0,onClick:d[0]||(d[0]=u=>s.action.action()),class:"ml-2"},{default:t(()=>[_(E(s.action.title),1)]),_:1})):G("",!0)]),_:1},8,["model-value","timeout","color"]),e(Mt,{app:"","model-value":i.value!="","onUpdate:modelValue":d[2]||(d[2]=u=>i.value=""),timeout:4e3,color:"red"},{default:t(()=>[R("b",null,E(i.value),1),R("div",{innerHTML:m.value},null,8,au)]),_:1},8,["model-value"])]),_:1})]),_:1})}}}),dl=na(nu);dl.use(ua).use(He);dl.mount("#app");
