import{q as Z,s as L,G as ee,b$ as Ae,ck as ze,K as j,k as D,c as f,R as w,x as te,cH as J,b as c,ca as ne,N as Re,cI as $e,v as Ne,H as le,cJ as H,J as je,L as Le,cl as Me,j as m,F as $,z as Oe,av as ae,cK as _e,d as ie,aX as Ee,p as re,o as oe,w as p,Y as B,a0 as W,e as P,t as Ue,l as q,bJ as Ke,i as Ge,ct as Je}from"./VSnackbar-BIDVaiYL.js";import{z as He,A as X,I as Y,J as We,D as qe,K as Xe,k as Ye,h as Qe,b as Q,c as Ze,V as et,e as tt,f as nt}from"./VTextarea-iANrb6Vp.js";const lt=L({id:String,interactive:Boolean,text:String,...Re($e({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:null}),["absolute","persistent"])},"VTooltip"),vt=Z()({name:"VTooltip",props:lt(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:l}=i;const r=ee(e,"modelValue"),{scopeId:a}=Ae(),n=ze(),u=j(()=>e.id||`v-tooltip-${n}`),o=D(),v=f(()=>e.location.split(" ").length>1?e.location:e.location+" center"),I=f(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),y=j(()=>e.transition!=null?e.transition:r.value?"scale-transition":"fade-transition"),g=f(()=>w({"aria-describedby":u.value},e.activatorProps));return te(()=>{const k=J.filterProps(e);return c(J,w({ref:o,class:["v-tooltip",{"v-tooltip--interactive":e.interactive},e.class],style:e.style,id:u.value},k,{modelValue:r.value,"onUpdate:modelValue":h=>r.value=h,transition:y.value,absolute:!0,location:v.value,origin:I.value,persistent:!0,role:"tooltip",activatorProps:g.value,_disableGlobalStack:!0},a),{activator:l.activator,default:function(){for(var h=arguments.length,C=new Array(h),F=0;F<h;F++)C[F]=arguments[F];return l.default?.(...C)??e.text}})}),ne({},o)}});function at(){function e(l){return[...l.dataTransfer?.items??[]].filter(a=>a.kind==="file").map(a=>a.webkitGetAsEntry()).filter(Boolean).length>0||[...l.dataTransfer?.files??[]].length>0}async function i(l){const r=[],a=[...l.dataTransfer?.items??[]].filter(n=>n.kind==="file").map(n=>n.webkitGetAsEntry()).filter(Boolean);if(a.length)for(const n of a){const u=await se(n,ue(".",n));r.push(...u.map(o=>o.file))}else r.push(...l.dataTransfer?.files??[]);return r}return{handleDrop:i,hasFilesOrFolders:e}}function se(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new Promise((l,r)=>{e.isFile?e.file(n=>l([{file:n,path:i}]),r):e.isDirectory&&e.createReader().readEntries(async n=>{const u=[];for(const o of n)u.push(...await se(o,ue(i,o)));l(u)})})}function ue(e,i){return i.isDirectory?`${e}/${i.name}`:e}const it=L({filterByType:String},"file-accept");function rt(e){const i=f(()=>e.filterByType?ot(e.filterByType):null);function l(r){if(i.value){const a=r.filter(i.value);return{accepted:a,rejected:r.filter(n=>!a.includes(n))}}return{accepted:r,rejected:[]}}return{filterAccepted:l}}function ot(e){const i=e.split(",").map(n=>n.trim().toLowerCase()),l=i.filter(n=>n.startsWith(".")),r=i.filter(n=>n.endsWith("/*")),a=i.filter(n=>!l.includes(n)&&!r.includes(n));return n=>{const u=n.name.split(".").at(-1)?.toLowerCase()??"",o=n.type.split("/").at(0)?.toLowerCase()??"";return a.includes(n.type)||l.includes(`.${u}`)||r.includes(`${o}/*`)}}const st=L({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},truncateLength:{type:[Number,String],default:22},...qe({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>le(e).every(i=>i!=null&&typeof i=="object")},...it(),...We({clearable:!0})},"VFileInput"),ut=Z()({name:"VFileInput",inheritAttrs:!1,props:st(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0,rejected:e=>!0},setup(e,i){let{attrs:l,emit:r,slots:a}=i;const{t:n}=Ne(),{filterAccepted:u}=rt(e),o=ee(e,"modelValue",e.modelValue,t=>le(t),t=>!e.multiple&&Array.isArray(t)?t[0]:t),{isFocused:v,focus:I,blur:y}=He(e),g=f(()=>typeof e.showSize!="boolean"?e.showSize:void 0),k=f(()=>(o.value??[]).reduce((t,s)=>{let{size:b=0}=s;return t+b},0)),h=f(()=>H(k.value,g.value)),C=f(()=>(o.value??[]).map(t=>{const{name:s="",size:b=0}=t,V=ge(s);return e.showSize?`${V} (${H(b,g.value)})`:V})),F=f(()=>{const t=o.value?.length??0;return e.showSize?n(e.counterSizeString,t,h.value):n(e.counterString,t)}),M=D(),O=D(),d=D(),ce=j(()=>v.value||e.active),_=f(()=>["plain","underlined"].includes(e.variant)),T=je(!1),{handleDrop:de,hasFilesOrFolders:fe}=at();function x(){d.value!==document.activeElement&&d.value?.focus(),v.value||I()}function ve(t){d.value?.click()}function pe(t){r("mousedown:control",t)}function me(t){d.value?.click(),r("click:control",t)}function ye(t){t.stopPropagation(),x(),ae(()=>{o.value=[],_e(e["onClick:clear"],t)})}function ge(t){if(t.length<Number(e.truncateLength))return t;const s=Math.floor((Number(e.truncateLength)-1)/2);return`${t.slice(0,s)}…${t.slice(t.length-s)}`}function he(t){t.preventDefault(),t.stopImmediatePropagation(),T.value=!0}function be(t){t.preventDefault(),T.value=!1}async function Ve(t){if(t.preventDefault(),t.stopImmediatePropagation(),T.value=!1,!d.value||!fe(t))return;const s=await de(t);E(s)}function ke(t){if(!(!t.target||t.repack))if(e.filterByType)E([...t.target.files]);else{const s=t.target;o.value=[...s.files??[]]}}function E(t){const s=new DataTransfer,{accepted:b,rejected:V}=u(t);V.length&&r("rejected",V);for(const z of b)s.items.add(z);d.value.files=s.files,o.value=[...s.files];const A=new Event("change",{bubbles:!0});A.repack=!0,d.value.dispatchEvent(A)}return Le(o,t=>{(!Array.isArray(t)||!t.length)&&d.value&&(d.value.value="")}),te(()=>{const t=!!(a.counter||e.counter),s=!!(t||a.details),[b,V]=Me(l),{modelValue:A,...z}=X.filterProps(e),Ce={...Y.filterProps(e),"onClick:clear":ye},Fe=l.webkitdirectory!==void 0&&l.webkitdirectory!==!1,we=l.accept?String(l.accept):void 0,Ie=Fe?void 0:e.filterByType??we;return c(X,w({ref:M,modelValue:e.multiple?o.value:o.value[0],class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--dragging":T.value,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":_.value},e.class],style:e.style,"onClick:prepend":ve},b,z,{centerAffix:!_.value,focused:v.value}),{...a,default:R=>{let{id:Se,isDisabled:U,isDirty:K,isReadonly:G,isValid:De,hasDetails:Te}=R;return c(Y,w({ref:O,prependIcon:e.prependIcon,onMousedown:pe,onClick:me,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},Ce,{id:Se.value,active:ce.value||K.value,dirty:K.value||e.dirty,disabled:U.value,focused:v.value,details:Te.value,error:De.value===!1,onDragover:he,onDrop:Ve}),{...a,default:Be=>{let{props:{class:Pe,...xe}}=Be;return m($,null,[m("input",w({ref:d,type:"file",accept:Ie,readonly:G.value,disabled:U.value,multiple:e.multiple,name:e.name,onClick:S=>{S.stopPropagation(),G.value&&S.preventDefault(),x()},onChange:ke,onDragleave:be,onFocus:x,onBlur:y},xe,V),null),m("div",{class:Oe(Pe)},[!!o.value?.length&&!e.hideInput&&(a.selection?a.selection({fileNames:C.value,totalBytes:k.value,totalBytesReadable:h.value}):e.chips?C.value.map(S=>c(Ye,{key:S,size:"small",text:S},null)):C.value.join(", "))])])}})},details:s?R=>m($,null,[a.details?.(R),t&&m($,null,[m("span",null,null),c(Xe,{active:!!o.value?.length,value:F.value,disabled:e.disabled},a.counter)])]):void 0})}),ne({},M,O,d)}}),N=5e6,pt=ie({__name:"FileInput",props:{label:{}},emits:["update"],setup(e,{expose:i,emit:l}){const r=e,a=l,n=D(null);function u(y){return y?y.size<=N||`Taille maximale : ${N/1e6}MB`:!0}function o(){n.value&&n.value.size>N||a("update",n.value)}i({openDialog:I});const v=Ee("input");function I(){ae(()=>v.value?.click())}return(y,g)=>(oe(),re(ut,{label:r.label,density:"comfortable",accept:".jpg,.jpeg,.png,.pdf",multiple:!1,modelValue:n.value,"onUpdate:modelValue":[g[0]||(g[0]=k=>n.value=k),o],rules:[u],"show-size":"",ref_key:"input",ref:v},null,8,["label","modelValue","rules"]))}}),ct={class:"text-right ml-2"},mt=ie({__name:"FileCard",props:{file:{},readonly:{type:Boolean}},emits:["delete"],setup(e,{emit:i}){const l=e,r=i;return(a,n)=>(oe(),re(Qe,null,{activator:p(({props:u})=>[c(Q,w({class:"my-2"},u),{default:p(()=>[c(Ge,{cover:"",src:B(Je)(l.file.Key),width:"56px"},null,8,["src"])]),_:1},16)]),default:p(()=>[c(Q,null,{default:p(()=>[c(Ze,{class:"px-0"},{default:p(()=>[c(et,{"min-width":"400",title:l.file.NomClient,subtitle:B(W).size(l.file.Taille)},{append:p(()=>[m("div",ct,[n[1]||(n[1]=P(" téléversé le ",-1)),n[2]||(n[2]=m("br",null,null,-1)),P(" "+Ue(B(W).time(l.file.Uploaded)),1)])]),_:1},8,["title","subtitle"])]),_:1}),c(tt,null,{default:p(()=>[c(q,{onClick:n[0]||(n[0]=u=>r("delete")),color:"red"},{default:p(()=>[...n[3]||(n[3]=[P(" Supprimer ",-1)])]),_:1}),c(nt),c(q,{href:B(Ke)(l.file.Key)},{default:p(()=>[...n[4]||(n[4]=[P(" Télécharger ",-1)])]),_:1},8,["href"])]),_:1})]),_:1})]),_:1}))}});export{vt as V,mt as _,pt as a};
