import{cs as L,bQ as A,bS as R,d as U,k as l,a9 as x,p,o as f,w as t,b as s,aZ as C,V as E,f as F,g as B,h as g,i as H,e as v,m as M,cU as $,_ as N,af as q,Y as P,ay as z,j as c,a_ as b,t as k,a$ as j,b0 as I,b1 as D}from"./VSnackbar-BIDVaiYL.js";class K{constructor(a,r){this.baseURL=a,this.authToken=r}getHeaders(){return{Authorization:"Bearer "+this.authToken}}async ValideTransfertFicheSanitaire(a){const r=this.baseURL+"/api/v1/espaceperso/fichesanitaires/transfert";this.startRequest();try{return await L.post(r,null,{headers:this.getHeaders(),params:{token:a.token}}),!0}catch(o){this.handleError(o)}}}class Q extends K{constructor(a,r,o){super(o,""),this.onError=a,this.showMessage=r}handleError(a){const{kind:r,messageHtml:o}=R(a);this.onError(r,o)}startRequest(){}}const d=new Q((i,a)=>{},(i,a)=>{},A()),m={TransfertFicheSanitaire:1};m.TransfertFicheSanitaire+"";const Y=["innerHTML"],Z=U({__name:"App",setup(i){const a=l(""),r=l("secondary"),o=l(""),h=l("");d.onError=(n,e)=>{o.value=n,h.value=e},d.showMessage=(n,e)=>{a.value=n,r.value=e||"success"};const S="/static/repere/logo.png",V=l(!0),_=l(1);x(()=>{const n=new URLSearchParams(window.location.search),e=n.get("service")||"",u=Number(e);switch(u){case m.TransfertFicheSanitaire:_.value=u;const T=n.get("token")||"";return w(T);default:d.onError("Service invalide",`Le paramètre <i>service</i> a une valeur incorrecte : ${e}`)}});async function w(n){const e=await d.ValideTransfertFicheSanitaire({token:n});V.value=!1}return(n,e)=>(f(),p(j,null,{default:t(()=>[s(C,null,{default:t(()=>[s(E,{rounded:"",elevation:"4",color:"secondary"},{default:t(()=>[s(F,null,{default:t(()=>[s(B,null,{default:t(()=>[s(g,{"align-self":"center",cols:"auto"},{default:t(()=>[s(H,{width:"60",src:S})]),_:1}),s(g,{"align-self":"center"},{default:t(()=>[...e[2]||(e[2]=[v(" Portail ",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),s(M,{class:"fill-height"},{default:t(()=>[s($,null,{default:t(()=>[V.value?(f(),p(q,{key:0})):_.value==P(m).TransfertFicheSanitaire?(f(),p(z,{key:1,title:"Partage de fiche sanitaire",type:"success"},{default:t(()=>[...e[3]||(e[3]=[v(" L'accès à la fiche a bien été mis à jour. ",-1),c("br",null,null,-1),c("small",{class:"text-muted"},"Vous pouvez quitter cette page et actualiser votre espace de suivi pour y accéder.",-1)])]),_:1})):N("",!0)]),_:1})]),_:1}),s(b,{style:{"z-index":"10000"},app:"","model-value":a.value!="","onUpdate:modelValue":e[0]||(e[0]=u=>a.value=""),timeout:4e3,color:r.value,location:"bottom left","close-on-content-click":""},{default:t(()=>[v(k(a.value),1)]),_:1},8,["model-value","color"]),s(b,{app:"","model-value":o.value!="","onUpdate:modelValue":e[1]||(e[1]=u=>o.value=""),timeout:4e3,color:"red"},{default:t(()=>[c("b",null,k(o.value),1),c("div",{innerHTML:h.value},null,8,Y)]),_:1},8,["model-value"])]),_:1})]),_:1}))}}),y=I(Z);y.use(D);y.mount("#app");
