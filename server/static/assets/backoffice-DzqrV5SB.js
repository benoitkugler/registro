import{c as hl,a as Ul,f as El,d as j,r as $,b as Q,F as le,e,w as l,V as Tl,g as te,h as ce,i as b,j as w,k as K,l as Rl,m as N,n as y,o as Ll,t as R,p as al,q as z,s as f,u as Y,v as W,x as re,y as B,z as ie,A as ne,B as Ol,C as _e,D as Ve,E as Ze,G as Vt,H as h,I as nl,J as Ae,K as ye,L as ve,M as T,N as ke,O as we,P as ze,Q as Dt,R as He,S as Bl,T as Qe,U as Ie,W as ut,X as Nl,Y as Fe,Z as De,_ as $e,$ as il,a0 as Z,a1 as qe,a2 as Fl,a3 as Oe,a4 as kt,a5 as ql,a6 as oe,a7 as et,a8 as je,a9 as zl,aa as Se,ab as ul,ac as ae,ad as he,ae as fe,af as Te,ag as Ce,ah as st,ai as pe,aj as ge,ak as sl,al as xe,am as Pe,an as ol,ao as jl,ap as Hl,aq as Ql,ar as Yl,as as Wl,at as Nt,au as Ft,av as Kl,aw as Jl,ax as Gl,ay as Xl,az as Zl,aA as ea,aB as ta,aC as la,aD as aa,aE as na,aF as rl,aG as dl,aH as ia,aI as _t,aJ as ua,aK as sa,aL as wt,aM as ct,aN as St,aO as mt,aP as It,aQ as cl,aR as tt,aS as oa,aT as qt,aU as Ct,aV as ml,aW as ot,aX as ra,aY as Ue,aZ as da,a_ as Xe,a$ as ca,b0 as vl,b1 as ma,b2 as va,b3 as fa,b4 as pa,b5 as ya,b6 as fl,b7 as pl,b8 as Je,b9 as ba,ba as pt,bb as Ee,bc as ga,bd as Va,be as yl,bf as ka,bg as _a,bh as yt,bi as bt,bj as Ca,bk as xa,bl as Pa,bm as bl,bn as gl,bo as Da,bp as wa,bq as Sa,br as Ia,bs as Ma,bt as $a,bu as Aa,bv as ha,bw as Ua,bx as Vl,by as zt,bz as Ea,bA as Ta,bB as jt,bC as Ra,bD as La}from"./VSnackbar-BJ33Du3g.js";import{V as Oa,a as Ba,u as lt,c as M,b as Na,i as Ht,_ as Fa,d as vt,e as kl,f as qa,g as Mt,h as za,j as ja,k as Ha,l as _l,m as Qa,n as Ya,o as Wa,p as Ka,q as Qt,r as Yt,s as Ja,t as Ga}from"./VTabs-ajbyw4G_.js";import{V as Wt,m as Xa}from"./VSheet-DSIjSYbi.js";import{_ as $t,V as at,a as xt,b as Za,c as en,d as tn,e as ln}from"./SexeField.vue_vue_type_script_setup_true_lang-8CwPmgDs.js";import{V as Le}from"./VTooltip-C7RWk0Z0.js";import"./VWindowItem-ZYo1AT89.js";const an=hl({locale:{locale:"fr",messages:{fr:El}},theme:{defaultTheme:"light",themes:{light:{colors:Ul}}}}),ft=j({__name:"NavBar",props:{title:{},hideMenu:{type:Boolean}},setup(t){const u="/static/repere/logo.png",n="v0.1.2",o=$(!1),a=t;return(r,d)=>(f(),Q(le,null,[e(Oa,{app:"",modelValue:o.value,"onUpdate:modelValue":d[0]||(d[0]=i=>o.value=i),temporary:""},{default:l(()=>[e(te,{title:"Registro - Backoffice",subtitle:n}),e(ce),e(te,{"prepend-icon":"mdi-bed",link:"",to:{path:"/camps"},color:"primary"},{default:l(()=>d[2]||(d[2]=[b(" Camps ")])),_:1}),e(te,{"prepend-icon":"mdi-calendar-multiple-check",link:"",to:{path:"/inscriptions"},color:"primary"},{default:l(()=>d[3]||(d[3]=[b(" Inscriptions ")])),_:1}),e(ce),e(te,{"prepend-icon":"mdi-account-multiple",link:"",to:{path:"/annuaire"},color:"primary"},{default:l(()=>d[4]||(d[4]=[b(" Annuaire ")])),_:1}),e(ce),e(te,{"prepend-icon":"mdi-logout",link:"",to:{path:"/"},color:"primary"},{default:l(()=>d[5]||(d[5]=[b(" Se déconnecter ")])),_:1})]),_:1},8,["modelValue"]),e(Tl,{rounded:"",elevation:"4",color:"secondary"},{append:l(()=>[al(r.$slots,"default"),d[6]||(d[6]=z("div",{class:"mr-2"},null,-1))]),default:l(()=>[r.hideMenu?K("",!0):(f(),w(Ba,{key:0,onClick:d[1]||(d[1]=i=>o.value=!o.value)})),e(Rl,null,{default:l(()=>[e(N,null,{default:l(()=>[e(y,{"align-self":"center",cols:"auto"},{default:l(()=>[e(Ll,{width:"60",src:u})]),_:1}),e(y,{"align-self":"center"},{default:l(()=>[b(R(a.title),1)]),_:1})]),_:1})]),_:1})]),_:3})],64))}}),nn=j({__name:"index",setup(t){const u=lt(),n=$(!1),o=$(""),a=$([]);async function r(){const d=await M.Loggin({password:o.value});d!==void 0&&(d.IsValid?(M.setToken(d.Token),M.showMessage("Bienvenue !"),u.push({path:"/camps"})):a.value=["Clé de connection incorrecte."])}return(d,i)=>(f(),Q(le,null,[e(ft,{title:"Connection au backoffice","hide-menu":""}),e(Ol,{class:"fill-height"},{default:l(()=>[e(Y,{class:"mx-auto",width:"400px"},{default:l(()=>[e(W,null,{default:l(()=>[e(re,{label:"Clé de connection",modelValue:o.value,"onUpdate:modelValue":i[1]||(i[1]=s=>o.value=s),"error-messages":a.value,type:n.value?void 0:"password",name:"password"},{"append-inner":l(()=>[e(B,{class:"ml-2",size:"small",icon:n.value?"mdi-eye":"mdi-eye-off",flat:"",onClick:i[0]||(i[0]=s=>n.value=!n.value)},null,8,["icon"])]),_:1},8,["modelValue","error-messages","type"])]),_:1}),e(ie,null,{default:l(()=>[e(ne),e(B,{disabled:!o.value.length,onClick:r},{default:l(()=>i[2]||(i[2]=[b("Se connecter")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})],64))}}),Ye=j({__name:"IntField",props:_e({label:{},hint:{},min:{},max:{},disabled:{type:Boolean},suffix:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const u=t,n=Ve(t,"modelValue");return(o,a)=>(f(),w(re,{label:u.label,density:"compact",variant:"outlined",type:"number",min:u.min===void 0?1:u.min,max:u.max,modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=r=>n.value=r),modelModifiers:{number:!0},"hide-details":!o.hint,hint:u.hint,disabled:u.disabled,suffix:u.suffix},null,8,["label","min","max","modelValue","hide-details","hint","disabled","suffix"]))}}),We=j({__name:"MontantField",props:_e({label:{},hideDetails:{type:Boolean},readonlyCurrency:{type:Boolean},disabled:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const u=t,n=Ve(t,"modelValue"),o=Ze(Vt);return(a,r)=>(f(),w(N,{"no-gutters":""},{default:l(()=>[e(y,{cols:u.readonlyCurrency?12:6},{default:l(()=>[e(re,{class:"mr-1",variant:"outlined",density:"compact","hide-details":u.hideDetails,label:u.label,type:"number",disabled:u.disabled,"model-value":n.value.Cent/100,"onUpdate:modelValue":r[0]||(r[0]=d=>n.value={Cent:h(nl)(Number(d)*100),Currency:n.value.Currency}),suffix:u.readonlyCurrency?h(Vt)[n.value.Currency]:void 0},null,8,["hide-details","label","disabled","model-value","suffix"])]),_:1},8,["cols"]),u.readonlyCurrency?K("",!0):(f(),w(y,{key:0,cols:"6"},{default:l(()=>[e(Ae,{label:"Monnaie",variant:"outlined",density:"compact",disabled:u.disabled,items:h(o),"model-value":n.value.Currency,"hide-details":u.hideDetails,"onUpdate:modelValue":r[1]||(r[1]=d=>n.value={Cent:n.value.Cent,Currency:d})},null,8,["disabled","items","model-value","hide-details"])]),_:1}))]),_:1}))}}),Cl=ve({active:{type:[String,Array],default:void 0},disabled:{type:[Boolean,String,Array],default:!1},nextIcon:{type:we,default:"$next"},prevIcon:{type:we,default:"$prev"},modeIcon:{type:we,default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),Kt=ye()({name:"VDatePickerControls",props:Cl(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(t,u){let{emit:n}=u;const o=T(()=>Array.isArray(t.disabled)?t.disabled.includes("text"):!!t.disabled),a=T(()=>Array.isArray(t.disabled)?t.disabled.includes("mode"):!!t.disabled),r=T(()=>Array.isArray(t.disabled)?t.disabled.includes("prev"):!!t.disabled),d=T(()=>Array.isArray(t.disabled)?t.disabled.includes("next"):!!t.disabled);function i(){n("click:prev")}function s(){n("click:next")}function c(){n("click:year")}function m(){n("click:month")}return ke(()=>e("div",{class:["v-date-picker-controls"]},[e(B,{class:"v-date-picker-controls__month-btn",disabled:o.value,text:t.text,variant:"text",rounded:!0,onClick:m},null),e(B,{key:"mode-btn",class:"v-date-picker-controls__mode-btn",disabled:a.value,density:"comfortable",icon:t.modeIcon,variant:"text",onClick:c},null),e(ne,{key:"mode-spacer"},null),e("div",{key:"month-buttons",class:"v-date-picker-controls__month"},[e(B,{disabled:r.value,icon:t.prevIcon,variant:"text",onClick:i},null),e(B,{disabled:d.value,icon:t.nextIcon,variant:"text",onClick:s},null)])])),{}}}),un=ve({appendIcon:we,color:String,header:String,transition:String,onClick:Bl()},"VDatePickerHeader"),Jt=ye()({name:"VDatePickerHeader",props:un(),emits:{click:()=>!0,"click:append":()=>!0},setup(t,u){let{emit:n,slots:o}=u;const{backgroundColorClasses:a,backgroundColorStyles:r}=ze(t,"color");function d(){n("click")}function i(){n("click:append")}return ke(()=>{const s=!!(o.default||t.header),c=!!(o.append||t.appendIcon);return e("div",{class:["v-date-picker-header",{"v-date-picker-header--clickable":!!t.onClick},a.value],style:r.value,onClick:d},[o.prepend&&e("div",{key:"prepend",class:"v-date-picker-header__prepend"},[o.prepend()]),s&&e(Dt,{key:"content",name:t.transition},{default:()=>{var m;return[e("div",{key:t.header,class:"v-date-picker-header__content"},[((m=o.default)==null?void 0:m.call(o))??t.header])]}}),c&&e("div",{class:"v-date-picker-header__append"},[o.append?e(He,{key:"append-defaults",disabled:!t.appendIcon,defaults:{VBtn:{icon:t.appendIcon,variant:"text"}}},{default:()=>{var m;return[(m=o.append)==null?void 0:m.call(o)]}}):e(B,{key:"append-btn",icon:t.appendIcon,variant:"text",onClick:i},null)])])}),{}}}),sn=ve({allowedDates:[Array,Function],disabled:Boolean,displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String],weekdays:{type:Array,default:()=>[0,1,2,3,4,5,6]},weeksInMonth:{type:String,default:"dynamic"},firstDayOfWeek:[Number,String]},"calendar");function on(t){const u=Qe(),n=Ie(t,"modelValue",[],v=>ut(v)),o=T(()=>t.displayValue?u.date(t.displayValue):n.value.length>0?u.date(n.value[0]):t.min?u.date(t.min):Array.isArray(t.allowedDates)?u.date(t.allowedDates[0]):u.date()),a=Ie(t,"year",void 0,v=>{const x=v!=null?Number(v):u.getYear(o.value);return u.startOfYear(u.setYear(u.date(),x))},v=>u.getYear(v)),r=Ie(t,"month",void 0,v=>{const x=v!=null?Number(v):u.getMonth(o.value),I=u.setYear(u.startOfMonth(u.date()),u.getYear(a.value));return u.setMonth(I,x)},v=>u.getMonth(v)),d=T(()=>t.firstDayOfWeek??t.weekdays[0]),i=T(()=>{const v=Number(t.firstDayOfWeek??0);return t.weekdays.map(x=>(x+v)%7)}),s=T(()=>{const v=u.getWeekArray(r.value,d.value),x=v.flat(),I=6*7;if(t.weeksInMonth==="static"&&x.length<I){const A=x[x.length-1];let P=[];for(let _=1;_<=I-x.length;_++)P.push(u.addDays(A,_)),_%7===0&&(v.push(P),P=[])}return v});function c(v,x){return v.filter(I=>i.value.includes(u.toJsDate(I).getDay())).map((I,A)=>{const P=u.toISO(I),_=!u.isSameMonth(I,r.value),H=u.isSameDay(I,u.startOfMonth(r.value)),q=u.isSameDay(I,u.endOfMonth(r.value)),D=u.isSameDay(I,r.value);return{date:I,isoDate:P,formatted:u.format(I,"keyboardDate"),year:u.getYear(I),month:u.getMonth(I),isDisabled:U(I),isWeekStart:A%7===0,isWeekEnd:A%7===6,isToday:u.isSameDay(I,x),isAdjacent:_,isHidden:_&&!t.showAdjacentMonths,isStart:H,isSelected:n.value.some(ue=>u.isSameDay(I,ue)),isEnd:q,isSame:D,localized:u.format(I,"dayOfMonth")}})}const m=T(()=>{const v=u.startOfWeek(o.value,t.firstDayOfWeek),x=[];for(let A=0;A<=6;A++)x.push(u.addDays(v,A));const I=u.date();return c(x,I)}),g=T(()=>{const v=s.value.flat(),x=u.date();return c(v,x)}),p=T(()=>s.value.map(v=>v.length?Nl(u,v[0]):null));function U(v){if(t.disabled)return!0;const x=u.date(v);return t.min&&u.isAfter(u.date(t.min),x)||t.max&&u.isAfter(x,u.date(t.max))?!0:Array.isArray(t.allowedDates)&&t.allowedDates.length>0?!t.allowedDates.some(I=>u.isSameDay(u.date(I),x)):typeof t.allowedDates=="function"?!t.allowedDates(x):!1}return{displayValue:o,daysInMonth:g,daysInWeek:m,genDays:c,model:n,weeksInMonth:s,weekDays:i,weekNumbers:p}}const xl=ve({color:String,hideWeekdays:Boolean,multiple:[Boolean,Number,String],showWeek:Boolean,transition:{type:String,default:"picker-transition"},reverseTransition:{type:String,default:"picker-reverse-transition"},...sn()},"VDatePickerMonth"),Gt=ye()({name:"VDatePickerMonth",props:xl(),emits:{"update:modelValue":t=>!0,"update:month":t=>!0,"update:year":t=>!0},setup(t,u){let{emit:n,slots:o}=u;const a=$(),{daysInMonth:r,model:d,weekNumbers:i}=on(t),s=Qe(),c=Fe(),m=Fe(),g=Fe(!1),p=T(()=>g.value?t.reverseTransition:t.transition);t.multiple==="range"&&d.value.length>0&&(c.value=d.value[0],d.value.length>1&&(m.value=d.value[d.value.length-1]));const U=T(()=>{const A=["number","string"].includes(typeof t.multiple)?Number(t.multiple):1/0;return d.value.length>=A});De(r,(A,P)=>{P&&(g.value=s.isBefore(A[0].date,P[0].date))});function v(A){const P=s.startOfDay(A);if(d.value.length===0?c.value=void 0:d.value.length===1&&(c.value=d.value[0],m.value=void 0),!c.value)c.value=P,d.value=[c.value];else if(m.value)c.value=A,m.value=void 0,d.value=[c.value];else{if(s.isSameDay(P,c.value)){c.value=void 0,d.value=[];return}else s.isBefore(P,c.value)?(m.value=s.endOfDay(c.value),c.value=P):m.value=s.endOfDay(P);const _=s.getDiff(m.value,c.value,"days"),H=[c.value];for(let q=1;q<_;q++){const D=s.addDays(c.value,q);H.push(D)}H.push(m.value),d.value=H}}function x(A){const P=d.value.findIndex(_=>s.isSameDay(_,A));if(P===-1)d.value=[...d.value,A];else{const _=[...d.value];_.splice(P,1),d.value=_}}function I(A){t.multiple==="range"?v(A):t.multiple?x(A):d.value=[A]}return()=>e("div",{class:"v-date-picker-month"},[t.showWeek&&e("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!t.hideWeekdays&&e("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[b(" ")]),i.value.map(A=>e("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[A]))]),e(Dt,{name:p.value},{default:()=>{var A;return[e("div",{ref:a,key:(A=r.value[0].date)==null?void 0:A.toString(),class:"v-date-picker-month__days"},[!t.hideWeekdays&&s.getWeekdays(t.firstDayOfWeek).map(P=>e("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[P])),r.value.map((P,_)=>{const H={props:{onClick:()=>I(P.date)},item:P,i:_};return U.value&&!P.isSelected&&(P.isDisabled=!0),e("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":P.isAdjacent,"v-date-picker-month__day--hide-adjacent":P.isHidden,"v-date-picker-month__day--selected":P.isSelected,"v-date-picker-month__day--week-end":P.isWeekEnd,"v-date-picker-month__day--week-start":P.isWeekStart}],"data-v-date":P.isDisabled?void 0:P.isoDate},[(t.showAdjacentMonths||!P.isAdjacent)&&e(He,{defaults:{VBtn:{class:"v-date-picker-month__day-btn",color:(P.isSelected||P.isToday)&&!P.isDisabled?t.color:void 0,disabled:P.isDisabled,icon:!0,ripple:!1,text:P.localized,variant:P.isDisabled?P.isToday?"outlined":"text":P.isToday&&!P.isSelected?"outlined":"flat",onClick:()=>I(P.date)}}},{default:()=>{var q;return[((q=o.day)==null?void 0:q.call(o,H))??e(B,H.props,null)]}})])})])]}})])}}),Pl=ve({color:String,height:[String,Number],min:null,max:null,modelValue:Number,year:Number},"VDatePickerMonths"),Xt=ye()({name:"VDatePickerMonths",props:Pl(),emits:{"update:modelValue":t=>!0},setup(t,u){let{emit:n,slots:o}=u;const a=Qe(),r=Ie(t,"modelValue"),d=T(()=>{let i=a.startOfYear(a.date());return t.year&&(i=a.setYear(i,t.year)),$e(12).map(s=>{const c=a.format(i,"monthShort"),m=!!(t.min&&a.isAfter(a.startOfMonth(a.date(t.min)),i)||t.max&&a.isAfter(i,a.startOfMonth(a.date(t.max))));return i=a.getNextMonth(i),{isDisabled:m,text:c,value:s}})});return il(()=>{r.value=r.value??a.getMonth(a.date())}),ke(()=>e("div",{class:"v-date-picker-months",style:{height:qe(t.height)}},[e("div",{class:"v-date-picker-months__content"},[d.value.map((i,s)=>{var g;const c={active:r.value===s,color:r.value===s?t.color:void 0,disabled:i.isDisabled,rounded:!0,text:i.text,variant:r.value===i.value?"flat":"text",onClick:()=>m(s)};function m(p){if(r.value===p){n("update:modelValue",r.value);return}r.value=p}return((g=o.month)==null?void 0:g.call(o,{month:i,i:s,props:c}))??e(B,Z({key:"month"},c),null)})])])),{}}}),Dl=ve({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),Zt=ye()({name:"VDatePickerYears",props:Dl(),emits:{"update:modelValue":t=>!0},setup(t,u){let{emit:n,slots:o}=u;const a=Qe(),r=Ie(t,"modelValue"),d=T(()=>{const s=a.getYear(a.date());let c=s-100,m=s+52;t.min&&(c=a.getYear(a.date(t.min))),t.max&&(m=a.getYear(a.date(t.max)));let g=a.startOfYear(a.date());return g=a.setYear(g,c),$e(m-c+1,c).map(p=>{const U=a.format(g,"year");return g=a.setYear(g,a.getYear(g)+1),{text:U,value:p}})});il(()=>{r.value=r.value??a.getYear(a.date())});const i=Fl();return Oe(async()=>{var s;await kt(),(s=i.el)==null||s.scrollIntoView({block:"center"})}),ke(()=>e("div",{class:"v-date-picker-years",style:{height:qe(t.height)}},[e("div",{class:"v-date-picker-years__content"},[d.value.map((s,c)=>{var g;const m={ref:r.value===s.value?i:void 0,active:r.value===s.value,color:r.value===s.value?t.color:void 0,rounded:!0,text:s.text,variant:r.value===s.value?"flat":"text",onClick:()=>{if(r.value===s.value){n("update:modelValue",r.value);return}r.value=s.value}};return((g=o.year)==null?void 0:g.call(o,{year:s,i:c,props:m}))??e(B,Z({key:"month"},m),null)})])])),{}}}),rn=ql("v-picker-title"),At=ve({bgColor:String,landscape:Boolean,title:String,hideHeader:Boolean,...Xa()},"VPicker"),rt=ye()({name:"VPicker",props:At(),setup(t,u){let{slots:n}=u;const{backgroundColorClasses:o,backgroundColorStyles:a}=ze(oe(t,"color"));return ke(()=>{const r=Wt.filterProps(t),d=!!(t.title||n.title);return e(Wt,Z(r,{color:t.bgColor,class:["v-picker",{"v-picker--landscape":t.landscape,"v-picker--with-actions":!!n.actions},t.class],style:t.style}),{default:()=>{var i;return[!t.hideHeader&&e("div",{key:"header",class:[o.value],style:[a.value]},[d&&e(rn,{key:"picker-title"},{default:()=>{var s;return[((s=n.title)==null?void 0:s.call(n))??t.title]}}),n.header&&e("div",{class:"v-picker__header"},[n.header()])]),e("div",{class:"v-picker__body"},[(i=n.default)==null?void 0:i.call(n)]),n.actions&&e(He,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[e("div",{class:"v-picker__actions"},[n.actions()])]})]}})}),{}}}),dn=ve({header:{type:String,default:"$vuetify.datePicker.header"},...Cl(),...xl({weeksInMonth:"static"}),...je(Pl(),["modelValue"]),...je(Dl(),["modelValue"]),...At({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),cn=ye()({name:"VDatePicker",props:dn(),emits:{"update:modelValue":t=>!0,"update:month":t=>!0,"update:year":t=>!0,"update:viewMode":t=>!0},setup(t,u){let{emit:n,slots:o}=u;const a=Qe(),{t:r}=et(),d=Ie(t,"modelValue",void 0,O=>ut(O),O=>t.multiple?O:O[0]),i=Ie(t,"viewMode"),s=T(()=>{var k;const O=a.date((k=d.value)==null?void 0:k[0]);return O&&a.isValid(O)?O:a.date()}),c=$(Number(t.month??a.getMonth(a.startOfMonth(s.value)))),m=$(Number(t.year??a.getYear(a.startOfYear(a.setMonth(s.value,c.value))))),g=Fe(!1),p=T(()=>t.multiple&&d.value.length>1?r("$vuetify.datePicker.itemsSelected",d.value.length):d.value[0]&&a.isValid(d.value[0])?a.format(a.date(d.value[0]),"normalDateWithWeekday"):r(t.header)),U=T(()=>{let O=a.date();return O=a.setDate(O,1),O=a.setMonth(O,c.value),O=a.setYear(O,m.value),a.format(O,"monthAndYear")}),v=T(()=>`date-picker-header${g.value?"-reverse":""}-transition`),x=T(()=>{const O=a.date(t.min);return t.min&&a.isValid(O)?O:null}),I=T(()=>{const O=a.date(t.max);return t.max&&a.isValid(O)?O:null}),A=T(()=>{if(t.disabled)return!0;const O=[];if(i.value!=="month")O.push("prev","next");else{let k=a.date();if(k=a.setYear(k,m.value),k=a.setMonth(k,c.value),x.value){const J=a.addDays(a.startOfMonth(k),-1);a.isAfter(x.value,J)&&O.push("prev")}if(I.value){const J=a.addDays(a.endOfMonth(k),1);a.isAfter(J,I.value)&&O.push("next")}}return O});function P(){c.value<11?c.value++:(m.value++,c.value=0,F(m.value)),ue(c.value)}function _(){c.value>0?c.value--:(m.value--,c.value=11,F(m.value)),ue(c.value)}function H(){i.value="month"}function q(){i.value=i.value==="months"?"month":"months"}function D(){i.value=i.value==="year"?"month":"year"}function ue(O){i.value==="months"&&q(),n("update:month",O)}function F(O){i.value==="year"&&D(),n("update:year",O)}return De(d,(O,k)=>{const J=ut(k),V=ut(O);if(!V.length)return;const S=a.date(J[J.length-1]),G=a.date(V[V.length-1]),E=a.getMonth(G),ee=a.getYear(G);E!==c.value&&(c.value=E,ue(c.value)),ee!==m.value&&(m.value=ee,F(m.value)),g.value=a.isBefore(S,G)}),ke(()=>{const O=rt.filterProps(t),k=Kt.filterProps(t),J=Jt.filterProps(t),V=Gt.filterProps(t),S=je(Xt.filterProps(t),["modelValue"]),G=je(Zt.filterProps(t),["modelValue"]),E={header:p.value,transition:v.value};return e(rt,Z(O,{class:["v-date-picker",`v-date-picker--${i.value}`,{"v-date-picker--show-week":t.showWeek},t.class],style:t.style}),{title:()=>{var ee;return((ee=o.title)==null?void 0:ee.call(o))??e("div",{class:"v-date-picker__title"},[r(t.title)])},header:()=>o.header?e(He,{defaults:{VDatePickerHeader:{...E}}},{default:()=>{var ee;return[(ee=o.header)==null?void 0:ee.call(o,E)]}}):e(Jt,Z({key:"header"},J,E,{onClick:i.value!=="month"?H:void 0}),{...o,default:void 0}),default:()=>e(le,null,[e(Kt,Z(k,{disabled:A.value,text:U.value,"onClick:next":P,"onClick:prev":_,"onClick:month":q,"onClick:year":D}),null),e(zl,{hideOnLeave:!0},{default:()=>[i.value==="months"?e(Xt,Z({key:"date-picker-months"},S,{modelValue:c.value,"onUpdate:modelValue":[ee=>c.value=ee,ue],min:x.value,max:I.value,year:m.value}),null):i.value==="year"?e(Zt,Z({key:"date-picker-years"},G,{modelValue:m.value,"onUpdate:modelValue":[ee=>m.value=ee,F],min:x.value,max:I.value}),null):e(Gt,Z({key:"date-picker-month"},V,{modelValue:d.value,"onUpdate:modelValue":ee=>d.value=ee,month:c.value,"onUpdate:month":[ee=>c.value=ee,ue],year:m.value,"onUpdate:year":[ee=>m.value=ee,F],min:x.value,max:I.value}),null)]})]),actions:o.actions})}),{}}}),mn=j({__name:"DateField",props:_e({label:{},hideDetails:{type:Boolean},readonly:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const u=t,n=Ve(t,"modelValue"),o=Qe();function a(d){r.value=!1,n.value=ul(d)}const r=$(!1);return(d,i)=>u.readonly?(f(),w(re,{key:0,class:"center-text",variant:"outlined",density:"compact","hide-details":u.hideDetails,label:u.label,"model-value":h(o).parseISO(n.value).toLocaleDateString(),readonly:""},null,8,["hide-details","label","model-value"])):(f(),w(Se,{key:1,"close-on-content-click":!1,modelValue:r.value,"onUpdate:modelValue":i[1]||(i[1]=s=>r.value=s)},{activator:l(({props:s})=>[e(re,Z({class:"center-text"},s,{variant:"outlined",density:"compact","hide-details":u.hideDetails,label:u.label,"model-value":h(o).parseISO(n.value).toLocaleDateString()}),null,16,["hide-details","label","model-value"])]),default:l(()=>[e(cn,{"model-value":h(o).parseISO(n.value),"onUpdate:modelValue":i[0]||(i[0]=s=>a(s))},null,8,["model-value"])]),_:1},8,["modelValue"]))}}),wl=$t(mn,[["__scopeId","data-v-1e184428"]]),ht=j({__name:"BoolField",props:_e({label:{},hideDetails:{type:Boolean},readonly:{type:Boolean},density:{},persistentHint:{type:Boolean},hint:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const u=t,n=Ve(t,"modelValue");return(o,a)=>(f(),w(at,{label:u.label,"model-value":n.value,"onUpdate:modelValue":a[0]||(a[0]=r=>n.value=r||!1),"hide-details":u.hideDetails,readonly:u.readonly,density:u.density,"persistent-hint":u.persistentHint,hint:u.hint},null,8,["label","model-value","hide-details","readonly","density","persistent-hint","hint"]))}}),vn=j({__name:"OptionStatut",props:_e({camp:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const u=t,n=Ve(t,"modelValue");function o(){var c;const d=(c=n.value)!=null&&c.length?n.value.map(m=>m.Id):[0],s={Id:Math.max(...d)+1,Label:"",Description:"",Prix:u.camp.Prix.Cent};n.value=(n.value||[]).concat(s),a.value=s}const a=$(null);function r(d){n.value=(n.value||[]).filter(i=>i.Id!=d.Id)}return(d,i)=>{const s=We;return f(),w(Y,{subtitle:"Le prix dépend du statut du participant, à choisir parmi la liste ci-dessous."},{append:l(()=>[e(B,{icon:"",size:"x-small",onClick:o},{default:l(()=>[e(pe,{color:"green"},{default:l(()=>i[4]||(i[4]=[b("mdi-plus")])),_:1})]),_:1})]),default:l(()=>[a.value!=null?(f(),w(ae,{key:0,"model-value":a.value!=null,"onUpdate:modelValue":i[3]||(i[3]=c=>a.value=null),"max-width":"500px"},{default:l(()=>[e(Y,{title:"Modifier le statut"},{default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(y,{cols:"12"},{default:l(()=>[e(re,{autofocus:"",label:"Statut",modelValue:a.value.Label,"onUpdate:modelValue":i[0]||(i[0]=c=>a.value.Label=c),density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(y,{cols:"12"},{default:l(()=>[e(re,{label:"Description",modelValue:a.value.Description,"onUpdate:modelValue":i[1]||(i[1]=c=>a.value.Description=c),density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),e(y,{cols:"12"},{default:l(()=>[e(s,{"model-value":{Cent:a.value.Prix,Currency:u.camp.Prix.Currency},"onUpdate:modelValue":i[2]||(i[2]=c=>a.value.Prix=c.Cent),label:"Prix","readonly-currency":""},null,8,["model-value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])):K("",!0),e(W,{class:"py-0"},{default:l(()=>[e(he,null,{default:l(()=>{var c;return[(c=n.value)!=null&&c.length?K("",!0):(f(),w(te,{key:0},{default:l(()=>i[5]||(i[5]=[z("i",null,"Aucun statut n'est encore défini.",-1)])),_:1})),(f(!0),Q(le,null,fe(n.value,m=>(f(),w(te,{title:m.Label,subtitle:m.Description,onClick:g=>a.value=m},{append:l(()=>[e(N,null,{default:l(()=>[e(y,{"align-self":"center"},{default:l(()=>[e(Te,null,{default:l(()=>[b(R(h(Ce).montant({Cent:m.Prix,Currency:d.camp.Prix.Currency})),1)]),_:2},1024)]),_:2},1024),e(y,{"align-self":"center",cols:"auto"},{default:l(()=>[e(B,{icon:"",size:"x-small",class:"my-1",onClick:st(g=>r(m),["stop"])},{default:l(()=>[e(pe,{color:"red"},{default:l(()=>i[6]||(i[6]=[b("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["title","subtitle","onClick"]))),256))]}),_:1})]),_:1})]),_:1})}}}),fn=j({__name:"OptionJournee",props:_e({camp:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const u=t,n=Ve(t,"modelValue");De(()=>n.value,o,{immediate:!0});function o(){var d;const r=u.camp.Duree;((d=n.value)==null?void 0:d.length)!=r&&(n.value=Array.from({length:r}).map(i=>0))}function a(){const r=n.value,d=r[0];for(let i=0;i<r.length;i++)r[i]=d}return(r,d)=>{const i=We;return f(),w(Y,{subtitle:"Le prix est variable en fonction des jours de participation au camp."},{append:l(()=>[e(Le,{text:"Appliquer le prix du premier jour à tous."},{activator:l(({props:s})=>[e(B,Z(s,{icon:"mdi-arrow-expand",size:"x-small",disabled:!(n.value||[])[0],onClick:a}),null,16,["disabled"])]),_:1})]),default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[(f(!0),Q(le,null,fe(n.value,(s,c)=>(f(),w(y,{cols:"3"},{default:l(()=>[e(i,{label:`Jour ${c+1}`,"model-value":{Cent:s,Currency:u.camp.Prix.Currency},"onUpdate:modelValue":m=>n.value[c]=m.Cent,"readonly-currency":""},null,8,["label","model-value","onUpdate:modelValue"])]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})}}}),pn={key:0,class:"text-center"},yn=j({__name:"CampOptionsPrix",props:_e({camp:{}},{optionPrix:{required:!0},optionPrixModifiers:{},optionQf:{required:!0},optionQfModifiers:{}}),emits:["update:optionPrix","update:optionQf"],setup(t){const u=t,n=Ve(t,"optionPrix"),o=Ve(t,"optionQf"),a=T(()=>ge.isQuotientFamilialActive(o.value)),r=Ze(sl);return(d,i)=>{const s=Ye;return f(),w(Y,{title:"Options sur le prix",subtitle:"Permet de modifier le prix de base du séjour",width:"1000px"},{default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(y,{"align-self":"center"},{default:l(()=>[e(at,{"model-value":a.value,"onUpdate:modelValue":i[0]||(i[0]=c=>o.value[3]=c?100:0),"hide-details":"",label:"Prix au quotient familial"},null,8,["model-value"])]),_:1}),e(y,{"align-self":"center"},{default:l(()=>[e(s,{suffix:"%",min:0,max:100,disabled:!a.value,"hide-details":"","readonly-currency":"",label:"entre 1 et 359",modelValue:o.value[0],"onUpdate:modelValue":i[1]||(i[1]=c=>o.value[0]=c)},null,8,["disabled","modelValue"])]),_:1}),e(y,{"align-self":"center"},{default:l(()=>[e(s,{suffix:"%",min:0,max:100,disabled:!a.value,"hide-details":"","readonly-currency":"",label:"entre 360 et 564",modelValue:o.value[1],"onUpdate:modelValue":i[2]||(i[2]=c=>o.value[1]=c)},null,8,["disabled","modelValue"])]),_:1}),e(y,{"align-self":"center"},{default:l(()=>[e(s,{suffix:"%",min:0,max:100,disabled:!a.value,"hide-details":"","readonly-currency":"",label:"entre 565 et 714",modelValue:o.value[2],"onUpdate:modelValue":i[3]||(i[3]=c=>o.value[2]=c)},null,8,["disabled","modelValue"])]),_:1}),e(y,{"align-self":"center"},{default:l(()=>[e(s,{suffix:"%",min:0,max:100,disabled:!0,"hide-details":"","readonly-currency":"",label:"plus de 715",modelValue:o.value[3],"onUpdate:modelValue":i[4]||(i[4]=c=>o.value[3]=c)},null,8,["modelValue"])]),_:1})]),_:1}),e(ce,{thickness:"1",class:"my-2"}),e(N,{class:"my-2"},{default:l(()=>[e(y,{"align-self":"center",cols:"4"},{default:l(()=>[e(Ae,{variant:"outlined",density:"comfortable","hide-details":"",items:h(r),label:"Option sur le prix",modelValue:n.value.Active,"onUpdate:modelValue":i[5]||(i[5]=c=>n.value.Active=c)},null,8,["items","modelValue"])]),_:1}),e(y,{"align-self":"center"},{default:l(()=>[n.value.Active==h(xe).NoOption?(f(),Q("div",pn,i[8]||(i[8]=[z("i",null,"Aucune modification sur le prix de base.",-1)]))):n.value.Active==h(xe).PrixStatut?(f(),w(vn,{key:1,camp:u.camp,modelValue:n.value.Statuts,"onUpdate:modelValue":i[6]||(i[6]=c=>n.value.Statuts=c)},null,8,["camp","modelValue"])):n.value.Active==h(xe).PrixJour?(f(),w(fn,{key:2,camp:u.camp,modelValue:n.value.Jours,"onUpdate:modelValue":i[7]||(i[7]=c=>n.value.Jours=c)},null,8,["camp","modelValue"])):K("",!0)]),_:1})]),_:1})]),_:1})]),_:1})}}}),bn={key:0,class:"mx-1"},gn={key:1,class:"mx-1"},Vn={key:2,class:"mx-1"},kn=j({__name:"CampEdit",props:{camp:{}},emits:["save"],setup(t,{emit:u}){const n=t,o=u,a=$(Pe(n.camp)),r=T(()=>{var d,i;return new Date(a.value.DateDebut).getFullYear()>=2020&&a.value.Places>=1&&a.value.Nom!=""&&a.value.AgeMax>=a.value.AgeMin&&a.value.OptionQuotientFamilial.every(s=>0<=s&&s<=100)&&!(a.value.OptionPrix.Active==xe.PrixStatut&&!((d=a.value.OptionPrix.Statuts)!=null&&d.length))&&!(a.value.OptionPrix.Active==xe.PrixJour&&((i=a.value.OptionPrix.Jours)==null?void 0:i.length)!=a.value.Duree)});return(d,i)=>{const s=ht,c=wl,m=Ye,g=We;return f(),w(Y,{title:"Editer le camp"},{default:l(()=>[e(W,null,{default:l(()=>[e(ol,null,{default:l(()=>[e(N,null,{default:l(()=>[e(y,null,{default:l(()=>[e(re,{autofocus:"","hide-details":"",label:"Nom",density:"compact",variant:"outlined",modelValue:a.value.Nom,"onUpdate:modelValue":i[0]||(i[0]=p=>a.value.Nom=p)},null,8,["modelValue"])]),_:1}),e(y,null,{default:l(()=>[e(re,{"hide-details":"",label:"Lieu",density:"compact",variant:"outlined",modelValue:a.value.Lieu,"onUpdate:modelValue":i[1]||(i[1]=p=>a.value.Lieu=p)},null,8,["modelValue"])]),_:1}),e(y,null,{default:l(()=>[e(re,{"hide-details":"",label:"Numéro d'agrément",density:"compact",variant:"outlined",modelValue:a.value.Agrement,"onUpdate:modelValue":i[2]||(i[2]=p=>a.value.Agrement=p)},null,8,["modelValue"])]),_:1}),e(y,null,{default:l(()=>[e(s,{label:"Ouvert aux inscriptions",modelValue:a.value.Ouvert,"onUpdate:modelValue":i[3]||(i[3]=p=>a.value.Ouvert=p),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(y,{"align-self":"center",cols:"2"},{default:l(()=>[e(c,{modelValue:a.value.DateDebut,"onUpdate:modelValue":i[4]||(i[4]=p=>a.value.DateDebut=p),label:"Date de début","hide-details":""},null,8,["modelValue"])]),_:1}),e(y,{"align-self":"center",cols:"2"},{default:l(()=>[e(m,{label:"Durée (en jours)",modelValue:a.value.Duree,"onUpdate:modelValue":i[5]||(i[5]=p=>a.value.Duree=p),"hide-details":""},null,8,["modelValue"])]),_:1}),e(y,{"align-self":"center",cols:"2"},{default:l(()=>[e(c,{"model-value":h(ge).dateFin(a.value),label:"Date de fin",readonly:"","hide-details":""},null,8,["model-value"])]),_:1}),e(y,{"align-self":"center",cols:"3"},{default:l(()=>[e(g,{label:"Prix",modelValue:a.value.Prix,"onUpdate:modelValue":i[6]||(i[6]=p=>a.value.Prix=p),"hide-details":""},null,8,["modelValue"])]),_:1}),e(y,{"align-self":"center",cols:"3",class:"text-center"},{default:l(()=>[e(Se,{"close-on-content-click":!1},{activator:l(({props:p})=>[e(Te,Z(p,{elevation:"1",label:""}),{default:l(()=>[!h(ge).isQuotientFamilialActive(a.value.OptionQuotientFamilial)&&a.value.OptionPrix.Active==h(xe).NoOption?(f(),Q("div",bn," Aucune option ")):K("",!0),h(ge).isQuotientFamilialActive(a.value.OptionQuotientFamilial)?(f(),Q("div",gn," Quotient familial ")):K("",!0),a.value.OptionPrix.Active!=h(xe).NoOption?(f(),Q("div",Vn,R(h(sl)[a.value.OptionPrix.Active]),1)):K("",!0)]),_:2},1040)]),default:l(()=>[e(yn,{camp:a.value,"option-prix":a.value.OptionPrix,"onUpdate:optionPrix":i[7]||(i[7]=p=>a.value.OptionPrix=p),"option-qf":a.value.OptionQuotientFamilial,"onUpdate:optionQf":i[8]||(i[8]=p=>a.value.OptionQuotientFamilial=p)},null,8,["camp","option-prix","option-qf"])]),_:1})]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(y,{"align-self":"center",cols:"2"},{default:l(()=>[e(m,{modelValue:a.value.Places,"onUpdate:modelValue":i[9]||(i[9]=p=>a.value.Places=p),label:"Nombre de places"},null,8,["modelValue"])]),_:1}),e(y,{"align-self":"center",cols:"2"},{default:l(()=>[e(m,{modelValue:a.value.AgeMin,"onUpdate:modelValue":i[10]||(i[10]=p=>a.value.AgeMin=p),label:"Âge minimum"},null,8,["modelValue"])]),_:1}),e(y,{"align-self":"center",cols:"2"},{default:l(()=>[e(m,{modelValue:a.value.AgeMax,"onUpdate:modelValue":i[11]||(i[11]=p=>a.value.AgeMax=p),label:"Âge maximum"},null,8,["modelValue"])]),_:1}),e(y,{cols:"6"},{default:l(()=>[e(s,{modelValue:a.value.NeedEquilibreGF,"onUpdate:modelValue":i[12]||(i[12]=p=>a.value.NeedEquilibreGF=p),label:"Equilibre G/F demandé",density:"compact","persistent-hint":"",hint:"Place un inscrit en liste d'attente en cas de déséquilibre Garçons/Filles"},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(y,null,{default:l(()=>[e(xt,{variant:"outlined",density:"compact",label:"Description",hint:"Ce texte est affiché sur le formulaire d'inscription.","persistent-hint":"",rows:"3",modelValue:a.value.Description,"onUpdate:modelValue":i[13]||(i[13]=p=>a.value.Description=p)},null,8,["modelValue"])]),_:1}),e(y,{cols:"2"}),e(y,{cols:"2"},{default:l(()=>[e(s,{label:"Navette",modelValue:a.value.Navette.Actif,"onUpdate:modelValue":i[14]||(i[14]=p=>a.value.Navette.Actif=p)},null,8,["modelValue"])]),_:1}),e(y,null,{default:l(()=>[e(xt,{variant:"outlined",density:"compact",label:"Navette",hint:"Ce texte est affiché sur l'espace personnel de suivi.","persistent-hint":"",rows:"3",disabled:!a.value.Navette.Actif,modelValue:a.value.Navette.Commentaire,"onUpdate:modelValue":i[15]||(i[15]=p=>a.value.Navette.Commentaire=p)},null,8,["disabled","modelValue"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(y,null,{default:l(()=>[e(re,{label:"Mot de passe",density:"compact",variant:"outlined",hint:"Mot de passe d'accès à la page Directeur","persistent-hint":"",modelValue:a.value.Password,"onUpdate:modelValue":i[16]||(i[16]=p=>a.value.Password=p)},null,8,["modelValue"])]),_:1}),e(y)]),_:1})]),_:1})]),_:1}),e(ie,null,{default:l(()=>[e(ne),e(B,{disabled:!r.value,onClick:i[17]||(i[17]=p=>o("save",a.value))},{default:l(()=>i[18]||(i[18]=[b("Enregistrer")])),_:1},8,["disabled"])]),_:1})]),_:1})}}}),_n=ve({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Zl(),...Xl()},"VSwitch"),Cn=ye()({name:"VSwitch",inheritAttrs:!1,props:_n(),emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:indeterminate":t=>!0},setup(t,u){let{attrs:n,slots:o}=u;const a=Ie(t,"indeterminate"),r=Ie(t,"modelValue"),{loaderClasses:d}=jl(t),{isFocused:i,focus:s,blur:c}=Hl(t),m=$(),g=Ql&&window.matchMedia("(forced-colors: active)").matches,p=T(()=>typeof t.loading=="string"&&t.loading!==""?t.loading:t.color),U=Yl(),v=T(()=>t.id||`switch-${U}`);function x(){a.value&&(a.value=!1)}function I(A){var P,_;A.stopPropagation(),A.preventDefault(),(_=(P=m.value)==null?void 0:P.input)==null||_.click()}return ke(()=>{const[A,P]=Wl(n),_=Nt.filterProps(t),H=Ft.filterProps(t);return e(Nt,Z({class:["v-switch",{"v-switch--flat":t.flat},{"v-switch--inset":t.inset},{"v-switch--indeterminate":a.value},d.value,t.class]},A,_,{modelValue:r.value,"onUpdate:modelValue":q=>r.value=q,id:v.value,focused:i.value,style:t.style}),{...o,default:q=>{let{id:D,messagesId:ue,isDisabled:F,isReadonly:O,isValid:k}=q;const J={model:r,isValid:k};return e(Ft,Z({ref:m},H,{modelValue:r.value,"onUpdate:modelValue":[V=>r.value=V,x],id:D.value,"aria-describedby":ue.value,type:"checkbox","aria-checked":a.value?"mixed":void 0,disabled:F.value,readonly:O.value,onFocus:s,onBlur:c},P),{...o,default:V=>{let{backgroundColorClasses:S,backgroundColorStyles:G}=V;return e("div",{class:["v-switch__track",g?void 0:S.value],style:G.value,onClick:I},[o["track-true"]&&e("div",{key:"prepend",class:"v-switch__track-true"},[o["track-true"](J)]),o["track-false"]&&e("div",{key:"append",class:"v-switch__track-false"},[o["track-false"](J)])])},input:V=>{let{inputNode:S,icon:G,backgroundColorClasses:E,backgroundColorStyles:ee}=V;return e(le,null,[S,e("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":G||t.loading},t.inset||g?void 0:E.value],style:t.inset?void 0:ee.value},[o.thumb?e(He,{defaults:{VIcon:{icon:G,size:"x-small"}}},{default:()=>[o.thumb({...J,icon:G})]}):e(Kl,null,{default:()=>[t.loading?e(Jl,{name:"v-switch",active:!0,color:k.value===!1?void 0:p.value},{default:se=>o.loader?o.loader(se):e(Gl,{active:se.isActive,color:se.color,indeterminate:!0,size:"16",width:"2"},null)}):G&&e(pe,{key:String(G),icon:G,size:"x-small"},null)]})])])}})}})}),{}}}),el=j({__name:"TauxSelect",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(t){Oe(r);const u=Ve(t,"modelValue"),n=$(null),o=T(()=>{const c=Array.from(a.value.values()).map(m=>({title:m.Label,value:m.Id}));return c.sort((m,g)=>m.title.localeCompare(g.title)),c}),a=$(new Map);async function r(){const c=await M.CampsGetTaux();c!==void 0&&(a.value=ea(c),u.value.Id>0&&(u.value=Pe(a.value.get(u.value.Id)),n.value=u.value.Id))}function d(c){c?(n.value==null&&(n.value=1),u.value=Pe(a.value.get(n.value))):(n.value=null,u.value.Id=0,u.value.Label="")}function i(c){u.value=Pe(a.value.get(c))}const s=T(()=>{if(u.value.Id>0)return null;const c=u.value.Label;return Array.from(a.value.values()).map(g=>g.Label).includes(c)?"Ce label est déjà utilisé.":null});return(c,m)=>(f(),Q(le,null,[e(N,null,{default:l(()=>[e(y,null,{default:l(()=>[e(Cn,{color:"primary",label:"Utiliser un taux existant","model-value":u.value.Id>0,"onUpdate:modelValue":d,"hide-details":""},null,8,["model-value"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(y,null,{default:l(()=>[e(Ae,{variant:"outlined",density:"compact","hide-details":"",label:"Taux",items:o.value,modelValue:n.value,"onUpdate:modelValue":[m[0]||(m[0]=g=>n.value=g),i],disabled:u.value.Id<=0},null,8,["items","modelValue","disabled"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(y,null,{default:l(()=>[e(re,{variant:"outlined",density:"compact",label:"Label",modelValue:u.value.Label,"onUpdate:modelValue":m[1]||(m[1]=g=>u.value.Label=g),disabled:u.value.Id>0,"error-messages":s.value},null,8,["modelValue","disabled","error-messages"])]),_:1}),e(y,null,{default:l(()=>[e(re,{label:`Valeur d'un ${h(Vt)[h(ta).FrancsSuisse]}`,density:"compact",variant:"outlined",type:"number",min:"0.001",suffix:"€",hint:"Valeur en € d'une unité de la monnaie.","model-value":u.value.FrancsSuisse/1e3,"onUpdate:modelValue":m[2]||(m[2]=g=>u.value.FrancsSuisse=h(nl)(Number(g)*1e3)),disabled:u.value.Id>0},null,8,["label","model-value","disabled"])]),_:1})]),_:1})],64))}}),xn=j({__name:"CampStats",props:{stats:{}},setup(t){const u=t;function n(o,a){return`(${(a==0?0:100*o/a).toFixed(0)} %)`}return(o,a)=>(f(),w(Y,{title:"Statistiques"},{default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(y,{cols:"5"},{default:l(()=>[b(" Demandes d'inscriptions : "+R(u.stats.Inscriptions),1)]),_:1}),e(y,{class:"text-right"},{default:l(()=>[b(" Dont Filles : "+R(u.stats.InscriptionsFilles)+" "+R(n(u.stats.InscriptionsFilles,u.stats.Inscriptions))+", Suisses : "+R(u.stats.InscriptionsSuisses)+" "+R(n(u.stats.InscriptionsSuisses,u.stats.Inscriptions)),1)]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(y,{cols:"4"},{default:l(()=>[b(" Confirmées : "+R(u.stats.Valides)+" "+R(n(u.stats.Valides,u.stats.Inscriptions)),1)]),_:1}),e(y,{class:"text-right"},{default:l(()=>[b(" Dont Filles : "+R(u.stats.ValidesFilles)+" "+R(n(u.stats.ValidesFilles,u.stats.Valides))+" , Suisses : "+R(u.stats.ValidesSuisses)+" "+R(n(u.stats.ValidesSuisses,u.stats.Valides)),1)]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(y,null,{default:l(()=>[b(" A statuer : "+R(u.stats.AStatuer)+" "+R(n(u.stats.AStatuer,u.stats.Inscriptions)),1)]),_:1}),e(y,{cols:"5",class:"text-center"},{default:l(()=>[b(" Demandes d'exception : "+R(u.stats.Exceptions)+" "+R(n(u.stats.Exceptions,u.stats.Inscriptions)),1)]),_:1}),e(y,{class:"text-right"},{default:l(()=>[b(" Refus : "+R(u.stats.Refus)+" "+R(n(u.stats.Refus,u.stats.Inscriptions)),1)]),_:1})]),_:1})]),_:1})]),_:1}))}}),Pn={key:0},Dn=j({__name:"CampHeaderRow",props:{camp:{}},emits:["click","edit","edit-taux","delete"],setup(t,{emit:u}){const n=t,o=u,a=T(()=>n.camp.Stats.Inscriptions-n.camp.Stats.Valides),r=$(!1),d=T(()=>{switch(new Date(n.camp.Camp.Camp.DateDebut).getUTCMonth()+1){case 7:case 8:return"rgb(45, 185, 187)";case 9:case 10:case 11:return"rgb(190, 150, 60)";case 12:case 1:case 2:case 3:return"rgb(240, 240, 240)";case 4:case 5:case 6:default:return"rgb(190, 228, 100)"}});return(i,s)=>(f(),Q(le,null,[e(ae,{modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=c=>r.value=c),"max-width":"600"},{default:l(()=>[e(Y,{title:"Confirmer la suppression"},{default:l(()=>[e(W,null,{default:l(()=>[s[6]||(s[6]=b(" Etes vous certain de supprimer le séjour ")),z("b",null,R(h(ge).label(n.camp.Camp.Camp)),1),s[7]||(s[7]=b(" ? ")),s[8]||(s[8]=z("br",null,null,-1)),s[9]||(s[9]=z("br",null,null,-1)),s[10]||(s[10]=b(" Les éventuels ")),s[11]||(s[11]=z("i",null,"équipiers",-1)),s[12]||(s[12]=b(" déclarés sur ce séjour seront aussi supprimés. ")),s[13]||(s[13]=z("br",null,null,-1)),s[14]||(s[14]=z("br",null,null,-1)),s[15]||(s[15]=b(" Attention, cette opération est irréversible. "))]),_:1}),e(ie,null,{default:l(()=>[e(ne),e(B,{color:"red",onClick:s[0]||(s[0]=c=>{r.value=!1,o("delete")})},{default:l(()=>s[16]||(s[16]=[b("Supprimer")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Y,{color:d.value,"no-gutters":"",onClick:s[5]||(s[5]=c=>o("click")),class:"my-1"},{default:l(()=>[e(N,{style:la({"background-color":d.value}),class:"px-1","no-gutters":"",justify:"space-between"},{default:l(()=>[e(y,null,{default:l(()=>[e(te,{title:n.camp.Camp.Camp.Nom,subtitle:h(ge).year(n.camp.Camp.Camp)},null,8,["title","subtitle"])]),_:1}),e(y,{"align-self":"center"},{default:l(()=>[b(R(h(ge).formatPlage(i.camp.Camp.Camp)),1)]),_:1}),e(y,{cols:"2","align-self":"center"},{default:l(()=>[e(Le,{width:"600",location:"left","content-class":"pa-0"},{activator:l(({props:c})=>[e(aa,Z({class:"bg-white border-md border-primary"},c,{max:n.camp.Camp.Camp.Places,"model-value":n.camp.Stats.Valides,height:"36",rounded:"",color:"primary"}),{default:l(()=>[z("strong",null,[b(R(n.camp.Stats.Valides)+"/"+R(n.camp.Camp.Camp.Places)+" ",1),a.value>0?(f(),Q("span",Pn," (+ "+R(a.value)+")",1)):K("",!0)])]),_:2},1040,["max","model-value"])]),default:l(()=>[e(xn,{stats:n.camp.Stats},null,8,["stats"])]),_:1})]),_:1}),e(y,{cols:"1"}),e(y,{cols:"auto","align-self":"center"},{default:l(()=>[e(Se,null,{activator:l(({props:c})=>[e(B,Z(c,{size:"x-small",class:"mx-1",icon:"mdi-dots-vertical"}),null,16)]),default:l(()=>[e(he,{density:"compact"},{default:l(()=>[e(te,{"prepend-icon":"mdi-pencil",onClick:s[2]||(s[2]=c=>o("edit"))},{default:l(()=>s[17]||(s[17]=[b("Modifier")])),_:1}),e(te,{"prepend-icon":"mdi-currency-eur",onClick:s[3]||(s[3]=c=>o("edit-taux"))},{default:l(()=>s[18]||(s[18]=[b("Taux de conversion")])),_:1}),e(ce,{thickness:"1"}),e(te,{"prepend-icon":"mdi-delete",disabled:n.camp.Stats.Inscriptions>0,onClick:s[4]||(s[4]=c=>r.value=!0)},{default:l(()=>s[19]||(s[19]=[b("Supprimer")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["style"])]),_:1},8,["color"])],64))}}),wn=j({__name:"CampsSelector",props:_e({allCamps:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t,{emit:u}){const n=t,o=Ve(t,"modelValue"),a=T(()=>n.allCamps.map(r=>({title:r.Label,value:r.Id})));return(r,d)=>(f(),w(Na,{multiple:"",chips:"","closable-chips":"",items:a.value,modelValue:o.value,"onUpdate:modelValue":d[0]||(d[0]=i=>o.value=i)},null,8,["items","modelValue"]))}});function Sn(){const t=$([]);na(()=>t.value=[]);function u(n,o){t.value[o]=n}return{refs:t,updateRef:u}}const In=ve({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:t=>t.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:t=>t%1===0},totalVisible:[Number,String],firstIcon:{type:we,default:"$first"},prevIcon:{type:we,default:"$prev"},nextIcon:{type:we,default:"$next"},lastIcon:{type:we,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...oa(),...tt(),...cl(),...It(),...mt(),...St(),...ct({tag:"nav"}),...wt(),...sa({variant:"text"})},"VPagination"),Mn=ye()({name:"VPagination",props:In(),emits:{"update:modelValue":t=>!0,first:t=>!0,prev:t=>!0,next:t=>!0,last:t=>!0},setup(t,u){let{slots:n,emit:o}=u;const a=Ie(t,"modelValue"),{t:r,n:d}=et(),{isRtl:i}=rl(),{themeClasses:s}=dl(t),{width:c}=ia(),m=Fe(-1);_t(void 0,{scoped:!0});const{resizeRef:g}=ua(F=>{if(!F.length)return;const{target:O,contentRect:k}=F[0],J=O.querySelector(".v-pagination__list > *");if(!J)return;const V=k.width,S=J.offsetWidth+parseFloat(getComputedStyle(J).marginRight)*2;m.value=x(V,S)}),p=T(()=>parseInt(t.length,10)),U=T(()=>parseInt(t.start,10)),v=T(()=>t.totalVisible!=null?parseInt(t.totalVisible,10):m.value>=0?m.value:x(c.value,58));function x(F,O){const k=t.showFirstLastPage?5:3;return Math.max(0,Math.floor(+((F-O*k)/O).toFixed(2)))}const I=T(()=>{if(p.value<=0||isNaN(p.value)||p.value>Number.MAX_SAFE_INTEGER)return[];if(v.value<=0)return[];if(v.value===1)return[a.value];if(p.value<=v.value)return $e(p.value,U.value);const F=v.value%2===0,O=F?v.value/2:Math.floor(v.value/2),k=F?O:O+1,J=p.value-O;if(k-a.value>=0)return[...$e(Math.max(1,v.value-1),U.value),t.ellipsis,p.value];if(a.value-J>=(F?1:0)){const V=v.value-1,S=p.value-V+U.value;return[U.value,t.ellipsis,...$e(V,S)]}else{const V=Math.max(1,v.value-2),S=V===1?a.value:a.value-Math.ceil(V/2)+U.value;return[U.value,t.ellipsis,...$e(V,S),t.ellipsis,p.value]}});function A(F,O,k){F.preventDefault(),a.value=O,k&&o(k,O)}const{refs:P,updateRef:_}=Sn();_t({VPaginationBtn:{color:oe(t,"color"),border:oe(t,"border"),density:oe(t,"density"),size:oe(t,"size"),variant:oe(t,"variant"),rounded:oe(t,"rounded"),elevation:oe(t,"elevation")}});const H=T(()=>I.value.map((F,O)=>{const k=J=>_(J,O);if(typeof F=="string")return{isActive:!1,key:`ellipsis-${O}`,page:F,props:{ref:k,ellipsis:!0,icon:!0,disabled:!0}};{const J=F===a.value;return{isActive:J,key:F,page:d(F),props:{ref:k,ellipsis:!1,icon:!0,disabled:!!t.disabled||+t.length<2,color:J?t.activeColor:t.color,"aria-current":J,"aria-label":r(J?t.currentPageAriaLabel:t.pageAriaLabel,F),onClick:V=>A(V,F)}}}})),q=T(()=>{const F=!!t.disabled||a.value<=U.value,O=!!t.disabled||a.value>=U.value+p.value-1;return{first:t.showFirstLastPage?{icon:i.value?t.lastIcon:t.firstIcon,onClick:k=>A(k,U.value,"first"),disabled:F,"aria-label":r(t.firstAriaLabel),"aria-disabled":F}:void 0,prev:{icon:i.value?t.nextIcon:t.prevIcon,onClick:k=>A(k,a.value-1,"prev"),disabled:F,"aria-label":r(t.previousAriaLabel),"aria-disabled":F},next:{icon:i.value?t.prevIcon:t.nextIcon,onClick:k=>A(k,a.value+1,"next"),disabled:O,"aria-label":r(t.nextAriaLabel),"aria-disabled":O},last:t.showFirstLastPage?{icon:i.value?t.firstIcon:t.lastIcon,onClick:k=>A(k,U.value+p.value-1,"last"),disabled:O,"aria-label":r(t.lastAriaLabel),"aria-disabled":O}:void 0}});function D(){var O;const F=a.value-U.value;(O=P.value[F])==null||O.$el.focus()}function ue(F){F.key===qt.left&&!t.disabled&&a.value>+t.start?(a.value=a.value-1,kt(D)):F.key===qt.right&&!t.disabled&&a.value<U.value+p.value-1&&(a.value=a.value+1,kt(D))}return ke(()=>e(t.tag,{ref:g,class:["v-pagination",s.value,t.class],style:t.style,role:"navigation","aria-label":r(t.ariaLabel),onKeydown:ue,"data-test":"v-pagination-root"},{default:()=>[e("ul",{class:"v-pagination__list"},[t.showFirstLastPage&&e("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[n.first?n.first(q.value.first):e(B,Z({_as:"VPaginationBtn"},q.value.first),null)]),e("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[n.prev?n.prev(q.value.prev):e(B,Z({_as:"VPaginationBtn"},q.value.prev),null)]),H.value.map((F,O)=>e("li",{key:F.key,class:["v-pagination__item",{"v-pagination__item--is-active":F.isActive}],"data-test":"v-pagination-item"},[n.item?n.item(F):e(B,Z({_as:"VPaginationBtn"},F.props),{default:()=>[F.page]})])),e("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[n.next?n.next(q.value.next):e(B,Z({_as:"VPaginationBtn"},q.value.next),null)]),t.showFirstLastPage&&e("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[n.last?n.last(q.value.last):e(B,Z({_as:"VPaginationBtn"},q.value.last),null)])])]})),{}}}),$n={key:2},gt=16,An=j({__name:"CampsList",emits:["click"],setup(t,{emit:u}){const n=u;Oe(c);const o=Ct(new Map),a=$(!1),r=Ct({pattern:"",openOnly:!1}),d=T(()=>{const V=ml(r.pattern),S=Array.from(o.values()).filter(G=>ge.match(G.Camp.Camp,V)&&(!r.openOnly||Ht(G.Camp)));return S.sort((G,E)=>{const ee=new Date(E.Camp.Camp.DateDebut).valueOf(),se=new Date(G.Camp.Camp.DateDebut).valueOf();return ee==se?G.Camp.Camp.Id-E.Camp.Camp.Id:ee-se}),S}),i=T(()=>d.value.slice((p.value-1)*gt,p.value*gt));function s(){p.value>g.value&&(p.value=g.value)}async function c(){a.value=!0;const V=await M.CampsGet();a.value=!1,V!==void 0&&(o.clear(),V==null||V.forEach(S=>o.set(S.Camp.Camp.Id,S)))}async function m(){a.value=!0;const V=await M.CampsCreate();a.value=!1,V!==void 0&&(M.showMessage("Camp ajouté avec succès."),o.set(V.Camp.Camp.Id,V),U.value=V.Camp.Camp)}const g=T(()=>Math.max(Math.ceil(d.value.length/gt),1)),p=$(1),U=$(null);async function v(V){U.value=null,a.value=!0;const S=await M.CampsUpdate(V);a.value=!1,S!==void 0&&(M.showMessage("Séjour modifié avec succès."),o.get(S.Camp.Id).Camp=S,s())}const x=$(null);async function I(){const V=x.value;if(V==null)return;x.value=null,a.value=!0;const S=await M.CampsSetTaux({IdCamp:V.Camp.Camp.Id,Taux:V.Taux});a.value=!1,S!==void 0&&(M.showMessage("Taux modifié avec succès."),o.set(S.Camp.Camp.Id,S))}const A=$(!1),P=$(5),_=$({Id:1,Label:"",Euros:0,FrancsSuisse:0}),H=T(()=>_.value.Id>0||_.value.Label!=""),q=T(()=>new Set(Array.from(o.values()).filter(S=>Ht(S.Camp)).map(S=>S.Camp.Camp.IdTaux)).size<=1);async function D(){A.value=!1,a.value=!0;const V=await M.CampsCreateMany({Count:P.value,Taux:_.value});a.value=!1,V!==void 0&&(M.showMessage("Séjours créés avec succès."),V==null||V.forEach(S=>o.set(S.Camp.Camp.Id,S)))}async function ue(V){a.value=!0;const S=await M.CampsDelete({id:V.Camp.Camp.Id});a.value=!1,S!==void 0&&(M.showMessage("Séjour supprimé avec succès."),o.delete(V.Camp.Camp.Id),s())}const F=$(!1);function O(){k.value=Array.from(o.values()).filter(V=>!V.Camp.Camp.Ouvert).map(V=>V.Camp.Camp.Id),F.value=!0}const k=$([]);async function J(){F.value=!1,!(!k.value.length||await M.CampsOuvreInscriptions({Camps:k.value})===void 0)&&(M.showMessage("Séjours ouverts aux inscriptions avec succès."),c())}return(V,S)=>{const G=Ye;return f(),Q(le,null,[e(Y,{title:"Séjours",subtitle:o.size},{append:l(()=>[e(N,null,{default:l(()=>[e(y,{"align-self":"center",style:{width:"240px"}},{default:l(()=>[e(re,{label:"Rechercher",variant:"filled",density:"comfortable","hide-details":"","prepend-inner-icon":"mdi-magnify",clearable:"",modelValue:r.pattern,"onUpdate:modelValue":[S[0]||(S[0]=E=>r.pattern=E),S[2]||(S[2]=E=>s())],"onClick:clear":S[1]||(S[1]=E=>{r.pattern="",s()})},null,8,["modelValue"])]),_:1}),e(ce,{vertical:"",thickness:"1"}),e(y,{"align-self":"center",cols:"auto"},{default:l(()=>[e(Se,null,{activator:l(({props:E})=>[e(B,Z(E,{color:"success",disabled:a.value}),{prepend:l(()=>[e(pe,null,{default:l(()=>S[15]||(S[15]=[b("mdi-plus")])),_:1})]),default:l(()=>[S[16]||(S[16]=b(" Créer un séjour "))]),_:2},1040,["disabled"])]),default:l(()=>[e(he,{density:"compact"},{default:l(()=>[e(te,{onClick:m,title:"Créer un séjour"}),e(te,{title:"Créer plusieurs séjours...",subtitle:"Permet de choisir les taux de conversion",onClick:S[3]||(S[3]=E=>A.value=!0)})]),_:1})]),_:1})]),_:1}),e(y,{"align-self":"center",cols:"auto"},{default:l(()=>[e(Se,null,{activator:l(({props:E})=>[e(B,Z(E,{flat:"",icon:"mdi-dots-vertical",size:"small"}),null,16)]),default:l(()=>[e(he,{density:"compact"},{default:l(()=>[e(te,{title:"Masquer les camps fermés",subtitle:"N'afficher que les camps ouverts aux inscriptions",onClick:S[5]||(S[5]=E=>r.openOnly=!r.openOnly)},{prepend:l(()=>[e(at,{class:"mr-2",modelValue:r.openOnly,"onUpdate:modelValue":S[4]||(S[4]=E=>r.openOnly=E),density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),e(ce,{thickness:"1"}),e(te,{onClick:O,title:"Ouvrir les inscriptions","prepend-icon":"mdi-lock-open"})]),_:1})]),_:1})]),_:1})]),_:1})]),default:l(()=>[e(W,{class:"mt-4"},{default:l(()=>[q.value?K("",!0):(f(),w(Za,{key:0,type:"warning"},{default:l(()=>S[17]||(S[17]=[b(" Attention, les séjours ouverts aux inscriptions ont des taux de conversion incompatibles ! ")])),_:1})),a.value?(f(),w(ot,{key:1})):d.value.length==0?(f(),Q("i",$n," Aucun camp ne correspond aux filtres actuels. ")):K("",!0),(f(!0),Q(le,null,fe(i.value,(E,ee)=>(f(),w(Dn,{key:ee,camp:E,onClick:se=>n("click",E),onEdit:se=>U.value=E.Camp.Camp,onEditTaux:se=>x.value=E,onDelete:se=>ue(E)},null,8,["camp","onClick","onEdit","onEditTaux","onDelete"]))),128)),e(Mn,{length:g.value,modelValue:p.value,"onUpdate:modelValue":S[6]||(S[6]=E=>p.value=E)},null,8,["length","modelValue"])]),_:1})]),_:1},8,["subtitle"]),e(ae,{"model-value":U.value!=null,"onUpdate:modelValue":S[7]||(S[7]=E=>U.value=null)},{default:l(()=>[U.value!=null?(f(),w(kn,{key:0,camp:U.value,onSave:v},null,8,["camp"])):K("",!0)]),_:1},8,["model-value"]),e(ae,{"model-value":x.value!=null,"onUpdate:modelValue":S[9]||(S[9]=E=>x.value=null),"max-width":"600"},{default:l(()=>[x.value!=null?(f(),w(Y,{key:0,title:"Modifier le taux",subtitle:"La modification n'est possible que si aucun participant n'est enregistré."},{default:l(()=>[e(W,null,{default:l(()=>[e(el,{modelValue:x.value.Taux,"onUpdate:modelValue":S[8]||(S[8]=E=>x.value.Taux=E)},null,8,["modelValue"])]),_:1}),e(ie,null,{default:l(()=>[e(ne),e(B,{disabled:x.value.Stats.Inscriptions>0,onClick:I},{default:l(()=>S[18]||(S[18]=[b("Modifier")])),_:1},8,["disabled"])]),_:1})]),_:1})):K("",!0)]),_:1},8,["model-value"]),e(ae,{modelValue:A.value,"onUpdate:modelValue":S[12]||(S[12]=E=>A.value=E),"max-width":"600"},{default:l(()=>[e(Y,{title:"Créer plusieurs séjours",subtitle:"Les séjours seront liés au même taux de conversion"},{default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(y,null,{default:l(()=>[e(G,{label:"Nombre de séjours",modelValue:P.value,"onUpdate:modelValue":S[10]||(S[10]=E=>P.value=E)},null,8,["modelValue"])]),_:1})]),_:1}),e(ce,{thickness:"2",class:"my-2"}),e(el,{modelValue:_.value,"onUpdate:modelValue":S[11]||(S[11]=E=>_.value=E)},null,8,["modelValue"])]),_:1}),e(ie,null,{default:l(()=>[e(ne),e(B,{color:"success",onClick:D,disabled:!H.value},{default:l(()=>S[19]||(S[19]=[b("Créer")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ae,{modelValue:F.value,"onUpdate:modelValue":S[14]||(S[14]=E=>F.value=E),"max-width":"600"},{default:l(()=>[e(Y,{title:"Ouvrir les inscriptions",subtitle:"Ouvre les inscriptions sur les séjours ci-dessous"},{default:l(()=>[e(W,null,{default:l(()=>[e(wn,{"all-camps":Array.from(o.values()).map(E=>h(ge).toItem(E.Camp)),modelValue:k.value,"onUpdate:modelValue":S[13]||(S[13]=E=>k.value=E)},null,8,["all-camps","modelValue"])]),_:1}),e(ie,null,{default:l(()=>[e(ne),e(B,{onClick:J,disabled:!k.value.length},{default:l(()=>S[20]||(S[20]=[b("Ouvrir")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}}),hn={key:1},Un={key:0,class:"text-center font-italic"},En=j({__name:"CampParticipants",props:{id:{}},setup(t){const u=t;Oe(()=>{i(),a()}),De(()=>u.id,i);const n=$(!1),o=$([]);async function a(){const P=await M.GetCamps();P!==void 0&&(o.value=P||[])}const r=T(()=>{var _;const P=(((_=d.value)==null?void 0:_.Participants)||[]).map(H=>H);return P.sort(ra.cmp),P}),d=$(null);async function i(){n.value=!0;const P=await M.CampsLoad({idCamp:u.id});n.value=!1,P!==void 0&&(d.value=P)}const s=$(null);async function c(){if(s.value==null||d.value==null)return;const P=await M.ParticipantsCreate(s.value);s.value=null,P!==void 0&&(M.showMessage("Participant créé avec succès."),d.value.Participants=(d.value.Participants||[]).concat(P))}const m=$(null);async function g(P){if(m.value==null||d.value==null)return;const _=await M.ParticipantsUpdate(P);m.value=null,_!==void 0&&(M.showMessage("Participant modifié avec succès."),i())}const p=$(null);async function U(){if(p.value==null||d.value==null)return;const P=p.value.Participant.Id,_=await M.ParticipantsDelete({id:P});p.value=null,_!==void 0&&(M.showMessage("Participant supprimé avec succès."),d.value.Participants=(d.value.Participants||[]).filter(H=>H.Participant.Id!=P))}const v=$(null);async function x(){const P=v.value;P==null||d.value==null||(v.value=null,await M.ParticipantsMove(P)===void 0)||(M.showMessage("Participant déplacé avec succès.",void 0,{title:"Aller au nouveau séjour",action:()=>Ut({IdCamp:P.Target,Id:P.Id})}),d.value.Participants=(d.value.Participants||[]).filter(H=>H.Participant.Id!=P.Id))}const I=$(null);async function A(){var q;if(I.value==null)return;const P=I.value.Participant.Id;I.value=null;const _=await M.ParticipantsSetPlaceLiberee({id:P});if(_===void 0||d.value==null)return;const H=(q=d.value.Participants)==null?void 0:q.find(D=>D.Participant.Id==P);H.Participant=_}return(P,_)=>{const H=Fa,q=za,D=vt,ue=kl,F=qa,O=Mt;return d.value!=null?(f(),w(Y,{key:0,title:"Participants",subtitle:h(ge).label(d.value.Camp.Camp)},{append:l(()=>[e(B,{color:"green",onClick:_[0]||(_[0]=k=>s.value={IdCamp:u.id,IdDossier:0,IdPersonne:0})},{prepend:l(()=>[e(pe,null,{default:l(()=>_[9]||(_[9]=[b("mdi-plus")])),_:1})]),default:l(()=>[_[10]||(_[10]=b(" Créer un participant"))]),_:1})]),default:l(()=>[e(W,{class:"mt-4"},{default:l(()=>[n.value?(f(),w(ot,{key:0,type:"table"})):(f(),Q("div",hn,[e(H),r.value.length?K("",!0):(f(),Q("div",Un," Aucun participant n'est encore inscrit sur ce séjour. ")),(f(!0),Q(le,null,fe(r.value,(k,J)=>(f(),w(q,{participant:k,index:J},{actions:l(()=>[e(he,{density:"comfortable"},{default:l(()=>[e(te,{title:"Modifier","prepend-icon":"mdi-pencil",onClick:V=>m.value=k},null,8,["onClick"]),e(ce),e(te,{title:"Changer de camp...","prepend-icon":"mdi-file-move",onClick:V=>v.value={Id:k.Participant.Id,Target:0}},null,8,["onClick"]),e(te,{title:"Notifier d'une place disponible.",subtitle:"Envoi un email","prepend-icon":"mdi-email-alert",disabled:k.Participant.Statut==h(Xe).Inscrit||k.Participant.Statut==h(Xe).EnAttenteReponse,onClick:V=>I.value=k},null,8,["disabled","onClick"]),e(ce),e(te,{title:"Aller à la personne",subtitle:`(ID : ${k.Personne.Id})`,onClick:V=>h(Ge)(k.Personne.Id)},null,8,["subtitle","onClick"]),e(te,{title:"Aller au dossier",subtitle:`(ID : ${k.Participant.IdDossier})`,onClick:V=>h(Pt)(k.Participant.IdDossier)},null,8,["subtitle","onClick"]),e(ce),e(te,{title:"Supprimer","prepend-icon":"mdi-delete",onClick:V=>p.value=k},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["participant","index"]))),256))]))]),_:1}),s.value!=null?(f(),w(ae,{key:0,"model-value":s.value!=null,"onUpdate:modelValue":_[3]||(_[3]=k=>s.value=null),"max-width":"600px"},{default:l(()=>[e(Y,{title:"Créer un participant"},{default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(y,{cols:"12"},{default:l(()=>[e(D,{label:"Participant",modelValue:s.value.IdPersonne,"onUpdate:modelValue":_[1]||(_[1]=k=>s.value.IdPersonne=k),"initial-personne":"",api:{SelectPersonne:h(M).SelectPersonne.bind(h(M))}},null,8,["modelValue","api"])]),_:1}),e(y,{cols:"12"},{default:l(()=>[e(ue,{modelValue:s.value.IdDossier,"onUpdate:modelValue":_[2]||(_[2]=k=>s.value.IdDossier=k)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(ie,null,{default:l(()=>[e(ne),e(B,{color:"green",onClick:c,disabled:!(s.value.IdDossier&&s.value.IdPersonne)},{default:l(()=>_[11]||(_[11]=[b("Créer")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])):K("",!0),m.value!=null?(f(),w(ae,{key:1,"model-value":m.value!=null,"onUpdate:modelValue":_[4]||(_[4]=k=>m.value=null),"max-width":"800px"},{default:l(()=>[e(F,{participant:m.value.Participant,personne:m.value.Personne,api:{SelectPersonne:h(M).SelectPersonne.bind(h(M))},onSave:g},null,8,["participant","personne","api"])]),_:1},8,["model-value"])):K("",!0),p.value!=null?(f(),w(ae,{key:2,"model-value":p.value!=null,"onUpdate:modelValue":_[5]||(_[5]=k=>p.value=null),"max-width":"600px"},{default:l(()=>[e(Y,{title:"Supprimer le participant"},{default:l(()=>[e(W,null,{default:l(()=>[_[12]||(_[12]=b(" Confirmez-vous la suppression du participant ")),z("b",null,R(h(Ue).label(p.value.Personne)),1),_[13]||(_[13]=b(" ? ")),_[14]||(_[14]=z("br",null,null,-1)),_[15]||(_[15]=z("br",null,null,-1)),_[16]||(_[16]=b(" Attention, cette opération est irréversible. "))]),_:1}),e(ie,null,{default:l(()=>[e(ne),e(B,{color:"red",onClick:U},{default:l(()=>_[17]||(_[17]=[b("Supprimer")])),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])):K("",!0),v.value!=null?(f(),w(ae,{key:3,"model-value":v.value!=null,"onUpdate:modelValue":_[7]||(_[7]=k=>v.value=null),"max-width":"500px"},{default:l(()=>[e(Y,{title:"Déplacer le participant"},{default:l(()=>[e(W,null,{default:l(()=>[e(O,{label:"Nouveau séjour",camps:o.value,modelValue:v.value.Target,"onUpdate:modelValue":_[6]||(_[6]=k=>v.value.Target=k)},null,8,["camps","modelValue"])]),_:1}),e(ie,null,{default:l(()=>[e(ne),e(B,{onClick:x,disabled:v.value.Target==u.id||!v.value.Target},{default:l(()=>_[18]||(_[18]=[b("Déplacer")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])):K("",!0),I.value!=null?(f(),w(ae,{key:4,"model-value":I.value!=null,"onUpdate:modelValue":_[8]||(_[8]=k=>I.value=null),"max-width":"500px"},{default:l(()=>[e(Y,{title:"Notifier d'une place disponible"},{default:l(()=>[e(W,null,{default:l(()=>[b(" Confirmez-vous l'envoi d'une notification au responsable de "+R(h(Ue).label(I.value.Personne))+" indiquant qu'une place est disponible ? ",1),_[19]||(_[19]=z("br",null,null,-1)),_[20]||(_[20]=z("br",null,null,-1)),b(" Le nouveau statut de "+R(I.value.Personne.Prenom)+" sera : ",1),z("i",null,R(h(da)[h(Xe).EnAttenteReponse]),1),_[21]||(_[21]=b(". "))]),_:1}),e(ie,null,{default:l(()=>[e(ne),e(B,{onClick:A},{default:l(()=>_[22]||(_[22]=[b("Notifier")])),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])):K("",!0)]),_:1},8,["subtitle"])):(f(),w(ot,{key:1,type:"card"}))}}}),Tn=j({__name:"camps",setup(t){const u=lt(),n=T(()=>Zi(u.currentRoute.value.query)),o=T(()=>n.value.idCamp);function a(d){const i=u.currentRoute.value;u.push({path:i.path,query:{idCamp:d.Camp.Camp.Id}})}function r(){const d=u.currentRoute.value;u.push({path:d.path,query:{}})}return(d,i)=>(f(),Q(le,null,[e(ft,{title:"Gestion des séjours"},{default:l(()=>[o.value!==null?(f(),w(B,{key:0,onClick:r},{prepend:l(()=>[e(pe,null,{default:l(()=>i[0]||(i[0]=[b("mdi-view-list")])),_:1})]),default:l(()=>[i[1]||(i[1]=b(" Retour à la liste"))]),_:1})):K("",!0)]),_:1}),o.value===void 0?(f(),w(An,{key:0,onClick:a})):(f(),w(En,{key:1,id:o.value},null,8,["id"]))],64))}}),Sl=j({__name:"MergeCard",props:{from:{}},emits:["merge"],setup(t,{emit:u}){const n=t,o=u,a=$(0),r=$(!0);return(d,i)=>{const s=kl;return f(),w(Y,{title:"Fusionner le dossier vers",subtitle:"Les participants, paiements et messages seront copiés vers le dossier cible."},{default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(y,{cols:"12"},{default:l(()=>[e(s,{modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=c=>a.value=c)},null,8,["modelValue"])]),_:1}),e(y,{cols:"12"},{default:l(()=>[e(at,{density:"compact",label:"Notifier par email",hint:"Le reponsable du dossier absorbé sera averti du changement d'espace personnel.","persistent-hint":"",modelValue:r.value,"onUpdate:modelValue":i[1]||(i[1]=c=>r.value=c)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(ie,null,{default:l(()=>[e(ne),e(B,{disabled:a.value==0||a.value==n.from,onClick:i[2]||(i[2]=c=>o("merge",{From:n.from,To:a.value,Notifie:r.value}))},{default:l(()=>i[3]||(i[3]=[b("Fusionner")])),_:1},8,["disabled"])]),_:1})]),_:1})}}}),Rn={key:1,class:"text-center font-italic"},Ln={key:2},On=j({__name:"PannelInscriptions",emits:["goTo","empty"],setup(t,{emit:u}){const n=u,o=$(!1);Oe(async()=>{await r(),a.value.length||n("empty")});const a=$([]);async function r(){o.value=!0;const I=await M.InscriptionsGet();o.value=!1,I!==void 0&&(a.value=I||[])}const d=$(""),i=T(()=>{const I=ml(d.value);return a.value.filter(A=>{var P;return Ue.match(A.Responsable,I)||((P=A.Participants)==null?void 0:P.some(_=>Ue.match(_.Personne,I)||ge.match(_.Camp,I)))})});async function s(I,A){const P=await M.InscriptionsIdentifiePersonne({IdDossier:I,Target:A});if(P===void 0)return;M.showMessage("Profil identifié avec succès.");const _=a.value.findIndex(H=>H.Dossier.Id==I);a.value[_]=P}const c=$(null);async function m(I){const A=await M.InscriptionsHintValide({idDossier:I.Dossier.Id});A!==void 0&&(c.value={inscription:I,statuts:A||{}})}async function g(I,A){if(!c.value)return;const P=c.value.inscription.Dossier.Id;c.value=null,await M.InscriptionsValide({IdDossier:P,Statuts:I,SendMail:A})!==void 0&&(M.showMessage("Inscription validée avec succès.","",{title:"Aller au dossier",action:()=>n("goTo",P)}),a.value=a.value.filter(H=>H.Dossier.Id!=P))}async function p(I){await M.DossiersDelete({id:I.Dossier.Id})!==void 0&&(M.showMessage("Inscription supprimée avec succès."),a.value=a.value.filter(P=>P.Dossier.Id!=I.Dossier.Id))}async function U(I,A){if(await M.ParticipantsDelete({id:A})===void 0)return;M.showMessage("Participant supprimé avec succès.");const _=a.value.find(H=>H.Dossier.Id==I);_.Participants=(_.Participants||[]).filter(H=>H.Participant.Id!=A)}const v=$(null);async function x(I){v.value=null,await M.DossiersMerge(I)!==void 0&&(M.showMessage("Inscriptions fusionnées avec succès."),r())}return(I,A)=>{const P=Ha;return f(),w(Y,{title:"Inscriptions",subtitle:"En attente de validation",class:"ma-2"},{append:l(()=>[e(re,{width:"300","append-inner-icon":"mdi-magnify",label:"Rechercher","hide-details":"",modelValue:d.value,"onUpdate:modelValue":A[0]||(A[0]=_=>d.value=_)},null,8,["modelValue"])]),default:l(()=>[e(W,null,{default:l(()=>[o.value?(f(),w(ot,{key:0})):a.value.length?(f(),Q("div",Ln,[(f(!0),Q(le,null,fe(i.value,(_,H)=>(f(),w(ja,{class:"my-1",key:H,inscription:_,onIdentifie:q=>s(_.Dossier.Id,q),onValide:q=>m(_),onMerge:q=>v.value=_.Dossier.Id,onDelete:q=>p(_),onDeleteParticipant:q=>U(_.Dossier.Id,q),api:{SearchSimilaires:h(M).InscriptionsSearchSimilaires.bind(h(M)),SelectPersonne:h(M).SelectPersonne.bind(h(M))}},null,8,["inscription","onIdentifie","onValide","onMerge","onDelete","onDeleteParticipant","api"]))),128))])):(f(),Q("div",Rn," Il n'y a aucune inscription à valider. "))]),_:1}),e(ae,{"model-value":v.value!=null,"onUpdate:modelValue":A[1]||(A[1]=_=>v.value=null),"max-width":"600px"},{default:l(()=>[v.value!=null?(f(),w(Sl,{key:0,from:v.value,onMerge:x},null,8,["from"])):K("",!0)]),_:1},8,["model-value"]),e(ae,{"model-value":c.value!=null,"onUpdate:modelValue":A[2]||(A[2]=_=>c.value=null),"max-width":"800px"},{default:l(()=>[c.value?(f(),w(P,{key:0,inscription:c.value.inscription,statuts:c.value.statuts,rights:{AgeInvalide:!0,CampComplet:!0},onValide:g},null,8,["inscription","statuts"])):K("",!0)]),_:1},8,["model-value"])]),_:1})}}}),Bn=ve({dotColor:String,fillDot:Boolean,hideDot:Boolean,icon:we,iconColor:String,lineColor:String,...tt(),...mt(),...St(),...It()},"VTimelineDivider"),Nn=ye()({name:"VTimelineDivider",props:Bn(),setup(t,u){let{slots:n}=u;const{sizeClasses:o,sizeStyles:a}=ca(t,"v-timeline-divider__dot"),{backgroundColorStyles:r,backgroundColorClasses:d}=ze(oe(t,"dotColor")),{roundedClasses:i}=vl(t,"v-timeline-divider__dot"),{elevationClasses:s}=ma(t),{backgroundColorClasses:c,backgroundColorStyles:m}=ze(oe(t,"lineColor"));return ke(()=>e("div",{class:["v-timeline-divider",{"v-timeline-divider--fill-dot":t.fillDot},t.class],style:t.style},[e("div",{class:["v-timeline-divider__before",c.value],style:m.value},null),!t.hideDot&&e("div",{key:"dot",class:["v-timeline-divider__dot",s.value,i.value,o.value],style:a.value},[e("div",{class:["v-timeline-divider__inner-dot",d.value,i.value],style:r.value},[n.default?e(He,{key:"icon-defaults",disabled:!t.icon,defaults:{VIcon:{color:t.iconColor,icon:t.icon,size:t.size}}},n.default):e(pe,{key:"icon",color:t.iconColor,icon:t.icon,size:t.size},null)])]),e("div",{class:["v-timeline-divider__after",c.value],style:m.value},null)])),{}}}),Il=ve({density:String,dotColor:String,fillDot:Boolean,hideDot:Boolean,hideOpposite:{type:Boolean,default:void 0},icon:we,iconColor:String,lineInset:[Number,String],...tt(),...fa(),...It(),...mt(),...St(),...ct()},"VTimelineItem"),Fn=ye()({name:"VTimelineItem",props:Il(),setup(t,u){let{slots:n}=u;const{dimensionStyles:o}=va(t),a=Fe(0),r=$();return De(r,d=>{var i;d&&(a.value=((i=d.$el.querySelector(".v-timeline-divider__dot"))==null?void 0:i.getBoundingClientRect().width)??0)},{flush:"post"}),ke(()=>{var d,i;return e("div",{class:["v-timeline-item",{"v-timeline-item--fill-dot":t.fillDot},t.class],style:[{"--v-timeline-dot-size":qe(a.value),"--v-timeline-line-inset":t.lineInset?`calc(var(--v-timeline-dot-size) / 2 + ${qe(t.lineInset)})`:qe(0)},t.style]},[e("div",{class:"v-timeline-item__body",style:o.value},[(d=n.default)==null?void 0:d.call(n)]),e(Nn,{ref:r,hideDot:t.hideDot,icon:t.icon,iconColor:t.iconColor,size:t.size,elevation:t.elevation,dotColor:t.dotColor,fillDot:t.fillDot,rounded:t.rounded},{default:n.icon}),t.density!=="compact"&&e("div",{class:"v-timeline-item__opposite"},[!t.hideOpposite&&((i=n.opposite)==null?void 0:i.call(n))])])}),{}}}),qn=ve({align:{type:String,default:"center",validator:t=>["center","start"].includes(t)},direction:{type:String,default:"vertical",validator:t=>["vertical","horizontal"].includes(t)},justify:{type:String,default:"auto",validator:t=>["auto","center"].includes(t)},side:{type:String,validator:t=>t==null||["start","end"].includes(t)},lineThickness:{type:[String,Number],default:2},lineColor:String,truncateLine:{type:String,validator:t=>["start","end","both"].includes(t)},...ya(Il({lineInset:0}),["dotColor","fillDot","hideOpposite","iconColor","lineInset","size"]),...tt(),...cl(),...ct(),...wt()},"VTimeline"),zn=ye()({name:"VTimeline",props:qn(),setup(t,u){let{slots:n}=u;const{themeClasses:o}=dl(t),{densityClasses:a}=pa(t),{rtlClasses:r}=rl();_t({VTimelineDivider:{lineColor:oe(t,"lineColor")},VTimelineItem:{density:oe(t,"density"),dotColor:oe(t,"dotColor"),fillDot:oe(t,"fillDot"),hideOpposite:oe(t,"hideOpposite"),iconColor:oe(t,"iconColor"),lineColor:oe(t,"lineColor"),lineInset:oe(t,"lineInset"),size:oe(t,"size")}});const d=T(()=>{const s=t.side?t.side:t.density!=="default"?"end":null;return s&&`v-timeline--side-${s}`}),i=T(()=>{const s=["v-timeline--truncate-line-start","v-timeline--truncate-line-end"];switch(t.truncateLine){case"both":return s;case"start":return s[0];case"end":return s[1];default:return null}});return ke(()=>e(t.tag,{class:["v-timeline",`v-timeline--${t.direction}`,`v-timeline--align-${t.align}`,`v-timeline--justify-${t.justify}`,i.value,{"v-timeline--inset-line":!!t.lineInset},o.value,a.value,d.value,r.value,t.class],style:[{"--v-timeline-line-thickness":qe(t.lineThickness)},t.style]},n)),{}}}),jn={class:"ma-2"},Me=j({__name:"EventItem",props:{color:{},icon:{},time:{},size:{}},setup(t){const u=t;return(n,o)=>(f(),w(Fn,{"dot-color":u.color,width:"100%",size:u.size||"medium",elevation:2},{icon:l(()=>[z("div",jn,[e(pe,{icon:u.icon},null,8,["icon"])])]),default:l(()=>[e(N,{justify:"space-between","no-gutters":""},{default:l(()=>[e(y,{"align-self":"center"},{default:l(()=>[al(n.$slots,"default")]),_:3}),e(y,{"align-self":"center",cols:"2",class:"text-grey ml-4"},{default:l(()=>[b(R(h(Ce).time(u.time)),1)]),_:1})]),_:3})]),_:3},8,["dot-color","size"]))}}),Hn=j({__name:"EventPaiementV",props:{paiement:{},user:{}},emits:["edit"],setup(t,{emit:u}){const n=t,o=u;return(a,r)=>{const d=Me;return f(),w(d,{color:"#ad9726",icon:"mdi-cash",time:n.paiement.Time},{default:l(()=>[e(N,null,{default:l(()=>[e(y,{"align-self":"center"},{default:l(()=>[e(fl,null,{default:l(()=>[b(R(n.paiement.IsRemboursement?"Remboursement":"Paiement")+" ",1),n.paiement.IsRemboursement?K("",!0):(f(),Q(le,{key:0},[r[1]||(r[1]=b(" de ")),z("i",null,R(n.paiement.Payeur),1)],64)),r[2]||(r[2]=b(" : ")),z("b",null,R(h(Ce).montant(n.paiement.Montant)),1)]),_:1}),e(pl,null,{default:l(()=>[b(R(n.paiement.Label),1)]),_:1})]),_:1}),e(y,{"align-self":"center",cols:"auto"},{default:l(()=>[n.user=="backoffice"?(f(),w(B,{key:0,icon:"mdi-pencil",size:"x-small",onClick:r[0]||(r[0]=i=>o("edit"))})):K("",!0)]),_:1})]),_:1})]),_:1},8,["time"])}}}),Qn=j({__name:"EventInscriptionTimeV",props:{time:{}},setup(t){const u=t;return(n,o)=>(f(),w(Me,{color:"grey",icon:"mdi-map-marker",time:u.time},{default:l(()=>o[0]||(o[0]=[b(" Demande d'inscription effectuée. ")])),_:1},8,["time"]))}}),Yn={key:1},Wn=j({__name:"EventMessageV",props:{event:{},content:{},user:{}},emits:["delete"],setup(t,{emit:u}){const n=t,o=u,a=T(()=>d(n.content.Message.Origine)),r=T(()=>n.user=="backoffice"&&s);function d(c){switch(c){case Je.FromBackoffice:return"bg-light-green-lighten-3";case Je.FromDirecteur:return"bg-lime";case Je.FromEspaceperso:return"bg-light-blue-lighten-3"}}const i=$(!1),s=T(()=>n.content.Message.Origine==(n.user=="backoffice"?Je.FromBackoffice:Je.FromEspaceperso));return(c,m)=>(f(),w(Me,{icon:s.value?"mdi-email-arrow-right":"mdi-email-arrow-left",color:"light-blue-darken-3",time:n.event.Created,size:"x-large"},{default:l(()=>[i.value?(f(),w(ae,{key:0,modelValue:i.value,"onUpdate:modelValue":m[1]||(m[1]=g=>i.value=g),"max-width":"400px"},{default:l(()=>[e(Y,{title:"Confirmation"},{default:l(()=>[e(W,null,{default:l(()=>m[3]||(m[3]=[b(" Confirmez-vous la suppression de ce message ? "),z("br",null,null,-1),z("br",null,null,-1),b(" Attention, cette opération est irréversible. ")])),_:1}),e(ie,null,{default:l(()=>[e(ne),e(B,{color:"red",onClick:m[0]||(m[0]=g=>o("delete"))},{default:l(()=>m[4]||(m[4]=[b("Supprimer")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])):K("",!0),e(N,{"no-gutters":""},{default:l(()=>[e(y,{"align-self":"center"},{default:l(()=>[e(Y,{class:ba(a.value)},{default:l(()=>[e(W,{class:"pa-1"},{default:l(()=>[z("pre",null,R(n.content.Message.Contenu),1)]),_:1})]),_:1},8,["class"])]),_:1}),e(y,{cols:"auto","align-self":"center"},{default:l(()=>[r.value?(f(),w(B,{key:0,icon:"",size:"x-small",class:"ml-2",onClick:m[2]||(m[2]=g=>i.value=!0)},{default:l(()=>[e(pe,{color:"red"},{default:l(()=>m[5]||(m[5]=[b("mdi-delete")])),_:1})]),_:1})):(f(),Q("div",Yn,[e(B,{icon:"",size:"x-small",variant:"text",disabled:""})]))]),_:1})]),_:1})]),_:1},8,["icon","time"]))}}),Kn={href:""},Jn={href:""},Gn=j({__name:"EventPlaceLibereeV",props:{event:{},content:{}},setup(t){const u=t;return(n,o)=>{const a=Me;return f(),w(a,{icon:"mdi-information-outline",color:"yellow",time:u.event.Created},{default:l(()=>[o[0]||(o[0]=b(" Une place pour ")),z("a",Kn,R(u.content.ParticipantLabel),1),o[1]||(o[1]=b(" s'est libérée sur le camp ")),z("a",Jn,R(u.content.CampLabel),1),o[2]||(o[2]=b(". "))]),_:1},8,["time"])}}}),Xn=j({__name:"EventSupprimeV",props:{event:{},content:{}},setup(t){const u=t;return(n,o)=>{const a=Me;return f(),w(a,{color:"grey",icon:"mdi-close",time:u.event.Created,size:"small"},{default:l(()=>o[0]||(o[0]=[b(" Message supprimé ")])),_:1},8,["time"])}}}),Zn=j({__name:"EventValidationV",props:{event:{},content:{}},setup(t){const u=t;return(n,o)=>{const a=Me;return f(),w(a,{color:"green",icon:"mdi-map-marker-check",time:u.event.Created},{default:l(()=>[o[0]||(o[0]=b(" Inscription confirmée ")),e(Le,{text:"Inscription reçue et confirmée "+(u.content.ByCamp?`par la direction du séjour ${u.content.ByCamp}.`:"par le centre.")},{activator:l(({props:r})=>[e(Te,Z(r,{"prepend-icon":"mdi-account"}),{default:l(()=>[b(R(u.content.ByCamp?u.content.ByCamp:"Centre"),1)]),_:2},1040)]),_:1},8,["text"])]),_:1},8,["time"])}}}),ei=j({__name:"EventFactureV",props:{event:{},content:{}},setup(t){const u=t;return(n,o)=>{const a=Me;return f(),w(a,{color:"orange-darken-1",icon:"mdi-invoice",time:u.event.Created},{default:l(()=>o[0]||(o[0]=[b(" Facture envoyée ")])),_:1},8,["time"])}}}),ti={href:""},li=j({__name:"EventCampDocsV",props:{event:{},content:{}},setup(t){const u=t;return(n,o)=>{const a=Me;return f(),w(a,{icon:"mdi-file-document",color:"light-blue",time:u.event.Created},{default:l(()=>[o[0]||(o[0]=b(" Les documents du camp ")),z("a",ti,R(u.content.CampLabel),1),o[1]||(o[1]=b(" ont été envoyés. "))]),_:1},8,["time"])}}}),ai=j({__name:"EventAttestationV",props:{event:{},content:{}},setup(t){const u=t,n=T(()=>{switch(u.content.Distribution){case pt.DEspacePerso:return"téléchargée depuis l'espace personnel";case pt.DMail:return"envoyée";case pt.DMailAndDownloaded:return"envoyée et téléchargée"}});return(o,a)=>{const r=Me;return f(),w(r,{icon:"mdi-invoice-check",color:"light-green-darken-1",time:u.event.Created},{default:l(()=>[a[0]||(a[0]=b(" Une ")),z("b",null,R(u.content.IsPresence?"attestation de présence":"facture acquittée"),1),b(" a été "+R(n.value)+". ",1)]),_:1},8,["time"])}}}),ni={href:""},ii=j({__name:"EventSondageV",props:{event:{},content:{}},setup(t){const u=t;return(n,o)=>{const a=Me;return f(),w(a,{color:"purple",icon:"mdi-chat-question",time:u.event.Created},{default:l(()=>[o[0]||(o[0]=b(" Un sondage concernant le camp ")),z("a",ni,R(u.content.CampLabel),1),o[1]||(o[1]=b(" a été envoyé. "))]),_:1},8,["time"])}}}),ui=j({__name:"EventSwitch",props:{event:{}},emits:["editPaiement","deleteMessage"],setup(t,{emit:u}){const n=t,o=u;return(a,r)=>{const d=Qn,i=Hn;return n.event.Kind=="inscription-time"?(f(),w(d,{key:0,time:n.event.Time},null,8,["time"])):n.event.Kind=="paiement"?(f(),w(i,{key:1,paiement:n.event.Paiement,user:n.event.User,onEdit:r[0]||(r[0]=s=>o("editPaiement",n.event.Paiement))},null,8,["paiement","user"])):n.event.Kind=="event"&&n.event.Event.Content.Kind==h(Ee).Supprime?(f(),w(Xn,{key:2,event:n.event.Event,content:n.event.Event.Content.Data},null,8,["event","content"])):n.event.Kind=="event"&&n.event.Event.Content.Kind==h(Ee).Validation?(f(),w(Zn,{key:3,event:n.event.Event,content:n.event.Event.Content.Data},null,8,["event","content"])):n.event.Kind=="event"&&n.event.Event.Content.Kind==h(Ee).Message?(f(),w(Wn,{key:4,event:n.event.Event,content:n.event.Event.Content.Data,user:n.event.User,onDelete:r[1]||(r[1]=s=>o("deleteMessage",n.event.Event))},null,8,["event","content","user"])):n.event.Kind=="event"&&n.event.Event.Content.Kind==h(Ee).PlaceLiberee?(f(),w(Gn,{key:5,event:n.event.Event,content:n.event.Event.Content.Data},null,8,["event","content"])):n.event.Kind=="event"&&n.event.Event.Content.Kind==h(Ee).Facture?(f(),w(ei,{key:6,event:n.event.Event,content:n.event.Event.Content.Data},null,8,["event","content"])):n.event.Kind=="event"&&n.event.Event.Content.Kind==h(Ee).CampDocs?(f(),w(li,{key:7,event:n.event.Event,content:n.event.Event.Content.Data},null,8,["event","content"])):n.event.Kind=="event"&&n.event.Event.Content.Kind==h(Ee).Attestation?(f(),w(ai,{key:8,event:n.event.Event,content:n.event.Event.Content.Data},null,8,["event","content"])):n.event.Kind=="event"&&n.event.Event.Content.Kind==h(Ee).Sondage?(f(),w(ii,{key:9,event:n.event.Event,content:n.event.Event.Content.Data},null,8,["event","content"])):K("",!0)}}}),si={class:"text-grey"},oi={class:"text-grey"},ri={key:0},di=j({__name:"FactureCard",props:{dossier:{}},setup(t){const u=t,n=T(()=>(u.dossier.Participants||[]).filter(i=>i.Participant.Statut!=Xe.Inscrit).map(i=>Ue.label(i.Personne))),o=T(()=>(u.dossier.Participants||[]).filter(i=>i.Participant.Statut==Xe.Inscrit).map(i=>({Label:Ue.label(i.Personne),Camp:ge.label(i.Camp),Prix:Ce.montant(i.Camp.Prix),Bilan:u.dossier.Bilan.Inscrits[i.Participant.Id]})));function a(i){return!!(i.Remises.ReducEnfants||i.Remises.ReducEquipiers||i.Remises.ReducSpeciale.Cent)}function r(i){const s=[];return i.ReducEnfants&&s.push(`Enfants : ${i.ReducEnfants}%`),i.ReducEquipiers&&s.push(`Enfants : ${i.ReducEquipiers}%`),i.ReducSpeciale.Cent&&s.push(`Remise : ${Ce.montant(i.ReducSpeciale)}`),s.join("  ;  ")}const d=T(()=>{const i=Object.values(u.dossier.Paiements||{});return i.sort((s,c)=>new Date(s.Time).valueOf()-new Date(c.Time).valueOf()),i});return(i,s)=>(f(),w(Y,{title:"Suivi financier",subtitle:n.value.length?`Les participants en liste d'attente (${n.value.join(", ")}) ne sont pas pris en compte.`:"","min-width":"900px"},{default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(y,{cols:"3"},{default:l(()=>s[0]||(s[0]=[b("Participant")])),_:1}),e(y,{cols:"2",class:"text-center"},{default:l(()=>s[1]||(s[1]=[b("Prix du camp")])),_:1}),e(y,{cols:"2",class:"text-center"},{default:l(()=>s[2]||(s[2]=[b("Prix avec option")])),_:1}),e(y,{cols:"3",class:"text-center"},{default:l(()=>s[3]||(s[3]=[b("Aides extérieures")])),_:1}),e(y,{cols:"2",class:"text-right"},{default:l(()=>s[4]||(s[4]=[b("Sous-total")])),_:1})]),_:1}),e(ce,{thickness:"1",class:"my-2"}),(f(!0),Q(le,null,fe(o.value,c=>(f(),Q(le,null,[e(N,null,{default:l(()=>[e(y,{"align-self":"center",cols:"3"},{default:l(()=>[b(R(c.Label)+" ",1),s[5]||(s[5]=z("br",null,null,-1)),z("span",si,R(c.Camp),1)]),_:2},1024),e(y,{"align-self":"center",cols:"2",class:"text-center"},{default:l(()=>[b(R(c.Prix),1)]),_:2},1024),e(y,{"align-self":"center",cols:"2",class:"text-center"},{default:l(()=>[b(R(h(Ce).montant(c.Bilan.AvecOption))+" ",1),s[6]||(s[6]=z("br",null,null,-1)),z("span",oi,R(c.Bilan.AvecOptionDescription),1)]),_:2},1024),e(y,{"align-self":"center",cols:"3",class:"text-center"},{default:l(()=>{var m;return[(m=c.Bilan.Aides)!=null&&m.length?K("",!0):(f(),Q("span",ri,"-")),(f(!0),Q(le,null,fe(c.Bilan.Aides,g=>(f(),w(Te,null,{default:l(()=>[b(R(g.Structure)+" : "+R(h(Ce).montant(g.Montant)),1)]),_:2},1024))),256))]}),_:2},1024),e(y,{"align-self":"center",cols:"2",class:"text-right"},{default:l(()=>[b(R(c.Bilan.AvecAides),1)]),_:2},1024)]),_:2},1024),a(c.Bilan)?(f(),w(N,{key:0,"no-gutters":""},{default:l(()=>[e(y,{cols:"10",class:"text-right"},{default:l(()=>[z("i",null,R(r(c.Bilan.Remises)),1)]),_:2},1024),e(y,{cols:"2",class:"text-right"},{default:l(()=>[b(R(c.Bilan.Net),1)]),_:2},1024)]),_:2},1024)):K("",!0)],64))),256)),e(ce,{thickness:"1",class:"my-2"}),e(N,null,{default:l(()=>[e(y,{cols:"10",class:"text-right"},{default:l(()=>s[7]||(s[7]=[b("Total demandé")])),_:1}),e(y,{cols:"2",class:"text-right"},{default:l(()=>[b(R(u.dossier.Bilan.Demande),1)]),_:1})]),_:1}),e(ce,{thickness:"1",class:"my-2"}),(f(!0),Q(le,null,fe(d.value,c=>(f(),w(N,null,{default:l(()=>[e(y,null,{default:l(()=>[b(" Paiement de "+R(c.Payeur)+", le "+R(h(Ce).date(c.Time)),1)]),_:2},1024),e(y,{cols:"2",class:"text-right"},{default:l(()=>[b(R(c.IsRemboursement?"+":"-")+R(h(Ce).montant(c.Montant)),1)]),_:2},1024)]),_:2},1024))),256)),e(N,null,{default:l(()=>[e(y,{cols:"10",class:"text-right"},{default:l(()=>s[8]||(s[8]=[b("Solde")])),_:1}),e(y,{cols:"2",class:"text-right"},{default:l(()=>[z("b",null,R(u.dossier.Bilan.Restant),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["subtitle"]))}}),ci=j({__name:"DossierEditCard",props:{responsable:{},dossier:{}},emits:["save"],setup(t,{emit:u}){const n=t,o=u,a=$(Pe(n.dossier));return(r,d)=>{const i=vt,s=en,c=ht;return f(),w(Y,null,{default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(y,null,{default:l(()=>[e(i,{label:"Responsable","initial-personne":n.responsable,"model-value":a.value.IdResponsable,"onUpdate:modelValue":d[0]||(d[0]=m=>m?a.value.IdResponsable=m:void 0),api:{SelectPersonne:h(M).SelectPersonne.bind(h(M))}},null,8,["initial-personne","model-value","api"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(y,null,{default:l(()=>[e(s,{label:"Adresses mail en copie",modelValue:a.value.CopiesMails,"onUpdate:modelValue":d[1]||(d[1]=m=>a.value.CopiesMails=m),rule:h(ga).validMails()},null,8,["modelValue","rule"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(y,null,{default:l(()=>[e(c,{"hide-details":"",modelValue:a.value.PartageAdressesOK,"onUpdate:modelValue":d[2]||(d[2]=m=>a.value.PartageAdressesOK=m),label:"Partage des coordonnées"},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(y,null,{default:l(()=>[e(c,{"hide-details":"",modelValue:a.value.DemandeFondSoutien,"onUpdate:modelValue":d[3]||(d[3]=m=>a.value.DemandeFondSoutien=m),label:"Demande le fond de soutien"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(ie,null,{default:l(()=>[e(ne),e(B,{onClick:d[4]||(d[4]=m=>o("save",a.value))},{default:l(()=>d[5]||(d[5]=[b("Enregistrer")])),_:1})]),_:1})]),_:1})}}}),mi=j({__name:"OptionJournee",props:_e({camp:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const u=t,n=Ve(t,"modelValue"),o=T(()=>(u.camp.OptionPrix.Jours||[]).map((a,r)=>r));return(a,r)=>(f(),w(Y,null,{default:l(()=>[e(W,null,{default:l(()=>{var d;return[r[1]||(r[1]=z("div",{class:"text-grey mb-2"}," Le prix est variable en fonction des jours de participation au camp. ",-1)),e(Va,{class:"overflow-x-auto",color:"secondary",multiple:"","model-value":(d=n.value)!=null&&d.length?n.value:o.value,"onUpdate:modelValue":r[0]||(r[0]=i=>n.value=i.length==o.value.length?[]:i)},{default:l(()=>[(f(!0),Q(le,null,fe(u.camp.OptionPrix.Jours,(i,s)=>(f(),w(B,null,{default:l(()=>[b("J "+R(s+1),1)]),_:2},1024))),256))]),_:1},8,["model-value"])]}),_:1})]),_:1}))}}),vi=j({__name:"OptionStatut",props:_e({camp:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const u=t,n=Ve(t,"modelValue"),o=T(()=>(u.camp.OptionPrix.Statuts||[]).map(r=>({value:r.Id,title:r.Label,subtitle:r.Description}))),a=T(()=>o.value.map(r=>r.value).includes(n.value));return(r,d)=>(f(),w(Y,null,{default:l(()=>[e(W,null,{default:l(()=>[d[1]||(d[1]=z("div",{class:"text-grey mb-4"},"Le prix dépend du statut du participant.",-1)),e(Ae,{clearable:"",items:o.value,label:"Statut","model-value":a.value?n.value:null,"onUpdate:modelValue":d[0]||(d[0]=i=>n.value=i??0),variant:"outlined",density:"comfortable","hide-details":""},{item:l(({item:i,props:s})=>[e(te,Z(s,{title:i.title,subtitle:i.raw.subtitle}),null,16,["title","subtitle"])]),_:1},8,["items","model-value"])]),_:1})]),_:1}))}}),fi={key:2},pi=j({__name:"ParticipantOptionPrix",props:{camp:{},optionAndQf:{}},emits:["update"],setup(t,{emit:u}){const n=t,o=u,a=$(Pe(n.optionAndQf));return De(()=>n.optionAndQf,()=>a.value=Pe(n.optionAndQf)),(r,d)=>{const i=Ye;return f(),w(Y,{title:"Prix variable",width:"800px"},{default:l(()=>[e(W,null,{default:l(()=>[e(N,{justify:"space-evenly"},{default:l(()=>[e(y,{"align-self":"center",cols:"3"},{default:l(()=>[e(i,{modelValue:a.value.quotientFamilial,"onUpdate:modelValue":d[0]||(d[0]=s=>a.value.quotientFamilial=s),label:"Quotient familial","hide-details":""},null,8,["modelValue"])]),_:1}),e(ce,{thickness:"2",vertical:""}),e(y,{"align-self":"center",cols:"8"},{default:l(()=>[n.camp.OptionPrix.Active==h(xe).PrixJour?(f(),w(mi,{key:0,camp:n.camp,modelValue:a.value.options.Jour,"onUpdate:modelValue":d[1]||(d[1]=s=>a.value.options.Jour=s)},null,8,["camp","modelValue"])):n.camp.OptionPrix.Active==h(xe).PrixStatut?(f(),w(vi,{key:1,camp:n.camp,modelValue:a.value.options.IdStatut,"onUpdate:modelValue":d[2]||(d[2]=s=>a.value.options.IdStatut=s)},null,8,["camp","modelValue"])):(f(),Q("div",fi,"Le camp ne propose pas d'option sur le prix."))]),_:1})]),_:1})]),_:1}),e(ie,null,{default:l(()=>[e(ne),e(B,{onClick:d[3]||(d[3]=s=>o("update",a.value))},{default:l(()=>d[4]||(d[4]=[b("Enregistrer")])),_:1})]),_:1})]),_:1})}}}),yi={key:1,class:"mx-1"},bi={key:2,class:"mx-1"},gi={key:3},Vi={key:4,class:"mx-1"},ki=j({__name:"RemisesChip",props:{remises:{}},emits:["update"],setup(t,{emit:u}){const n=t,o=u,a=T(()=>r.value.ReducEnfants!=0||r.value.ReducEquipiers!=0||r.value.ReducSpeciale.Cent!=0),r=$(Pe(n.remises));De(()=>n.remises,()=>r.value=Pe(n.remises));const d=$(!1);return(i,s)=>{const c=Ye,m=We;return f(),w(Se,{"close-on-content-click":!1,location:"bottom",modelValue:d.value,"onUpdate:modelValue":s[4]||(s[4]=g=>d.value=g)},{activator:l(({props:g})=>[e(Y,Z(g,{elevation:"1",color:"grey-lighten-2"}),{default:l(()=>[e(W,{class:"py-1 px-1"},{default:l(()=>[a.value?K("",!0):(f(),Q(le,{key:0},[b(" Pas de remises ")],64)),r.value.ReducEnfants?(f(),Q("span",yi," Enfants : "+R(r.value.ReducEnfants)+"% ",1)):K("",!0),r.value.ReducEquipiers?(f(),Q("span",bi," Equipiers : "+R(r.value.ReducEquipiers)+"% ",1)):K("",!0),(r.value.ReducEnfants||r.value.ReducEquipiers)&&r.value.ReducSpeciale.Cent?(f(),Q("br",gi)):K("",!0),r.value.ReducSpeciale.Cent?(f(),Q("span",Vi," Remise : "+R(h(Ce).montant(r.value.ReducSpeciale)),1)):K("",!0)]),_:1})]),_:2},1040)]),default:l(()=>[e(Y,{title:"Modifier les remises",width:"400px"},{default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(y,null,{default:l(()=>[e(c,{modelValue:r.value.ReducEnfants,"onUpdate:modelValue":s[0]||(s[0]=g=>r.value.ReducEnfants=g),label:"Remise enfants","hide-details":"",suffix:"%"},null,8,["modelValue"])]),_:1}),e(y,null,{default:l(()=>[e(c,{modelValue:r.value.ReducEquipiers,"onUpdate:modelValue":s[1]||(s[1]=g=>r.value.ReducEquipiers=g),label:"Remise équipiers","hide-details":"",suffix:"%"},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(y,null,{default:l(()=>[e(m,{class:"mt-2",modelValue:r.value.ReducSpeciale,"onUpdate:modelValue":s[2]||(s[2]=g=>r.value.ReducSpeciale=g),label:"Remise spéciale","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(ie,null,{default:l(()=>[e(ne),e(B,{onClick:s[3]||(s[3]=g=>{o("update",r.value),d.value=!1})},{default:l(()=>s[5]||(s[5]=[b("Enregistrer")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),_i=$t(ki,[["__scopeId","data-v-01096379"]]),Ci=j({__name:"AideEditCard",props:{aide:{},structures:{},participant:{}},emits:["save"],setup(t,{emit:u}){const n=t,o=u,a=$(Pe(n.aide)),r=T(()=>Object.values(n.structures).map(d=>({value:d.Id,title:d.Nom})));return(d,i)=>{const s=ht,c=We,m=Ye;return f(),w(Y,{title:"Modifier l'aide extérieure",subtitle:`pour ${h(Ue).label(n.participant.Personne)} - ${h(ge).label(n.participant.Camp)}`},{default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(y,null,{default:l(()=>[e(Ae,{variant:"outlined",density:"comfortable",label:"Structure",items:r.value,modelValue:a.value.IdStructureaide,"onUpdate:modelValue":i[0]||(i[0]=g=>a.value.IdStructureaide=g)},null,8,["items","modelValue"])]),_:1}),e(y,null,{default:l(()=>[e(s,{modelValue:a.value.Valide,"onUpdate:modelValue":i[1]||(i[1]=g=>a.value.Valide=g),label:"Aide validée","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(y,{"align-self":"center"},{default:l(()=>[e(c,{modelValue:a.value.Valeur,"onUpdate:modelValue":i[2]||(i[2]=g=>a.value.Valeur=g),label:"Montant","hide-details":""},null,8,["modelValue"])]),_:1}),e(y,{"align-self":"center",cols:"auto"},{default:l(()=>[e(s,{"hide-details":"",label:"Par jour",modelValue:a.value.ParJour,"onUpdate:modelValue":i[3]||(i[3]=g=>a.value.ParJour=g)},null,8,["modelValue"])]),_:1}),e(y,{"align-self":"center"},{default:l(()=>[e(m,{label:"Limite",suffix:"jours",modelValue:a.value.NbJoursMax,"onUpdate:modelValue":i[4]||(i[4]=g=>a.value.NbJoursMax=g),disabled:!a.value.ParJour,hint:"0 pour ne pas limiter",min:0,"persistent-hint":""},null,8,["modelValue","disabled"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(y,null,{default:l(()=>i[6]||(i[6]=[b(" TODO: justificatif ")])),_:1})]),_:1})]),_:1}),e(ie,null,{default:l(()=>[e(ne),e(B,{onClick:i[5]||(i[5]=g=>o("save",a.value))},{default:l(()=>i[7]||(i[7]=[b("Enregistrer")])),_:1})]),_:1})]),_:1},8,["subtitle"])}}}),xi={key:0},Pi={key:1},Di=j({__name:"DossierParticipantRow",props:{participant:{},aides:{},structures:{},hasManyParticipants:{type:Boolean}},emits:["update","delete","createAide","updateAide","deleteAide","expand"],setup(t,{emit:u}){const n=t,o=u,a=T(()=>{const U=Object.values(n.aides||{});return U.sort((v,x)=>v.Id-x.Id),U}),r=T(()=>n.participant.Camp.OptionPrix.Active==xe.NoOption&&!ge.isQuotientFamilialActive(n.participant.Camp.OptionQuotientFamilial));function d(U){var v,x;switch(n.participant.Camp.OptionPrix.Active){case xe.NoOption:return"Séjour sans option";case xe.PrixJour:const I=((v=U.Jour)==null?void 0:v.length)||0;return I==0?"Présent tous les jours":`Présent ${I} jour${I>1?"s":""}`;case xe.PrixStatut:const A=(x=n.participant.Camp.OptionPrix.Statuts)==null?void 0:x.find(P=>P.Id==U.IdStatut);return A?`Statut ${A.Label}`:"Pas d'option."}}const i=$(!1),s=$(!1),c=T(()=>Object.values(n.structures).map(U=>({value:U.Id,title:U.Nom}))),m=$(null),g=$(null),p=$(null);return(U,v)=>(f(),w(N,null,{default:l(()=>[e(y,{"align-self":"center",cols:"3"},{default:l(()=>[e(fl,null,{default:l(()=>[z("a",{href:"/camps",onClick:v[0]||(v[0]=st(x=>h(Ut)(n.participant.Participant),["prevent"]))},R(h(Ue).label(n.participant.Personne)),1)]),_:1}),e(pl,null,{default:l(()=>[b(R(h(ge).label(n.participant.Camp)),1)]),_:1})]),_:1}),e(y,{"align-self":"center",cols:"2",class:"text-center"},{default:l(()=>[e(Se,{disabled:r.value,"close-on-content-click":!1,modelValue:i.value,"onUpdate:modelValue":v[2]||(v[2]=x=>i.value=x)},{activator:l(({props:x})=>[e(Y,Z(x,{elevation:r.value?0:1,color:"grey-lighten-2"}),{default:l(()=>[e(W,{class:"py-1 px-1"},{default:l(()=>[r.value?(f(),Q("div",xi,"Camp sans option")):(f(),Q("div",Pi,[b(R(n.participant.Participant.QuotientFamilial?`QF ${n.participant.Participant.QuotientFamilial}.`:"Pas de QF.")+" ",1),v[16]||(v[16]=z("br",null,null,-1)),b(" "+R(d(n.participant.Participant.OptionPrix)),1)]))]),_:1})]),_:2},1040,["elevation"])]),default:l(()=>[e(pi,{camp:n.participant.Camp,"option-and-qf":{options:n.participant.Participant.OptionPrix,quotientFamilial:n.participant.Participant.QuotientFamilial},onUpdate:v[1]||(v[1]=x=>{n.participant.Participant.OptionPrix=x.options,n.participant.Participant.QuotientFamilial=x.quotientFamilial,i.value=!1,o("update",n.participant.Participant)})},null,8,["camp","option-and-qf"])]),_:1},8,["disabled","modelValue"])]),_:1}),e(y,{"align-self":"center",class:"text-center"},{default:l(()=>[a.value.length?K("",!0):(f(),w(Te,{key:0,label:""},{default:l(()=>v[17]||(v[17]=[b("Aucune aide")])),_:1})),(f(!0),Q(le,null,fe(a.value,x=>(f(),w(Te,{class:"my-1","prepend-icon":"mdi-cash-plus",color:x.Valide?"green":"orange",onClick:I=>g.value=x},{close:l(()=>[e(pe,{icon:"mdi-close-circle",onClick:st(I=>p.value=x,["stop"])},null,8,["onClick"])]),default:l(()=>[b(" "+R(n.structures[x.IdStructureaide].Nom)+" : "+R(h(Ce).montant(x.Valeur)),1)]),_:2},1032,["color","onClick"]))),256))]),_:1}),e(y,{"align-self":"center",class:"text-center",cols:"3"},{default:l(()=>[e(_i,{remises:n.participant.Participant.Remises,onUpdate:v[3]||(v[3]=x=>{n.participant.Participant.Remises=x,o("update",n.participant.Participant)})},null,8,["remises"])]),_:1}),e(y,{"align-self":"center",cols:"auto"},{default:l(()=>[e(Se,{location:"left"},{activator:l(({props:x})=>[e(B,Z(x,{icon:"mdi-dots-vertical",size:"small"}),null,16)]),default:l(()=>[e(he,{density:"comfortable"},{default:l(()=>[e(te,{title:"Ajouter une aide","prepend-icon":"mdi-cash-plus",onClick:v[4]||(v[4]=x=>m.value={IdParticipant:n.participant.Participant.Id,IdStructure:0})}),e(ce),n.hasManyParticipants?(f(),w(te,{key:0,"prepend-icon":"mdi-arrow-expand",title:"Étendre les options et remises",subtitle:"... au reste du dossier",onClick:v[5]||(v[5]=x=>o("expand"))})):K("",!0),e(ce),e(te,{title:"Supprimer","prepend-icon":"mdi-delete",onClick:v[6]||(v[6]=x=>s.value=!0)})]),_:1})]),_:1})]),_:1}),e(ae,{modelValue:s.value,"onUpdate:modelValue":v[8]||(v[8]=x=>s.value=x),"max-width":"600px"},{default:l(()=>[e(Y,{title:"Supprimer le participant"},{default:l(()=>[e(W,null,{default:l(()=>v[18]||(v[18]=[b(" Confirmez-vous la suppression de ce participant ? "),z("br",null,null,-1),b(" Attention, cette opération est irréversible. ")])),_:1}),e(ie,null,{default:l(()=>[e(ne),e(B,{color:"red",onClick:v[7]||(v[7]=x=>{o("delete"),s.value=!1})},{default:l(()=>v[19]||(v[19]=[b("Supprimer")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),m.value!=null?(f(),w(ae,{key:0,"model-value":m.value!=null,"onUpdate:modelValue":v[11]||(v[11]=x=>m.value=null),"max-width":"400px"},{default:l(()=>[e(Y,{title:"Ajouter une aide extérieure"},{default:l(()=>[e(W,null,{default:l(()=>[e(Ae,{variant:"outlined",density:"comfortable",label:"Structure",items:c.value,"model-value":m.value.IdStructure==0?null:m.value.IdStructure,"onUpdate:modelValue":v[9]||(v[9]=x=>m.value.IdStructure=x)},null,8,["items","model-value"])]),_:1}),e(ie,null,{default:l(()=>[e(ne),e(B,{color:"green",onClick:v[10]||(v[10]=x=>{o("createAide",m.value),m.value=null}),disabled:m.value.IdStructure==0},{default:l(()=>v[20]||(v[20]=[b("Créer")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])):K("",!0),p.value!=null?(f(),w(ae,{key:1,"model-value":p.value!=null,"onUpdate:modelValue":v[13]||(v[13]=x=>p.value=null),"max-width":"600px"},{default:l(()=>[e(Y,{title:"Supprimer l'aide"},{default:l(()=>[e(W,null,{default:l(()=>v[21]||(v[21]=[b(" Confirmez-vous la suppression de l'aide extérieure ? "),z("br",null,null,-1),b(" Attention, cette opération est irréversible. ")])),_:1}),e(ie,null,{default:l(()=>[e(ne),e(B,{color:"red",onClick:v[12]||(v[12]=x=>{o("deleteAide",p.value.Id),p.value=null})},{default:l(()=>v[22]||(v[22]=[b("Supprimer")])),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"])):K("",!0),g.value!=null?(f(),w(ae,{key:2,"model-value":g.value!=null,"onUpdate:modelValue":v[15]||(v[15]=x=>g.value=null),"max-width":"800px"},{default:l(()=>[e(Ci,{aide:g.value,structures:n.structures,participant:n.participant,onSave:v[14]||(v[14]=x=>{o("updateAide",x),g.value=null})},null,8,["aide","structures","participant"])]),_:1},8,["model-value"])):K("",!0)]),_:1}))}});function Re(t){let u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return String(t).padStart(u,"0")}const wi=ve({allowedValues:Function,ampm:Boolean,color:String,disabled:Boolean,displayedValue:null,double:Boolean,format:{type:Function,default:t=>t},max:{type:Number,required:!0},min:{type:Number,required:!0},scrollable:Boolean,readonly:Boolean,rotate:{type:Number,default:0},step:{type:Number,default:1},modelValue:{type:Number}},"VTimePickerClock"),tl=ye()({name:"VTimePickerClock",props:wi(),emits:{change:t=>!0,input:t=>!0},setup(t,u){let{emit:n}=u;const o=$(null),a=$(null),r=$(void 0),d=$(!1),i=$(null),s=$(null),{textColorClasses:c,textColorStyles:m}=yl(oe(t,"color")),{backgroundColorClasses:g,backgroundColorStyles:p}=ze(oe(t,"color")),U=T(()=>t.max-t.min+1),v=T(()=>t.double?U.value/2:U.value),x=T(()=>360/v.value),I=T(()=>x.value*Math.PI/180),A=T(()=>t.modelValue==null?t.min:t.modelValue),P=T(()=>.62),_=T(()=>{const C=[];for(let L=t.min;L<=t.max;L=L+t.step)C.push(L);return C});De(()=>t.modelValue,C=>{r.value=C});function H(C){r.value!==C&&(r.value=C),n("input",C)}function q(C){return!t.allowedValues||t.allowedValues(C)}function D(C){if(!t.scrollable||t.disabled)return;C.preventDefault();const L=Math.sign(-C.deltaY||1);let X=A.value;do X=X+L,X=(X-t.min+U.value)%U.value+t.min;while(!q(X)&&X!==A.value);X!==t.displayedValue&&H(X)}function ue(C){return t.double&&C-t.min>=v.value}function F(C){return ue(C)?P.value:1}function O(C){const L=t.rotate*Math.PI/180;return{x:Math.sin((C-t.min)*I.value+L)*F(C),y:-Math.cos((C-t.min)*I.value+L)*F(C)}}function k(C,L){const X=(Math.round(C/x.value)+(L?v.value:0))%U.value+t.min;return C<360-x.value/2?X:L?t.max-v.value+1:t.min}function J(C){const{x:L,y:X}=O(C);return{left:`${50+L*50}%`,top:`${50+X*50}%`}}function V(C,L){const X=L.x-C.x,me=L.y-C.y;return Math.sqrt(X*X+me*me)}function S(C,L){const X=2*Math.atan2(L.y-C.y-V(C,L),L.x-C.x);return Math.abs(X*180/Math.PI)}function G(C){i.value===null&&(i.value=C),s.value=C,H(C)}function E(C){var Ot,Bt;if(C.preventDefault(),!d.value&&C.type!=="click"||!o.value)return;const{width:L,top:X,left:me}=(Ot=o.value)==null?void 0:Ot.getBoundingClientRect(),{width:be}=((Bt=a.value)==null?void 0:Bt.getBoundingClientRect())??{width:0},{clientX:Be,clientY:nt}="touches"in C?C.touches[0]:C,Et={x:L/2,y:-L/2},Tt={x:Be-me,y:X-nt},Rt=Math.round(S(Et,Tt)-t.rotate+360)%360,Lt=t.double&&V(Et,Tt)<(be+be*P.value)/4,Al=Math.ceil(15/x.value);let Ne;for(let it=0;it<Al;it++)if(Ne=k(Rt+it*x.value,Lt),q(Ne)||(Ne=k(Rt-it*x.value,Lt),q(Ne)))return G(Ne)}function ee(C){t.disabled||(C.preventDefault(),window.addEventListener("mousemove",E),window.addEventListener("touchmove",E),window.addEventListener("mouseup",se),window.addEventListener("touchend",se),i.value=null,s.value=null,d.value=!0,E(C))}function se(C){C.stopPropagation(),window.removeEventListener("mousemove",E),window.removeEventListener("touchmove",E),window.removeEventListener("mouseup",se),window.removeEventListener("touchend",se),d.value=!1,s.value!==null&&q(s.value)&&n("change",s.value)}ke(()=>e("div",{class:[{"v-time-picker-clock":!0,"v-time-picker-clock--indeterminate":t.modelValue==null,"v-time-picker-clock--readonly":t.readonly}],onMousedown:ee,onTouchstart:ee,onWheel:D,ref:o},[e("div",{class:"v-time-picker-clock__inner",ref:a},[e("div",{class:[{"v-time-picker-clock__hand":!0,"v-time-picker-clock__hand--inner":ue(t.modelValue)},c.value],style:[{transform:`rotate(${t.rotate+x.value*(A.value-t.min)}deg) scaleY(${F(A.value)})`},m.value]},null),_.value.map(C=>{const L=C===A.value;return e("div",{class:[{"v-time-picker-clock__item":!0,"v-time-picker-clock__item--active":L,"v-time-picker-clock__item--disabled":t.disabled||!q(C)},L&&g.value],style:[J(C),L&&p.value]},[e("span",null,[t.format(C)])])})])]))}});var de=function(t){return t[t.Hour=1]="Hour",t[t.Minute=2]="Minute",t[t.Second=3]="Second",t}(de||{});const Si=ve({ampm:Boolean,ampmInTitle:Boolean,ampmReadonly:Boolean,color:String,disabled:Boolean,hour:Number,minute:Number,second:Number,period:String,readonly:Boolean,useSeconds:Boolean,selecting:Number,value:Number},"VTimePickerControls"),ll=ye()({name:"VTimePickerControls",props:Si(),emits:{"update:period":t=>!0,"update:selecting":t=>!0},setup(t,u){let{emit:n,slots:o}=u;const{t:a}=et();return ke(()=>{let r=t.hour;return t.ampm&&(r=r?(r-1)%12+1:12),e("div",{class:"v-time-picker-controls"},[e("div",{class:{"v-time-picker-controls__time":!0,"v-time-picker-controls__time--with-seconds":t.useSeconds}},[e(B,{active:t.selecting===1,color:t.selecting===1?t.color:void 0,disabled:t.disabled,variant:"tonal",class:{"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time--with-ampm__btn":t.ampm,"v-time-picker-controls__time--with-seconds__btn":t.useSeconds},text:t.hour==null?"--":Re(`${r}`),onClick:()=>n("update:selecting",de.Hour)},null),e("span",{class:["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":t.useSeconds}]},[b(":")]),e(B,{active:t.selecting===2,color:t.selecting===2?t.color:void 0,class:{"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":t.selecting===2,"v-time-picker-controls__time--with-ampm__btn":t.ampm,"v-time-picker-controls__time--with-seconds__btn":t.useSeconds},disabled:t.disabled,variant:"tonal",text:t.minute==null?"--":Re(t.minute),onClick:()=>n("update:selecting",de.Minute)},null),t.useSeconds&&e("span",{class:["v-time-picker-controls__time__separator",{"v-time-picker-controls--with-seconds__time__separator":t.useSeconds}],key:"secondsDivider"},[b(":")]),t.useSeconds&&e(B,{key:"secondsVal",variant:"tonal",onClick:()=>n("update:selecting",de.Second),class:{"v-time-picker-controls__time__btn":!0,"v-time-picker-controls__time__btn__active":t.selecting===3,"v-time-picker-controls__time--with-seconds__btn":t.useSeconds},disabled:t.disabled,text:t.second==null?"--":Re(t.second)},null),t.ampm&&t.ampmInTitle&&e("div",{class:["v-time-picker-controls__ampm",{"v-time-picker-controls__ampm--readonly":t.ampmReadonly}]},[e(B,{active:t.period==="am",color:t.period==="am"?t.color:void 0,class:{"v-time-picker-controls__ampm__am":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":t.period==="am"},disabled:t.disabled,text:a("$vuetify.timePicker.am"),variant:t.disabled&&t.period==="am"?"elevated":"tonal",onClick:()=>t.period!=="am"?n("update:period","am"):null},null),e(B,{active:t.period==="pm",color:t.period==="pm"?t.color:void 0,class:{"v-time-picker-controls__ampm__pm":!0,"v-time-picker-controls__ampm__btn":!0,"v-time-picker-controls__ampm__btn__active":t.period==="pm"},disabled:t.disabled,text:a("$vuetify.timePicker.pm"),variant:t.disabled&&t.period==="pm"?"elevated":"tonal",onClick:()=>t.period!=="pm"?n("update:period","pm"):null},null)])])])}),{}}}),Ii=$e(24),Ml=$e(12),Mi=Ml.map(t=>t+12);$e(60);const $i={1:"hour",2:"minute",3:"second"},Ai=ve({allowedHours:[Function,Array],allowedMinutes:[Function,Array],allowedSeconds:[Function,Array],ampmInTitle:Boolean,disabled:Boolean,format:{type:String,default:"ampm"},max:String,min:String,modelValue:null,readonly:Boolean,scrollable:Boolean,useSeconds:Boolean,...je(At({title:"$vuetify.timePicker.title"}),["landscape"])},"VTimePicker"),hi=ye()({name:"VTimePicker",props:Ai(),emits:{"update:hour":t=>!0,"update:minute":t=>!0,"update:period":t=>!0,"update:second":t=>!0,"update:modelValue":t=>!0},setup(t,u){let{emit:n,slots:o}=u;const{t:a}=et(),r=$(null),d=$(null),i=$(null),s=$(null),c=$(null),m=$(null),g=$("am"),p=$(de.Hour),U=$(null),v=$(null),x=T(()=>{let V;if(t.allowedHours instanceof Array?V=E=>t.allowedHours.includes(E):V=t.allowedHours,!t.min&&!t.max)return V;const S=t.min?Number(t.min.split(":")[0]):0,G=t.max?Number(t.max.split(":")[0]):23;return E=>E>=S*1&&E<=G*1&&(!V||V(E))}),I=T(()=>{let V;const S=!x.value||r.value===null||x.value(r.value);if(t.allowedMinutes instanceof Array?V=X=>t.allowedMinutes.includes(X):V=t.allowedMinutes,!t.min&&!t.max)return S?V:()=>!1;const[G,E]=t.min?t.min.split(":").map(Number):[0,0],[ee,se]=t.max?t.max.split(":").map(Number):[23,59],C=G*60+E*1,L=ee*60+se*1;return X=>{const me=60*r.value+X;return me>=C&&me<=L&&S&&(!V||V(X))}}),A=T(()=>{let V;const G=(!x.value||r.value===null||x.value(r.value))&&(!I.value||d.value===null||I.value(d.value));if(t.allowedSeconds instanceof Array?V=Be=>t.allowedSeconds.includes(Be):V=t.allowedSeconds,!t.min&&!t.max)return G?V:()=>!1;const[E,ee,se]=t.min?t.min.split(":").map(Number):[0,0,0],[C,L,X]=t.max?t.max.split(":").map(Number):[23,59,59],me=E*3600+ee*60+(se||0)*1,be=C*3600+L*60+(X||0)*1;return Be=>{const nt=3600*r.value+60*d.value+Be;return nt>=me&&nt<=be&&G&&(!V||V(Be))}}),P=T(()=>t.format==="ampm");De(()=>t.modelValue,V=>ue(V)),Oe(()=>{ue(t.modelValue)});function _(){return r.value!=null&&d.value!=null&&(!t.useSeconds||i.value!=null)?`${Re(r.value)}:${Re(d.value)}`+(t.useSeconds?`:${Re(i.value)}`:""):null}function H(){const V=_();V!==null&&n("update:modelValue",V)}function q(V){return V?(V-1)%12+1:12}function D(V,S){return V%12+(S==="pm"?12:0)}function ue(V){if(V==null||V==="")r.value=null,d.value=null,i.value=null;else if(V instanceof Date)r.value=V.getHours(),d.value=V.getMinutes(),i.value=V.getSeconds();else{const[S,,G,,E,ee]=V.trim().toLowerCase().match(/^(\d+):(\d+)(:(\d+))?([ap]m)?$/)||new Array(6);r.value=ee?D(parseInt(S,10),ee):parseInt(S,10),d.value=parseInt(G,10),i.value=parseInt(E||0,10)}g.value=r.value==null||r.value<12?"am":"pm"}function F(V,S){const G=x.value;if(!G)return S;const E=P.value?S<12?Ml:Mi:Ii;return((E.find(se=>G((se+S)%E.length+E[0]))||0)+S)%E.length+E[0]}function O(V){if(g.value=V,r.value!=null){const S=r.value+(g.value==="am"?-12:12);r.value=F("hour",S)}return n("update:period",V),H(),!0}function k(V){p.value===de.Hour?r.value=P.value?D(V,g.value):V:p.value===de.Minute?d.value=V:i.value=V}function J(V){switch($i[p.value]){case"hour":n("update:hour",V);break;case"minute":n("update:minute",V);break;case"second":n("update:second",V);break}const S=r.value!==null&&d.value!==null&&(t.useSeconds?i.value!==null:!0);p.value===de.Hour?p.value=de.Minute:t.useSeconds&&p.value===de.Minute&&(p.value=de.Second),!(r.value===s.value&&d.value===c.value&&(!t.useSeconds||i.value===m.value)||_()===null)&&(s.value=r.value,c.value=d.value,t.useSeconds&&(m.value=i.value),S&&H())}ke(()=>{const V=rt.filterProps(t),S=ll.filterProps(t),G=tl.filterProps(je(t,["format","modelValue","min","max"]));return e(rt,Z(V,{color:void 0,class:["v-time-picker",t.class],style:t.style}),{title:()=>{var E;return((E=o.title)==null?void 0:E.call(o))??e("div",{class:"v-time-picker__title"},[a(t.title)])},header:()=>e(ll,Z(S,{ampm:P.value||t.ampmInTitle,ampmReadonly:P.value&&!t.ampmInTitle,hour:r.value,minute:d.value,period:g.value,second:i.value,selecting:p.value,"onUpdate:period":E=>O(E),"onUpdate:selecting":E=>p.value=E,ref:U}),null),default:()=>e(tl,Z(G,{allowedValues:p.value===de.Hour?x.value:p.value===de.Minute?I.value:A.value,double:p.value===de.Hour&&!P.value,format:p.value===de.Hour?P.value?q:E=>E:E=>Re(E,2),max:p.value===de.Hour?P.value&&g.value==="am"?11:23:59,min:p.value===de.Hour&&P.value&&g.value==="pm"?12:0,size:20,step:p.value===de.Hour?1:5,modelValue:p.value===de.Hour?r.value:p.value===de.Minute?d.value:i.value,onChange:J,onInput:k,ref:v}),null),actions:o.actions})})}}),Ui=j({__name:"TimeField",props:_e({hideDetails:{type:Boolean},readonly:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const u=t,n=Ve(t,"modelValue"),o=T(()=>new Date(n.value).toLocaleTimeString(void 0,{hour:"numeric",minute:"numeric"}));function a(i){const[s,c]=i.split(":"),m=new Date(n.value);m.setHours(Number(s),Number(c)),n.value=m.toISOString()}function r(i){const s=new Date(i),c=new Date(n.value);s.setHours(c.getHours(),c.getMinutes(),c.getSeconds()),n.value=s.toISOString()}const d=$(!1);return(i,s)=>{const c=wl;return f(),w(N,{"no-gutters":""},{default:l(()=>[e(y,null,{default:l(()=>[e(c,{class:"mr-2",label:"Date","model-value":h(ul)(new Date(n.value)),"onUpdate:modelValue":r,"hide-details":u.hideDetails,readonly:u.readonly},null,8,["model-value","hide-details","readonly"])]),_:1}),e(y,{cols:"auto"},{default:l(()=>s[1]||(s[1]=[z("div",{class:"ma-2"},null,-1)])),_:1}),e(y,null,{default:l(()=>[e(Se,{"close-on-content-click":!1,modelValue:d.value,"onUpdate:modelValue":s[0]||(s[0]=m=>d.value=m)},{activator:l(({props:m})=>[e(re,Z({class:"center-text"},m,{variant:"outlined",density:"compact","hide-details":u.hideDetails,label:"Moment","model-value":o.value}),null,16,["hide-details","model-value"])]),default:l(()=>[e(h(hi),{"model-value":new Date(n.value),"onUpdate:modelValue":a,format:"24hr"},null,8,["model-value"])]),_:1},8,["modelValue"])]),_:1})]),_:1})}}}),Ei=$t(Ui,[["__scopeId","data-v-4a17089b"]]),Ti=j({__name:"ModePaiementField",props:_e({hideDetails:{type:Boolean},readonly:{type:Boolean},rules:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(t){const u=t,n=Ve(t,"modelValue"),o=Ze(ka);return(a,r)=>(f(),w(Ae,{label:"Mode de paiement",variant:"outlined",density:"compact",items:h(o),readonly:u.readonly,"hide-details":u.hideDetails,modelValue:n.value,"onUpdate:modelValue":r[0]||(r[0]=d=>n.value=d),rules:u.rules},null,8,["items","readonly","hide-details","modelValue","rules"]))}}),Ri=j({__name:"PaiementEditCard",props:{paiement:{}},emits:["update","delete"],setup(t,{emit:u}){const n=t,o=u,a=$(Pe(n.paiement)),r=T(()=>!0),d=$(!1);return(i,s)=>{const c=Ti,m=We,g=Ei;return f(),w(Y,{title:"Modifier le paiement"},{default:l(()=>[e(ae,{modelValue:d.value,"onUpdate:modelValue":s[1]||(s[1]=p=>d.value=p),"max-width":"400px"},{default:l(()=>[e(Y,{title:"Confirmation"},{default:l(()=>[e(W,null,{default:l(()=>s[11]||(s[11]=[b(" Confirmez-vous la suppression de ce paiement ? "),z("br",null,null,-1),z("br",null,null,-1),b(" Attention, cette opération est irréversible. ")])),_:1}),e(ie,null,{default:l(()=>[e(ne),e(B,{color:"red",onClick:s[0]||(s[0]=p=>{d.value=!1,o("delete")})},{default:l(()=>s[12]||(s[12]=[b("Supprimer")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(y,null,{default:l(()=>[e(re,{density:"compact",variant:"outlined","hide-details":"",label:"Payé par",modelValue:a.value.Payeur,"onUpdate:modelValue":s[2]||(s[2]=p=>a.value.Payeur=p)},null,8,["modelValue"])]),_:1}),e(y,null,{default:l(()=>[e(re,{density:"compact",variant:"outlined","hide-details":"",label:"Description (optionelle)",modelValue:a.value.Label,"onUpdate:modelValue":s[3]||(s[3]=p=>a.value.Label=p)},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(y,null,{default:l(()=>[e(c,{modelValue:a.value.Mode,"onUpdate:modelValue":s[4]||(s[4]=p=>a.value.Mode=p),"hide-details":""},null,8,["modelValue"])]),_:1}),e(y,null,{default:l(()=>[e(m,{label:"Montant",modelValue:a.value.Montant,"onUpdate:modelValue":s[5]||(s[5]=p=>a.value.Montant=p),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(y,null,{default:l(()=>[e(at,{"hide-details":"",density:"compact",label:"Remboursement ?",modelValue:a.value.IsRemboursement,"onUpdate:modelValue":s[6]||(s[6]=p=>a.value.IsRemboursement=p)},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(y,null,{default:l(()=>[e(g,{modelValue:a.value.Time,"onUpdate:modelValue":s[7]||(s[7]=p=>a.value.Time=p),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),e(N,null,{default:l(()=>[e(y,null,{default:l(()=>[e(re,{density:"compact",variant:"outlined",label:"Détails (optionnel)",modelValue:a.value.Details,"onUpdate:modelValue":s[8]||(s[8]=p=>a.value.Details=p)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(ie,null,{default:l(()=>[e(B,{color:"red",onClick:s[9]||(s[9]=p=>d.value=!0)},{default:l(()=>s[13]||(s[13]=[b("Supprimer le paiement")])),_:1}),e(ne),e(B,{onClick:s[10]||(s[10]=p=>o("update",a.value)),disabled:!r.value},{default:l(()=>s[14]||(s[14]=[b("Enregistrer")])),_:1},8,["disabled"])]),_:1})]),_:1})}}}),Li={class:"mr-1"},Oi=["onClick"],Bi={class:"overflow-y-auto",style:{"max-height":"65vh"}},Ni=["href"],Fi=j({__name:"DossierDetailsPannel",props:{dossier:{},structures:{},camps:{}},emits:["updateDossier","deleteDossier","mergeDossier","createParticipant","updateParticipant","deleteParticipant","expandParticipant","createAide","updateAide","deleteAide","createPaiement","updatePaiement","deletePaiement","sendMessage","deleteMessage"],setup(t,{expose:u,emit:n}){const o=t,a=n;u({showEditPaiement:p,showEditDossier:c});function r(q){switch(q){case yt.NonCommence:return"red";case yt.EnCours:return"orange";case yt.Complet:return"green"}}const d=T(()=>_a(o.dossier.Dossier,"backoffice")),i=$(!1),s=$(!1);function c(){s.value=!0}const m=$(null),g=$(null);function p(q){g.value=q}const U="Repère",v=$(!1);async function x(){await bt(o.dossier.EspacepersoURL),M.showMessage("Lien vers l'espace personnel copié.")}async function I(){await bt(o.dossier.VirementCode),M.showMessage("Identifiant de virement copié.")}async function A(q){await bt(q),M.showMessage("IBAN copié.")}const P=$(!1),_=$(!1),H=$("");return(q,D)=>{const ue=ui,F=Mt,O=vt;return f(),w(Y,{title:`Dossier de ${o.dossier.Dossier.Responsable}`,class:"ml-2"},{subtitle:l(()=>[(f(!0),Q(le,null,fe(o.dossier.Dossier.Participants,k=>(f(),Q("span",Li,[z("a",{href:"/camps",onClick:st(J=>h(Ut)(k.Participant),["prevent"])},R(h(Ue).label(k.Personne)),9,Oi)]))),256))]),append:l(()=>[e(B,{icon:"mdi-pencil",onClick:D[0]||(D[0]=k=>s.value=!0),class:"mx-1"}),e(Le,{text:"Ajouter un paiement",location:"top"},{activator:l(({props:k})=>[e(B,Z({icon:"",size:"small",class:"mx-1"},k,{onClick:D[1]||(D[1]=J=>a("createPaiement"))}),{default:l(()=>[e(pe,{color:"green"},{default:l(()=>D[30]||(D[30]=[b("mdi-cash-plus")])),_:1})]),_:2},1040)]),_:1}),e(Le,{text:"Envoyer un message",location:"top"},{activator:l(({props:k})=>[e(B,Z({icon:"",size:"small",class:"mx-1"},k,{onClick:D[2]||(D[2]=J=>_.value=!0)}),{default:l(()=>[e(pe,{color:"green"},{default:l(()=>D[31]||(D[31]=[b("mdi-email-plus")])),_:1})]),_:2},1040)]),_:1}),e(Se,null,{activator:l(({props:k})=>[e(B,Z(k,{icon:"mdi-dots-vertical",size:"small",class:"mx-1"}),null,16)]),default:l(()=>[e(he,null,{default:l(()=>[e(te,{"prepend-icon":"mdi-link",onClick:D[3]||(D[3]=k=>v.value=!0),title:"Afficher les identifiants"}),e(ce),e(te,{"prepend-icon":"mdi-file-move",onClick:D[4]||(D[4]=k=>P.value=!0),title:"Fusionner vers ..."}),e(ce),e(te,{"prepend-icon":"mdi-delete",onClick:D[5]||(D[5]=k=>i.value=!0),title:"Supprimer"})]),_:1})]),_:1})]),default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(y,{class:"ml-2 mb-1 text-center"},{default:l(()=>[e(Se,null,{activator:l(({props:k})=>[e(Te,Z(k,{"prepend-icon":"mdi-currency-eur",color:r(o.dossier.Dossier.Bilan.Statut)}),{default:l(()=>[b(R(o.dossier.Dossier.Bilan.Recu)+" payé sur "+R(o.dossier.Dossier.Bilan.Demande),1)]),_:2},1040,["color"])]),default:l(()=>[e(di,{dossier:o.dossier.Dossier},null,8,["dossier"])]),_:1})]),_:1})]),_:1}),z("div",Bi,[e(zn,{side:"end",class:"mt-4",density:"compact"},{default:l(()=>[(f(!0),Q(le,null,fe(d.value,(k,J)=>(f(),w(ue,{event:k,key:J,onEditPaiement:D[6]||(D[6]=V=>g.value=V),onDeleteMessage:D[7]||(D[7]=V=>a("deleteMessage",V))},null,8,["event"]))),128))]),_:1})])]),_:1}),e(ae,{modelValue:i.value,"onUpdate:modelValue":D[9]||(D[9]=k=>i.value=k),"max-width":"600px"},{default:l(()=>[e(Y,{title:"Supprimer le dossier"},{default:l(()=>[e(W,null,{default:l(()=>D[32]||(D[32]=[b(" Confirmez-vous la suppression du dossier et de ses participants ? "),z("br",null,null,-1),z("br",null,null,-1),b(" Attention, cette opération est irréversible. ")])),_:1}),e(ie,null,{default:l(()=>[e(ne),e(B,{color:"red",onClick:D[8]||(D[8]=k=>{a("deleteDossier"),i.value=!1})},{default:l(()=>D[33]||(D[33]=[b("Supprimer")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),m.value!=null?(f(),w(ae,{key:0,"model-value":m.value!=null,"onUpdate:modelValue":D[13]||(D[13]=k=>m.value=null),"max-width":"600px"},{default:l(()=>[e(Y,{title:"Ajouter un participant"},{default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(y,{cols:"12"},{default:l(()=>[e(F,{label:"Camp",camps:o.camps,modelValue:m.value.IdCamp,"onUpdate:modelValue":D[10]||(D[10]=k=>m.value.IdCamp=k)},null,8,["camps","modelValue"])]),_:1}),e(y,{cols:"12"},{default:l(()=>[e(O,{label:"Personne","initial-personne":"",modelValue:m.value.IdPersonne,"onUpdate:modelValue":D[11]||(D[11]=k=>m.value.IdPersonne=k),api:{SelectPersonne:h(M).SelectPersonne.bind(h(M))}},null,8,["modelValue","api"])]),_:1})]),_:1})]),_:1}),e(ie,null,{default:l(()=>[e(ne),e(B,{color:"green",disabled:m.value.IdPersonne==0||m.value.IdCamp==0,onClick:D[12]||(D[12]=k=>{a("createParticipant",m.value),m.value=null})},{default:l(()=>D[34]||(D[34]=[b("Ajouter")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"])):K("",!0),e(ae,{modelValue:s.value,"onUpdate:modelValue":D[20]||(D[20]=k=>s.value=k)},{default:l(()=>[e(Y,{title:"Modifier le dossier"},{append:l(()=>[e(B,{onClick:D[14]||(D[14]=k=>m.value={IdCamp:0,IdPersonne:0,IdDossier:o.dossier.Dossier.Dossier.Id})},{prepend:l(()=>[e(pe,{color:"green"},{default:l(()=>D[35]||(D[35]=[b("mdi-plus")])),_:1})]),default:l(()=>[D[36]||(D[36]=b(" Ajouter un participant"))]),_:1})]),default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(y,{cols:"3"},{default:l(()=>[e(ci,{responsable:o.dossier.Dossier.Responsable,dossier:o.dossier.Dossier.Dossier,onSave:D[15]||(D[15]=k=>a("updateDossier",k))},null,8,["responsable","dossier"])]),_:1}),e(ce,{thickness:"4",vertical:""}),e(y,null,{default:l(()=>[D[37]||(D[37]=z("div",{class:"my-1"},null,-1)),(f(!0),Q(le,null,fe(o.dossier.Dossier.Participants,k=>{var J;return f(),w(Di,{participant:k,aides:(o.dossier.Dossier.Aides||{})[k.Participant.Id],structures:o.structures,"has-many-participants":(((J=o.dossier.Dossier.Participants)==null?void 0:J.length)||0)>1,onCreateAide:D[16]||(D[16]=V=>a("createAide",V)),onDeleteAide:D[17]||(D[17]=V=>a("deleteAide",V)),onUpdateAide:D[18]||(D[18]=V=>a("updateAide",V)),onUpdate:D[19]||(D[19]=V=>a("updateParticipant",V)),onDelete:V=>a("deleteParticipant",k.Participant.Id),onExpand:V=>a("expandParticipant",k.Participant)},null,8,["participant","aides","structures","has-many-participants","onDelete","onExpand"])}),256))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),g.value!=null?(f(),w(ae,{key:1,"model-value":g.value!=null,"onUpdate:modelValue":D[23]||(D[23]=k=>g.value=null),"max-width":"600px"},{default:l(()=>[e(Ri,{paiement:g.value,onUpdate:D[21]||(D[21]=k=>{a("updatePaiement",k),g.value=null}),onDelete:D[22]||(D[22]=k=>{a("deletePaiement",g.value),g.value=null})},null,8,["paiement"])]),_:1},8,["model-value"])):K("",!0),e(ae,{modelValue:v.value,"onUpdate:modelValue":D[24]||(D[24]=k=>v.value=k),"max-width":"800px"},{default:l(()=>[e(Y,{title:"Liens et identifiants"},{default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(y,{cols:"3"},{default:l(()=>D[38]||(D[38]=[b("Espace personnel")])),_:1}),e(y,{class:"text-truncate"},{default:l(()=>[z("a",{href:o.dossier.EspacepersoURL,target:"_blank"},R(o.dossier.EspacepersoURL),9,Ni)]),_:1}),e(y,{"align-self":"center",cols:"auto"},{default:l(()=>[e(B,{size:"small",icon:"mdi-content-copy",onClick:x})]),_:1})]),_:1}),(f(!0),Q(le,null,fe(o.dossier.BankAccounts,k=>(f(),w(N,null,{default:l(()=>[e(y,{cols:"3"},{default:l(()=>[b("RIB ("+R(h(U))+")",1)]),_:1}),e(y,{cols:"3"},{default:l(()=>[b(R(k[0]),1)]),_:2},1024),e(y,null,{default:l(()=>[b(R(k[1]),1)]),_:2},1024),e(y,{"align-self":"center",cols:"auto"},{default:l(()=>[e(B,{size:"small",icon:"mdi-content-copy",onClick:()=>A(k[1])},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),256)),e(N,null,{default:l(()=>[e(y,{cols:"3"},{default:l(()=>D[39]||(D[39]=[b("Identification de virement")])),_:1}),e(y,null,{default:l(()=>[b(R(o.dossier.VirementCode),1)]),_:1}),e(y,{"align-self":"center",cols:"auto"},{default:l(()=>[e(B,{size:"small",icon:"mdi-content-copy",onClick:I})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ae,{modelValue:P.value,"onUpdate:modelValue":D[26]||(D[26]=k=>P.value=k),"max-width":"600px"},{default:l(()=>[e(Sl,{from:o.dossier.Dossier.Dossier.Id,onMerge:D[25]||(D[25]=k=>{a("mergeDossier",k),P.value=!1})},null,8,["from"])]),_:1},8,["modelValue"]),e(ae,{modelValue:_.value,"onUpdate:modelValue":D[29]||(D[29]=k=>_.value=k),"max-width":"600px"},{default:l(()=>[e(Y,{title:"Nouveau message",subtitle:"Envoie un message sur le fil de suivi et une notification par mail."},{default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(y,null,{default:l(()=>[e(xt,{rows:"5",variant:"outlined",modelValue:H.value,"onUpdate:modelValue":D[27]||(D[27]=k=>H.value=k)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(ie,null,{default:l(()=>[e(ne),e(B,{disabled:!H.value.length,onClick:D[28]||(D[28]=k=>{a("sendMessage",H.value),_.value=!1})},{default:l(()=>D[40]||(D[40]=[b("Envoyer")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["title"])}}}),qi=j({__name:"CreateDossierCard",emits:["create"],setup(t,{emit:u}){const n=u,o=$(0);return(a,r)=>{const d=vt;return f(),w(Y,{title:"Créer un dossier"},{default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(y,null,{default:l(()=>[e(d,{label:"Responsable légal",modelValue:o.value,"onUpdate:modelValue":r[0]||(r[0]=i=>o.value=i),"initial-personne":"",api:{SelectPersonne:h(M).SelectPersonne.bind(h(M))}},null,8,["modelValue","api"])]),_:1})]),_:1})]),_:1}),e(ie,null,{default:l(()=>[e(ne),e(B,{color:"green",disabled:o.value==0,onClick:r[1]||(r[1]=i=>n("create",o.value))},{default:l(()=>r[2]||(r[2]=[b("Créer")])),_:1},8,["disabled"])]),_:1})]),_:1})}}}),zi=ve({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:we,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...tt(),...wa({location:"top end"}),...mt(),...ct(),...wt(),...Da({transition:"scale-rotate-transition"})},"VBadge"),ji=ye()({name:"VBadge",inheritAttrs:!1,props:zi(),setup(t,u){const{backgroundColorClasses:n,backgroundColorStyles:o}=ze(oe(t,"color")),{roundedClasses:a}=vl(t),{t:r}=et(),{textColorClasses:d,textColorStyles:i}=yl(oe(t,"textColor")),{themeClasses:s}=Ca(),{locationStyles:c}=xa(t,!0,m=>(t.floating?t.dot?2:4:t.dot?8:12)+(["top","bottom"].includes(m)?+(t.offsetY??0):["left","right"].includes(m)?+(t.offsetX??0):0));return ke(()=>{const m=Number(t.content),g=!t.max||isNaN(m)?t.content:m<=+t.max?m:`${t.max}+`,[p,U]=Pa(u.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return e(t.tag,Z({class:["v-badge",{"v-badge--bordered":t.bordered,"v-badge--dot":t.dot,"v-badge--floating":t.floating,"v-badge--inline":t.inline},t.class]},U,{style:t.style}),{default:()=>{var v,x;return[e("div",{class:"v-badge__wrapper"},[(x=(v=u.slots).default)==null?void 0:x.call(v),e(Dt,{transition:t.transition},{default:()=>{var I,A;return[bl(e("span",Z({class:["v-badge__badge",s.value,n.value,a.value,d.value],style:[o.value,i.value,t.inline?{}:c.value],"aria-atomic":"true","aria-label":r(t.label,m),"aria-live":"polite",role:"status"},p),[t.dot?void 0:u.slots.badge?(A=(I=u.slots).badge)==null?void 0:A.call(I):t.icon?e(pe,{icon:t.icon},null):g]),[[gl,t.modelValue]])]}})])]}})}),{}}}),Hi=j({__name:"DossierList",props:_e({camps:{},selected:{}},{query:{required:!0},queryModifiers:{}}),emits:_e(["click","update"],["update:query"]),setup(t,{expose:u,emit:n}){const o=t,a=n,r=Ve(t,"query");u({searchDossiers:s}),De(()=>r.value,s,{immediate:!0});const d=$(!1),i=$(null);async function s(){const m=await M.DossiersSearch(r.value);m!==void 0&&(i.value=m,a("update",m))}function c(){r.value.Pattern="sort:messages",s()}return(m,g)=>{const p=_l,U=Mt;return f(),Q("div",null,[e(N,null,{default:l(()=>[e(y,{"align-self":"center"},{default:l(()=>[e(p,{density:"compact",variant:"outlined","prepend-inner-icon":"mdi-magnify",label:"Rechercher un dossier","hide-details":"",clearable:"",modelValue:r.value.Pattern,"onUpdate:modelValue":[g[1]||(g[1]=v=>r.value.Pattern=v),s]},{append:l(()=>[e(Le,{text:"Trier selon les nouveaux messages"},{activator:l(({props:v})=>[e(B,Z(v,{icon:"",size:"small",class:"mr-1",onClick:c}),{default:l(()=>[e(pe,{color:"light-blue-darken-3"},{default:l(()=>g[5]||(g[5]=[b("mdi-email")])),_:1})]),_:2},1040)]),_:1}),e(Le,{text:"Autres critères de recherche"},{activator:l(({props:v})=>[e(B,Z({size:"small",variant:"flat"},v,{icon:d.value?"mdi-chevron-up":"mdi-chevron-down",onClick:g[0]||(g[0]=x=>d.value=!d.value)}),null,16,["icon"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(Sa,null,{default:l(()=>[bl(e(N,{class:"mx-0"},{default:l(()=>[e(y,{cols:"5"},{default:l(()=>[e(U,{label:"Camp",camps:o.camps,"model-value":h($a)(h(Aa)(r.value.IdCamp)),"onUpdate:modelValue":g[2]||(g[2]=v=>{r.value.IdCamp=h(Ia)(h(Ma)(v)),s()})},null,8,["camps","model-value"])]),_:1}),e(y,null,{default:l(()=>[e(Ae,{density:"compact",variant:"outlined",label:"Liste d'attente",modelValue:r.value.Attente,"onUpdate:modelValue":[g[3]||(g[3]=v=>r.value.Attente=v),s],items:h(Ze)(h(ha))},null,8,["modelValue","items"])]),_:1}),e(y,null,{default:l(()=>[e(Ae,{density:"compact",variant:"outlined",label:"Réglement",modelValue:r.value.Reglement,"onUpdate:modelValue":[g[4]||(g[4]=v=>r.value.Reglement=v),s],items:h(Ze)(h(Ua))},null,8,["modelValue","items"])]),_:1})]),_:1},512),[[gl,d.value]])]),_:1}),i.value!=null?(f(),w(he,{key:0,class:"mt-2",selected:o.selected?[o.selected]:void 0},{default:l(()=>{var v;return[(v=i.value.Dossiers)!=null&&v.length?K("",!0):(f(),w(te,{key:0,class:"text-center"},{default:l(()=>g[6]||(g[6]=[z("i",null,"Aucun dossier ne correspond à votre recherche.",-1)])),_:1})),(f(!0),Q(le,null,fe(i.value.Dossiers,(x,I)=>(f(),w(te,{rounded:"",key:I,title:x.Responsable,subtitle:x.Participants,value:x.Id,onClick:A=>a("click",x),class:"my-1"},Vl({_:2},[x.NewMessages?{name:"append",fn:l(()=>[e(ji,{color:"light-blue-darken-3",content:x.NewMessages},null,8,["content"])]),key:"0"}:void 0]),1032,["title","subtitle","value","onClick"]))),128))]}),_:1},8,["selected"])):K("",!0)])}}}),Qi={key:1,class:"text-center font-italic my-6"},Yi=j({__name:"PannelDossiers",props:{initialDossier:{}},setup(t){const u=t;Oe(()=>{d(),s(),u.initialDossier!==void 0&&p(u.initialDossier)}),De(()=>u.initialDossier,()=>{u.initialDossier!==void 0&&p(u.initialDossier)});const n=zt("detailsPannel"),o=$(null),a=$(Qa()),r=$([]);async function d(){const C=await M.GetCamps();C!==void 0&&(r.value=C||[])}const i=$({});async function s(){const C=await M.GetStructureaides();C!==void 0&&(i.value=C||{})}function c(C){var L;o.value={length:((L=C.Dossiers)==null?void 0:L.length)||0,total:C.Total}}const m=zt("dossierList");function g(){var C;(C=m.value)==null||C.searchDossiers()}async function p(C){await v(C),a.value=Ya(C)}const U=$(null);async function v(C){const L=await M.DossiersLoad({id:C});L!==void 0&&(U.value=L)}async function x(C){v(C.Id),await M.EventsMarkMessagesSeen({idDossier:C.Id})!==void 0&&g()}async function I(){U.value!=null&&v(U.value.Dossier.Dossier.Id)}const A=$(!1);async function P(C){var X;A.value=!1;const L=await M.DossiersCreate({idResponsable:C});L!==void 0&&(M.showMessage("Dossier créé avec succès."),await p(L.Id),(X=n.value)==null||X.showEditDossier())}async function _(C){const L=await M.DossiersUpdate(C);L!==void 0&&(M.showMessage("Dossier mis à jour avec succès."),U.value!=null&&(U.value.Dossier.Dossier=C,U.value.Dossier.Responsable=L.Responsable),g())}async function H(){if(U.value==null)return;const C=U.value.Dossier.Dossier.Id;await M.DossiersDelete({id:C})!==void 0&&(M.showMessage("Dossier supprimé avec succès."),U.value=null,g())}async function q(C){await M.DossiersMerge(C)!==void 0&&(M.showMessage("Dossier fusionné avec succès."),g(),v(C.To))}async function D(C){await M.ParticipantsCreate(C)!==void 0&&(M.showMessage("Participant ajouté avec succès."),I())}async function ue(C){await M.ParticipantsUpdate(C)!==void 0&&(M.showMessage("Réglages du participant modifiés avec succès."),I())}async function F(C){await M.ParticipantsDelete({id:C})!==void 0&&(M.showMessage("Participant supprimé avec succès."),I())}async function O(C){var me;if(U.value==null)return;const L=((me=U.value.Dossier.Participants)==null?void 0:me.map(be=>be.Participant).filter(be=>be.Id!=C.Id))||[];!L.length||(L.forEach(be=>{be.Remises=C.Remises,be.QuotientFamilial=C.QuotientFamilial,be.IdCamp==C.IdCamp&&(be.OptionPrix=C.OptionPrix)}),(await Promise.all(L.map(be=>M.ParticipantsUpdate(be)))).includes(void 0))||(M.showMessage("Réglages des participants modifiés avec succès."),I())}async function k(C){const L=await M.AidesCreate(C);if(L===void 0||(M.showMessage("Aide ajoutée avec succès."),U.value==null))return;const X=U.value.Dossier.Aides||{},me=X[C.IdParticipant]||{};me[L.Id]=L,X[C.IdParticipant]=me,U.value.Dossier.Aides=X}async function J(C){await M.AidesUpdate(C)!==void 0&&(M.showMessage("Aide modifiée avec succès."),I())}async function V(C){await M.AidesDelete({id:C})!==void 0&&(M.showMessage("Aide supprimée avec succès."),I())}async function S(){var L;if(U.value==null)return;const C=await M.PaiementsCreate({idDossier:U.value.Dossier.Dossier.Id});C!==void 0&&(M.showMessage("Paiement créé avec succès."),I(),(L=n.value)==null||L.showEditPaiement(C))}async function G(C){await M.PaiementsUpdate(C)!==void 0&&(M.showMessage("Paiement modifié avec succès."),I())}async function E(C){await M.PaiementsDelete({id:C.Id})!==void 0&&(M.showMessage("Paiement supprimé avec succès."),I())}async function ee(C){U.value==null||await M.EventsSendMessage({IdDossier:U.value.Dossier.Dossier.Id,Contenu:C})===void 0||(M.showMessage("Message envoyé avec succès."),I())}async function se(C){await M.EventsDelete({id:C.Id})!==void 0&&(M.showMessage("Message supprimé avec succès."),I())}return(C,L)=>(f(),w(N,{"no-gutters":"",class:"ma-2"},{default:l(()=>[e(ae,{modelValue:A.value,"onUpdate:modelValue":L[0]||(L[0]=X=>A.value=X),"max-width":"400px"},{default:l(()=>[e(qi,{onCreate:P})]),_:1},8,["modelValue"]),e(y,{cols:"6"},{default:l(()=>[e(Y,{title:"Dossiers",subtitle:o.value==null?"-":`${o.value.length} affiché(s) / ${o.value.total}`},{append:l(()=>[e(B,{icon:"",size:"small",onClick:L[1]||(L[1]=X=>A.value=!0)},{default:l(()=>[e(pe,{color:"green"},{default:l(()=>L[3]||(L[3]=[b("mdi-plus")])),_:1})]),_:1})]),default:l(()=>[e(W,null,{default:l(()=>{var X;return[e(Hi,{camps:r.value,selected:(X=U.value)==null?void 0:X.Dossier.Dossier.Id,query:a.value,"onUpdate:query":L[2]||(L[2]=me=>a.value=me),onClick:x,onUpdate:c,ref_key:"dossierList",ref:m},null,8,["camps","selected","query"])]}),_:1})]),_:1},8,["subtitle"])]),_:1}),e(y,null,{default:l(()=>[U.value!=null?(f(),w(Fi,{key:0,dossier:U.value,structures:i.value,camps:r.value,onUpdateDossier:_,onDeleteDossier:H,onMergeDossier:q,onCreateParticipant:D,onUpdateParticipant:ue,onDeleteParticipant:F,onExpandParticipant:O,onCreateAide:k,onDeleteAide:V,onUpdateAide:J,onCreatePaiement:S,onUpdatePaiement:G,onDeletePaiement:E,onSendMessage:ee,onDeleteMessage:se,ref_key:"detailsPannel",ref:n},null,8,["dossier","structures","camps"])):(f(),Q("div",Qi," Sélectionner un dossier... "))]),_:1})]),_:1}))}}),Wi=j({__name:"inscriptions",setup(t){const u=lt(),n=T(()=>eu(u.currentRoute.value.query)),o=T(()=>n.value.tab||"insc"),a=T(()=>n.value.idDossier);function r(d){const i=u.currentRoute.value;u.push({path:i.path,query:{tab:d}})}return(d,i)=>(f(),Q(le,null,[e(ft,{title:"Suivi des inscriptions"},{default:l(()=>[e(Ka,{"model-value":o.value,"onUpdate:modelValue":i[0]||(i[0]=s=>r(s))},{default:l(()=>[e(Qt,{value:"insc"},{default:l(()=>i[2]||(i[2]=[b("Nouvelles inscriptions")])),_:1}),e(Qt,{value:"doss"},{default:l(()=>i[3]||(i[3]=[b("Suivi des dossiers")])),_:1})]),_:1},8,["model-value"])]),_:1}),e(Wa,{"model-value":o.value},{default:l(()=>[e(Yt,{value:"insc"},{default:l(()=>[e(On,{onGoTo:h(Pt),onEmpty:i[1]||(i[1]=s=>h(Pt)())},null,8,["onGoTo"])]),_:1}),e(Yt,{value:"doss"},{default:l(()=>[e(Yi,{"initial-dossier":a.value},null,8,["initial-dossier"])]),_:1})]),_:1},8,["model-value"])],64))}}),Ki=j({__name:"PersonneEdit",props:{personne:{}},emits:["save"],setup(t,{emit:u}){const n=t,o=u,a=$(Pe(n.personne)),r=T(()=>!!(a.value.Nom&&a.value.Prenom));return(d,i)=>{const s=tn,c=ln;return f(),w(Y,{title:"Editer le profil"},{default:l(()=>[e(W,null,{default:l(()=>[e(ol,null,{default:l(()=>[e(N,null,{default:l(()=>[e(y,null,{default:l(()=>[e(re,{autofocus:"","hide-details":"",label:"Nom",density:"compact",variant:"outlined",modelValue:a.value.Nom,"onUpdate:modelValue":i[0]||(i[0]=m=>a.value.Nom=m)},null,8,["modelValue"])]),_:1}),e(y,null,{default:l(()=>[e(re,{"hide-details":"",label:"Prénom",density:"compact",variant:"outlined",modelValue:a.value.Prenom,"onUpdate:modelValue":i[1]||(i[1]=m=>a.value.Prenom=m)},null,8,["modelValue"])]),_:1}),e(y,null,{default:l(()=>[e(s,{modelValue:a.value.Sexe,"onUpdate:modelValue":i[2]||(i[2]=m=>a.value.Sexe=m)},null,8,["modelValue"])]),_:1}),e(y,null,{default:l(()=>[e(c,{modelValue:a.value.DateNaissance,"onUpdate:modelValue":i[3]||(i[3]=m=>a.value.DateNaissance=m)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(ie,null,{default:l(()=>[e(ne),e(B,{disabled:!r.value,onClick:i[4]||(i[4]=m=>o("save",a.value))},{default:l(()=>i[5]||(i[5]=[b("Enregistrer")])),_:1},8,["disabled"])]),_:1})]),_:1})}}}),Ji=j({__name:"annuaire",setup(t){const u=lt(),n=T(()=>tu(u.currentRoute.value.query)),o=T(()=>n.value.idPersonne);De(()=>o.value,()=>o.value!==void 0?m(o.value):null,{immediate:!0});const a=$([]),r=$("");async function d(){if(!r.value)return;const g=await M.PersonnesGet({search:r.value});g!==void 0&&(a.value=g||[])}async function i(){const g=await M.PersonnesCreate();g!==void 0&&(M.showMessage("Profil créé avec succès."),a.value.push(g),Ge(g.Id))}const s=$(null);async function c(g){s.value=null;const p=await M.PersonnesUpdate(g);if(p===void 0)return;M.showMessage("Profil modifié avec succès."),Ge();const U=a.value.findIndex(v=>v.Id==g.Id);a.value[U]=p}async function m(g){const p=await M.PersonnesLoad({id:g});p!==void 0&&(s.value=p)}return(g,p)=>{const U=_l;return f(),Q(le,null,[e(ft,{title:"Annuaire : personnes et organismes"},{default:l(()=>p[2]||(p[2]=[b(" TODO ")])),_:1}),e(Y,{class:"ma-2"},{append:l(()=>[e(B,{color:"green",onClick:i},{default:l(()=>p[3]||(p[3]=[b("Créer un nouveau profil")])),_:1})]),default:l(()=>[e(W,null,{default:l(()=>[e(N,null,{default:l(()=>[e(y,null,{default:l(()=>[e(U,{"prepend-inner-icon":"mdi-magnify",label:"Recherche",modelValue:r.value,"onUpdate:modelValue":[p[0]||(p[0]=v=>r.value=v),d]},null,8,["modelValue"]),e(he,null,{default:l(()=>[(f(!0),Q(le,null,fe(a.value,v=>(f(),w(te,{title:v.Label,subtitle:h(Ce).dateNaissance(v.DateNaissance),"prepend-icon":h(Ce).sexeIcon(v.Sexe),onClick:x=>h(Ge)(v.Id)},Vl({_:2},[v.IsTemp?{name:"append",fn:l(()=>[e(Te,{"prepend-icon":"mdi-alert",color:"warning"},{default:l(()=>p[4]||(p[4]=[b(" Ce profil est temporaire et devrait être identifié. ")])),_:1})]),key:"0"}:void 0]),1032,["title","subtitle","prepend-icon","onClick"]))),256))]),_:1})]),_:1}),e(y)]),_:1})]),_:1}),s.value!=null?(f(),w(ae,{key:0,"model-value":s.value!=null,"onUpdate:modelValue":p[1]||(p[1]=v=>{s.value=null,h(Ge)(void 0)}),"max-width":"800px"},{default:l(()=>[e(Ki,{personne:s.value,onSave:c},null,8,["personne"])]),_:1},8,["model-value"])):K("",!0)]),_:1})],64)}}}),Gi=[{path:"/",component:nn},{path:"/camps",component:Tn},{path:"/inscriptions",component:Wi},{path:"/annuaire",component:Ji}],Xi="/backoffice",Ke=Ja({history:Ga(Xi),routes:Gi});Ke.onError((t,u)=>{var n,o;(o=(n=t==null?void 0:t.message)==null?void 0:n.includes)!=null&&o.call(n,"Failed to fetch dynamically imported module")?localStorage.getItem("vuetify:dynamic-reload")?console.error("Dynamic import error, reloading page did not fix it",t):(console.log("Reloading page to fix dynamic import error"),localStorage.setItem("vuetify:dynamic-reload","true"),location.assign(u.fullPath)):console.error(t)});Ke.isReady().then(()=>{localStorage.removeItem("vuetify:dynamic-reload")});function dt(t){return t?Number(t):void 0}function Zi(t){const u=t;return{idCamp:dt(u.idCamp),idParticipant:dt(u.idParticipant)}}function Ut(t){Ke.push({path:"/camps",query:{idCamp:t.IdCamp,idParticipant:t.Id}})}function eu(t){const u=t;return{tab:u.tab,idDossier:dt(u.idDossier)}}function Pt(t){Ke.push({path:"/inscriptions",query:{tab:"doss",idDossier:t}})}function tu(t){return{idPersonne:dt(t.idPersonne)}}function Ge(t){Ke.push({path:"/annuaire",query:{idPersonne:t}})}function lu(t){t.use(an).use(Ke)}const au=["innerHTML"],nu=j({__name:"App",setup(t){const u=Ct({text:"",color:"secondary",action:void 0,timeout:4e3}),n=$(""),o=$("");return M.onError=(r,d)=>{n.value=r,o.value=d},M.showMessage=(r,d,i)=>{u.text=r,u.color=d||"success",u.action=i,u.timeout=1e4,u.timeout=4e3},lt().beforeEach(async(r,d)=>{if(!M.hasToken()&&r.path!=="/")return{path:"/"}}),(r,d)=>{const i=Ea("router-view");return f(),w(Ra,null,{default:l(()=>[e(Ta,null,{default:l(()=>[e(i),e(jt,{style:{"z-index":"10000"},app:"","model-value":u.text!="","onUpdate:modelValue":d[1]||(d[1]=s=>u.text=""),timeout:u.timeout,color:u.color,location:"bottom left","close-on-content-click":""},{default:l(()=>[b(R(u.text)+" ",1),u.action?(f(),w(B,{key:0,onClick:d[0]||(d[0]=s=>u.action.action()),class:"ml-2"},{default:l(()=>[b(R(u.action.title),1)]),_:1})):K("",!0)]),_:1},8,["model-value","timeout","color"]),e(jt,{app:"","model-value":n.value!="","onUpdate:modelValue":d[2]||(d[2]=s=>n.value=""),timeout:4e3,color:"red"},{default:l(()=>[z("b",null,R(n.value),1),z("div",{innerHTML:o.value},null,8,au)]),_:1},8,["model-value"])]),_:1})]),_:1})}}}),$l=La(nu);lu($l);$l.mount("#app");
