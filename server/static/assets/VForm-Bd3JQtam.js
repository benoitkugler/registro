import{x as S,L as w,c as I,_ as v,S as L,K as O,cT as j,j as F,B as k,F as P,v as R,k as V,z as C,E as x,ci as A,av as z}from"./VSnackbar-BDFFDPik.js";import{O as B,P as E}from"./VTextarea-BbtyCEWP.js";const $=(e,t,n)=>{if(e==null||t==null)return-1;if(!t.length)return 0;e=e.toString().toLocaleLowerCase(),t=t.toString().toLocaleLowerCase();const r=[];let s=e.indexOf(t);for(;~s;)r.push([s,s+t.length]),s=e.indexOf(t,s+t.length);return r.length?r:-1};function K(e,t){if(!(e==null||typeof e=="boolean"||e===-1))return typeof e=="number"?[[e,e+t.length]]:Array.isArray(e[0])?e:[e]}const G=S({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function D(e,t,n){const r=[],s=n?.default??$,c=n?.filterKeys?O(n.filterKeys):!1,i=Object.keys(n?.customKeyFilter??{}).length;if(!e?.length)return r;let u=null;e:for(let o=0;o<e.length;o++){const[l,a=l]=O(e[o]),d={},m={};let f=-1;if((t||i>0)&&!n?.noFilter){let p=!1;if(typeof l=="object"){if(l.type==="divider"||l.type==="subheader"){u?.type==="divider"&&l.type==="subheader"&&r.push(u),u={index:o,matches:{},type:l.type};continue}const g=c||Object.keys(a);p=g.length===i;for(const b of g){const _=j(a,b),M=n?.customKeyFilter?.[b];if(f=M?M(_,t,l):s(_,t,l),f!==-1&&f!==!1)M?d[b]=K(f,t):m[b]=K(f,t);else if(n?.filterMode==="every")continue e}}else f=s(l,t,l),f!==-1&&f!==!1&&(m.title=K(f,t));const h=Object.keys(m).length,y=Object.keys(d).length;if(!h&&!y||n?.filterMode==="union"&&y!==i&&!h||n?.filterMode==="intersection"&&(y!==i||!h&&i>0&&!p))continue}u&&(r.push(u),u=null),r.push({index:o,matches:{...m,...d}})}return r}function H(e,t,n,r){const s=w([]),c=w(new Map),i=I(()=>v(t));L(()=>{const o=typeof n=="function"?n():v(n),l=typeof o!="string"&&typeof o!="number"?"":String(o),a=D(i.value,l,{customKeyFilter:{...e.customKeyFilter,...v(r?.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),d=v(t),m=[],f=new Map;a.forEach(p=>{let{index:h,matches:y}=p;const g=d[h];m.push(g),f.set(g.value,y)}),s.value=m,c.value=f});function u(o){return c.value.get(o.value)}return{filteredItems:s,filteredMatches:c,getMatches:u}}function J(e,t,n){return n==null||!n.length?t:n.map((r,s)=>{const c=s===0?0:n[s-1][1],i=[F("span",{class:k(`${e}__unmask`)},[t.slice(c,r[0])]),F("span",{class:k(`${e}__mask`)},[t.slice(r[0],r[1])])];return s===n.length-1&&i.push(F("span",{class:k(`${e}__unmask`)},[t.slice(r[1])])),F(P,null,[i])})}const N=S({...z(),...E()},"VForm"),U=R()({name:"VForm",props:N(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:n,emit:r}=t;const s=B(e),c=V();function i(o){o.preventDefault(),s.reset()}function u(o){const l=o,a=s.validate();l.then=a.then.bind(a),l.catch=a.catch.bind(a),l.finally=a.finally.bind(a),r("submit",l),l.defaultPrevented||a.then(d=>{let{valid:m}=d;m&&c.value?.submit()}),l.preventDefault()}return C(()=>F("form",{ref:c,class:k(["v-form",e.class]),style:x(e.style),novalidate:!0,onReset:i,onSubmit:u},[n.default?.(s)])),A(s,c)}});export{U as V,J as h,G as m,H as u};
