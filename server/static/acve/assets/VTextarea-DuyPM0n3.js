import{Ai as e,Br as t,Ct as n,D as r,Ei as i,Gi as a,Ji as o,Mi as s,Ri as c,S as l,Sa as u,Tr as d,Ur as f,Wi as p,Wr as m,Yr as h,Zi as g,_,ca as v,f as y,fi as b,fr as x,g as S,ga as C,h as w,hr as ee,ji as T,m as E,ma as D,or as O,p as te,sa as k,ua as A,w as j,x as M,xr as N}from"./VSnackbar-CDqA4E7r.js";const P=d({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseFloat(e))},maxHeight:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},maxRows:{type:[Number,String],validator:e=>!isNaN(parseFloat(e))},suffix:String,modelModifiers:Object,...E(),...b(_(),[`direction`]),...l()},`VTextarea`),F=N()({name:`VTextarea`,directives:{vIntersect:n},inheritAttrs:!1,props:P(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0,"update:rows":e=>!0},setup(l,d){let{attrs:_,emit:b,slots:E}=d,N=x(l,`modelValue`),{isFocused:P,focus:F,blur:I}=j(l),{onIntersect:ne}=te(l),re=T(()=>typeof l.counterValue==`function`?l.counterValue(N.value):(N.value||``).toString().length),ie=T(()=>{if(_.maxlength)return _.maxlength;if(!(!l.counter||typeof l.counter!=`number`&&typeof l.counter!=`string`))return l.counter}),L=D(),R=D(),z=C(``),B=D(),V=D(0),{platform:H}=O(),U=w(l),W=T(()=>l.persistentPlaceholder||P.value||l.active);function G(){U.isSuppressing.value&&U.update(),B.value!==document.activeElement&&B.value?.focus(),P.value||F()}function K(e){G(),b(`click:control`,e)}function q(e){b(`mousedown:control`,e)}function J(e){e.stopPropagation(),G(),a(()=>{N.value=``,t(l[`onClick:clear`],e)})}function ae(e){let t=e.target;if(!l.modelModifiers?.trim){N.value=t.value;return}let n=t.value,r=t.selectionStart,i=t.selectionEnd;N.value=n,a(()=>{let e=0;n.trimStart().length===t.value.length&&(e=n.length-t.value.length),r!=null&&(t.selectionStart=r-e),i!=null&&(t.selectionEnd=i-e)})}let Y=D(),X=D(Number(l.rows)),Z=T(()=>[`plain`,`underlined`].includes(l.variant));v(()=>{l.autoGrow||(X.value=Number(l.rows))});function Q(){a(()=>{if(!B.value)return;if(H.value.firefox){V.value=12;return}let{offsetWidth:e,clientWidth:t}=B.value;V.value=Math.max(0,e-t)}),l.autoGrow&&a(()=>{if(!Y.value||!R.value)return;let e=getComputedStyle(Y.value),t=getComputedStyle(R.value.$el),n=parseFloat(e.getPropertyValue(`--v-field-padding-top`))+parseFloat(e.getPropertyValue(`--v-input-padding-top`))+parseFloat(e.getPropertyValue(`--v-field-padding-bottom`)),r=Y.value.scrollHeight,i=parseFloat(e.lineHeight),a=Math.max(parseFloat(l.rows)*i+n,parseFloat(t.getPropertyValue(`--v-input-control-height`))),o=l.maxHeight?parseFloat(l.maxHeight):parseFloat(l.maxRows)*i+n||1/0,s=f(r??0,a,o);X.value=Math.floor((s-n)/i),z.value=m(s)})}g(Q),k(N,Q),k(()=>l.rows,Q),k(()=>l.maxHeight,Q),k(()=>l.maxRows,Q),k(()=>l.density,Q),k(X,e=>{b(`update:rows`,e)});let $;return k(Y,e=>{e?($=new ResizeObserver(Q),$.observe(Y.value)):$?.disconnect()}),o(()=>{$?.disconnect()}),ee(()=>{let t=!!(E.counter||l.counter||l.counterValue),a=!!(t||E.details),[o,d]=h(_),{modelValue:f,...g}=S.filterProps(l),v={...M.filterProps(l),"onClick:clear":J};return c(S,p({ref:L,modelValue:N.value,"onUpdate:modelValue":e=>N.value=e,class:[`v-textarea v-text-field`,{"v-textarea--prefixed":l.prefix,"v-textarea--suffixed":l.suffix,"v-text-field--prefixed":l.prefix,"v-text-field--suffixed":l.suffix,"v-textarea--auto-grow":l.autoGrow,"v-textarea--no-resize":l.noResize||l.autoGrow,"v-input--plain-underlined":Z.value},l.class],style:[{"--v-textarea-max-height":l.maxHeight?m(l.maxHeight):void 0,"--v-textarea-scroll-bar-width":m(V.value)},l.style]},o,g,{centerAffix:X.value===1&&!Z.value,focused:P.value}),{...E,default:t=>{let{id:r,isDisabled:a,isDirty:o,isReadonly:f,isValid:m,hasDetails:h}=t;return c(M,p({ref:R,style:{"--v-textarea-control-height":z.value},onClick:K,onMousedown:q,"onClick:prependInner":l[`onClick:prependInner`],"onClick:appendInner":l[`onClick:appendInner`]},v,{id:r.value,active:W.value||o.value,labelId:`${r.value}-label`,centerAffix:X.value===1&&!Z.value,dirty:o.value||l.dirty,disabled:a.value,focused:P.value,details:h.value,error:m.value===!1}),{...E,default:t=>{let{props:{class:o,...c},controlRef:m}=t;return s(e,null,[l.prefix&&s(`span`,{class:`v-text-field__prefix`},[l.prefix]),A(s(`textarea`,p({ref:e=>B.value=m.value=e,class:o,value:N.value,onInput:ae,autofocus:l.autofocus,readonly:f.value,disabled:a.value,placeholder:l.placeholder,rows:l.rows,name:U.fieldName.value,autocomplete:U.fieldAutocomplete.value,onFocus:G,onBlur:I,"aria-labelledby":`${r.value}-label`},c,d),null),[[n,{handler:ne},null,{once:!0}]]),l.autoGrow&&A(s(`textarea`,{class:u([o,`v-textarea__sizer`]),id:`${c.id}-sizer`,"onUpdate:modelValue":e=>N.value=e,ref:Y,readonly:!0,"aria-hidden":`true`},null),[[i,N.value]]),l.suffix&&s(`span`,{class:`v-text-field__suffix`},[l.suffix])])}})},details:a?n=>s(e,null,[E.details?.(n),t&&s(e,null,[s(`span`,null,null),c(r,{active:l.persistentCounter||P.value,value:re.value,max:ie.value,disabled:l.disabled},E.counter)])]):void 0})}),y({},L,R,B)}});export{F as t};