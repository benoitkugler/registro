import{$i as e,Ai as t,Br as n,D as r,Gi as i,Li as a,M as o,Mi as s,Ni as c,O as l,Ri as u,S as d,Sa as f,St as p,Ta as m,Tr as h,U as g,Ui as _,Ut as v,Wi as y,Xt as b,Yr as ee,_ as x,aa as S,f as C,fi as w,fr as T,g as E,ga as te,gi as D,hr as ne,ji as O,k,la as A,ma as j,oa as M,ri as N,sa as P,u as F,ur as I,va as L,w as re,x as R,xa as z,xr as B,zi as V}from"./VSnackbar-CDqA4E7r.js";import{o as H,s as ie,v as U,x as W}from"./VSelect-DWxc8fzS.js";var G=V({__name:`IntField`,props:_({label:{},hint:{},min:{},max:{},disabled:{type:Boolean},suffix:{},persistentHint:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:[`update:modelValue`],setup(t){let n=t,r=S(t,`modelValue`);return(i,a)=>(e(),c(F,{label:n.label,density:`compact`,variant:`outlined`,type:`number`,min:n.min===void 0?1:n.min,max:n.max,modelValue:r.value,"onUpdate:modelValue":a[0]||=e=>r.value=e,modelModifiers:{number:!0},"hide-details":!t.hint,hint:n.hint,"persistent-hint":n.persistentHint,disabled:n.disabled,suffix:n.suffix},null,8,[`label`,`min`,`max`,`modelValue`,`hide-details`,`hint`,`persistent-hint`,`disabled`,`suffix`]))}});function ae(){function e(e){return[...e.dataTransfer?.items??[]].filter(e=>e.kind===`file`).map(e=>e.webkitGetAsEntry()).filter(Boolean).length>0||[...e.dataTransfer?.files??[]].length>0}async function t(e){let t=[],n=[...e.dataTransfer?.items??[]].filter(e=>e.kind===`file`).map(e=>e.webkitGetAsEntry()).filter(Boolean);if(n.length)for(let e of n){let n=await K(e,q(`.`,e));t.push(...n.map(e=>e.file))}else t.push(...e.dataTransfer?.files??[]);return t}return{handleDrop:t,hasFilesOrFolders:e}}function K(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:``;return new Promise((n,r)=>{e.isFile?e.file(e=>n([{file:e,path:t}]),r):e.isDirectory&&e.createReader().readEntries(async e=>{let r=[];for(let n of e)r.push(...await K(n,q(t,n)));n(r)})})}function q(e,t){return t.isDirectory?`${e}/${t.name}`:e}const J=h({filterByType:String},`file-accept`);function oe(e){let t=O(()=>e.filterByType?Y(e.filterByType):null);function n(e){if(t.value){let n=e.filter(t.value);return{accepted:n,rejected:e.filter(e=>!n.includes(e))}}return{accepted:e,rejected:[]}}return{filterAccepted:n}}function Y(e){let t=e.split(`,`).map(e=>e.trim().toLowerCase()),n=t.filter(e=>e.startsWith(`.`)),r=t.filter(e=>e.endsWith(`/*`)),i=t.filter(e=>!n.includes(e)&&!r.includes(e));return e=>{let t=e.name.split(`.`).at(-1)?.toLowerCase()??``,a=e.type.split(`/`).at(0)?.toLowerCase()??``;return i.includes(e.type)||n.includes(`.${t}`)||r.includes(`${a}/*`)}}const X=h({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:`$vuetify.fileInput.counterSize`},counterString:{type:String,default:`$vuetify.fileInput.counter`},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e==`boolean`||[1e3,1024].includes(Number(e))},truncateLength:{type:[Number,String],default:22},...w(x({prependIcon:`$file`}),[`direction`]),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>D(e).every(e=>typeof e==`object`&&!!e)},...J(),...d({clearable:!0})},`VFileInput`),Z=B()({name:`VFileInput`,inheritAttrs:!1,props:X(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0,rejected:e=>!0},setup(e,a){let{attrs:o,emit:c,slots:l}=a,{t:d}=I(),{filterAccepted:p}=oe(e),m=T(e,`modelValue`,e.modelValue,e=>D(e),t=>!e.multiple&&Array.isArray(t)?t[0]:t),{isFocused:h,focus:g,blur:_}=re(e),v=O(()=>typeof e.showSize==`boolean`?void 0:e.showSize),b=O(()=>(m.value??[]).reduce((e,t)=>{let{size:n=0}=t;return e+n},0)),x=O(()=>N(b.value,v.value)),S=O(()=>(m.value??[]).map(t=>{let{name:n=``,size:r=0}=t,i=J(n);return e.showSize?`${i} (${N(r,v.value)})`:i})),w=O(()=>{let t=m.value?.length??0;return e.showSize?d(e.counterSizeString,t,x.value):d(e.counterString,t)}),k=j(),A=j(),M=j(),F=L(()=>h.value||e.active),z=O(()=>[`plain`,`underlined`].includes(e.variant)),B=te(!1),{handleDrop:V,hasFilesOrFolders:H}=ae();function U(){M.value!==document.activeElement&&M.value?.focus(),h.value||g()}function W(e){M.value?.click()}function G(e){c(`mousedown:control`,e)}function K(e){M.value?.click(),c(`click:control`,e)}function q(t){t.stopPropagation(),U(),i(()=>{m.value=[],n(e[`onClick:clear`],t)})}function J(t){if(t.length<Number(e.truncateLength))return t;let n=Math.floor((Number(e.truncateLength)-1)/2);return`${t.slice(0,n)}…${t.slice(t.length-n)}`}function Y(e){e.preventDefault(),e.stopImmediatePropagation(),B.value=!0}function X(e){e.preventDefault(),B.value=!1}async function Z(e){e.preventDefault(),e.stopImmediatePropagation(),B.value=!1,!(!M.value||!H(e))&&$(await V(e))}function Q(t){!t.target||t.repack||(e.filterByType?$([...t.target.files]):m.value=[...t.target.files??[]])}function $(e){let t=new DataTransfer,{accepted:n,rejected:r}=p(e);r.length&&c(`rejected`,r);for(let e of n)t.items.add(e);M.value.files=t.files,m.value=[...t.files];let i=new Event(`change`,{bubbles:!0});i.repack=!0,M.value.dispatchEvent(i)}return P(m,e=>{(!Array.isArray(e)||!e.length)&&M.value&&(M.value.value=``)}),ne(()=>{let n=!!(l.counter||e.counter),i=!!(n||l.details),[a,c]=ee(o),{modelValue:d,...p}=E.filterProps(e),g={...R.filterProps(e),"onClick:clear":q},v=o.webkitdirectory!==void 0&&o.webkitdirectory!==!1,C=o.accept?String(o.accept):void 0,T=v?void 0:e.filterByType??C;return u(E,y({ref:k,modelValue:e.multiple?m.value:m.value[0],class:[`v-file-input`,{"v-file-input--chips":!!e.chips,"v-file-input--dragging":B.value,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":z.value},e.class],style:e.style,"onClick:prepend":W},a,p,{centerAffix:!z.value,focused:h.value}),{...l,default:n=>{let{id:r,isDisabled:i,isDirty:a,isReadonly:o,isValid:d,hasDetails:p}=n;return u(R,y({ref:A,prependIcon:e.prependIcon,onMousedown:G,onClick:K,"onClick:prependInner":e[`onClick:prependInner`],"onClick:appendInner":e[`onClick:appendInner`]},g,{id:r.value,active:F.value||a.value,dirty:a.value||e.dirty,disabled:i.value,focused:h.value,details:p.value,error:d.value===!1,onDragover:Y,onDrop:Z}),{...l,default:n=>{let{props:{class:r,...a},controlRef:d}=n;return s(t,null,[s(`input`,y({ref:e=>M.value=d.value=e,type:`file`,accept:T,readonly:o.value,disabled:i.value,multiple:e.multiple,name:e.name,onClick:e=>{e.stopPropagation(),o.value&&e.preventDefault(),U()},onChange:Q,onDragleave:X,onFocus:U,onBlur:_},a,c),null),s(`div`,{class:f(r)},[!!m.value?.length&&!e.hideInput&&(l.selection?l.selection({fileNames:S.value,totalBytes:b.value,totalBytesReadable:x.value}):e.chips?S.value.map(e=>u(ie,{key:e,size:`small`,text:e},null)):S.value.join(`, `))])])}})},details:i?i=>s(t,null,[l.details?.(i),n&&s(t,null,[s(`span`,null,null),u(r,{active:!!m.value?.length,value:w.value,disabled:e.disabled},l.counter)])]):void 0})}),C({},k,A,M)}});var Q=5e6,$=V({__name:`FileInput`,props:{label:{}},emits:[`update`],setup(t,{expose:n,emit:r}){let a=t,o=r,s=j(null);function l(e){return e?e.size<=Q||`Taille maximale : ${Q/1e6}MB`:!0}function u(){s.value&&s.value.size>Q||o(`update`,s.value)}n({openDialog:f});let d=M(`input`);function f(){i(()=>d.value?.click())}return(t,n)=>(e(),c(Z,{label:a.label,density:`comfortable`,accept:`.jpg,.jpeg,.png,.pdf`,multiple:!1,modelValue:s.value,"onUpdate:modelValue":[n[0]||=e=>s.value=e,u],rules:[l],"show-size":``,ref_key:`input`,ref:d},null,8,[`label`,`modelValue`,`rules`]))}}),se={class:`text-right ml-2`},ce=V({__name:`FileCard`,props:{file:{},readonly:{type:Boolean}},emits:[`delete`],setup(t,{emit:n}){let r=t,i=n;return(t,n)=>(e(),c(H,null,{activator:A(({props:e})=>[u(l,y({class:`my-2`},e),{default:A(()=>[u(p,{cover:``,src:z(b).LoadMiniature(r.file.Key),width:`56px`},null,8,[`src`])]),_:1},16)]),default:A(()=>[u(l,null,{default:A(()=>[u(k,{class:`px-0`},{default:A(()=>[u(U,{"min-width":`400`,title:r.file.NomClient,subtitle:z(v).size(r.file.Taille)},{append:A(()=>[s(`div`,se,[n[1]||=a(` téléversé le `,-1),n[2]||=s(`br`,null,null,-1),a(` `+m(z(v).time(r.file.Uploaded)),1)])]),_:1},8,[`title`,`subtitle`])]),_:1}),u(o,null,{default:A(()=>[u(g,{onClick:n[0]||=e=>i(`delete`),color:`red`},{default:A(()=>[...n[3]||=[a(` Supprimer `,-1)]]),_:1}),u(W),u(g,{href:z(b).LoadDocument(r.file.Key)},{default:A(()=>[...n[4]||=[a(` Télécharger `,-1)]]),_:1},8,[`href`])]),_:1})]),_:1})]),_:1}))}});export{$ as n,G as r,ce as t};