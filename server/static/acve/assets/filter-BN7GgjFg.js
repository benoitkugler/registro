import{Ai as e,Mi as t,Sa as n,Tr as r,ca as i,ga as a,gi as o,ji as s,ti as c,xa as l}from"./VSnackbar-CDqA4E7r.js";const u=(e,t,n)=>{if(e==null||t==null)return-1;if(!t.length)return 0;e=e.toString().toLocaleLowerCase(),t=t.toString().toLocaleLowerCase();let r=[],i=e.indexOf(t);for(;~i;)r.push([i,i+t.length]),i=e.indexOf(t,i+t.length);return r.length?r:-1};function d(e,t){if(!(e==null||typeof e==`boolean`||e===-1))return typeof e==`number`?[[e,e+t.length]]:Array.isArray(e[0])?e:[e]}const f=r({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:`intersection`},noFilter:Boolean},`filter`);function p(e,t,n){let r=[],i=n?.default??u,a=n?.filterKeys?o(n.filterKeys):!1,s=Object.keys(n?.customKeyFilter??{}).length;if(!e?.length)return r;let l=null;loop:for(let u=0;u<e.length;u++){let[f,p=f]=o(e[u]),m={},h={},g=-1;if((t||s>0)&&!n?.noFilter){let e=!1;if(typeof f==`object`){if(f.type===`divider`||f.type===`subheader`){l?.type===`divider`&&f.type===`subheader`&&r.push(l),l={index:u,matches:{},type:f.type};continue}let o=a||Object.keys(p);e=o.length===s;for(let e of o){let r=c(p,e),a=n?.customKeyFilter?.[e];if(g=a?a(r,t,f):i(r,t,f),g!==-1&&g!==!1)a?m[e]=d(g,t):h[e]=d(g,t);else if(n?.filterMode===`every`)continue loop}}else g=i(f,t,f),g!==-1&&g!==!1&&(h.title=d(g,t));let o=Object.keys(h).length,_=Object.keys(m).length;if(!o&&!_||n?.filterMode===`union`&&_!==s&&!o||n?.filterMode===`intersection`&&(_!==s||!o&&s>0&&!e))continue}l&&=(r.push(l),null),r.push({index:u,matches:{...h,...m}})}return r}function m(e,t,n,r){let o=a([]),c=a(new Map),u=s(()=>r?.transform?l(t).map(e=>[e,r.transform(e)]):l(t));i(()=>{let i=typeof n==`function`?n():l(n),a=typeof i!=`string`&&typeof i!=`number`?``:String(i),s=p(u.value,a,{customKeyFilter:{...e.customKeyFilter,...l(r?.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),d=l(t),f=[],m=new Map;s.forEach(e=>{let{index:t,matches:n}=e,r=d[t];f.push(r),m.set(r.value,n)}),o.value=f,c.value=m});function d(e){return c.value.get(e.value)}return{filteredItems:o,filteredMatches:c,getMatches:d}}function h(r,i,a){return a==null||!a.length?i:a.map((o,s)=>{let c=s===0?0:a[s-1][1],l=[t(`span`,{class:n(`${r}__unmask`)},[i.slice(c,o[0])]),t(`span`,{class:n(`${r}__mask`)},[i.slice(o[0],o[1])])];return s===a.length-1&&l.push(t(`span`,{class:n(`${r}__unmask`)},[i.slice(o[1])])),t(e,null,[l])})}export{f as n,m as r,h as t};