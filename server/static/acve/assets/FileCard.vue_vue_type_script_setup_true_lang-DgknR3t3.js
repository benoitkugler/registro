import{z as ee,A as j,N as te,c3 as ze,cf as $e,Q as O,k as D,c as f,X as S,C as ne,cO as W,b as c,ch as le,S as Ne,cP as Oe,B as je,O as ae,cQ as Q,P as Ee,R as Me,cg as Le,j as m,F as $,E as _e,aD as ie,cR as Ge,d as oe,b3 as Ue,y as re,o as se,w as p,l as q,m as Ke,a2 as P,a6 as H,e as B,t as We,s as Qe,q as X,bT as J,i as qe}from"./VSnackbar-Bb6JWY-C.js";import{u as He,o as Y,E as Z,F as Xe,r as Je,G as Ye,h as Ze,e as et,V as tt,c as nt}from"./VTextarea-Ex3xMDut.js";const lt=j({id:String,interactive:Boolean,text:String,...Ne(Oe({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:null}),["absolute","persistent"])},"VTooltip"),vt=ee()({name:"VTooltip",props:lt(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:l}=i;const o=te(e,"modelValue"),{scopeId:a}=ze(),n=$e(),u=O(()=>e.id||`v-tooltip-${n}`),r=D(),v=f(()=>e.location.split(" ").length>1?e.location:e.location+" center"),I=f(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),y=O(()=>e.transition!=null?e.transition:o.value?"scale-transition":"fade-transition"),g=f(()=>S({"aria-describedby":u.value},e.activatorProps));return ne(()=>{const C=W.filterProps(e);return c(W,S({ref:r,class:["v-tooltip",{"v-tooltip--interactive":e.interactive},e.class],style:e.style,id:u.value},C,{modelValue:o.value,"onUpdate:modelValue":h=>o.value=h,transition:y.value,absolute:!0,location:v.value,origin:I.value,persistent:!0,role:"tooltip",activatorProps:g.value,_disableGlobalStack:!0},a),{activator:l.activator,default:function(){for(var h=arguments.length,F=new Array(h),w=0;w<h;w++)F[w]=arguments[w];return l.default?.(...F)??e.text}})}),le({},r)}});function at(){function e(l){return[...l.dataTransfer?.items??[]].filter(a=>a.kind==="file").map(a=>a.webkitGetAsEntry()).filter(Boolean).length>0||[...l.dataTransfer?.files??[]].length>0}async function i(l){const o=[],a=[...l.dataTransfer?.items??[]].filter(n=>n.kind==="file").map(n=>n.webkitGetAsEntry()).filter(Boolean);if(a.length)for(const n of a){const u=await ue(n,ce(".",n));o.push(...u.map(r=>r.file))}else o.push(...l.dataTransfer?.files??[]);return o}return{handleDrop:i,hasFilesOrFolders:e}}function ue(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new Promise((l,o)=>{e.isFile?e.file(n=>l([{file:n,path:i}]),o):e.isDirectory&&e.createReader().readEntries(async n=>{const u=[];for(const r of n)u.push(...await ue(r,ce(i,r)));l(u)})})}function ce(e,i){return i.isDirectory?`${e}/${i.name}`:e}const it=j({filterByType:String},"file-accept");function ot(e){const i=f(()=>e.filterByType?rt(e.filterByType):null);function l(o){if(i.value){const a=o.filter(i.value);return{accepted:a,rejected:o.filter(n=>!a.includes(n))}}return{accepted:o,rejected:[]}}return{filterAccepted:l}}function rt(e){const i=e.split(",").map(n=>n.trim().toLowerCase()),l=i.filter(n=>n.startsWith(".")),o=i.filter(n=>n.endsWith("/*")),a=i.filter(n=>!l.includes(n)&&!o.includes(n));return n=>{const u=n.name.split(".").at(-1)?.toLowerCase()??"",r=n.type.split("/").at(0)?.toLowerCase()??"";return a.includes(n.type)||l.includes(`.${u}`)||o.includes(`${r}/*`)}}const st=j({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},truncateLength:{type:[Number,String],default:22},...Je({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>ae(e).every(i=>i!=null&&typeof i=="object")},...it(),...Xe({clearable:!0})},"VFileInput"),ut=ee()({name:"VFileInput",inheritAttrs:!1,props:st(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0,rejected:e=>!0},setup(e,i){let{attrs:l,emit:o,slots:a}=i;const{t:n}=je(),{filterAccepted:u}=ot(e),r=te(e,"modelValue",e.modelValue,t=>ae(t),t=>!e.multiple&&Array.isArray(t)?t[0]:t),{isFocused:v,focus:I,blur:y}=He(e),g=f(()=>typeof e.showSize!="boolean"?e.showSize:void 0),C=f(()=>(r.value??[]).reduce((t,s)=>{let{size:b=0}=s;return t+b},0)),h=f(()=>Q(C.value,g.value)),F=f(()=>(r.value??[]).map(t=>{const{name:s="",size:b=0}=t,V=he(s);return e.showSize?`${V} (${Q(b,g.value)})`:V})),w=f(()=>{const t=r.value?.length??0;return e.showSize?n(e.counterSizeString,t,h.value):n(e.counterString,t)}),E=D(),M=D(),d=D(),de=O(()=>v.value||e.active),L=f(()=>["plain","underlined"].includes(e.variant)),T=Ee(!1),{handleDrop:fe,hasFilesOrFolders:ve}=at();function A(){d.value!==document.activeElement&&d.value?.focus(),v.value||I()}function pe(t){d.value?.click()}function me(t){o("mousedown:control",t)}function ye(t){d.value?.click(),o("click:control",t)}function ge(t){t.stopPropagation(),A(),ie(()=>{r.value=[],Ge(e["onClick:clear"],t)})}function he(t){if(t.length<Number(e.truncateLength))return t;const s=Math.floor((Number(e.truncateLength)-1)/2);return`${t.slice(0,s)}…${t.slice(t.length-s)}`}function be(t){t.preventDefault(),t.stopImmediatePropagation(),T.value=!0}function Ve(t){t.preventDefault(),T.value=!1}async function ke(t){if(t.preventDefault(),t.stopImmediatePropagation(),T.value=!1,!d.value||!ve(t))return;const s=await fe(t);_(s)}function Ce(t){if(!(!t.target||t.repack))if(e.filterByType)_([...t.target.files]);else{const s=t.target;r.value=[...s.files??[]]}}function _(t){const s=new DataTransfer,{accepted:b,rejected:V}=u(t);V.length&&o("rejected",V);for(const R of b)s.items.add(R);d.value.files=s.files,r.value=[...s.files];const x=new Event("change",{bubbles:!0});x.repack=!0,d.value.dispatchEvent(x)}return Me(r,t=>{(!Array.isArray(t)||!t.length)&&d.value&&(d.value.value="")}),ne(()=>{const t=!!(a.counter||e.counter),s=!!(t||a.details),[b,V]=Le(l),{modelValue:x,...R}=Y.filterProps(e),Fe={...Z.filterProps(e),"onClick:clear":ge},we=l.webkitdirectory!==void 0&&l.webkitdirectory!==!1,Se=l.accept?String(l.accept):void 0,Ie=we?void 0:e.filterByType??Se;return c(Y,S({ref:E,modelValue:e.multiple?r.value:r.value[0],class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--dragging":T.value,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":L.value},e.class],style:e.style,"onClick:prepend":pe},b,R,{centerAffix:!L.value,focused:v.value}),{...a,default:z=>{let{id:De,isDisabled:G,isDirty:U,isReadonly:K,isValid:Te,hasDetails:Pe}=z;return c(Z,S({ref:M,prependIcon:e.prependIcon,onMousedown:me,onClick:ye,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},Fe,{id:De.value,active:de.value||U.value,dirty:U.value||e.dirty,disabled:G.value,focused:v.value,details:Pe.value,error:Te.value===!1,onDragover:be,onDrop:ke}),{...a,default:Be=>{let{props:{class:Ae,...xe},controlRef:Re}=Be;return m($,null,[m("input",S({ref:k=>d.value=Re.value=k,type:"file",accept:Ie,readonly:K.value,disabled:G.value,multiple:e.multiple,name:e.name,onClick:k=>{k.stopPropagation(),K.value&&k.preventDefault(),A()},onChange:Ce,onDragleave:Ve,onFocus:A,onBlur:y},xe,V),null),m("div",{class:_e(Ae)},[!!r.value?.length&&!e.hideInput&&(a.selection?a.selection({fileNames:F.value,totalBytes:C.value,totalBytesReadable:h.value}):e.chips?F.value.map(k=>c(Ze,{key:k,size:"small",text:k},null)):F.value.join(", "))])])}})},details:s?z=>m($,null,[a.details?.(z),t&&m($,null,[m("span",null,null),c(Ye,{active:!!r.value?.length,value:w.value,disabled:e.disabled},a.counter)])]):void 0})}),le({},E,M,d)}}),N=5e6,pt=oe({__name:"FileInput",props:{label:{}},emits:["update"],setup(e,{expose:i,emit:l}){const o=e,a=l,n=D(null);function u(y){return y?y.size<=N||`Taille maximale : ${N/1e6}MB`:!0}function r(){n.value&&n.value.size>N||a("update",n.value)}i({openDialog:I});const v=Ue("input");function I(){ie(()=>v.value?.click())}return(y,g)=>(se(),re(ut,{label:o.label,density:"comfortable",accept:".jpg,.jpeg,.png,.pdf",multiple:!1,modelValue:n.value,"onUpdate:modelValue":[g[0]||(g[0]=C=>n.value=C),r],rules:[u],"show-size":"",ref_key:"input",ref:v},null,8,["label","modelValue","rules"]))}}),ct={class:"text-right ml-2"},mt=oe({__name:"FileCard",props:{file:{},readonly:{type:Boolean}},emits:["delete"],setup(e,{emit:i}){const l=e,o=i;return(a,n)=>(se(),re(et,null,{activator:p(({props:u})=>[c(q,S({class:"my-2"},u),{default:p(()=>[c(qe,{cover:"",src:P(J).LoadMiniature(l.file.Key),width:"56px"},null,8,["src"])]),_:1},16)]),default:p(()=>[c(q,null,{default:p(()=>[c(Ke,{class:"px-0"},{default:p(()=>[c(tt,{"min-width":"400",title:l.file.NomClient,subtitle:P(H).size(l.file.Taille)},{append:p(()=>[m("div",ct,[n[1]||(n[1]=B(" téléversé le ",-1)),n[2]||(n[2]=m("br",null,null,-1)),B(" "+We(P(H).time(l.file.Uploaded)),1)])]),_:1},8,["title","subtitle"])]),_:1}),c(Qe,null,{default:p(()=>[c(X,{onClick:n[0]||(n[0]=u=>o("delete")),color:"red"},{default:p(()=>[...n[3]||(n[3]=[B(" Supprimer ",-1)])]),_:1}),c(nt),c(X,{href:P(J).LoadDocument(l.file.Key)},{default:p(()=>[...n[4]||(n[4]=[B(" Télécharger ",-1)])]),_:1},8,["href"])]),_:1})]),_:1})]),_:1}))}});export{vt as V,mt as _,pt as a};
