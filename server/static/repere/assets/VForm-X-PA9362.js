import{B as O,Q as _,c as S,a3 as k,X as j,P as I,d6 as L,j as F,G as M,F as P,A as R,dh as V,k as A,D as C,K as x,ck as B,di as D,aB as $}from"./VSnackbar-BcBB9vBf.js";const z=(e,t,n)=>{if(e==null||t==null)return-1;if(!t.length)return 0;e=e.toString().toLocaleLowerCase(),t=t.toString().toLocaleLowerCase();const r=[];let s=e.indexOf(t);for(;~s;)r.push([s,s+t.length]),s=e.indexOf(t,s+t.length);return r.length?r:-1};function K(e,t){if(!(e==null||typeof e=="boolean"||e===-1))return typeof e=="number"?[[e,e+t.length]]:Array.isArray(e[0])?e:[e]}const N=O({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function E(e,t,n){const r=[],s=n?.default??z,c=n?.filterKeys?I(n.filterKeys):!1,i=Object.keys(n?.customKeyFilter??{}).length;if(!e?.length)return r;let u=null;e:for(let o=0;o<e.length;o++){const[l,a=l]=I(e[o]),m={},d={};let f=-1;if((t||i>0)&&!n?.noFilter){let p=!1;if(typeof l=="object"){if(l.type==="divider"||l.type==="subheader"){u?.type==="divider"&&l.type==="subheader"&&r.push(u),u={index:o,matches:{},type:l.type};continue}const g=c||Object.keys(a);p=g.length===i;for(const b of g){const w=L(a,b),v=n?.customKeyFilter?.[b];if(f=v?v(w,t,l):s(w,t,l),f!==-1&&f!==!1)v?m[b]=K(f,t):d[b]=K(f,t);else if(n?.filterMode==="every")continue e}}else f=s(l,t,l),f!==-1&&f!==!1&&(d.title=K(f,t));const h=Object.keys(d).length,y=Object.keys(m).length;if(!h&&!y||n?.filterMode==="union"&&y!==i&&!h||n?.filterMode==="intersection"&&(y!==i||!h&&i>0&&!p))continue}u&&(r.push(u),u=null),r.push({index:o,matches:{...d,...m}})}return r}function X(e,t,n,r){const s=_([]),c=_(new Map),i=S(()=>k(t));j(()=>{const o=typeof n=="function"?n():k(n),l=typeof o!="string"&&typeof o!="number"?"":String(o),a=E(i.value,l,{customKeyFilter:{...e.customKeyFilter,...k(r?.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),m=k(t),d=[],f=new Map;a.forEach(p=>{let{index:h,matches:y}=p;const g=m[h];d.push(g),f.set(g.value,y)}),s.value=d,c.value=f});function u(o){return c.value.get(o.value)}return{filteredItems:s,filteredMatches:c,getMatches:u}}function H(e,t,n){return n==null||!n.length?t:n.map((r,s)=>{const c=s===0?0:n[s-1][1],i=[F("span",{class:M(`${e}__unmask`)},[t.slice(c,r[0])]),F("span",{class:M(`${e}__mask`)},[t.slice(r[0],r[1])])];return s===n.length-1&&i.push(F("span",{class:M(`${e}__unmask`)},[t.slice(r[1])])),F(P,null,[i])})}const Q=O({...$(),...D()},"VForm"),J=R()({name:"VForm",props:Q(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:n,emit:r}=t;const s=V(e),c=A();function i(o){o.preventDefault(),s.reset()}function u(o){const l=o,a=s.validate();l.then=a.then.bind(a),l.catch=a.catch.bind(a),l.finally=a.finally.bind(a),r("submit",l),l.defaultPrevented||a.then(m=>{let{valid:d}=m;d&&c.value?.submit()}),l.preventDefault()}return C(()=>F("form",{ref:c,class:M(["v-form",e.class]),style:x(e.style),novalidate:!0,onReset:i,onSubmit:u},[n.default?.(s)])),B(s,c)}});export{J as V,H as h,N as m,X as u};
