import{bb as Ct,bW as xt,bd as _t,b0 as It,a$ as Dt,aH as Tt,P as ee,c as M,D as Mt,af as Ee,R as ue,bt as ot,bX as Rt,bY as Re,W as At,bZ as Bt,by as Et,z as $e,A as Fe,$ as $t,ap as Ft,b_ as Nt,G as Oe,b$ as Lt,aq as Ht,c0 as Ut,c1 as zt,N as he,c2 as Ot,c3 as qt,k as H,c4 as Wt,Q as Ce,aD as qe,c5 as Yt,c6 as jt,ar as Xt,C as Ne,au as Kt,av as Qt,ax as Zt,c7 as Gt,ay as Jt,c8 as ea,c9 as ta,aA as aa,aB as la,j as R,b as a,i as na,H as Le,X as B,ca as oa,cb as ia,F as j,cc as ua,J as Ae,E as xe,cd as sa,ce as ra,cf as ca,cg as da,ch as it,ci as va,a7 as U,cj as fa,am as ma,B as pa,aP as ga,O as ya,ck as ha,S as ba,cl as Qe,cm as Ze,bO as Va,cn as ka,co as Sa,cp as Pa,e as g,d as X,v as Te,x as Ve,y as P,a2 as y,aX as Xe,aW as Ke,o as m,cq as wa,l as ve,w as n,m as fe,a as te,a5 as be,aL as me,a6 as L,t as N,cr as Ca,q as Q,a9 as xa,aM as ut,ac as _a,a4 as se,g as Z,h as S,s as He,aN as _e,cs as Ia,ct as Da,r as We,a8 as st,aU as Ye,bH as Ta}from"./VSnackbar-BnKbr7GW.js";import{V as Ge,m as Ma}from"./VSheet-CyAH22Z7.js";import{u as Ra,o as Je,p as et,q as Aa,r as Ba,s as Ea,t as $a,v as Fa,w as Na,b as Be,x as La,y as Ha,e as Ue,g as Ie,V as ae,z as Ua,a as je,k as za,n as Oa,h as de,i as rt,c as pe,f as qa}from"./VTextarea-D0MQXeA7.js";import{V as De}from"./FileCard.vue_vue_type_script_setup_true_lang-Bb15N7QD.js";import{f as Wa}from"./VTabs-DKD7OjIE.js";import{u as Ya,m as ja,h as Xa,V as Ka}from"./VForm-Byaq9rCL.js";class Qa extends xt{constructor(o,t,d,l,u){super(l,u),this.onError=o,this.showMessage=t,this.isFondsSoutien=d}hasToken(){return this.authToken!=""}setToken(o,t){this.authToken=o,this.isFondsSoutien=t}handleError(o){const{kind:t,messageHtml:d}=_t(o);this.onError(t,d)}startRequest(){}}const tt=new Qa((e,o)=>{},(e,o)=>{},!1,Ct(),"");function Cl(e){return e.Camp.Statut!=Tt.Ferme&&!e.IsTerminated}function ct(){return{Pattern:"",IdCamp:{Valid:!1,Id:0},Attente:Dt.EmptyQA,Reglement:It.EmptyQR,SortByNewMessages:!1,OnlyFondSoutien:!1}}function Za(e){const o=ct();return o.Pattern=`id:${e}`,o}function Ga(e){let{rootEl:o,isSticky:t,layoutItemStyles:d}=e;const l=ee(!1),u=ee(0),i=M(()=>{const s=typeof l.value=="boolean"?"top":l.value;return[t.value?{top:"auto",bottom:"auto",height:void 0}:void 0,l.value?{[s]:Mt(u.value)}:{top:d.value.top}]});Ee(()=>{ue(t,s=>{s?window.addEventListener("scroll",p,{passive:!0}):window.removeEventListener("scroll",p)},{immediate:!0})}),ot(()=>{window.removeEventListener("scroll",p)});let c=0;function p(){const s=c>window.scrollY?"up":"down",r=o.value.getBoundingClientRect(),f=parseFloat(d.value.top??0),b=window.scrollY-Math.max(0,u.value-f),I=r.height+Math.max(u.value,f)-window.scrollY-window.innerHeight,k=parseFloat(getComputedStyle(o.value).getPropertyValue("--v-body-scroll-y"))||0;r.height<window.innerHeight-f?(l.value="top",u.value=f):s==="up"&&l.value==="bottom"||s==="down"&&l.value==="top"?(u.value=window.scrollY+r.top-k,l.value=!0):s==="down"&&I<=0?(u.value=0,l.value="bottom"):s==="up"&&b<=0&&(k?l.value!=="top"&&(u.value=-b+k+f,l.value="top"):(u.value=r.top+b,l.value="top")),c=window.scrollY}return{isStuck:l,stickyStyles:i}}const Ja=100,el=20;function at(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function lt(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let o=0;for(let t=e.length-1;t>0;t--){if(e[t].t===e[t-1].t)continue;const d=at(o),l=(e[t].d-e[t-1].d)/(e[t].t-e[t-1].t);o+=(l-d)*Math.abs(l),t===e.length-1&&(o*=.5)}return at(o)*1e3}function tl(){const e={};function o(l){Array.from(l.changedTouches).forEach(u=>{(e[u.identifier]??(e[u.identifier]=new Rt(el))).push([l.timeStamp,u])})}function t(l){Array.from(l.changedTouches).forEach(u=>{delete e[u.identifier]})}function d(l){const u=e[l]?.values().reverse();if(!u)throw new Error(`No samples for touch id ${l}`);const i=u[0],c=[],p=[];for(const s of u){if(i[0]-s[0]>Ja)break;c.push({t:s[0],d:s[1].clientX}),p.push({t:s[0],d:s[1].clientY})}return{x:lt(c),y:lt(p),get direction(){const{x:s,y:r}=this,[f,b]=[Math.abs(s),Math.abs(r)];return f>b&&s>=0?"right":f>b&&s<=0?"left":b>f&&r>=0?"down":b>f&&r<=0?"up":al()}}}return{addMovement:o,endTouch:t,getVelocity:d}}function al(){throw new Error}function ll(e){let{el:o,isActive:t,isTemporary:d,width:l,touchless:u,position:i}=e;Ee(()=>{window.addEventListener("touchstart",h,{passive:!0}),window.addEventListener("touchmove",le,{passive:!1}),window.addEventListener("touchend",ne,{passive:!0})}),ot(()=>{window.removeEventListener("touchstart",h),window.removeEventListener("touchmove",le),window.removeEventListener("touchend",ne)});const c=M(()=>["left","right"].includes(i.value)),{addMovement:p,endTouch:s,getVelocity:r}=tl();let f=!1;const b=ee(!1),I=ee(0),k=ee(0);let F;function A(x,V){return(i.value==="left"?x:i.value==="right"?document.documentElement.clientWidth-x:i.value==="top"?x:i.value==="bottom"?document.documentElement.clientHeight-x:ye())-(V?l.value:0)}function _(x){let V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const D=i.value==="left"?(x-k.value)/l.value:i.value==="right"?(document.documentElement.clientWidth-x-k.value)/l.value:i.value==="top"?(x-k.value)/l.value:i.value==="bottom"?(document.documentElement.clientHeight-x-k.value)/l.value:ye();return V?Et(D):D}function h(x){if(u.value)return;const V=x.changedTouches[0].clientX,D=x.changedTouches[0].clientY,T=25,W=i.value==="left"?V<T:i.value==="right"?V>document.documentElement.clientWidth-T:i.value==="top"?D<T:i.value==="bottom"?D>document.documentElement.clientHeight-T:ye(),z=t.value&&(i.value==="left"?V<l.value:i.value==="right"?V>document.documentElement.clientWidth-l.value:i.value==="top"?D<l.value:i.value==="bottom"?D>document.documentElement.clientHeight-l.value:ye());(W||z||t.value&&d.value)&&(F=[V,D],k.value=A(c.value?V:D,t.value),I.value=_(c.value?V:D),f=k.value>-20&&k.value<80,s(x),p(x))}function le(x){const V=x.changedTouches[0].clientX,D=x.changedTouches[0].clientY;if(f){if(!x.cancelable){f=!1;return}const W=Math.abs(V-F[0]),z=Math.abs(D-F[1]);(c.value?W>z&&W>3:z>W&&z>3)?(b.value=!0,f=!1):(c.value?z:W)>3&&(f=!1)}if(!b.value)return;x.preventDefault(),p(x);const T=_(c.value?V:D,!1);I.value=Math.max(0,Math.min(1,T)),T>1?k.value=A(c.value?V:D,!0):T<0&&(k.value=A(c.value?V:D,!1))}function ne(x){if(f=!1,!b.value)return;p(x),b.value=!1;const V=r(x.changedTouches[0].identifier),D=Math.abs(V.x),T=Math.abs(V.y);(c.value?D>T&&D>400:T>D&&T>3)?t.value=V.direction===({left:"right",right:"left",top:"down",bottom:"up"}[i.value]||ye()):t.value=I.value>.5}const oe=M(()=>b.value?{transform:i.value==="left"?`translateX(calc(-100% + ${I.value*l.value}px))`:i.value==="right"?`translateX(calc(100% - ${I.value*l.value}px))`:i.value==="top"?`translateY(calc(-100% + ${I.value*l.value}px))`:i.value==="bottom"?`translateY(calc(100% - ${I.value*l.value}px))`:ye(),transition:"none"}:void 0);return Re(b,()=>{const x=o.value?.style.transform??null,V=o.value?.style.transition??null;At(()=>{o.value?.style.setProperty("transform",oe.value?.transform||"none"),o.value?.style.setProperty("transition",oe.value?.transition||null)}),Bt(()=>{o.value?.style.setProperty("transform",x),o.value?.style.setProperty("transition",V)})}),{isDragging:b,dragProgress:I,dragStyles:oe}}function ye(){throw new Error}const nl=["start","end","left","right","top","bottom"],ol=Fe({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>nl.includes(e)},sticky:Boolean,...la(),...aa(),...ta(),...ea({mobile:null}),...Jt(),...Gt(),...Zt(),...Qt({tag:"nav"}),...Kt()},"VNavigationDrawer"),xl=$e()({name:"VNavigationDrawer",props:ol(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,o){let{attrs:t,emit:d,slots:l}=o;const{isRtl:u}=$t(),{themeClasses:i}=Ft(e),{borderClasses:c}=Nt(e),{backgroundColorClasses:p,backgroundColorStyles:s}=Oe(()=>e.color),{elevationClasses:r}=Lt(e),{displayClasses:f,mobile:b}=Ht(e),{roundedClasses:I}=Ut(e),k=zt(),F=he(e,"modelValue",null,q=>!!q),{ssrBootStyles:A}=Ot(),{scopeId:_}=qt(),h=H(),le=ee(!1),{runOpenDelay:ne,runCloseDelay:oe}=oa(e,q=>{le.value=q}),x=M(()=>e.rail&&e.expandOnHover&&le.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),V=M(()=>Wt(e.location,u.value)),D=Ce(()=>e.persistent),T=M(()=>!e.permanent&&(b.value||e.temporary)),W=M(()=>e.sticky&&!T.value&&V.value!=="bottom");Re(()=>e.expandOnHover&&e.rail!=null,()=>{ue(le,q=>d("update:rail",!q))}),Re(()=>!e.disableResizeWatcher,()=>{ue(T,q=>!e.permanent&&qe(()=>F.value=!q))}),Re(()=>!e.disableRouteWatcher&&!!k,()=>{ue(k.currentRoute,()=>T.value&&(F.value=!1))}),ue(()=>e.permanent,q=>{q&&(F.value=!0)}),e.modelValue==null&&!T.value&&(F.value=e.permanent||!b.value);const{isDragging:z,dragProgress:G}=ll({el:h,isActive:F,isTemporary:T,width:x,touchless:Ce(()=>e.touchless),position:V}),ie=M(()=>{const q=T.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):x.value;return z.value?q*G.value:q}),{layoutItemStyles:E,layoutItemScrimStyles:J}=Yt({id:e.name,order:M(()=>parseInt(e.order,10)),position:V,layoutSize:ie,elementSize:x,active:jt(F),disableTransitions:Ce(()=>z.value),absolute:M(()=>e.absolute||W.value&&typeof ge.value!="string")}),{isStuck:ge,stickyStyles:ke}=Ga({rootEl:h,isSticky:W,layoutItemStyles:E}),re=Oe(()=>typeof e.scrim=="string"?e.scrim:null),Se=M(()=>({...z.value?{opacity:G.value*.2,transition:"none"}:void 0,...J.value}));return Xt({VList:{bgColor:"transparent"}}),Ne(()=>{const q=l.image||e.image;return R(j,null,[a(e.tag,B({ref:h,onMouseenter:ne,onMouseleave:oe,class:["v-navigation-drawer",`v-navigation-drawer--${V.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":le.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":T.value,"v-navigation-drawer--persistent":D.value,"v-navigation-drawer--active":F.value,"v-navigation-drawer--sticky":W.value},i.value,p.value,c.value,f.value,r.value,I.value,e.class],style:[s.value,E.value,A.value,ke.value,e.style]},_,t),{default:()=>[q&&R("div",{key:"image",class:"v-navigation-drawer__img"},[l.image?a(Le,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},l.image):a(na,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),l.prepend&&R("div",{class:"v-navigation-drawer__prepend"},[l.prepend?.()]),R("div",{class:"v-navigation-drawer__content"},[l.default?.()]),l.append&&R("div",{class:"v-navigation-drawer__append"},[l.append?.()])]}),a(ia,{name:"fade-transition"},{default:()=>[T.value&&(z.value||F.value)&&!!e.scrim&&R("div",B({class:["v-navigation-drawer__scrim",re.backgroundColorClasses.value],style:[Se.value,re.backgroundColorStyles.value],onClick:()=>{D.value||(F.value=!1)}},_),null)]})])}),{isStuck:ge}}}),il=ua("v-picker-title"),ul=Fe({bgColor:String,divided:Boolean,landscape:Boolean,title:String,hideHeader:Boolean,hideTitle:Boolean,...Ma()},"VPicker"),_l=$e()({name:"VPicker",props:ul(),setup(e,o){let{slots:t}=o;const{backgroundColorClasses:d,backgroundColorStyles:l}=Oe(()=>e.color);return Ne(()=>{const u=Ge.filterProps(e),i=!e.hideTitle&&!!(e.title||t.title);return a(Ge,B(u,{color:e.bgColor,class:["v-picker",{"v-picker--divided":e.divided,"v-picker--landscape":e.landscape,"v-picker--with-actions":!!t.actions},e.class],style:e.style}),{default:()=>[!e.hideHeader&&R("div",{key:"header",class:xe([d.value]),style:Ae([l.value])},[i&&a(il,{key:"picker-title"},{default:()=>[t.title?.()??e.title]}),t.header&&R("div",{class:"v-picker__header"},[t.header()])]),R("div",{class:"v-picker__body"},[t.default?.()]),t.actions&&a(Le,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[R("div",{class:"v-picker__actions"},[t.actions()])]})]})}),{}}}),sl=Fe({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Ba(),...Aa()},"VSwitch"),Il=$e()({name:"VSwitch",inheritAttrs:!1,props:sl(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,o){let{attrs:t,slots:d}=o;const l=he(e,"indeterminate"),u=he(e,"modelValue"),{loaderClasses:i}=sa(e),{isFocused:c,focus:p,blur:s}=Ra(e),r=H(),f=H(),b=ra&&window.matchMedia("(forced-colors: active)").matches,I=Ce(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),k=ca(),F=Ce(()=>e.id||`switch-${k}`);function A(){l.value&&(l.value=!1)}function _(h){h.stopPropagation(),h.preventDefault(),r.value?.input?.click()}return Ne(()=>{const[h,le]=da(t),ne=Je.filterProps(e),oe=et.filterProps(e);return a(Je,B({ref:f,class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":l.value},i.value,e.class]},h,ne,{modelValue:u.value,"onUpdate:modelValue":x=>u.value=x,id:F.value,focused:c.value,style:e.style}),{...d,default:x=>{let{id:V,messagesId:D,isDisabled:T,isReadonly:W,isValid:z}=x;const G={model:u,isValid:z};return a(et,B({ref:r},oe,{modelValue:u.value,"onUpdate:modelValue":[ie=>u.value=ie,A],id:V.value,"aria-describedby":D.value,type:"checkbox","aria-checked":l.value?"mixed":void 0,disabled:T.value,readonly:W.value,onFocus:p,onBlur:s},le),{...d,default:ie=>{let{backgroundColorClasses:E,backgroundColorStyles:J}=ie;return R("div",{class:xe(["v-switch__track",b?void 0:E.value]),style:Ae(J.value),onClick:_},[d["track-true"]&&R("div",{key:"prepend",class:"v-switch__track-true"},[d["track-true"](G)]),d["track-false"]&&R("div",{key:"append",class:"v-switch__track-false"},[d["track-false"](G)])])},input:ie=>{let{inputNode:E,icon:J,backgroundColorClasses:ge,backgroundColorStyles:ke}=ie;return R(j,null,[E,R("div",{class:xe(["v-switch__thumb",{"v-switch__thumb--filled":J||e.loading},e.inset||b?void 0:ge.value]),style:Ae(e.inset?void 0:ke.value)},[d.thumb?a(Le,{defaults:{VIcon:{icon:J,size:"x-small"}}},{default:()=>[d.thumb({...G,icon:J})]}):a(va,null,{default:()=>[e.loading?a(fa,{name:"v-switch",active:!0,color:z.value===!1?void 0:I.value},{default:re=>d.loader?d.loader(re):a(ma,{active:re.isActive,color:re.color,indeterminate:!0,size:"16",width:"2"},null)}):J&&a(U,{key:String(J),icon:J,size:"x-small"},null)]})])])}})}})}),it({},f)}}),rl=Fe({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...ja({filterKeys:["title"]}),...La(),...ba(Ha({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"])},"VAutocomplete"),dt=$e()({name:"VAutocomplete",props:rl(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,o){let{slots:t}=o;const{t:d}=pa(),l=H(),u=ee(!1),i=ee(!0),c=ee(!1),p=H(),s=H(),r=ee(-1),f=ee(null),{items:b,transformIn:I,transformOut:k}=Ea(e),{textColorClasses:F,textColorStyles:A}=ga(()=>l.value?.color),_=he(e,"search",""),h=he(e,"modelValue",[],v=>I(v===null?[null]:ya(v)),v=>{const $=k(v);return e.multiple?$:$[0]??null}),le=M(()=>typeof e.counterValue=="function"?e.counterValue(h.value):typeof e.counterValue=="number"?e.counterValue:h.value.length),ne=$a(e),{filteredItems:oe,getMatches:x}=Ya(e,b,()=>f.value??(i.value?"":_.value)),V=M(()=>e.hideSelected&&f.value===null?oe.value.filter(v=>!h.value.some($=>$.value===v.value)):oe.value),D=M(()=>!!(e.chips||t.chip)),T=M(()=>D.value||!!t.selection),W=M(()=>h.value.map(v=>v.props.value)),z=M(()=>(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&_.value===V.value[0]?.title)&&V.value.length>0&&!i.value&&!c.value),G=M(()=>e.hideNoData&&!V.value.length||ne.isReadonly.value||ne.isDisabled.value),ie=he(e,"menu"),E=M({get:()=>ie.value,set:v=>{ie.value&&!v&&p.value?.ΨopenChildren.size||v&&G.value||(ie.value=v)}}),{menuId:J,ariaExpanded:ge,ariaControls:ke,ariaLabel:re}=Fa(e,E),Se=H(),q=Na(Se,l);function ft(v){e.openOnClear&&(E.value=!0),_.value=""}function mt(){G.value||(E.value=!0)}function pt(v){G.value||(u.value&&(v.preventDefault(),v.stopPropagation()),E.value=!E.value)}function gt(v){(Qe(v)||v.key==="Backspace")&&l.value?.focus()}function yt(v){if(ne.isReadonly.value)return;const $=l.value?.selectionStart,O=h.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(v.key)&&v.preventDefault(),["Enter","ArrowDown"].includes(v.key)&&(E.value=!0),["Escape"].includes(v.key)&&(E.value=!1),z.value&&["Enter","Tab"].includes(v.key)&&!h.value.some(w=>{let{value:C}=w;return C===V.value[0].value})&&ce(V.value[0]),v.key==="ArrowDown"&&z.value&&Se.value?.focus("next"),["Backspace","Delete"].includes(v.key)){if(!e.multiple&&T.value&&h.value.length>0&&!_.value)return ce(h.value[0],!1);if(~r.value){v.preventDefault();const w=r.value;ce(h.value[r.value],!1),r.value=w>=O-1?O-2:w}else v.key==="Backspace"&&!_.value&&(r.value=O-1);return}if(e.multiple)if(v.key==="ArrowLeft"){if(r.value<0&&$&&$>0)return;const w=r.value>-1?r.value-1:O-1;if(h.value[w])r.value=w;else{const C=_.value?.length??null;r.value=-1,l.value?.setSelectionRange(C,C)}}else if(v.key==="ArrowRight"){if(r.value<0)return;const w=r.value+1;h.value[w]?r.value=w:(r.value=-1,l.value?.setSelectionRange(0,0))}else~r.value&&Qe(v)&&(r.value=-1)}function ht(v){if(Ze(l.value,":autofill")||Ze(l.value,":-webkit-autofill")){const $=b.value.find(O=>O.title===v.target.value);$&&ce($)}}function bt(){e.eager&&s.value?.calculateVisibleItems()}function Vt(){u.value&&(i.value=!0,l.value?.focus()),f.value=null}function kt(v){u.value=!0,setTimeout(()=>{c.value=!0})}function St(v){c.value=!1}function Pt(v){(v==null||v===""&&!e.multiple&&!T.value)&&(h.value=[])}const ze=ee(!1);function ce(v){let $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!v||v.props.disabled))if(e.multiple){const O=h.value.findIndex(C=>(e.valueComparator||Va)(C.value,v.value)),w=$??!~O;if(~O){const C=w?[...h.value,v]:[...h.value];C.splice(O,1),h.value=C}else w&&(h.value=[...h.value,v]);e.clearOnSelect&&(_.value="")}else{const O=$!==!1;h.value=O?[v]:[],f.value=i.value?"":_.value??"",_.value=O&&!T.value?v.title:"",qe(()=>{E.value=!1,i.value=!0})}}return ue(u,(v,$)=>{v!==$&&(v?(ze.value=!0,_.value=e.multiple||T.value?"":String(h.value.at(-1)?.props.title??""),i.value=!0,qe(()=>ze.value=!1)):(!e.multiple&&_.value==null&&(h.value=[]),E.value=!1,!i.value&&_.value&&(f.value=_.value),_.value="",r.value=-1))}),ue(_,v=>{!u.value||ze.value||(v&&(E.value=!0),i.value=!v)}),ue(E,v=>{if(!e.hideSelected&&v&&h.value.length&&i.value){const $=V.value.findIndex(O=>h.value.some(w=>O.value===w.value));ha&&window.requestAnimationFrame(()=>{$>=0&&s.value?.scrollToIndex($)})}v&&(f.value=null)}),ue(b,(v,$)=>{E.value||u.value&&!$.length&&v.length&&(E.value=!0)}),Ne(()=>{const v=!!(!e.hideNoData||V.value.length||t["prepend-item"]||t["append-item"]||t["no-data"]),$=h.value.length>0,O=Be.filterProps(e);return a(Be,B({ref:l},O,{modelValue:_.value,"onUpdate:modelValue":[w=>_.value=w,Pt],focused:u.value,"onUpdate:focused":w=>u.value=w,validationValue:h.externalValue,counterValue:le.value,dirty:$,onChange:ht,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":E.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!T.value,"v-autocomplete--selecting-index":r.value>-1},e.class],style:e.style,readonly:ne.isReadonly.value,placeholder:$?void 0:e.placeholder,"onClick:clear":ft,"onMousedown:control":mt,onKeydown:yt,"aria-expanded":ge.value,"aria-controls":ke.value}),{...t,default:()=>R(j,null,[a(Ue,B({id:J.value,ref:p,modelValue:E.value,"onUpdate:modelValue":w=>E.value=w,activator:"parent",contentClass:"v-autocomplete__content",disabled:G.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,onAfterEnter:bt,onAfterLeave:Vt},e.menuProps),{default:()=>[v&&a(Ie,B({ref:Se,filterable:!0,selected:W.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:w=>w.preventDefault(),onKeydown:gt,onFocusin:kt,onFocusout:St,tabindex:"-1",selectable:!0,"aria-live":"polite",color:e.itemColor??e.color},q,e.listProps),{default:()=>[t["prepend-item"]?.(),!V.value.length&&!e.hideNoData&&(t["no-data"]?.()??a(ae,{key:"no-data",title:d(e.noDataText)},null)),a(Ua,{ref:s,renderless:!0,items:V.value,itemKey:"value"},{default:w=>{let{item:C,index:Y,itemRef:Me}=w;const Pe=B(C.props,{ref:Me,key:C.value,active:z.value&&Y===0?!0:void 0,onClick:()=>ce(C,null)});return C.type==="divider"?t.divider?.({props:C.raw,index:Y})??a(je,B(C.props,{key:`divider-${Y}`}),null):C.type==="subheader"?t.subheader?.({props:C.raw,index:Y})??a(za,B(C.props,{key:`subheader-${Y}`}),null):t.item?.({item:C,index:Y,props:Pe})??a(ae,B(Pe,{role:"option"}),{prepend:we=>{let{isSelected:K}=we;return R(j,null,[e.multiple&&!e.hideSelected?a(Oa,{key:C.value,modelValue:K,ripple:!1,tabindex:"-1",onClick:wt=>wt.preventDefault()},null):void 0,C.props.prependAvatar&&a(Sa,{image:C.props.prependAvatar},null),C.props.prependIcon&&a(U,{icon:C.props.prependIcon},null)])},title:()=>i.value?C.title:Xa("v-autocomplete",C.title,x(C)?.title)})}}),t["append-item"]?.()]})]}),h.value.map((w,C)=>{function Y(K){K.stopPropagation(),K.preventDefault(),ce(w,!1)}const Me={"onClick:close":Y,onKeydown(K){K.key!=="Enter"&&K.key!==" "||(K.preventDefault(),K.stopPropagation(),Y(K))},onMousedown(K){K.preventDefault(),K.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},Pe=D.value?!!t.chip:!!t.selection,we=Pe?Pa(D.value?t.chip({item:w,index:C,props:Me}):t.selection({item:w,index:C})):void 0;if(!(Pe&&!we))return R("div",{key:w.value,class:xe(["v-autocomplete__selection",C===r.value&&["v-autocomplete__selection--selected",F.value]]),style:Ae(C===r.value?A.value:{})},[D.value?t.chip?a(Le,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:w.title}}},{default:()=>[we]}):a(de,B({key:"chip",closable:e.closableChips,size:"small",text:w.title,disabled:w.props.disabled},Me),null):we??R("span",{class:"v-autocomplete__selection-text"},[w.title,e.multiple&&C<h.value.length-1&&R("span",{class:"v-autocomplete__selection-comma"},[g(",")])])])})]),"append-inner":function(){for(var w=arguments.length,C=new Array(w),Y=0;Y<w;Y++)C[Y]=arguments[Y];return R(j,null,[t["append-inner"]?.(...C),e.menuIcon?a(U,{class:"v-autocomplete__menu-icon",color:l.value?.fieldIconColor,icon:e.menuIcon,onMousedown:pt,onClick:ka,"aria-label":re.value,title:re.value,tabindex:"-1"},null):void 0])}})}),it({isFocused:u,isPristine:i,menu:E,search:_,filteredItems:oe,select:ce},l)}}),cl=300,dl=X({__name:"SelectPersonne",props:Te({label:{},initialPersonne:{},api:{},readonly:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const o=e,t=Ve(e,"modelValue"),d=H(t.value==0?[]:[{title:o.initialPersonne,value:t.value}]),l=H("");async function u(){if(!l.value)return;const p=await o.api.SelectPersonne({search:l.value});p!==void 0&&(d.value=(p||[]).map(s=>({title:s.Label,value:s.Id})))}let i;function c(p){l.value=p||"",clearTimeout(i),i=setTimeout(u,cl)}return(p,s)=>(m(),P(dt,{label:o.label,variant:"outlined",density:"compact",readonly:o.readonly,"hide-details":"",items:d.value,"model-value":y(Ke)(t.value),"onUpdate:modelValue":s[0]||(s[0]=r=>t.value=y(Xe)(r)),search:l.value,"onUpdate:search":[s[1]||(s[1]=r=>l.value=r),c],clearable:"","no-data-text":l.value.length?"Aucun profil ne correspond à votre recherche.":"Veuillez entrer une recherche."},null,8,["label","readonly","items","model-value","search","no-data-text"]))}}),Dl=X({__name:"ReglementsCard",props:{data:{}},setup(e){const o=e;function t(l){return(o.data.Dossiers||{})[l.Participant.IdDossier]}const d=M(()=>(o.data.Participants||[]).filter(l=>t(l).Reglement==wa.Complet).length);return(l,u)=>(m(),P(ve,{title:"Suivi du règlement",subtitle:`${d.value} / ${o.data.Participants?.length||0} complet`},{default:n(()=>[a(fe,null,{default:n(()=>[a(Ie,null,{default:n(()=>[(m(!0),te(j,null,be(e.data.Participants,i=>(m(),P(ae,{title:y(me).NOMPrenom(i.Personne),subtitle:t(i).Responsable},{append:n(()=>[a(de,{"prepend-icon":"mdi-currency-eur",color:y(L).colorStatutPaiement(t(i).Reglement)},{default:n(()=>[g(N(y(Ca)[t(i).Reglement]),1)]),_:2},1032,["color"])]),_:2},1032,["title","subtitle"]))),256))]),_:1})]),_:1})]),_:1},8,["subtitle"]))}}),Tl=X({__name:"SelectCamp",props:Te({label:{},camps:{},readonly:{type:Boolean},defaultStyle:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const o=e,t=Ve(e,"modelValue"),d=H(!1),l=M(()=>o.camps.filter(u=>d.value?!0:!u.IsOld).map(u=>({title:u.Label,value:u.Id})));return(u,i)=>(m(),P(rt,{density:o.defaultStyle?void 0:"compact",variant:o.defaultStyle?void 0:"outlined",label:o.label,readonly:o.readonly,items:l.value,clearable:"","model-value":y(Ke)(t.value),"onUpdate:modelValue":i[1]||(i[1]=c=>t.value=y(Xe)(c)),"no-data-text":"Aucun séjour n'existe.","hide-details":"",autocomplete:"off"},{prepend:n(()=>[a(De,{text:d.value?"Masquer les séjours terminés":"Afficher les séjours terminés"},{activator:n(({props:c})=>[a(Q,B({size:"small",variant:d.value?"tonal":"flat"},c,{icon:"mdi-history",onClick:i[0]||(i[0]=p=>d.value=!d.value)}),null,16,["variant"])]),_:1},8,["text"])]),_:1},8,["density","variant","label","readonly","items","model-value"]))}}),vl=300,fl=X({__name:"SelectDossier",props:Te({readonly:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const o=e,t=Ve(e,"modelValue"),d=H([]);Ee(u);function l(r){return{title:r.Responsable,subtitle:r.Participants,value:r.Id}}async function u(){const r=t.value;if(r==0)return;const f=await tt.DossiersSearch(Za(r));f!==void 0&&(d.value=(f.Dossiers||[]).map(l))}const i=H("");async function c(){if(!i.value)return;const r=ct();r.Pattern=i.value;const f=await tt.DossiersSearch(r);f!==void 0&&(d.value=(f.Dossiers||[]).map(l))}let p;function s(r){i.value=r||"",clearTimeout(p),p=setTimeout(c,vl)}return(r,f)=>(m(),P(dt,{label:"Dossier",variant:"outlined",density:"compact",readonly:o.readonly,"hide-details":"",items:d.value,"no-filter":"","model-value":y(Ke)(t.value),"onUpdate:modelValue":f[0]||(f[0]=b=>t.value=y(Xe)(b)),search:i.value,"onUpdate:search":[f[1]||(f[1]=b=>i.value=b),s],clearable:"","no-data-text":i.value.length?"Aucun dossier ne correspond à votre recherche.":"Veuillez entrer une recherche."},{item:n(({item:b,props:I})=>[a(ae,B(I,{title:b.title,subtitle:b.raw.subtitle}),null,16,["title","subtitle"])]),_:1},8,["readonly","items","model-value","search","no-data-text"]))}}),vt=X({__name:"StatutParticipantField",props:Te({hideDetails:{type:Boolean},readonly:{type:Boolean},rules:{},restrictItems:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const o=e,t=Ve(e,"modelValue"),d=M(()=>xa(ut).filter(l=>o.restrictItems===void 0||o.restrictItems.includes(l.value)).map(l=>({value:l.value,title:l.title,format:L.statutParticipant(l.value)})));return(l,u)=>(m(),P(rt,{label:"Statut",variant:"outlined",density:"compact",items:d.value,readonly:o.readonly,"hide-details":o.hideDetails,modelValue:t.value,"onUpdate:modelValue":u[0]||(u[0]=i=>t.value=i),rules:o.rules},{item:n(({item:i,props:c})=>[a(ae,B(c,{title:i.title}),{prepend:n(()=>[a(U,{color:i.raw.format.color},{default:n(()=>[g(N(i.raw.format.icon),1)]),_:2},1032,["color"])]),_:2},1040,["title"])]),selection:n(({item:i})=>[a(ae,{title:i.title,density:"compact"},{prepend:n(()=>[a(U,{color:i.raw.format.color,size:"small"},{default:n(()=>[g(N(i.raw.format.icon),1)]),_:2},1032,["color"])]),_:2},1032,["title"])]),_:1},8,["items","readonly","hide-details","modelValue","rules"]))}}),Ml=X({__name:"ParticipantEdit",props:{participant:{},personne:{},api:{},hidePersonneDossier:{type:Boolean},readonlyStatut:{type:Boolean}},emits:["save"],setup(e,{emit:o}){const t=e,d=o,l=H(_a(t.participant)),u=M(()=>!!(l.value.IdPersonne&&l.value.IdDossier));return(i,c)=>{const p=dl,s=fl,r=Wa;return m(),P(ve,{title:"Editer le participant"},{default:n(()=>[a(fe,null,{default:n(()=>[a(Ka,null,{default:n(()=>[t.hidePersonneDossier?se("",!0):(m(),P(Z,{key:0},{default:n(()=>[a(S,null,{default:n(()=>[a(p,{label:"Personne",modelValue:l.value.IdPersonne,"onUpdate:modelValue":c[0]||(c[0]=f=>l.value.IdPersonne=f),"initial-personne":y(me).label(t.personne),api:t.api},null,8,["modelValue","initial-personne","api"])]),_:1}),a(S,null,{default:n(()=>[a(s,{modelValue:l.value.IdDossier,"onUpdate:modelValue":c[1]||(c[1]=f=>l.value.IdDossier=f)},null,8,["modelValue"])]),_:1})]),_:1})),a(Z,null,{default:n(()=>[a(S,null,{default:n(()=>[a(vt,{modelValue:l.value.Statut,"onUpdate:modelValue":c[2]||(c[2]=f=>l.value.Statut=f),"hide-details":"",readonly:t.readonlyStatut},null,8,["modelValue","readonly"])]),_:1})]),_:1}),a(Z,null,{default:n(()=>[a(S,null,{default:n(()=>[a(r,{modelValue:l.value.Navette,"onUpdate:modelValue":c[3]||(c[3]=f=>l.value.Navette=f)},null,8,["modelValue"])]),_:1}),a(S,null,{default:n(()=>[a(Be,{modelValue:l.value.Commentaire,"onUpdate:modelValue":c[4]||(c[4]=f=>l.value.Commentaire=f),label:"Commentaire",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),a(He,null,{default:n(()=>[a(pe),a(Q,{disabled:!u.value,onClick:c[5]||(c[5]=f=>d("save",l.value))},{default:n(()=>[...c[6]||(c[6]=[g("Enregistrer",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})}}}),Rl=X({__name:"ParticipantRow",props:{participant:{},index:{}},setup(e){const o=e,t=M(()=>"mx-2 px-2 rounded "+(o.index%2==0?"bg-grey-lighten-4":""));return(d,l)=>(m(),P(Z,{"no-gutters":"",class:xe(t.value)},{default:n(()=>[a(S,{"align-self":"center",cols:"3"},{default:n(()=>[a(ae,{title:y(me).NOMPrenom(o.participant.Personne),class:"px-0"},{prepend:n(()=>[o.participant.Participant.Statut!=y(_e).Inscrit?(m(),P(De,{key:0,text:y(ut)[o.participant.Participant.Statut]},{activator:n(({props:u})=>[a(U,B({color:y(L).statutParticipant(o.participant.Participant.Statut).color},u),{default:n(()=>[g(N(y(L).statutParticipant(o.participant.Participant.Statut).icon),1)]),_:1},16,["color"])]),_:1},8,["text"])):se("",!0)]),_:1},8,["title"])]),_:1}),a(S,{"align-self":"center",cols:"1",class:"text-center"},{default:n(()=>[a(U,{class:"ma-2 mr-4"},{default:n(()=>[g(N(y(L).sexeIcon(o.participant.Personne.Sexe)),1)]),_:1})]),_:1}),a(S,{"align-self":"center",cols:"1"},{default:n(()=>[a(Z,{"no-gutters":""},{default:n(()=>[a(S,{"align-self":"end",class:"text-center"},{default:n(()=>[g(N(y(L).dateNaissance(o.participant.Personne.DateNaissance)),1)]),_:1}),a(S,{"align-self":"end",cols:"auto"},{default:n(()=>[o.participant.HasBirthday?(m(),P(De,{key:0,text:`${o.participant.Personne.Prenom} a son anniveraire pendant le séjour !`},{activator:n(({props:u})=>[a(U,B(u,{color:"pink"}),{default:n(()=>[...l[0]||(l[0]=[g("mdi-cake-variant",-1)])]),_:1},16)]),_:1},8,["text"])):se("",!0)]),_:1})]),_:1})]),_:1}),a(S,{"align-self":"center",cols:"1",class:"text-center"},{default:n(()=>[g(N(o.participant.Age)+" ans ",1)]),_:1}),a(S,{"align-self":"center",cols:"1",class:"text-center"},{default:n(()=>[g(N(o.participant.Participant.Navette==y(Ia).NoBus?"-":y(Da)[o.participant.Participant.Navette]),1)]),_:1}),a(S,{"align-self":"center"},{default:n(()=>[g(N(o.participant.Participant.Commentaire),1)]),_:1}),a(pe),a(S,{cols:"2","align-self":"center"},{default:n(()=>[g(N(y(L).time(o.participant.MomentInscription)),1)]),_:1}),a(S,{"align-self":"center",cols:"auto"},{default:n(()=>[a(Ue,null,{activator:n(({props:u})=>[a(Q,B(u,{icon:"mdi-dots-vertical",size:"x-small"}),null,16)]),default:n(()=>[We(d.$slots,"actions")]),_:3})]),_:3})]),_:3},8,["class"]))}}),Al=X({__name:"ParticipantRowHeader",setup(e){return(o,t)=>(m(),P(Z,{"no-gutters":"",class:"mx-2 px-2"},{default:n(()=>[a(S,{class:"font-weight-bold","align-self":"center",cols:"3"},{default:n(()=>[...t[0]||(t[0]=[g(" Participant ",-1)])]),_:1}),a(S,{class:"font-weight-bold text-center","align-self":"center",cols:"1"},{default:n(()=>[...t[1]||(t[1]=[g(" Sexe ",-1)])]),_:1}),a(S,{class:"font-weight-bold text-center","align-self":"center",cols:"1"},{default:n(()=>[...t[2]||(t[2]=[g(" Date de naissance ",-1)])]),_:1}),a(S,{class:"font-weight-bold text-center","align-self":"center",cols:"1"},{default:n(()=>[...t[3]||(t[3]=[g(" Age ",-1)])]),_:1}),a(S,{class:"font-weight-bold text-center","align-self":"center",cols:"1"},{default:n(()=>[...t[4]||(t[4]=[g(" Navette ",-1)])]),_:1}),a(S,{class:"font-weight-bold","align-self":"center"},{default:n(()=>[...t[5]||(t[5]=[g(" Commentaire ",-1)])]),_:1}),a(pe),a(S,{class:"font-weight-bold text-center",cols:"2"},{default:n(()=>[...t[6]||(t[6]=[g(" Inscription ",-1)])]),_:1}),a(S,{cols:"auto"},{default:n(()=>[a(Q,{size:"x-small",color:"white",icon:"",flat:""})]),_:1})]),_:1}))}}),ml=X({__name:"CardValideParticipantRow",props:Te({participant:{},statut:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const o=e,t=Ve(e,"modelValue");function d(l){return l.AgeMin?l.AgeMax?l.EquilibreGF?l.Place?"":"Camp complet":"Equilibre G./F.":`Trop âgé${L.accord(o.participant.Personne.Sexe)}`:"Trop jeune"}return(l,u)=>{const i=vt;return m(),P(Z,null,{default:n(()=>[a(S,{cols:"4","align-self":"center"},{default:n(()=>[a(ae,{title:y(me).label(o.participant.Personne),subtitle:y(st).label(o.participant.Camp)},null,8,["title","subtitle"])]),_:1}),a(S,{cols:"3","align-self":"center",class:"text-center"},{default:n(()=>[o.statut.Statut!=y(_e).Inscrit?(m(),P(de,{key:0,color:"warning","prepend-icon":"mdi-alert"},{default:n(()=>[g(N(d(o.statut.Causes)),1)]),_:1})):se("",!0)]),_:1}),a(S,{"align-self":"center"},{default:n(()=>[o.statut.Validable?(m(),P(i,{key:0,modelValue:t.value,"onUpdate:modelValue":u[0]||(u[0]=c=>t.value=c),"hide-details":"",readonly:!o.statut.AllowedChanges?.length,"restrict-items":(o.statut.AllowedChanges||[]).concat(o.statut.Statut)},null,8,["modelValue","readonly","restrict-items"])):o.participant.Participant.Statut!=y(_e).AStatuer?(m(),P(de,{key:1,size:"small"},{default:n(()=>[...u[1]||(u[1]=[g(" Inscription déjà validée. ",-1)])]),_:1})):(m(),P(de,{key:2,size:"small"},{default:n(()=>[...u[2]||(u[2]=[g(" Seul le centre peut accepter cette inscription. ",-1)])]),_:1}))]),_:1})]),_:1})}}}),Bl=X({__name:"CardValide",props:{inscription:{},idParticipants:{}},emits:["valide"],setup(e,{emit:o}){const t=e,d=o,l=M(()=>(t.inscription.Participants||[]).filter(c=>t.idParticipants?t.idParticipants.includes(c.Participant.Id):!0)),u=H(Object.fromEntries(l.value.filter(c=>(t.inscription.StatutHints||{})[c.Participant.Id].Validable).map(c=>[c.Participant.Id,(t.inscription.StatutHints||{})[c.Participant.Id].Statut]))),i=M(()=>Object.values(u.value).length>0);return(c,p)=>(m(),P(ve,{title:"Valider l'inscription",subtitle:"Un mail de confirmation va être envoyé."},{default:n(()=>[a(fe,null,{default:n(()=>[(m(!0),te(j,null,be(l.value,s=>(m(),P(ml,{participant:s,statut:(t.inscription.StatutHints||{})[s.Participant.Id],modelValue:u.value[s.Participant.Id],"onUpdate:modelValue":r=>u.value[s.Participant.Id]=r},null,8,["participant","statut","modelValue","onUpdate:modelValue"]))),256))]),_:1}),a(He,null,{default:n(()=>[a(Q,{onClick:p[0]||(p[0]=s=>d("valide",u.value,!1)),disabled:!i.value},{default:n(()=>[...p[2]||(p[2]=[g("Valider sans notification",-1)])]),_:1},8,["disabled"]),a(pe),a(Q,{onClick:p[1]||(p[1]=s=>d("valide",u.value,!0)),disabled:!i.value},{default:n(()=>[...p[3]||(p[3]=[g("Valider",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1}))}}),pl=300,gl=X({__name:"DebounceField",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(e){const o=e,t=H(""),d=Ve(e,"modelValue");ue(()=>d.value,()=>{t.value=d.value});let l;function u(i){if(t.value=i||"",clearTimeout(l),!i){d.value=t.value;return}l=setTimeout(()=>{d.value=t.value},pl)}return(i,c)=>(m(),P(Be,B(o,{modelValue:t.value,"onUpdate:modelValue":[c[0]||(c[0]=p=>t.value=p),u]}),{"append-inner":n(()=>[We(i.$slots,"append-inner")]),append:n(()=>[We(i.$slots,"append")]),_:3},16,["modelValue"]))}}),yl={key:0},hl=X({__name:"CardSimilaires",props:{personne:{},api:{}},emits:["identifie"],setup(e,{emit:o}){const t=e,d=o;Ee(u);const l=H([]);async function u(){const I=await t.api.SearchSimilaires({idPersonne:t.personne.Id});I!==void 0&&(l.value=I||[])}const i=H(!1),c=H(""),p=H([]);async function s(){if((c.value||"").length<3)return;const I=await t.api.SelectPersonne({search:c.value});I!==void 0&&(p.value=I||[])}function r(){d("identifie",{IdTemporaire:t.personne.Id,Rattache:!1,RattacheTo:0})}function f(I){d("identifie",{IdTemporaire:t.personne.Id,Rattache:!0,RattacheTo:I})}function b(I){const k=Math.floor(I*2);return`rgb(${255-k},${k}, 15)`}return(I,k)=>{const F=gl;return m(),P(ve,{title:"Identifier le profil",width:"600px",subtitle:i.value?"":"Liste des profils similaires"},{default:n(()=>[a(fe,{class:"pb-0"},{default:n(()=>[i.value?(m(),te("div",yl,[a(F,{modelValue:c.value,"onUpdate:modelValue":[k[0]||(k[0]=A=>c.value=A),s],label:"Rechercher un profil",density:"comfortable",clearable:"",autofocus:"","hide-details":""},null,8,["modelValue"]),a(Ie,{density:"compact"},{default:n(()=>[c.value.length>=3&&!p.value.length?(m(),P(Z,{key:0,class:"ma-2","no-gutters":""},{default:n(()=>[a(S,{class:"text-center"},{default:n(()=>[...k[3]||(k[3]=[R("i",null,"Aucun profil ne correspond à votre recherche.",-1)])]),_:1})]),_:1})):se("",!0),(m(!0),te(j,null,be(p.value,(A,_)=>(m(),P(ae,{key:_,title:A.Label,subtitle:y(L).dateNaissance(A.DateNaissance),"append-icon":y(L).sexeIcon(A.Sexe),onClick:h=>f(A.Id)},null,8,["title","subtitle","append-icon","onClick"]))),128))]),_:1})])):(m(),P(Ie,{key:1,density:"compact"},{default:n(()=>[l.value.length?se("",!0):(m(),P(Z,{key:0,class:"mx-2","no-gutters":""},{default:n(()=>[a(S,{class:"text-center"},{default:n(()=>[...k[4]||(k[4]=[R("i",null,"Aucun profil existant sur la base n'est similaire.",-1)])]),_:1})]),_:1})),(m(!0),te(j,null,be(l.value,(A,_)=>(m(),P(ae,{key:_,title:A.Personne.Label,subtitle:y(L).dateNaissance(A.Personne.DateNaissance),"prepend-icon":y(L).sexeIcon(A.Personne.Sexe),onClick:h=>f(A.Personne.Id)},{append:n(()=>[a(de,{color:b(A.ScorePercent)},{default:n(()=>[g(N(A.ScorePercent)+" % ",1)]),_:2},1032,["color"])]),_:2},1032,["title","subtitle","prepend-icon","onClick"]))),128))]),_:1}))]),_:1}),a(He,null,{default:n(()=>[a(Q,{onClick:k[1]||(k[1]=A=>{i.value=!i.value,c.value=""})},{default:n(()=>[g(N(i.value?"Retour aux suggestions":"Chercher manuellement"),1)]),_:1}),a(pe),a(Q,{variant:"elevated",elevation:"1",onClick:k[2]||(k[2]=A=>r())},{prepend:n(()=>[a(U,null,{default:n(()=>[...k[5]||(k[5]=[g("mdi-plus",-1)])]),_:1})]),default:n(()=>[k[6]||(k[6]=g(" Créer un nouveau profil",-1))]),_:1})]),_:1})]),_:1},8,["subtitle"])}}}),nt=X({__name:"InscriptionEtatcivilCols",props:{personne:{},api:{},acteur:{}},emits:["identifie"],setup(e,{emit:o}){const t=e,d=o;return(l,u)=>(m(),te(j,null,[a(S,{"align-self":"center",cols:"4"},{default:n(()=>[a(De,null,{activator:n(({props:i})=>[t.personne.IsTemp?(m(),P(Ue,{key:0,"close-on-content-click":!1},{activator:n(({props:c})=>[a(de,B({label:""},B(c,i)),{prepend:n(()=>[a(U,{class:"mr-2",icon:"mdi-alert",color:"orange"})]),default:n(()=>[g(" "+N(y(me).label(t.personne)),1)]),_:1},16)]),default:n(()=>[t.acteur==y(Ye).Directeur?(m(),P(ve,{key:0},{default:n(()=>[a(fe,null,{default:n(()=>[...u[1]||(u[1]=[g(" Le rapprochement de ce profil requiert une action du centre d'inscription. ",-1)])]),_:1})]),_:1})):(m(),P(hl,{key:1,api:t.api,personne:t.personne,onIdentifie:u[0]||(u[0]=c=>d("identifie",c))},null,8,["api","personne"]))]),_:2},1024)):(m(),te("div",Ta(B({key:1},i)),N(y(me).label(t.personne)),17))]),default:n(()=>[t.personne.IsTemp?(m(),te(j,{key:0},[g(" Ce profil est temporaire et doit être identifié. ")],64)):(m(),te(j,{key:1},[g(" Ce profil est identifié (ID: "+N(t.personne.Id)+"). ",1)],64))]),_:1})]),_:1}),a(S,{"align-self":"center",cols:"auto"},{default:n(()=>[a(U,{icon:y(L).sexeIcon(t.personne.Sexe),class:"mx-4"},null,8,["icon"])]),_:1}),a(S,{"align-self":"center",cols:"2"},{default:n(()=>[u[2]||(u[2]=R("small",{class:"text-grey"},"né(e) le",-1)),g(" "+N(y(L).dateNaissance(t.personne.DateNaissance)),1)]),_:1})],64))}}),El=X({__name:"InscriptionRow",props:{inscription:{},api:{},user:{},hideDelete:{type:Boolean},alreadyValidated:{type:Boolean}},emits:["identifie","valide","merge","delete","deleteParticipant"],setup(e,{emit:o}){const t=e,d=o,l=M(()=>t.user==null?Ye.Backoffice:Ye.Directeur),u=M(()=>!t.inscription.Responsable.IsTemp&&!!t.inscription.Participants?.every(p=>!p.Personne.IsTemp));function i(p){return u.value&&(t.user===null||t.user==p.IdCamp)}const c=H(null);return(p,s)=>(m(),P(ve,{subtitle:y(L).time(t.inscription.Dossier.MomentInscription,!0,!0)},{append:n(()=>[e.alreadyValidated?(m(),P(De,{key:0,text:"En attente de validation par les autres séjours"},{activator:n(({props:r})=>[a(U,B(r,{color:"green"}),{default:n(()=>[...s[7]||(s[7]=[g(" mdi-check ",-1)])]),_:1},16)]),_:1})):(m(),P(Q,{key:1,disabled:!u.value||!t.inscription.Participants?.length,onClick:s[0]||(s[0]=r=>d("valide"))},{prepend:n(()=>[a(U,null,{default:n(()=>[...s[8]||(s[8]=[g("mdi-check-all",-1)])]),_:1})]),default:n(()=>[s[9]||(s[9]=g(" Tout valider",-1))]),_:1},8,["disabled"])),t.hideDelete?se("",!0):(m(),P(Ue,{key:2},{activator:n(({props:r})=>[a(Q,B(r,{variant:"flat",icon:"mdi-dots-vertical",size:"small",class:"ml-1"}),null,16)]),default:n(()=>[a(Ie,{density:"compact"},{default:n(()=>[a(ae,{"prepend-icon":"mdi-file-move",onClick:s[1]||(s[1]=r=>d("merge")),title:"Fusionner vers ..."}),a(je),a(ae,{title:"Supprimer","prepend-icon":"mdi-delete",onClick:s[2]||(s[2]=r=>d("delete"))})]),_:1})]),_:1}))]),default:n(()=>[a(fe,null,{default:n(()=>[a(Z,null,{default:n(()=>[a(S,{cols:"7"},{default:n(()=>[a(Z,{"no-gutters":"",class:"my-0 py-1"},{default:n(()=>[a(nt,{api:t.api,personne:t.inscription.Responsable,acteur:l.value,onIdentifie:s[3]||(s[3]=r=>d("identifie",r))},null,8,["api","personne","acteur"])]),_:1}),a(je,{thickness:"1"}),(m(!0),te(j,null,be(t.inscription.Participants,(r,f)=>(m(),P(Z,{"no-gutters":"",class:"my-0 py-1",key:f},{default:n(()=>[a(nt,{api:t.api,personne:r.Personne,acteur:l.value,onIdentifie:s[4]||(s[4]=b=>d("identifie",b))},null,8,["api","personne","acteur"]),a(S,{"align-self":"center",cols:"3",class:"text-center"},{default:n(()=>[g(N(y(st).label(r.Camp)),1)]),_:2},1024),a(pe),a(S,{"align-self":"center",cols:"1",class:"pr-2 text-center"},{default:n(()=>[r.Participant.Statut!=y(_e).AStatuer?(m(),P(U,{key:0,color:y(L).statutParticipant(r.Participant.Statut).color,icon:y(L).statutParticipant(r.Participant.Statut).icon},null,8,["color","icon"])):i(r.Participant)?(m(),P(Q,{key:1,size:"small",title:"Valider ce participant...",onClick:b=>d("valide",r.Participant.Id)},{default:n(()=>[a(U,{icon:y(L).statutParticipant(y(_e).AStatuer).icon},null,8,["icon"]),a(U,null,{default:n(()=>[...s[10]||(s[10]=[g("mdi-arrow-right",-1)])]),_:1}),a(U,{icon:y(L).statutParticipant((t.inscription.StatutHints||{})[r.Participant.Id].Statut).icon,color:y(L).statutParticipant((t.inscription.StatutHints||{})[r.Participant.Id].Statut).color},null,8,["icon","color"])]),_:2},1032,["onClick"])):se("",!0)]),_:2},1024),t.hideDelete?se("",!0):(m(),P(S,{key:0,"align-self":"center",cols:"auto"},{default:n(()=>[a(Q,{icon:"",size:"x-small",onClick:b=>c.value=r,title:"Supprimer ce participant..."},{default:n(()=>[a(U,{color:"red"},{default:n(()=>[...s[11]||(s[11]=[g("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1024))]),_:2},1024))),128))]),_:1}),a(S,{cols:"5"},{default:n(()=>[a(Z,{"no-gutters":""},{default:n(()=>[a(S,{cols:"auto",class:"px-2"},{default:n(()=>[a(U,{color:t.inscription.Message.length?"secondary":"grey"},{default:n(()=>[...s[12]||(s[12]=[g("mdi-message",-1)])]),_:1},8,["color"])]),_:1}),a(S,null,{default:n(()=>[(m(!0),te(j,null,be(t.inscription.Message.split(`
`),(r,f)=>(m(),te("div",{key:f},N(r),1))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(qa,{"model-value":c.value!=null,"onUpdate:modelValue":s[6]||(s[6]=r=>c.value=null),"max-width":"600px"},{default:n(()=>[c.value?(m(),P(ve,{key:0,title:"Confirmation"},{default:n(()=>[a(fe,null,{default:n(()=>[s[13]||(s[13]=g(" Confirmez-vous la suppression du participant ",-1)),R("b",null,N(y(me).label(c.value.Personne)),1),s[14]||(s[14]=g(" ? ",-1)),s[15]||(s[15]=R("br",null,null,-1)),s[16]||(s[16]=R("br",null,null,-1)),s[17]||(s[17]=g(" Attention, cette opération est irréversible. ",-1))]),_:1}),a(He,null,{default:n(()=>[a(pe),a(Q,{color:"red",onClick:s[5]||(s[5]=r=>{d("deleteParticipant",c.value.Participant.Id),c.value=null})},{default:n(()=>[...s[18]||(s[18]=[g("Supprimer",-1)])]),_:1})]),_:1})]),_:1})):se("",!0)]),_:1},8,["model-value"])]),_:1},8,["subtitle"]))}});export{xl as V,dl as _,_l as a,Il as b,tt as c,dt as d,Al as e,fl as f,Ml as g,Tl as h,Cl as i,Dl as j,Rl as k,El as l,ul as m,Bl as n,gl as o,ct as p,Za as q};
