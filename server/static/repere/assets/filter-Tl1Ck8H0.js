import{a8 as j,aY as I,c as L,C as M,bN as v,cb as O,d5 as A,j as b,ad as K,F as C}from"./VSnackbar-DjTXu2vS.js";const S=(e,t,n)=>{if(e==null||t==null)return-1;if(!t.length)return 0;e=e.toString().toLocaleLowerCase(),t=t.toString().toLocaleLowerCase();const s=[];let l=e.indexOf(t);for(;~l;)s.push([l,l+t.length]),l=e.indexOf(t,l+t.length);return s.length?s:-1};function _(e,t){if(!(e==null||typeof e=="boolean"||e===-1))return typeof e=="number"?[[e,e+t.length]]:Array.isArray(e[0])?e:[e]}const B=j({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function x(e,t,n){const s=[],l=n?.default??S,a=n?.filterKeys?O(n.filterKeys):!1,f=Object.keys(n?.customKeyFilter??{}).length;if(!e?.length)return s;let c=null;e:for(let o=0;o<e.length;o++){const[r,m=r]=O(e[o]),d={},u={};let i=-1;if((t||f>0)&&!n?.noFilter){let F=!1;if(typeof r=="object"){if(r.type==="divider"||r.type==="subheader"){c?.type==="divider"&&r.type==="subheader"&&s.push(c),c={index:o,matches:{},type:r.type};continue}const y=a||Object.keys(m);F=y.length===f;for(const p of y){const w=A(m,p),k=n?.customKeyFilter?.[p];if(i=k?k(w,t,r):l(w,t,r),i!==-1&&i!==!1)k?d[p]=_(i,t):u[p]=_(i,t);else if(n?.filterMode==="every")continue e}}else i=l(r,t,r),i!==-1&&i!==!1&&(u.title=_(i,t));const h=Object.keys(u).length,g=Object.keys(d).length;if(!h&&!g||n?.filterMode==="union"&&g!==f&&!h||n?.filterMode==="intersection"&&(g!==f||!h&&f>0&&!F))continue}c&&(s.push(c),c=null),s.push({index:o,matches:{...u,...d}})}return s}function E(e,t,n,s){const l=I([]),a=I(new Map),f=L(()=>M(t));v(()=>{const o=typeof n=="function"?n():M(n),r=typeof o!="string"&&typeof o!="number"?"":String(o),m=x(f.value,r,{customKeyFilter:{...e.customKeyFilter,...M(s?.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),d=M(t),u=[],i=new Map;m.forEach(F=>{let{index:h,matches:g}=F;const y=d[h];u.push(y),i.set(y.value,g)}),l.value=u,a.value=i});function c(o){return a.value.get(o.value)}return{filteredItems:l,filteredMatches:a,getMatches:c}}function N(e,t,n){return n==null||!n.length?t:n.map((s,l)=>{const a=l===0?0:n[l-1][1],f=[b("span",{class:K(`${e}__unmask`)},[t.slice(a,s[0])]),b("span",{class:K(`${e}__mask`)},[t.slice(s[0],s[1])])];return l===n.length-1&&f.push(b("span",{class:K(`${e}__unmask`)},[t.slice(s[1])])),b(C,null,[f])})}export{N as h,B as m,E as u};
