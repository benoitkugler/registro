import{Ca as e,Er as t,Mi as n,Ni as r,Sa as i,_a as a,_i as o,ji as s,la as c,ni as l}from"./VSnackbar-CJGaOJRg.js";const u=(e,t,n)=>{if(e==null||t==null)return-1;if(!t.length)return 0;e=e.toString().toLocaleLowerCase(),t=t.toString().toLocaleLowerCase();let r=[],i=e.indexOf(t);for(;~i;)r.push([i,i+t.length]),i=e.indexOf(t,i+t.length);return r.length?r:-1};function d(e,t){if(!(e==null||typeof e==`boolean`||e===-1))return typeof e==`number`?[[e,e+t.length]]:Array.isArray(e[0])?e:[e]}const f=t({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:`intersection`},noFilter:Boolean},`filter`);function p(e,t,n){let r=[],i=n?.default??u,a=n?.filterKeys?o(n.filterKeys):!1,s=Object.keys(n?.customKeyFilter??{}).length;if(!e?.length)return r;let c=null;loop:for(let u=0;u<e.length;u++){let[f,p=f]=o(e[u]),m={},h={},g=-1;if((t||s>0)&&!n?.noFilter){let e=!1;if(typeof f==`object`){if(f.type===`divider`||f.type===`subheader`){c?.type===`divider`&&f.type===`subheader`&&r.push(c),c={index:u,matches:{},type:f.type};continue}let o=a||Object.keys(p);e=o.length===s;for(let e of o){let r=l(p,e),a=n?.customKeyFilter?.[e];if(g=a?a(r,t,f):i(r,t,f),g!==-1&&g!==!1)a?m[e]=d(g,t):h[e]=d(g,t);else if(n?.filterMode===`every`)continue loop}}else g=i(f,t,f),g!==-1&&g!==!1&&(h.title=d(g,t));let o=Object.keys(h).length,_=Object.keys(m).length;if(!o&&!_||n?.filterMode===`union`&&_!==s&&!o||n?.filterMode===`intersection`&&(_!==s||!o&&s>0&&!e))continue}c&&=(r.push(c),null),r.push({index:u,matches:{...h,...m}})}return r}function m(e,t,r,o){let s=a([]),l=a(new Map),u=n(()=>o?.transform?i(t).map(e=>[e,o.transform(e)]):i(t));c(()=>{let n=typeof r==`function`?r():i(r),a=typeof n!=`string`&&typeof n!=`number`?``:String(n),c=p(u.value,a,{customKeyFilter:{...e.customKeyFilter,...i(o?.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),d=i(t),f=[],m=new Map;c.forEach(e=>{let{index:t,matches:n}=e,r=d[t];f.push(r),m.set(r.value,n)}),s.value=f,l.value=m});function d(e){return l.value.get(e.value)}return{filteredItems:s,filteredMatches:l,getMatches:d}}function h(t,n,i){return i==null||!i.length?n:i.map((a,o)=>{let c=o===0?0:i[o-1][1],l=[r(`span`,{class:e(`${t}__unmask`)},[n.slice(c,a[0])]),r(`span`,{class:e(`${t}__mask`)},[n.slice(a[0],a[1])])];return o===i.length-1&&l.push(r(`span`,{class:e(`${t}__unmask`)},[n.slice(a[1])])),r(s,null,[l])})}export{f as n,m as r,h as t};