import{A as _,P as I,c as S,a2 as k,W as j,O,cX as A,j as F,E as M,F as C,z as L,k as P,C as R,J as V,ch as x,aA as z}from"./VSnackbar-BnKbr7GW.js";import{I as E,J as $}from"./VTextarea-D0MQXeA7.js";const B=(e,t,n)=>{if(e==null||t==null)return-1;if(!t.length)return 0;e=e.toString().toLocaleLowerCase(),t=t.toString().toLocaleLowerCase();const r=[];let s=e.indexOf(t);for(;~s;)r.push([s,s+t.length]),s=e.indexOf(t,s+t.length);return r.length?r:-1};function K(e,t){if(!(e==null||typeof e=="boolean"||e===-1))return typeof e=="number"?[[e,e+t.length]]:Array.isArray(e[0])?e:[e]}const W=_({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function D(e,t,n){const r=[],s=n?.default??B,c=n?.filterKeys?O(n.filterKeys):!1,i=Object.keys(n?.customKeyFilter??{}).length;if(!e?.length)return r;let u=null;e:for(let o=0;o<e.length;o++){const[l,a=l]=O(e[o]),d={},m={};let f=-1;if((t||i>0)&&!n?.noFilter){let p=!1;if(typeof l=="object"){if(l.type==="divider"||l.type==="subheader"){u?.type==="divider"&&l.type==="subheader"&&r.push(u),u={index:o,matches:{},type:l.type};continue}const g=c||Object.keys(a);p=g.length===i;for(const b of g){const w=A(a,b),v=n?.customKeyFilter?.[b];if(f=v?v(w,t,l):s(w,t,l),f!==-1&&f!==!1)v?d[b]=K(f,t):m[b]=K(f,t);else if(n?.filterMode==="every")continue e}}else f=s(l,t,l),f!==-1&&f!==!1&&(m.title=K(f,t));const h=Object.keys(m).length,y=Object.keys(d).length;if(!h&&!y||n?.filterMode==="union"&&y!==i&&!h||n?.filterMode==="intersection"&&(y!==i||!h&&i>0&&!p))continue}u&&(r.push(u),u=null),r.push({index:o,matches:{...m,...d}})}return r}function X(e,t,n,r){const s=I([]),c=I(new Map),i=S(()=>k(t));j(()=>{const o=typeof n=="function"?n():k(n),l=typeof o!="string"&&typeof o!="number"?"":String(o),a=D(i.value,l,{customKeyFilter:{...e.customKeyFilter,...k(r?.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),d=k(t),m=[],f=new Map;a.forEach(p=>{let{index:h,matches:y}=p;const g=d[h];m.push(g),f.set(g.value,y)}),s.value=m,c.value=f});function u(o){return c.value.get(o.value)}return{filteredItems:s,filteredMatches:c,getMatches:u}}function G(e,t,n){return n==null||!n.length?t:n.map((r,s)=>{const c=s===0?0:n[s-1][1],i=[F("span",{class:M(`${e}__unmask`)},[t.slice(c,r[0])]),F("span",{class:M(`${e}__mask`)},[t.slice(r[0],r[1])])];return s===n.length-1&&i.push(F("span",{class:M(`${e}__unmask`)},[t.slice(r[1])])),F(C,null,[i])})}const J=_({...z(),...$()},"VForm"),H=L()({name:"VForm",props:J(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:n,emit:r}=t;const s=E(e),c=P();function i(o){o.preventDefault(),s.reset()}function u(o){const l=o,a=s.validate();l.then=a.then.bind(a),l.catch=a.catch.bind(a),l.finally=a.finally.bind(a),r("submit",l),l.defaultPrevented||a.then(d=>{let{valid:m}=d;m&&c.value?.submit()}),l.preventDefault()}return R(()=>F("form",{ref:c,class:M(["v-form",e.class]),style:V(e.style),novalidate:!0,onReset:i,onSubmit:u},[n.default?.(s)])),x(s,c)}});export{H as V,G as h,W as m,X as u};
