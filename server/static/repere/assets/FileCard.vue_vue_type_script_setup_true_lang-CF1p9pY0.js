import{A as ee,B as N,O as te,c4 as Re,ch as $e,R as M,k as D,c as f,Y as S,D as ne,cW as K,b as c,ck as le,T as je,cX as Me,C as Ne,P as ae,cf as Oe,cY as Y,Q as _e,S as Ee,ci as Le,cj as H,cZ as Q,c_ as Ue,cl as Ge,j as m,F as $,c$ as We,G as Ke,aE as ie,d0 as Ye,d as oe,b4 as He,z as re,o as se,w as p,l as X,m as Qe,a3 as B,a7 as Z,e as P,t as Xe,u as Ze,s as q,bU as J,i as qe}from"./VSnackbar-CSHeDWX4.js";import{f as Je,d as et,V as tt,b as nt}from"./VTextarea-BhYI7Lz3.js";const lt=N({id:String,interactive:Boolean,text:String,...je(Me({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:null}),["absolute","persistent"])},"VTooltip"),vt=ee()({name:"VTooltip",props:lt(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:l}=i;const o=te(e,"modelValue"),{scopeId:a}=Re(),n=$e(),u=M(()=>e.id||`v-tooltip-${n}`),r=D(),v=f(()=>e.location.split(" ").length>1?e.location:e.location+" center"),I=f(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),y=M(()=>e.transition!=null?e.transition:o.value?"scale-transition":"fade-transition"),g=f(()=>S({"aria-describedby":u.value},e.activatorProps));return ne(()=>{const C=K.filterProps(e);return c(K,S({ref:r,class:["v-tooltip",{"v-tooltip--interactive":e.interactive},e.class],style:e.style,id:u.value},C,{modelValue:o.value,"onUpdate:modelValue":h=>o.value=h,transition:y.value,absolute:!0,location:v.value,origin:I.value,persistent:!0,role:"tooltip",activatorProps:g.value,_disableGlobalStack:!0},a),{activator:l.activator,default:function(){for(var h=arguments.length,F=new Array(h),w=0;w<h;w++)F[w]=arguments[w];return l.default?.(...F)??e.text}})}),le({},r)}});function at(){function e(l){return[...l.dataTransfer?.items??[]].filter(a=>a.kind==="file").map(a=>a.webkitGetAsEntry()).filter(Boolean).length>0||[...l.dataTransfer?.files??[]].length>0}async function i(l){const o=[],a=[...l.dataTransfer?.items??[]].filter(n=>n.kind==="file").map(n=>n.webkitGetAsEntry()).filter(Boolean);if(a.length)for(const n of a){const u=await ue(n,ce(".",n));o.push(...u.map(r=>r.file))}else o.push(...l.dataTransfer?.files??[]);return o}return{handleDrop:i,hasFilesOrFolders:e}}function ue(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return new Promise((l,o)=>{e.isFile?e.file(n=>l([{file:n,path:i}]),o):e.isDirectory&&e.createReader().readEntries(async n=>{const u=[];for(const r of n)u.push(...await ue(r,ce(i,r)));l(u)})})}function ce(e,i){return i.isDirectory?`${e}/${i.name}`:e}const it=N({filterByType:String},"file-accept");function ot(e){const i=f(()=>e.filterByType?rt(e.filterByType):null);function l(o){if(i.value){const a=o.filter(i.value);return{accepted:a,rejected:o.filter(n=>!a.includes(n))}}return{accepted:o,rejected:[]}}return{filterAccepted:l}}function rt(e){const i=e.split(",").map(n=>n.trim().toLowerCase()),l=i.filter(n=>n.startsWith(".")),o=i.filter(n=>n.endsWith("/*")),a=i.filter(n=>!l.includes(n)&&!o.includes(n));return n=>{const u=n.name.split(".").at(-1)?.toLowerCase()??"",r=n.type.split("/").at(0)?.toLowerCase()??"";return a.includes(n.type)||l.includes(`.${u}`)||o.includes(`${r}/*`)}}const st=N({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},truncateLength:{type:[Number,String],default:22},...Ge({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>ae(e).every(i=>i!=null&&typeof i=="object")},...it(),...Ue({clearable:!0})},"VFileInput"),ut=ee()({name:"VFileInput",inheritAttrs:!1,props:st(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0,rejected:e=>!0},setup(e,i){let{attrs:l,emit:o,slots:a}=i;const{t:n}=Ne(),{filterAccepted:u}=ot(e),r=te(e,"modelValue",e.modelValue,t=>ae(t),t=>!e.multiple&&Array.isArray(t)?t[0]:t),{isFocused:v,focus:I,blur:y}=Oe(e),g=f(()=>typeof e.showSize!="boolean"?e.showSize:void 0),C=f(()=>(r.value??[]).reduce((t,s)=>{let{size:b=0}=s;return t+b},0)),h=f(()=>Y(C.value,g.value)),F=f(()=>(r.value??[]).map(t=>{const{name:s="",size:b=0}=t,V=he(s);return e.showSize?`${V} (${Y(b,g.value)})`:V})),w=f(()=>{const t=r.value?.length??0;return e.showSize?n(e.counterSizeString,t,h.value):n(e.counterString,t)}),O=D(),_=D(),d=D(),de=M(()=>v.value||e.active),E=f(()=>["plain","underlined"].includes(e.variant)),T=_e(!1),{handleDrop:fe,hasFilesOrFolders:ve}=at();function A(){d.value!==document.activeElement&&d.value?.focus(),v.value||I()}function pe(t){d.value?.click()}function me(t){o("mousedown:control",t)}function ye(t){d.value?.click(),o("click:control",t)}function ge(t){t.stopPropagation(),A(),ie(()=>{r.value=[],Ye(e["onClick:clear"],t)})}function he(t){if(t.length<Number(e.truncateLength))return t;const s=Math.floor((Number(e.truncateLength)-1)/2);return`${t.slice(0,s)}…${t.slice(t.length-s)}`}function be(t){t.preventDefault(),t.stopImmediatePropagation(),T.value=!0}function Ve(t){t.preventDefault(),T.value=!1}async function ke(t){if(t.preventDefault(),t.stopImmediatePropagation(),T.value=!1,!d.value||!ve(t))return;const s=await fe(t);L(s)}function Ce(t){if(!(!t.target||t.repack))if(e.filterByType)L([...t.target.files]);else{const s=t.target;r.value=[...s.files??[]]}}function L(t){const s=new DataTransfer,{accepted:b,rejected:V}=u(t);V.length&&o("rejected",V);for(const z of b)s.items.add(z);d.value.files=s.files,r.value=[...s.files];const x=new Event("change",{bubbles:!0});x.repack=!0,d.value.dispatchEvent(x)}return Ee(r,t=>{(!Array.isArray(t)||!t.length)&&d.value&&(d.value.value="")}),ne(()=>{const t=!!(a.counter||e.counter),s=!!(t||a.details),[b,V]=Le(l),{modelValue:x,...z}=H.filterProps(e),Fe={...Q.filterProps(e),"onClick:clear":ge},we=l.webkitdirectory!==void 0&&l.webkitdirectory!==!1,Se=l.accept?String(l.accept):void 0,Ie=we?void 0:e.filterByType??Se;return c(H,S({ref:O,modelValue:e.multiple?r.value:r.value[0],class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--dragging":T.value,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":E.value},e.class],style:e.style,"onClick:prepend":pe},b,z,{centerAffix:!E.value,focused:v.value}),{...a,default:R=>{let{id:De,isDisabled:U,isDirty:G,isReadonly:W,isValid:Te,hasDetails:Be}=R;return c(Q,S({ref:_,prependIcon:e.prependIcon,onMousedown:me,onClick:ye,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},Fe,{id:De.value,active:de.value||G.value,dirty:G.value||e.dirty,disabled:U.value,focused:v.value,details:Be.value,error:Te.value===!1,onDragover:be,onDrop:ke}),{...a,default:Pe=>{let{props:{class:Ae,...xe},controlRef:ze}=Pe;return m($,null,[m("input",S({ref:k=>d.value=ze.value=k,type:"file",accept:Ie,readonly:W.value,disabled:U.value,multiple:e.multiple,name:e.name,onClick:k=>{k.stopPropagation(),W.value&&k.preventDefault(),A()},onChange:Ce,onDragleave:Ve,onFocus:A,onBlur:y},xe,V),null),m("div",{class:Ke(Ae)},[!!r.value?.length&&!e.hideInput&&(a.selection?a.selection({fileNames:F.value,totalBytes:C.value,totalBytesReadable:h.value}):e.chips?F.value.map(k=>c(Je,{key:k,size:"small",text:k},null)):F.value.join(", "))])])}})},details:s?R=>m($,null,[a.details?.(R),t&&m($,null,[m("span",null,null),c(We,{active:!!r.value?.length,value:w.value,disabled:e.disabled},a.counter)])]):void 0})}),le({},O,_,d)}}),j=5e6,pt=oe({__name:"FileInput",props:{label:{}},emits:["update"],setup(e,{expose:i,emit:l}){const o=e,a=l,n=D(null);function u(y){return y?y.size<=j||`Taille maximale : ${j/1e6}MB`:!0}function r(){n.value&&n.value.size>j||a("update",n.value)}i({openDialog:I});const v=He("input");function I(){ie(()=>v.value?.click())}return(y,g)=>(se(),re(ut,{label:o.label,density:"comfortable",accept:".jpg,.jpeg,.png,.pdf",multiple:!1,modelValue:n.value,"onUpdate:modelValue":[g[0]||(g[0]=C=>n.value=C),r],rules:[u],"show-size":"",ref_key:"input",ref:v},null,8,["label","modelValue","rules"]))}}),ct={class:"text-right ml-2"},mt=oe({__name:"FileCard",props:{file:{},readonly:{type:Boolean}},emits:["delete"],setup(e,{emit:i}){const l=e,o=i;return(a,n)=>(se(),re(et,null,{activator:p(({props:u})=>[c(X,S({class:"my-2"},u),{default:p(()=>[c(qe,{cover:"",src:B(J).LoadMiniature(l.file.Key),width:"56px"},null,8,["src"])]),_:1},16)]),default:p(()=>[c(X,null,{default:p(()=>[c(Qe,{class:"px-0"},{default:p(()=>[c(tt,{"min-width":"400",title:l.file.NomClient,subtitle:B(Z).size(l.file.Taille)},{append:p(()=>[m("div",ct,[n[1]||(n[1]=P(" téléversé le ",-1)),n[2]||(n[2]=m("br",null,null,-1)),P(" "+Xe(B(Z).time(l.file.Uploaded)),1)])]),_:1},8,["title","subtitle"])]),_:1}),c(Ze,null,{default:p(()=>[c(q,{onClick:n[0]||(n[0]=u=>o("delete")),color:"red"},{default:p(()=>[...n[3]||(n[3]=[P(" Supprimer ",-1)])]),_:1}),c(nt),c(q,{href:B(J).LoadDocument(l.file.Key)},{default:p(()=>[...n[4]||(n[4]=[P(" Télécharger ",-1)])]),_:1},8,["href"])]),_:1})]),_:1})]),_:1}))}});export{vt as V,mt as _,pt as a};
