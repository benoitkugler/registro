import{bc as Ct,bX as _t,be as xt,b1 as It,b0 as Dt,aI as Tt,Q as ee,c as M,E as Mt,ag as Ae,S as se,bu as ot,bY as Rt,bZ as Re,X as Bt,b_ as Et,bz as At,A as $e,B as Fe,a0 as $t,aq as Ft,b$ as Nt,H as Oe,c0 as Lt,ar as zt,c1 as Ut,c2 as Ht,O as he,c3 as Ot,c4 as qt,k as z,c5 as Yt,R as Ce,aE as qe,c6 as jt,c7 as Wt,as as Xt,D as Ne,av as Kt,aw as Qt,ay as Zt,c8 as Gt,az as Jt,c9 as ea,ca as ta,aB as aa,aC as la,j as R,b as a,i as na,J as Le,Y as E,cb as oa,cc as ia,F as X,cd as sa,K as Be,G as _e,ce as ua,cf as ra,cg as ca,ch as da,ci as va,cj as Qe,ck as it,cl as ma,cm as fa,a8 as O,cn as pa,an as ga,C as ya,aQ as ha,P as ba,co as Va,cp as ka,n as Ee,T as Sa,cq as Pa,cr as Ze,cs as Ge,bP as wa,ct as Ca,cu as _a,cv as xa,e as g,d as j,x as Te,y as Ve,z as k,a3 as y,aY as Xe,aX as Ke,o as f,l as ce,w as n,m as de,al as Ia,t as F,cw as Da,a as te,a6 as be,aM as fe,a7 as L,cx as Ta,s as Q,aa as Ma,aN as st,ad as Ra,a5 as ue,g as Z,h as S,u as ze,aO as xe,cy as Ba,cz as Ea,r as Ye,a9 as ut,aV as je,bI as Aa}from"./VSnackbar-BcBB9vBf.js";import{V as Je,m as $a}from"./VSheet-rtg9rSdu.js";import{m as et,n as Fa,u as Na,o as La,p as za,q as Ua,d as Ue,e as Ie,V as ae,r as Ha,a as We,i as Oa,l as qa,f as me,g as rt,b as pe}from"./VTextarea-DogYeZ5r.js";import{V as De}from"./FileCard.vue_vue_type_script_setup_true_lang-DSEWriz1.js";import{f as Ya}from"./VTabs-DHWhID3Q.js";import{u as ja,m as Wa,h as Xa,V as Ka}from"./VForm-X-PA9362.js";import{V as Qa}from"./VDialog-Dkyvra8L.js";class Za extends _t{constructor(o,t,d,l,s){super(l,s),this.onError=o,this.showMessage=t,this.isFondsSoutien=d}hasToken(){return this.authToken!=""}setToken(o,t){this.authToken=o,this.isFondsSoutien=t}handleError(o){const{kind:t,messageHtml:d}=xt(o);this.onError(t,d)}startRequest(){}}const tt=new Za((e,o)=>{},(e,o)=>{},!1,Ct(),"");function xl(e){return e.Camp.Statut!=Tt.Ferme&&!e.IsTerminated}function ct(){return{Pattern:"",IdCamp:{Valid:!1,Id:0},Attente:Dt.EmptyQA,Reglement:It.EmptyQR,SortByNewMessages:!1,OnlyFondSoutien:!1}}function Ga(e){const o=ct();return o.Pattern=`id:${e}`,o}function Ja(e){let{rootEl:o,isSticky:t,layoutItemStyles:d}=e;const l=ee(!1),s=ee(0),i=M(()=>{const u=typeof l.value=="boolean"?"top":l.value;return[t.value?{top:"auto",bottom:"auto",height:void 0}:void 0,l.value?{[u]:Mt(s.value)}:{top:d.value.top}]});Ae(()=>{se(t,u=>{u?window.addEventListener("scroll",p,{passive:!0}):window.removeEventListener("scroll",p)},{immediate:!0})}),ot(()=>{window.removeEventListener("scroll",p)});let c=0;function p(){const u=c>window.scrollY?"up":"down",r=o.value.getBoundingClientRect(),m=parseFloat(d.value.top??0),b=window.scrollY-Math.max(0,s.value-m),I=r.height+Math.max(s.value,m)-window.scrollY-window.innerHeight,C=parseFloat(getComputedStyle(o.value).getPropertyValue("--v-body-scroll-y"))||0;r.height<window.innerHeight-m?(l.value="top",s.value=m):u==="up"&&l.value==="bottom"||u==="down"&&l.value==="top"?(s.value=window.scrollY+r.top-C,l.value=!0):u==="down"&&I<=0?(s.value=0,l.value="bottom"):u==="up"&&b<=0&&(C?l.value!=="top"&&(s.value=-b+C+m,l.value="top"):(s.value=r.top+b,l.value="top")),c=window.scrollY}return{isStuck:l,stickyStyles:i}}const el=100,tl=20;function at(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function lt(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let o=0;for(let t=e.length-1;t>0;t--){if(e[t].t===e[t-1].t)continue;const d=at(o),l=(e[t].d-e[t-1].d)/(e[t].t-e[t-1].t);o+=(l-d)*Math.abs(l),t===e.length-1&&(o*=.5)}return at(o)*1e3}function al(){const e={};function o(l){Array.from(l.changedTouches).forEach(s=>{(e[s.identifier]??(e[s.identifier]=new Rt(tl))).push([l.timeStamp,s])})}function t(l){Array.from(l.changedTouches).forEach(s=>{delete e[s.identifier]})}function d(l){const s=e[l]?.values().reverse();if(!s)throw new Error(`No samples for touch id ${l}`);const i=s[0],c=[],p=[];for(const u of s){if(i[0]-u[0]>el)break;c.push({t:u[0],d:u[1].clientX}),p.push({t:u[0],d:u[1].clientY})}return{x:lt(c),y:lt(p),get direction(){const{x:u,y:r}=this,[m,b]=[Math.abs(u),Math.abs(r)];return m>b&&u>=0?"right":m>b&&u<=0?"left":b>m&&r>=0?"down":b>m&&r<=0?"up":ll()}}}return{addMovement:o,endTouch:t,getVelocity:d}}function ll(){throw new Error}function nl(e){let{el:o,isActive:t,isTemporary:d,width:l,touchless:s,position:i}=e;Ae(()=>{window.addEventListener("touchstart",h,{passive:!0}),window.addEventListener("touchmove",le,{passive:!1}),window.addEventListener("touchend",ne,{passive:!0})}),ot(()=>{window.removeEventListener("touchstart",h),window.removeEventListener("touchmove",le),window.removeEventListener("touchend",ne)});const c=M(()=>["left","right"].includes(i.value)),{addMovement:p,endTouch:u,getVelocity:r}=al();let m=!1;const b=ee(!1),I=ee(0),C=ee(0);let N;function B(_,V){return(i.value==="left"?_:i.value==="right"?document.documentElement.clientWidth-_:i.value==="top"?_:i.value==="bottom"?document.documentElement.clientHeight-_:ye())-(V?l.value:0)}function x(_){let V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const D=i.value==="left"?(_-C.value)/l.value:i.value==="right"?(document.documentElement.clientWidth-_-C.value)/l.value:i.value==="top"?(_-C.value)/l.value:i.value==="bottom"?(document.documentElement.clientHeight-_-C.value)/l.value:ye();return V?At(D):D}function h(_){if(s.value)return;const V=_.changedTouches[0].clientX,D=_.changedTouches[0].clientY,T=25,Y=i.value==="left"?V<T:i.value==="right"?V>document.documentElement.clientWidth-T:i.value==="top"?D<T:i.value==="bottom"?D>document.documentElement.clientHeight-T:ye(),U=t.value&&(i.value==="left"?V<l.value:i.value==="right"?V>document.documentElement.clientWidth-l.value:i.value==="top"?D<l.value:i.value==="bottom"?D>document.documentElement.clientHeight-l.value:ye());(Y||U||t.value&&d.value)&&(N=[V,D],C.value=B(c.value?V:D,t.value),I.value=x(c.value?V:D),m=C.value>-20&&C.value<80,u(_),p(_))}function le(_){const V=_.changedTouches[0].clientX,D=_.changedTouches[0].clientY;if(m){if(!_.cancelable){m=!1;return}const Y=Math.abs(V-N[0]),U=Math.abs(D-N[1]);(c.value?Y>U&&Y>3:U>Y&&U>3)?(b.value=!0,m=!1):(c.value?U:Y)>3&&(m=!1)}if(!b.value)return;_.preventDefault(),p(_);const T=x(c.value?V:D,!1);I.value=Math.max(0,Math.min(1,T)),T>1?C.value=B(c.value?V:D,!0):T<0&&(C.value=B(c.value?V:D,!1))}function ne(_){if(m=!1,!b.value)return;p(_),b.value=!1;const V=r(_.changedTouches[0].identifier),D=Math.abs(V.x),T=Math.abs(V.y);(c.value?D>T&&D>400:T>D&&T>3)?t.value=V.direction===({left:"right",right:"left",top:"down",bottom:"up"}[i.value]||ye()):t.value=I.value>.5}const oe=M(()=>b.value?{transform:i.value==="left"?`translateX(calc(-100% + ${I.value*l.value}px))`:i.value==="right"?`translateX(calc(100% - ${I.value*l.value}px))`:i.value==="top"?`translateY(calc(-100% + ${I.value*l.value}px))`:i.value==="bottom"?`translateY(calc(100% - ${I.value*l.value}px))`:ye(),transition:"none"}:void 0);return Re(b,()=>{const _=o.value?.style.transform??null,V=o.value?.style.transition??null;Bt(()=>{o.value?.style.setProperty("transform",oe.value?.transform||"none"),o.value?.style.setProperty("transition",oe.value?.transition||null)}),Et(()=>{o.value?.style.setProperty("transform",_),o.value?.style.setProperty("transition",V)})}),{isDragging:b,dragProgress:I,dragStyles:oe}}function ye(){throw new Error}const ol=["start","end","left","right","top","bottom"],il=Fe({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>ol.includes(e)},sticky:Boolean,...la(),...aa(),...ta(),...ea({mobile:null}),...Jt(),...Gt(),...Zt(),...Qt({tag:"nav"}),...Kt()},"VNavigationDrawer"),Il=$e()({name:"VNavigationDrawer",props:il(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,o){let{attrs:t,emit:d,slots:l}=o;const{isRtl:s}=$t(),{themeClasses:i}=Ft(e),{borderClasses:c}=Nt(e),{backgroundColorClasses:p,backgroundColorStyles:u}=Oe(()=>e.color),{elevationClasses:r}=Lt(e),{displayClasses:m,mobile:b}=zt(e),{roundedClasses:I}=Ut(e),C=Ht(),N=he(e,"modelValue",null,q=>!!q),{ssrBootStyles:B}=Ot(),{scopeId:x}=qt(),h=z(),le=ee(!1),{runOpenDelay:ne,runCloseDelay:oe}=oa(e,q=>{le.value=q}),_=M(()=>e.rail&&e.expandOnHover&&le.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),V=M(()=>Yt(e.location,s.value)),D=Ce(()=>e.persistent),T=M(()=>!e.permanent&&(b.value||e.temporary)),Y=M(()=>e.sticky&&!T.value&&V.value!=="bottom");Re(()=>e.expandOnHover&&e.rail!=null,()=>{se(le,q=>d("update:rail",!q))}),Re(()=>!e.disableResizeWatcher,()=>{se(T,q=>!e.permanent&&qe(()=>N.value=!q))}),Re(()=>!e.disableRouteWatcher&&!!C,()=>{se(C.currentRoute,()=>T.value&&(N.value=!1))}),se(()=>e.permanent,q=>{q&&(N.value=!0)}),e.modelValue==null&&!T.value&&(N.value=e.permanent||!b.value);const{isDragging:U,dragProgress:G}=nl({el:h,isActive:N,isTemporary:T,width:_,touchless:Ce(()=>e.touchless),position:V}),ie=M(()=>{const q=T.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):_.value;return U.value?q*G.value:q}),{layoutItemStyles:A,layoutItemScrimStyles:J}=jt({id:e.name,order:M(()=>parseInt(e.order,10)),position:V,layoutSize:ie,elementSize:_,active:Wt(N),disableTransitions:Ce(()=>U.value),absolute:M(()=>e.absolute||Y.value&&typeof ge.value!="string")}),{isStuck:ge,stickyStyles:ke}=Ja({rootEl:h,isSticky:Y,layoutItemStyles:A}),re=Oe(()=>typeof e.scrim=="string"?e.scrim:null),Se=M(()=>({...U.value?{opacity:G.value*.2,transition:"none"}:void 0,...J.value}));return Xt({VList:{bgColor:"transparent"}}),Ne(()=>{const q=l.image||e.image;return R(X,null,[a(e.tag,E({ref:h,onMouseenter:ne,onMouseleave:oe,class:["v-navigation-drawer",`v-navigation-drawer--${V.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":le.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":T.value,"v-navigation-drawer--persistent":D.value,"v-navigation-drawer--active":N.value,"v-navigation-drawer--sticky":Y.value},i.value,p.value,c.value,m.value,r.value,I.value,e.class],style:[u.value,A.value,B.value,ke.value,e.style]},x,t),{default:()=>[q&&R("div",{key:"image",class:"v-navigation-drawer__img"},[l.image?a(Le,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},l.image):a(na,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),l.prepend&&R("div",{class:"v-navigation-drawer__prepend"},[l.prepend?.()]),R("div",{class:"v-navigation-drawer__content"},[l.default?.()]),l.append&&R("div",{class:"v-navigation-drawer__append"},[l.append?.()])]}),a(ia,{name:"fade-transition"},{default:()=>[T.value&&(U.value||N.value)&&!!e.scrim&&R("div",E({class:["v-navigation-drawer__scrim",re.backgroundColorClasses.value],style:[Se.value,re.backgroundColorStyles.value],onClick:()=>{D.value||(N.value=!1)}},x),null)]})])}),{isStuck:ge}}}),sl=sa("v-picker-title"),ul=Fe({bgColor:String,divided:Boolean,landscape:Boolean,title:String,hideHeader:Boolean,hideTitle:Boolean,...$a()},"VPicker"),Dl=$e()({name:"VPicker",props:ul(),setup(e,o){let{slots:t}=o;const{backgroundColorClasses:d,backgroundColorStyles:l}=Oe(()=>e.color);return Ne(()=>{const s=Je.filterProps(e),i=!e.hideTitle&&!!(e.title||t.title);return a(Je,E(s,{color:e.bgColor,class:["v-picker",{"v-picker--divided":e.divided,"v-picker--landscape":e.landscape,"v-picker--with-actions":!!t.actions},e.class],style:e.style}),{default:()=>[!e.hideHeader&&R("div",{key:"header",class:_e([d.value]),style:Be([l.value])},[i&&a(sl,{key:"picker-title"},{default:()=>[t.title?.()??e.title]}),t.header&&R("div",{class:"v-picker__header"},[t.header()])]),R("div",{class:"v-picker__body"},[t.default?.()]),t.actions&&a(Le,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[R("div",{class:"v-picker__actions"},[t.actions()])]})]})}),{}}}),rl=Fe({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...ma(),...Fa()},"VSwitch"),Tl=$e()({name:"VSwitch",inheritAttrs:!1,props:rl(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,o){let{attrs:t,slots:d}=o;const l=he(e,"indeterminate"),s=he(e,"modelValue"),{loaderClasses:i}=ua(e),{isFocused:c,focus:p,blur:u}=ra(e),r=z(),m=z(),b=ca&&window.matchMedia("(forced-colors: active)").matches,I=Ce(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),C=da(),N=Ce(()=>e.id||`switch-${C}`);function B(){l.value&&(l.value=!1)}function x(h){h.stopPropagation(),h.preventDefault(),r.value?.input?.click()}return Ne(()=>{const[h,le]=va(t),ne=Qe.filterProps(e),oe=et.filterProps(e);return a(Qe,E({ref:m,class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":l.value},i.value,e.class]},h,ne,{modelValue:s.value,"onUpdate:modelValue":_=>s.value=_,id:N.value,focused:c.value,style:e.style}),{...d,default:_=>{let{id:V,messagesId:D,isDisabled:T,isReadonly:Y,isValid:U}=_;const G={model:s,isValid:U};return a(et,E({ref:r},oe,{modelValue:s.value,"onUpdate:modelValue":[ie=>s.value=ie,B],id:V.value,"aria-describedby":D.value,type:"checkbox","aria-checked":l.value?"mixed":void 0,disabled:T.value,readonly:Y.value,onFocus:p,onBlur:u},le),{...d,default:ie=>{let{backgroundColorClasses:A,backgroundColorStyles:J}=ie;return R("div",{class:_e(["v-switch__track",b?void 0:A.value]),style:Be(J.value),onClick:x},[d["track-true"]&&R("div",{key:"prepend",class:"v-switch__track-true"},[d["track-true"](G)]),d["track-false"]&&R("div",{key:"append",class:"v-switch__track-false"},[d["track-false"](G)])])},input:ie=>{let{inputNode:A,icon:J,backgroundColorClasses:ge,backgroundColorStyles:ke}=ie;return R(X,null,[A,R("div",{class:_e(["v-switch__thumb",{"v-switch__thumb--filled":J||e.loading},e.inset||b?void 0:ge.value]),style:Be(e.inset?void 0:ke.value)},[d.thumb?a(Le,{defaults:{VIcon:{icon:J,size:"x-small"}}},{default:()=>[d.thumb({...G,icon:J})]}):a(fa,null,{default:()=>[e.loading?a(pa,{name:"v-switch",active:!0,color:U.value===!1?void 0:I.value},{default:re=>d.loader?d.loader(re):a(ga,{active:re.isActive,color:re.color,indeterminate:!0,size:"16",width:"2"},null)}):J&&a(O,{key:String(J),icon:J,size:"x-small"},null)]})])])}})}})}),it({},m)}}),cl=Fe({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...Wa({filterKeys:["title"]}),...Ua(),...Sa(Pa({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"])},"VAutocomplete"),dt=$e()({name:"VAutocomplete",props:cl(),emits:{"update:focused":e=>!0,"update:search":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,o){let{slots:t}=o;const{t:d}=ya(),l=z(),s=ee(!1),i=ee(!0),c=ee(!1),p=z(),u=z(),r=ee(-1),m=ee(null),{items:b,transformIn:I,transformOut:C}=Na(e),{textColorClasses:N,textColorStyles:B}=ha(()=>l.value?.color),x=he(e,"search",""),h=he(e,"modelValue",[],v=>I(v===null?[null]:ba(v)),v=>{const $=C(v);return e.multiple?$:$[0]??null}),le=M(()=>typeof e.counterValue=="function"?e.counterValue(h.value):typeof e.counterValue=="number"?e.counterValue:h.value.length),ne=Va(e),{filteredItems:oe,getMatches:_}=ja(e,b,()=>m.value??(i.value?"":x.value)),V=M(()=>e.hideSelected&&m.value===null?oe.value.filter(v=>!h.value.some($=>$.value===v.value)):oe.value),D=M(()=>!!(e.chips||t.chip)),T=M(()=>D.value||!!t.selection),Y=M(()=>h.value.map(v=>v.props.value)),U=M(()=>(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&x.value===V.value[0]?.title)&&V.value.length>0&&!i.value&&!c.value),G=M(()=>e.hideNoData&&!V.value.length||ne.isReadonly.value||ne.isDisabled.value),ie=he(e,"menu"),A=M({get:()=>ie.value,set:v=>{ie.value&&!v&&p.value?.ΨopenChildren.size||v&&G.value||(ie.value=v)}}),{menuId:J,ariaExpanded:ge,ariaControls:ke,ariaLabel:re}=La(e,A),Se=z(),q=za(Se,l);function mt(v){e.openOnClear&&(A.value=!0),x.value=""}function ft(){G.value||(A.value=!0)}function pt(v){G.value||(s.value&&(v.preventDefault(),v.stopPropagation()),A.value=!A.value)}function gt(v){(Ze(v)||v.key==="Backspace")&&l.value?.focus()}function yt(v){if(ne.isReadonly.value)return;const $=l.value?.selectionStart,H=h.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(v.key)&&v.preventDefault(),["Enter","ArrowDown"].includes(v.key)&&(A.value=!0),["Escape"].includes(v.key)&&(A.value=!1),U.value&&["Enter","Tab"].includes(v.key)&&!h.value.some(P=>{let{value:w}=P;return w===V.value[0].value})&&ve(V.value[0]),v.key==="ArrowDown"&&U.value&&Se.value?.focus("next"),["Backspace","Delete"].includes(v.key)){if(!e.multiple&&T.value&&h.value.length>0&&!x.value)return ve(h.value[0],!1);if(~r.value){v.preventDefault();const P=r.value;ve(h.value[r.value],!1),r.value=P>=H-1?H-2:P}else v.key==="Backspace"&&!x.value&&(r.value=H-1);return}if(e.multiple)if(v.key==="ArrowLeft"){if(r.value<0&&$&&$>0)return;const P=r.value>-1?r.value-1:H-1;if(h.value[P])r.value=P;else{const w=x.value?.length??null;r.value=-1,l.value?.setSelectionRange(w,w)}}else if(v.key==="ArrowRight"){if(r.value<0)return;const P=r.value+1;h.value[P]?r.value=P:(r.value=-1,l.value?.setSelectionRange(0,0))}else~r.value&&Ze(v)&&(r.value=-1)}function ht(v){if(Ge(l.value,":autofill")||Ge(l.value,":-webkit-autofill")){const $=b.value.find(H=>H.title===v.target.value);$&&ve($)}}function bt(){e.eager&&u.value?.calculateVisibleItems()}function Vt(){s.value&&(i.value=!0,l.value?.focus()),m.value=null}function kt(v){s.value=!0,setTimeout(()=>{c.value=!0})}function St(v){c.value=!1}function Pt(v){(v==null||v===""&&!e.multiple&&!T.value)&&(h.value=[])}const He=ee(!1);function ve(v){let $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!v||v.props.disabled))if(e.multiple){const H=h.value.findIndex(w=>(e.valueComparator||wa)(w.value,v.value)),P=$??!~H;if(~H){const w=P?[...h.value,v]:[...h.value];w.splice(H,1),h.value=w}else P&&(h.value=[...h.value,v]);e.clearOnSelect&&(x.value="")}else{const H=$!==!1;h.value=H?[v]:[],m.value=i.value?"":x.value??"",x.value=H&&!T.value?v.title:"",qe(()=>{A.value=!1,i.value=!0})}}return se(s,(v,$)=>{v!==$&&(v?(He.value=!0,x.value=e.multiple||T.value?"":String(h.value.at(-1)?.props.title??""),i.value=!0,qe(()=>He.value=!1)):(!e.multiple&&x.value==null&&(h.value=[]),A.value=!1,!i.value&&x.value&&(m.value=x.value),x.value="",r.value=-1))}),se(x,v=>{!s.value||He.value||(v&&(A.value=!0),i.value=!v)}),se(A,v=>{if(!e.hideSelected&&v&&h.value.length&&i.value){const $=V.value.findIndex(H=>h.value.some(P=>H.value===P.value));ka&&window.requestAnimationFrame(()=>{$>=0&&u.value?.scrollToIndex($)})}v&&(m.value=null)}),se(b,(v,$)=>{A.value||s.value&&!$.length&&v.length&&(A.value=!0)}),Ne(()=>{const v=!!(!e.hideNoData||V.value.length||t["prepend-item"]||t["append-item"]||t["no-data"]),$=h.value.length>0,H=Ee.filterProps(e);return a(Ee,E({ref:l},H,{modelValue:x.value,"onUpdate:modelValue":[P=>x.value=P,Pt],focused:s.value,"onUpdate:focused":P=>s.value=P,validationValue:h.externalValue,counterValue:le.value,dirty:$,onChange:ht,class:["v-autocomplete",`v-autocomplete--${e.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":A.value,"v-autocomplete--chips":!!e.chips,"v-autocomplete--selection-slot":!!T.value,"v-autocomplete--selecting-index":r.value>-1},e.class],style:e.style,readonly:ne.isReadonly.value,placeholder:$?void 0:e.placeholder,"onClick:clear":mt,"onMousedown:control":ft,onKeydown:yt,"aria-expanded":ge.value,"aria-controls":ke.value}),{...t,default:()=>R(X,null,[a(Ue,E({id:J.value,ref:p,modelValue:A.value,"onUpdate:modelValue":P=>A.value=P,activator:"parent",contentClass:"v-autocomplete__content",disabled:G.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,onAfterEnter:bt,onAfterLeave:Vt},e.menuProps),{default:()=>[v&&a(Ie,E({ref:Se,filterable:!0,selected:Y.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:P=>P.preventDefault(),onKeydown:gt,onFocusin:kt,onFocusout:St,tabindex:"-1",selectable:!0,"aria-live":"polite",color:e.itemColor??e.color},q,e.listProps),{default:()=>[t["prepend-item"]?.(),!V.value.length&&!e.hideNoData&&(t["no-data"]?.()??a(ae,{key:"no-data",title:d(e.noDataText)},null)),a(Ha,{ref:u,renderless:!0,items:V.value,itemKey:"value"},{default:P=>{let{item:w,index:W,itemRef:Me}=P;const Pe=E(w.props,{ref:Me,key:w.value,active:U.value&&W===0?!0:void 0,onClick:()=>ve(w,null)});return w.type==="divider"?t.divider?.({props:w.raw,index:W})??a(We,E(w.props,{key:`divider-${W}`}),null):w.type==="subheader"?t.subheader?.({props:w.raw,index:W})??a(Oa,E(w.props,{key:`subheader-${W}`}),null):t.item?.({item:w,index:W,props:Pe})??a(ae,E(Pe,{role:"option"}),{prepend:we=>{let{isSelected:K}=we;return R(X,null,[e.multiple&&!e.hideSelected?a(qa,{key:w.value,modelValue:K,ripple:!1,tabindex:"-1",onClick:wt=>wt.preventDefault()},null):void 0,w.props.prependAvatar&&a(_a,{image:w.props.prependAvatar},null),w.props.prependIcon&&a(O,{icon:w.props.prependIcon},null)])},title:()=>i.value?w.title:Xa("v-autocomplete",w.title,_(w)?.title)})}}),t["append-item"]?.()]})]}),h.value.map((P,w)=>{function W(K){K.stopPropagation(),K.preventDefault(),ve(P,!1)}const Me={"onClick:close":W,onKeydown(K){K.key!=="Enter"&&K.key!==" "||(K.preventDefault(),K.stopPropagation(),W(K))},onMousedown(K){K.preventDefault(),K.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},Pe=D.value?!!t.chip:!!t.selection,we=Pe?xa(D.value?t.chip({item:P,index:w,props:Me}):t.selection({item:P,index:w})):void 0;if(!(Pe&&!we))return R("div",{key:P.value,class:_e(["v-autocomplete__selection",w===r.value&&["v-autocomplete__selection--selected",N.value]]),style:Be(w===r.value?B.value:{})},[D.value?t.chip?a(Le,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:P.title}}},{default:()=>[we]}):a(me,E({key:"chip",closable:e.closableChips,size:"small",text:P.title,disabled:P.props.disabled},Me),null):we??R("span",{class:"v-autocomplete__selection-text"},[P.title,e.multiple&&w<h.value.length-1&&R("span",{class:"v-autocomplete__selection-comma"},[g(",")])])])})]),"append-inner":function(){for(var P=arguments.length,w=new Array(P),W=0;W<P;W++)w[W]=arguments[W];return R(X,null,[t["append-inner"]?.(...w),e.menuIcon?a(O,{class:"v-autocomplete__menu-icon",color:l.value?.fieldIconColor,icon:e.menuIcon,onMousedown:pt,onClick:Ca,"aria-label":re.value,title:re.value,tabindex:"-1"},null):void 0])}})}),it({isFocused:s,isPristine:i,menu:A,search:x,filteredItems:oe,select:ve},l)}}),dl=300,vl=j({__name:"SelectPersonne",props:Te({label:{},initialPersonne:{},api:{},readonly:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const o=e,t=Ve(e,"modelValue"),d=z(t.value==0?[]:[{title:o.initialPersonne,value:t.value}]),l=z("");async function s(){if(!l.value)return;const p=await o.api.SelectPersonne({search:l.value});p!==void 0&&(d.value=(p||[]).map(u=>({title:u.Label,value:u.Id})))}let i;function c(p){l.value=p||"",clearTimeout(i),i=setTimeout(s,dl)}return(p,u)=>(f(),k(dt,{label:o.label,variant:"outlined",density:"compact",readonly:o.readonly,"hide-details":"",items:d.value,"model-value":y(Ke)(t.value),"onUpdate:modelValue":u[0]||(u[0]=r=>t.value=y(Xe)(r)),search:l.value,"onUpdate:search":[u[1]||(u[1]=r=>l.value=r),c],clearable:"","no-data-text":l.value.length?"Aucun profil ne correspond à votre recherche.":"Veuillez entrer une recherche."},null,8,["label","readonly","items","model-value","search","no-data-text"]))}}),Ml=j({__name:"RequestProgressCard",props:{title:{},current:{},total:{}},setup(e){const o=e;return(t,d)=>(f(),k(ce,{title:o.title},{default:n(()=>[a(de,null,{default:n(()=>[a(Ia,{max:o.total,"model-value":o.current,color:"primary",height:"24"},{default:n(()=>[g(F(o.current)+" / "+F(o.total),1)]),_:1},8,["max","model-value"])]),_:1})]),_:1},8,["title"]))}}),Rl=j({__name:"ReglementsCard",props:{data:{}},setup(e){const o=e;function t(l){return(o.data.Dossiers||{})[l.Participant.IdDossier]}const d=M(()=>(o.data.Participants||[]).filter(l=>t(l).Reglement==Da.Complet).length);return(l,s)=>(f(),k(ce,{title:"Suivi du règlement",subtitle:`${d.value} / ${o.data.Participants?.length||0} complet`},{default:n(()=>[a(de,null,{default:n(()=>[a(Ie,null,{default:n(()=>[(f(!0),te(X,null,be(e.data.Participants,i=>(f(),k(ae,{title:y(fe).NOMPrenom(i.Personne),subtitle:t(i).Responsable},{append:n(()=>[a(me,{"prepend-icon":"mdi-currency-eur",color:y(L).colorStatutPaiement(t(i).Reglement)},{default:n(()=>[g(F(y(Ta)[t(i).Reglement]),1)]),_:2},1032,["color"])]),_:2},1032,["title","subtitle"]))),256))]),_:1})]),_:1})]),_:1},8,["subtitle"]))}}),Bl=j({__name:"SelectCamp",props:Te({label:{},camps:{},readonly:{type:Boolean},defaultStyle:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const o=e,t=Ve(e,"modelValue"),d=z(!1),l=M(()=>o.camps.filter(s=>d.value?!0:!s.IsOld).map(s=>({title:s.Label,value:s.Id})));return(s,i)=>(f(),k(rt,{density:o.defaultStyle?void 0:"compact",variant:o.defaultStyle?void 0:"outlined",label:o.label,readonly:o.readonly,items:l.value,clearable:"","model-value":y(Ke)(t.value),"onUpdate:modelValue":i[1]||(i[1]=c=>t.value=y(Xe)(c)),"no-data-text":"Aucun séjour n'existe.","hide-details":"",autocomplete:"off"},{prepend:n(()=>[a(De,{text:d.value?"Masquer les séjours terminés":"Afficher les séjours terminés"},{activator:n(({props:c})=>[a(Q,E({size:"small",variant:d.value?"tonal":"flat"},c,{icon:"mdi-history",onClick:i[0]||(i[0]=p=>d.value=!d.value)}),null,16,["variant"])]),_:1},8,["text"])]),_:1},8,["density","variant","label","readonly","items","model-value"]))}}),ml=300,fl=j({__name:"SelectDossier",props:Te({readonly:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const o=e,t=Ve(e,"modelValue"),d=z([]);Ae(s);function l(r){return{title:r.Responsable,subtitle:r.Participants,value:r.Id}}async function s(){const r=t.value;if(r==0)return;const m=await tt.DossiersSearch(Ga(r));m!==void 0&&(d.value=(m.Dossiers||[]).map(l))}const i=z("");async function c(){if(!i.value)return;const r=ct();r.Pattern=i.value;const m=await tt.DossiersSearch(r);m!==void 0&&(d.value=(m.Dossiers||[]).map(l))}let p;function u(r){i.value=r||"",clearTimeout(p),p=setTimeout(c,ml)}return(r,m)=>(f(),k(dt,{label:"Dossier",variant:"outlined",density:"compact",readonly:o.readonly,"hide-details":"",items:d.value,"no-filter":"","model-value":y(Ke)(t.value),"onUpdate:modelValue":m[0]||(m[0]=b=>t.value=y(Xe)(b)),search:i.value,"onUpdate:search":[m[1]||(m[1]=b=>i.value=b),u],clearable:"","no-data-text":i.value.length?"Aucun dossier ne correspond à votre recherche.":"Veuillez entrer une recherche."},{item:n(({item:b,props:I})=>[a(ae,E(I,{title:b.title,subtitle:b.raw.subtitle}),null,16,["title","subtitle"])]),_:1},8,["readonly","items","model-value","search","no-data-text"]))}}),vt=j({__name:"StatutParticipantField",props:Te({hideDetails:{type:Boolean},readonly:{type:Boolean},rules:{},restrictItems:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const o=e,t=Ve(e,"modelValue"),d=M(()=>Ma(st).filter(l=>o.restrictItems===void 0||o.restrictItems.includes(l.value)).map(l=>({value:l.value,title:l.title,format:L.statutParticipant(l.value)})));return(l,s)=>(f(),k(rt,{label:"Statut",variant:"outlined",density:"compact",items:d.value,readonly:o.readonly,"hide-details":o.hideDetails,modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=i=>t.value=i),rules:o.rules},{item:n(({item:i,props:c})=>[a(ae,E(c,{title:i.title}),{prepend:n(()=>[a(O,{color:i.raw.format.color},{default:n(()=>[g(F(i.raw.format.icon),1)]),_:2},1032,["color"])]),_:2},1040,["title"])]),selection:n(({item:i})=>[a(ae,{title:i.title,density:"compact"},{prepend:n(()=>[a(O,{color:i.raw.format.color,size:"small"},{default:n(()=>[g(F(i.raw.format.icon),1)]),_:2},1032,["color"])]),_:2},1032,["title"])]),_:1},8,["items","readonly","hide-details","modelValue","rules"]))}}),El=j({__name:"ParticipantEdit",props:{participant:{},personne:{},api:{},hidePersonneDossier:{type:Boolean},readonlyStatut:{type:Boolean}},emits:["save"],setup(e,{emit:o}){const t=e,d=o,l=z(Ra(t.participant)),s=M(()=>!!(l.value.IdPersonne&&l.value.IdDossier));return(i,c)=>{const p=vl,u=fl,r=Ya;return f(),k(ce,{title:"Editer le participant"},{default:n(()=>[a(de,null,{default:n(()=>[a(Ka,null,{default:n(()=>[t.hidePersonneDossier?ue("",!0):(f(),k(Z,{key:0},{default:n(()=>[a(S,null,{default:n(()=>[a(p,{label:"Personne",modelValue:l.value.IdPersonne,"onUpdate:modelValue":c[0]||(c[0]=m=>l.value.IdPersonne=m),"initial-personne":y(fe).label(t.personne),api:t.api},null,8,["modelValue","initial-personne","api"])]),_:1}),a(S,null,{default:n(()=>[a(u,{modelValue:l.value.IdDossier,"onUpdate:modelValue":c[1]||(c[1]=m=>l.value.IdDossier=m)},null,8,["modelValue"])]),_:1})]),_:1})),a(Z,null,{default:n(()=>[a(S,null,{default:n(()=>[a(vt,{modelValue:l.value.Statut,"onUpdate:modelValue":c[2]||(c[2]=m=>l.value.Statut=m),"hide-details":"",readonly:t.readonlyStatut},null,8,["modelValue","readonly"])]),_:1})]),_:1}),a(Z,null,{default:n(()=>[a(S,null,{default:n(()=>[a(r,{modelValue:l.value.Navette,"onUpdate:modelValue":c[3]||(c[3]=m=>l.value.Navette=m)},null,8,["modelValue"])]),_:1}),a(S,null,{default:n(()=>[a(Ee,{modelValue:l.value.Commentaire,"onUpdate:modelValue":c[4]||(c[4]=m=>l.value.Commentaire=m),label:"Commentaire",density:"compact",variant:"outlined"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),a(ze,null,{default:n(()=>[a(pe),a(Q,{disabled:!s.value,onClick:c[5]||(c[5]=m=>d("save",l.value))},{default:n(()=>[...c[6]||(c[6]=[g("Enregistrer",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})}}}),Al=j({__name:"ParticipantRow",props:{participant:{},index:{}},setup(e){const o=e,t=M(()=>"mx-2 px-2 rounded "+(o.index%2==0?"bg-grey-lighten-4":""));return(d,l)=>(f(),k(Z,{"no-gutters":"",class:_e(t.value)},{default:n(()=>[a(S,{"align-self":"center",cols:"3"},{default:n(()=>[a(ae,{title:y(fe).NOMPrenom(o.participant.Personne),class:"px-0"},{prepend:n(()=>[o.participant.Participant.Statut!=y(xe).Inscrit?(f(),k(De,{key:0,text:y(st)[o.participant.Participant.Statut]},{activator:n(({props:s})=>[a(O,E({color:y(L).statutParticipant(o.participant.Participant.Statut).color},s),{default:n(()=>[g(F(y(L).statutParticipant(o.participant.Participant.Statut).icon),1)]),_:1},16,["color"])]),_:1},8,["text"])):ue("",!0)]),_:1},8,["title"])]),_:1}),a(S,{"align-self":"center",cols:"1",class:"text-center"},{default:n(()=>[a(O,{class:"ma-2 mr-4"},{default:n(()=>[g(F(y(L).sexeIcon(o.participant.Personne.Sexe)),1)]),_:1})]),_:1}),a(S,{"align-self":"center",cols:"1"},{default:n(()=>[a(Z,{"no-gutters":""},{default:n(()=>[a(S,{"align-self":"end",class:"text-center"},{default:n(()=>[g(F(y(L).dateNaissance(o.participant.Personne.DateNaissance)),1)]),_:1}),a(S,{"align-self":"end",cols:"auto"},{default:n(()=>[o.participant.HasBirthday?(f(),k(De,{key:0,text:`${o.participant.Personne.Prenom} a son anniveraire pendant le séjour !`},{activator:n(({props:s})=>[a(O,E(s,{color:"pink"}),{default:n(()=>[...l[0]||(l[0]=[g("mdi-cake-variant",-1)])]),_:1},16)]),_:1},8,["text"])):ue("",!0)]),_:1})]),_:1})]),_:1}),a(S,{"align-self":"center",cols:"1",class:"text-center"},{default:n(()=>[g(F(o.participant.Age)+" ans ",1)]),_:1}),a(S,{"align-self":"center",cols:"1",class:"text-center"},{default:n(()=>[g(F(o.participant.Participant.Navette==y(Ba).NoBus?"-":y(Ea)[o.participant.Participant.Navette]),1)]),_:1}),a(S,{"align-self":"center"},{default:n(()=>[g(F(o.participant.Participant.Commentaire),1)]),_:1}),a(pe),a(S,{cols:"2","align-self":"center"},{default:n(()=>[g(F(y(L).time(o.participant.MomentInscription)),1)]),_:1}),a(S,{"align-self":"center",cols:"auto"},{default:n(()=>[a(Ue,null,{activator:n(({props:s})=>[a(Q,E(s,{icon:"mdi-dots-vertical",size:"x-small"}),null,16)]),default:n(()=>[Ye(d.$slots,"actions")]),_:3})]),_:3})]),_:3},8,["class"]))}}),$l=j({__name:"ParticipantRowHeader",setup(e){return(o,t)=>(f(),k(Z,{"no-gutters":"",class:"mx-2 px-2"},{default:n(()=>[a(S,{class:"font-weight-bold","align-self":"center",cols:"3"},{default:n(()=>[...t[0]||(t[0]=[g(" Participant ",-1)])]),_:1}),a(S,{class:"font-weight-bold text-center","align-self":"center",cols:"1"},{default:n(()=>[...t[1]||(t[1]=[g(" Sexe ",-1)])]),_:1}),a(S,{class:"font-weight-bold text-center","align-self":"center",cols:"1"},{default:n(()=>[...t[2]||(t[2]=[g(" Date de naissance ",-1)])]),_:1}),a(S,{class:"font-weight-bold text-center","align-self":"center",cols:"1"},{default:n(()=>[...t[3]||(t[3]=[g(" Age ",-1)])]),_:1}),a(S,{class:"font-weight-bold text-center","align-self":"center",cols:"1"},{default:n(()=>[...t[4]||(t[4]=[g(" Navette ",-1)])]),_:1}),a(S,{class:"font-weight-bold","align-self":"center"},{default:n(()=>[...t[5]||(t[5]=[g(" Commentaire ",-1)])]),_:1}),a(pe),a(S,{class:"font-weight-bold text-center",cols:"2"},{default:n(()=>[...t[6]||(t[6]=[g(" Inscription ",-1)])]),_:1}),a(S,{cols:"auto"},{default:n(()=>[a(Q,{size:"x-small",color:"white",icon:"",flat:""})]),_:1})]),_:1}))}}),pl=j({__name:"CardValideParticipantRow",props:Te({participant:{},statut:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const o=e,t=Ve(e,"modelValue");function d(l){return l.AgeMin?l.AgeMax?l.EquilibreGF?l.Place?"":"Camp complet":"Equilibre G./F.":`Trop âgé${L.accord(o.participant.Personne.Sexe)}`:"Trop jeune"}return(l,s)=>{const i=vt;return f(),k(Z,null,{default:n(()=>[a(S,{cols:"4","align-self":"center"},{default:n(()=>[a(ae,{title:y(fe).label(o.participant.Personne),subtitle:y(ut).label(o.participant.Camp)},null,8,["title","subtitle"])]),_:1}),a(S,{cols:"3","align-self":"center",class:"text-center"},{default:n(()=>[o.statut.Statut!=y(xe).Inscrit?(f(),k(me,{key:0,color:"warning","prepend-icon":"mdi-alert"},{default:n(()=>[g(F(d(o.statut.Causes)),1)]),_:1})):ue("",!0)]),_:1}),a(S,{"align-self":"center"},{default:n(()=>[o.statut.Validable?(f(),k(i,{key:0,modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=c=>t.value=c),"hide-details":"",readonly:!o.statut.AllowedChanges?.length,"restrict-items":(o.statut.AllowedChanges||[]).concat(o.statut.Statut)},null,8,["modelValue","readonly","restrict-items"])):o.participant.Participant.Statut!=y(xe).AStatuer?(f(),k(me,{key:1,size:"small"},{default:n(()=>[...s[1]||(s[1]=[g(" Inscription déjà validée. ",-1)])]),_:1})):(f(),k(me,{key:2,size:"small"},{default:n(()=>[...s[2]||(s[2]=[g(" Seul le centre peut accepter cette inscription. ",-1)])]),_:1}))]),_:1})]),_:1})}}}),Fl=j({__name:"CardValide",props:{inscription:{},idParticipants:{}},emits:["valide"],setup(e,{emit:o}){const t=e,d=o,l=M(()=>(t.inscription.Participants||[]).filter(c=>t.idParticipants?t.idParticipants.includes(c.Participant.Id):!0)),s=z(Object.fromEntries(l.value.filter(c=>(t.inscription.StatutHints||{})[c.Participant.Id].Validable).map(c=>[c.Participant.Id,(t.inscription.StatutHints||{})[c.Participant.Id].Statut]))),i=M(()=>Object.values(s.value).length>0);return(c,p)=>(f(),k(ce,{title:"Valider l'inscription",subtitle:"Un mail de confirmation va être envoyé."},{default:n(()=>[a(de,null,{default:n(()=>[(f(!0),te(X,null,be(l.value,u=>(f(),k(pl,{participant:u,statut:(t.inscription.StatutHints||{})[u.Participant.Id],modelValue:s.value[u.Participant.Id],"onUpdate:modelValue":r=>s.value[u.Participant.Id]=r},null,8,["participant","statut","modelValue","onUpdate:modelValue"]))),256))]),_:1}),a(ze,null,{default:n(()=>[a(Q,{onClick:p[0]||(p[0]=u=>d("valide",s.value,!1)),disabled:!i.value},{default:n(()=>[...p[2]||(p[2]=[g("Valider sans notification",-1)])]),_:1},8,["disabled"]),a(pe),a(Q,{onClick:p[1]||(p[1]=u=>d("valide",s.value,!0)),disabled:!i.value},{default:n(()=>[...p[3]||(p[3]=[g("Valider",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1}))}}),gl=300,yl=j({__name:"DebounceField",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(e){const o=e,t=z(""),d=Ve(e,"modelValue");se(()=>d.value,()=>{t.value=d.value});let l;function s(i){if(t.value=i||"",clearTimeout(l),!i){d.value=t.value;return}l=setTimeout(()=>{d.value=t.value},gl)}return(i,c)=>(f(),k(Ee,E(o,{modelValue:t.value,"onUpdate:modelValue":[c[0]||(c[0]=p=>t.value=p),s]}),{"append-inner":n(()=>[Ye(i.$slots,"append-inner")]),append:n(()=>[Ye(i.$slots,"append")]),_:3},16,["modelValue"]))}}),hl={key:0},bl=j({__name:"CardSimilaires",props:{personne:{},api:{}},emits:["identifie"],setup(e,{emit:o}){const t=e,d=o;Ae(s);const l=z([]);async function s(){const I=await t.api.SearchSimilaires({idPersonne:t.personne.Id});I!==void 0&&(l.value=I||[])}const i=z(!1),c=z(""),p=z([]);async function u(){if((c.value||"").length<3)return;const I=await t.api.SelectPersonne({search:c.value});I!==void 0&&(p.value=I||[])}function r(){d("identifie",{IdTemporaire:t.personne.Id,Rattache:!1,RattacheTo:0})}function m(I){d("identifie",{IdTemporaire:t.personne.Id,Rattache:!0,RattacheTo:I})}function b(I){const C=Math.floor(I*2);return`rgb(${255-C},${C}, 15)`}return(I,C)=>{const N=yl;return f(),k(ce,{title:"Identifier le profil",width:"600px",subtitle:i.value?"":"Liste des profils similaires"},{default:n(()=>[a(de,{class:"pb-0"},{default:n(()=>[i.value?(f(),te("div",hl,[a(N,{modelValue:c.value,"onUpdate:modelValue":[C[0]||(C[0]=B=>c.value=B),u],label:"Rechercher un profil",density:"comfortable",clearable:"",autofocus:"","hide-details":""},null,8,["modelValue"]),a(Ie,{density:"compact"},{default:n(()=>[c.value.length>=3&&!p.value.length?(f(),k(Z,{key:0,class:"ma-2","no-gutters":""},{default:n(()=>[a(S,{class:"text-center"},{default:n(()=>[...C[3]||(C[3]=[R("i",null,"Aucun profil ne correspond à votre recherche.",-1)])]),_:1})]),_:1})):ue("",!0),(f(!0),te(X,null,be(p.value,(B,x)=>(f(),k(ae,{key:x,title:B.Label,subtitle:y(L).dateNaissance(B.DateNaissance),"append-icon":y(L).sexeIcon(B.Sexe),onClick:h=>m(B.Id)},null,8,["title","subtitle","append-icon","onClick"]))),128))]),_:1})])):(f(),k(Ie,{key:1,density:"compact"},{default:n(()=>[l.value.length?ue("",!0):(f(),k(Z,{key:0,class:"mx-2","no-gutters":""},{default:n(()=>[a(S,{class:"text-center"},{default:n(()=>[...C[4]||(C[4]=[R("i",null,"Aucun profil existant sur la base n'est similaire.",-1)])]),_:1})]),_:1})),(f(!0),te(X,null,be(l.value,(B,x)=>(f(),k(ae,{key:x,title:B.Personne.Label,subtitle:y(L).dateNaissance(B.Personne.DateNaissance),"prepend-icon":y(L).sexeIcon(B.Personne.Sexe),onClick:h=>m(B.Personne.Id)},{append:n(()=>[a(me,{color:b(B.ScorePercent)},{default:n(()=>[g(F(B.ScorePercent)+" % ",1)]),_:2},1032,["color"])]),_:2},1032,["title","subtitle","prepend-icon","onClick"]))),128))]),_:1}))]),_:1}),a(ze,null,{default:n(()=>[a(Q,{onClick:C[1]||(C[1]=B=>{i.value=!i.value,c.value=""})},{default:n(()=>[g(F(i.value?"Retour aux suggestions":"Chercher manuellement"),1)]),_:1}),a(pe),a(Q,{variant:"elevated",elevation:"1",onClick:C[2]||(C[2]=B=>r()),"prepend-icon":"mdi-plus"},{default:n(()=>[...C[5]||(C[5]=[g(" Créer un nouveau profil",-1)])]),_:1})]),_:1})]),_:1},8,["subtitle"])}}}),nt=j({__name:"InscriptionEtatcivilCols",props:{personne:{},api:{},acteur:{}},emits:["identifie"],setup(e,{emit:o}){const t=e,d=o;return(l,s)=>(f(),te(X,null,[a(S,{"align-self":"center",cols:"4"},{default:n(()=>[a(De,null,{activator:n(({props:i})=>[t.personne.IsTemp?(f(),k(Ue,{key:0,"close-on-content-click":!1},{activator:n(({props:c})=>[a(me,E({label:""},E(c,i)),{prepend:n(()=>[a(O,{class:"mr-2",icon:"mdi-alert",color:"orange"})]),default:n(()=>[g(" "+F(y(fe).label(t.personne)),1)]),_:1},16)]),default:n(()=>[t.acteur==y(je).Directeur?(f(),k(ce,{key:0},{default:n(()=>[a(de,null,{default:n(()=>[...s[1]||(s[1]=[g(" Le rapprochement de ce profil requiert une action du centre d'inscription. ",-1)])]),_:1})]),_:1})):(f(),k(bl,{key:1,api:t.api,personne:t.personne,onIdentifie:s[0]||(s[0]=c=>d("identifie",c))},null,8,["api","personne"]))]),_:2},1024)):(f(),te("div",Aa(E({key:1},i)),F(y(fe).label(t.personne)),17))]),default:n(()=>[t.personne.IsTemp?(f(),te(X,{key:0},[g(" Ce profil est temporaire et doit être identifié. ")],64)):(f(),te(X,{key:1},[g(" Ce profil est identifié (ID: "+F(t.personne.Id)+"). ",1)],64))]),_:1})]),_:1}),a(S,{"align-self":"center",cols:"auto"},{default:n(()=>[a(O,{icon:y(L).sexeIcon(t.personne.Sexe),class:"mx-4"},null,8,["icon"])]),_:1}),a(S,{"align-self":"center",cols:"2"},{default:n(()=>[s[2]||(s[2]=R("small",{class:"text-grey"},"né(e) le",-1)),g(" "+F(y(L).dateNaissance(t.personne.DateNaissance)),1)]),_:1})],64))}}),Nl=j({__name:"InscriptionRow",props:{inscription:{},api:{},user:{},hideDelete:{type:Boolean},alreadyValidated:{type:Boolean}},emits:["identifie","valide","merge","delete","deleteParticipant"],setup(e,{emit:o}){const t=e,d=o,l=M(()=>t.user==null?je.Backoffice:je.Directeur),s=M(()=>!t.inscription.Responsable.IsTemp&&!!t.inscription.Participants?.every(p=>!p.Personne.IsTemp));function i(p){return s.value&&(t.user===null||t.user==p.IdCamp)}const c=z(null);return(p,u)=>(f(),k(ce,{subtitle:y(L).time(t.inscription.Dossier.MomentInscription,!0,!0)},{append:n(()=>[e.alreadyValidated?(f(),k(De,{key:0,text:"En attente de validation par les autres séjours"},{activator:n(({props:r})=>[a(O,E(r,{color:"green"}),{default:n(()=>[...u[7]||(u[7]=[g(" mdi-check ",-1)])]),_:1},16)]),_:1})):(f(),k(Q,{key:1,disabled:!s.value||!t.inscription.Participants?.length,onClick:u[0]||(u[0]=r=>d("valide")),"prepend-icon":"mdi-check-all"},{default:n(()=>[...u[8]||(u[8]=[g(" Tout valider",-1)])]),_:1},8,["disabled"])),t.hideDelete?ue("",!0):(f(),k(Ue,{key:2},{activator:n(({props:r})=>[a(Q,E(r,{variant:"flat",icon:"mdi-dots-vertical",size:"small",class:"ml-1"}),null,16)]),default:n(()=>[a(Ie,{density:"compact"},{default:n(()=>[a(ae,{"prepend-icon":"mdi-file-move",onClick:u[1]||(u[1]=r=>d("merge")),title:"Fusionner vers ..."}),a(We),a(ae,{title:"Supprimer","prepend-icon":"mdi-delete",onClick:u[2]||(u[2]=r=>d("delete"))})]),_:1})]),_:1}))]),default:n(()=>[a(de,null,{default:n(()=>[a(Z,null,{default:n(()=>[a(S,{cols:"7"},{default:n(()=>[a(Z,{"no-gutters":"",class:"my-0 py-1"},{default:n(()=>[a(nt,{api:t.api,personne:t.inscription.Responsable,acteur:l.value,onIdentifie:u[3]||(u[3]=r=>d("identifie",r))},null,8,["api","personne","acteur"])]),_:1}),a(We,{thickness:"1"}),(f(!0),te(X,null,be(t.inscription.Participants,(r,m)=>(f(),k(Z,{"no-gutters":"",class:"my-0 py-1",key:m},{default:n(()=>[a(nt,{api:t.api,personne:r.Personne,acteur:l.value,onIdentifie:u[4]||(u[4]=b=>d("identifie",b))},null,8,["api","personne","acteur"]),a(S,{"align-self":"center",cols:"3",class:"text-center"},{default:n(()=>[g(F(y(ut).label(r.Camp)),1)]),_:2},1024),a(pe),a(S,{"align-self":"center",cols:"1",class:"pr-2 text-center"},{default:n(()=>[r.Participant.Statut!=y(xe).AStatuer?(f(),k(O,{key:0,color:y(L).statutParticipant(r.Participant.Statut).color,icon:y(L).statutParticipant(r.Participant.Statut).icon},null,8,["color","icon"])):i(r.Participant)?(f(),k(Q,{key:1,size:"small",title:"Valider ce participant...",onClick:b=>d("valide",r.Participant.Id)},{default:n(()=>[a(O,{icon:y(L).statutParticipant(y(xe).AStatuer).icon},null,8,["icon"]),a(O,null,{default:n(()=>[...u[9]||(u[9]=[g("mdi-arrow-right",-1)])]),_:1}),a(O,{icon:y(L).statutParticipant((t.inscription.StatutHints||{})[r.Participant.Id].Statut).icon,color:y(L).statutParticipant((t.inscription.StatutHints||{})[r.Participant.Id].Statut).color},null,8,["icon","color"])]),_:2},1032,["onClick"])):ue("",!0)]),_:2},1024),t.hideDelete?ue("",!0):(f(),k(S,{key:0,"align-self":"center",cols:"auto"},{default:n(()=>[a(Q,{icon:"",size:"x-small",onClick:b=>c.value=r,title:"Supprimer ce participant..."},{default:n(()=>[a(O,{color:"red"},{default:n(()=>[...u[10]||(u[10]=[g("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])]),_:2},1024))]),_:2},1024))),128))]),_:1}),a(S,{cols:"5"},{default:n(()=>[a(Z,{"no-gutters":""},{default:n(()=>[a(S,{cols:"auto",class:"px-2"},{default:n(()=>[a(O,{color:t.inscription.Message.length?"secondary":"grey"},{default:n(()=>[...u[11]||(u[11]=[g("mdi-message",-1)])]),_:1},8,["color"])]),_:1}),a(S,null,{default:n(()=>[(f(!0),te(X,null,be(t.inscription.Message.split(`
`),(r,m)=>(f(),te("div",{key:m},F(r),1))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(Qa,{"model-value":c.value!=null,"onUpdate:modelValue":u[6]||(u[6]=r=>c.value=null),"max-width":"600px"},{default:n(()=>[c.value?(f(),k(ce,{key:0,title:"Confirmation"},{default:n(()=>[a(de,null,{default:n(()=>[u[12]||(u[12]=g(" Confirmez-vous la suppression du participant ",-1)),R("b",null,F(y(fe).label(c.value.Personne)),1),u[13]||(u[13]=g(" ? ",-1)),u[14]||(u[14]=R("br",null,null,-1)),u[15]||(u[15]=R("br",null,null,-1)),u[16]||(u[16]=g(" Attention, cette opération est irréversible. ",-1))]),_:1}),a(ze,null,{default:n(()=>[a(pe),a(Q,{color:"red",onClick:u[5]||(u[5]=r=>{d("deleteParticipant",c.value.Participant.Id),c.value=null})},{default:n(()=>[...u[17]||(u[17]=[g("Supprimer",-1)])]),_:1})]),_:1})]),_:1})):ue("",!0)]),_:1},8,["model-value"])]),_:1},8,["subtitle"]))}});export{Il as V,vl as _,Dl as a,Tl as b,tt as c,dt as d,Ml as e,$l as f,fl as g,El as h,xl as i,Bl as j,Rl as k,Al as l,ul as m,Nl as n,Fl as o,yl as p,ct as q,Ga as r};
