// Code generated by gomacro/typescript/axios_api.go. DO NOT EDIT

import type { AxiosResponse } from "axios";
import Axios from "axios";

// AAAA-MM-YY date format
export type Date_ = string & { __opaque__: "Date" };

export type Int = number & { __opaque__: "Int" };
// registro/controllers/inscriptions.CampExt
export interface CampExt {
  Id: IdCamp;
  Nom: string;
  DateDebut: Date;
  Duree: Int;
  Lieu: string;
  Description: string;
  Navette: Navette;
  Places: Int;
  AgeMin: Int;
  AgeMax: Int;
  Prix: string;
  Direction: string;
}
// registro/controllers/inscriptions.DataInscription
export interface DataInscription {
  Camps: CampExt[] | null;
  InitialInscription: Inscription;
  PreselectedCamp: IdCamp;
  SupportBonsCAF: boolean;
  SupportANCV: boolean;
  EmailRetraitMedia: string;
  ShowCharteConduite: boolean;
}
// registro/controllers/inscriptions.Inscription
export interface Inscription {
  Responsable: ResponsableLegal;
  ResponsablePreIdent: string;
  Message: string;
  CopiesMails: Mails;
  PartageAdressesOK: boolean;
  DemandeFondSoutien: boolean;
  Participants: Participant[] | null;
}
// registro/controllers/inscriptions.Participant
export interface Participant {
  PreIdent: string;
  IdCamp: IdCamp;
  Nom: string;
  Prenom: string;
  DateNaissance: Date;
  Sexe: Sexe;
  Nationnalite: Nationnalite;
}
// registro/controllers/inscriptions.SearchHistoryOut
export interface SearchHistoryOut {
  MailFound: boolean;
}
// registro/sql/camps.IdCamp
export type IdCamp = Int;
// registro/sql/camps.Navette
export interface Navette {
  Actif: boolean;
  Commentaire: string;
}
// registro/sql/inscriptions.ResponsableLegal
export interface ResponsableLegal {
  Nom: string;
  Prenom: string;
  DateNaissance: Date;
  Sexe: Sexe;
  Mail: string;
  Tels: Tels;
  Adresse: string;
  CodePostal: string;
  Ville: string;
  Pays: Pays;
}
// registro/sql/personnes.Mails
export type Mails = string[] | null;
// registro/sql/personnes.Nationnalite
export const Nationnalite = {
  Autre: 0,
  Francaise: 1,
  Suisse: 2,
} as const;
export type Nationnalite = (typeof Nationnalite)[keyof typeof Nationnalite];

export const NationnaliteLabels: { [key in Nationnalite]: string } = {
  [Nationnalite.Autre]: "Autre",
  [Nationnalite.Francaise]: "Fran√ßaise",
  [Nationnalite.Suisse]: "Suisse",
};

// registro/sql/personnes.Pays
export type Pays = string;
// registro/sql/personnes.Sexe
export const Sexe = {
  Empty: 0,
  Woman: 1,
  Man: 2,
} as const;
export type Sexe = (typeof Sexe)[keyof typeof Sexe];

export const SexeLabels: { [key in Sexe]: string } = {
  [Sexe.Empty]: "",
  [Sexe.Woman]: "Femme",
  [Sexe.Man]: "Homme",
};

// registro/sql/personnes.Tels
export type Tels = string[] | null;
// registro/sql/shared.Date
export type Date = Date_;

/** AbstractAPI provides auto-generated API calls and should be used 
		as base class for an app controller.
	*/
export abstract class AbstractAPI {
  constructor(
    protected baseUrl: string,
    protected authToken: string,
  ) {}

  protected abstract handleError(error: any): void;

  protected abstract startRequest(): void;

  getHeaders() {
    return { Authorization: "Bearer " + this.authToken };
  }

  protected async rawAnonymous14219075() {
    const fullUrl = this.baseUrl + "/inscription";
    await Axios.get(fullUrl, { headers: this.getHeaders() });
    return true;
  }

  /** Anonymous14219075 wraps rawAnonymous14219075 and handles the error */
  async Anonymous14219075() {
    this.startRequest();
    try {
      const out = await this.rawAnonymous14219075();
      return out;
    } catch (error) {
      this.handleError(error);
    }
  }

  protected async rawConfirmeInscription(params: { "insc-token": string }) {
    const fullUrl = this.baseUrl + "/inscription/confirme";
    await Axios.get(fullUrl, {
      headers: this.getHeaders(),
      params: { "insc-token": params["insc-token"] },
    });
    return true;
  }

  /** ConfirmeInscription wraps rawConfirmeInscription and handles the error */
  async ConfirmeInscription(params: { "insc-token": string }) {
    this.startRequest();
    try {
      const out = await this.rawConfirmeInscription(params);
      return out;
    } catch (error) {
      this.handleError(error);
    }
  }

  protected async rawLoadData(params: {
    preselected: string;
    preinscription: string;
  }) {
    const fullUrl = this.baseUrl + "/inscription/v1/load";
    const rep: AxiosResponse<DataInscription> = await Axios.get(fullUrl, {
      headers: this.getHeaders(),
      params: {
        preselected: params["preselected"],
        preinscription: params["preinscription"],
      },
    });
    return rep.data;
  }

  /** LoadData wraps rawLoadData and handles the error */
  async LoadData(params: { preselected: string; preinscription: string }) {
    this.startRequest();
    try {
      const out = await this.rawLoadData(params);
      return out;
    } catch (error) {
      this.handleError(error);
    }
  }

  protected async rawSaveInscription(params: Inscription) {
    const fullUrl = this.baseUrl + "/inscription/v1/save";
    await Axios.put(fullUrl, params, { headers: this.getHeaders() });
    return true;
  }

  /** SaveInscription wraps rawSaveInscription and handles the error */
  async SaveInscription(params: Inscription) {
    this.startRequest();
    try {
      const out = await this.rawSaveInscription(params);
      return out;
    } catch (error) {
      this.handleError(error);
    }
  }

  protected async rawSearchHistory(params: { mail: string }) {
    const fullUrl = this.baseUrl + "/inscription/v1/search";
    const rep: AxiosResponse<SearchHistoryOut> = await Axios.get(fullUrl, {
      headers: this.getHeaders(),
      params: { mail: params["mail"] },
    });
    return rep.data;
  }

  /** SearchHistory wraps rawSearchHistory and handles the error */
  async SearchHistory(params: { mail: string }) {
    this.startRequest();
    try {
      const out = await this.rawSearchHistory(params);
      return out;
    } catch (error) {
      this.handleError(error);
    }
  }
}
